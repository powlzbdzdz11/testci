<h1>hhhh</h1>
!(function(e,t){"function"==typeof define&&(define.amd||window.Ember)?define("ig-charts",[],t):e["ig-charts"]=t()})(this,(function(){var requirejs,require,define;return (function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,o,r,s,a,l,u,c,d,h,p,m=t&&t.split("/"),f=_.map,g=f&&f["*"]||{};if(e){for(e=e.split("/"),s=e.length-1,_.nodeIdCompat&&M.test(e[s])&&(e[s]=e[s].replace(M,"")),"."===e[0].charAt(0)&&m&&(p=m.slice(0,m.length-1),e=p.concat(e)),c=0;c<e.length;c++)if("."===(h=e[c]))e.splice(c,1),c-=1;else if(".."===h){if(0===c||1===c&&".."===e[2]||".."===e[c-1])continue;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((m||g)&&f){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),m)for(d=m.length;d>0;d-=1)if((o=f[m.slice(0,d).join("/")])&&(o=o[i])){r=o,a=c;break}if(r)break;!l&&g&&g[i]&&(l=g[i],u=c)}!r&&l&&(r=l,a=u),r&&(n.splice(0,a,r),e=n.join("/"))}return e}function i(t,n){return function(){var i=y.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),d.apply(e,i.concat([t,n]))}}function o(e){return function(t){return n(t,e)}}function r(e){return function(t){m[e]=t}}function s(n){if(t(f,n)){var i=f[n];delete f[n],g[n]=!0,c.apply(e,i)}if(!t(m,n)&&!t(g,n))throw new Error("No "+n);return m[n]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(e){return e?a(e):[]}function u(e){return function(){return _&&_.config&&_.config[e]||{}}}var c,d,h,p,m={},f={},_={},g={},v=Object.prototype.hasOwnProperty,y=[].slice,M=/\.js$/;h=function(e,t){var i,r=a(e),l=r[0],u=t[1];return e=r[1],l&&(l=n(l,u),i=s(l)),l?e=i&&i.normalize?i.normalize(e,o(u)):n(e,u):(e=n(e,u),r=a(e),l=r[0],e=r[1],l&&(i=s(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:i}},p={require:function(e){return i(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},c=function(n,o,a,u){var c,d,_,v,y,M,b,A=[],T=typeof a;if(u=u||n,M=l(u),"undefined"===T||"function"===T){for(o=!o.length&&a.length?["require","exports","module"]:o,y=0;y<o.length;y+=1)if(v=h(o[y],M),"require"===(d=v.f))A[y]=p.require(n);else if("exports"===d)A[y]=p.exports(n),b=!0;else if("module"===d)c=A[y]=p.module(n);else if(t(m,d)||t(f,d)||t(g,d))A[y]=s(d);else{if(!v.p)throw new Error(n+" missing "+d);v.p.load(v.n,i(u,!0),r(d),{}),A[y]=m[d]}_=a?a.apply(m[n],A):void 0,n&&(c&&c.exports!==e&&c.exports!==m[n]?m[n]=c.exports:_===e&&b||(m[n]=_))}else n&&(m[n]=a)},requirejs=require=d=function(t,n,i,o,r){if("string"==typeof t)return p[t]?p[t](n):s(h(t,l(n)).f);if(!t.splice){if(_=t,_.deps&&d(_.deps,_.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=o,o=r),o?c(e,t,n,i):setTimeout((function(){c(e,t,n,i)}),4),d},d.config=function(e){return d(e)},requirejs._defined=m,define=function(e,n,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),t(m,e)||t(f,e)||(f[e]=[e,n,i])},define.amd={jQuery:!0}})(),define("node_modules/almond/almond",(function(){})),(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("intl-polyfill",t):e.IntlPolyfill=t()})(this,(function(){"use strict";function e(e){if("function"==typeof Math.log10)return Math.floor(Math.log10(e));var t=Math.round(Math.log(e)*Math.LOG10E);return t-(Number("1e"+t)>e)}function t(e){for(var n in e)(e instanceof t||ke.call(e,n))&&Pe(this,n,{value:e[n],enumerable:!0,writable:!0,configurable:!0})}function n(){Pe(this,"length",{writable:!0,value:0}),arguments.length&&We.apply(this,He.call(arguments))}function i(){if(Ye.disableRegExpRestore)return function(){};for(var e={lastMatch:RegExp.lastMatch||"",leftContext:RegExp.leftContext,multiline:RegExp.multiline,input:RegExp.input},t=!1,i=1;i<=9;i++)t=(e["$"+i]=RegExp["$"+i])||t;return function(){var i=/[.?*+^$[\]\\(){}|-]/g,o=e.lastMatch.replace(i,"\\$&"),r=new n;if(t)for(var s=1;s<=9;s++){var a=e["$"+s];a?(a=a.replace(i,"\\$&"),o=o.replace(a,"("+a+")")):o="()"+o,We.call(r,o.slice(0,o.indexOf("(")+1)),o=o.slice(o.indexOf("(")+1)}var l=Fe.call(r,"")+o;l=l.replace(/(\\\(|\\\)|[^()])+/g,(function(e){return"[\\s\\S]{"+e.replace("\\","").length+"}"}));var u=new RegExp(l,e.multiline?"gm":"g");u.lastIndex=e.leftContext.length,u.exec(e.input)}}function o(e){if(null===e)throw new TypeError("Cannot convert null or undefined to object");return"object"===(void 0===e?"undefined":Re.typeof(e))?e:Object(e)}function r(e){return"number"==typeof e?e:Number(e)}function s(e){var t=r(e);return isNaN(t)?0:0===t||-0===t||t===1/0||t===-1/0?t:t<0?-1*Math.floor(Math.abs(t)):Math.floor(Math.abs(t))}function a(e){var t=s(e);return t<=0?0:t===1/0?Math.pow(2,53)-1:Math.min(t,Math.pow(2,53)-1)}function l(e){return ke.call(e,"__getInternalProperties")?e.__getInternalProperties(ze):Ve(null)}function u(e){$e=e}function c(e){for(var t=e.length;t--;){var n=e.charAt(t);n>="a"&&n<="z"&&(e=e.slice(0,t)+n.toUpperCase()+e.slice(t+1))}return e}function d(e){return!!Ze.test(e)&&(!Xe.test(e)&&!Je.test(e))}function h(e){var t=void 0,n=void 0;e=e.toLowerCase(),n=e.split("-");for(var i=1,o=n.length;i<o;i++)if(2===n[i].length)n[i]=n[i].toUpperCase();else if(4===n[i].length)n[i]=n[i].charAt(0).toUpperCase()+n[i].slice(1);else if(1===n[i].length&&"x"!==n[i])break;e=Fe.call(n,"-"),(t=e.match(Qe))&&t.length>1&&(t.sort(),e=e.replace(RegExp("(?:"+Qe.source+")+","i"),Fe.call(t,""))),ke.call(et.tags,e)&&(e=et.tags[e]),n=e.split("-");for(var r=1,s=n.length;r<s;r++)ke.call(et.subtags,n[r])?n[r]=et.subtags[n[r]]:ke.call(et.extLang,n[r])&&(n[r]=et.extLang[n[r]][0],1===r&&et.extLang[n[1]][1]===n[0]&&(n=He.call(n,r++),s-=1));return Fe.call(n,"-")}function p(){return $e}function m(e){var t=String(e),n=c(t);return!1!==tt.test(n)}function f(e){if(void 0===e)return new n;var t=new n;e="string"==typeof e?[e]:e;for(var i=o(e),r=a(i.length),s=0;s<r;){var l=String(s);if(l in i){var u=i[l];if(null===u||"string"!=typeof u&&"object"!==(void 0===u?"undefined":Re.typeof(u)))throw new TypeError("String or Object type expected");var c=String(u);if(!d(c))throw new RangeError("'"+c+"' is not a structurally valid language tag");c=h(c),-1===xe.call(t,c)&&We.call(t,c)}s++}return t}function _(e,t){for(var n=t;n;){if(xe.call(e,n)>-1)return n;var i=n.lastIndexOf("-");if(i<0)return;i>=2&&"-"===n.charAt(i-2)&&(i-=2),n=n.substring(0,i)}}function g(e,n){for(var i=0,o=n.length,r=void 0,s=void 0,a=void 0;i<o&&!r;)s=n[i],a=String(s).replace(nt,""),r=_(e,a),i++;var l=new t;if(void 0!==r){if(l["[[locale]]"]=r,String(s)!==String(a)){var u=s.match(nt)[0],c=s.indexOf("-u-");l["[[extension]]"]=u,l["[[extensionIndex]]"]=c}}else l["[[locale]]"]=p();return l}function v(e,t){return g(e,t)}function y(e,n,i,o,r){if(0===e.length)throw new ReferenceError("No locale data has been provided for this object yet.");var s=i["[[localeMatcher]]"],a=void 0;a="lookup"===s?g(e,n):v(e,n);var l=a["[[locale]]"],u=void 0,c=void 0;if(ke.call(a,"[[extension]]")){var d=a["[[extension]]"];u=String.prototype.split.call(d,"-"),c=u.length}var p=new t;p["[[dataLocale]]"]=l;for(var m="-u",f=0,_=o.length;f<_;){var y=o[f],M=r[l],b=M[y],A=b[0],T="",E=xe;if(void 0!==u){var w=E.call(u,y);if(-1!==w)if(w+1<c&&u[w+1].length>2){var O=u[w+1],I=E.call(b,O);-1!==I&&(A=O,T="-"+y+"-"+A)}else{var S=E(b,"true");-1!==S&&(A="true")}}if(ke.call(i,"[["+y+"]]")){var j=i["[["+y+"]]"];-1!==E.call(b,j)&&j!==A&&(A=j,T="")}p["[["+y+"]]"]=A,m+=T,f++}if(m.length>2){var C=l.indexOf("-x-");if(-1===C)l+=m;else{l=l.substring(0,C)+m+l.substring(C)}l=h(l)}return p["[[locale]]"]=l,p}function M(e,t){for(var i=t.length,o=new n,r=0;r<i;){var s=t[r];void 0!==_(e,String(s).replace(nt,""))&&We.call(o,s),r++}return He.call(o)}function b(e,t){return M(e,t)}function A(e,n,i){var r=void 0,s=void 0;if(void 0!==i&&(i=new t(o(i)),void 0!==(r=i.localeMatcher)&&"lookup"!==(r=String(r))&&"best fit"!==r))throw new RangeError('matcher should be "lookup" or "best fit"');s=void 0===r||"best fit"===r?b(e,n):M(e,n);for(var a in s)ke.call(s,a)&&Pe(s,a,{writable:!1,configurable:!1,value:s[a]});return Pe(s,"length",{writable:!1}),s}function T(e,t,n,i,o){var r=e[t];if(void 0!==r){if(r="boolean"===n?Boolean(r):"string"===n?String(r):r,void 0!==i&&-1===xe.call(i,r))throw new RangeError("'"+r+"' is not an allowed value for `"+t+"`");return r}return o}function E(e,t,n,i,o){var r=e[t];if(void 0!==r){if(r=Number(r),isNaN(r)||r<n||r>i)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(r)}return o}function w(e){for(var t=f(e),n=[],i=t.length,o=0;o<i;)n[o]=t[o],o++;return n}function O(){var e=arguments[0],t=arguments[1];return this&&this!==it?I(o(this),e,t):new it.NumberFormat(e,t)}function I(e,r,s){var a=l(e),u=i();if(!0===a["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");Pe(e,"__getInternalProperties",{value:function(){if(arguments[0]===ze)return a}}),a["[[initializedIntlObject]]"]=!0;var c=f(r);s=void 0===s?{}:o(s);var d=new t,h=T(s,"localeMatcher","string",new n("lookup","best fit"),"best fit");d["[[localeMatcher]]"]=h;var p=Ye.NumberFormat["[[localeData]]"],_=y(Ye.NumberFormat["[[availableLocales]]"],c,d,Ye.NumberFormat["[[relevantExtensionKeys]]"],p);a["[[locale]]"]=_["[[locale]]"],a["[[numberingSystem]]"]=_["[[nu]]"],a["[[dataLocale]]"]=_["[[dataLocale]]"];var g=_["[[dataLocale]]"],v=T(s,"style","string",new n("decimal","percent","currency"),"decimal");a["[[style]]"]=v;var M=T(s,"currency","string");if(void 0!==M&&!m(M))throw new RangeError("'"+M+"' is not a valid currency code");if("currency"===v&&void 0===M)throw new TypeError("Currency code is required when style is currency");var b=void 0;"currency"===v&&(M=M.toUpperCase(),a["[[currency]]"]=M,b=S(M));var A=T(s,"currencyDisplay","string",new n("code","symbol","name"),"symbol");"currency"===v&&(a["[[currencyDisplay]]"]=A);var w=E(s,"minimumIntegerDigits",1,21,1);a["[[minimumIntegerDigits]]"]=w;var O="currency"===v?b:0,I=E(s,"minimumFractionDigits",0,20,O);a["[[minimumFractionDigits]]"]=I;var C="currency"===v?Math.max(I,b):"percent"===v?Math.max(I,0):Math.max(I,3),D=E(s,"maximumFractionDigits",I,20,C);a["[[maximumFractionDigits]]"]=D;var R=s.minimumSignificantDigits,L=s.maximumSignificantDigits;void 0===R&&void 0===L||(R=E(s,"minimumSignificantDigits",1,21,1),L=E(s,"maximumSignificantDigits",R,21,21),a["[[minimumSignificantDigits]]"]=R,a["[[maximumSignificantDigits]]"]=L);var N=T(s,"useGrouping","boolean",void 0,!0);a["[[useGrouping]]"]=N;var k=p[g],P=k.patterns,x=P[v];return a["[[positivePattern]]"]=x.positivePattern,a["[[negativePattern]]"]=x.negativePattern,a["[[boundFormat]]"]=void 0,a["[[initializedNumberFormat]]"]=!0,Ne&&(e.format=j.call(e)),u(),e}function S(e){return void 0!==ot[e]?ot[e]:2}function j(){var e=null!==this&&"object"===Re.typeof(this)&&l(this);if(!e||!e["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(void 0===e["[[boundFormat]]"]){var t=function(e){return L(this,Number(e))},n=Ge.call(t,this);e["[[boundFormat]]"]=n}return e["[[boundFormat]]"]}function C(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=null!==this&&"object"===Re.typeof(this)&&l(this);if(!t||!t["[[initializedNumberFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.NumberFormat object.");return D(this,Number(e))}function D(e,t){for(var n=R(e,t),i=[],o=0,r=0;n.length>r;r++){var s=n[r],a={};a.type=s["[[type]]"],a.value=s["[[value]]"],i[o]=a,o+=1}return i}function R(e,t){var i=l(e),o=i["[[dataLocale]]"],r=i["[[numberingSystem]]"],s=Ye.NumberFormat["[[localeData]]"][o],a=s.symbols[r]||s.symbols.latn,u=void 0;!isNaN(t)&&t<0?(t=-t,u=i["[[negativePattern]]"]):u=i["[[positivePattern]]"];for(var c=new n,d=u.indexOf("{",0),h=0,p=0,m=u.length;d>-1&&d<m;){if(-1===(h=u.indexOf("}",d)))throw new Error;if(d>p){var f=u.substring(p,d);We.call(c,{"[[type]]":"literal","[[value]]":f})}var _=u.substring(d+1,h);if("number"===_)if(isNaN(t)){var g=a.nan;We.call(c,{"[[type]]":"nan","[[value]]":g})}else if(isFinite(t)){"percent"===i["[[style]]"]&&isFinite(t)&&(t*=100);var v=void 0;v=ke.call(i,"[[minimumSignificantDigits]]")&&ke.call(i,"[[maximumSignificantDigits]]")?N(t,i["[[minimumSignificantDigits]]"],i["[[maximumSignificantDigits]]"]):k(t,i["[[minimumIntegerDigits]]"],i["[[minimumFractionDigits]]"],i["[[maximumFractionDigits]]"]),rt[r]?(function(){var e=rt[r];v=String(v).replace(/\d/g,(function(t){return e[t]}))})():v=String(v);var y=void 0,M=void 0,b=v.indexOf(".",0);if(b>0?(y=v.substring(0,b),M=v.substring(b+1,b.length)):(y=v,M=void 0),!0===i["[[useGrouping]]"]){var A=a.group,T=[],E=s.patterns.primaryGroupSize||3,w=s.patterns.secondaryGroupSize||E;if(y.length>E){var O=y.length-E,I=O%w,S=y.slice(0,I);for(S.length&&We.call(T,S);I<O;)We.call(T,y.slice(I,I+w)),I+=w;We.call(T,y.slice(O))}else We.call(T,y);if(0===T.length)throw new Error;for(;T.length;){var j=Ue.call(T);We.call(c,{"[[type]]":"integer","[[value]]":j}),T.length&&We.call(c,{"[[type]]":"group","[[value]]":A})}}else We.call(c,{"[[type]]":"integer","[[value]]":y});if(void 0!==M){var C=a.decimal;We.call(c,{"[[type]]":"decimal","[[value]]":C}),We.call(c,{"[[type]]":"fraction","[[value]]":M})}}else{var D=a.infinity;We.call(c,{"[[type]]":"infinity","[[value]]":D})}else if("plusSign"===_){var R=a.plusSign;We.call(c,{"[[type]]":"plusSign","[[value]]":R})}else if("minusSign"===_){var L=a.minusSign;We.call(c,{"[[type]]":"minusSign","[[value]]":L})}else if("percentSign"===_&&"percent"===i["[[style]]"]){var P=a.percentSign;We.call(c,{"[[type]]":"literal","[[value]]":P})}else if("currency"===_&&"currency"===i["[[style]]"]){var x=i["[[currency]]"],V=void 0;"code"===i["[[currencyDisplay]]"]?V=x:"symbol"===i["[[currencyDisplay]]"]?V=s.currencies[x]||x:"name"===i["[[currencyDisplay]]"]&&(V=x),We.call(c,{"[[type]]":"currency","[[value]]":V})}else{var H=u.substring(d,h);We.call(c,{"[[type]]":"literal","[[value]]":H})}p=h+1,d=u.indexOf("{",p)}if(p<m){var B=u.substring(p,m);We.call(c,{"[[type]]":"literal","[[value]]":B})}return c}function L(e,t){for(var n=R(e,t),i="",o=0;n.length>o;o++){i+=n[o]["[[value]]"]}return i}function N(t,n,i){var o=i,r=void 0,s=void 0;if(0===t)r=Fe.call(Array(o+1),"0"),s=0;else{s=e(Math.abs(t));var a=Math.round(Math.exp(Math.abs(s-o+1)*Math.LN10));r=String(Math.round(s-o+1<0?t*a:t/a))}if(s>=o)return r+Fe.call(Array(s-o+1+1),"0");if(s===o-1)return r;if(s>=0?r=r.slice(0,s+1)+"."+r.slice(s+1):s<0&&(r="0."+Fe.call(Array(1-(s+1)),"0")+r),r.indexOf(".")>=0&&i>n){for(var l=i-n;l>0&&"0"===r.charAt(r.length-1);)r=r.slice(0,-1),l--;"."===r.charAt(r.length-1)&&(r=r.slice(0,-1))}return r}function k(e,t,n,i){var o=i,r=Math.pow(10,o)*e,s=0===r?"0":r.toFixed(0),a=void 0,l=(a=s.indexOf("e"))>-1?s.slice(a+1):0;l&&(s=s.slice(0,a).replace(".",""),s+=Fe.call(Array(l-(s.length-1)+1),"0"));var u=void 0;if(0!==o){var c=s.length;if(c<=o){s=Fe.call(Array(o+1-c+1),"0")+s,c=o+1}var d=s.substring(0,c-o);s=d+"."+s.substring(c-o,s.length),u=d.length}else u=s.length;for(var h=i-n;h>0&&"0"===s.slice(-1);)s=s.slice(0,-1),h--;if("."===s.slice(-1)&&(s=s.slice(0,-1)),u<t){s=Fe.call(Array(t-u+1),"0")+s}return s}function P(e){for(var t=0;t<ct.length;t+=1)if(e.hasOwnProperty(ct[t]))return!1;return!0}function x(e){for(var t=0;t<ut.length;t+=1)if(e.hasOwnProperty(ut[t]))return!1;return!0}function V(e,t){for(var n={_:{}},i=0;i<ut.length;i+=1)e[ut[i]]&&(n[ut[i]]=e[ut[i]]),e._[ut[i]]&&(n._[ut[i]]=e._[ut[i]]);for(var o=0;o<ct.length;o+=1)t[ct[o]]&&(n[ct[o]]=t[ct[o]]),t._[ct[o]]&&(n._[ct[o]]=t._[ct[o]]);return n}function H(e){return e.pattern12=e.extendedPattern.replace(/'([^']*)'/g,(function(e,t){return t||"'"})),e.pattern=e.pattern12.replace("{ampm}","").replace(at,""),e}function B(e,t){switch(e.charAt(0)){case"G":return t.era=["short","short","short","long","narrow"][e.length-1],"{era}";case"y":case"Y":case"u":case"U":case"r":return t.year=2===e.length?"2-digit":"numeric","{year}";case"Q":case"q":return t.quarter=["numeric","2-digit","short","long","narrow"][e.length-1],"{quarter}";case"M":case"L":return t.month=["numeric","2-digit","short","long","narrow"][e.length-1],"{month}";case"w":return t.week=2===e.length?"2-digit":"numeric","{weekday}";case"W":return t.week="numeric","{weekday}";case"d":return t.day=2===e.length?"2-digit":"numeric","{day}";case"D":case"F":case"g":return t.day="numeric","{day}";case"E":return t.weekday=["short","short","short","long","narrow","short"][e.length-1],"{weekday}";case"e":return t.weekday=["numeric","2-digit","short","long","narrow","short"][e.length-1],"{weekday}";case"c":return t.weekday=["numeric",void 0,"short","long","narrow","short"][e.length-1],"{weekday}";case"a":case"b":case"B":return t.hour12=!0,"{ampm}";case"h":case"H":return t.hour=2===e.length?"2-digit":"numeric","{hour}";case"k":case"K":return t.hour12=!0,t.hour=2===e.length?"2-digit":"numeric","{hour}";case"m":return t.minute=2===e.length?"2-digit":"numeric","{minute}";case"s":return t.second=2===e.length?"2-digit":"numeric","{second}";case"S":case"A":return t.second="numeric","{second}";case"z":case"Z":case"O":case"v":case"V":case"X":case"x":return t.timeZoneName=e.length<4?"short":"long","{timeZoneName}"}}function W(e,t){if(!lt.test(t)){var n={originalPattern:t,_:{}};return n.extendedPattern=t.replace(st,(function(e){return B(e,n._)})),e.replace(st,(function(e){return B(e,n)})),H(n)}}function F(e){var t=e.availableFormats,n=e.timeFormats,i=e.dateFormats,o=[],r=void 0,s=void 0,a=void 0,l=void 0,u=void 0,c=[],d=[];for(r in t)t.hasOwnProperty(r)&&(s=t[r],(a=W(r,s))&&(o.push(a),P(a)?d.push(a):x(a)&&c.push(a)));for(r in n)n.hasOwnProperty(r)&&(s=n[r],(a=W(r,s))&&(o.push(a),c.push(a)));for(r in i)i.hasOwnProperty(r)&&(s=i[r],(a=W(r,s))&&(o.push(a),d.push(a)));for(l=0;l<c.length;l+=1)for(u=0;u<d.length;u+=1)s="long"===d[u].month?d[u].weekday?e.full:e.long:"short"===d[u].month?e.medium:e.short,a=V(d[u],c[l]),a.originalPattern=s,a.extendedPattern=s.replace("{0}",c[l].extendedPattern).replace("{1}",d[u].extendedPattern).replace(/^[,\s]+|[,\s]+$/gi,""),o.push(H(a));return o}function U(e,t){if(dt[e]&&dt[e][t]){var n;return n={originalPattern:dt[e][t],_:de({},e,t),extendedPattern:"{"+e+"}"},de(n,e,t),de(n,"pattern12","{"+e+"}"),de(n,"pattern","{"+e+"}"),n}}function G(e,t,n,i,o){var r=e[t]&&e[t][n]?e[t][n]:e.gregory[n],s={narrow:["short","long"],short:["long","narrow"],long:["short","narrow"]},a=ke.call(r,i)?r[i]:ke.call(r,s[i][0])?r[s[i][0]]:r[s[i][1]];return null!==o?a[o]:a}function Y(){var e=arguments[0],t=arguments[1];return this&&this!==it?z(o(this),e,t):new it.DateTimeFormat(e,t)}function z(e,o,r){var s=l(e),a=i();if(!0===s["[[initializedIntlObject]]"])throw new TypeError("`this` object has already been initialized as an Intl object");Pe(e,"__getInternalProperties",{value:function(){if(arguments[0]===ze)return s}}),s["[[initializedIntlObject]]"]=!0;var u=f(o);r=K(r,"any","date");var d=new t,h=T(r,"localeMatcher","string",new n("lookup","best fit"),"best fit");d["[[localeMatcher]]"]=h;var p=Ye.DateTimeFormat,m=p["[[localeData]]"],_=y(p["[[availableLocales]]"],u,d,p["[[relevantExtensionKeys]]"],m);s["[[locale]]"]=_["[[locale]]"],s["[[calendar]]"]=_["[[ca]]"],s["[[numberingSystem]]"]=_["[[nu]]"],s["[[dataLocale]]"]=_["[[dataLocale]]"];var g=_["[[dataLocale]]"],v=r.timeZone;if(void 0!==v&&"UTC"!==(v=c(v)))throw new RangeError("timeZone is not supported.");s["[[timeZone]]"]=v,d=new t;for(var M in pt)if(ke.call(pt,M)){var b=T(r,M,"string",pt[M]);d["[["+M+"]]"]=b}var A=void 0,E=m[g],w=q(E.formats);if(h=T(r,"formatMatcher","string",new n("basic","best fit"),"best fit"),E.formats=w,"basic"===h)A=Z(d,w);else{var O=T(r,"hour12","boolean");d.hour12=void 0===O?E.hour12:O,A=X(d,w)}for(var I in pt)if(ke.call(pt,I)&&ke.call(A,I)){var S=A[I];S=A._&&ke.call(A._,I)?A._[I]:S,s["[["+I+"]]"]=S}var j=void 0,C=T(r,"hour12","boolean");if(s["[[hour]]"])if(C=void 0===C?E.hour12:C,s["[[hour12]]"]=C,!0===C){var D=E.hourNo0;s["[[hourNo0]]"]=D,j=A.pattern12}else j=A.pattern;else j=A.pattern;return s["[[pattern]]"]=j,s["[[boundFormat]]"]=void 0,s["[[initializedDateTimeFormat]]"]=!0,Ne&&(e.format=J.call(e)),a(),e}function q(e){return"[object Array]"===Object.prototype.toString.call(e)?e:F(e)}function K(e,n,i){if(void 0===e)e=null;else{var r=o(e);e=new t;for(var s in r)e[s]=r[s]}e=Ve(e);var a=!0;return"date"!==n&&"any"!==n||void 0===e.weekday&&void 0===e.year&&void 0===e.month&&void 0===e.day||(a=!1),"time"!==n&&"any"!==n||void 0===e.hour&&void 0===e.minute&&void 0===e.second||(a=!1),!a||"date"!==i&&"all"!==i||(e.year=e.month=e.day="numeric"),!a||"time"!==i&&"all"!==i||(e.hour=e.minute=e.second="numeric"),e}function Z(e,t){for(var n=-1/0,i=void 0,o=0,r=t.length;o<r;){var s=t[o],a=0;for(var l in pt)if(ke.call(pt,l)){var u=e["[["+l+"]]"],c=ke.call(s,l)?s[l]:void 0;if(void 0===u&&void 0!==c)a-=20;else if(void 0!==u&&void 0===c)a-=120;else{var d=["2-digit","numeric","narrow","short","long"],h=xe.call(d,u),p=xe.call(d,c),m=Math.max(Math.min(p-h,2),-2);2===m?a-=6:1===m?a-=3:-1===m?a-=6:-2===m&&(a-=8)}}a>n&&(n=a,i=s),o++}return i}function X(e,t){var n=[];for(var i in pt)ke.call(pt,i)&&void 0!==e["[["+i+"]]"]&&n.push(i);if(1===n.length){var o=U(n[0],e["[["+n[0]+"]]"]);if(o)return o}for(var r=-1/0,s=void 0,a=0,l=t.length;a<l;){var u=t[a],c=0;for(var d in pt)if(ke.call(pt,d)){var h=e["[["+d+"]]"],p=ke.call(u,d)?u[d]:void 0,m=ke.call(u._,d)?u._[d]:void 0;if(h!==m&&(c-=2),void 0===h&&void 0!==p)c-=20;else if(void 0!==h&&void 0===p)c-=120;else{var f=["2-digit","numeric","narrow","short","long"],_=xe.call(f,h),g=xe.call(f,p),v=Math.max(Math.min(g-_,2),-2);g<=1&&_>=2||g>=2&&_<=1?v>0?c-=6:v<0&&(c-=8):v>1?c-=3:v<-1&&(c-=6)}}u._.hour12!==e.hour12&&(c-=1),c>r&&(r=c,s=u),a++}return s}function J(){var e=null!==this&&"object"===Re.typeof(this)&&l(this);if(!e||!e["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(void 0===e["[[boundFormat]]"]){var t=function(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];return ee(this,void 0===e?Date.now():r(e))},n=Ge.call(t,this);e["[[boundFormat]]"]=n}return e["[[boundFormat]]"]}function Q(){var e=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=null!==this&&"object"===Re.typeof(this)&&l(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.DateTimeFormat object.");return te(this,void 0===e?Date.now():r(e))}function $(e,t){if(!isFinite(t))throw new RangeError("Invalid valid date passed to format");var o=e.__getInternalProperties(ze);i();for(var r=o["[[locale]]"],s=new it.NumberFormat([r],{useGrouping:!1}),a=new it.NumberFormat([r],{minimumIntegerDigits:2,useGrouping:!1}),l=ne(t,o["[[calendar]]"],o["[[timeZone]]"]),u=o["[[pattern]]"],c=new n,d=0,h=u.indexOf("{"),p=0,m=o["[[dataLocale]]"],f=Ye.DateTimeFormat["[[localeData]]"][m].calendars,_=o["[[calendar]]"];-1!==h;){var g=void 0;if(-1===(p=u.indexOf("}",h)))throw new Error("Unclosed pattern");h>d&&We.call(c,{type:"literal",value:u.substring(d,h)});var v=u.substring(h+1,p);if(pt.hasOwnProperty(v)){var y=o["[["+v+"]]"],M=l["[["+v+"]]"];if("year"===v&&M<=0?M=1-M:"month"===v?M++:"hour"===v&&!0===o["[[hour12]]"]&&0===(M%=12)&&!0===o["[[hourNo0]]"]&&(M=12),"numeric"===y)g=L(s,M);else if("2-digit"===y)g=L(a,M),g.length>2&&(g=g.slice(-2));else if(y in ht)switch(v){case"month":g=G(f,_,"months",y,l["[["+v+"]]"]);break;case"weekday":try{g=G(f,_,"days",y,l["[["+v+"]]"])}catch(e){throw new Error("Could not find weekday data for locale "+r)}break;case"timeZoneName":g="";break;case"era":try{g=G(f,_,"eras",y,l["[["+v+"]]"])}catch(e){throw new Error("Could not find era data for locale "+r)}break;default:g=l["[["+v+"]]"]}We.call(c,{type:v,value:g})}else if("ampm"===v){var b=l["[[hour]]"];g=G(f,_,"dayPeriods",b>11?"pm":"am",null),We.call(c,{type:"dayPeriod",value:g})}else We.call(c,{type:"literal",value:u.substring(h,p+1)});d=p+1,h=u.indexOf("{",d)}return p<u.length-1&&We.call(c,{type:"literal",value:u.substr(p+1)}),c}function ee(e,t){for(var n=$(e,t),i="",o=0;n.length>o;o++){i+=n[o].value}return i}function te(e,t){for(var n=$(e,t),i=[],o=0;n.length>o;o++){var r=n[o];i.push({type:r.type,value:r.value})}return i}function ne(e,n,i){var o=new Date(e),r="get"+(i||"");return new t({"[[weekday]]":o[r+"Day"](),"[[era]]":+(o[r+"FullYear"]()>=0),"[[year]]":o[r+"FullYear"](),"[[month]]":o[r+"Month"](),"[[day]]":o[r+"Date"](),"[[hour]]":o[r+"Hours"](),"[[minute]]":o[r+"Minutes"](),"[[second]]":o[r+"Seconds"](),"[[inDST]]":!1})}function ie(e,t){if(!e.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var n=void 0,i=[t],o=t.split("-");for(o.length>2&&4===o[1].length&&We.call(i,o[0]+"-"+o[2]);n=Ue.call(i);)We.call(Ye.NumberFormat["[[availableLocales]]"],n),Ye.NumberFormat["[[localeData]]"][n]=e.number,e.date&&(e.date.nu=e.number.nu,We.call(Ye.DateTimeFormat["[[availableLocales]]"],n),Ye.DateTimeFormat["[[localeData]]"][n]=e.date);void 0===$e&&u(t)}var oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},re=(function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,o){var r=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&r)for(var a in r)void 0===n[a]&&(n[a]=r[a]);else n||(n=r||{});if(1===s)n.children=o;else if(s>1){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}})(),se=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(o,r){try{var s=t[o](r),a=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(a).then((function(e){return i("next",e)}),(function(e){return i("throw",e)}));e(a)}return i("next")})}},ae=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},le=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),ue=function(e,t){for(var n in t){var i=t[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}return e},ce=function(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i],r=Object.getOwnPropertyDescriptor(t,o);r&&r.configurable&&void 0===e[o]&&Object.defineProperty(e,o,r)}return e},de=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pe=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},me=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},fe=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},_e=function(e){return e&&e.__esModule?e:{default:e}},ge=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},ve=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},ye=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},Me=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},be=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Ae="undefined"==typeof global?self:global,Te=function e(t,n,i,o){var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var s=Object.getPrototypeOf(t);null!==s&&e(s,n,i,o)}else if("value"in r&&r.writable)r.value=i;else{var a=r.set;void 0!==a&&a.call(o,i)}return i},Ee=(function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),we=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,i=[],o=e[Symbol.iterator]();!(n=o.next()).done&&(i.push(n.value),!t||i.length!==t););return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},Oe=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},Ie=function(e,t){return e.raw=t,e},Se=function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},je={},Ce=function(e){return Array.isArray(e)?e:Array.from(e)},De=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Re=Object.freeze({jsx:re,asyncToGenerator:se,classCallCheck:ae,createClass:le,defineEnumerableProperties:ue,defaults:ce,defineProperty:de,get:pe,inherits:me,interopRequireDefault:_e,interopRequireWildcard:ge,newArrowCheck:ve,objectDestructuringEmpty:ye,objectWithoutProperties:Me,possibleConstructorReturn:be,selfGlobal:Ae,set:Te,slicedToArray:Ee,slicedToArrayLoose:we,taggedTemplateLiteral:Oe,taggedTemplateLiteralLoose:Ie,temporalRef:Se,temporalUndefined:je,toArray:Ce,toConsumableArray:De,typeof:oe,extends:he,instanceof:fe}),Le=(function(){var e=function(){};try{return Object.defineProperty(e,"a",{get:function(){return 1}}),Object.defineProperty(e,"prototype",{writable:!1}),1===e.a&&e.prototype instanceof Object}catch(e){return!1}})(),Ne=!Le&&!Object.prototype.__defineGetter__,ke=Object.prototype.hasOwnProperty,Pe=Le?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):(!ke.call(e,t)||"value"in n)&&(e[t]=n.value)},xe=Array.prototype.indexOf||function(e){var t=this;if(!t.length)return-1;for(var n=arguments[1]||0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},Ve=Object.create||function(e,t){function n(){}var i=void 0;n.prototype=e,i=new n;for(var o in t)ke.call(t,o)&&Pe(i,o,t[o]);return i},He=Array.prototype.slice,Be=Array.prototype.concat,We=Array.prototype.push,Fe=Array.prototype.join,Ue=Array.prototype.shift,Ge=Function.prototype.bind||function(e){var t=this,n=He.call(arguments,1);return t.length,function(){return t.apply(e,Be.call(n,He.call(arguments)))}},Ye=Ve(null),ze=Math.random();t.prototype=Ve(null),n.prototype=Ve(null);var qe="(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3})",Ke="[0-9a-wy-z](?:-[a-z0-9]{2,8})+",Ze=RegExp("^(?:(?:[a-z]{2,3}(?:-[a-z]{3}(?:-[a-z]{3}){0,2})?|[a-z]{4}|[a-z]{5,8})(?:-[a-z]{4})?(?:-(?:[a-z]{2}|\\d{3}))?(?:-(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3}))*(?:-[0-9a-wy-z](?:-[a-z0-9]{2,8})+)*(?:-x(?:-[a-z0-9]{1,8})+)?|x(?:-[a-z0-9]{1,8})+|(?:(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))))$","i"),Xe=RegExp("^(?!x).*?-("+qe+")-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),Je=RegExp("^(?!x).*?-([0-9a-wy-z])-(?:\\w+-(?!x-))*\\1\\b","i"),Qe=RegExp("-"+Ke,"ig"),$e=void 0,et={tags:{"art-lojban":"jbo",
"i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97",in:"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}},tt=/^[A-Z]{3}$/,nt=/-u(?:-[0-9a-z]{2,8})+/gi,it={};Object.defineProperty(it,"getCanonicalLocales",{enumerable:!1,configurable:!0,writable:!0,value:w});var ot={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:4,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};Pe(it,"NumberFormat",{configurable:!0,writable:!0,value:O}),Pe(it.NumberFormat,"prototype",{writable:!1}),Ye.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},Pe(it.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:Ge.call((function(e){if(!ke.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=i(),n=arguments[1],o=this["[[availableLocales]]"],r=f(e);return t(),A(o,r,n)}),Ye.NumberFormat)}),Pe(it.NumberFormat.prototype,"format",{configurable:!0,get:j}),Object.defineProperty(it.NumberFormat.prototype,"formatToParts",{configurable:!0,enumerable:!1,writable:!0,value:C});var rt={arab:["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],arabext:["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],bali:["᭐","᭑","᭒","᭓","᭔","᭕","᭖","᭗","᭘","᭙"],beng:["০","১","২","৩","৪","৫","৬","৭","৮","৯"],deva:["०","१","२","३","४","५","६","७","८","९"],fullwide:["０","１","２","３","４","５","６","７","８","９"],gujr:["૦","૧","૨","૩","૪","૫","૬","૭","૮","૯"],guru:["੦","੧","੨","੩","੪","੫","੬","੭","੮","੯"],hanidec:["〇","一","二","三","四","五","六","七","八","九"],khmr:["០","១","២","៣","៤","៥","៦","៧","៨","៩"],knda:["೦","೧","೨","೩","೪","೫","೬","೭","೮","೯"],laoo:["໐","໑","໒","໓","໔","໕","໖","໗","໘","໙"],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["᥆","᥇","᥈","᥉","᥊","᥋","᥌","᥍","᥎","᥏"],mlym:["൦","൧","൨","൩","൪","൫","൬","൭","൮","൯"],mong:["᠐","᠑","᠒","᠓","᠔","᠕","᠖","᠗","᠘","᠙"],mymr:["၀","၁","၂","၃","၄","၅","၆","၇","၈","၉"],orya:["୦","୧","୨","୩","୪","୫","୬","୭","୮","୯"],tamldec:["௦","௧","௨","௩","௪","௫","௬","௭","௮","௯"],telu:["౦","౧","౨","౩","౪","౫","౬","౭","౮","౯"],thai:["๐","๑","๒","๓","๔","๕","๖","๗","๘","๙"],tibt:["༠","༡","༢","༣","༤","༥","༦","༧","༨","༩"]};Pe(it.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var e=void 0,n=new t,i=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],o=null!==this&&"object"===Re.typeof(this)&&l(this);if(!o||!o["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var r=0,s=i.length;r<s;r++)ke.call(o,e="[["+i[r]+"]]")&&(n[i[r]]={value:o[e],writable:!0,configurable:!0,enumerable:!0});return Ve({},n)}});var st=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g,at=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,lt=/[rqQASjJgwWIQq]/,ut=["era","year","month","day","weekday","quarter"],ct=["hour","minute","second","hour12","timeZoneName"],dt={second:{numeric:"s","2-digit":"ss"},minute:{numeric:"m","2-digit":"mm"},year:{numeric:"y","2-digit":"yy"},day:{numeric:"d","2-digit":"dd"},month:{numeric:"L","2-digit":"LL",narrow:"LLLLL",short:"LLL",long:"LLLL"},weekday:{narrow:"ccccc",short:"ccc",long:"cccc"}},ht=Ve(null,{narrow:{},short:{},long:{}});Pe(it,"DateTimeFormat",{configurable:!0,writable:!0,value:Y}),Pe(Y,"prototype",{writable:!1});var pt={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};Ye.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},Pe(it.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:Ge.call((function(e){if(!ke.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=i(),n=arguments[1],o=this["[[availableLocales]]"],r=f(e);return t(),A(o,r,n)}),Ye.NumberFormat)}),Pe(it.DateTimeFormat.prototype,"format",{configurable:!0,get:J}),Object.defineProperty(it.DateTimeFormat.prototype,"formatToParts",{enumerable:!1,writable:!0,configurable:!0,value:Q}),Pe(it.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var e=void 0,n=new t,i=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],o=null!==this&&"object"===Re.typeof(this)&&l(this);if(!o||!o["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var r=0,s=i.length;r<s;r++)ke.call(o,e="[["+i[r]+"]]")&&(n[i[r]]={value:o[e],writable:!0,configurable:!0,enumerable:!0});return Ve({},n)}});var mt=it.__localeSensitiveProtos={Number:{},Date:{}};if(mt.Number.toLocaleString=function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleString()");return L(new O(arguments[0],arguments[1]),this)},mt.Date.toLocaleString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];return n=K(n,"any","all"),ee(new Y(t,n),e)},mt.Date.toLocaleDateString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];return n=K(n,"date","date"),ee(new Y(t,n),e)},mt.Date.toLocaleTimeString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],n=arguments[1];return n=K(n,"time","time"),ee(new Y(t,n),e)},Pe(it,"__applyLocaleSensitivePrototypes",{writable:!0,configurable:!0,value:function(){Pe(Number.prototype,"toLocaleString",{writable:!0,configurable:!0,value:mt.Number.toLocaleString}),Pe(Date.prototype,"toLocaleString",{writable:!0,configurable:!0,value:mt.Date.toLocaleString});for(var e in mt.Date)ke.call(mt.Date,e)&&Pe(Date.prototype,e,{writable:!0,configurable:!0,value:mt.Date[e]})}}),Pe(it,"__addLocaleData",{value:function(e){if(!d(e.locale))throw new Error("Object passed doesn't identify itself with a valid language tag");ie(e,e.locale)}}),Pe(it,"__disableRegExpRestore",{value:function(){Ye.disableRegExpRestore=!0}}),"undefined"==typeof Intl)try{window.Intl=it,it.__applyLocaleSensitivePrototypes()}catch(e){}return it})),define("module/core/js/ext/localedata/en",[],(function(){return{locale:"en",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} 'at' {0}",long:"{1} 'at' {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE, MMMM d, y",yMMMMd:"MMMM d, y",yMMMd:"MMM d, y",yMd:"M/d/yy"},timeFormats:{hmmsszzzz:"h:mm:ss a zzzz",hmsz:"h:mm:ss a z",hms:"h:mm:ss a",hm:"h:mm a"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["B","A","BCE","CE"],short:["BC","AD","BCE","CE"],long:["Before Christ","Anno Domini","Before Common Era","Common Era"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"¥",KRW:"₩",MXN:"MX$",NZD:"NZ$",TWD:"NT$",USD:"$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/de",[],(function(){return{locale:"de",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} 'um' {0}",long:"{1} 'um' {0}",availableFormats:{d:"d",E:"ccc",Ed:"E, d.",Ehm:"E h:mm a",EHm:"E, HH:mm",Ehms:"E, h:mm:ss a",EHms:"E, HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d. MMM y G",GyMMMEd:"E, d. MMM y G",h:"h a",H:"HH 'Uhr'",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d.M.",MEd:"E, d.M.",MMd:"d.MM.",MMdd:"dd.MM.",MMM:"LLL",MMMd:"d. MMM",MMMEd:"E, d. MMM",MMMMd:"d. MMMM",MMMMEd:"E, d. MMMM",ms:"mm:ss",y:"y",yM:"M.y",yMd:"d.M.y",yMEd:"E, d.M.y",yMM:"MM.y",yMMdd:"dd.MM.y",yMMM:"MMM y",yMMMd:"d. MMM y",yMMMEd:"E, d. MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE, d. MMMM y",yMMMMd:"d. MMMM y",yMMMd:"dd.MM.y",yMd:"dd.MM.yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"vorm.",pm:"nachm."}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],long:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},days:{narrow:["S","M","D","M","D","F","S"],short:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],long:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},eras:{narrow:["v. Chr.","n. Chr.","v. u. Z.","u. Z."],short:["v. Chr.","n. Chr.","v. u. Z.","u. Z."],long:["v. Chr.","n. Chr.","vor unserer Zeitrechnung","unserer Zeitrechnung"]},dayPeriods:{am:"vorm.",pm:"nachm."}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number} {percentSign}",negativePattern:"{minusSign}{number} {percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{ATS:"öS",AUD:"AU$",BGM:"BGK",BGO:"BGJ",BRL:"R$",CAD:"CA$",CNY:"CN¥",DEM:"DM",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"¥",KRW:"₩",MXN:"MX$",NZD:"NZ$",THB:"฿",TWD:"NT$",USD:"$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/en-US",[],(function(){return{locale:"en-US",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} 'at' {0}",long:"{1} 'at' {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE, MMMM d, y",yMMMMd:"MMMM d, y",yMMMd:"MMM d, y",yMd:"M/d/yy"},timeFormats:{hmmsszzzz:"h:mm:ss a zzzz",hmsz:"h:mm:ss a z",hms:"h:mm:ss a",hm:"h:mm a"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]},days:{narrow:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eras:{narrow:["B","A","BCE","CE"],short:["BC","AD","BCE","CE"],long:["Before Christ","Anno Domini","Before Common Era","Common Era"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"¥",KRW:"₩",MXN:"MX$",NZD:"NZ$",TWD:"NT$",USD:"$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/es",[],(function(){return{locale:"es",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1}, {0}",long:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E, h:mm a",EHm:"E, H:mm",Ehms:"E, h:mm:ss a",EHms:"E, H:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E, d MMM y G",GyMMMM:"MMMM 'de' y G",GyMMMMd:"d 'de' MMMM 'de' y G",GyMMMMEd:"E, d 'de' MMMM 'de' y G",h:"h a",H:"H",hm:"h:mm a",Hm:"H:mm",hms:"h:mm:ss a",Hms:"H:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"H:mm:ss v",hmsvvvv:"h:mm:ss a (vvvv)",Hmsvvvv:"H:mm:ss (vvvv)",hmv:"h:mm a v",Hmv:"H:mm v",M:"L",Md:"d/M",MEd:"E, d/M",MMd:"d/M",MMdd:"d/M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E, d MMM",MMMMd:"d 'de' MMMM",MMMMEd:"E, d 'de' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"d/M/y",yMEd:"EEE, d/M/y",yMM:"M/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"EEE, d MMM y",yMMMM:"MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMMEd:"EEE, d 'de' MMMM 'de' y",yQQQ:"QQQ y",yQQQQ:"QQQQ 'de' y"},dateFormats:{yMMMMEEEEd:"EEEE, d 'de' MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMd:"d MMM y",yMd:"d/M/yy"},timeFormats:{hmmsszzzz:"H:mm:ss (zzzz)",hmsz:"H:mm:ss z",hms:"H:mm:ss",hm:"H:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a. m.",pm:"p. m."}},gregory:{months:{narrow:["E","F","M","A","M","J","J","A","S","O","N","D"],short:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],long:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},days:{narrow:["D","L","M","X","J","V","S"],short:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],long:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},eras:{narrow:["a. C.","d. C.","a. e. c.","e. c."],short:["a. C.","d. C.","a. e. c.","e. c."],long:["antes de Cristo","después de Cristo","antes de la era común","era común"]},dayPeriods:{am:"a. m.",pm:"p. m."}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number} {percentSign}",negativePattern:"{minusSign}{number} {percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{CAD:"CA$",ESP:"₧",EUR:"€",THB:"฿",USD:"$",VND:"₫",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/fr",[],(function(){return{locale:"fr",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} 'à' {0}",full:"{1} 'à' {0}",long:"{1} 'à' {0}",availableFormats:{d:"d",E:"E",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH 'h'",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"dd/MM",MEd:"E dd/MM",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",ms:"mm:ss",y:"y",yM:"MM/y",yMd:"dd/MM/y",yMEd:"E dd/MM/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"d MMM y",yMd:"dd/MM/y"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],long:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},days:{narrow:["D","L","M","M","J","V","S"],short:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],long:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},eras:{narrow:["av. J.-C.","ap. J.-C.","AEC","EC"],short:["av. J.-C.","ap. J.-C.","AEC","EC"],long:["avant Jésus-Christ","après Jésus-Christ","avant l’ère commune","de l’ère commune"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number} {percentSign}",negativePattern:"{minusSign}{number} {percentSign}"}},symbols:{latn:{decimal:",",group:" ",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{ARS:"$AR",AUD:"$AU",BEF:"FB",BMD:"$BM",BND:"$BN",BRL:"R$",BSD:"$BS",BZD:"$BZ",CAD:"$CA",CLP:"$CL",COP:"$CO",CYP:"£CY",EUR:"€",FJD:"$FJ",FKP:"£FK",FRF:"F",GBP:"£GB",GIP:"£GI",IEP:"£IE",ILP:"£IL",ILS:"₪",INR:"₹",ITL:"₤IT",KRW:"₩",LBP:"£LB",MTP:"£MT",MXN:"$MX",NAD:"$NA",NZD:"$NZ",RHD:"$RH",SBD:"$SB",SGD:"$SG",SRD:"$SR",TTD:"$TT",USD:"$US",UYU:"$UY",VND:"₫",WST:"WS$",XAF:"FCFA",XOF:"CFA",XPF:"FCFP"}}}})),define("module/core/js/ext/localedata/it",[],(function(){return{locale:"it",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E d/M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"d/M/y",yMEd:"E d/M/y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"dd MMM y",yMd:"dd/MM/yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],short:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],long:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},days:{narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],long:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},eras:{narrow:["aC","dC","BCE","CE"],short:["a.C.","d.C.","a.E.V.","E.V."],long:["a.C.","d.C.","avanti Era Volgare","Era Volgare"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"A$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",ILS:"₪",INR:"₹",NZD:"NZ$",THB:"฿",USD:"US$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/ja",[],(function(){return{locale:"ja",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!1,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d日",E:"ccc",Ed:"d日(E)",EEEEd:"d日EEEE",Ehm:"aK:mm (E)",EHm:"H:mm (E)",Ehms:"aK:mm:ss (E)",EHms:"H:mm:ss (E)",Gy:"Gy年",GyMMM:"Gy年M月",GyMMMd:"Gy年M月d日",GyMMMEd:"Gy年M月d日(E)",GyMMMEEEEd:"Gy年M月d日EEEE",h:"aK時",H:"H時",hm:"aK:mm",Hm:"H:mm",hms:"aK:mm:ss",Hms:"H:mm:ss",hmsv:"aK:mm:ss v",Hmsv:"H:mm:ss v",hmv:"aK:mm v",Hmv:"H:mm v",M:"M月",Md:"M/d",MEd:"M/d(E)",MEEEEd:"M/dEEEE",MMM:"M月",MMMd:"M月d日",MMMEd:"M月d日(E)",MMMEEEEd:"M月d日EEEE",MMMMd:"M月d日",ms:"mm:ss",y:"y年",yM:"y/M",yMd:"y/M/d",yMEd:"y/M/d(E)",yMEEEEd:"y/M/dEEEE",yMM:"y/MM",yMMM:"y年M月",yMMMd:"y年M月d日",yMMMEd:"y年M月d日(E)",yMMMEEEEd:"y年M月d日EEEE",yMMMM:"y年M月",yQQQ:"y/QQQ",yQQQQ:"yQQQQ"},dateFormats:{yMMMMEEEEd:"y年M月d日EEEE",yMMMMd:"y年M月d日",yMMMd:"y/MM/dd",yMd:"y/MM/dd"},timeFormats:{hmmsszzzz:"H時mm分ss秒 zzzz",hmsz:"H:mm:ss z",hms:"H:mm:ss",hm:"H:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],long:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"午前",pm:"午後"}},gregory:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],long:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},days:{narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],long:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},eras:{narrow:["BC","AD","BCE","CE"],short:["紀元前","西暦","西暦紀元前","西暦紀元"],long:["紀元前","西暦","西暦紀元前","西暦紀元"]},dayPeriods:{am:"午前",pm:"午後"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"AU$",
BRL:"R$",CAD:"CA$",CNY:"元",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"￥",KRW:"₩",MXN:"MX$",NZD:"NZ$",THB:"฿",TWD:"NT$",USD:"$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/nl",[],(function(){return{locale:"nl",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d-M",MEd:"E d-M",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",ms:"mm:ss",y:"y",yM:"M-y",yMd:"d-M-y",yMEd:"E d-M-y",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"d MMM y",yMd:"dd-MM-yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"a.m.",pm:"p.m."}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},days:{narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],long:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},eras:{narrow:["v.C.","n.C.","vgj","gj"],short:["v.Chr.","n.Chr.","v.g.j.","g.j."],long:["voor Christus","na Christus","vóór gewone jaartelling","gewone jaartelling"]},dayPeriods:{am:"a.m.",pm:"p.m."}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency} {number}",negativePattern:"{currency} {minusSign}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"AU$",BRL:"R$",CAD:"C$",CNY:"CN¥",EUR:"€",FJD:"FJ$",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"JP¥",KRW:"₩",MXN:"MX$",NZD:"NZ$",SBD:"SI$",THB:"฿",TWD:"NT$",USD:"US$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA"}}}})),define("module/core/js/ext/localedata/no",[],(function(){return{locale:"no",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1}, {0}",medium:"{1}, {0}",full:"{1} {0}",long:"{1} 'kl'. {0}",availableFormats:{d:"d.",E:"ccc",Ed:"E d.",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d. MMM y G",GyMMMEd:"E d. MMM y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d.M.",MEd:"E d.M",MMdd:"d.M.",MMM:"LLL",MMMd:"d. MMM",MMMEd:"E d. MMM",MMMMd:"d. MMMM",ms:"mm:ss",y:"y",yM:"M y",yMd:"d.M.y",yMEd:"E d.M.y",yMM:"MM.y",yMMM:"MMM y",yMMMd:"d. MMM y",yMMMEd:"E d. MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d. MMMM y",yMMMMd:"d. MMMM y",yMMMd:"d. MMM y",yMd:"dd.MM.y"},timeFormats:{hmmsszzzz:"'kl'. HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sø.","må.","ty.","on.","to.","fr.","la."],long:["søndag","måndag","tysdag","onsdag","torsdag","fredag","laurdag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"formiddag",pm:"ettermiddag"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mars","apr.","mai","juni","juli","aug.","sep.","okt.","nov.","des."],long:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sø.","må.","ty.","on.","to.","fr.","la."],long:["søndag","måndag","tysdag","onsdag","torsdag","fredag","laurdag"]},eras:{narrow:["f.Kr.","e.Kr.","BCE","CE"],short:["f.Kr.","e.Kr.","BCE","CE"],long:["f.Kr.","e.Kr.","BCE","CE"]},dayPeriods:{am:"formiddag",pm:"ettermiddag"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number} {percentSign}",negativePattern:"{minusSign}{number} {percentSign}"}},symbols:{latn:{decimal:",",group:" ",nan:"NaN",plusSign:"+",minusSign:"−",percentSign:"%",infinity:"∞"}},currencies:{AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"JP¥",KRW:"₩",MXN:"MX$",NOK:"kr",NZD:"NZ$",TWD:"NT$",USD:"US$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/pt",[],(function(){return{locale:"pt",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E, d",Ehm:"E, h:mm a",EHm:"E, HH:mm",Ehms:"E, h:mm:ss a",EHms:"E, HH:mm:ss",Gy:"y G",GyMMM:"MMM 'de' y G",GyMMMd:"d 'de' MMM 'de' y G",GyMMMEd:"E, d 'de' MMM 'de' y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E, dd/MM",MMdd:"dd/MM",MMM:"LLL",MMMd:"d 'de' MMM",MMMEd:"E, d 'de' MMM",MMMMd:"d 'de' MMMM",MMMMEd:"E, d 'de' MMMM",ms:"mm:ss",y:"y",yM:"MM/y",yMd:"dd/MM/y",yMEd:"E, dd/MM/y",yMM:"MM/y",yMMM:"MMM 'de' y",yMMMd:"d 'de' MMM 'de' y",yMMMEd:"E, d 'de' MMM 'de' y",yMMMM:"MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMMEd:"E, d 'de' MMMM 'de' y",yQQQ:"y QQQ",yQQQQ:"y QQQQ"},dateFormats:{yMMMMEEEEd:"EEEE, d 'de' MMMM 'de' y",yMMMMd:"d 'de' MMMM 'de' y",yMMMd:"d 'de' MMM 'de' y",yMd:"dd/MM/yy"},timeFormats:{hmmsszzzz:"HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sáb"],long:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"AM",pm:"PM"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],long:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},days:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sáb"],long:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},eras:{narrow:["a.C.","d.C.","AEC","EC"],short:["a.C.","d.C.","AEC","EC"],long:["antes de Cristo","depois de Cristo","antes da Era Comum","Era Comum"]},dayPeriods:{am:"AM",pm:"PM"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{latn:{decimal:",",group:".",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"AU$",BRL:"R$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"JP¥",KRW:"₩",MXN:"MX$",NZD:"NZ$",PTE:"Esc.",THB:"฿",TWD:"NT$",USD:"US$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/sv",[],(function(){return{locale:"sv",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!1,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d",E:"ccc",Ed:"E d",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"d MMM y G",GyMMMEd:"E d MMM y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"d/M",MEd:"E d/M",MMd:"d/M",MMdd:"dd/MM",MMM:"LLL",MMMd:"d MMM",MMMEd:"E d MMM",MMMMd:"d MMMM",MMMMEd:"E d MMMM",ms:"mm:ss",y:"y",yM:"y-MM",yMd:"y-MM-dd",yMEd:"E, y-MM-dd",yMM:"y-MM",yMMM:"MMM y",yMMMd:"d MMM y",yMMMEd:"E d MMM y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y"},dateFormats:{yMMMMEEEEd:"EEEE d MMMM y",yMMMMd:"d MMMM y",yMMMd:"d MMM y",yMd:"y-MM-dd"},timeFormats:{hmmsszzzz:"'kl'. HH:mm:ss zzzz",hmsz:"HH:mm:ss z",hms:"HH:mm:ss",hm:"HH:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sön","mån","tis","ons","tors","fre","lör"],long:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"fm",pm:"em"}},gregory:{months:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["jan.","feb.","mars","apr.","maj","juni","juli","aug.","sep.","okt.","nov.","dec."],long:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"]},days:{narrow:["S","M","T","O","T","F","L"],short:["sön","mån","tis","ons","tors","fre","lör"],long:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"]},eras:{narrow:["f.Kr.","e.Kr.","fvt","vt"],short:["f.Kr.","e.Kr.","f.v.t.","v.t."],long:["före Kristus","efter Kristus","före västerländsk tideräkning","västerländsk tideräkning"]},dayPeriods:{am:"fm",pm:"em"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{number} {currency}",negativePattern:"{minusSign}{number} {currency}"},percent:{positivePattern:"{number} {percentSign}",negativePattern:"{minusSign}{number} {percentSign}"}},symbols:{latn:{decimal:",",group:" ",nan:"¤¤¤",plusSign:"+",minusSign:"−",percentSign:"%",infinity:"∞"}},currencies:{BBD:"Bds$",BMD:"BM$",BRL:"BR$",BSD:"BS$",BZD:"BZ$",CAD:"CA$",DKK:"Dkr",DOP:"RD$",EEK:"Ekr",EGP:"EG£",EUR:"€",ILS:"₪",ISK:"Ikr",JMD:"JM$",MXN:"MX$",NOK:"Nkr",SEK:"kr",USD:"US$",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/zh",[],(function(){return{locale:"zh",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d日",E:"ccc",Ed:"d日E",Ehm:"E ah:mm",EHm:"EHH:mm",Ehms:"E ah:mm:ss",EHms:"EHH:mm:ss",Gy:"Gy年",GyMMM:"Gy年M月",GyMMMd:"Gy年M月d日",GyMMMEd:"Gy年M月d日E",h:"ah时",H:"H时",hm:"ah:mm",Hm:"HH:mm",hms:"ah:mm:ss",Hms:"HH:mm:ss",hmsv:"v ah:mm:ss",Hmsv:"v HH:mm:ss",hmv:"v ah:mm",Hmv:"v HH:mm",M:"M月",Md:"M/d",MEd:"M/dE",MMdd:"MM/dd",MMM:"LLL",MMMd:"M月d日",MMMEd:"M月d日E",MMMMd:"M月d日",ms:"mm:ss",y:"y年",yM:"y年M月",yMd:"y/M/d",yMEd:"y/M/dE",yMM:"y年M月",yMMM:"y年M月",yMMMd:"y年M月d日",yMMMEd:"y年M月d日E",yMMMM:"y年M月",yQQQ:"y年第Q季度",yQQQQ:"y年第Q季度"},dateFormats:{yMMMMEEEEd:"y年M月d日EEEE",yMMMMd:"y年M月d日",yMMMd:"y年M月d日",yMd:"y/M/d"},timeFormats:{hmmsszzzz:"zzzz ah:mm:ss",hmsz:"z ah:mm:ss",hms:"ah:mm:ss",hm:"ah:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["日","一","二","三","四","五","六"],short:["周日","周一","周二","周三","周四","周五","周六"],long:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"上午",pm:"下午"}},gregory:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],long:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},days:{narrow:["日","一","二","三","四","五","六"],short:["周日","周一","周二","周三","周四","周五","周六"],long:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},eras:{narrow:["公元前","公元","西元前","西元"],short:["公元前","公元","西元前","西元"],long:["公元前","公元","西元前","西元"]},dayPeriods:{am:"上午",pm:"下午"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{hanidec:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"},latn:{decimal:".",group:",",nan:"NaN",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"AU$",BRL:"R$",CAD:"CA$",CNY:"￥",EUR:"€",GBP:"£",HKD:"HK$",ILR:"ILS",ILS:"₪",INR:"₹",JPY:"JP¥",KRW:"￦",MXN:"MX$",NZD:"NZ$",TWD:"NT$",USD:"US$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/localedata/zh-TW",[],(function(){return{locale:"zh-TW",date:{ca:["gregory","buddhist","chinese","coptic","dangi","ethioaa","ethiopic","generic","hebrew","indian","islamic","islamicc","japanese","persian","roc"],hourNo0:!0,hour12:!0,formats:{short:"{1} {0}",medium:"{1} {0}",full:"{1} {0}",long:"{1} {0}",availableFormats:{d:"d日",E:"ccc",Ed:"d E",Ehm:"E ah:mm",EHm:"E HH:mm",Ehms:"E ah:mm:ss",EHms:"E HH:mm:ss",Gy:"Gy年",GyMMM:"Gy年M月",GyMMMd:"Gy年M月d日",GyMMMEd:"Gy年M月d日 E",h:"ah時",H:"H時",hm:"ah:mm",Hm:"HH:mm",hms:"ah:mm:ss",Hms:"HH:mm:ss",hmsv:"ah:mm:ss [v]",Hmsv:"HH:mm:ss [v]",hmv:"ah:mm [v]",Hmv:"HH:mm [v]",M:"M月",Md:"M/d",MEd:"M/d（E）",MMdd:"MM/dd",MMM:"LLL",MMMd:"M月d日",MMMEd:"M月d日 E",MMMMd:"M月d日",ms:"mm:ss",y:"y年",yM:"y/M",yMd:"y/M/d",yMEd:"y/M/d（E）",yMM:"y/MM",yMMM:"y年M月",yMMMd:"y年M月d日",yMMMEd:"y年M月d日 E",yMMMM:"y年M月",yQQQ:"y年QQQ",yQQQQ:"y年QQQQ"},dateFormats:{yMMMMEEEEd:"y年M月d日 EEEE",yMMMMd:"y年M月d日",yMMMd:"y年M月d日",yMd:"y/M/d"},timeFormats:{hmmsszzzz:"ah:mm:ss [zzzz]",hmsz:"ah:mm:ss [z]",hms:"ah:mm:ss",hm:"ah:mm"}},calendars:{generic:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"],long:["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12"]},days:{narrow:["日","一","二","三","四","五","六"],short:["週日","週一","週二","週三","週四","週五","週六"],long:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},eras:{narrow:["ERA0","ERA1"],short:["ERA0","ERA1"],long:["ERA0","ERA1"]},dayPeriods:{am:"上午",pm:"下午"}},gregory:{months:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],long:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},days:{narrow:["日","一","二","三","四","五","六"],short:["週日","週一","週二","週三","週四","週五","週六"],long:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},eras:{narrow:["西元前","西元","公元前","公元"],short:["西元前","西元","公元前","公元"],long:["西元前","西元","公元前","公元"]},dayPeriods:{am:"上午",pm:"下午"}}}},number:{nu:["latn"],patterns:{decimal:{positivePattern:"{number}",negativePattern:"{minusSign}{number}"},currency:{positivePattern:"{currency}{number}",negativePattern:"{minusSign}{currency}{number}"},percent:{positivePattern:"{number}{percentSign}",negativePattern:"{minusSign}{number}{percentSign}"}},symbols:{hanidec:{decimal:".",group:",",nan:"非數值",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"},latn:{decimal:".",group:",",nan:"非數值",plusSign:"+",minusSign:"-",percentSign:"%",infinity:"∞"}},currencies:{AUD:"AU$",BRL:"R$",CAD:"CA$",CNY:"CN¥",EUR:"€",GBP:"£",HKD:"HK$",ILS:"₪",INR:"₹",JPY:"¥",KRW:"￦",MXN:"MX$",NZD:"NZ$",TWD:"$",USD:"US$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF"}}}})),define("module/core/js/ext/polyfills",["require","intl-polyfill","module/core/js/ext/localedata/en","module/core/js/ext/localedata/de","module/core/js/ext/localedata/en-US","module/core/js/ext/localedata/es","module/core/js/ext/localedata/fr","module/core/js/ext/localedata/it","module/core/js/ext/localedata/ja","module/core/js/ext/localedata/nl","module/core/js/ext/localedata/no","module/core/js/ext/localedata/pt","module/core/js/ext/localedata/sv","module/core/js/ext/localedata/zh","module/core/js/ext/localedata/zh-TW"],(function(e){"use strict";var t=e("intl-polyfill");Function.prototype.bind||(function(e){function t(e,t,n){return function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,i)}}function n(e,t){return function(){return e.apply(t,arguments)}}e.bind=function(e){return arguments.length>1?t(this,e,Array.prototype.slice.call(arguments,1)):n(this,e)}})(Function.prototype),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)t[t.length]=n;return t}),Date.now||(Date.now=function(){return(new Date).getTime()}),Math.log10||(Math.log10=function(e){return Math.log(e)*Math.LOG10E}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),Number.isSafeInteger||(Number.MAX_SAFE_INTEGER=9007199254740991,Number.MIN_SAFE_INTEGER=-9007199254740991,Number.isSafeInteger=function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER}),Number.isNaN||(Number.isNaN=function(e){return"number"==typeof e&&isNaN(e)}),Number.isFinite||(Number.isFinite=function(e){return"number"==typeof e&&isFinite(e)}),t.__addLocaleData(e("module/core/js/ext/localedata/en")),t.__addLocaleData(e("module/core/js/ext/localedata/de")),t.__addLocaleData(e("module/core/js/ext/localedata/en-US")),t.__addLocaleData(e("module/core/js/ext/localedata/es")),t.__addLocaleData(e("module/core/js/ext/localedata/fr")),t.__addLocaleData(e("module/core/js/ext/localedata/it")),t.__addLocaleData(e("module/core/js/ext/localedata/ja")),t.__addLocaleData(e("module/core/js/ext/localedata/nl")),t.__addLocaleData(e("module/core/js/ext/localedata/no")),t.__addLocaleData(e("module/core/js/ext/localedata/pt")),t.__addLocaleData(e("module/core/js/ext/localedata/sv")),t.__addLocaleData(e("module/core/js/ext/localedata/zh")),t.__addLocaleData(e("module/core/js/ext/localedata/zh-TW"))})),(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()})(this,(function(){"use strict";function e(){return Oi.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e){return void 0===e}function r(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,i){return Tt(e,t,n,i,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(e){return null==e._pf&&(e._pf=d()),e._pf}function p(e){if(null==e._isValid){var t=h(e),n=Ii.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=c(NaN);return null!=e?u(h(t),e):h(t).userInvalidated=!0,t}function f(e,t){var n,i,r;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=h(t)),o(t._locale)||(e._locale=t._locale),Si.length>0)for(n=0;n<Si.length;n++)i=Si[n],r=t[i],o(r)||(e[i]=r);return e}function _(t){f(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===ji&&(ji=!0,e.updateOffset(this),ji=!1)}function g(e){return e instanceof _||null!=e&&null!=e._isAMomentObject}function v(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=v(t)),n}function M(e,t,n){var i,o=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(i=0;i<o;i++)(n&&e[i]!==t[i]||!n&&y(e[i])!==y(t[i]))&&s++;return s+r}function b(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function A(t,n){var i=!0;return u((function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),i){for(var o,r=[],s=0;s<arguments.length;s++){if(o="","object"==typeof arguments[s]){o+="\n["+s+"] ";for(var a in arguments[0])o+=a+": "+arguments[0][a]+", ";o=o.slice(0,-2)}else o=arguments[s];r.push(o)}b(t+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),i=!1}return n.apply(this,arguments)}),n)}function T(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),Ci[t]||(b(n),Ci[t]=!0)}function E(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function w(e){var t,n;for(n in e)t=e[n],E(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(e,t){var i,o=u({},e);for(i in t)l(t,i)&&(n(e[i])&&n(t[i])?(o[i]={},u(o[i],e[i]),u(o[i],t[i])):null!=t[i]?o[i]=t[i]:delete o[i]);for(i in e)l(e,i)&&!l(t,i)&&n(e[i])&&(o[i]=u({},o[i]));return o}function I(e){null!=e&&this.set(e)}function S(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return E(i)?i.call(t,n):i}function j(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])}function C(){return this._invalidDate}function D(e){return this._ordinal.replace("%d",e)}function R(e,t,n,i){var o=this._relativeTime[n];return E(o)?o(e,t,n,i):o.replace(/%d/i,e)}function L(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)}function N(e,t){var n=e.toLowerCase();Pi[n]=Pi[n+"s"]=Pi[t]=e}function k(e){return"string"==typeof e?Pi[e]||Pi[e.toLowerCase()]:void 0}function P(e){var t,n,i={};for(n in e)l(e,n)&&(t=k(n))&&(i[t]=e[n]);return i}function x(e,t){xi[e]=t}function V(e){var t=[];for(var n in e)t.push({unit:n,priority:xi[n]});return t.sort((function(e,t){return e.priority-t.priority})),t}function H(e,t,n){var i=""+Math.abs(e),o=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}function B(e,t,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),e&&(Wi[e]=o),t&&(Wi[t[0]]=function(){return H(o.apply(this,arguments),t[1],t[2])}),n&&(Wi[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function W(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function F(e){var t,n,i=e.match(Vi);for(t=0,n=i.length;t<n;t++)Wi[i[t]]?i[t]=Wi[i[t]]:i[t]=W(i[t]);return function(t){var o,r="";for(o=0;o<n;o++)r+=E(i[o])?i[o].call(t,e):i[o];return r}}function U(e,t){return e.isValid()?(t=G(t,e.localeData()),Bi[t]=Bi[t]||F(t),Bi[t](e)):e.localeData().invalidDate()}function G(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Hi.lastIndex=0;i>=0&&Hi.test(e);)e=e.replace(Hi,n),Hi.lastIndex=0,i-=1;return e}function Y(e,t,n){ro[e]=E(t)?t:function(e,i){return e&&n?n:t}}function z(e,t){return l(ro,e)?ro[e](t._strict,t._locale):new RegExp(q(e))}function q(e){return K(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,o){return t||n||i||o})))}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),r(t)&&(i=function(e,n){n[t]=y(e)}),n=0;n<e.length;n++)so[e[n]]=i}function X(e,t){Z(e,(function(e,n,i,o){i._w=i._w||{},t(e,i._w,i,o)}))}function J(e,t,n){null!=t&&l(so,e)&&so[e](t,n._a,n,e)}function Q(e){return $(e)?366:365}function $(e){return e%4==0&&e%100!=0||e%400==0}function ee(){return $(this.year())}function te(t,n){return function(i){return null!=i?(ie(this,t,i),e.updateOffset(this,n),this):ne(this,t)}}function ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ie(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&$(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ae(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function oe(e){return e=k(e),E(this[e])?this[e]():this}function re(e,t){if("object"==typeof e){e=P(e);for(var n=V(e),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit])}else if(e=k(e),E(this[e]))return this[e](t);return this}function se(e,t){return(e%t+t)%t}function ae(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=se(t,12);return e+=(t-n)/12,1===n?$(e)?29:28:31-n%7%2}function le(e,n){return e?t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||yo).test(n)?"format":"standalone"][e.month()]:t(this._months)?this._months:this._months.standalone}function ue(e,n){return e?t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[yo.test(n)?"format":"standalone"][e.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ce(e,t,n){var i,o,r,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=c([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?(o=go.call(this._shortMonthsParse,s),-1!==o?o:null):(o=go.call(this._longMonthsParse,s),-1!==o?o:null):"MMM"===t?-1!==(o=go.call(this._shortMonthsParse,s))?o:(o=go.call(this._longMonthsParse,s),-1!==o?o:null):-1!==(o=go.call(this._longMonthsParse,s))?o:(o=go.call(this._shortMonthsParse,s),-1!==o?o:null)}function de(e,t,n){var i,o,r;if(this._monthsParseExact)return ce.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=c([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function he(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=y(t);else if(t=e.localeData().monthsParse(t),!r(t))return e;return n=Math.min(e.date(),ae(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function pe(t){return null!=t?(he(this,t),e.updateOffset(this,!0),this):ne(this,"Month")}function me(){return ae(this.year(),this.month())}function fe(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ge.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Ao),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function _e(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ge.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=To),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ge(){function e(e,t){return t.length-e.length}var t,n,i=[],o=[],r=[];for(t=0;t<12;t++)n=c([2e3,t]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(e),o.sort(e),r.sort(e),t=0;t<12;t++)i[t]=K(i[t]),o[t]=K(o[t]);for(t=0;t<24;t++)r[t]=K(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ve(e,t,n,i,o,r,s){var a=new Date(e,t,n,i,o,r,s);return e<100&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function ye(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Me(e,t,n){var i=7+t-n;return-(7+ye(e,0,i).getUTCDay()-t)%7+i-1}function be(e,t,n,i,o){var r,s,a=(7+n-i)%7,l=Me(e,i,o),u=1+7*(t-1)+a+l;return u<=0?(r=e-1,s=Q(r)+u):u>Q(e)?(r=e+1,s=u-Q(e)):(r=e,s=u),{year:r,dayOfYear:s}}function Ae(e,t,n){var i,o,r=Me(e.year(),t,n),s=Math.floor((e.dayOfYear()-r-1)/7)+1;return s<1?(o=e.year()-1,i=s+Te(o,t,n)):s>Te(e.year(),t,n)?(i=s-Te(e.year(),t,n),o=e.year()+1):(o=e.year(),i=s),{week:i,year:o}}function Te(e,t,n){var i=Me(e,t,n),o=Me(e+1,t,n);return(Q(e)-i+o)/7}function Ee(e){return Ae(e,this._week.dow,this._week.doy).week}function we(){return this._week.dow}function Oe(){return this._week.doy}function Ie(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Se(e){var t=Ae(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function je(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ce(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function De(e,n){return e?t(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(n)?"format":"standalone"][e.day()]:t(this._weekdays)?this._weekdays:this._weekdays.standalone}function Re(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Le(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ne(e,t,n){var i,o,r,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],
this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=c([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?(o=go.call(this._weekdaysParse,s),-1!==o?o:null):"ddd"===t?(o=go.call(this._shortWeekdaysParse,s),-1!==o?o:null):(o=go.call(this._minWeekdaysParse,s),-1!==o?o:null):"dddd"===t?-1!==(o=go.call(this._weekdaysParse,s))?o:-1!==(o=go.call(this._shortWeekdaysParse,s))?o:(o=go.call(this._minWeekdaysParse,s),-1!==o?o:null):"ddd"===t?-1!==(o=go.call(this._shortWeekdaysParse,s))?o:-1!==(o=go.call(this._weekdaysParse,s))?o:(o=go.call(this._minWeekdaysParse,s),-1!==o?o:null):-1!==(o=go.call(this._minWeekdaysParse,s))?o:-1!==(o=go.call(this._weekdaysParse,s))?o:(o=go.call(this._shortWeekdaysParse,s),-1!==o?o:null)}function ke(e,t,n){var i,o,r;if(this._weekdaysParseExact)return Ne.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=c([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Pe(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=je(e,this.localeData()),this.add(e-t,"d")):t}function xe(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ve(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ce(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function He(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Fe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=So),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Be(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Fe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jo),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function We(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Fe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Co),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Fe(){function e(e,t){return t.length-e.length}var t,n,i,o,r,s=[],a=[],l=[],u=[];for(t=0;t<7;t++)n=c([2e3,1]).day(t),i=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),r=this.weekdays(n,""),s.push(i),a.push(o),l.push(r),u.push(i),u.push(o),u.push(r);for(s.sort(e),a.sort(e),l.sort(e),u.sort(e),t=0;t<7;t++)a[t]=K(a[t]),l[t]=K(l[t]),u[t]=K(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ue(){return this.hours()%12||12}function Ge(){return this.hours()||24}function Ye(e,t){B(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function ze(e,t){return t._meridiemParse}function qe(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ke(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ze(e){return e?e.toLowerCase().replace("_","-"):e}function Xe(e){for(var t,n,i,o,r=0;r<e.length;){for(o=Ze(e[r]).split("-"),t=o.length,n=Ze(e[r+1]),n=n?n.split("-"):null;t>0;){if(i=Je(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&M(o,n,!0)>=t-1)break;t--}r++}return null}function Je(e){var t=null;if(!ko[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Do._abbr;require("./locale/"+e),Qe(t)}catch(e){}return ko[e]}function Qe(e,t){var n;return e&&(n=o(t)?tt(e):$e(e,t))&&(Do=n),Do._abbr}function $e(e,t){if(null!==t){var n=No;if(t.abbr=e,null!=ko[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ko[e]._config;else if(null!=t.parentLocale){if(null==ko[t.parentLocale])return Po[t.parentLocale]||(Po[t.parentLocale]=[]),Po[t.parentLocale].push({name:e,config:t}),null;n=ko[t.parentLocale]._config}return ko[e]=new I(O(n,t)),Po[e]&&Po[e].forEach((function(e){$e(e.name,e.config)})),Qe(e),ko[e]}return delete ko[e],null}function et(e,t){if(null!=t){var n,i,o=No;i=Je(e),null!=i&&(o=i._config),t=O(o,t),n=new I(t),n.parentLocale=ko[e],ko[e]=n,Qe(e)}else null!=ko[e]&&(null!=ko[e].parentLocale?ko[e]=ko[e].parentLocale:null!=ko[e]&&delete ko[e]);return ko[e]}function tt(e){var n;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Do;if(!t(e)){if(n=Je(e))return n;e=[e]}return Xe(e)}function nt(){return Di(ko)}function it(e){var t,n=e._a;return n&&-2===h(e).overflow&&(t=n[lo]<0||n[lo]>11?lo:n[uo]<1||n[uo]>ae(n[ao],n[lo])?uo:n[co]<0||n[co]>24||24===n[co]&&(0!==n[ho]||0!==n[po]||0!==n[mo])?co:n[ho]<0||n[ho]>59?ho:n[po]<0||n[po]>59?po:n[mo]<0||n[mo]>999?mo:-1,h(e)._overflowDayOfYear&&(t<ao||t>uo)&&(t=uo),h(e)._overflowWeeks&&-1===t&&(t=fo),h(e)._overflowWeekday&&-1===t&&(t=_o),h(e).overflow=t),e}function ot(e,t,n){return null!=e?e:null!=t?t:n}function rt(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function st(e){var t,n,i,o,r=[];if(!e._d){for(i=rt(e),e._w&&null==e._a[uo]&&null==e._a[lo]&&at(e),null!=e._dayOfYear&&(o=ot(e._a[ao],i[ao]),(e._dayOfYear>Q(o)||0===e._dayOfYear)&&(h(e)._overflowDayOfYear=!0),n=ye(o,0,e._dayOfYear),e._a[lo]=n.getUTCMonth(),e._a[uo]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[co]&&0===e._a[ho]&&0===e._a[po]&&0===e._a[mo]&&(e._nextDay=!0,e._a[co]=0),e._d=(e._useUTC?ye:ve).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[co]=24),e._w&&void 0!==e._w.d&&e._w.d!==e._d.getDay()&&(h(e).weekdayMismatch=!0)}}function at(e){var t,n,i,o,r,s,a,l;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)r=1,s=4,n=ot(t.GG,e._a[ao],Ae(Et(),1,4).year),i=ot(t.W,1),((o=ot(t.E,1))<1||o>7)&&(l=!0);else{r=e._locale._week.dow,s=e._locale._week.doy;var u=Ae(Et(),r,s);n=ot(t.gg,e._a[ao],u.year),i=ot(t.w,u.week),null!=t.d?((o=t.d)<0||o>6)&&(l=!0):null!=t.e?(o=t.e+r,(t.e<0||t.e>6)&&(l=!0)):o=r}i<1||i>Te(n,r,s)?h(e)._overflowWeeks=!0:null!=l?h(e)._overflowWeekday=!0:(a=be(n,i,o,r,s),e._a[ao]=a.year,e._dayOfYear=a.dayOfYear)}function lt(e){var t,n,i,o,r,s,a=e._i,l=xo.exec(a)||Vo.exec(a);if(l){for(h(e).iso=!0,t=0,n=Bo.length;t<n;t++)if(Bo[t][1].exec(l[1])){o=Bo[t][0],i=!1!==Bo[t][2];break}if(null==o)return void(e._isValid=!1);if(l[3]){for(t=0,n=Wo.length;t<n;t++)if(Wo[t][1].exec(l[3])){r=(l[2]||" ")+Wo[t][0];break}if(null==r)return void(e._isValid=!1)}if(!i&&null!=r)return void(e._isValid=!1);if(l[4]){if(!Ho.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=o+(r||"")+(s||""),_t(e)}else e._isValid=!1}function ut(e,t,n,i,o,r){var s=[ct(e),bo.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(o,10)];return r&&s.push(parseInt(r,10)),s}function ct(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function dt(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function ht(e,t,n){if(e){if(Oo.indexOf(e)!==new Date(t[0],t[1],t[2]).getDay())return h(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function pt(e,t,n){if(e)return Go[e];if(t)return 0;var i=parseInt(n,10),o=i%100;return(i-o)/100*60+o}function mt(e){var t=Uo.exec(dt(e._i));if(t){var n=ut(t[4],t[3],t[2],t[5],t[6],t[7]);if(!ht(t[1],n,e))return;e._a=n,e._tzm=pt(t[8],t[9],t[10]),e._d=ye.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),h(e).rfc2822=!0}else e._isValid=!1}function ft(t){var n=Fo.exec(t._i);if(null!==n)return void(t._d=new Date(+n[1]));lt(t),!1===t._isValid&&(delete t._isValid,mt(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t)))}function _t(t){if(t._f===e.ISO_8601)return void lt(t);if(t._f===e.RFC_2822)return void mt(t);t._a=[],h(t).empty=!0;var n,i,o,r,s,a=""+t._i,l=a.length,u=0;for(o=G(t._f,t._locale).match(Vi)||[],n=0;n<o.length;n++)r=o[n],i=(a.match(z(r,t))||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&h(t).unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),u+=i.length),Wi[r]?(i?h(t).empty=!1:h(t).unusedTokens.push(r),J(r,i,t)):t._strict&&!i&&h(t).unusedTokens.push(r);h(t).charsLeftOver=l-u,a.length>0&&h(t).unusedInput.push(a),t._a[co]<=12&&!0===h(t).bigHour&&t._a[co]>0&&(h(t).bigHour=void 0),h(t).parsedDateParts=t._a.slice(0),h(t).meridiem=t._meridiem,t._a[co]=gt(t._locale,t._a[co],t._meridiem),st(t),it(t)}function gt(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function vt(e){var t,n,i,o,r;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)r=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],_t(t),p(t)&&(r+=h(t).charsLeftOver,r+=10*h(t).unusedTokens.length,h(t).score=r,(null==i||r<i)&&(i=r,n=t));u(e,n||t)}function yt(e){if(!e._d){var t=P(e._i);e._a=a([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),st(e)}}function Mt(e){var t=new _(it(bt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function bt(e){var n=e._i,i=e._f;return e._locale=e._locale||tt(e._l),null===n||void 0===i&&""===n?m({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),g(n)?new _(it(n)):(s(n)?e._d=n:t(i)?vt(e):i?_t(e):At(e),p(e)||(e._d=null),e))}function At(i){var l=i._i;o(l)?i._d=new Date(e.now()):s(l)?i._d=new Date(l.valueOf()):"string"==typeof l?ft(i):t(l)?(i._a=a(l.slice(0),(function(e){return parseInt(e,10)})),st(i)):n(l)?yt(i):r(l)?i._d=new Date(l):e.createFromInputFallback(i)}function Tt(e,o,r,s,a){var l={};return!0!==r&&!1!==r||(s=r,r=void 0),(n(e)&&i(e)||t(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=a,l._l=r,l._i=e,l._f=o,l._strict=s,Mt(l)}function Et(e,t,n,i){return Tt(e,t,n,i,!1)}function wt(e,n){var i,o;if(1===n.length&&t(n[0])&&(n=n[0]),!n.length)return Et();for(i=n[0],o=1;o<n.length;++o)n[o].isValid()&&!n[o][e](i)||(i=n[o]);return i}function Ot(){return wt("isBefore",[].slice.call(arguments,0))}function It(){return wt("isAfter",[].slice.call(arguments,0))}function St(e){for(var t in e)if(-1===go.call(Ko,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<Ko.length;++i)if(e[Ko[i]]){if(n)return!1;parseFloat(e[Ko[i]])!==y(e[Ko[i]])&&(n=!0)}return!0}function jt(){return this._isValid}function Ct(){return Zt(NaN)}function Dt(e){var t=P(e),n=t.year||0,i=t.quarter||0,o=t.month||0,r=t.week||0,s=t.day||0,a=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=St(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*a*60*60,this._days=+s+7*r,this._months=+o+3*i+12*n,this._data={},this._locale=tt(),this._bubble()}function Rt(e){return e instanceof Dt}function Lt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Nt(e,t){B(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+H(~~(e/60),2)+t+H(~~e%60,2)}))}function kt(e,t){var n=(t||"").match(e);if(null===n)return null;var i=n[n.length-1]||[],o=(i+"").match(Zo)||["-",0,0],r=60*o[1]+y(o[2]);return 0===r?0:"+"===o[0]?r:-r}function Pt(t,n){var i,o;return n._isUTC?(i=n.clone(),o=(g(t)||s(t)?t.valueOf():Et(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+o),e.updateOffset(i,!1),i):Et(t).local()}function xt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Vt(t,n,i){var o,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=kt(no,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&n&&(o=xt(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),r!==t&&(!n||this._changeInProgress?en(this,Zt(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:xt(this)}function Ht(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Bt(e){return this.utcOffset(0,e)}function Wt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(xt(this),"m")),this}function Ft(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=kt(to,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ut(e){return!!this.isValid()&&(e=e?Et(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Gt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yt(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(f(e,this),e=bt(e),e._a){var t=e._isUTC?c(e._a):Et(e._a);this._isDSTShifted=this.isValid()&&M(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function zt(){return!!this.isValid()&&!this._isUTC}function qt(){return!!this.isValid()&&this._isUTC}function Kt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Zt(e,t){var n,i,o,s=e,a=null;return Rt(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:r(e)?(s={},t?s[t]=e:s.milliseconds=e):(a=Xo.exec(e))?(n="-"===a[1]?-1:1,s={y:0,d:y(a[uo])*n,h:y(a[co])*n,m:y(a[ho])*n,s:y(a[po])*n,ms:y(Lt(1e3*a[mo]))*n}):(a=Jo.exec(e))?(n="-"===a[1]?-1:(a[1],1),s={y:Xt(a[2],n),M:Xt(a[3],n),w:Xt(a[4],n),d:Xt(a[5],n),h:Xt(a[6],n),m:Xt(a[7],n),s:Xt(a[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(o=Qt(Et(s.from),Et(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),i=new Dt(s),Rt(e)&&l(e,"_locale")&&(i._locale=e._locale),i}function Xt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Jt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Qt(e,t){var n;return e.isValid()&&t.isValid()?(t=Pt(t,e),e.isBefore(t)?n=Jt(e,t):(n=Jt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function $t(e,t){return function(n,i){var o,r;return null===i||isNaN(+i)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),n="string"==typeof n?+n:n,o=Zt(n,i),en(this,o,e),this}}function en(t,n,i,o){var r=n._milliseconds,s=Lt(n._days),a=Lt(n._months);t.isValid()&&(o=null==o||o,a&&he(t,ne(t,"Month")+a*i),s&&ie(t,"Date",ne(t,"Date")+s*i),r&&t._d.setTime(t._d.valueOf()+r*i),o&&e.updateOffset(t,s||a))}function tn(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function nn(t,n){var i=t||Et(),o=Pt(i,this).startOf("day"),r=e.calendarFormat(this,o)||"sameElse",s=n&&(E(n[r])?n[r].call(this,i):n[r]);return this.format(s||this.localeData().calendar(r,this,Et(i)))}function on(){return new _(this)}function rn(e,t){var n=g(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&(t=k(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function sn(e,t){var n=g(e)?e:Et(e);return!(!this.isValid()||!n.isValid())&&(t=k(o(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function an(e,t,n,i){return i=i||"()",("("===i[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))}function ln(e,t){var n,i=g(e)?e:Et(e);return!(!this.isValid()||!i.isValid())&&(t=k(t||"millisecond"),"millisecond"===t?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function un(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function cn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function dn(e,t,n){var i,o,r;if(!this.isValid())return NaN;if(i=Pt(e,this),!i.isValid())return NaN;switch(o=6e4*(i.utcOffset()-this.utcOffset()),t=k(t)){case"year":r=hn(this,i)/12;break;case"month":r=hn(this,i);break;case"quarter":r=hn(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-o)/864e5;break;case"week":r=(this-i-o)/6048e5;break;default:r=this-i}return n?r:v(r)}function hn(e,t){var n,i,o=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(o,"months");return t-r<0?(n=e.clone().add(o-1,"months"),i=(t-r)/(r-n)):(n=e.clone().add(o+1,"months"),i=(t-r)/(n-r)),-(o+i)||0}function pn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function mn(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?U(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):E(Date.prototype.toISOString)?this.toDate().toISOString():U(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=t+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+o)}function _n(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=U(this,t);return this.localeData().postformat(n)}function gn(e,t){return this.isValid()&&(g(e)&&e.isValid()||Et(e).isValid())?Zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function vn(e){return this.from(Et(),e)}function yn(e,t){return this.isValid()&&(g(e)&&e.isValid()||Et(e).isValid())?Zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Mn(e){return this.to(Et(),e)}function bn(e){var t;return void 0===e?this._locale._abbr:(t=tt(e),null!=t&&(this._locale=t),this)}function An(){return this._locale}function Tn(e){switch(e=k(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function En(e){return void 0===(e=k(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function wn(){return this._d.valueOf()-6e4*(this._offset||0)}function On(){return Math.floor(this.valueOf()/1e3)}function In(){return new Date(this.valueOf())}function Sn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function jn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Cn(){return this.isValid()?this.toISOString():null}function Dn(){return p(this)}function Rn(){return u({},h(this))}function Ln(){return h(this).overflow}function Nn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function kn(e,t){B(0,[e,e.length],0,t)}function Pn(e){return Bn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function xn(e){return Bn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Vn(){return Te(this.year(),1,4)}function Hn(){var e=this.localeData()._week;return Te(this.year(),e.dow,e.doy)}function Bn(e,t,n,i,o){var r;return null==e?Ae(this,i,o).year:(r=Te(e,i,o),t>r&&(t=r),Wn.call(this,e,t,n,i,o))}function Wn(e,t,n,i,o){var r=be(e,t,n,i,o),s=ye(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Fn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Un(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Gn(e,t){t[mo]=y(1e3*("0."+e))}function Yn(){return this._isUTC?"UTC":""}function zn(){return this._isUTC?"Coordinated Universal Time":""}function qn(e){return Et(1e3*e)}function Kn(){return Et.apply(null,arguments).parseZone()}function Zn(e){return e}function Xn(e,t,n,i){var o=tt(),r=c().set(i,t);return o[n](r,e)}function Jn(e,t,n){if(r(e)&&(t=e,e=void 0),e=e||"",null!=t)return Xn(e,t,n,"month");var i,o=[];for(i=0;i<12;i++)o[i]=Xn(e,i,n,"month");return o}function Qn(e,t,n,i){"boolean"==typeof e?(r(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,r(t)&&(n=t,t=void 0),t=t||"");var o=tt(),s=e?o._week.dow:0;if(null!=n)return Xn(t,(n+s)%7,i,"day");var a,l=[];for(a=0;a<7;a++)l[a]=Xn(t,(a+s)%7,i,"day");return l}function $n(e,t){return Jn(e,t,"months")}function ei(e,t){return Jn(e,t,"monthsShort")}function ti(e,t,n){return Qn(e,t,n,"weekdays")}function ni(e,t,n){return Qn(e,t,n,"weekdaysShort")}function ii(e,t,n){return Qn(e,t,n,"weekdaysMin")}function oi(){var e=this._data;return this._milliseconds=lr(this._milliseconds),this._days=lr(this._days),this._months=lr(this._months),e.milliseconds=lr(e.milliseconds),e.seconds=lr(e.seconds),e.minutes=lr(e.minutes),e.hours=lr(e.hours),e.months=lr(e.months),e.years=lr(e.years),this}function ri(e,t,n,i){var o=Zt(t,n);return e._milliseconds+=i*o._milliseconds,e._days+=i*o._days,e._months+=i*o._months,e._bubble()}function si(e,t){return ri(this,e,t,1)}function ai(e,t){return ri(this,e,t,-1)}function li(e){return e<0?Math.floor(e):Math.ceil(e)}function ui(){var e,t,n,i,o,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return r>=0&&s>=0&&a>=0||r<=0&&s<=0&&a<=0||(r+=864e5*li(di(a)+s),s=0,a=0),l.milliseconds=r%1e3,e=v(r/1e3),l.seconds=e%60,t=v(e/60),l.minutes=t%60,n=v(t/60),l.hours=n%24,s+=v(n/24),o=v(ci(s)),a+=o,s-=li(di(o)),i=v(a/12),a%=12,l.days=s,l.months=a,l.years=i,this}function ci(e){return 4800*e/146097}function di(e){return 146097*e/4800}function hi(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=k(e))||"year"===e)return t=this._days+i/864e5,n=this._months+ci(t),"month"===e?n:n/12;switch(t=this._days+Math.round(di(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function pi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12):NaN}function mi(e){return function(){return this.as(e)}}function fi(){return Zt(this)}function _i(e){return e=k(e),this.isValid()?this[e+"s"]():NaN}function gi(e){return function(){return this.isValid()?this._data[e]:NaN}}function vi(){return v(this.days()/7)}function yi(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}function Mi(e,t,n){var i=Zt(e).abs(),o=Er(i.as("s")),r=Er(i.as("m")),s=Er(i.as("h")),a=Er(i.as("d")),l=Er(i.as("M")),u=Er(i.as("y")),c=o<=wr.ss&&["s",o]||o<wr.s&&["ss",o]||r<=1&&["m"]||r<wr.m&&["mm",r]||s<=1&&["h"]||s<wr.h&&["hh",s]||a<=1&&["d"]||a<wr.d&&["dd",a]||l<=1&&["M"]||l<wr.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,yi.apply(null,c)}function bi(e){return void 0===e?Er:"function"==typeof e&&(Er=e,!0)}function Ai(e,t){return void 0!==wr[e]&&(void 0===t?wr[e]:(wr[e]=t,"s"===e&&(wr.ss=t-1),!0))}function Ti(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=Mi(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Ei(e){return(e>0)-(e<0)||+e}function wi(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i=Or(this._milliseconds)/1e3,o=Or(this._days),r=Or(this._months);e=v(i/60),t=v(e/60),i%=60,e%=60,n=v(r/12),r%=12;var s=n,a=r,l=o,u=t,c=e,d=i?i.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var p=h<0?"-":"",m=Ei(this._months)!==Ei(h)?"-":"",f=Ei(this._days)!==Ei(h)?"-":"",_=Ei(this._milliseconds)!==Ei(h)?"-":"";return p+"P"+(s?m+s+"Y":"")+(a?m+a+"M":"")+(l?f+l+"D":"")+(u||c||d?"T":"")+(u?_+u+"H":"")+(c?_+c+"M":"")+(d?_+d+"S":"")}var Oi,Ii;Ii=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var Si=e.momentProperties=[],ji=!1,Ci={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var Di;Di=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Ri={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Li={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ni=/\d{1,2}/,ki={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Pi={},xi={},Vi=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Hi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Bi={},Wi={},Fi=/\d/,Ui=/\d\d/,Gi=/\d{3}/,Yi=/\d{4}/,zi=/[+-]?\d{6}/,qi=/\d\d?/,Ki=/\d\d\d\d?/,Zi=/\d\d\d\d\d\d?/,Xi=/\d{1,3}/,Ji=/\d{1,4}/,Qi=/[+-]?\d{1,6}/,$i=/\d+/,eo=/[+-]?\d+/,to=/Z|[+-]\d\d:?\d\d/gi,no=/Z|[+-]\d\d(?::?\d\d)?/gi,io=/[+-]?\d+(\.\d{1,3})?/,oo=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ro={},so={},ao=0,lo=1,uo=2,co=3,ho=4,po=5,mo=6,fo=7,_o=8;B("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),N("year","y"),x("year",1),Y("Y",eo),Y("YY",qi,Ui),Y("YYYY",Ji,Yi),Y("YYYYY",Qi,zi),Y("YYYYYY",Qi,zi),Z(["YYYYY","YYYYYY"],ao),Z("YYYY",(function(t,n){n[ao]=2===t.length?e.parseTwoDigitYear(t):y(t)})),Z("YY",(function(t,n){n[ao]=e.parseTwoDigitYear(t)})),Z("Y",(function(e,t){t[ao]=parseInt(e,10)})),e.parseTwoDigitYear=function(e){return y(e)+(y(e)>68?1900:2e3)};var go,vo=te("FullYear",!0);go=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),B("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),N("month","M"),x("month",8),Y("M",qi),Y("MM",qi,Ui),Y("MMM",(function(e,t){return t.monthsShortRegex(e)})),Y("MMMM",(function(e,t){return t.monthsRegex(e)})),Z(["M","MM"],(function(e,t){t[lo]=y(e)-1})),Z(["MMM","MMMM"],(function(e,t,n,i){var o=n._locale.monthsParse(e,i,n._strict);null!=o?t[lo]=o:h(n).invalidMonth=e}));var yo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Mo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),bo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ao=oo,To=oo;B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),N("week","w"),N("isoWeek","W"),x("week",5),x("isoWeek",5),Y("w",qi),Y("ww",qi,Ui),Y("W",qi),Y("WW",qi,Ui),X(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=y(e)}));var Eo={dow:0,doy:6};B("d",0,"do","day"),B("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),B("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),B("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),N("day","d"),N("weekday","e"),N("isoWeekday","E"),x("day",11),x("weekday",11),x("isoWeekday",11),Y("d",qi),Y("e",qi),Y("E",qi),Y("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Y("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Y("dddd",(function(e,t){return t.weekdaysRegex(e)})),X(["dd","ddd","dddd"],(function(e,t,n,i){var o=n._locale.weekdaysParse(e,i,n._strict);null!=o?t.d=o:h(n).invalidWeekday=e})),X(["d","e","E"],(function(e,t,n,i){t[i]=y(e)}));var wo="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Oo="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Io="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),So=oo,jo=oo,Co=oo;B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Ue),B("k",["kk",2],0,Ge),B("hmm",0,0,(function(){return""+Ue.apply(this)+H(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+Ue.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+H(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)})),Ye("a",!0),Ye("A",!1),N("hour","h"),x("hour",13),Y("a",ze),Y("A",ze),Y("H",qi),Y("h",qi),Y("k",qi),Y("HH",qi,Ui),Y("hh",qi,Ui),Y("kk",qi,Ui),Y("hmm",Ki),Y("hmmss",Zi),Y("Hmm",Ki),Y("Hmmss",Zi),Z(["H","HH"],co),Z(["k","kk"],(function(e,t,n){var i=y(e);t[co]=24===i?0:i})),Z(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Z(["h","hh"],(function(e,t,n){t[co]=y(e),h(n).bigHour=!0})),Z("hmm",(function(e,t,n){var i=e.length-2;t[co]=y(e.substr(0,i)),t[ho]=y(e.substr(i)),h(n).bigHour=!0})),Z("hmmss",(function(e,t,n){var i=e.length-4,o=e.length-2;t[co]=y(e.substr(0,i)),t[ho]=y(e.substr(i,2)),t[po]=y(e.substr(o)),h(n).bigHour=!0})),Z("Hmm",(function(e,t,n){var i=e.length-2;t[co]=y(e.substr(0,i)),t[ho]=y(e.substr(i))})),Z("Hmmss",(function(e,t,n){var i=e.length-4,o=e.length-2;t[co]=y(e.substr(0,i)),t[ho]=y(e.substr(i,2)),t[po]=y(e.substr(o))}));var Do,Ro=/[ap]\.?m?\.?/i,Lo=te("Hours",!0),No={calendar:Ri,longDateFormat:Li,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Ni,relativeTime:ki,months:Mo,monthsShort:bo,week:Eo,weekdays:wo,weekdaysMin:Io,weekdaysShort:Oo,meridiemParse:Ro},ko={},Po={},xo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Vo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ho=/Z|[+-]\d\d(?::?\d\d)?/,Bo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Wo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Fo=/^\/?Date\((\-?\d+)/i,Uo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Go={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,
MDT:-360,MST:-420,PDT:-420,PST:-480};e.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),e.ISO_8601=function(){},e.RFC_2822=function(){};var Yo=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()})),zo=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Et.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()})),qo=function(){return Date.now?Date.now():+new Date},Ko=["year","quarter","month","week","day","hour","minute","second","millisecond"];Nt("Z",":"),Nt("ZZ",""),Y("Z",no),Y("ZZ",no),Z(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=kt(no,e)}));var Zo=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Xo=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Jo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Zt.fn=Dt.prototype,Zt.invalid=Ct;var Qo=$t(1,"add"),$o=$t(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var er=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),kn("gggg","weekYear"),kn("ggggg","weekYear"),kn("GGGG","isoWeekYear"),kn("GGGGG","isoWeekYear"),N("weekYear","gg"),N("isoWeekYear","GG"),x("weekYear",1),x("isoWeekYear",1),Y("G",eo),Y("g",eo),Y("GG",qi,Ui),Y("gg",qi,Ui),Y("GGGG",Ji,Yi),Y("gggg",Ji,Yi),Y("GGGGG",Qi,zi),Y("ggggg",Qi,zi),X(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=y(e)})),X(["gg","GG"],(function(t,n,i,o){n[o]=e.parseTwoDigitYear(t)})),B("Q",0,"Qo","quarter"),N("quarter","Q"),x("quarter",7),Y("Q",Fi),Z("Q",(function(e,t){t[lo]=3*(y(e)-1)})),B("D",["DD",2],"Do","date"),N("date","D"),x("date",9),Y("D",qi),Y("DD",qi,Ui),Y("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Z(["D","DD"],uo),Z("Do",(function(e,t){t[uo]=y(e.match(qi)[0],10)}));var tr=te("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),N("dayOfYear","DDD"),x("dayOfYear",4),Y("DDD",Xi),Y("DDDD",Gi),Z(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=y(e)})),B("m",["mm",2],0,"minute"),N("minute","m"),x("minute",14),Y("m",qi),Y("mm",qi,Ui),Z(["m","mm"],ho);var nr=te("Minutes",!1);B("s",["ss",2],0,"second"),N("second","s"),x("second",15),Y("s",qi),Y("ss",qi,Ui),Z(["s","ss"],po);var ir=te("Seconds",!1);B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),N("millisecond","ms"),x("millisecond",16),Y("S",Xi,Fi),Y("SS",Xi,Ui),Y("SSS",Xi,Gi);var or;for(or="SSSS";or.length<=9;or+="S")Y(or,$i);for(or="S";or.length<=9;or+="S")Z(or,Gn);var rr=te("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var sr=_.prototype;sr.add=Qo,sr.calendar=nn,sr.clone=on,sr.diff=dn,sr.endOf=En,sr.format=_n,sr.from=gn,sr.fromNow=vn,sr.to=yn,sr.toNow=Mn,sr.get=oe,sr.invalidAt=Ln,sr.isAfter=rn,sr.isBefore=sn,sr.isBetween=an,sr.isSame=ln,sr.isSameOrAfter=un,sr.isSameOrBefore=cn,sr.isValid=Dn,sr.lang=er,sr.locale=bn,sr.localeData=An,sr.max=zo,sr.min=Yo,sr.parsingFlags=Rn,sr.set=re,sr.startOf=Tn,sr.subtract=$o,sr.toArray=Sn,sr.toObject=jn,sr.toDate=In,sr.toISOString=mn,sr.inspect=fn,sr.toJSON=Cn,sr.toString=pn,sr.unix=On,sr.valueOf=wn,sr.creationData=Nn,sr.year=vo,sr.isLeapYear=ee,sr.weekYear=Pn,sr.isoWeekYear=xn,sr.quarter=sr.quarters=Fn,sr.month=pe,sr.daysInMonth=me,sr.week=sr.weeks=Ie,sr.isoWeek=sr.isoWeeks=Se,sr.weeksInYear=Hn,sr.isoWeeksInYear=Vn,sr.date=tr,sr.day=sr.days=Pe,sr.weekday=xe,sr.isoWeekday=Ve,sr.dayOfYear=Un,sr.hour=sr.hours=Lo,sr.minute=sr.minutes=nr,sr.second=sr.seconds=ir,sr.millisecond=sr.milliseconds=rr,sr.utcOffset=Vt,sr.utc=Bt,sr.local=Wt,sr.parseZone=Ft,sr.hasAlignedHourOffset=Ut,sr.isDST=Gt,sr.isLocal=zt,sr.isUtcOffset=qt,sr.isUtc=Kt,sr.isUTC=Kt,sr.zoneAbbr=Yn,sr.zoneName=zn,sr.dates=A("dates accessor is deprecated. Use date instead.",tr),sr.months=A("months accessor is deprecated. Use month instead",pe),sr.years=A("years accessor is deprecated. Use year instead",vo),sr.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ht),sr.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Yt);var ar=I.prototype;ar.calendar=S,ar.longDateFormat=j,ar.invalidDate=C,ar.ordinal=D,ar.preparse=Zn,ar.postformat=Zn,ar.relativeTime=R,ar.pastFuture=L,ar.set=w,ar.months=le,ar.monthsShort=ue,ar.monthsParse=de,ar.monthsRegex=_e,ar.monthsShortRegex=fe,ar.week=Ee,ar.firstDayOfYear=Oe,ar.firstDayOfWeek=we,ar.weekdays=De,ar.weekdaysMin=Le,ar.weekdaysShort=Re,ar.weekdaysParse=ke,ar.weekdaysRegex=He,ar.weekdaysShortRegex=Be,ar.weekdaysMinRegex=We,ar.isPM=qe,ar.meridiem=Ke,Qe("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=A("moment.lang is deprecated. Use moment.locale instead.",Qe),e.langData=A("moment.langData is deprecated. Use moment.localeData instead.",tt);var lr=Math.abs,ur=mi("ms"),cr=mi("s"),dr=mi("m"),hr=mi("h"),pr=mi("d"),mr=mi("w"),fr=mi("M"),_r=mi("y"),gr=gi("milliseconds"),vr=gi("seconds"),yr=gi("minutes"),Mr=gi("hours"),br=gi("days"),Ar=gi("months"),Tr=gi("years"),Er=Math.round,wr={ss:44,s:45,m:45,h:22,d:26,M:11},Or=Math.abs,Ir=Dt.prototype;return Ir.isValid=jt,Ir.abs=oi,Ir.add=si,Ir.subtract=ai,Ir.as=hi,Ir.asMilliseconds=ur,Ir.asSeconds=cr,Ir.asMinutes=dr,Ir.asHours=hr,Ir.asDays=pr,Ir.asWeeks=mr,Ir.asMonths=fr,Ir.asYears=_r,Ir.valueOf=pi,Ir._bubble=ui,Ir.clone=fi,Ir.get=_i,Ir.milliseconds=gr,Ir.seconds=vr,Ir.minutes=yr,Ir.hours=Mr,Ir.days=br,Ir.weeks=vi,Ir.months=Ar,Ir.years=Tr,Ir.humanize=Ti,Ir.toISOString=wi,Ir.toString=wi,Ir.toJSON=wi,Ir.locale=bn,Ir.localeData=An,Ir.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",wi),Ir.lang=er,B("X",0,0,"unix"),B("x",0,0,"valueOf"),Y("x",eo),Y("X",io),Z("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),Z("x",(function(e,t,n){n._d=new Date(y(e))})),e.version="2.19.2",(function(e){Oi=e})(Et),e.fn=sr,e.min=Ot,e.max=It,e.now=qo,e.utc=c,e.unix=qn,e.months=$n,e.isDate=s,e.locale=Qe,e.invalid=m,e.duration=Zt,e.isMoment=g,e.weekdays=ti,e.parseZone=Kn,e.localeData=tt,e.isDuration=Rt,e.monthsShort=ei,e.weekdaysMin=ii,e.defineLocale=$e,e.updateLocale=et,e.locales=nt,e.weekdaysShort=ni,e.normalizeUnits=k,e.relativeTimeRounding=bi,e.relativeTimeThreshold=Ai,e.calendarFormat=tn,e.prototype=sr,e})),(function(e,t){"use strict";"function"==typeof define&&define.amd?define("moment-timezone",["moment"],t):"object"==typeof module&&module.exports?module.exports=t(require("moment")):t(e.moment)})(this,(function(e){"use strict";function t(e){return e>96?e-87:e>64?e-29:e-48}function n(e){var n,i=0,o=e.split("."),r=o[0],s=o[1]||"",a=1,l=0,u=1;for(45===e.charCodeAt(0)&&(i=1,u=-1),i;i<r.length;i++)n=t(r.charCodeAt(i)),l=60*l+n;for(i=0;i<s.length;i++)a/=60,n=t(s.charCodeAt(i)),l+=n*a;return l*u}function i(e){for(var t=0;t<e.length;t++)e[t]=n(e[t])}function o(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}function r(e,t){var n,i=[];for(n=0;n<t.length;n++)i[n]=e[t[n]];return i}function s(e){var t=e.split("|"),n=t[2].split(" "),s=t[3].split(""),a=t[4].split(" ");return i(n),i(s),i(a),o(a,s.length),{name:t[0],abbrs:r(t[1].split(" "),s),offsets:r(n,s),untils:a,population:0|t[5]}}function a(e){e&&this._set(s(e))}function l(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);n&&n[0]?(n=n[0].match(/[A-Z]/g),n=n?n.join(""):void 0):(n=t.match(/[A-Z]{3,5}/g),n=n?n[0]:void 0),"GMT"===n&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function u(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function c(e,t){for(var n,i;i=6e4*((t.at-e.at)/12e4|0);)n=new l(new Date(e.at+i)),n.offset===e.offset?e=n:t=n;return e}function d(){var e,t,n,i=(new Date).getFullYear()-2,o=new l(new Date(i,0,1)),r=[o];for(n=1;n<48;n++)t=new l(new Date(i,n,1)),t.offset!==o.offset&&(e=c(o,t),r.push(e),r.push(new l(new Date(e.at+6e4)))),o=t;for(n=0;n<4;n++)r.push(new l(new Date(i+n,0,1))),r.push(new l(new Date(i+n,6,1)));return r}function h(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:t.zone.population-e.zone.population}function p(e,t){var n,o;for(i(t),n=0;n<t.length;n++)o=t[n],R[o]=R[o]||{},R[o][e]=!0}function m(e){var t,n,i,o=e.length,r={},s=[];for(t=0;t<o;t++){i=R[e[t].offset]||{};for(n in i)i.hasOwnProperty(n)&&(r[n]=!0)}for(t in r)r.hasOwnProperty(t)&&s.push(D[t]);return s}function f(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=D[g(e)];if(t)return t;w("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n,i,o,r=d(),s=r.length,a=m(r),l=[];for(i=0;i<a.length;i++){for(n=new u(y(a[i]),s),o=0;o<s;o++)n.scoreOffsetAt(r[o]);l.push(n)}return l.sort(h),l.length>0?l[0].zone.name:void 0}function _(e){return S&&!e||(S=f()),S}function g(e){return(e||"").toLowerCase().replace(/\//g,"_")}function v(e){var t,n,i,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i=e[t].split("|"),n=i[0],o=g(n),j[o]=e[t],D[o]=n,p(o,i[2].split(" "))}function y(e,t){e=g(e);var n,i=j[e];return i instanceof a?i:"string"==typeof i?(i=new a(i),j[e]=i,i):C[e]&&t!==y&&(n=y(C[e],y))?(i=j[e]=new a,i._set(n),i.name=D[e],i):null}function M(){var e,t=[];for(e in D)D.hasOwnProperty(e)&&(j[e]||j[C[e]])&&D[e]&&t.push(D[e]);return t.sort()}function b(e){var t,n,i,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=e[t].split("|"),i=g(n[0]),o=g(n[1]),C[i]=o,D[i]=n[0],C[o]=i,D[o]=n[1]}function A(e){v(e.zones),b(e.links),O.dataVersion=e.version}function T(e){return T.didShowError||(T.didShowError=!0,w("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!y(e)}function E(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function w(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function O(t){var n=Array.prototype.slice.call(arguments,0,-1),i=arguments[arguments.length-1],o=y(i),r=e.utc.apply(null,n);return o&&!e.isMoment(t)&&E(r)&&r.add(o.parse(r),"minutes"),r.tz(i),r}function I(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}var S,j={},C={},D={},R={},L=e.version.split("."),N=+L[0],k=+L[1];(N<2||2===N&&k<6)&&w("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),a.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,n=+e,i=this.untils;for(t=0;t<i.length;t++)if(n<i[t])return t},parse:function(e){var t,n,i,o,r=+e,s=this.offsets,a=this.untils,l=a.length-1;for(o=0;o<l;o++)if(t=s[o],n=s[o+1],i=s[o?o-1:o],t<n&&O.moveAmbiguousForward?t=n:t>i&&O.moveInvalidForward&&(t=i),r<a[o]-6e4*t)return s[o];return s[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return w("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},u.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},O.version="0.5.14",O.dataVersion="",O._zones=j,O._links=C,O._names=D,O.add=v,O.link=b,O.load=A,O.zone=y,O.zoneExists=T,O.guess=_,O.names=M,O.Zone=a,O.unpack=s,O.unpackBase60=n,O.needsOffset=E,O.moveInvalidForward=!0,O.moveAmbiguousForward=!1;var P=e.fn;e.tz=O,e.defaultZone=null,e.updateOffset=function(t,n){var i,o=e.defaultZone;void 0===t._z&&(o&&E(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(o.parse(t),"minutes")),t._z=o),t._z&&(i=t._z.utcOffset(t),Math.abs(i)<16&&(i/=60),void 0!==t.utcOffset?t.utcOffset(-i,n):t.zone(i,n))},P.tz=function(t,n){return t?(this._z=y(t),this._z?e.updateOffset(this,n):w("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},P.zoneName=I(P.zoneName),P.zoneAbbr=I(P.zoneAbbr),P.utc=(function(e){return function(){return this._z=null,e.apply(this,arguments)}})(P.utc),e.tz.setDefault=function(t){return(N<2||2===N&&k<9)&&w("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?y(t):null,e};var x=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(x)?(x.push("_z"),x.push("_a")):x&&(x._z=null),e})),define("module/core/js/ext/moment-ig-i18n",["require","moment"],(function(e){"use strict";var t=e("moment");!(function(e){!(function(e){function t(e,t,n,i){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?o[n][0]:o[n][1]}e.locale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){e.locale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");e.locale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [del] YYYY",LLL:"D [de] MMMM [del] YYYY LT",LLLL:"dddd, D [de] MMMM [del] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:"%dº",week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){e.locale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){function t(e,t,n,i){var o=e;switch(n){case"s":return i||t?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return o+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" óra":" órája");case"hh":return o+(i||t?" óra":" órája");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return o+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hónap":" hónapja");case"MM":return o+(i||t?" hónap":" hónapja");case"y":return"egy"+(i||t?" év":" éve");case"yy":return o+(i||t?" év":" éve")}return""}function n(e){return(e?"":"[múlt] ")+"["+i[this.day()]+"] LT[-kor]"}var i="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");e.locale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return n.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return n.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:7}})})(t)})(),(function(e){!(function(e){e.locale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:"[lo scorso] dddd [alle] LT",sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:"%dº",week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){e.locale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})})(t)})(),(function(e){!(function(e){var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");e.locale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){e.locale("no",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){e.locale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dº",week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){e.locale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"dddd LT",lastWeek:"[Förra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){e.locale("zh",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()-t.unix()>=604800?"[下]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},lastWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()<t.unix()?"[上]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},sameElse:"LL"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})})(t)})(),(function(e){!(function(e){e.locale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(e,t,n){var i=100*e+t;return i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}})})(t)})()})),define("module/core/js/ext/moment-ig-timezones",["require","moment","moment-timezone"],(function(e){"use strict";var t=e("moment");e("moment-timezone");t.tz.load({version:"2016g",
zones:["Africa/Johannesburg|SAST SAST SAST|-1u -20 -30|012121|-2GJdu 1Ajdu 1cL0 1cN0 1cL0|84e5","America/New_York|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 11B0 1qL0 1a10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","Asia/Dubai|LMT GST|-3F.c -40|01|-21JfF.c|39e5","Asia/Hong_Kong|LMT HKT HKST JST|-7A.G -80 -90 -90|0121312121212121212121212121212121212121212121212121212121212121212121|-2CFHA.G 1sEP6.G 1cL0 ylu 93X0 1qQu 1tX0 Rd0 1In0 NB0 1cL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1kL0 14N0 1nX0 U10 1tz0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 Rd0 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 17d0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0|73e5","Asia/Nicosia|LMT EET EEST|-2d.s -20 -30|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1Vc2d.s 2a3cd.s 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|32e4","Asia/Shanghai|CST CDT|-80 -90|01010101010101010|-1c1I0 LX0 16p0 1jz0 1Myp0 Rb0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0|23e6","Asia/Singapore|SMT MALT MALST MALT MALT JST SGT SGT|-6T.p -70 -7k -7k -7u -90 -7u -80|012345467|-2Bg6T.p 17anT.p 7hXE dM00 17bO 8Fyu Mspu DTA0|56e5","Asia/Tokyo|JCST JST JDT|-90 -90 -a0|0121212121|-1iw90 pKq0 QL0 1lB0 13X0 1zB0 NX0 1zB0 NX0|38e6","Australia/Melbourne|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1qM0 11A0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|39e5","Australia/Sydney|AEST AEDT|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|40e5","Etc/GMT-4|GMT-4|-40|0|","Etc/UTC|UTC|0|0|","Europe/Amsterdam|AMT NST NEST NET CEST CET|-j.w -1j.w -1k -k -20 -10|010101010101010101010101010101010101010101012323234545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545|-2aFcj.w 11b0 1iP0 11A0 1io0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1co0 1io0 1yo0 Pc0 1a00 1fA0 1Bc0 Mo0 1tc0 Uo0 1tA0 U00 1uo0 W00 1s00 VA0 1so0 Vc0 1sM0 UM0 1wo0 Rc0 1u00 Wo0 1rA0 W00 1s00 VA0 1sM0 UM0 1w00 fV0 BCX.w 1tA0 U00 1u00 Wo0 1sm0 601k WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|16e5","Europe/Athens|AMT EET EEST CEST CET|-1y.Q -20 -30 -20 -10|012123434121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a61x.Q CNbx.Q mn0 kU10 9b0 3Es0 Xa0 1fb0 1dd0 k3X0 Nz0 SCp0 1vc0 SO0 1cM0 1a00 1ao0 1fc0 1a10 1fG0 1cg0 1dX0 1bX0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|35e5","Europe/Belgrade|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-19RC0 3IP0 WM0 1fA0 1cM0 1cM0 1rc0 Qo0 1vmo0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Europe/Berlin|CET CEST CEMT|-10 -20 -30|01010101010101210101210101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 kL0 Nc0 m10 WM0 1ao0 1cp0 dX0 jz0 Dd0 1io0 17c0 1fA0 1a00 1ehA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|41e5","Europe/Brussels|WET CET CEST WEST|0 -10 -20 -10|0121212103030303030303030303030303030303030303030303212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ehc0 3zX0 11c0 1iO0 11A0 1o00 11A0 my0 Ic0 1qM0 Rc0 1EM0 UM0 1u00 10o0 1io0 1io0 17c0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a30 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 y00 5Wn0 WM0 1fA0 1cM0 16M0 1iM0 16M0 1C00 Uo0 1eeo0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|21e5","Europe/Bucharest|BMT EET EEST|-1I.o -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1xApI.o 20LI.o RA0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Axc0 On0 1fA0 1a10 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|19e5","Europe/Budapest|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1ip0 17b0 1op0 1tb0 Q2m0 3Ne0 WM0 1fA0 1cM0 1cM0 1oJ0 1dc0 1030 1fA0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1iM0 1fA0 8Ha0 Rb0 1wN0 Rb0 1BB0 Lz0 1C20 LB0 SNX0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e5","Europe/Copenhagen|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2azC0 Tz0 VuO0 60q0 WM0 1fA0 1cM0 1cM0 1cM0 S00 1HA0 Nc0 1C00 Dc0 1Nc0 Ao0 1h5A0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Europe/Helsinki|HMT EET EEST|-1D.N -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1WuND.N OULD.N 1dA0 1xGq0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Europe/Istanbul|IMT EET EEST TRST TRT|-1U.U -20 -30 -40 -30|012121212121212121212121212121212121212121212121212121234343434342121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ogNU.U dzzU.U 11b0 8tB0 1on0 1410 1db0 19B0 1in0 3Rd0 Un0 1oN0 11b0 zSp0 CL0 mN0 1Vz0 1gN0 1pz0 5Rd0 1fz0 1yp0 ML0 1kp0 17b0 1ip0 17b0 1fB0 19X0 1jB0 18L0 1ip0 17z0 qdd0 xX0 3S10 Tz0 dA10 11z0 1o10 11z0 1qN0 11z0 1ze0 11B0 WM0 1qO0 WI0 1nX0 1rB0 10L0 11B0 1in0 17d0 1in0 2pX0 19E0 1fU0 16Q0 1iI0 16Q0 1iI0 1Vd0 pb0 3Kp0 14o0 1df0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WO0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|13e6","Europe/Lisbon|LMT WET WEST WEMT CET CEST|A.J 0 -10 -20 -10 -20|012121212121212121212121212121212121212121212321232123212321212121212121212121212121212121212121214121212121212121212121212121212124545454212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ldXn.f aPWn.f Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 pvy0 1cM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|27e5","Europe/London|GMT BST BDST|0 -10 -20|0101010101010101010101010101010101010101010101010121212121210101210101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2axa0 Rc0 1fA0 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 2Rz0 Dc0 1zc0 Oo0 1zc0 Rc0 1wo0 17c0 1iM0 FA0 xB0 1fA0 1a00 14o0 bb0 LA0 xB0 Rc0 1wo0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1a00 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1tA0 IM0 90o0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|10e6","Europe/Luxembourg|LMT CET CEST WET WEST WEST WET|-o.A -10 -20 0 -10 -20 -10|0121212134343434343434343434343434343434343434343434565651212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2DG0o.A t6mo.A TB0 1nX0 Up0 1o20 11A0 rW0 CM0 1qP0 R90 1EO0 UK0 1u20 10m0 1ip0 1in0 17e0 19W0 1fB0 1db0 1cp0 1in0 17d0 1fz0 1a10 1in0 1a10 1in0 17f0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 vA0 60L0 WM0 1fA0 1cM0 17c0 1io0 16M0 1C00 Uo0 1eeo0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|54e4","Europe/Madrid|WET WEST WEMT CET CEST|0 -10 -20 -10 -20|01010101010101010101010121212121234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-28dd0 11A0 1go0 19A0 1co0 1dA0 b1A0 18o0 3I00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 iyo0 Rc0 18o0 1hc0 1io0 1a00 14o0 5aL0 MM0 1vc0 17A0 1i00 1bc0 1eo0 17d0 1in0 17A0 6hA0 10N0 XIL0 1a10 1in0 17d0 19X0 1cN0 1fz0 1a10 1fX0 1cp0 1cO0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|62e5","Europe/Malta|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2as10 M00 1cM0 1cM0 14o0 1o00 WM0 1qM0 17c0 1cM0 M3A0 5M20 WM0 1fA0 1cM0 1cM0 1cM0 16m0 1de0 1lc0 14m0 1lc0 WO0 1qM0 GTW0 On0 1C10 Lz0 1C10 Lz0 1EN0 Lz0 1C10 Lz0 1zd0 Oo0 1C00 On0 1cp0 1cM0 1lA0 Xc0 1qq0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1iN0 19z0 1fB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|42e4","Europe/Moscow|MMT MMT MST MDST MSD MSK MSM EET EEST MSK|-2u.h -2v.j -3v.j -4v.j -40 -30 -50 -20 -30 -40|012132345464575454545454545454545458754545454545454545454545454545454545454595|-2ag2u.h 2pyW.W 1bA0 11X0 GN0 1Hb0 c20 imv.j 3DA0 dz0 15A0 c10 2q10 iM10 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 8Hz0|16e6","Europe/Oslo|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2awM0 Qm0 W6o0 5pf0 WM0 1fA0 1cM0 1cM0 1cM0 1cM0 wJc0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1qM0 WM0 zpc0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|62e4","Europe/Paris|PMT WET WEST CEST CET WEMT|-9.l 0 -10 -20 -10 -20|0121212121212121212121212121212121212121212121212123434352543434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434|-2nco8.l cNb8.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 1u00 10o0 1io0 1wo0 Rc0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Df0 Ik0 5M30 WM0 1fA0 1cM0 Vx0 hB0 1aq0 16M0 1ekn0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|11e6","Europe/Prague|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 16M0 1lc0 1tA0 17A0 11c0 1io0 17c0 1io0 17c0 1fc0 1ao0 1bNc0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|13e5","Europe/Riga|RMT LST EET MSK CEST CET MSD EEST|-1A.y -2A.y -20 -30 -20 -10 -40 -30|010102345454536363636363636363727272727272727272727272727272727272727272727272727272727272727272727272727272727272727272727272|-25TzA.y 11A0 1iM0 ko0 gWm0 yDXA.y 2bX0 3fE0 WM0 1fA0 1cM0 1cM0 4m0 1sLy0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1o00 11A0 1o00 11A0 1qM0 3oo0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|64e4","Europe/Rome|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2as10 M00 1cM0 1cM0 14o0 1o00 WM0 1qM0 17c0 1cM0 M3A0 5M20 WM0 1fA0 1cM0 16K0 1iO0 16m0 1de0 1lc0 14m0 1lc0 WO0 1qM0 GTW0 On0 1C10 Lz0 1C10 Lz0 1EN0 Lz0 1C10 Lz0 1zd0 Oo0 1C00 On0 1C10 Lz0 1zd0 On0 1C10 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1zc0 Oo0 1fC0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|39e5","Europe/Sofia|EET CET CEST EEST|-20 -10 -20 -30|01212103030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030|-168L0 WM0 1fA0 1cM0 1cM0 1cN0 1mKH0 1dd0 1fb0 1ap0 1fb0 1a20 1fy0 1a30 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Europe/Stockholm|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2azC0 TB0 2yDe0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|15e5","Europe/Tallinn|TMT CET CEST EET MSK MSD EEST|-1D -10 -20 -20 -30 -40 -30|012103421212454545454545454546363636363636363636363636363636363636363636363636363636363636363636363636363636363636363636363|-26oND teD 11A0 1Ta0 4rXl KSLD 2FX0 2Jg0 WM0 1fA0 1cM0 18J0 1sTX0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o10 11A0 1qM0 5QM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|41e4","Europe/Vilnius|WMT KMT CET EET MSK CEST MSD EEST|-1o -1z.A -10 -20 -30 -20 -40 -30|012324525254646464646464646473737373737373737352537373737373737373737373737373737373737373737373737373737373737373737373|-293do 6ILM.o 1Ooz.A zz0 Mfd0 29W0 3is0 WM0 1fA0 1cM0 LV0 1tgL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11B0 1o00 11A0 1qM0 8io0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|54e4","Europe/Warsaw|WMT CET CEST EET EEST|-1o -10 -20 -20 -30|012121234312121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ctdo 1LXo 11d0 1iO0 11A0 1o00 11A0 1on0 11A0 6zy0 HWP0 5IM0 WM0 1fA0 1cM0 1dz0 1mL0 1en0 15B0 1aq0 1nA0 11A0 1io0 17c0 1fA0 1a00 iDX0 LA0 1cM0 1cM0 1C00 Oo0 1cM0 1cM0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1C00 LA0 uso0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e5","Europe/Zurich|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-19Lc0 11A0 1o00 11A0 1xG10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|38e4","Pacific/Enderbury|PHOT PHOT PHOT|c0 b0 -d0|012|nIc0 B8n0|1"],links:["Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","America/New_York|USA","America/New_York|US/Eastern","Asia/Hong_Kong|Hongkong","Asia/Nicosia|Europe/Nicosia","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|PRC","Asia/Singapore|Singapore","Asia/Tokyo|Japan","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/NSW","Europe/Belgrade|Europe/Ljubljana","Europe/Belgrade|Europe/Podgorica","Europe/Belgrade|Europe/Sarajevo","Europe/Belgrade|Europe/Skopje","Europe/Belgrade|Europe/Zagreb","Europe/Helsinki|Europe/Mariehamn","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Oslo|Arctic/Longyearbyen","Europe/Oslo|Atlantic/Jan_Mayen","Europe/Lisbon|Portugal","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Prague|Europe/Bratislava","Europe/Moscow|W-SU","Europe/Rome|Europe/San_Marino","Europe/Rome|Europe/Vatican","Europe/Warsaw|Poland","Europe/Zurich|Europe/Busingen","Europe/Zurich|Europe/Vaduz","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu"]})})),define("shared-dependencies",["require","module/core/js/ext/polyfills","moment","moment-timezone","module/core/js/ext/moment-ig-i18n","module/core/js/ext/moment-ig-timezones"],(function(e){"use strict";e("module/core/js/ext/polyfills"),e("moment"),e("moment-timezone"),e("module/core/js/ext/moment-ig-i18n"),
e("module/core/js/ext/moment-ig-timezones")})),define("module/core/js/ext/hand-1.3.8.patched",[],(function(){var e={};return(window.HTMLElement||window.Element)&&(function(){function t(){T=!0,clearTimeout(E),E=setTimeout((function(){T=!1}),700)}function n(e){var t=[];if(e)for(t.unshift(e);e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}function i(e,t){for(var i=n(e),o=n(t),r=null;i.length>0&&i[0]==o.shift();)r=i.shift();return r}function o(e,t,n){for(var o=i(e,t),r=e,s=[];r&&r!=o;)m(r,"pointerenter")&&s.push(r),r=r.parentNode;for(;s.length>0;)n(s.pop())}function r(e,t,n){for(var o=i(e,t),r=e;r&&r!=o;)m(r,"pointerleave")&&n(r),r=r.parentNode}function s(e,t){["pointerdown","pointermove","pointerup","pointerover","pointerout"].forEach((function(n){var i=e(n);window.addEventListener(i,(function(e){!T&&f(e.target,n)&&e.type===i&&t(e,n,!0)}))})),void 0===window["on"+e("pointerenter").toLowerCase()]&&window.addEventListener(e("pointerover"),(function(e){if(!T){var n=f(e.target,"pointerenter");n&&n!==window&&(n.contains(e.relatedTarget)||o(n,e.relatedTarget,(function(n){t(e,"pointerenter",!1,n,e.relatedTarget)})))}})),void 0===window["on"+e("pointerleave").toLowerCase()]&&window.addEventListener(e("pointerout"),(function(e){if(!T){var n=f(e.target,"pointerleave");n&&n!==window&&(n.contains(e.relatedTarget)||r(n,e.relatedTarget,(function(n){t(e,"pointerleave",!1,n,e.relatedTarget)})))}}))}if(!window.PointerEvent){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&i!=1/0&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var o=i>=0?i:Math.max(n-Math.abs(i),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if(!(this&&e instanceof Function))throw new TypeError;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/,"")});var a=["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","pointerenter","pointerleave"],l=["PointerDown","PointerUp","PointerMove","PointerOver","PointerOut","PointerCancel","PointerEnter","PointerLeave"],u={},c=function(e){for(;e&&!e.handjs_forcePreventDefault;)e=e.parentNode;return!!e||window.handjs_forcePreventDefault},d=function(e,t,n,i,o){var r;if(document.createEvent?(r=document.createEvent("MouseEvents"),r.initMouseEvent(t,n,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,o||e.relatedTarget)):(r=document.createEventObject(),r.screenX=e.screenX,r.screenY=e.screenY,r.clientX=e.clientX,r.clientY=e.clientY,r.ctrlKey=e.ctrlKey,r.altKey=e.altKey,r.shiftKey=e.shiftKey,r.metaKey=e.metaKey,r.button=e.button,r.relatedTarget=o||e.relatedTarget),void 0===r.offsetX&&(void 0!==e.offsetX?(Object&&void 0!==Object.defineProperty&&(Object.defineProperty(r,"offsetX",{writable:!0}),Object.defineProperty(r,"offsetY",{writable:!0})),r.offsetX=e.offsetX,r.offsetY=e.offsetY):Object&&void 0!==Object.defineProperty?(Object.defineProperty(r,"offsetX",{get:function(){return this.currentTarget&&this.currentTarget.offsetLeft?e.clientX-this.currentTarget.offsetLeft:e.clientX}}),Object.defineProperty(r,"offsetY",{get:function(){return this.currentTarget&&this.currentTarget.offsetTop?e.clientY-this.currentTarget.offsetTop:e.clientY}})):void 0!==e.layerX&&(r.offsetX=e.layerX-e.currentTarget.offsetLeft,r.offsetY=e.layerY-e.currentTarget.offsetTop)),void 0!==e.isPrimary?r.isPrimary=e.isPrimary:r.isPrimary=!0,e.pressure)r.pressure=e.pressure;else{var s=0;void 0!==e.which?s=e.which:void 0!==e.button&&(s=e.button),r.pressure=0==s?0:.5}if(e.rotation?r.rotation=e.rotation:r.rotation=0,e.hwTimestamp?r.hwTimestamp=e.hwTimestamp:r.hwTimestamp=0,e.tiltX?r.tiltX=e.tiltX:r.tiltX=0,e.tiltY?r.tiltY=e.tiltY:r.tiltY=0,e.height?r.height=e.height:r.height=0,e.width?r.width=e.width:r.width=0,r.preventDefault=function(){void 0!==e.preventDefault&&e.preventDefault()},void 0!==r.stopPropagation){var a=r.stopPropagation;r.stopPropagation=function(){void 0!==e.stopPropagation&&e.stopPropagation(),a.call(this)}}switch(r.pointerId=e.pointerId,r.pointerType=e.pointerType,r.pointerType){case 2:r.pointerType="touch";break;case 3:r.pointerType="pen";break;case 4:r.pointerType="mouse"}i?i.dispatchEvent(r):e.target?e.target.dispatchEvent(r):e.srcElement.fireEvent("on"+g(t),r)},h=function(e,t,n,i,o){e.pointerId=1,e.pointerType="mouse",d(e,t,n,i,o)},p=function(e,t,n,i,o,r){var s=t.identifier+2;t.pointerId=s,t.pointerType="touch",t.currentTarget=n,void 0!==i.preventDefault&&(t.preventDefault=function(){i.preventDefault()}),d(t,e,o,n,r)},m=function(e,t){return e.__handjsGlobalRegisteredEvents&&e.__handjsGlobalRegisteredEvents[t]},f=function(e,t){for(;e&&!m(e,t);)e=e.parentNode;return e||(m(window,t)?window:void 0)},_=function(e,t,n,i,o,r){f(n,e)&&p(e,t,n,i,o,r)},g=function(e){return e.toLowerCase().replace("pointer","mouse")},v=function(e,t){var n=a.indexOf(t);return e+l[n]},y=function(e,t,n,i){if(void 0===e.__handjsRegisteredEvents&&(e.__handjsRegisteredEvents=[]),i){if(void 0!==e.__handjsRegisteredEvents[t])return void e.__handjsRegisteredEvents[t]++;e.__handjsRegisteredEvents[t]=1,e.addEventListener(t,n,!1)}else{if(-1!==e.__handjsRegisteredEvents.indexOf(t)&&0!=--e.__handjsRegisteredEvents[t])return;e.removeEventListener(t,n),e.__handjsRegisteredEvents[t]=0}},M=function(e,t,n){if(e.__handjsGlobalRegisteredEvents||(e.__handjsGlobalRegisteredEvents=[]),n){if(void 0!==e.__handjsGlobalRegisteredEvents[t])return void e.__handjsGlobalRegisteredEvents[t]++;e.__handjsGlobalRegisteredEvents[t]=1}else void 0!==e.__handjsGlobalRegisteredEvents[t]&&--e.__handjsGlobalRegisteredEvents[t]<0&&(e.__handjsGlobalRegisteredEvents[t]=0);var i,o;switch(window.MSPointerEvent?(i=function(e){return v("MS",e)},o=d):(i=g,o=h),t){case"pointerenter":case"pointerleave":var r=i(t);void 0!==e["on"+r.toLowerCase()]&&y(e,r,(function(e){o(e,t)}),n)}},b=function(e){var t=e.prototype?e.prototype.addEventListener:e.addEventListener,n=function(e,n,i){-1!=a.indexOf(e)&&M(this,e,!0),void 0===t?this.attachEvent("on"+g(e),n):t.call(this,e,n,i)};e.prototype?e.prototype.addEventListener=n:e.addEventListener=n},A=function(e){var t=e.prototype?e.prototype.removeEventListener:e.removeEventListener,n=function(e,n,i){-1!=a.indexOf(e)&&M(this,e,!1),void 0===t?this.detachEvent(g(e),n):t.call(this,e,n,i)};e.prototype?e.prototype.removeEventListener=n:e.removeEventListener=n};b(window),b(window.HTMLElement||window.Element),b(document),b(HTMLBodyElement),b(HTMLDivElement),b(HTMLImageElement),b(HTMLUListElement),b(HTMLAnchorElement),b(HTMLLIElement),b(HTMLTableElement),window.HTMLSpanElement&&b(HTMLSpanElement),window.HTMLCanvasElement&&b(HTMLCanvasElement),window.SVGElement&&b(SVGElement),A(window),A(window.HTMLElement||window.Element),A(document),A(HTMLBodyElement),A(HTMLDivElement),A(HTMLImageElement),A(HTMLUListElement),A(HTMLAnchorElement),A(HTMLLIElement),A(HTMLTableElement),window.HTMLSpanElement&&A(HTMLSpanElement),window.HTMLCanvasElement&&A(HTMLCanvasElement),window.SVGElement&&A(SVGElement);var T=!1,E=-1;!(function(){window.MSPointerEvent?s((function(e){return v("MS",e)}),d):(s(g,h),void 0!==window.ontouchstart&&(window.addEventListener("touchstart",(function(e){for(var n=0;n<e.changedTouches.length;++n){var i=e.changedTouches[n];u[i.identifier]=i.target,_("pointerover",i,i.target,e,!0),o(i.target,null,(function(t){p("pointerenter",i,t,e,!1)})),_("pointerdown",i,i.target,e,!0)}t()})),window.addEventListener("touchend",(function(e){for(var n=0;n<e.changedTouches.length;++n){var i=e.changedTouches[n],o=u[i.identifier];_("pointerup",i,o,e,!0),_("pointerout",i,o,e,!0),r(o,null,(function(t){p("pointerleave",i,t,e,!1)}))}t()})),window.addEventListener("touchmove",(function(e){for(var n=0;n<e.changedTouches.length;++n){var i=e.changedTouches[n],s=document.elementFromPoint(i.clientX,i.clientY),a=u[i.identifier];a&&!0===c(a)&&e.preventDefault(),_("pointermove",i,a,e,!0),a!==s&&(a&&(_("pointerout",i,a,e,!0,s),a.contains(s)||r(a,s,(function(t){p("pointerleave",i,t,e,!1,s)}))),s&&(_("pointerover",i,s,e,!0,a),s.contains(a)||o(s,a,(function(t){p("pointerenter",i,t,e,!1,a)}))),u[i.identifier]=s)}t()})),window.addEventListener("touchcancel",(function(e){for(var t=0;t<e.changedTouches.length;++t){var n=e.changedTouches[t];_("pointercancel",n,u[n.identifier],e,!0)}}))))})(),void 0===navigator.pointerEnabled&&(navigator.pointerEnabled=!0,navigator.msPointerEnabled&&(navigator.maxTouchPoints=navigator.msMaxTouchPoints)),document.styleSheets&&document.addEventListener&&document.addEventListener("DOMContentLoaded",(function(){if(!e.doNotProcessCSS&&void 0===document.body.style.touchAction){var t=new RegExp(".+?{.*?}","m"),n=new RegExp(".+?{","m"),i=function(e){var i=t.exec(e);if(i){var o=i[0];e=e.replace(o,"").trim();var r=n.exec(o)[0].replace("{","").trim();if(-1!=o.replace(/\s/g,"").indexOf("touch-action:none"))for(var s=document.querySelectorAll(r),a=0;a<s.length;a++){var l=s[a];void 0!==l.style.msTouchAction?l.style.msTouchAction="none":l.handjs_forcePreventDefault=!0}return e}},o=function(e){if(window.setImmediate)e&&setImmediate(o,i(e));else for(;e;)e=i(e)};try{for(var r=0;r<document.styleSheets.length;r++){var s=document.styleSheets[r];if(void 0!=s.href){var a=new XMLHttpRequest;a.open("get",s.href),a.send();var l=a.responseText.replace(/(\n|\r)/g,"");o(l)}}}catch(e){}for(var u=document.getElementsByTagName("style"),r=0;r<u.length;r++){var c=u[r],d=c.innerHTML.replace(/(\n|\r)/g,"").trim();o(d)}}}),!1)}})(),e})),!("onwheel"in document.createElement("div"))&&"EventTarget"in window&&"addEventListener"in window&&(function(){function e(e,t){var n=Object.create(e,s);return n.deltaMode="MozMousePixelScroll"==e.type?0:1,n.deltaX=0,n.delatZ=0,"mousewheel"==o?(n.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(n.deltaX=-1/30*e.wheelDeltaX)):n.deltaY=e.detail,"function"==typeof t?t(n):t.handleEvent?t.handleEvent.call(t,n):void 0}function t(t,n){var o=function(t){return e(t,n)},s="cb"+ ++r;return(t[i]=t[i]||{})[s]=o,n[i]=s,o}function n(e,t){var n=t[i],o=e[i][n];return o&&(delete e[i][n],t=o),t}var i="__pf_wheel_cb",o=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",r=0,s={type:{value:"wheel",writable:!1},preventDefault:{value:function(){Object.getPrototypeOf(this).preventDefault()}}};!(function(e){var i=e.addEventListener,r=e.removeEventListener;e.addEventListener=function(e,n,r){return"wheel"==e&&(e=o,n=t(this,n)),i.call(this,e,n,r)},e.removeEventListener=function(e,t,i){return"wheel"==e&&(e=o,t=n(this,t)),r.call(this,e,t,i)}})(EventTarget.prototype)})(),define("module/core/js/ext/wheel-event-polyfill",(function(){})),define("module/core/js/ext/d3",["require"],(function(e){"use strict";var t;return void 0===window.CSSStyleDeclaration&&(window.CSSStyleDeclaration=(function(){function e(){}return e.prototype.setProperty=function(){},e})()),(function(){function e(e){for(var t=-1,n=e.length,i=[];++t<n;)i.push(e[t]);return i}function n(e){return Array.prototype.slice.call(e)}function i(){}function o(e){return e}function r(){return this}function s(){return!0}function a(e){return"function"==typeof e?e:function(){return e}}function l(e,t,n){return function(){var i=n.apply(t,arguments);return arguments.length?e:i}}function u(e){return null!=e&&!isNaN(e)}function c(e){return e.length}function d(e){return null==e}function h(e){return e.trim().replace(/\s+/g," ")}function p(e){for(var t=1;e*t%1;)t*=10;return t}function m(){}function f(e){function t(){for(var t,i=n,o=-1,r=i.length;++o<r;)(t=i[o].on)&&t.apply(this,arguments);return e}var n=[],o=new i;return t.on=function(t,i){var r,s=o.get(t);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,r=n.indexOf(s)).concat(n.slice(r+1)),o.remove(t)),i&&n.push(o.set(t,{on:i})),e)},t}function _(e,t){return t-(e?1+Math.floor(Math.log(e+Math.pow(10,1+Math.floor(Math.log(e)/Math.LN10)-t))/Math.LN10):1)}function g(e){return e+""}function v(e){for(var t=e.lastIndexOf("."),n=t>=0?e.substring(t):(t=e.length,""),i=[];t>0;)i.push(e.substring(t-=3,t+3));return i.reverse().join(",")+n}function y(e,t){var n=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function M(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function b(e){return function(t){return 1-e(1-t)}}function A(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function T(e){return e}function E(e){return function(t){return Math.pow(t,e)}}function w(e){return 1-Math.cos(e*Math.PI/2)}function O(e){return Math.pow(2,10*(e-1))}function I(e){return 1-Math.sqrt(1-e*e)}function S(e,t){var n;return arguments.length<2&&(t=.45),arguments.length<1?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(i){return 1+e*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Math.PI/t)}}function j(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function C(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function D(){t.event.stopPropagation(),t.event.preventDefault()}function R(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function L(e){for(var n=new m,i=0,o=arguments.length;++i<o;)n[arguments[i]]=f(n);return n.of=function(i,o){return function(r){try{var s=r.sourceEvent=t.event;r.target=e,t.event=r,n[r.type].apply(i,o)}finally{t.event=s}}},n}function N(e){var t=[e.a,e.b],n=[e.c,e.d],i=P(t),o=k(t,n),r=P(x(n,t,-o))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,o*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*ro,this.translate=[e.e,e.f],this.scale=[i,r],this.skew=r?Math.atan2(o,r)*ro:0}function k(e,t){return e[0]*t[0]+e[1]*t[1]}function P(e){var t=Math.sqrt(k(e,e));return t&&(e[0]/=t,e[1]/=t),t}function x(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function V(e){return"transform"==e?t.interpolateTransform:t.interpolate}function H(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function B(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function W(){}function F(e,t,n){return new U(e,t,n)}function U(e,t,n){this.r=e,this.g=t,this.b=n}function G(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Y(e,t,n){var i,o,r,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(o=i[2].split(","),i[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return t(Z(o[0]),Z(o[1]),Z(o[2]))}return(r=uo.get(e))?t(r.r,r.g,r.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(s=e.charAt(1),s+=s,a=e.charAt(2),a+=a,l=e.charAt(3),l+=l):7===e.length&&(s=e.substring(1,3),a=e.substring(3,5),l=e.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),l=parseInt(l,16)),t(s,a,l))}function z(e,t,n){var i,o,r=Math.min(e/=255,t/=255,n/=255),s=Math.max(e,t,n),a=s-r,l=(s+r)/2;return a?(o=l<.5?a/(s+r):a/(2-s-r),i=e==s?(t-n)/a+(t<n?6:0):t==s?(n-e)/a+2:(e-t)/a+4,i*=60):o=i=0,X(i,o,l)}function q(e,t,n){e=K(e),t=K(t),n=K(n);var i=ae((.4124564*e+.3575761*t+.1804375*n)/mo),o=ae((.2126729*e+.7151522*t+.072175*n)/fo);return ne(116*o-16,500*(i-o),200*(o-ae((.0193339*e+.119192*t+.9503041*n)/_o)))}function K(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Z(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function X(e,t,n){return new J(e,t,n)}function J(e,t,n){this.h=e,this.s=t,this.l=n}function Q(e,t,n){function i(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(s-r)*e/60:e<180?s:e<240?r+(s-r)*(240-e)/60:r}function o(e){return Math.round(255*i(e))}var r,s;return e%=360,e<0&&(e+=360),t=t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,s=n<=.5?n*(1+t):n+t-n*t,r=2*n-s,F(o(e+120),o(e),o(e-120))}function $(e,t,n){return new ee(e,t,n)}function ee(e,t,n){this.h=e,this.c=t,this.l=n}function te(e,t,n){return ne(n,Math.cos(e*=Math.PI/180)*t,Math.sin(e)*t)}function ne(e,t,n){return new ie(e,t,n)}function ie(e,t,n){this.l=e,this.a=t,this.b=n}function oe(e,t,n){var i=(e+16)/116,o=i+t/500,r=i-n/200;return o=se(o)*mo,i=se(i)*fo,r=se(r)*_o,F(le(3.2404542*o-1.5371385*i-.4985314*r),le(-.969266*o+1.8760108*i+.041556*r),le(.0556434*o-.2040259*i+1.0572252*r))}function re(e,t,n){return $(Math.atan2(n,t)/Math.PI*180,Math.sqrt(t*t+n*n),e)}function se(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ae(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function le(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ue(e){return Yi(e,To),e}function ce(e){return function(){return vo(e,this)}}function de(e){return function(){return yo(e,this)}}function he(e,n){function i(){this.removeAttribute(e)}function o(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,n)}function s(){this.setAttributeNS(e.space,e.local,n)}function a(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}function l(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}return e=t.ns.qualify(e),null==n?e.local?o:i:"function"==typeof n?e.local?l:a:e.local?s:r}function pe(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function me(e,t){function n(){for(var n=-1;++n<o;)e[n](this,t)}function i(){for(var n=-1,i=t.apply(this,arguments);++n<o;)e[n](this,i)}e=e.trim().split(/\s+/).map(fe);var o=e.length;return"function"==typeof t?i:n}function fe(e){var t=pe(e);return function(n,i){if(o=n.classList)return i?o.add(e):o.remove(e);var o=n.className,r=null!=o.baseVal,s=r?o.baseVal:o;i?(t.lastIndex=0,t.test(s)||(s=h(s+" "+e),r?o.baseVal=s:n.className=s)):s&&(s=h(s.replace(t," ")),r?o.baseVal=s:n.className=s)}}function _e(e,t,n){function i(){this.style.removeProperty(e)}function o(){this.style.setProperty(e,t,n)}function r(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}return null==t?i:"function"==typeof t?r:o}function ge(e,t){function n(){delete this[e]}function i(){this[e]=t}function o(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?o:i}function ve(e){return{__data__:e}}function ye(e){return function(){return Ao(this,e)}}function Me(e){return arguments.length||(e=t.ascending),function(t,n){return e(t&&t.__data__,n&&n.__data__)}}function be(e,n,i){function o(){var t=this[s];t&&(this.removeEventListener(e,t,t.$),delete this[s])}function r(){function r(e){var i=t.event;t.event=e,l[0]=a.__data__;try{n.apply(a,l)}finally{t.event=i}}var a=this,l=arguments;o.call(this),this.addEventListener(e,this[s]=r,r.$=i),r._=n}var s="__on"+e,a=e.indexOf(".");return a>0&&(e=e.substring(0,a)),n?r:o}function Ae(e,t){for(var n=0,i=e.length;n<i;n++)for(var o,r=e[n],s=0,a=r.length;s<a;s++)(o=r[s])&&t(o,s,n);return e}function Te(e){return Yi(e,wo),e}function Ee(e,n,o){Yi(e,Oo);var r=new i,s=t.dispatch("start","end"),a=Ro;return e.id=n,e.time=o,e.tween=function(t,n){return arguments.length<2?r.get(t):(null==n?r.remove(t):r.set(t,n),e)},e.ease=function(n){return arguments.length?(a="function"==typeof n?n:t.ease.apply(t,arguments),e):a},e.each=function(t,n){return arguments.length<2?we.call(e,t):(s.on(t,n),e)},t.timer((function(i){return Ae(e,(function(e,l,u){function c(i){return _.active>n?h():(_.active=n,r.forEach((function(t,n){(n=n.call(e,g,l))&&p.push(n)})),s.start.call(e,g,l),d(i)||t.timer(d,0,o),1)}function d(t){if(_.active!==n)return h();for(var i=(t-m)/f,o=a(i),r=p.length;r>0;)p[--r].call(e,o);return i>=1?(h(),So=n,s.end.call(e,g,l),So=0,1):void 0}function h(){return--_.count||delete e.__transition__,1}var p=[],m=e.delay,f=e.duration,_=(e=e.node).__transition__||(e.__transition__={active:0,count:0}),g=e.__data__;++_.count,m<=i?c(i):t.timer(c,m,o)}))}),0,o),e}function we(e){var t=So,n=Ro,i=Co,o=Do;return So=this.id,Ro=this.ease(),Ae(this,(function(t,n,i){Co=t.delay,Do=t.duration,e.call(t=t.node,t.__data__,n,i)})),So=t,Ro=n,Co=i,Do=o,this}function Oe(e,t,n){return""!=n&&ko}function Ie(e,n){return t.tween(e,V(n))}function Se(){for(var e,t=Date.now(),n=Vo;n;)e=t-n.then,e>=n.delay&&(n.flush=n.callback(e)),n=n.next;var i=je()-t;i>24?(isFinite(i)&&(clearTimeout(No),No=setTimeout(Se,i)),Lo=0):(Lo=1,Ho(Se))}function je(){for(var e=null,t=Vo,n=1/0;t;)t.flush?(delete xo[t.callback.id],t=e?e.next=t.next:Vo=t.next):(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}function Ce(e,n){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var o=i.createSVGPoint();if(Bo<0&&(window.scrollX||window.scrollY)){i=t.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var r=i[0][0].getScreenCTM();Bo=!(r.f||r.e),i.remove()}return Bo?(o.x=n.pageX,o.y=n.pageY):(o.x=n.clientX,o.y=n.clientY),o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function De(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Re(e){return e.rangeExtent?e.rangeExtent():De(e.range())}function Le(e,t){var n,i=0,o=e.length-1,r=e[i],s=e[o];return s<r&&(n=i,i=o,o=n,n=r,r=s,s=n),(t=t(s-r))&&(e[i]=t.floor(r),e[o]=t.ceil(s)),e}function Ne(){return Math}function ke(e,n,i,o){function r(){var r=Math.min(e.length,n.length)>2?Fe:We,u=o?B:H;return a=r(e,n,u,i),l=r(n,e,u,t.interpolate),s}function s(e){return a(e)}var a,l;return s.invert=function(e){return l(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},s.range=function(e){return arguments.length?(n=e,r()):n},s.rangeRound=function(e){return s.range(e).interpolate(t.interpolateRound)},s.clamp=function(e){return arguments.length?(o=e,r()):o},s.interpolate=function(e){return arguments.length?(i=e,r()):i},s.ticks=function(t){return He(e,t)},s.tickFormat=function(t){return Be(e,t)},s.nice=function(){return Le(e,xe),r()},s.copy=function(){return ke(e,n,i,o)},r()}function Pe(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function xe(e){return(e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1))&&{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function Ve(e,t){var n=De(e),i=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),r=t/i*o;return r<=.15?o*=10:r<=.35?o*=5:r<=.75&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function He(e,n){return t.range.apply(t,Ve(e,n))}function Be(e,n){return t.format(",."+Math.max(0,-Math.floor(Math.log(Ve(e,n)[2])/Math.LN10+.01))+"f")}function We(e,t,n,i){var o=n(e[0],e[1]),r=i(t[0],t[1]);return function(e){return r(o(e))}}function Fe(e,n,i,o){var r=[],s=[],a=0,l=Math.min(e.length,n.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++a<=l;)r.push(i(e[a-1],e[a])),s.push(o(n[a-1],n[a]));return function(n){var i=t.bisect(e,n,1,l)-1;return s[i](r[i](n))}}function Ue(e,t){function n(n){return e(t(n))}var i=t.pow;return n.invert=function(t){return i(e.invert(t))},n.domain=function(o){return arguments.length?(t=o[0]<0?Ye:Ge,i=t.pow,e.domain(o.map(t)),n):e.domain().map(i)},n.nice=function(){return e.domain(Le(e.domain(),Ne)),n},n.ticks=function(){var n=De(e.domain()),o=[];if(n.every(isFinite)){var r=Math.floor(n[0]),s=Math.ceil(n[1]),a=i(n[0]),l=i(n[1]);if(t===Ye)for(o.push(i(r));r++<s;)for(var u=9;u>0;u--)o.push(i(r)*u);else{for(;r<s;r++)for(var u=1;u<10;u++)o.push(i(r)*u);o.push(i(r))}for(r=0;o[r]<a;r++);for(s=o.length;o[s-1]>l;s--);o=o.slice(r,s)}return o},n.tickFormat=function(e,o){if(arguments.length<2&&(o=Wo),arguments.length<1)return o;var r,s=Math.max(.1,e/n.ticks().length),a=t===Ye?(r=-1e-12,Math.floor):(r=1e-12,Math.ceil);return function(e){return e/i(a(t(e)+r))<=s?o(e):""}},n.copy=function(){return Ue(e.copy(),t)},Pe(n,e)}function Ge(e){return Math.log(e<0?0:e)/Math.LN10}function Ye(e){return-Math.log(e>0?0:-e)/Math.LN10}function ze(e,t){function n(t){return e(i(t))}var i=qe(t),o=qe(1/t);return n.invert=function(t){return o(e.invert(t))},n.domain=function(t){return arguments.length?(e.domain(t.map(i)),n):e.domain().map(o)},n.ticks=function(e){return He(n.domain(),e)},n.tickFormat=function(e){return Be(n.domain(),e)},n.nice=function(){return n.domain(Le(n.domain(),xe))},n.exponent=function(e){if(!arguments.length)return t;var r=n.domain();return i=qe(t=e),o=qe(1/t),n.domain(r)},n.copy=function(){return ze(e.copy(),t)},Pe(n,e)}function qe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ke(e,n){function o(t){return a[((s.get(t)||s.set(t,e.push(t)))-1)%a.length]}function r(n,i){return t.range(e.length).map((function(e){return n+i*e}))}var s,a,l;return o.domain=function(t){if(!arguments.length)return e;e=[],s=new i;for(var r,a=-1,l=t.length;++a<l;)s.has(r=t[a])||s.set(r,e.push(r));return o[n.t].apply(o,n.a)},o.range=function(e){return arguments.length?(a=e,l=0,n={t:"range",a:arguments},o):a},o.rangePoints=function(t,i){arguments.length<2&&(i=0);var s=t[0],u=t[1],c=(u-s)/(Math.max(1,e.length-1)+i);return a=r(e.length<2?(s+u)/2:s+c*i/2,c),l=0,n={t:"rangePoints",a:arguments},o},o.rangeBands=function(t,i,s){arguments.length<2&&(i=0),arguments.length<3&&(s=i);var u=t[1]<t[0],c=t[u-0],d=t[1-u],h=(d-c)/(e.length-i+2*s);return a=r(c+h*s,h),u&&a.reverse(),l=h*(1-i),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(t,i,s){arguments.length<2&&(i=0),arguments.length<3&&(s=i);var u=t[1]<t[0],c=t[u-0],d=t[1-u],h=Math.floor((d-c)/(e.length-i+2*s)),p=d-c-(e.length-i)*h;return a=r(c+Math.round(p/2),h),u&&a.reverse(),l=Math.round(h*(1-i)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return l},o.rangeExtent=function(){return De(n.a[0])},o.copy=function(){return Ke(e,n)},o.domain(e)}function Ze(e,n){function i(){var i=0,s=(e.length,n.length);for(r=[];++i<s;)r[i-1]=t.quantile(e,i/s);return o}function o(e){return isNaN(e=+e)?NaN:n[t.bisect(r,e)]}var r;return o.domain=function(n){return arguments.length?(e=n.filter((function(e){return!isNaN(e)})).sort(t.ascending),i()):e},o.range=function(e){return arguments.length?(n=e,i()):n},o.quantiles=function(){return r},o.copy=function(){return Ze(e,n)},i()}function Xe(e,t,n){function i(t){return n[Math.max(0,Math.min(s,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),s=n.length-1,i}var r,s;return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},i.range=function(e){return arguments.length?(n=e,o()):n},i.copy=function(){return Xe(e,t,n)},o()}function Je(e,n){function i(i){return n[t.bisect(e,i)]}return i.domain=function(t){return arguments.length?(e=t,i):e},i.range=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return Je(e,n)},i}function Qe(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return He(e,t)},t.tickFormat=function(t){return Be(e,t)},t.copy=function(){return Qe(e)},t}function $e(e){return e.innerRadius}function et(e){return e.outerRadius}function tt(e){return e.startAngle}function nt(e){return e.endAngle}function it(e){function t(t){function s(){c.push("M",r(e(d),u))}for(var l,c=[],d=[],h=-1,p=t.length,m=a(n),f=a(i);++h<p;)o.call(this,l=t[h],h)?d.push([+m.call(this,l,h),+f.call(this,l,h)]):d.length&&(s(),d=[]);return d.length&&s(),c.length?c.join(""):null}var n=ot,i=rt,o=s,r=st,l=r.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?r=e:(r=Ko.get(e)||st).key,t):l},t.tension=function(e){return arguments.length?(u=e,t):u},t}function ot(e){return e[0]}function rt(e){return e[1]}function st(e){return e.join("L")}function at(e){return st(e)+"Z"}function lt(e){for(var t=0,n=e.length,i=e[0],o=[i[0],",",i[1]];++t<n;)o.push("V",(i=e[t])[1],"H",i[0]);return o.join("")}function ut(e){for(var t=0,n=e.length,i=e[0],o=[i[0],",",i[1]];++t<n;)o.push("H",(i=e[t])[0],"V",i[1]);return o.join("")}function ct(e,t){return e.length<4?st(e):e[1]+pt(e.slice(1,e.length-1),mt(e,t))}function dt(e,t){return e.length<3?st(e):e[0]+pt((e.push(e[0]),e),mt([e[e.length-2]].concat(e,[e[1]]),t))}function ht(e,t,n){return e.length<3?st(e):e[0]+pt(e,mt(e,t))}function pt(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return st(e);var n=e.length!=t.length,i="",o=e[0],r=e[1],s=t[0],a=s,l=1;if(n&&(i+="Q"+(r[0]-2*s[0]/3)+","+(r[1]-2*s[1]/3)+","+r[0]+","+r[1],o=e[1],l=2),t.length>1){a=t[1],r=e[l],l++,i+="C"+(o[0]+s[0])+","+(o[1]+s[1])+","+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1];for(var u=2;u<t.length;u++,l++)r=e[l],a=t[u],i+="S"+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1]}if(n){var c=e[l];i+="Q"+(r[0]+2*a[0]/3)+","+(r[1]+2*a[1]/3)+","+c[0]+","+c[1]}return i}function mt(e,t){for(var n,i=[],o=(1-t)/2,r=e[0],s=e[1],a=1,l=e.length;++a<l;)n=r,r=s,s=e[a],i.push([o*(s[0]-n[0]),o*(s[1]-n[1])]);return i}function ft(e){if(e.length<3)return st(e);var t=1,n=e.length,i=e[0],o=i[0],r=i[1],s=[o,o,o,(i=e[1])[0]],a=[r,r,r,i[1]],l=[o,",",r];for(Mt(l,s,a);++t<n;)i=e[t],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Mt(l,s,a);for(t=-1;++t<2;)s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Mt(l,s,a);return l.join("")}function _t(e){if(e.length<4)return st(e);for(var t,n=[],i=-1,o=e.length,r=[0],s=[0];++i<3;)t=e[i],r.push(t[0]),s.push(t[1]);for(n.push(yt(Jo,r)+","+yt(Jo,s)),--i;++i<o;)t=e[i],r.shift(),r.push(t[0]),s.shift(),s.push(t[1]),Mt(n,r,s);return n.join("")}function gt(e){for(var t,n,i=-1,o=e.length,r=o+4,s=[],a=[];++i<4;)n=e[i%o],s.push(n[0]),a.push(n[1]);for(t=[yt(Jo,s),",",yt(Jo,a)],--i;++i<r;)n=e[i%o],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Mt(t,s,a);return t.join("")}function vt(e,t){var n=e.length-1;if(n)for(var i,o,r=e[0][0],s=e[0][1],a=e[n][0]-r,l=e[n][1]-s,u=-1;++u<=n;)i=e[u],o=u/n,i[0]=t*i[0]+(1-t)*(r+o*a),i[1]=t*i[1]+(1-t)*(s+o*l);return ft(e)}function yt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Mt(e,t,n){e.push("C",yt(Zo,t),",",yt(Zo,n),",",yt(Xo,t),",",yt(Xo,n),",",yt(Jo,t),",",yt(Jo,n))}function bt(e,t){return(t[1]-e[1])/(t[0]-e[0])}function At(e){for(var t=0,n=e.length-1,i=[],o=e[0],r=e[1],s=i[0]=bt(o,r);++t<n;)i[t]=(s+(s=bt(o=r,r=e[t+1])))/2;return i[t]=s,i}function Tt(e){for(var t,n,i,o,r=[],s=At(e),a=-1,l=e.length-1;++a<l;)t=bt(e[a],e[a+1]),Math.abs(t)<1e-6?s[a]=s[a+1]=0:(n=s[a]/t,i=s[a+1]/t,(o=n*n+i*i)>9&&(o=3*t/Math.sqrt(o),s[a]=o*n,s[a+1]=o*i));for(a=-1;++a<=l;)o=(e[Math.min(l,a+1)][0]-e[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),r.push([o||0,s[a]*o||0]);return r}function Et(e){return e.length<3?st(e):e[0]+pt(e,Tt(e))}function wt(e){for(var t,n,i,o=-1,r=e.length;++o<r;)t=e[o],n=t[0],i=t[1]+zo,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function Ot(e){function t(t){function s(){_.push("M",u(e(v),p),h,d(e(g.reverse()),p),"Z")}for(var c,m,f,_=[],g=[],v=[],y=-1,M=t.length,b=a(n),A=a(o),T=n===i?function(){return m}:a(i),E=o===r?function(){return f}:a(r);++y<M;)l.call(this,c=t[y],y)?(g.push([m=+b.call(this,c,y),f=+A.call(this,c,y)]),v.push([+T.call(this,c,y),+E.call(this,c,y)])):g.length&&(s(),g=[],v=[]);return g.length&&s(),_.length?_.join(""):null}var n=ot,i=ot,o=0,r=rt,l=s,u=st,c=u.key,d=u,h="L",p=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(o=r=e,t):r},t.y0=function(e){return arguments.length?(o=e,t):o},t.y1=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(l=e,t):l},t.interpolate=function(e){return arguments.length?(c="function"==typeof e?u=e:(u=Ko.get(e)||st).key,d=u.reverse||u,h=u.closed?"M":"L",t):c},t.tension=function(e){return arguments.length?(p=e,t):p},t}function It(e){return e.source}function St(e){return e.target}function jt(e){return e.radius}function Ct(e){return[e.x,e.y]}function Dt(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]+zo;return[n*Math.cos(i),n*Math.sin(i)]}}function Rt(){return 64}function Lt(){
return"circle"}function Nt(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function kt(e,t){e.attr("transform",(function(e){return"translate("+t(e)+",0)"}))}function Pt(e,t){e.attr("transform",(function(e){return"translate(0,"+t(e)+")"}))}function xt(e,t,n){if(i=[],n&&t.length>1){for(var i,o,r,s=De(e.domain()),a=-1,l=t.length,u=(t[1]-t[0])/++n;++a<l;)for(o=n;--o>0;)(r=+t[a]-o*u)>=s[0]&&i.push(r);for(--a,o=0;++o<n&&(r=+t[a]+o*u)<s[1];)i.push(r)}return i}function Vt(){ir||(ir=t.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e,n=t.event;try{ir.scrollTop=1e3,ir.dispatchEvent(n),e=1e3-ir.scrollTop}catch(t){e=n.wheelDelta||5*-n.detail}return e}function Ht(e){for(var t=e.source,n=e.target,i=Wt(t,n),o=[t];t!==i;)t=t.parent,o.push(t);for(var r=o.length;n!==i;)o.splice(r,0,n),n=n.parent;return o}function Bt(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Wt(e,t){if(e===t)return e;for(var n=Bt(e),i=Bt(t),o=n.pop(),r=i.pop(),s=null;o===r;)s=o,o=n.pop(),r=i.pop();return s}function Ft(e){e.fixed|=2}function Ut(e){e.fixed&=1}function Gt(e){e.fixed|=4}function Yt(e){e.fixed&=3}function zt(e,t,n){var i=0,o=0;if(e.charge=0,!e.leaf)for(var r,s=e.nodes,a=s.length,l=-1;++l<a;)null!=(r=s[l])&&(zt(r,t,n),e.charge+=r.charge,i+=r.charge*r.cx,o+=r.charge*r.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,i+=u*e.point.x,o+=u*e.point.y}e.cx=i/e.charge,e.cy=o/e.charge}function qt(e){return 20}function Kt(e){return 1}function Zt(e){return e.x}function Xt(e){return e.y}function Jt(e,t,n){e.y0=t,e.y=n}function Qt(e){return t.range(e.length)}function $t(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function en(e){for(var t,n=1,i=0,o=e[0][1],r=e.length;n<r;++n)(t=e[n][1])>o&&(i=n,o=t);return i}function tn(e){return e.reduce(nn,0)}function nn(e,t){return e+t[1]}function on(e,t){return rn(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function rn(e,t){for(var n=-1,i=+e[0],o=(e[1]-i)/t,r=[];++n<=t;)r[n]=o*n+i;return r}function sn(e){return[t.min(e),t.max(e)]}function an(e,n){return t.rebind(e,n,"sort","children","value"),e.links=dn,e.nodes=function(t){return lr=!0,(e.nodes=e)(t)},e}function ln(e){return e.children}function un(e){return e.value}function cn(e,t){return t.value-e.value}function dn(e){return t.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}function hn(e,t){return e.value-t.value}function pn(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function mn(e,t){e._pack_next=t,t._pack_prev=e}function fn(e,t){var n=t.x-e.x,i=t.y-e.y,o=e.r+t.r;return o*o-n*n-i*i>.001}function _n(e){function t(e){c=Math.min(e.x-e.r,c),d=Math.max(e.x+e.r,d),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(u=n.length)){var n,i,o,r,s,a,l,u,c=1/0,d=-1/0,h=1/0,p=-1/0;if(n.forEach(gn),i=n[0],i.x=-i.r,i.y=0,t(i),u>1&&(o=n[1],o.x=o.r,o.y=0,t(o),u>2))for(r=n[2],Mn(i,o,r),t(r),pn(i,r),i._pack_prev=r,pn(r,o),o=i._pack_next,s=3;s<u;s++){Mn(i,o,r=n[s]);var m=0,f=1,_=1;for(a=o._pack_next;a!==o;a=a._pack_next,f++)if(fn(a,r)){m=1;break}if(1==m)for(l=i._pack_prev;l!==a._pack_prev&&!fn(l,r);l=l._pack_prev,_++);m?(f<_||f==_&&o.r<i.r?mn(i,o=a):mn(i=l,o),s--):(pn(i,r),o=r,t(r))}var g=(c+d)/2,v=(h+p)/2,y=0;for(s=0;s<u;s++)r=n[s],r.x-=g,r.y-=v,y=Math.max(y,r.r+Math.sqrt(r.x*r.x+r.y*r.y));e.r=y,n.forEach(vn)}}function gn(e){e._pack_next=e._pack_prev=e}function vn(e){delete e._pack_next,delete e._pack_prev}function yn(e,t,n,i){var o=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,o)for(var r=-1,s=o.length;++r<s;)yn(o[r],t,n,i)}function Mn(e,t,n){var i=e.r+n.r,o=t.x-e.x,r=t.y-e.y;if(i&&(o||r)){var s=t.r+n.r,a=o*o+r*r;s*=s,i*=i;var l=.5+(i-s)/(2*a),u=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=e.x+l*o+u*r,n.y=e.y+l*r-u*o}else n.x=e.x+i,n.y=e.y}function bn(e){return 1+t.max(e,(function(e){return e.y}))}function An(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}function Tn(e){var t=e.children;return t&&t.length?Tn(t[0]):e}function En(e){var t,n=e.children;return n&&(t=n.length)?En(n[t-1]):e}function wn(e,t){return e.parent==t.parent?1:2}function On(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function In(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function Sn(e,t){var n=e.children;if(n&&(o=n.length))for(var i,o,r=-1;++r<o;)t(i=Sn(n[r],t),e)>0&&(e=i);return e}function jn(e,t){return e.x-t.x}function Cn(e,t){return t.x-e.x}function Dn(e,t){return e.depth-t.depth}function Rn(e,t){function n(e,i){var o=e.children;if(o&&(s=o.length))for(var r,s,a=null,l=-1;++l<s;)r=o[l],n(r,a),a=r;t(e,i)}n(e,null)}function Ln(e){for(var t,n=0,i=0,o=e.children,r=o.length;--r>=0;)t=o[r]._tree,t.prelim+=n,t.mod+=n,n+=t.shift+(i+=t.change)}function Nn(e,t,n){e=e._tree,t=t._tree;var i=n/(t.number-e.number);e.change+=i,t.change-=i,t.shift+=n,t.prelim+=n,t.mod+=n}function kn(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function Pn(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function xn(e,t){var n=e.x+t[3],i=e.y+t[0],o=e.dx-t[1]-t[3],r=e.dy-t[0]-t[2];return o<0&&(n+=o/2,o=0),r<0&&(i+=r/2,r=0),{x:n,y:i,dx:o,dy:r}}function Vn(e,n){function i(e,o){t.text(e,n,(function(e){o(e&&i.parse(e))}))}function o(t){return t.map(r).join(e)}function r(e){return a.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp("\r\n|["+e+"\r\n]","g"),a=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return i.parse=function(e){var t;return i.parseRows(e,(function(e,n){if(n){for(var i={},o=-1,r=t.length;++o<r;)i[t[o]]=e[o];return i}return t=e,null}))},i.parseRows=function(e,t){function n(){if(s.lastIndex>=e.length)return a;if(o)return o=!1,r;var t=s.lastIndex;if(34===e.charCodeAt(t)){for(var n=t;n++<e.length;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;n++}s.lastIndex=n+2;var i=e.charCodeAt(n+1);return 13===i?(o=!0,10===e.charCodeAt(n+2)&&s.lastIndex++):10===i&&(o=!0),e.substring(t+1,n).replace(/""/g,'"')}var u=s.exec(e);return u?(o=u[0].charCodeAt(0)!==l,e.substring(t,u.index)):(s.lastIndex=e.length,e.substring(t))}var i,o,r={},a={},u=[],c=0;for(s.lastIndex=0;(i=n())!==a;){for(var d=[];i!==r&&i!==a;)d.push(i),i=n();t&&!(d=t(d,c++))||u.push(d)}return u},i.format=function(e){return e.map(o).join("\n")},i}function Hn(e,t){return function(n){return n&&e.hasOwnProperty(n.type)?e[n.type](n):t}}function Bn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Wn(e,t){cr.hasOwnProperty(e.type)&&cr[e.type](e,t)}function Fn(e,t){Wn(e.geometry,t)}function Un(e,t){for(var n=e.features,i=0,o=n.length;i<o;i++)Wn(n[i].geometry,t)}function Gn(e,t){for(var n=e.geometries,i=0,o=n.length;i<o;i++)Wn(n[i],t)}function Yn(e,t){for(var n=e.coordinates,i=0,o=n.length;i<o;i++)t.apply(null,n[i])}function zn(e,t){for(var n=e.coordinates,i=0,o=n.length;i<o;i++)for(var r=n[i],s=0,a=r.length;s<a;s++)t.apply(null,r[s])}function qn(e,t){for(var n=e.coordinates,i=0,o=n.length;i<o;i++)for(var r=n[i][0],s=0,a=r.length;s<a;s++)t.apply(null,r[s])}function Kn(e,t){t.apply(null,e.coordinates)}function Zn(e,t){for(var n=e.coordinates[0],i=0,o=n.length;i<o;i++)t.apply(null,n[i])}function Xn(e){return e.source}function Jn(e){return e.target}function Qn(){function e(e){var t=Math.sin(e*=p)*m,n=Math.sin(p-e)*m,i=n*r+t*d,a=n*s+t*h,l=n*o+t*c;return[Math.atan2(a,i)/ur,Math.atan2(l,Math.sqrt(i*i+a*a))/ur]}var t,n,i,o,r,s,a,l,u,c,d,h,p,m;return e.distance=function(){return null==p&&(m=1/Math.sin(p=Math.acos(Math.max(-1,Math.min(1,o*c+i*u*Math.cos(a-t)))))),p},e.source=function(a){var l=Math.cos(t=a[0]*ur),u=Math.sin(t);return i=Math.cos(n=a[1]*ur),o=Math.sin(n),r=i*l,s=i*u,p=null,e},e.target=function(t){var n=Math.cos(a=t[0]*ur),i=Math.sin(a);return u=Math.cos(l=t[1]*ur),c=Math.sin(l),d=u*n,h=u*i,p=null,e},e}function $n(e,t){var n=Qn().source(e).target(t);return n.distance(),n}function ei(e){for(var t=0,n=0;;){if(e(t,n))return[t,n];0===t?(t=n+1,n=0):(t-=1,n+=1)}}function ti(e,t,n,i){var o,r,s,a,l,u;return o=i[e],r=o[0],s=o[1],o=i[t],a=o[0],l=o[1],o=i[n],u=o[0],(o[1]-s)*(a-r)-(l-s)*(u-r)>0}function ni(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function ii(e,t,n,i){var o=e[0],r=t[0],s=n[0],a=i[0],l=e[1],u=t[1],c=n[1],d=i[1],h=o-s,p=r-o,m=a-s,f=l-c,_=u-l,g=d-c,v=(m*f-g*h)/(g*p-m*_);return[o+v*p,l+v*_]}function oi(e,t){var n={list:e.map((function(e,t){return{index:t,x:e[0],y:e[1]}})).sort((function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0})),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=i.leftEnd;do{t=t.r}while(t!=i.rightEnd&&o.rightOf(t,e));return t=t.l},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[pr[e.side]]}},o={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},i=t.x-e.x,o=t.y-e.y,r=i>0?i:-i,s=o>0?o:-o;return n.c=e.x*i+e.y*o+.5*(i*i+o*o),r>s?(n.a=1,n.b=o/i,n.c/=i):(n.b=1,n.a=i/o,n.c/=o),n},intersect:function(e,t){var n=e.edge,i=t.edge;if(!n||!i||n.region.r==i.region.r)return null;var o=n.a*i.b-n.b*i.a;if(Math.abs(o)<1e-10)return null;var r,s,a=(n.c*i.b-i.c*n.b)/o,l=(i.c*n.a-n.c*i.a)/o,u=n.region.r,c=i.region.r;u.y<c.y||u.y==c.y&&u.x<c.x?(r=e,s=n):(r=t,s=i);var d=a>=s.region.r.x;return d&&"l"===r.side||!d&&"r"===r.side?null:{x:a,y:l}},rightOf:function(e,t){var n=e.edge,i=n.region.r,o=t.x>i.x;if(o&&"l"===e.side)return 1;if(!o&&"r"===e.side)return 0;if(1===n.a){var r=t.y-i.y,s=t.x-i.x,a=0,l=0;if(!o&&n.b<0||o&&n.b>=0?l=a=r>=n.b*s:(l=t.x+t.y*n.b>n.c,n.b<0&&(l=!l),l||(a=1)),!a){var u=i.x-n.region.l.x;l=n.b*(s*s-r*r)<u*r*(1+2*s/u+n.b*n.b),n.b<0&&(l=!l)}}else{var c=n.c-n.a*t.x,d=t.y-c,h=t.x-i.x,p=c-i.y;l=d*d>h*h+p*p}return"l"===e.side?l:!l},endPoint:function(e,n,i){e.ep[n]=i,e.ep[pr[n]]&&t(e)},distance:function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}},r={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var i=0,o=r.list,s=o.length;i<s;i++){var a=o[i];if(!(e.ystar>a.ystar||e.ystar==a.ystar&&t.x>a.vertex.x))break}o.splice(i,0,e)},del:function(e){for(var t=0,n=r.list,i=n.length;t<i&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return 0===r.list.length},nextEvent:function(e){for(var t=0,n=r.list,i=n.length;t<i;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=r.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return r.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var s,a,l,u,c,d,h,p,m,f,_,g,v,y=n.list.shift();;)if(r.empty()||(s=r.min()),y&&(r.empty()||y.y<s.y||y.y==s.y&&y.x<s.x))a=i.leftBound(y),l=i.right(a),h=i.rightRegion(a),g=o.bisect(h,y),d=i.createHalfEdge(g,"l"),i.insert(a,d),f=o.intersect(a,d),f&&(r.del(a),r.insert(a,f,o.distance(f,y))),a=d,d=i.createHalfEdge(g,"r"),i.insert(a,d),f=o.intersect(d,l),f&&r.insert(d,f,o.distance(f,y)),y=n.list.shift();else{if(r.empty())break;a=r.extractMin(),u=i.left(a),l=i.right(a),c=i.right(l),h=i.leftRegion(a),p=i.rightRegion(l),_=a.vertex,o.endPoint(a.edge,a.side,_),o.endPoint(l.edge,l.side,_),i.del(a),r.del(l),i.del(l),v="l",h.y>p.y&&(m=h,h=p,p=m,v="r"),g=o.bisect(h,p),d=i.createHalfEdge(g,v),i.insert(u,d),o.endPoint(g,pr[v],_),f=o.intersect(u,d),f&&(r.del(u),r.insert(u,f,o.distance(f,h))),(f=o.intersect(d,c))&&r.insert(d,f,o.distance(f,h))}for(a=i.right(i.leftEnd);a!=i.rightEnd;a=i.right(a))t(a.edge)}function ri(){return{leaf:!0,nodes:[],point:null}}function si(e,t,n,i,o,r){if(!e(t,n,i,o,r)){var s=.5*(n+o),a=.5*(i+r),l=t.nodes;l[0]&&si(e,l[0],n,i,s,a),l[1]&&si(e,l[1],s,i,o,a),l[2]&&si(e,l[2],n,a,s,r),l[3]&&si(e,l[3],s,a,o,r)}}function ai(e){return{x:e[0],y:e[1]}}function li(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ui(e){return e.substring(0,3)}function ci(e,t,n,i){for(var o,r,s=0,a=t.length,l=n.length;s<a;){if(i>=l)return-1;if(37==(o=t.charCodeAt(s++))){if(!(r=Rr[t.charAt(s++)])||(i=r(e,n,i))<0)return-1}else if(o!=n.charCodeAt(i++))return-1}return i}function di(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function hi(e){for(var t=new i,n=-1,o=e.length;++n<o;)t.set(e[n].toLowerCase(),n);return t}function pi(e,t,n){Or.lastIndex=0;var i=Or.exec(t.substring(n));return i?n+=i[0].length:-1}function mi(e,t,n){wr.lastIndex=0;var i=wr.exec(t.substring(n));return i?n+=i[0].length:-1}function fi(e,t,n){jr.lastIndex=0;var i=jr.exec(t.substring(n));return i?(e.m=Cr.get(i[0].toLowerCase()),n+=i[0].length):-1}function _i(e,t,n){Ir.lastIndex=0;var i=Ir.exec(t.substring(n));return i?(e.m=Sr.get(i[0].toLowerCase()),n+=i[0].length):-1}function gi(e,t,n){return ci(e,Dr.c.toString(),t,n)}function vi(e,t,n){return ci(e,Dr.x.toString(),t,n)}function yi(e,t,n){return ci(e,Dr.X.toString(),t,n)}function Mi(e,t,n){Lr.lastIndex=0;var i=Lr.exec(t.substring(n,n+4));return i?(e.y=+i[0],n+=i[0].length):-1}function bi(e,t,n){Lr.lastIndex=0;var i=Lr.exec(t.substring(n,n+2));return i?(e.y=Ai(+i[0]),n+=i[0].length):-1}function Ai(e){return e+(e>68?1900:2e3)}function Ti(e,t,n){Lr.lastIndex=0;var i=Lr.exec(t.substring(n,n+2));return i?(e.m=i[0]-1,n+=i[0].length):-1}function Ei(e,t,n){Lr.lastIndex=0;var i=Lr.exec(t.substring(n,n+2));return i?(e.d=+i[0],n+=i[0].length):-1}function wi(e,t,n){Lr.lastIndex=0;var i=Lr.exec(t.substring(n,n+2));return i?(e.H=+i[0],n+=i[0].length):-1}function Oi(e,t,n){Lr.lastIndex=0;var i=Lr.exec(t.substring(n,n+2));return i?(e.M=+i[0],n+=i[0].length):-1}function Ii(e,t,n){Lr.lastIndex=0;var i=Lr.exec(t.substring(n,n+2));return i?(e.S=+i[0],n+=i[0].length):-1}function Si(e,t,n){Lr.lastIndex=0;var i=Lr.exec(t.substring(n,n+3));return i?(e.L=+i[0],n+=i[0].length):-1}function ji(e,t,n){var i=Nr.get(t.substring(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)}function Ci(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=~~(Math.abs(t)/60),o=Math.abs(t)%60;return n+br(i)+br(o)}function Di(e){return e.toISOString()}function Ri(e,t,n){function i(t){var n=e(t),i=r(n,1);return t-n<i-t?n:i}function o(n){return t(n=e(new mr(n-1)),1),n}function r(e,n){return t(e=new mr(+e),n),e}function s(e,i,r){var s=o(e),a=[];if(r>1)for(;s<i;)n(s)%r||a.push(new Date(+s)),t(s,1);else for(;s<i;)a.push(new Date(+s)),t(s,1);return a}function a(e,t,n){try{mr=li;var i=new li;return i._=e,s(i,t,n)}finally{mr=Date}}e.floor=e,e.round=i,e.ceil=o,e.offset=r,e.range=s;var l=e.utc=Li(e);return l.floor=l,l.round=Li(i),l.ceil=Li(o),l.offset=Li(r),l.range=a,e}function Li(e){return function(t,n){try{mr=li;var i=new li;return i._=t,e(i,n)._}finally{mr=Date}}}function Ni(e,n,i){function o(t){return e(t)}return o.invert=function(t){return Pi(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain().map(Pi)},o.nice=function(e){return o.domain(Le(o.domain(),(function(){return e})))},o.ticks=function(i,r){var s=ki(o.domain());if("function"!=typeof i){var a=s[1]-s[0],l=a/i,u=t.bisect(Pr,l);if(u==Pr.length)return n.year(s,i);if(!u)return e.ticks(i).map(Pi);Math.log(l/Pr[u-1])<Math.log(Pr[u]/l)&&--u,i=n[u],r=i[1],i=i[0].range}return i(s[0],new Date(+s[1]+1),r)},o.tickFormat=function(){return i},o.copy=function(){return Ni(e.copy(),n,i)},t.rebind(o,e,"range","rangeRound","interpolate","clamp")}function ki(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Pi(e){return new Date(e)}function xi(e){return function(t){for(var n=e.length-1,i=e[n];!i[1](t);)i=e[--n];return i[0](t)}}function Vi(e){var t=new Date(e,0,1);return t.setFullYear(e),t}function Hi(e){var t=e.getFullYear(),n=Vi(t);return t+(e-n)/(Vi(t+1)-n)}function Bi(e){var t=new Date(Date.UTC(e,0,1));return t.setUTCFullYear(e),t}function Wi(e){var t=e.getUTCFullYear(),n=Bi(t);return t+(e-n)/(Bi(t+1)-n)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(e){var Fi=CSSStyleDeclaration.prototype,Ui=Fi.setProperty;Fi.setProperty=function(e,t,n){Ui.call(this,e,t+"",n)}}t={version:"2.10.3"};var Gi=n;try{Gi(document.documentElement.childNodes)[0].nodeType}catch(t){Gi=e}var Yi=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};t.map=function(e){var t=new i;for(var n in e)t.set(n,e[n]);return t},(function(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(n){e.prototype=t}})(i,{has:function(e){return zi+e in this},get:function(e){return this[zi+e]},set:function(e,t){return this[zi+e]=t},remove:function(e){return(e=zi+e)in this&&delete this[e]},keys:function(){var e=[];return this.forEach((function(t){e.push(t)})),e},values:function(){var e=[];return this.forEach((function(t,n){e.push(n)})),e},entries:function(){var e=[];return this.forEach((function(t,n){e.push({key:t,value:n})})),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===qi&&e.call(this,t.substring(1),this[t])}});var zi="\0",qi=zi.charCodeAt(0);t.functor=a,t.rebind=function(e,t){for(var n,i=1,o=arguments.length;++i<o;)e[n=arguments[i]]=l(e,t,t[n]);return e},t.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},t.mean=function(e,t){var n,i=e.length,o=0,r=-1,s=0;if(1===arguments.length)for(;++r<i;)u(n=e[r])&&(o+=(n-o)/++s);else for(;++r<i;)u(n=t.call(e,e[r],r))&&(o+=(n-o)/++s);return s?o:void 0},t.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(u),e.length?t.quantile(e.sort(t.ascending),.5):void 0},t.min=function(e,t){var n,i,o=-1,r=e.length;if(1===arguments.length){for(;++o<r&&(null==(n=e[o])||n!=n);)n=void 0;for(;++o<r;)null!=(i=e[o])&&n>i&&(n=i)}else{for(;++o<r&&(null==(n=t.call(e,e[o],o))||n!=n);)n=void 0;for(;++o<r;)null!=(i=t.call(e,e[o],o))&&n>i&&(n=i)}return n},t.max=function(e,t){var n,i,o=-1,r=e.length;if(1===arguments.length){for(;++o<r&&(null==(n=e[o])||n!=n);)n=void 0;for(;++o<r;)null!=(i=e[o])&&i>n&&(n=i)}else{for(;++o<r&&(null==(n=t.call(e,e[o],o))||n!=n);)n=void 0;for(;++o<r;)null!=(i=t.call(e,e[o],o))&&i>n&&(n=i)}return n},t.extent=function(e,t){var n,i,o,r=-1,s=e.length;if(1===arguments.length){for(;++r<s&&(null==(n=o=e[r])||n!=n);)n=o=void 0;for(;++r<s;)null!=(i=e[r])&&(n>i&&(n=i),o<i&&(o=i))}else{for(;++r<s&&(null==(n=o=t.call(e,e[r],r))||n!=n);)n=void 0;for(;++r<s;)null!=(i=t.call(e,e[r],r))&&(n>i&&(n=i),o<i&&(o=i))}return[n,o]},t.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,i,o;do{n=2*Math.random()-1,i=2*Math.random()-1,o=n*n+i*i}while(!o||o>1);return e+t*n*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(e,n){var i=arguments.length;i<2&&(n=1),i<1&&(e=0);var o=t.random.normal();return function(){return Math.exp(e+n*o())}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t/e}}},t.sum=function(e,t){var n,i=0,o=e.length,r=-1;if(1===arguments.length)for(;++r<o;)isNaN(n=+e[r])||(i+=n);else for(;++r<o;)isNaN(n=+t.call(e,e[r],r))||(i+=n);return i},t.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),o=e[i-1],r=n-i;return r?o+r*(e[i]-o):o},t.transpose=function(e){return t.zip.apply(t,e)},t.zip=function(){if(!(o=arguments.length))return[];for(var e=-1,n=t.min(arguments,c),i=new Array(n);++e<n;)for(var o,r=-1,s=i[e]=new Array(o);++r<o;)s[r]=arguments[r][e];return i},t.bisector=function(e){return{left:function(t,n,i,o){for(arguments.length<3&&(i=0),arguments.length<4&&(o=t.length);i<o;){var r=i+o>>>1;e.call(t,t[r],r)<n?i=r+1:o=r}return i},right:function(t,n,i,o){for(arguments.length<3&&(i=0),arguments.length<4&&(o=t.length);i<o;){var r=i+o>>>1;n<e.call(t,t[r],r)?o=r:i=r+1}return i}}};var Ki=t.bisector((function(e){return e}));t.bisectLeft=Ki.left,t.bisect=t.bisectRight=Ki.right,t.first=function(e,n){var i,o=0,r=e.length,s=e[0];for(1===arguments.length&&(n=t.ascending);++o<r;)n.call(e,s,i=e[o])>0&&(s=i);return s},t.last=function(e,n){var i,o=0,r=e.length,s=e[0];for(1===arguments.length&&(n=t.ascending);++o<r;)n.call(e,s,i=e[o])<=0&&(s=i);return s},t.nest=function(){function e(t,a){if(a>=s.length)return o?o.call(r,t):n?t.sort(n):t;for(var l,u,c,d=-1,h=t.length,p=s[a++],m=new i,f={};++d<h;)(c=m.get(l=p(u=t[d])))?c.push(u):m.set(l,[u]);return m.forEach((function(t,n){f[t]=e(n,a)})),f}function t(e,n){if(n>=s.length)return e;var i,o=[],r=a[n++];for(i in e)o.push({key:i,values:t(e[i],n)});return r&&o.sort((function(e,t){return r(e.key,t.key)})),o}var n,o,r={},s=[],a=[];return r.map=function(t){return e(t,0)},r.entries=function(n){return t(e(n,0),0)},r.key=function(e){return s.push(e),r},r.sortKeys=function(e){return a[s.length-1]=e,r},r.sortValues=function(e){return n=e,r},r.rollup=function(e){return o=e,r},r},t.keys=function(e){var t=[];for(var n in e)t.push(n);return t},t.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},t.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},t.permute=function(e,t){for(var n=[],i=-1,o=t.length;++i<o;)n[i]=e[t[i]];return n},t.merge=function(e){return Array.prototype.concat.apply([],e)},t.split=function(e,t){var n,i=[],o=[],r=-1,s=e.length;for(arguments.length<2&&(t=d);++r<s;)t.call(o,n=e[r],r)?o=[]:(o.length||i.push(o),o.push(n));return i},t.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var i,o=[],r=p(Math.abs(n)),s=-1;if(e*=r,t*=r,n*=r,n<0)for(;(i=e+n*++s)>t;)o.push(i/r);else for(;(i=e+n*++s)<t;)o.push(i/r);return o},t.requote=function(e){return e.replace(Zi,"\\$&")};var Zi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},t.xhr=function(e,t,n){var i=new XMLHttpRequest;arguments.length<3?(n=t,t=null):t&&i.overrideMimeType&&i.overrideMimeType(t),i.open("GET",e,!0),t&&i.setRequestHeader("Accept",t),i.onreadystatechange=function(){if(4===i.readyState){var e=i.status;n(!e&&i.response||e>=200&&e<300||304===e?i:null)}},i.send(null)},t.text=function(e,n,i){function o(e){i(e&&e.responseText)}arguments.length<3&&(i=n,n=null),t.xhr(e,n,o)},t.json=function(e,n){t.text(e,"application/json",(function(e){n(e?JSON.parse(e):null)}))},t.html=function(e,n){t.text(e,"text/html",(function(e){if(null!=e){var t=document.createRange();t.selectNode(document.body),e=t.createContextualFragment(e)}n(e)}))},t.xml=function(e,n,i){function o(e){i(e&&e.responseXML)}arguments.length<3&&(i=n,n=null),t.xhr(e,n,o)};var Xi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:Xi,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),Xi.hasOwnProperty(n)?{space:Xi[n],local:e}:e}},t.dispatch=function(){for(var e=new m,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=f(e);return e},m.prototype.on=function(e,t){var n=e.indexOf("."),i="";return n>0&&(i=e.substring(n+1),e=e.substring(0,n)),arguments.length<2?this[e].on(i):this[e].on(i,t)},t.format=function(e){var n=Ji.exec(e),i=n[1]||" ",o=n[3]||"",r=n[5],s=+n[6],a=n[7],l=n[8],u=n[9],c=1,d="",h=!1;switch(l&&(l=+l.substring(1)),r&&(i="0",a&&(s-=Math.floor((s-1)/4))),u){case"n":a=!0,u="g";break;case"%":c=100,d="%",u="f";break;case"p":c=100,d="%",u="r";break;case"d":h=!0,l=0;break;case"s":c=-1,u="r"}return"r"!=u||l||(u="g"),u=Qi.get(u)||g,function(e){if(h&&e%1)return"";var n=e<0&&(e=-e)?"-":o;if(c<0){var p=t.formatPrefix(e,l);e=p.scale(e),d=p.symbol}else e*=c;if(e=u(e,l),r){var m=e.length+n.length;m<s&&(e=new Array(s-m+1).join(i)+e),a&&(e=v(e)),e=n+e}else{a&&(e=v(e)),e=n+e;var m=e.length;m<s&&(e=new Array(s-m+1).join(i)+e)}return e+d}};var Ji=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Qi=t.map({g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,n){return t.round(e,n=_(e,n)).toFixed(Math.max(0,Math.min(20,n)))}}),$i=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(y);t.formatPrefix=function(e,n){var i=0;return e&&(e<0&&(e*=-1),n&&(e=t.round(e,_(e,n))),i=1+Math.floor(1e-12+Math.log(e)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((i<=0?i+1:i-1)/3)))),$i[8+i/3]};var eo=E(2),to=E(3),no=function(){return T},io=t.map({linear:no,poly:E,quad:function(){return eo},cubic:function(){return to},sin:function(){return w},exp:function(){return O},circle:function(){return I},elastic:S,back:j,bounce:function(){return C}}),oo=t.map({in:T,out:b,"in-out":A,"out-in":function(e){return A(b(e))}});t.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,i=t>=0?e.substring(t+1):"in";return n=io.get(n)||no,i=oo.get(i)||T,M(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},t.event=null,t.transform=function(e){var n=document.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate();return new N(t?t.matrix:so)})(e)},N.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ro=180/Math.PI,so={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolate=function(e,n){for(var i,o=t.interpolators.length;--o>=0&&!(i=t.interpolators[o](e,n)););return i},t.interpolateNumber=function(e,t){return t-=e,function(n){return e+t*n}},t.interpolateRound=function(e,t){return t-=e,function(n){return Math.round(e+t*n)}},t.interpolateString=function(e,n){var i,o,r,s,a,l=0,u=[],c=[];for(ao.lastIndex=0,o=0;i=ao.exec(n);++o)i.index&&u.push(n.substring(l,i.index)),c.push({i:u.length,x:i[0]}),u.push(null),l=ao.lastIndex;for(l<n.length&&u.push(n.substring(l)),o=0,s=c.length;(i=ao.exec(e))&&o<s;++o)if(a=c[o],a.x==i[0]){if(a.i)if(null==u[a.i+1])for(u[a.i-1]+=a.x,u.splice(a.i,1),r=o+1;r<s;++r)c[r].i--;else for(u[a.i-1]+=a.x+u[a.i+1],u.splice(a.i,2),r=o+1;r<s;++r)c[r].i-=2;else if(null==u[a.i+1])u[a.i]=a.x;else for(u[a.i]=a.x+u[a.i+1],u.splice(a.i+1,1),r=o+1;r<s;++r)c[r].i--;c.splice(o,1),s--,o--}else a.x=t.interpolateNumber(parseFloat(i[0]),parseFloat(a.x));for(;o<s;)a=c.pop(),null==u[a.i+1]?u[a.i]=a.x:(u[a.i]=a.x+u[a.i+1],u.splice(a.i+1,1)),s--;return 1===u.length?null==u[0]?c[0].x:function(){return n}:function(e){for(o=0;o<s;++o)u[(a=c[o]).i]=a.x(e);return u.join("")}},t.interpolateTransform=function(e,n){var i,o=[],r=[],s=t.transform(e),a=t.transform(n),l=s.translate,u=a.translate,c=s.rotate,d=a.rotate,h=s.skew,p=a.skew,m=s.scale,f=a.scale;return l[0]!=u[0]||l[1]!=u[1]?(o.push("translate(",null,",",null,")"),r.push({i:1,x:t.interpolateNumber(l[0],u[0])},{i:3,x:t.interpolateNumber(l[1],u[1])})):u[0]||u[1]?o.push("translate("+u+")"):o.push(""),c!=d?(c-d>180?d+=360:d-c>180&&(c+=360),r.push({i:o.push(o.pop()+"rotate(",null,")")-2,x:t.interpolateNumber(c,d)})):d&&o.push(o.pop()+"rotate("+d+")"),h!=p?r.push({i:o.push(o.pop()+"skewX(",null,")")-2,x:t.interpolateNumber(h,p)}):p&&o.push(o.pop()+"skewX("+p+")"),m[0]!=f[0]||m[1]!=f[1]?(i=o.push(o.pop()+"scale(",null,",",null,")"),r.push({i:i-4,x:t.interpolateNumber(m[0],f[0])},{i:i-2,x:t.interpolateNumber(m[1],f[1])})):1==f[0]&&1==f[1]||o.push(o.pop()+"scale("+f+")"),i=r.length,function(e){for(var t,n=-1;++n<i;)o[(t=r[n]).i]=t.x(e);return o.join("")}},t.interpolateRgb=function(e,n){e=t.rgb(e),n=t.rgb(n);var i=e.r,o=e.g,r=e.b,s=n.r-i,a=n.g-o,l=n.b-r;return function(e){return"#"+G(Math.round(i+s*e))+G(Math.round(o+a*e))+G(Math.round(r+l*e))}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var i=e.h,o=e.s,r=e.l,s=n.h-i,a=n.s-o,l=n.l-r;return s>180?s-=360:s<-180&&(s+=360),function(e){return Q(i+s*e,o+a*e,r+l*e)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var i=e.l,o=e.a,r=e.b,s=n.l-i,a=n.a-o,l=n.b-r;return function(e){return oe(i+s*e,o+a*e,r+l*e)+""}},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var i=e.h,o=e.c,r=e.l,s=n.h-i,a=n.c-o,l=n.l-r;return s>180?s-=360:s<-180&&(s+=360),function(e){return te(i+s*e,o+a*e,r+l*e)+""}},t.interpolateArray=function(e,n){var i,o=[],r=[],s=e.length,a=n.length,l=Math.min(e.length,n.length);for(i=0;i<l;++i)o.push(t.interpolate(e[i],n[i]));for(;i<s;++i)r[i]=e[i];for(;i<a;++i)r[i]=n[i];return function(e){for(i=0;i<l;++i)r[i]=o[i](e);return r}},t.interpolateObject=function(e,t){var n,i={},o={};for(n in e)n in t?i[n]=V(n)(e[n],t[n]):o[n]=e[n];for(n in t)n in e||(o[n]=t[n]);return function(e){for(n in i)o[n]=i[n](e);return o}};var ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;t.interpolators=[t.interpolateObject,function(e,n){return n instanceof Array&&t.interpolateArray(e,n)},function(e,n){return("string"==typeof e||"string"==typeof n)&&t.interpolateString(e+"",n+"")},function(e,n){return("string"==typeof n?uo.has(n)||/^(#|rgb\(|hsl\()/.test(n):n instanceof W)&&t.interpolateRgb(e,n)},function(e,n){return!isNaN(e=+e)&&!isNaN(n=+n)&&t.interpolateNumber(e,n)}],W.prototype.toString=function(){return this.rgb()+""},t.rgb=function(e,t,n){return 1===arguments.length?e instanceof U?F(e.r,e.g,e.b):Y(""+e,F,Q):F(~~e,~~t,~~n)};var lo=U.prototype=new W;lo.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,o=30;return t||n||i?(t&&t<o&&(t=o),n&&n<o&&(n=o),i&&i<o&&(i=o),F(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(i/e)))):F(o,o,o)},lo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),F(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))},lo.hsl=function(){return z(this.r,this.g,this.b)},lo.toString=function(){return"#"+G(this.r)+G(this.g)+G(this.b)};var uo=t.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",
mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});uo.forEach((function(e,t){uo.set(e,Y(t,F,Q))})),t.hsl=function(e,t,n){return 1===arguments.length?e instanceof J?X(e.h,e.s,e.l):Y(""+e,z,X):X(+e,+t,+n)};var co=J.prototype=new W;co.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),X(this.h,this.s,this.l/e)},co.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),X(this.h,this.s,e*this.l)},co.rgb=function(){return Q(this.h,this.s,this.l)},t.hcl=function(e,n,i){return 1===arguments.length?e instanceof ee?$(e.h,e.c,e.l):e instanceof ie?re(e.l,e.a,e.b):re((e=q((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):$(+e,+n,+i)};var ho=ee.prototype=new W;ho.brighter=function(e){return $(this.h,this.c,Math.min(100,this.l+po*(arguments.length?e:1)))},ho.darker=function(e){return $(this.h,this.c,Math.max(0,this.l-po*(arguments.length?e:1)))},ho.rgb=function(){return te(this.h,this.c,this.l).rgb()},t.lab=function(e,n,i){return 1===arguments.length?e instanceof ie?ne(e.l,e.a,e.b):e instanceof ee?te(e.l,e.c,e.h):q((e=t.rgb(e)).r,e.g,e.b):ne(+e,+n,+i)};var po=18,mo=.95047,fo=1,_o=1.08883,go=ie.prototype=new W;go.brighter=function(e){return ne(Math.min(100,this.l+po*(arguments.length?e:1)),this.a,this.b)},go.darker=function(e){return ne(Math.max(0,this.l-po*(arguments.length?e:1)),this.a,this.b)},go.rgb=function(){return oe(this.l,this.a,this.b)};var vo=function(e,t){return t.querySelector(e)},yo=function(e,t){return t.querySelectorAll(e)},Mo=document.documentElement,bo=Mo.matchesSelector||Mo.webkitMatchesSelector||Mo.mozMatchesSelector||Mo.msMatchesSelector||Mo.oMatchesSelector,Ao=function(e,t){return bo.call(e,t)};"function"==typeof Sizzle&&(vo=function(e,t){return Sizzle(e,t)[0]||null},yo=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},Ao=Sizzle.matchesSelector);var To=[];t.selection=function(){return Eo},t.selection.prototype=To,To.select=function(e){var t,n,i,o,r=[];"function"!=typeof e&&(e=ce(e));for(var s=-1,a=this.length;++s<a;){r.push(t=[]),t.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;++l<u;)(o=i[l])?(t.push(n=e.call(o,o.__data__,l)),n&&"__data__"in o&&(n.__data__=o.__data__)):t.push(null)}return ue(r)},To.selectAll=function(e){var t,n,i=[];"function"!=typeof e&&(e=de(e));for(var o=-1,r=this.length;++o<r;)for(var s=this[o],a=-1,l=s.length;++a<l;)(n=s[a])&&(i.push(t=Gi(e.call(n,n.__data__,a))),t.parentNode=n);return ue(i)},To.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var i=this.node();return e=t.ns.qualify(e),e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}for(n in e)this.each(he(n,e[n]));return this}return this.each(he(e,n))},To.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),i=(e=e.trim().split(/^|\s+/g)).length,o=-1;if(t=n.classList){for(;++o<i;)if(!t.contains(e[o]))return!1}else for(t=n.className,null!=t.baseVal&&(t=t.baseVal);++o<i;)if(!pe(e[o]).test(t))return!1;return!0}for(t in e)this.each(me(t,e[t]));return this}return this.each(me(e,t))},To.style=function(e,t,n){var i=arguments.length;if(i<3){if("string"!=typeof e){i<2&&(t="");for(n in e)this.each(_e(n,e[n],t));return this}if(i<2)return window.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(_e(e,t,n))},To.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ge(t,e[t]));return this}return this.each(ge(e,t))},To.text=function(e){return arguments.length<1?this.node().textContent:this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e})},To.html=function(e){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e})},To.append=function(e){function n(){return this.appendChild(document.createElementNS(this.namespaceURI,e))}function i(){return this.appendChild(document.createElementNS(e.space,e.local))}return e=t.ns.qualify(e),this.select(e.local?i:n)},To.insert=function(e,n){function i(){return this.insertBefore(document.createElementNS(this.namespaceURI,e),vo(n,this))}function o(){return this.insertBefore(document.createElementNS(e.space,e.local),vo(n,this))}return e=t.ns.qualify(e),this.select(e.local?o:i)},To.remove=function(){return this.each((function(){var e=this.parentNode;e&&e.removeChild(this)}))},To.data=function(e,t){function n(e,n){var o,r,s,a=e.length,d=n.length,h=Math.min(a,d),p=Math.max(a,d),m=[],f=[],_=[];if(t){var g,v=new i,y=[],M=n.length;for(o=-1;++o<a;)g=t.call(r=e[o],r.__data__,o),v.has(g)?_[M++]=r:v.set(g,r),y.push(g);for(o=-1;++o<d;)g=t.call(n,s=n[o],o),v.has(g)?(m[o]=r=v.get(g),r.__data__=s,f[o]=_[o]=null):(f[o]=ve(s),m[o]=_[o]=null),v.remove(g);for(o=-1;++o<a;)v.has(y[o])&&(_[o]=e[o])}else{for(o=-1;++o<h;)r=e[o],s=n[o],r?(r.__data__=s,m[o]=r,f[o]=_[o]=null):(f[o]=ve(s),m[o]=_[o]=null);for(;o<d;++o)f[o]=ve(n[o]),m[o]=_[o]=null;for(;o<p;++o)_[o]=e[o],f[o]=m[o]=null}f.update=m,f.parentNode=m.parentNode=_.parentNode=e.parentNode,l.push(f),u.push(m),c.push(_)}var o,r,s=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(o=this[0]).length);++s<a;)(r=o[s])&&(e[s]=r.__data__);return e}var l=Te([]),u=ue([]),c=ue([]);if("function"==typeof e)for(;++s<a;)n(o=this[s],e.call(o,o.parentNode.__data__,s));else for(;++s<a;)n(o=this[s],e);return u.enter=function(){return l},u.exit=function(){return c},u},To.datum=To.map=function(e){return arguments.length<1?this.property("__data__"):this.property("__data__",e)},To.filter=function(e){var t,n,i,o=[];"function"!=typeof e&&(e=ye(e));for(var r=0,s=this.length;r<s;r++){o.push(t=[]),t.parentNode=(n=this[r]).parentNode;for(var a=0,l=n.length;a<l;a++)(i=n[a])&&e.call(i,i.__data__,a)&&t.push(i)}return ue(o)},To.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],o=i.length-1,r=i[o];--o>=0;)(n=i[o])&&(r&&r!==n.nextSibling&&r.parentNode.insertBefore(n,r),r=n);return this},To.sort=function(e){e=Me.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},To.on=function(e,t,n){var i=arguments.length;if(i<3){if("string"!=typeof e){i<2&&(t=!1);for(n in e)this.each(be(n,e[n],t));return this}if(i<2)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(be(e,t,n))},To.each=function(e){return Ae(this,(function(t,n,i){e.call(t,t.__data__,n,i)}))},To.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},To.empty=function(){return!this.node()},To.node=function(e){for(var t=0,n=this.length;t<n;t++)for(var i=this[t],o=0,r=i.length;o<r;o++){var s=i[o];if(s)return s}return null},To.transition=function(){for(var e,t,n=[],i=-1,o=this.length;++i<o;){n.push(e=[]);for(var r=this[i],s=-1,a=r.length;++s<a;)e.push((t=r[s])?{node:t,delay:Co,duration:Do}:null)}return Ee(n,So||++Io,Date.now())};var Eo=ue([[document]]);Eo[0].parentNode=Mo,t.select=function(e){return"string"==typeof e?Eo.select(e):ue([[e]])},t.selectAll=function(e){return"string"==typeof e?Eo.selectAll(e):ue([Gi(e)])};var wo=[];t.selection.enter=Te,t.selection.enter.prototype=wo,wo.append=To.append,wo.insert=To.insert,wo.empty=To.empty,wo.node=To.node,wo.select=function(e){for(var t,n,i,o,r,s=[],a=-1,l=this.length;++a<l;){i=(o=this[a]).update,s.push(t=[]),t.parentNode=o.parentNode;for(var u=-1,c=o.length;++u<c;)(r=o[u])?(t.push(i[u]=n=e.call(o.parentNode,r.__data__,u)),n.__data__=r.__data__):t.push(null)}return ue(s)};var Oo=[],Io=0,So=0,jo=t.ease("cubic-in-out"),Co=0,Do=250,Ro=jo;Oo.call=To.call,t.transition=function(e){return arguments.length?So?e.transition():e:Eo.transition()},t.transition.prototype=Oo,Oo.select=function(e){var t,n,i,o=[];"function"!=typeof e&&(e=ce(e));for(var r=-1,s=this.length;++r<s;){o.push(t=[]);for(var a=this[r],l=-1,u=a.length;++l<u;)(i=a[l])&&(n=e.call(i.node,i.node.__data__,l))?("__data__"in i.node&&(n.__data__=i.node.__data__),t.push({node:n,delay:i.delay,duration:i.duration})):t.push(null)}return Ee(o,this.id,this.time).ease(this.ease())},Oo.selectAll=function(e){var t,n,i,o=[];"function"!=typeof e&&(e=de(e));for(var r=-1,s=this.length;++r<s;)for(var a=this[r],l=-1,u=a.length;++l<u;)if(i=a[l]){n=e.call(i.node,i.node.__data__,l),o.push(t=[]);for(var c=-1,d=n.length;++c<d;)t.push({node:n[c],delay:i.delay,duration:i.duration})}return Ee(o,this.id,this.time).ease(this.ease())},Oo.filter=function(e){var t,n,i,o=[];"function"!=typeof e&&(e=ye(e));for(var r=0,s=this.length;r<s;r++){o.push(t=[]);for(var n=this[r],a=0,l=n.length;a<l;a++)(i=n[a])&&e.call(i.node,i.node.__data__,a)&&t.push(i)}return Ee(o,this.id,this.time).ease(this.ease())},Oo.attr=function(e,t){if(arguments.length<2){for(t in e)this.attrTween(t,Ie(e[t],t));return this}return this.attrTween(e,Ie(t,e))},Oo.attrTween=function(e,n){function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i===ko?(this.removeAttribute(r),null):i&&function(e){this.setAttribute(r,i(e))}}function o(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i===ko?(this.removeAttributeNS(r.space,r.local),null):i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=t.ns.qualify(e);return this.tween("attr."+e,r.local?o:i)},Oo.style=function(e,t,n){var i=arguments.length;if(i<3){if("string"!=typeof e){i<2&&(t="");for(n in e)this.styleTween(n,Ie(e[n],n),t);return this}n=""}return this.styleTween(e,Ie(t,e),n)},Oo.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,(function(i,o){var r=t.call(this,i,o,window.getComputedStyle(this,null).getPropertyValue(e));return r===ko?(this.style.removeProperty(e),null):r&&function(t){this.style.setProperty(e,r(t),n)}}))},Oo.text=function(e){return this.tween("text",(function(t,n){this.textContent="function"==typeof e?e.call(this,t,n):e}))},Oo.remove=function(){return this.each("end.transition",(function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)}))},Oo.delay=function(e){return Ae(this,"function"==typeof e?function(t,n,i){t.delay=0|e.call(t=t.node,t.__data__,n,i)}:(e|=0,function(t){t.delay=e}))},Oo.duration=function(e){return Ae(this,"function"==typeof e?function(t,n,i){t.duration=Math.max(1,0|e.call(t=t.node,t.__data__,n,i))}:(e=Math.max(1,0|e),function(t){t.duration=e}))},Oo.transition=function(){return this.select(r)},t.tween=function(e,t){function n(n,i,o){var r=e.call(this,n,i);return null==r?""!=o&&ko:o!=r&&t(o,r+"")}function i(n,i,o){return o!=e&&t(o,e)}return"function"==typeof e?n:null==e?Oe:(e+="",i)};var Lo,No,ko={},Po=0,xo={},Vo=null;t.timer=function(e,t,n){if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;n=Date.now()}var i=xo[e.id];i&&i.callback===e?(i.then=n,i.delay=t):xo[e.id=++Po]=Vo={callback:e,then:n,delay:t,next:Vo},Lo||(No=clearTimeout(No),Lo=1,Ho(Se))},t.timer.flush=function(){for(var e,t=Date.now(),n=Vo;n;)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;je()};var Ho=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};t.mouse=function(e){return Ce(e,R())};var Bo=/WebKit/.test(navigator.userAgent)?-1:0;t.touches=function(e,t){return arguments.length<2&&(t=R().touches),t?Gi(t).map((function(t){var n=Ce(e,t);return n.identifier=t.identifier,n})):[]},t.scale={},t.scale.linear=function(){return ke([0,1],[0,1],t.interpolate,!1)},t.scale.log=function(){return Ue(t.scale.linear(),Ge)};var Wo=t.format(".0e");Ge.pow=function(e){return Math.pow(10,e)},Ye.pow=function(e){return-Math.pow(10,-e)},t.scale.pow=function(){return ze(t.scale.linear(),1)},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return Ke([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Fo)},t.scale.category20=function(){return t.scale.ordinal().range(Uo)},t.scale.category20b=function(){return t.scale.ordinal().range(Go)},t.scale.category20c=function(){return t.scale.ordinal().range(Yo)};var Fo=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Uo=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Go=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Yo=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];t.scale.quantile=function(){return Ze([],[])},t.scale.quantize=function(){return Xe(0,1,[0,1])},t.scale.threshold=function(){return Je([.5],[0,1])},t.scale.identity=function(){return Qe([0,1])},t.svg={},t.svg.arc=function(){function e(){var e=t.apply(this,arguments),r=n.apply(this,arguments),s=i.apply(this,arguments)+zo,a=o.apply(this,arguments)+zo,l=(a<s&&(l=s,s=a,a=l),a-s),u=l<Math.PI?"0":"1",c=Math.cos(s),d=Math.sin(s),h=Math.cos(a),p=Math.sin(a);return l>=qo?e?"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z":e?"M"+r*c+","+r*d+"A"+r+","+r+" 0 "+u+",1 "+r*h+","+r*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+u+",0 "+e*c+","+e*d+"Z":"M"+r*c+","+r*d+"A"+r+","+r+" 0 "+u+",1 "+r*h+","+r*p+"L0,0Z"}var t=$e,n=et,i=tt,o=nt;return e.innerRadius=function(n){return arguments.length?(t=a(n),e):t},e.outerRadius=function(t){return arguments.length?(n=a(t),e):n},e.startAngle=function(t){return arguments.length?(i=a(t),e):i},e.endAngle=function(t){return arguments.length?(o=a(t),e):o},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,r=(i.apply(this,arguments)+o.apply(this,arguments))/2+zo;return[Math.cos(r)*e,Math.sin(r)*e]},e};var zo=-Math.PI/2,qo=2*Math.PI-1e-6;t.svg.line=function(){return it(o)};var Ko=t.map({linear:st,"linear-closed":at,"step-before":lt,"step-after":ut,basis:ft,"basis-open":_t,"basis-closed":gt,bundle:vt,cardinal:ht,"cardinal-open":ct,"cardinal-closed":dt,monotone:Et});Ko.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var Zo=[0,2/3,1/3,0],Xo=[0,1/3,2/3,0],Jo=[0,1/6,2/3,1/6];t.svg.line.radial=function(){var e=it(wt);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},lt.reverse=ut,ut.reverse=lt,t.svg.area=function(){return Ot(o)},t.svg.area.radial=function(){var e=Ot(wt);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},t.svg.chord=function(){function e(e,a){var l=t(this,r,e,a),u=t(this,s,e,a);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?o(l.r,l.p1,l.r,l.p0):o(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+o(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,i){var o=t.call(e,n,i),r=l.call(e,o,i),s=u.call(e,o,i)+zo,a=c.call(e,o,i)+zo;return{r:r,a0:s,a1:a,p0:[r*Math.cos(s),r*Math.sin(s)],p1:[r*Math.cos(a),r*Math.sin(a)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function i(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Math.PI)+",1 "+t}function o(e,t,n,i){return"Q 0,0 "+i}var r=It,s=St,l=jt,u=tt,c=nt;return e.radius=function(t){return arguments.length?(l=a(t),e):l},e.source=function(t){return arguments.length?(r=a(t),e):r},e.target=function(t){return arguments.length?(s=a(t),e):s},e.startAngle=function(t){return arguments.length?(u=a(t),e):u},e.endAngle=function(t){return arguments.length?(c=a(t),e):c},e},t.svg.diagonal=function(){function e(e,o){var r=t.call(this,e,o),s=n.call(this,e,o),a=(r.y+s.y)/2,l=[r,{x:r.x,y:a},{x:s.x,y:a},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=It,n=St,i=Ct;return e.source=function(n){return arguments.length?(t=a(n),e):t},e.target=function(t){return arguments.length?(n=a(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=Ct,i=e.projection;return e.projection=function(e){return arguments.length?i(Dt(n=e)):n},e},t.svg.mouse=t.mouse,t.svg.touches=t.touches,t.svg.symbol=function(){function e(e,i){return(Qo.get(t.call(this,e,i))||Nt)(n.call(this,e,i))}var t=Lt,n=Rt;return e.type=function(n){return arguments.length?(t=a(n),e):t},e.size=function(t){return arguments.length?(n=a(t),e):n},e};var Qo=t.map({circle:Nt,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*er)),n=t*er;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/$o),n=t*$o/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/$o),n=t*$o/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});t.svg.symbolTypes=Qo.keys();var $o=Math.sqrt(3),er=Math.tan(30*Math.PI/180);t.svg.axis=function(){function e(e){e.each((function(){var e,h=t.select(this),p=null==c?i.ticks?i.ticks.apply(i,u):i.domain():c,m=null==n?i.tickFormat?i.tickFormat.apply(i,u):String:n,f=xt(i,p,d),_=h.selectAll(".minor").data(f,String),g=_.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),v=t.transition(_.exit()).style("opacity",1e-6).remove(),y=t.transition(_).style("opacity",1),M=h.selectAll("g").data(p,String),b=M.enter().insert("g","path").style("opacity",1e-6),A=t.transition(M.exit()).style("opacity",1e-6).remove(),T=t.transition(M).style("opacity",1),E=Re(i),w=h.selectAll(".domain").data([0]),O=(w.enter().append("path").attr("class","domain"),t.transition(w)),I=i.copy(),S=this.__chart__||I;this.__chart__=I,b.append("line").attr("class","tick"),b.append("text");var j=b.select("line"),C=T.select("line"),D=M.select("text").text(m),R=b.select("text"),L=T.select("text");switch(o){case"bottom":e=kt,g.attr("y2",s),y.attr("x2",0).attr("y2",s),j.attr("y2",r),R.attr("y",Math.max(r,0)+l),C.attr("x2",0).attr("y2",r),L.attr("x",0).attr("y",Math.max(r,0)+l),D.attr("dy",".71em").attr("text-anchor","middle"),O.attr("d","M"+E[0]+","+a+"V0H"+E[1]+"V"+a);break;case"top":e=kt,g.attr("y2",-s),y.attr("x2",0).attr("y2",-s),j.attr("y2",-r),R.attr("y",-(Math.max(r,0)+l)),C.attr("x2",0).attr("y2",-r),L.attr("x",0).attr("y",-(Math.max(r,0)+l)),D.attr("dy","0em").attr("text-anchor","middle"),O.attr("d","M"+E[0]+","+-a+"V0H"+E[1]+"V"+-a);break;case"left":e=Pt,g.attr("x2",-s),y.attr("x2",-s).attr("y2",0),j.attr("x2",-r),R.attr("x",-(Math.max(r,0)+l)),C.attr("x2",-r).attr("y2",0),L.attr("x",-(Math.max(r,0)+l)).attr("y",0),D.attr("dy",".32em").attr("text-anchor","end"),O.attr("d","M"+-a+","+E[0]+"H0V"+E[1]+"H"+-a);break;case"right":e=Pt,g.attr("x2",s),y.attr("x2",s).attr("y2",0),j.attr("x2",r),R.attr("x",Math.max(r,0)+l),C.attr("x2",r).attr("y2",0),L.attr("x",Math.max(r,0)+l).attr("y",0),D.attr("dy",".32em").attr("text-anchor","start"),O.attr("d","M"+a+","+E[0]+"H0V"+E[1]+"H"+a)}if(i.ticks)b.call(e,S),T.call(e,I),A.call(e,I),g.call(e,S),y.call(e,I),v.call(e,I);else{var N=I.rangeBand()/2,k=function(e){return I(e)+N};b.call(e,k),T.call(e,k)}}))}var n,i=t.scale.linear(),o="bottom",r=6,s=6,a=6,l=3,u=[10],c=null,d=0;return e.scale=function(t){return arguments.length?(i=t,e):i},e.orient=function(t){return arguments.length?(o=t,e):o},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(c=t,e):c},e.tickFormat=function(t){return arguments.length?(n=t,e):n},e.tickSize=function(t,n,i){if(!arguments.length)return r;var o=arguments.length-1;return r=+t,s=o>1?+n:r,a=o>0?+arguments[o]:r,e},e.tickPadding=function(t){return arguments.length?(l=+t,e):l},e.tickSubdivide=function(t){return arguments.length?(d=+t,e):d},e},t.svg.brush=function(){function e(s){s.each((function(){var s,a=t.select(this),d=a.selectAll(".background").data([0]),h=a.selectAll(".extent").data([0]),p=a.selectAll(".resize").data(c,String);a.style("pointer-events","all").on("mousedown.brush",r).on("touchstart.brush",r),d.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),p.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return tr[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),p.style("display",e.empty()?"none":null),p.exit().remove(),l&&(s=Re(l),d.attr("x",s[0]).attr("width",s[1]-s[0]),i(a)),u&&(s=Re(u),d.attr("y",s[0]).attr("height",s[1]-s[0]),o(a)),n(a)}))}function n(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+d[+/e$/.test(e)][0]+","+d[+/^s/.test(e)][1]+")"}))}function i(e){e.select(".extent").attr("x",d[0][0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",d[1][0]-d[0][0])}function o(e){e.select(".extent").attr("y",d[0][1]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1][1]-d[0][1])}function r(){function r(){var e=t.event.changedTouches;return e?t.touches(v,e)[0]:t.mouse(v)}function c(){32==t.event.keyCode&&(w||(_=null,O[0]-=d[1][0],O[1]-=d[1][1],w=2),D())}function h(){32==t.event.keyCode&&2==w&&(O[0]+=d[1][0],O[1]+=d[1][1],w=0,D())}function p(){var e=r(),s=!1;g&&(e[0]+=g[0],e[1]+=g[1]),w||(t.event.altKey?(_||(_=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]),O[0]=d[+(e[0]<_[0])][0],O[1]=d[+(e[1]<_[1])][1]):_=null),T&&m(e,l,0)&&(i(b),s=!0),E&&m(e,u,1)&&(o(b),s=!0),s&&(n(b),M({type:"brush",mode:w?"move":"resize"}))}function m(e,t,n){var i,o,r=Re(t),a=r[0],l=r[1],u=O[n],c=d[1][n]-d[0][n];if(w&&(a-=u,l-=c+u),i=Math.max(a,Math.min(l,e[n])),w?o=(i+=u)+c:(_&&(u=Math.max(a,Math.min(l,2*_[n]-i))),u<i?(o=i,i=u):o=u),d[0][n]!==i||d[1][n]!==o)return s=null,d[0][n]=i,d[1][n]=o,!0}function f(){p(),b.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),t.select("body").style("cursor",null),I.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M({type:"brushend"}),D()}var _,g,v=this,y=t.select(t.event.target),M=a.of(v,arguments),b=t.select(v),A=y.datum(),T=!/^(n|s)$/.test(A)&&l,E=!/^(e|w)$/.test(A)&&u,w=y.classed("extent"),O=r(),I=t.select(window).on("mousemove.brush",p).on("mouseup.brush",f).on("touchmove.brush",p).on("touchend.brush",f).on("keydown.brush",c).on("keyup.brush",h);if(w)O[0]=d[0][0]-O[0],O[1]=d[0][1]-O[1];else if(A){var S=+/w$/.test(A),j=+/^n/.test(A);g=[d[1-S][0]-O[0],d[1-j][1]-O[1]],O[0]=d[S][0],O[1]=d[j][1]}else t.event.altKey&&(_=O.slice());b.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),M({type:"brushstart"}),p(),D()}var s,a=L(e,"brushstart","brush","brushend"),l=null,u=null,c=nr[0],d=[[0,0],[0,0]];return e.x=function(t){return arguments.length?(l=t,c=nr[!l<<1|!u],e):l},e.y=function(t){return arguments.length?(u=t,c=nr[!l<<1|!u],e):u},e.extent=function(t){var n,i,o,r,a;return arguments.length?(s=[[0,0],[0,0]],l&&(n=t[0],i=t[1],u&&(n=n[0],i=i[0]),s[0][0]=n,s[1][0]=i,l.invert&&(n=l(n),i=l(i)),i<n&&(a=n,n=i,i=a),d[0][0]=0|n,d[1][0]=0|i),u&&(o=t[0],r=t[1],l&&(o=o[1],r=r[1]),s[0][1]=o,s[1][1]=r,u.invert&&(o=u(o),r=u(r)),r<o&&(a=o,o=r,r=a),d[0][1]=0|o,d[1][1]=0|r),e):(t=s||d,l&&(n=t[0][0],i=t[1][0],s||(n=d[0][0],i=d[1][0],l.invert&&(n=l.invert(n),i=l.invert(i)),i<n&&(a=n,n=i,i=a))),u&&(o=t[0][1],r=t[1][1],s||(o=d[0][1],r=d[1][1],u.invert&&(o=u.invert(o),r=u.invert(r)),r<o&&(a=o,o=r,r=a))),l&&u?[[n,o],[i,r]]:l?[n,i]:u&&[o,r])},e.clear=function(){return s=null,d[0][0]=d[0][1]=d[1][0]=d[1][1]=0,e},e.empty=function(){return l&&d[0][0]===d[1][0]||u&&d[0][1]===d[1][1]},t.rebind(e,a,"on")};var tr={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},nr=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];t.behavior={},t.behavior.drag=function(){function e(){this.on("mousedown.drag",n).on("touchstart.drag",n)}function n(){function e(){var e=l.parentNode;return d?t.touches(e).filter((function(e){return e.identifier===d}))[0]:t.mouse(e)}function n(){if(!l.parentNode)return r();var t=e(),n=t[0]-h[0],i=t[1]-h[1];p|=n|i,h=t,D(),u({type:"drag",x:t[0]+a[0],y:t[1]+a[1],dx:n,dy:i})}function r(){u({type:"dragend"}),p&&(D(),t.event.target===c&&m.on("click.drag",s,!0)),m.on(d?"touchmove.drag-"+d:"mousemove.drag",null).on(d?"touchend.drag-"+d:"mouseup.drag",null)}function s(){D(),m.on("click.drag",null)}var a,l=this,u=i.of(l,arguments),c=t.event.target,d=t.event.touches&&t.event.changedTouches[0].identifier,h=e(),p=0,m=t.select(window).on(d?"touchmove.drag-"+d:"mousemove.drag",n).on(d?"touchend.drag-"+d:"mouseup.drag",r,!0);o?(a=o.apply(l,arguments),a=[a.x-h[0],a.y-h[1]]):a=[0,0],d||D(),u({type:"dragstart"})}var i=L(e,"drag","dragstart","dragend"),o=null;return e.origin=function(t){return arguments.length?(o=t,e):o},t.rebind(e,i,"on")},t.behavior.zoom=function(){function e(){this.on("mousedown.zoom",a).on("mousewheel.zoom",l).on("mousemove.zoom",u).on("DOMMouseScroll.zoom",l).on("dblclick.zoom",c).on("touchstart.zoom",d).on("touchmove.zoom",h).on("touchend.zoom",d)}function n(e){return[(e[0]-M[0])/b,(e[1]-M[1])/b]}function i(e){return[e[0]*b+M[0],e[1]*b+M[1]]}function o(e){b=Math.max(A[0],Math.min(A[1],e))}function r(e,t){t=i(t),M[0]+=e[0]-t[0],M[1]+=e[1]-t[1]}function s(e){_&&_.domain(f.range().map((function(e){return(e-M[0])/b})).map(f.invert)),v&&v.domain(g.range().map((function(e){return(e-M[1])/b})).map(g.invert)),t.event.preventDefault(),e({type:"zoom",scale:b,translate:M})}function a(){function e(){c=1,r(t.mouse(a),h),s(l)}function i(){c&&D(),d.on("mousemove.zoom",null).on("mouseup.zoom",null),c&&t.event.target===u&&d.on("click.zoom",o,!0)}function o(){D(),d.on("click.zoom",null)}var a=this,l=T.of(a,arguments),u=t.event.target,c=0,d=t.select(window).on("mousemove.zoom",e).on("mouseup.zoom",i),h=n(t.mouse(a));window.focus(),D()}function l(){p||(p=n(t.mouse(this))),o(Math.pow(2,.002*Vt())*b),r(t.mouse(this),p),s(T.of(this,arguments))}function u(){p=null}function c(){var e=t.mouse(this),i=n(e);o(t.event.shiftKey?b/2:2*b),r(e,i),s(T.of(this,arguments))}function d(){var e=t.touches(this),i=Date.now();if(m=b,p={},e.forEach((function(e){p[e.identifier]=n(e)})),D(),1===e.length){if(i-y<500){var a=e[0],l=n(e[0]);o(2*b),r(a,l),s(T.of(this,arguments))}y=i}}function h(){var e=t.touches(this),n=e[0],i=p[n.identifier];if(a=e[1]){var a,l=p[a.identifier];n=[(n[0]+a[0])/2,(n[1]+a[1])/2],i=[(i[0]+l[0])/2,(i[1]+l[1])/2],o(t.event.scale*m)}r(n,i),y=null,s(T.of(this,arguments))}var p,m,f,_,g,v,y,M=[0,0],b=1,A=or,T=L(e,"zoom");return e.translate=function(t){return arguments.length?(M=t.map(Number),e):M},e.scale=function(t){return arguments.length?(b=+t,e):b},e.scaleExtent=function(t){return arguments.length?(A=null==t?or:t.map(Number),e):A},e.x=function(t){return arguments.length?(_=t,f=t.copy(),e):_},e.y=function(t){return arguments.length?(v=t,g=t.copy(),e):v},t.rebind(e,T,"on")};var ir,or=[0,1/0];t.layout={},t.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(Ht(e[n]));return t}},t.layout.chord=function(){function e(){var e,c,h,p,m,f={},_=[],g=t.range(s),v=[];for(i=[],o=[],e=0,p=-1;++p<s;){for(c=0,m=-1;++m<s;)c+=r[p][m];_.push(c),v.push(t.range(s)),e+=c}for(a&&g.sort((function(e,t){return a(_[e],_[t])})),l&&v.forEach((function(e,t){e.sort((function(e,n){return l(r[t][e],r[t][n])}))})),e=(2*Math.PI-d*s)/e,c=0,p=-1;++p<s;){for(h=c,m=-1;++m<s;){var y=g[p],M=v[y][m],b=r[y][M],A=c,T=c+=b*e;f[y+"-"+M]={index:y,subindex:M,startAngle:A,endAngle:T,value:b}}o[y]={index:y,startAngle:h,endAngle:c,value:(c-h)/e},c+=d}for(p=-1;++p<s;)for(m=p-1;++m<s;){var E=f[p+"-"+m],w=f[m+"-"+p];(E.value||w.value)&&i.push(E.value<w.value?{source:w,target:E}:{source:E,target:w})}u&&n()}function n(){i.sort((function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}var i,o,r,s,a,l,u,c={},d=0;return c.matrix=function(e){return arguments.length?(s=(r=e)&&r.length,i=o=null,c):r},c.padding=function(e){return arguments.length?(d=e,i=o=null,c):d},c.sortGroups=function(e){return arguments.length?(a=e,i=o=null,c):a},c.sortSubgroups=function(e){return arguments.length?(l=e,i=null,c):l},c.sortChords=function(e){return arguments.length?(u=e,i&&n(),c):u},c.chords=function(){return i||e(),i},c.groups=function(){return o||e(),o},c},t.layout.force=function(){function e(e){return function(t,n,i,o,r){if(t.point!==e){var s=t.cx-e.x,a=t.cy-e.y,l=1/Math.sqrt(s*s+a*a);if((o-n)*l<v){var u=t.charge*l*l;return e.px-=s*u,e.py-=a*u,!0}if(t.point&&isFinite(l)){var u=t.pointCharge*l*l;e.px-=s*u,e.py-=a*u}}return!t.charge}}function n(e){e.px=t.event.x,e.py=t.event.y,c.resume()}var i,r,s,l,u,c={},d=t.dispatch("start","tick","end"),h=[1,1],p=.9,m=qt,f=Kt,_=-30,g=.1,v=.8,y=[],M=[];return c.tick=function(){if((r*=.99)<.005)return d.end({type:"end",alpha:r=0}),!0;var n,i,o,a,c,m,f,v,b,A=y.length,T=M.length;for(i=0;i<T;++i)o=M[i],a=o.source,c=o.target,v=c.x-a.x,b=c.y-a.y,(m=v*v+b*b)&&(m=r*l[i]*((m=Math.sqrt(m))-s[i])/m,v*=m,b*=m,c.x-=v*(f=a.weight/(c.weight+a.weight)),c.y-=b*f,a.x+=v*(f=1-f),a.y+=b*f);if((f=r*g)&&(v=h[0]/2,b=h[1]/2,i=-1,f))for(;++i<A;)o=y[i],o.x+=(v-o.x)*f,o.y+=(b-o.y)*f;if(_)for(zt(n=t.geom.quadtree(y),r,u),i=-1;++i<A;)(o=y[i]).fixed||n.visit(e(o));for(i=-1;++i<A;)o=y[i],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*p,o.y-=(o.py-(o.py=o.y))*p);d.tick({type:"tick",alpha:r})},c.nodes=function(e){return arguments.length?(y=e,c):y},c.links=function(e){return arguments.length?(M=e,c):M},c.size=function(e){return arguments.length?(h=e,c):h},c.linkDistance=function(e){return arguments.length?(m=a(e),c):m},c.distance=c.linkDistance,c.linkStrength=function(e){return arguments.length?(f=a(e),c):f},c.friction=function(e){return arguments.length?(p=e,c):p},c.charge=function(e){return arguments.length?(_="function"==typeof e?e:+e,c):_},c.gravity=function(e){return arguments.length?(g=e,c):g},c.theta=function(e){return arguments.length?(v=e,c):v},c.alpha=function(e){return arguments.length?(r?r=e>0?e:0:e>0&&(d.start({type:"start",alpha:r=e}),t.timer(c.tick)),c):r},c.start=function(){function e(e,n){for(var i,o=t(),r=-1,s=o.length;++r<s;)if(!isNaN(i=o[r][e]))return i;return Math.random()*n}function t(){if(!o){for(o=[],i=0;i<a;++i)o[i]=[];for(i=0;i<d;++i){var e=M[i];o[e.source.index].push(e.target),o[e.target.index].push(e.source)}}return o[n]}var n,i,o,r,a=y.length,d=M.length,p=h[0],g=h[1];for(n=0;n<a;++n)(r=y[n]).index=n,r.weight=0;for(s=[],l=[],n=0;n<d;++n)r=M[n],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),s[n]=m.call(this,r,n),l[n]=f.call(this,r,n),++r.source.weight,++r.target.weight
;for(n=0;n<a;++n)r=y[n],isNaN(r.x)&&(r.x=e("x",p)),isNaN(r.y)&&(r.y=e("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof _)for(n=0;n<a;++n)u[n]=+_.call(this,y[n],n);else for(n=0;n<a;++n)u[n]=_;return c.resume()},c.resume=function(){return c.alpha(.1)},c.stop=function(){return c.alpha(0)},c.drag=function(){i||(i=t.behavior.drag().origin(o).on("dragstart",Ft).on("drag",n).on("dragend",Ut)),this.on("mouseover.force",Gt).on("mouseout.force",Yt).call(i)},t.rebind(c,d,"on")},t.layout.partition=function(){function e(t,n,i,o){var r=t.children;if(t.x=n,t.y=t.depth*o,t.dx=i,t.dy=o,r&&(s=r.length)){var s,a,l,u=-1;for(i=t.value?i/t.value:0;++u<s;)e(a=r[u],n,l=a.value*i,o),n+=l}}function n(e){var t=e.children,i=0;if(t&&(o=t.length))for(var o,r=-1;++r<o;)i=Math.max(i,n(t[r]));return 1+i}function i(t,i){var s=o.call(this,t,i);return e(s[0],0,r[0],r[1]/n(s[0])),s}var o=t.layout.hierarchy(),r=[1,1];return i.size=function(e){return arguments.length?(r=e,i):r},an(i,o)},t.layout.pie=function(){function e(s,a){var l=s.map((function(t,i){return+n.call(e,t,i)})),u=+("function"==typeof o?o.apply(this,arguments):o),c=(("function"==typeof r?r.apply(this,arguments):r)-o)/t.sum(l),d=t.range(s.length);null!=i&&d.sort(i===rr?function(e,t){return l[t]-l[e]}:function(e,t){return i(s[e],s[t])});var h=[];return d.forEach((function(e){var t;h[e]={data:s[e],value:t=l[e],startAngle:u,endAngle:u+=t*c}})),h}var n=Number,i=rr,o=0,r=2*Math.PI;return e.value=function(t){return arguments.length?(n=t,e):n},e.sort=function(t){return arguments.length?(i=t,e):i},e.startAngle=function(t){return arguments.length?(o=t,e):o},e.endAngle=function(t){return arguments.length?(r=t,e):r},e};var rr={};t.layout.stack=function(){function e(o,u){var c=o.map((function(t,i){return n.call(e,t,i)})),d=c.map((function(t,n){return t.map((function(t,n){return[a.call(e,t,n),l.call(e,t,n)]}))})),h=i.call(e,d,u);c=t.permute(c,h),d=t.permute(d,h);var p,m,f,_=r.call(e,d,u),g=c.length,v=c[0].length;for(m=0;m<v;++m)for(s.call(e,c[0][m],f=_[m],d[0][m][1]),p=1;p<g;++p)s.call(e,c[p][m],f+=d[p-1][m][1],d[p][m][1]);return o}var n=o,i=Qt,r=$t,s=Jt,a=Zt,l=Xt;return e.values=function(t){return arguments.length?(n=t,e):n},e.order=function(t){return arguments.length?(i="function"==typeof t?t:sr.get(t)||Qt,e):i},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:ar.get(t)||$t,e):r},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(l=t,e):l},e.out=function(t){return arguments.length?(s=t,e):s},e};var sr=t.map({"inside-out":function(e){var n,i,o=e.length,r=e.map(en),s=e.map(tn),a=t.range(o).sort((function(e,t){return r[e]-r[t]})),l=0,u=0,c=[],d=[];for(n=0;n<o;++n)i=a[n],l<u?(l+=s[i],c.push(i)):(u+=s[i],d.push(i));return d.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:Qt}),ar=t.map({silhouette:function(e){var t,n,i,o=e.length,r=e[0].length,s=[],a=0,l=[];for(n=0;n<r;++n){for(t=0,i=0;t<o;t++)i+=e[t][n][1];i>a&&(a=i),s.push(i)}for(n=0;n<r;++n)l[n]=(a-s[n])/2;return l},wiggle:function(e){var t,n,i,o,r,s,a,l,u,c=e.length,d=e[0],h=d.length,p=[];for(p[0]=l=u=0,n=1;n<h;++n){for(t=0,o=0;t<c;++t)o+=e[t][n][1];for(t=0,r=0,a=d[n][0]-d[n-1][0];t<c;++t){for(i=0,s=(e[t][n][1]-e[t][n-1][1])/(2*a);i<t;++i)s+=(e[i][n][1]-e[i][n-1][1])/a;r+=s*e[t][n][1]}p[n]=l-=o?r/o*a:0,l<u&&(u=l)}for(n=0;n<h;++n)p[n]-=u;return p},expand:function(e){var t,n,i,o=e.length,r=e[0].length,s=1/o,a=[];for(n=0;n<r;++n){for(t=0,i=0;t<o;t++)i+=e[t][n][1];if(i)for(t=0;t<o;t++)e[t][n][1]/=i;else for(t=0;t<o;t++)e[t][n][1]=s}for(n=0;n<r;++n)a[n]=0;return a},zero:$t});t.layout.histogram=function(){function e(e,s){for(var a,l,u=[],c=e.map(i,this),d=o.call(this,c,s),h=r.call(this,d,c,s),s=-1,p=c.length,m=h.length-1,f=n?1:1/p;++s<m;)a=u[s]=[],a.dx=h[s+1]-(a.x=h[s]),a.y=0;if(m>0)for(s=-1;++s<p;)(l=c[s])>=d[0]&&l<=d[1]&&(a=u[t.bisect(h,l,1,m)-1],a.y+=f,a.push(e[s]));return u}var n=!0,i=Number,o=sn,r=on;return e.value=function(t){return arguments.length?(i=t,e):i},e.range=function(t){return arguments.length?(o=a(t),e):o},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return rn(e,t)}:a(t),e):r},e.frequency=function(t){return arguments.length?(n=!!t,e):n},e},t.layout.hierarchy=function(){function e(t,s,a){var l=o.call(n,t,s),u=lr?t:{data:t};if(u.depth=s,a.push(u),l&&(c=l.length)){for(var c,d,h=-1,p=u.children=[],m=0,f=s+1;++h<c;)d=e(l[h],f,a),d.parent=u,p.push(d),m+=d.value;i&&p.sort(i),r&&(u.value=m)}else r&&(u.value=+r.call(n,t,s)||0);return u}function t(e,i){var o=e.children,s=0;if(o&&(a=o.length))for(var a,l=-1,u=i+1;++l<a;)s+=t(o[l],u);else r&&(s=+r.call(n,lr?e:e.data,i)||0);return r&&(e.value=s),s}function n(t){var n=[];return e(t,0,n),n}var i=cn,o=ln,r=un;return n.sort=function(e){return arguments.length?(i=e,n):i},n.children=function(e){return arguments.length?(o=e,n):o},n.value=function(e){return arguments.length?(r=e,n):r},n.revalue=function(e){return t(e,0),e},n};var lr=!1;t.layout.pack=function(){function e(e,t){var r=n.call(this,e,t),s=r[0];s.x=0,s.y=0,Rn(s,(function(e){e.r=Math.sqrt(e.value)})),Rn(s,_n);var a=o[0],l=o[1],u=Math.max(2*s.r/a,2*s.r/l);if(i>0){var c=i*u/2;Rn(s,(function(e){e.r+=c})),Rn(s,_n),Rn(s,(function(e){e.r-=c})),u=Math.max(2*s.r/a,2*s.r/l)}return yn(s,a/2,l/2,1/u),r}var n=t.layout.hierarchy().sort(hn),i=0,o=[1,1];return e.size=function(t){return arguments.length?(o=t,e):o},e.padding=function(t){return arguments.length?(i=+t,e):i},an(e,n)},t.layout.cluster=function(){function e(e,t){var r,s=n.call(this,e,t),a=s[0],l=0;Rn(a,(function(e){var t=e.children;t&&t.length?(e.x=An(t),e.y=bn(t)):(e.x=r?l+=i(e,r):0,e.y=0,r=e)}));var u=Tn(a),c=En(a),d=u.x-i(u,c)/2,h=c.x+i(c,u)/2;return Rn(a,(function(e){e.x=(e.x-d)/(h-d)*o[0],e.y=(1-(a.y?e.y/a.y:1))*o[1]})),s}var n=t.layout.hierarchy().sort(null).value(null),i=wn,o=[1,1];return e.separation=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(o=t,e):o},an(e,n)},t.layout.tree=function(){function e(e,t){function r(e,t){var n=e.children,o=e._tree;if(n&&(s=n.length)){for(var s,l,u,c=n[0],d=c,h=-1;++h<s;)u=n[h],r(u,l),d=a(u,l,d),l=u;Ln(e);var p=.5*(c._tree.prelim+u._tree.prelim);t?(o.prelim=t._tree.prelim+i(e,t),o.mod=o.prelim-p):o.prelim=p}else t&&(o.prelim=t._tree.prelim+i(e,t))}function s(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(i=n.length)){var i,o=-1;for(t+=e._tree.mod;++o<i;)s(n[o],t)}}function a(e,t,n){if(t){for(var o,r=e,s=e,a=t,l=e.parent.children[0],u=r._tree.mod,c=s._tree.mod,d=a._tree.mod,h=l._tree.mod;a=In(a),r=On(r),a&&r;)l=On(l),s=In(s),s._tree.ancestor=e,o=a._tree.prelim+d-r._tree.prelim-u+i(a,r),o>0&&(Nn(kn(a,e,n),e,o),u+=o,c+=o),d+=a._tree.mod,u+=r._tree.mod,h+=l._tree.mod,c+=s._tree.mod;a&&!In(s)&&(s._tree.thread=a,s._tree.mod+=d-c),r&&!On(l)&&(l._tree.thread=r,l._tree.mod+=u-h,n=e)}return n}var l=n.call(this,e,t),u=l[0];Rn(u,(function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}})),r(u),s(u,-u._tree.prelim);var c=Sn(u,Cn),d=Sn(u,jn),h=Sn(u,Dn),p=c.x-i(c,d)/2,m=d.x+i(d,c)/2,f=h.depth||1;return Rn(u,(function(e){e.x=(e.x-p)/(m-p)*o[0],e.y=e.depth/f*o[1],delete e._tree})),l}var n=t.layout.hierarchy().sort(null).value(null),i=wn,o=[1,1];return e.separation=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(o=t,e):o},an(e,n)},t.layout.treemap=function(){function e(e,t){for(var n,i,o=-1,r=e.length;++o<r;)i=(n=e[o]).value*(t<0?0:t),n.area=isNaN(i)||i<=0?0:i}function n(t){var i=t.children;if(i&&i.length){var s,a,l,u=h(t),c=[],d=i.slice(),p=1/0,m=Math.min(u.dx,u.dy);for(e(d,u.dx*u.dy/t.value),c.area=0;(l=d.length)>0;)c.push(s=d[l-1]),c.area+=s.area,(a=o(c,m))<=p?(d.pop(),p=a):(c.area-=c.pop().area,r(c,m,u,!1),m=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,m,u,!0),c.length=c.area=0),i.forEach(n)}}function i(t){var n=t.children;if(n&&n.length){var o,s=h(t),a=n.slice(),l=[];for(e(a,s.dx*s.dy/t.value),l.area=0;o=a.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?s.dx:s.dy,s,!a.length),l.length=l.area=0);n.forEach(i)}}function o(e,t){for(var n,i=e.area,o=0,r=1/0,s=-1,a=e.length;++s<a;)(n=e[s].area)&&(n<r&&(r=n),n>o&&(o=n));return i*=i,t*=t,i?Math.max(t*o*m/i,i/(t*r*m)):1/0}function r(e,t,n,i){var o,r=-1,s=e.length,a=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((i||c>n.dy)&&(c=n.dy);++r<s;)o=e[r],o.x=a,o.y=l,o.dy=c,a+=o.dx=Math.min(n.x+n.dx-a,c?u(o.area/c):0);o.z=!0,o.dx+=n.x+n.dx-a,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++r<s;)o=e[r],o.x=a,o.y=l,o.dx=c,l+=o.dy=Math.min(n.y+n.dy-l,c?u(o.area/c):0);o.z=!1,o.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function s(t){var o=a||l(t),r=o[0];return r.x=0,r.y=0,r.dx=c[0],r.dy=c[1],a&&l.revalue(r),e([r],r.dx*r.dy/r.value),(a?i:n)(r),p&&(a=o),o}var a,l=t.layout.hierarchy(),u=Math.round,c=[1,1],d=null,h=Pn,p=!1,m=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(c=e,s):c},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Pn(t):xn(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return xn(t,e)}if(!arguments.length)return d;var i;return h=null==(d=e)?Pn:"function"==(i=typeof e)?t:"number"===i?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(u=e?Math.round:Number,s):u!=Number},s.sticky=function(e){return arguments.length?(p=e,a=null,s):p},s.ratio=function(e){return arguments.length?(m=e,s):m},an(s,l)},t.csv=Vn(",","text/csv"),t.tsv=Vn("\t","text/tab-separated-values"),t.geo={};var ur=Math.PI/180;t.geo.azimuthal=function(){function e(e){var t,i=e[0]*ur-n,u=e[1]*ur,c=Math.cos(i),d=Math.sin(i),h=Math.cos(u),p=Math.sin(u),m="orthographic"!==s?r*p+o*h*c:null,f="stereographic"===s?1/(1+m):"gnomonic"===s?1/m:"equidistant"===s?(t=Math.acos(m),t?t/Math.sin(t):0):"equalarea"===s?Math.sqrt(2/(1+m)):1,_=f*h*d,g=f*(r*h*c-o*p);return[a*_+l[0],a*g+l[1]]}var t,n,i,o,r,s="orthographic",a=200,l=[480,250];return e.invert=function(e){var t=(e[0]-l[0])/a,i=(e[1]-l[1])/a,u=Math.sqrt(t*t+i*i),c="stereographic"===s?2*Math.atan(u):"gnomonic"===s?Math.atan(u):"equidistant"===s?u:"equalarea"===s?2*Math.asin(.5*u):Math.asin(u),d=Math.sin(c),h=Math.cos(c);return[(n+Math.atan2(t*d,u*o*h+i*r*d))/ur,Math.asin(h*r-(u?i*d*o/u:0))/ur]},e.mode=function(t){return arguments.length?(s=t+"",e):s},e.origin=function(s){return arguments.length?(t=s,n=t[0]*ur,i=t[1]*ur,o=Math.cos(i),r=Math.sin(i),e):t},e.scale=function(t){return arguments.length?(a=+t,e):a},e.translate=function(t){return arguments.length?(l=[+t[0],+t[1]],e):l},e.origin([0,0])},t.geo.albers=function(){function e(e){var t=i*(ur*e[0]-n),s=Math.sqrt(o-2*i*Math.sin(ur*e[1]))/i;return[l*s*Math.sin(t)+u[0],l*(s*Math.cos(t)-r)+u[1]]}function t(){var t=ur*a[0],l=ur*a[1],u=ur*s[1],c=Math.sin(t),d=Math.cos(t);return n=ur*s[0],i=.5*(c+Math.sin(l)),o=d*d+2*i*c,r=Math.sqrt(o-2*i*Math.sin(u))/i,e}var n,i,o,r,s=[-98,38],a=[29.5,45.5],l=1e3,u=[480,250];return e.invert=function(e){var t=(e[0]-u[0])/l,s=(e[1]-u[1])/l,a=r+s,c=Math.atan2(t,a),d=Math.sqrt(t*t+a*a);return[(n+c/i)/ur,Math.asin((o-d*d*i*i)/(2*i))/ur]},e.origin=function(e){return arguments.length?(s=[+e[0],+e[1]],t()):s},e.parallels=function(e){return arguments.length?(a=[+e[0],+e[1]],t()):a},e.scale=function(t){return arguments.length?(l=+t,e):l},e.translate=function(t){return arguments.length?(u=[+t[0],+t[1]],e):u},t()},t.geo.albersUsa=function(){function e(e){var t=e[0],s=e[1];return(s>50?i:t<-140?o:s<21?r:n)(e)}var n=t.geo.albers(),i=t.geo.albers().origin([-160,60]).parallels([55,65]),o=t.geo.albers().origin([-160,20]).parallels([8,18]),r=t.geo.albers().origin([-60,10]).parallels([8,18]);return e.scale=function(t){return arguments.length?(n.scale(t),i.scale(.6*t),o.scale(t),r.scale(1.5*t),e.translate(n.translate())):n.scale()},e.translate=function(t){if(!arguments.length)return n.translate();var s=n.scale()/1e3,a=t[0],l=t[1];return n.translate(t),i.translate([a-400*s,l+170*s]),o.translate([a-190*s,l+200*s]),r.translate([a+580*s,l+430*s]),e},e.scale(n.scale())},t.geo.bonne=function(){function e(e){var a=e[0]*ur-t,l=e[1]*ur-n;if(i){var u=o+i-l,c=a*Math.cos(l)/u;a=u*Math.sin(c),l=u*Math.cos(c)-o}else a*=Math.cos(l),l*=-1;return[r*a+s[0],r*l+s[1]]}var t,n,i,o,r=200,s=[480,250];return e.invert=function(e){var n=(e[0]-s[0])/r,a=(e[1]-s[1])/r;if(i){var l=o+a,u=Math.sqrt(n*n+l*l);a=o+i-u,n=t+u*Math.atan2(n,l)/Math.cos(a)}else a*=-1,n/=Math.cos(a);return[n/ur,a/ur]},e.parallel=function(t){return arguments.length?(o=1/Math.tan(i=t*ur),e):i/ur},e.origin=function(i){return arguments.length?(t=i[0]*ur,n=i[1]*ur,e):[t/ur,n/ur]},e.scale=function(t){return arguments.length?(r=+t,e):r},e.translate=function(t){return arguments.length?(s=[+t[0],+t[1]],e):s},e.origin([0,0]).parallel(45)},t.geo.equirectangular=function(){function e(e){var i=e[0]/360,o=-e[1]/360;return[t*i+n[0],t*o+n[1]]}var t=500,n=[480,250];return e.invert=function(e){return[(e[0]-n[0])/t*360,(e[1]-n[1])/t*-360]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e},t.geo.mercator=function(){function e(e){var i=e[0]/360,o=-Math.log(Math.tan(Math.PI/4+e[1]*ur/2))/ur/360;return[t*i+n[0],t*Math.max(-.5,Math.min(.5,o))+n[1]]}var t=500,n=[480,250];return e.invert=function(e){var i=(e[0]-n[0])/t,o=(e[1]-n[1])/t;return[360*i,2*Math.atan(Math.exp(-360*o*ur))/ur-90]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e},t.geo.path=function(){function e(e,t){"function"==typeof s&&(a=Bn(s.apply(this,arguments))),c(e);var n=u.length?u.join(""):null;return u=[],n}function n(e){return l(e).join(",")}function i(e){for(var t=r(e[0]),n=0,i=e.length;++n<i;)t-=r(e[n]);return t}function o(e){for(var n=t.geom.polygon(e[0].map(l)),i=n.area(),o=n.centroid(i<0?(i*=-1,1):-1),r=o[0],s=o[1],a=i,u=0,c=e.length;++u<c;)n=t.geom.polygon(e[u].map(l)),i=n.area(),o=n.centroid(i<0?(i*=-1,1):-1),r-=o[0],s-=o[1],a-=i;return[r,s,6*a]}function r(e){return Math.abs(t.geom.polygon(e.map(l)).area())}var s=4.5,a=Bn(s),l=t.geo.albersUsa(),u=[],c=Hn({FeatureCollection:function(e){for(var t=e.features,n=-1,i=t.length;++n<i;)u.push(c(t[n].geometry))},Feature:function(e){c(e.geometry)},Point:function(e){u.push("M",n(e.coordinates),a)},MultiPoint:function(e){for(var t=e.coordinates,i=-1,o=t.length;++i<o;)u.push("M",n(t[i]),a)},LineString:function(e){var t=e.coordinates,i=-1,o=t.length;for(u.push("M");++i<o;)u.push(n(t[i]),"L");u.pop()},MultiLineString:function(e){for(var t,i,o,r=e.coordinates,s=-1,a=r.length;++s<a;){for(t=r[s],i=-1,o=t.length,u.push("M");++i<o;)u.push(n(t[i]),"L");u.pop()}},Polygon:function(e){for(var t,i,o,r=e.coordinates,s=-1,a=r.length;++s<a;)if(t=r[s],i=-1,(o=t.length-1)>0){for(u.push("M");++i<o;)u.push(n(t[i]),"L");u[u.length-1]="Z"}},MultiPolygon:function(e){for(var t,i,o,r,s,a,l=e.coordinates,c=-1,d=l.length;++c<d;)for(t=l[c],i=-1,o=t.length;++i<o;)if(r=t[i],s=-1,(a=r.length-1)>0){for(u.push("M");++s<a;)u.push(n(r[s]),"L");u[u.length-1]="Z"}},GeometryCollection:function(e){for(var t=e.geometries,n=-1,i=t.length;++n<i;)u.push(c(t[n]))}}),d=e.area=Hn({FeatureCollection:function(e){for(var t=0,n=e.features,i=-1,o=n.length;++i<o;)t+=d(n[i]);return t},Feature:function(e){return d(e.geometry)},Polygon:function(e){return i(e.coordinates)},MultiPolygon:function(e){for(var t=0,n=e.coordinates,o=-1,r=n.length;++o<r;)t+=i(n[o]);return t},GeometryCollection:function(e){for(var t=0,n=e.geometries,i=-1,o=n.length;++i<o;)t+=d(n[i]);return t}},0),h=e.centroid=Hn({Feature:function(e){return h(e.geometry)},Polygon:function(e){var t=o(e.coordinates);return[t[0]/t[2],t[1]/t[2]]},MultiPolygon:function(e){for(var t,n=e.coordinates,i=0,r=0,s=0,a=-1,l=n.length;++a<l;)t=o(n[a]),i+=t[0],r+=t[1],s+=t[2];return[i/s,r/s]}});return e.projection=function(t){return l=t,e},e.pointRadius=function(t){return"function"==typeof t?s=t:(s=+t,a=Bn(s)),e},e},t.geo.bounds=function(e){var t=1/0,n=1/0,i=-1/0,o=-1/0;return Wn(e,(function(e,r){e<t&&(t=e),e>i&&(i=e),r<n&&(n=r),r>o&&(o=r)})),[[t,n],[i,o]]};var cr={Feature:Fn,FeatureCollection:Un,GeometryCollection:Gn,LineString:Yn,MultiLineString:zn,MultiPoint:Yn,MultiPolygon:qn,Point:Kn,Polygon:Zn};t.geo.circle=function(){function e(){}function n(e){return u.distance(e)<l}function i(e){for(var t,n,i,o,s,a=-1,c=e.length,d=[];++a<c;)s=u.distance(i=e[a]),s<l?(n&&d.push($n(n,i)((o-l)/(o-s))),d.push(i),t=n=null):(n=i,!t&&d.length&&(d.push($n(d[d.length-1],n)((l-o)/(s-o))),t=n)),o=s;return t=e[0],n=d[0],!n||i[0]!==t[0]||i[1]!==t[1]||i[0]===n[0]&&i[1]===n[1]||d.push(n),r(d)}function r(e){for(var t,n,i,o=0,r=e.length,s=r?[e[0]]:e,a=u.source();++o<r;)for(i=u.source(e[o-1])(e[o]).coordinates,t=0,n=i.length;++t<n;)s.push(i[t]);return u.source(a),s}var s=[0,0],a=89.99,l=a*ur,u=t.geo.greatArc().source(s).target(o);e.clip=function(e){return"function"==typeof s&&u.source(s.apply(this,arguments)),c(e)||null};var c=Hn({FeatureCollection:function(e){var t=e.features.map(c).filter(o);return t&&(e=Object.create(e),e.features=t,e)},Feature:function(e){var t=c(e.geometry);return t&&(e=Object.create(e),e.geometry=t,e)},Point:function(e){return n(e.coordinates)&&e},MultiPoint:function(e){var t=e.coordinates.filter(n);return t.length&&{type:e.type,coordinates:t}},LineString:function(e){var t=i(e.coordinates);return t.length&&(e=Object.create(e),e.coordinates=t,e)},MultiLineString:function(e){var t=e.coordinates.map(i).filter((function(e){return e.length}));return t.length&&(e=Object.create(e),e.coordinates=t,e)},Polygon:function(e){var t=e.coordinates.map(i);return t[0].length&&(e=Object.create(e),e.coordinates=t,e)},MultiPolygon:function(e){var t=e.coordinates.map((function(e){return e.map(i)})).filter((function(e){return e[0].length}));return t.length&&(e=Object.create(e),e.coordinates=t,e)},GeometryCollection:function(e){var t=e.geometries.map(c).filter(o);return t.length&&(e=Object.create(e),e.geometries=t,e)}});return e.origin=function(t){return arguments.length?(s=t,"function"!=typeof s&&u.source(s),e):s},e.angle=function(t){return arguments.length?(l=(a=+t)*ur,e):a},t.rebind(e,u,"precision")},t.geo.greatArc=function(){function e(){for(var i=e.distance.apply(this,arguments),o=0,a=r/i,l=[t];(o+=a)<1;)l.push(s(o));return l.push(n),{type:"LineString",coordinates:l}}var t,n,i=Xn,o=Jn,r=6*ur,s=Qn();return e.distance=function(){return"function"==typeof i&&s.source(t=i.apply(this,arguments)),"function"==typeof o&&s.target(n=o.apply(this,arguments)),s.distance()},e.source=function(n){return arguments.length?(i=n,"function"!=typeof i&&s.source(t=i),e):i},e.target=function(t){return arguments.length?(o=t,"function"!=typeof o&&s.target(n=o),e):o},e.precision=function(t){return arguments.length?(r=t*ur,e):r/ur},e},t.geo.greatCircle=t.geo.circle,t.geom={},t.geom.contour=function(e,t){var n=t||ei(e),i=[],o=n[0],r=n[1],s=0,a=0,l=NaN,u=NaN,c=0;do{c=0,e(o-1,r-1)&&(c+=1),e(o,r-1)&&(c+=2),e(o-1,r)&&(c+=4),e(o,r)&&(c+=8),6===c?(s=-1===u?-1:1,a=0):9===c?(s=0,a=1===l?-1:1):(s=dr[c],a=hr[c]),s!=l&&a!=u&&(i.push([o,r]),l=s,u=a),o+=s,r+=a}while(n[0]!=o||n[1]!=r);return i};var dr=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],hr=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];t.geom.hull=function(e){if(e.length<3)return[];var t,n,i,o,r,s,a,l,u,c,d=e.length,h=d-1,p=[],m=[],f=0;for(t=1;t<d;++t)e[t][1]<e[f][1]?f=t:e[t][1]==e[f][1]&&(f=e[t][0]<e[f][0]?t:f);for(t=0;t<d;++t)t!==f&&(o=e[t][1]-e[f][1],i=e[t][0]-e[f][0],p.push({angle:Math.atan2(o,i),index:t}));for(p.sort((function(e,t){return e.angle-t.angle})),u=p[0].angle,l=p[0].index,a=0,t=1;t<h;++t)n=p[t].index,u==p[t].angle?(i=e[l][0]-e[f][0],o=e[l][1]-e[f][1],r=e[n][0]-e[f][0],s=e[n][1]-e[f][1],i*i+o*o>=r*r+s*s?p[t].index=-1:(p[a].index=-1,u=p[t].angle,a=t,l=n)):(u=p[t].angle,a=t,l=n);for(m.push(f),t=0,n=0;t<2;++n)-1!==p[n].index&&(m.push(p[n].index),t++);for(c=m.length;n<h;++n)if(-1!==p[n].index){for(;!ti(m[c-2],m[c-1],p[n].index,e);)--c;m[c++]=p[n].index}var _=[];for(t=0;t<c;++t)_.push(e[m[t]]);return _},t.geom.polygon=function(e){return e.area=function(){for(var t=0,n=e.length,i=e[n-1][0]*e[0][1],o=e[n-1][1]*e[0][0];++t<n;)i+=e[t-1][0]*e[t][1],o+=e[t-1][1]*e[t][0];return.5*(o-i)},e.centroid=function(t){var n,i,o=-1,r=e.length,s=0,a=0,l=e[r-1];for(arguments.length||(t=-1/(6*e.area()));++o<r;)n=l,l=e[o],i=n[0]*l[1]-l[0]*n[1],s+=(n[0]+l[0])*i,a+=(n[1]+l[1])*i;return[s*t,a*t]},e.clip=function(t){for(var n,i,o,r,s,a,l=-1,u=e.length,c=e[u-1];++l<u;){for(n=t.slice(),t.length=0,r=e[l],s=n[(o=n.length)-1],i=-1;++i<o;)a=n[i],ni(a,c,r)?(ni(s,c,r)||t.push(ii(s,a,c,r)),t.push(a)):ni(s,c,r)&&t.push(ii(s,a,c,r)),s=a;c=r}return t},e},t.geom.voronoi=function(e){var t=e.map((function(){return[]}));return oi(e,(function(e){var n,i,o,r,s,a;1===e.a&&e.b>=0?(n=e.ep.r,i=e.ep.l):(n=e.ep.l,i=e.ep.r),1===e.a?(s=n?n.y:-1e6,o=e.c-e.b*s,a=i?i.y:1e6,r=e.c-e.b*a):(o=n?n.x:-1e6,s=e.c-e.a*o,r=i?i.x:1e6,a=e.c-e.a*r);var l=[o,s],u=[r,a];t[e.region.l.index].push(l,u),t[e.region.r.index].push(l,u)})),t.map((function(t,n){var i=e[n][0],o=e[n][1];return t.forEach((function(e){e.angle=Math.atan2(e[0]-i,e[1]-o)})),t.sort((function(e,t){return e.angle-t.angle})).filter((function(e,n){return!n||e.angle-t[n-1].angle>1e-10}))}))};var pr={l:"r",r:"l"};t.geom.delaunay=function(e){var t=e.map((function(){return[]})),n=[];return oi(e,(function(n){t[n.region.l.index].push(e[n.region.r.index])})),t.forEach((function(t,i){var o=e[i],r=o[0],s=o[1];t.forEach((function(e){e.angle=Math.atan2(e[0]-r,e[1]-s)})),t.sort((function(e,t){return e.angle-t.angle}));for(var a=0,l=t.length-1;a<l;a++)n.push([o,t[a],t[a+1]])})),n},t.geom.quadtree=function(e,t,n,i,o){function r(e,t,n,i,o,r){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf){var a=e.point;a?Math.abs(a.x-t.x)+Math.abs(a.y-t.y)<.01?s(e,t,n,i,o,r):(e.point=null,s(e,a,n,i,o,r),s(e,t,n,i,o,r)):e.point=t}else s(e,t,n,i,o,r)}function s(e,t,n,i,o,s){var a=.5*(n+o),l=.5*(i+s),u=t.x>=a,c=t.y>=l,d=(c<<1)+u;e.leaf=!1,e=e.nodes[d]||(e.nodes[d]=ri()),u?n=a:o=a,c?i=l:s=l,r(e,t,n,i,o,s)}var a,l=-1,u=e.length;if(u&&isNaN(e[0].x)&&(e=e.map(ai)),arguments.length<5)if(3===arguments.length)o=i=n,n=t;else{for(t=n=1/0,i=o=-1/0;++l<u;)a=e[l],a.x<t&&(t=a.x),a.y<n&&(n=a.y),a.x>i&&(i=a.x),a.y>o&&(o=a.y);var c=i-t,d=o-n;c>d?o=n+c:i=t+d}var h=ri();return h.add=function(e){r(h,e,t,n,i,o)},h.visit=function(e){si(e,h,t,n,i,o)},e.forEach(h.add),h},t.time={};var mr=Date,fr=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];li.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){_r.setUTCDate.apply(this._,arguments)},setDay:function(){_r.setUTCDay.apply(this._,arguments)},setFullYear:function(){_r.setUTCFullYear.apply(this._,arguments)},setHours:function(){_r.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){_r.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){_r.setUTCMinutes.apply(this._,arguments)},setMonth:function(){_r.setUTCMonth.apply(this._,arguments)},setSeconds:function(){_r.setUTCSeconds.apply(this._,arguments)},setTime:function(){_r.setTime.apply(this._,arguments)}};var _r=Date.prototype,gr=fr,vr=gr.map(ui),yr=["January","February","March","April","May","June","July","August","September","October","November","December"],Mr=yr.map(ui);t.time.format=function(e){function t(t){for(var i,o,r=[],s=-1,a=0;++s<n;)37==e.charCodeAt(s)&&(r.push(e.substring(a,s),(o=Dr[i=e.charAt(++s)])?o(t):i),a=s+1);return r.push(e.substring(a,s)),r.join("")}var n=e.length;return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(ci(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=new mr;return i.setFullYear(n.y,n.m,n.d),i.setHours(n.H,n.M,n.S,n.L),i},t.toString=function(){return e},t};var br=t.format("02d"),Ar=t.format("03d"),Tr=t.format("04d"),Er=t.format("2d"),wr=di(gr),Or=di(vr),Ir=di(yr),Sr=hi(yr),jr=di(Mr),Cr=hi(Mr),Dr={a:function(e){return vr[e.getDay()]},A:function(e){return gr[e.getDay()]},b:function(e){return Mr[e.getMonth()]},B:function(e){return yr[e.getMonth()]},c:t.time.format("%a %b %e %H:%M:%S %Y"),d:function(e){return br(e.getDate())},e:function(e){return Er(e.getDate())},H:function(e){return br(e.getHours())},I:function(e){return br(e.getHours()%12||12)},j:function(e){return Ar(1+t.time.dayOfYear(e))},L:function(e){return Ar(e.getMilliseconds())},m:function(e){return br(e.getMonth()+1)},M:function(e){return br(e.getMinutes())},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e){return br(e.getSeconds())},U:function(e){return br(t.time.sundayOfYear(e))},w:function(e){return e.getDay()},W:function(e){return br(t.time.mondayOfYear(e))},x:t.time.format("%m/%d/%y"),X:t.time.format("%H:%M:%S"),y:function(e){return br(e.getFullYear()%100)},Y:function(e){return Tr(e.getFullYear()%1e4)},Z:Ci,"%":function(e){return"%"}},Rr={a:pi,A:mi,b:fi,B:_i,c:gi,d:Ei,e:Ei,H:wi,I:wi,L:Si,m:Ti,M:Oi,p:ji,S:Ii,x:vi,X:yi,y:bi,Y:Mi},Lr=/^\s*\d+/,Nr=t.map({am:0,pm:1});t.time.format.utc=function(e){function n(e){try{mr=li;var t=new mr;return t._=e,i(t)}finally{mr=Date}}var i=t.time.format(e);return n.parse=function(e){try{mr=li;var t=i.parse(e);return t&&t._}finally{mr=Date}},n.toString=i.toString,n};var kr=t.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");t.time.format.iso=Date.prototype.toISOString?Di:kr,Di.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Di.toString=kr.toString,t.time.second=Ri((function(e){return new mr(1e3*Math.floor(e/1e3))}),(function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))}),(function(e){return e.getSeconds()})),t.time.seconds=t.time.second.range,t.time.seconds.utc=t.time.second.utc.range,t.time.minute=Ri((function(e){return new mr(6e4*Math.floor(e/6e4))}),(function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))}),(function(e){return e.getMinutes()})),t.time.minutes=t.time.minute.range,t.time.minutes.utc=t.time.minute.utc.range,t.time.hour=Ri((function(e){var t=e.getTimezoneOffset()/60;return new mr(36e5*(Math.floor(e/36e5-t)+t))}),(function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))}),(function(e){return e.getHours()})),t.time.hours=t.time.hour.range,t.time.hours.utc=t.time.hour.utc.range,t.time.day=Ri((function(e){var t=new mr(1970,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e){return e.getDate()-1})),t.time.days=t.time.day.range,t.time.days.utc=t.time.day.utc.range,t.time.dayOfYear=function(e){var n=t.time.year(e);return Math.floor((e-n-6e4*(e.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},fr.forEach((function(e,n){e=e.toLowerCase(),n=7-n;var i=t.time[e]=Ri((function(e){return(e=t.time.day(e)).setDate(e.getDate()-(e.getDay()+n)%7),e}),(function(e,t){e.setDate(e.getDate()+7*Math.floor(t))}),(function(e){var i=t.time.year(e).getDay();return Math.floor((t.time.dayOfYear(e)+(i+n)%7)/7)-(i!==n)}));t.time[e+"s"]=i.range,t.time[e+"s"].utc=i.utc.range,t.time[e+"OfYear"]=function(e){var i=t.time.year(e).getDay();return Math.floor((t.time.dayOfYear(e)+(i+n)%7)/7)}})),t.time.week=t.time.sunday,t.time.weeks=t.time.sunday.range,t.time.weeks.utc=t.time.sunday.utc.range,t.time.weekOfYear=t.time.sundayOfYear,t.time.month=Ri((function(e){return e=t.time.day(e),e.setDate(1),e}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e){return e.getMonth()})),t.time.months=t.time.month.range,t.time.months.utc=t.time.month.utc.range,t.time.year=Ri((function(e){return e=t.time.day(e),e.setMonth(0,1),e}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e){return e.getFullYear()})),t.time.years=t.time.year.range,t.time.years.utc=t.time.year.utc.range;var Pr=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],xr=[[t.time.second,1],[t.time.second,5],[t.time.second,15],[t.time.second,30],[t.time.minute,1],[t.time.minute,5],[t.time.minute,15],[t.time.minute,30],[t.time.hour,1],[t.time.hour,3],[t.time.hour,6],[t.time.hour,12],[t.time.day,1],[t.time.day,2],[t.time.week,1],[t.time.month,1],[t.time.month,3],[t.time.year,1]],Vr=[[t.time.format("%Y"),function(e){return!0}],[t.time.format("%B"),function(e){return e.getMonth()}],[t.time.format("%b %d"),function(e){return 1!=e.getDate()}],[t.time.format("%a %d"),function(e){return e.getDay()&&1!=e.getDate()}],[t.time.format("%I %p"),function(e){return e.getHours()}],[t.time.format("%I:%M"),function(e){return e.getMinutes()}],[t.time.format(":%S"),function(e){return e.getSeconds()}],[t.time.format(".%L"),function(e){return e.getMilliseconds()}]],Hr=t.scale.linear(),Br=xi(Vr);xr.year=function(e,t){return Hr.domain(e.map(Hi)).ticks(t).map(Vi)},t.time.scale=function(){return Ni(t.scale.linear(),xr,Br)};var Wr=xr.map((function(e){return[e[0].utc,e[1]]})),Fr=[[t.time.format.utc("%Y"),function(e){return!0}],[t.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[t.time.format.utc("%b %d"),function(e){return 1!=e.getUTCDate()}],[t.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],[t.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[t.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[t.time.format.utc(":%S"),function(e){return e.getUTCSeconds()}],[t.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()}]],Ur=xi(Fr);Wr.year=function(e,t){return Hr.domain(e.map(Wi)).ticks(t).map(Bi)},t.time.scale.utc=function(){return Ni(t.scale.linear(),Wr,Ur)}})(),t})),function(){"use strict";function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t,n,i){for(var o=-1,r=null==e?0:e.length;++o<r;){var s=e[o];t(i,s,n(s),e)}return i}function o(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function r(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function s(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function a(e,t){for(var n=-1,i=null==e?0:e.length,o=0,r=[];++n<i;){var s=e[n];t(s,n,e)&&(r[o++]=s)}return r}function l(e,t){return!!(null==e?0:e.length)&&y(e,t,0)>-1}function u(e,t,n){for(var i=-1,o=null==e?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}function c(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}function d(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}function h(e,t,n,i){var o=-1,r=null==e?0:e.length;for(i&&r&&(n=e[++o]);++o<r;)n=t(n,e[o],o,e);return n}function p(e,t,n,i){var o=null==e?0:e.length;for(i&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function m(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function f(e){return e.split("")}function _(e){return e.match(kt)||[]}function g(e,t,n){var i;return n(e,(function(e,n,o){if(t(e,n,o))return i=n,!1})),i}function v(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function y(e,t,n){return t===t?z(e,t,n):v(e,b,n)}function M(e,t,n,i){for(var o=n-1,r=e.length;++o<r;)if(i(e[o],t))return o;return-1}function b(e){return e!==e}function A(e,t){var n=null==e?0:e.length;return n?I(e,t)/n:Ce}function T(e){return function(t){return null==t?$:t[e]}}function E(e){return function(t){return null==e?$:e[t]}}function w(e,t,n,i,o){return o(e,(function(e,o,r){n=i?(i=!1,e):t(n,e,o,r)})),n}function O(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function I(e,t){for(var n,i=-1,o=e.length;++i<o;){var r=t(e[i]);r!==$&&(n=n===$?r:n+r)}return n}function S(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function j(e,t){return c(t,(function(t){return[t,e[t]]}))}function C(e){return function(t){
return e(t)}}function D(e,t){return c(t,(function(t){return e[t]}))}function R(e,t){return e.has(t)}function L(e,t){for(var n=-1,i=e.length;++n<i&&y(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length;n--&&y(t,e[n],0)>-1;);return n}function k(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}function P(e){return"\\"+Tn[e]}function x(e,t){return null==e?$:e[t]}function V(e){return mn.test(e)}function H(e){return fn.test(e)}function B(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function W(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function F(e,t){return function(n){return e(t(n))}}function U(e,t){for(var n=-1,i=e.length,o=0,r=[];++n<i;){var s=e[n];s!==t&&s!==re||(e[n]=re,r[o++]=n)}return r}function G(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Y(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function z(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}function q(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}function K(e){return V(e)?X(e):Bn(e)}function Z(e){return V(e)?J(e):f(e)}function X(e){for(var t=hn.lastIndex=0;hn.test(e);)++t;return t}function J(e){return e.match(hn)||[]}function Q(e){return e.match(pn)||[]}var $,ee=200,te="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ne="Expected a function",ie="__lodash_hash_undefined__",oe=500,re="__lodash_placeholder__",se=1,ae=2,le=4,ue=1,ce=2,de=1,he=2,pe=4,me=8,fe=16,_e=32,ge=64,ve=128,ye=256,Me=512,be=30,Ae="...",Te=800,Ee=16,we=1,Oe=2,Ie=1/0,Se=9007199254740991,je=1.7976931348623157e308,Ce=NaN,De=4294967295,Re=De-1,Le=De>>>1,Ne=[["ary",ve],["bind",de],["bindKey",he],["curry",me],["curryRight",fe],["flip",Me],["partial",_e],["partialRight",ge],["rearg",ye]],ke="[object Arguments]",Pe="[object Array]",xe="[object AsyncFunction]",Ve="[object Boolean]",He="[object Date]",Be="[object DOMException]",We="[object Error]",Fe="[object Function]",Ue="[object GeneratorFunction]",Ge="[object Map]",Ye="[object Number]",ze="[object Null]",qe="[object Object]",Ke="[object Proxy]",Ze="[object RegExp]",Xe="[object Set]",Je="[object String]",Qe="[object Symbol]",$e="[object Undefined]",et="[object WeakMap]",tt="[object WeakSet]",nt="[object ArrayBuffer]",it="[object DataView]",ot="[object Float32Array]",rt="[object Float64Array]",st="[object Int8Array]",at="[object Int16Array]",lt="[object Int32Array]",ut="[object Uint8Array]",ct="[object Uint8ClampedArray]",dt="[object Uint16Array]",ht="[object Uint32Array]",pt=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_t=/&(?:amp|lt|gt|quot|#39);/g,gt=/[&<>"']/g,vt=RegExp(_t.source),yt=RegExp(gt.source),Mt=/<%-([\s\S]+?)%>/g,bt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,wt=/^\./,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,St=RegExp(It.source),jt=/^\s+|\s+$/g,Ct=/^\s+/,Dt=/\s+$/,Rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lt=/\{\n\/\* \[wrapped with (.+)\] \*/,Nt=/,? & /,kt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pt=/\\(\\)?/g,xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,Ht=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Ft=/^0o[0-7]+$/i,Ut=/^(?:0|[1-9]\d*)$/,Gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,zt=/['\n\r\u2028\u2029\\]/g,qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zt="["+Kt+"]",Xt="["+qt+"]",Jt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Qt="[^\\ud800-\\udfff"+Kt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",$t="\\ud83c[\\udffb-\\udfff]",en="(?:\\ud83c[\\udde6-\\uddff]){2}",tn="[\\ud800-\\udbff][\\udc00-\\udfff]",nn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",on="(?:"+Jt+"|"+Qt+")",rn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",sn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",en,tn].join("|")+")[\\ufe0e\\ufe0f]?"+rn+")*",an="[\\ufe0e\\ufe0f]?"+rn+sn,ln="(?:"+["[\\u2700-\\u27bf]",en,tn].join("|")+")"+an,un="(?:"+["[^\\ud800-\\udfff]"+Xt+"?",Xt,en,tn,"[\\ud800-\\udfff]"].join("|")+")",cn=RegExp("['’]","g"),dn=RegExp(Xt,"g"),hn=RegExp($t+"(?="+$t+")|"+un+an,"g"),pn=RegExp([nn+"?"+Jt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Zt,nn,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Zt,nn+on,"$"].join("|")+")",nn+"?"+on+"+(?:['’](?:d|ll|m|re|s|t|ve))?",nn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",ln].join("|"),"g"),mn=RegExp("[\\u200d\\ud800-\\udfff"+qt+"\\ufe0e\\ufe0f]"),fn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gn=-1,vn={};vn[ot]=vn[rt]=vn[st]=vn[at]=vn[lt]=vn[ut]=vn[ct]=vn[dt]=vn[ht]=!0,vn[ke]=vn[Pe]=vn[nt]=vn[Ve]=vn[it]=vn[He]=vn[We]=vn[Fe]=vn[Ge]=vn[Ye]=vn[qe]=vn[Ze]=vn[Xe]=vn[Je]=vn[et]=!1;var yn={};yn[ke]=yn[Pe]=yn[nt]=yn[it]=yn[Ve]=yn[He]=yn[ot]=yn[rt]=yn[st]=yn[at]=yn[lt]=yn[Ge]=yn[Ye]=yn[qe]=yn[Ze]=yn[Xe]=yn[Je]=yn[Qe]=yn[ut]=yn[ct]=yn[dt]=yn[ht]=!0,yn[We]=yn[Fe]=yn[et]=!1;var Mn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},bn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},An={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},En=parseFloat,wn=parseInt,On="object"==typeof global&&global&&global.Object===Object&&global,In="object"==typeof self&&self&&self.Object===Object&&self,Sn=On||In||Function("return this")(),jn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Cn=jn&&"object"==typeof module&&module&&!module.nodeType&&module,Dn=Cn&&Cn.exports===jn,Rn=Dn&&On.process,Ln=(function(){try{return Rn&&Rn.binding&&Rn.binding("util")}catch(e){}})(),Nn=Ln&&Ln.isArrayBuffer,kn=Ln&&Ln.isDate,Pn=Ln&&Ln.isMap,xn=Ln&&Ln.isRegExp,Vn=Ln&&Ln.isSet,Hn=Ln&&Ln.isTypedArray,Bn=T("length"),Wn=E(Mn),Fn=E(bn),Un=E(An),Gn=(function f(E){function z(e){if(rl(e)&&!_h(e)&&!(e instanceof kt)){if(e instanceof J)return e;if(_c.call(e,"__wrapped__"))return ns(e)}return new J(e)}function X(){}function J(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=$}function kt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function qt(){var e=new kt(this.__wrapped__);return e.__actions__=Vo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Vo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Vo(this.__views__),e}function Kt(){if(this.__filtered__){var e=new kt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Zt(){var e=this.__wrapped__.value(),t=this.__dir__,n=_h(e),i=t<0,o=n?e.length:0,r=Ir(0,o,this.__views__),s=r.start,a=r.end,l=a-s,u=i?a:s-1,c=this.__iteratees__,d=c.length,h=0,p=zc(l,this.__takeCount__);if(!n||!i&&o==l&&p==l)return yo(e,this.__actions__);var m=[];e:for(;l--&&h<p;){u+=t;for(var f=-1,_=e[u];++f<d;){var g=c[f],v=g.iteratee,y=g.type,M=v(_);if(y==Oe)_=M;else if(!M){if(y==we)continue e;break e}}m[h++]=_}return m}function Xt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Jt(){this.__data__=nd?nd(null):{},this.size=0}function Qt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function $t(e){var t=this.__data__;if(nd){var n=t[e];return n===ie?$:n}return _c.call(t,e)?t[e]:$}function en(e){var t=this.__data__;return nd?t[e]!==$:_c.call(t,e)}function tn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nd&&t===$?ie:t,this}function nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function on(){this.__data__=[],this.size=0}function rn(e){var t=this.__data__,n=Xn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Cc.call(t,n,1),--this.size,!0)}function sn(e){var t=this.__data__,n=Xn(t,e);return n<0?$:t[n][1]}function an(e){return Xn(this.__data__,e)>-1}function ln(e,t){var n=this.__data__,i=Xn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function hn(){this.size=0,this.__data__={hash:new Xt,map:new(Qc||nn),string:new Xt}}function pn(e){var t=Tr(this,e).delete(e);return this.size-=t?1:0,t}function mn(e){return Tr(this,e).get(e)}function fn(e){return Tr(this,e).has(e)}function Mn(e,t){var n=Tr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function bn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new un;++t<n;)this.add(e[t])}function An(e){return this.__data__.set(e,ie),this}function Tn(e){return this.__data__.has(e)}function On(e){var t=this.__data__=new nn(e);this.size=t.size}function In(){this.__data__=new nn,this.size=0}function jn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Cn(e){return this.__data__.get(e)}function Rn(e){return this.__data__.has(e)}function Ln(e,t){var n=this.__data__;if(n instanceof nn){var i=n.__data__;if(!Qc||i.length<ee-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new un(i)}return n.set(e,t),this.size=n.size,this}function Bn(e,t){var n=_h(e),i=!n&&fh(e),o=!n&&!i&&vh(e),r=!n&&!i&&!o&&Th(e),s=n||i||o||r,a=s?S(e.length,uc):[],l=a.length;for(var u in e)!t&&!_c.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||kr(u,l))||a.push(u);return a}function Yn(e){var t=e.length;return t?e[$i(0,t-1)]:$}function zn(e,t){return Qr(Vo(e),ni(t,0,e.length))}function qn(e){return Qr(Vo(e))}function Kn(e,t,n){(n===$||Ya(e[t],n))&&(n!==$||t in e)||ei(e,t,n)}function Zn(e,t,n){var i=e[t];_c.call(e,t)&&Ya(i,n)&&(n!==$||t in e)||ei(e,t,n)}function Xn(e,t){for(var n=e.length;n--;)if(Ya(e[n][0],t))return n;return-1}function Jn(e,t,n,i){return md(e,(function(e,o,r){t(i,e,n(e),r)})),i}function Qn(e,t){return e&&Ho(t,Bl(t),e)}function $n(e,t){return e&&Ho(t,Wl(t),e)}function ei(e,t,n){"__proto__"==t&&Nc?Nc(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ti(e,t){for(var n=-1,i=t.length,o=nc(i),r=null==e;++n<i;)o[n]=r?$:xl(e,t[n]);return o}function ni(e,t,n){return e===e&&(n!==$&&(e=e<=n?e:n),t!==$&&(e=e>=t?e:t)),e}function ii(e,t,n,i,r,s){var a,l=t&se,u=t&ae,c=t&le;if(n&&(a=r?n(e,i,r,s):n(e)),a!==$)return a;if(!ol(e))return e;var d=_h(e);if(d){if(a=Cr(e),!l)return Vo(e,a)}else{var h=Od(e),p=h==Fe||h==Ue;if(vh(e))return Oo(e,l);if(h==qe||h==ke||p&&!r){if(a=u||p?{}:Dr(e),!l)return u?Wo(e,$n(a,e)):Bo(e,Qn(a,e))}else{if(!yn[h])return r?e:{};a=Rr(e,h,ii,l)}}s||(s=new On);var m=s.get(e);if(m)return m;s.set(e,a);var f=c?u?yr:vr:u?Wl:Bl,_=d?$:f(e);return o(_||e,(function(i,o){_&&(o=i,i=e[o]),Zn(a,o,ii(i,t,n,o,e,s))})),a}function oi(e){var t=Bl(e);return function(n){return ri(n,e,t)}}function ri(e,t,n){var i=n.length;if(null==e)return!i;for(e=ac(e);i--;){var o=n[i],r=t[o],s=e[o];if(s===$&&!(o in e)||!r(s))return!1}return!0}function si(e,t,n){if("function"!=typeof e)throw new cc(ne);return jd((function(){e.apply($,n)}),t)}function ai(e,t,n,i){var o=-1,r=l,s=!0,a=e.length,d=[],h=t.length;if(!a)return d;n&&(t=c(t,C(n))),i?(r=u,s=!1):t.length>=ee&&(r=R,s=!1,t=new bn(t));e:for(;++o<a;){var p=e[o],m=null==n?p:n(p);if(p=i||0!==p?p:0,s&&m===m){for(var f=h;f--;)if(t[f]===m)continue e;d.push(p)}else r(t,m,i)||d.push(p)}return d}function li(e,t){var n=!0;return md(e,(function(e,i,o){return n=!!t(e,i,o)})),n}function ui(e,t,n){for(var i=-1,o=e.length;++i<o;){var r=e[i],s=t(r);if(null!=s&&(a===$?s===s&&!_l(s):n(s,a)))var a=s,l=r}return l}function ci(e,t,n,i){var o=e.length;for(n=Al(n),n<0&&(n=-n>o?0:o+n),i=i===$||i>o?o:Al(i),i<0&&(i+=o),i=n>i?0:Tl(i);n<i;)e[n++]=t;return e}function di(e,t){var n=[];return md(e,(function(e,i,o){t(e,i,o)&&n.push(e)})),n}function hi(e,t,n,i,o){var r=-1,s=e.length;for(n||(n=Nr),o||(o=[]);++r<s;){var a=e[r];t>0&&n(a)?t>1?hi(a,t-1,n,i,o):d(o,a):i||(o[o.length]=a)}return o}function pi(e,t){return e&&_d(e,t,Bl)}function mi(e,t){return e&&gd(e,t,Bl)}function fi(e,t){return a(t,(function(t){return tl(e[t])}))}function _i(e,t){t=Eo(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[$r(t[n++])];return n&&n==i?e:$}function gi(e,t,n){var i=t(e);return _h(e)?i:d(i,n(e))}function vi(e){return null==e?e===$?$e:ze:Lc&&Lc in ac(e)?Or(e):zr(e)}function yi(e,t){return e>t}function Mi(e,t){return null!=e&&_c.call(e,t)}function bi(e,t){return null!=e&&t in ac(e)}function Ai(e,t,n){return e>=zc(t,n)&&e<Yc(t,n)}function Ti(e,t,n){for(var i=n?u:l,o=e[0].length,r=e.length,s=r,a=nc(r),d=1/0,h=[];s--;){var p=e[s];s&&t&&(p=c(p,C(t))),d=zc(p.length,d),a[s]=!n&&(t||o>=120&&p.length>=120)?new bn(s&&p):$}p=e[0];var m=-1,f=a[0];e:for(;++m<o&&h.length<d;){var _=p[m],g=t?t(_):_;if(_=n||0!==_?_:0,!(f?R(f,g):i(h,g,n))){for(s=r;--s;){var v=a[s];if(!(v?R(v,g):i(e[s],g,n)))continue e}f&&f.push(g),h.push(_)}}return h}function Ei(e,t,n,i){return pi(e,(function(e,o,r){t(i,n(e),o,r)})),i}function wi(e,t,i){t=Eo(t,e),e=Kr(e,t);var o=null==e?e:e[$r(bs(t))];return null==o?$:n(o,e,i)}function Oi(e){return rl(e)&&vi(e)==ke}function Ii(e){return rl(e)&&vi(e)==nt}function Si(e){return rl(e)&&vi(e)==He}function ji(e,t,n,i,o){return e===t||(null==e||null==t||!rl(e)&&!rl(t)?e!==e&&t!==t:Ci(e,t,n,i,ji,o))}function Ci(e,t,n,i,o,r){var s=_h(e),a=_h(t),l=s?Pe:Od(e),u=a?Pe:Od(t);l=l==ke?qe:l,u=u==ke?qe:u;var c=l==qe,d=u==qe,h=l==u;if(h&&vh(e)){if(!vh(t))return!1;s=!0,c=!1}if(h&&!c)return r||(r=new On),s||Th(e)?mr(e,t,n,i,o,r):fr(e,t,l,n,i,o,r);if(!(n&ue)){var p=c&&_c.call(e,"__wrapped__"),m=d&&_c.call(t,"__wrapped__");if(p||m){var f=p?e.value():e,_=m?t.value():t;return r||(r=new On),o(f,_,n,i,r)}}return!!h&&(r||(r=new On),_r(e,t,n,i,o,r))}function Di(e){return rl(e)&&Od(e)==Ge}function Ri(e,t,n,i){var o=n.length,r=o,s=!i;if(null==e)return!r;for(e=ac(e);o--;){var a=n[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<r;){a=n[o];var l=a[0],u=e[l],c=a[1];if(s&&a[2]){if(u===$&&!(l in e))return!1}else{var d=new On;if(i)var h=i(u,c,l,e,t,d);if(!(h===$?ji(c,u,ue|ce,i,d):h))return!1}}return!0}function Li(e){return!(!ol(e)||Br(e))&&(tl(e)?Ac:Wt).test(es(e))}function Ni(e){return rl(e)&&vi(e)==Ze}function ki(e){return rl(e)&&Od(e)==Xe}function Pi(e){return rl(e)&&il(e.length)&&!!vn[vi(e)]}function xi(e){return"function"==typeof e?e:null==e?Cu:"object"==typeof e?_h(e)?Ui(e[0],e[1]):Fi(e):Vu(e)}function Vi(e){if(!Wr(e))return Gc(e);var t=[];for(var n in ac(e))_c.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Hi(e){if(!ol(e))return Yr(e);var t=Wr(e),n=[];for(var i in e)("constructor"!=i||!t&&_c.call(e,i))&&n.push(i);return n}function Bi(e,t){return e<t}function Wi(e,t){var n=-1,i=za(e)?nc(e.length):[];return md(e,(function(e,o,r){i[++n]=t(e,o,r)})),i}function Fi(e){var t=Er(e);return 1==t.length&&t[0][2]?Ur(t[0][0],t[0][1]):function(n){return n===e||Ri(n,e,t)}}function Ui(e,t){return xr(e)&&Fr(t)?Ur($r(e),t):function(n){var i=xl(n,e);return i===$&&i===t?Hl(n,e):ji(t,i,ue|ce)}}function Gi(e,t,n,i,o){e!==t&&_d(t,(function(r,s){if(ol(r))o||(o=new On),Yi(e,t,s,n,Gi,i,o);else{var a=i?i(e[s],r,s+"",e,t,o):$;a===$&&(a=r),Kn(e,s,a)}}),Wl)}function Yi(e,t,n,i,o,r,s){var a=e[n],l=t[n],u=s.get(l);if(u)return void Kn(e,n,u);var c=r?r(a,l,n+"",e,t,s):$,d=c===$;if(d){var h=_h(l),p=!h&&vh(l),m=!h&&!p&&Th(l);c=l,h||p||m?_h(a)?c=a:qa(a)?c=Vo(a):p?(d=!1,c=Oo(l,!0)):m?(d=!1,c=Lo(l,!0)):c=[]:pl(l)||fh(l)?(c=a,fh(a)?c=wl(a):(!ol(a)||i&&tl(a))&&(c=Dr(l))):d=!1}d&&(s.set(l,c),o(c,l,i,r,s),s.delete(l)),Kn(e,n,c)}function zi(e,t){var n=e.length;if(n)return t+=t<0?n:0,kr(t,n)?e[t]:$}function qi(e,t,n){var i=-1;return t=c(t.length?t:[Cu],C(Ar())),O(Wi(e,(function(e,n,o){return{criteria:c(t,(function(t){return t(e)})),index:++i,value:e}})),(function(e,t){return ko(e,t,n)}))}function Ki(e,t){return Zi(e,t,(function(t,n){return Hl(e,n)}))}function Zi(e,t,n){for(var i=-1,o=t.length,r={};++i<o;){var s=t[i],a=_i(e,s);n(a,s)&&ro(r,Eo(s,e),a)}return r}function Xi(e){return function(t){return _i(t,e)}}function Ji(e,t,n,i){var o=i?M:y,r=-1,s=t.length,a=e;for(e===t&&(t=Vo(t)),n&&(a=c(e,C(n)));++r<s;)for(var l=0,u=t[r],d=n?n(u):u;(l=o(a,d,l,i))>-1;)a!==e&&Cc.call(a,l,1),Cc.call(e,l,1);return e}function Qi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var o=t[n];if(n==i||o!==r){var r=o;kr(o)?Cc.call(e,o,1):_o(e,o)}}return e}function $i(e,t){return e+Hc(Zc()*(t-e+1))}function eo(e,t,n,i){for(var o=-1,r=Yc(Vc((t-e)/(n||1)),0),s=nc(r);r--;)s[i?r:++o]=e,e+=n;return s}function to(e,t){var n="";if(!e||t<1||t>Se)return n;do{t%2&&(n+=e),(t=Hc(t/2))&&(e+=e)}while(t);return n}function no(e,t){return Cd(qr(e,t,Cu),e+"")}function io(e){return Yn($l(e))}function oo(e,t){var n=$l(e);return Qr(n,ni(t,0,n.length))}function ro(e,t,n,i){if(!ol(e))return e;t=Eo(t,e);for(var o=-1,r=t.length,s=r-1,a=e;null!=a&&++o<r;){var l=$r(t[o]),u=n;if(o!=s){var c=a[l];u=i?i(c,l,a):$,u===$&&(u=ol(c)?c:kr(t[o+1])?[]:{})}Zn(a,l,u),a=a[l]}return e}function so(e){return Qr($l(e))}function ao(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var r=nc(o);++i<o;)r[i]=e[i+t];return r}function lo(e,t){var n;return md(e,(function(e,i,o){return!(n=t(e,i,o))})),!!n}function uo(e,t,n){var i=0,o=null==e?i:e.length;if("number"==typeof t&&t===t&&o<=Le){for(;i<o;){var r=i+o>>>1,s=e[r];null!==s&&!_l(s)&&(n?s<=t:s<t)?i=r+1:o=r}return o}return co(e,t,Cu,n)}function co(e,t,n,i){t=n(t);for(var o=0,r=null==e?0:e.length,s=t!==t,a=null===t,l=_l(t),u=t===$;o<r;){var c=Hc((o+r)/2),d=n(e[c]),h=d!==$,p=null===d,m=d===d,f=_l(d);if(s)var _=i||m;else _=u?m&&(i||h):a?m&&h&&(i||!p):l?m&&h&&!p&&(i||!f):!p&&!f&&(i?d<=t:d<t);_?o=c+1:r=c}return zc(r,Re)}function ho(e,t){for(var n=-1,i=e.length,o=0,r=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!Ya(a,l)){var l=a;r[o++]=0===s?0:s}}return r}function po(e){return"number"==typeof e?e:_l(e)?Ce:+e}function mo(e){if("string"==typeof e)return e;if(_h(e))return c(e,mo)+"";if(_l(e))return hd?hd.call(e):"";var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function fo(e,t,n){var i=-1,o=l,r=e.length,s=!0,a=[],c=a;if(n)s=!1,o=u;else if(r>=ee){var d=t?null:Ad(e);if(d)return G(d);s=!1,o=R,c=new bn}else c=t?[]:a;e:for(;++i<r;){var h=e[i],p=t?t(h):h;if(h=n||0!==h?h:0,s&&p===p){for(var m=c.length;m--;)if(c[m]===p)continue e;t&&c.push(p),a.push(h)}else o(c,p,n)||(c!==a&&c.push(p),a.push(h))}return a}function _o(e,t){return t=Eo(t,e),null==(e=Kr(e,t))||delete e[$r(bs(t))]}function go(e,t,n,i){return ro(e,t,n(_i(e,t)),i)}function vo(e,t,n,i){for(var o=e.length,r=i?o:-1;(i?r--:++r<o)&&t(e[r],r,e););return n?ao(e,i?0:r,i?r+1:o):ao(e,i?r+1:0,i?o:r)}function yo(e,t){var n=e;return n instanceof kt&&(n=n.value()),h(t,(function(e,t){return t.func.apply(t.thisArg,d([e],t.args))}),n)}function Mo(e,t,n){var i=e.length;if(i<2)return i?fo(e[0]):[];for(var o=-1,r=nc(i);++o<i;)for(var s=e[o],a=-1;++a<i;)a!=o&&(r[o]=ai(r[o]||s,e[a],t,n));return fo(hi(r,1),t,n)}function bo(e,t,n){for(var i=-1,o=e.length,r=t.length,s={};++i<o;){var a=i<r?t[i]:$;n(s,e[i],a)}return s}function Ao(e){return qa(e)?e:[]}function To(e){return"function"==typeof e?e:Cu}function Eo(e,t){return _h(e)?e:xr(e,t)?[e]:Dd(Il(e))}function wo(e,t,n){var i=e.length;return n=n===$?i:n,!t&&n>=i?e:ao(e,t,n)}function Oo(e,t){if(t)return e.slice();var n=e.length,i=Oc?Oc(n):new e.constructor(n);return e.copy(i),i}function Io(e){var t=new e.constructor(e.byteLength);return new wc(t).set(new wc(e)),t}function So(e,t){var n=t?Io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function jo(t,n,i){return h(n?i(W(t),se):W(t),e,new t.constructor)}function Co(e){var t=new e.constructor(e.source,Vt.exec(e));return t.lastIndex=e.lastIndex,t}function Do(e,n,i){return h(n?i(G(e),se):G(e),t,new e.constructor)}function Ro(e){return dd?ac(dd.call(e)):{}}function Lo(e,t){var n=t?Io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function No(e,t){if(e!==t){var n=e!==$,i=null===e,o=e===e,r=_l(e),s=t!==$,a=null===t,l=t===t,u=_l(t);if(!a&&!u&&!r&&e>t||r&&s&&l&&!a&&!u||i&&s&&l||!n&&l||!o)return 1;if(!i&&!r&&!u&&e<t||u&&n&&o&&!i&&!r||a&&n&&o||!s&&o||!l)return-1}return 0}function ko(e,t,n){for(var i=-1,o=e.criteria,r=t.criteria,s=o.length,a=n.length;++i<s;){var l=No(o[i],r[i]);if(l){if(i>=a)return l;return l*("desc"==n[i]?-1:1)}}return e.index-t.index}function Po(e,t,n,i){for(var o=-1,r=e.length,s=n.length,a=-1,l=t.length,u=Yc(r-s,0),c=nc(l+u),d=!i;++a<l;)c[a]=t[a];for(;++o<s;)(d||o<r)&&(c[n[o]]=e[o]);for(;u--;)c[a++]=e[o++];return c}function xo(e,t,n,i){for(var o=-1,r=e.length,s=-1,a=n.length,l=-1,u=t.length,c=Yc(r-a,0),d=nc(c+u),h=!i;++o<c;)d[o]=e[o];for(var p=o;++l<u;)d[p+l]=t[l];for(;++s<a;)(h||o<r)&&(d[p+n[s]]=e[o++]);return d}function Vo(e,t){var n=-1,i=e.length;for(t||(t=nc(i));++n<i;)t[n]=e[n];return t}function Ho(e,t,n,i){var o=!n;n||(n={});for(var r=-1,s=t.length;++r<s;){var a=t[r],l=i?i(n[a],e[a],a,n,e):$;l===$&&(l=e[a]),o?ei(n,a,l):Zn(n,a,l)}return n}function Bo(e,t){return Ho(e,Ed(e),t)}function Wo(e,t){return Ho(e,wd(e),t)}function Fo(e,t){return function(n,o){var r=_h(n)?i:Jn,s=t?t():{};return r(n,e,Ar(o,2),s)}}function Uo(e){return no((function(t,n){var i=-1,o=n.length,r=o>1?n[o-1]:$,s=o>2?n[2]:$;for(r=e.length>3&&"function"==typeof r?(o--,r):$,s&&Pr(n[0],n[1],s)&&(r=o<3?$:r,o=1),t=ac(t);++i<o;){var a=n[i];a&&e(t,a,i,r)}return t}))}function Go(e,t){return function(n,i){if(null==n)return n;if(!za(n))return e(n,i);for(var o=n.length,r=t?o:-1,s=ac(n);(t?r--:++r<o)&&!1!==i(s[r],r,s););return n}}function Yo(e){return function(t,n,i){for(var o=-1,r=ac(t),s=i(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===n(r[l],l,r))break}return t}}function zo(e,t,n){function i(){return(this&&this!==Sn&&this instanceof i?r:e).apply(o?n:this,arguments)}var o=t&de,r=Zo(e);return i}function qo(e){return function(t){t=Il(t);var n=V(t)?Z(t):$,i=n?n[0]:t.charAt(0),o=n?wo(n,1).join(""):t.slice(1);return i[e]()+o}}function Ko(e){return function(t){return h(wu(ru(t).replace(cn,"")),e,"")}}function Zo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=pd(e.prototype),i=e.apply(n,t);return ol(i)?i:n}}function Xo(e,t,i){function o(){for(var s=arguments.length,a=nc(s),l=s,u=br(o);l--;)a[l]=arguments[l];var c=s<3&&a[0]!==u&&a[s-1]!==u?[]:U(a,u);return(s-=c.length)<i?ar(e,t,$o,o.placeholder,$,a,c,$,$,i-s):n(this&&this!==Sn&&this instanceof o?r:e,this,a)}var r=Zo(e);return o}function Jo(e){return function(t,n,i){var o=ac(t);if(!za(t)){var r=Ar(n,3);t=Bl(t),n=function(e){return r(o[e],e,o)}}var s=e(t,n,i);return s>-1?o[r?t[s]:s]:$}}function Qo(e){return gr((function(t){var n=t.length,i=n,o=J.prototype.thru;for(e&&t.reverse();i--;){var r=t[i];if("function"!=typeof r)throw new cc(ne);if(o&&!s&&"wrapper"==Mr(r))var s=new J([],!0)}for(i=s?i:n;++i<n;){r=t[i];var a=Mr(r),l="wrapper"==a?Td(r):$;s=l&&Hr(l[0])&&l[1]==(ve|me|_e|ye)&&!l[4].length&&1==l[9]?s[Mr(l[0])].apply(s,l[3]):1==r.length&&Hr(r)?s[a]():s.thru(r)}return function(){var e=arguments,i=e[0];if(s&&1==e.length&&_h(i))return s.plant(i).value();for(var o=0,r=n?t[o].apply(this,e):i;++o<n;)r=t[o].call(this,r);return r}}))}function $o(e,t,n,i,o,r,s,a,l,u){function c(){for(var g=arguments.length,v=nc(g),y=g;y--;)v[y]=arguments[y];if(m)var M=br(c),b=k(v,M);if(i&&(v=Po(v,i,o,m)),r&&(v=xo(v,r,s,m)),g-=b,m&&g<u){var A=U(v,M);return ar(e,t,$o,c.placeholder,n,v,A,a,l,u-g)}var T=h?n:this,E=p?T[e]:e;return g=v.length,a?v=Zr(v,a):f&&g>1&&v.reverse(),d&&l<g&&(v.length=l),this&&this!==Sn&&this instanceof c&&(E=_||Zo(E)),E.apply(T,v)}var d=t&ve,h=t&de,p=t&he,m=t&(me|fe),f=t&Me,_=p?$:Zo(e);return c}function er(e,t){return function(n,i){return Ei(n,e,t(i),{})}}function tr(e,t){return function(n,i){var o;if(n===$&&i===$)return t;if(n!==$&&(o=n),i!==$){if(o===$)return i;"string"==typeof n||"string"==typeof i?(n=mo(n),i=mo(i)):(n=po(n),i=po(i)),o=e(n,i)}return o}}function nr(e){return gr((function(t){return t=c(t,C(Ar())),no((function(i){var o=this;return e(t,(function(e){return n(e,o,i)}))}))}))}function ir(e,t){t=t===$?" ":mo(t);var n=t.length;if(n<2)return n?to(t,e):t;var i=to(t,Vc(e/K(t)));return V(t)?wo(Z(i),0,e).join(""):i.slice(0,e)}function or(e,t,i,o){function r(){for(var t=-1,l=arguments.length,u=-1,c=o.length,d=nc(c+l),h=this&&this!==Sn&&this instanceof r?a:e;++u<c;)d[u]=o[u];for(;l--;)d[u++]=arguments[++t];return n(h,s?i:this,d)}var s=t&de,a=Zo(e);return r}function rr(e){return function(t,n,i){return i&&"number"!=typeof i&&Pr(t,n,i)&&(n=i=$),t=bl(t),n===$?(n=t,t=0):n=bl(n),i=i===$?t<n?1:-1:bl(i),eo(t,n,i,e)}}function sr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=El(t),n=El(n)),e(t,n)}}function ar(e,t,n,i,o,r,s,a,l,u){var c=t&me,d=c?s:$,h=c?$:s,p=c?r:$,m=c?$:r;t|=c?_e:ge,(t&=~(c?ge:_e))&pe||(t&=~(de|he));var f=[e,t,o,p,d,m,h,a,l,u],_=n.apply($,f);return Hr(e)&&Sd(_,f),_.placeholder=i,Xr(_,e,t)}function lr(e){var t=sc[e];return function(e,n){if(e=El(e),n=null==n?0:zc(Al(n),292)){var i=(Il(e)+"e").split("e");return i=(Il(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function ur(e){return function(t){var n=Od(t);return n==Ge?W(t):n==Xe?Y(t):j(t,e(t))}}function cr(e,t,n,i,o,r,s,a){var l=t&he;if(!l&&"function"!=typeof e)throw new cc(ne);var u=i?i.length:0;if(u||(t&=~(_e|ge),i=o=$),s=s===$?s:Yc(Al(s),0),a=a===$?a:Al(a),u-=o?o.length:0,t&ge){var c=i,d=o;i=o=$}var h=l?$:Td(e),p=[e,t,n,i,o,c,d,r,s,a];if(h&&Gr(p,h),e=p[0],t=p[1],n=p[2],i=p[3],o=p[4],a=p[9]=p[9]===$?l?0:e.length:Yc(p[9]-u,0),!a&&t&(me|fe)&&(t&=~(me|fe)),t&&t!=de)m=t==me||t==fe?Xo(e,t,a):t!=_e&&t!=(de|_e)||o.length?$o.apply($,p):or(e,t,n,i);else var m=zo(e,t,n);return Xr((h?vd:Sd)(m,p),e,t)}function dr(e,t,n,i){return e===$||Ya(e,pc[n])&&!_c.call(i,n)?t:e}function hr(e,t,n,i,o,r){return ol(e)&&ol(t)&&(r.set(t,e),Gi(e,t,$,hr,r),r.delete(t)),e}function pr(e){return pl(e)?$:e}function mr(e,t,n,i,o,r){var s=n&ue,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=r.get(e);if(u&&r.get(t))return u==t;var c=-1,d=!0,h=n&ce?new bn:$;for(r.set(e,t),r.set(t,e);++c<a;){var p=e[c],f=t[c];if(i)var _=s?i(f,p,c,t,e,r):i(p,f,c,e,t,r);if(_!==$){if(_)continue;d=!1;break}if(h){if(!m(t,(function(e,t){if(!R(h,t)&&(p===e||o(p,e,n,i,r)))return h.push(t)}))){d=!1;break}}else if(p!==f&&!o(p,f,n,i,r)){d=!1;break}}return r.delete(e),r.delete(t),d}function fr(e,t,n,i,o,r,s){switch(n){case it:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case nt:return!(e.byteLength!=t.byteLength||!r(new wc(e),new wc(t)));case Ve:case He:case Ye:return Ya(+e,+t);case We:return e.name==t.name&&e.message==t.message;case Ze:case Je:return e==t+"";case Ge:var a=W;case Xe:var l=i&ue;if(a||(a=G),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;i|=ce,s.set(e,t);var c=mr(a(e),a(t),i,o,r,s);return s.delete(e),c;case Qe:if(dd)return dd.call(e)==dd.call(t)}return!1}function _r(e,t,n,i,o,r){var s=n&ue,a=vr(e),l=a.length;if(l!=vr(t).length&&!s)return!1;for(var u=l;u--;){var c=a[u];if(!(s?c in t:_c.call(t,c)))return!1}var d=r.get(e);if(d&&r.get(t))return d==t;var h=!0;r.set(e,t),r.set(t,e);for(var p=s;++u<l;){c=a[u];var m=e[c],f=t[c];if(i)var _=s?i(f,m,c,t,e,r):i(m,f,c,e,t,r);if(!(_===$?m===f||o(m,f,n,i,r):_)){h=!1;break}p||(p="constructor"==c)}if(h&&!p){var g=e.constructor,v=t.constructor;g!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v)&&(h=!1)}return r.delete(e),r.delete(t),h}function gr(e){return Cd(qr(e,$,ps),e+"")}function vr(e){return gi(e,Bl,Ed)}function yr(e){return gi(e,Wl,wd)}function Mr(e){for(var t=e.name+"",n=od[t],i=_c.call(od,t)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==e)return o.name}return t}function br(e){return(_c.call(z,"placeholder")?z:e).placeholder}function Ar(){var e=z.iteratee||Du;return e=e===Du?xi:e,arguments.length?e(arguments[0],arguments[1]):e}function Tr(e,t){var n=e.__data__;return Vr(t)?n["string"==typeof t?"string":"hash"]:n.map}function Er(e){for(var t=Bl(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,Fr(o)]}return t}function wr(e,t){var n=x(e,t);return Li(n)?n:$}function Or(e){var t=_c.call(e,Lc),n=e[Lc];try{e[Lc]=$;var i=!0}catch(e){}var o=yc.call(e);return i&&(t?e[Lc]=n:delete e[Lc]),o}function Ir(e,t,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],s=r.size;switch(r.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=zc(t,e+s);break;case"takeRight":e=Yc(e,t-s)}}return{start:e,end:t}}function Sr(e){var t=e.match(Lt);return t?t[1].split(Nt):[]}function jr(e,t,n){t=Eo(t,e);for(var i=-1,o=t.length,r=!1;++i<o;){var s=$r(t[i]);if(!(r=null!=e&&n(e,s)))break;e=e[s]}return r||++i!=o?r:!!(o=null==e?0:e.length)&&il(o)&&kr(s,o)&&(_h(e)||fh(e))}function Cr(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&_c.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Dr(e){return"function"!=typeof e.constructor||Wr(e)?{}:pd(Ic(e))}function Rr(e,t,n,i){var o=e.constructor;switch(t){case nt:return Io(e);case Ve:case He:return new o(+e);case it:return So(e,i);case ot:case rt:case st:case at:case lt:case ut:case ct:case dt:case ht:return Lo(e,i);case Ge:return jo(e,i,n);case Ye:case Je:return new o(e);case Ze:return Co(e);case Xe:return Do(e,i,n);case Qe:return Ro(e)}}function Lr(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(Rt,"{\n/* [wrapped with "+t+"] */\n")}
function Nr(e){return _h(e)||fh(e)||!!(Dc&&e&&e[Dc])}function kr(e,t){return!!(t=null==t?Se:t)&&("number"==typeof e||Ut.test(e))&&e>-1&&e%1==0&&e<t}function Pr(e,t,n){if(!ol(n))return!1;var i=typeof t;return!!("number"==i?za(n)&&kr(t,n.length):"string"==i&&t in n)&&Ya(n[t],e)}function xr(e,t){if(_h(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_l(e))||(Et.test(e)||!Tt.test(e)||null!=t&&e in ac(t))}function Vr(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Hr(e){var t=Mr(e),n=z[t];if("function"!=typeof n||!(t in kt.prototype))return!1;if(e===n)return!0;var i=Td(n);return!!i&&e===i[0]}function Br(e){return!!vc&&vc in e}function Wr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||pc)}function Fr(e){return e===e&&!ol(e)}function Ur(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==$||e in ac(n)))}}function Gr(e,t){var n=e[1],i=t[1],o=n|i,r=o<(de|he|ve),s=i==ve&&n==me||i==ve&&n==ye&&e[7].length<=t[8]||i==(ve|ye)&&t[7].length<=t[8]&&n==me;if(!r&&!s)return e;i&de&&(e[2]=t[2],o|=n&de?0:pe);var a=t[3];if(a){var l=e[3];e[3]=l?Po(l,a,t[4]):a,e[4]=l?U(e[3],re):t[4]}return a=t[5],a&&(l=e[5],e[5]=l?xo(l,a,t[6]):a,e[6]=l?U(e[5],re):t[6]),a=t[7],a&&(e[7]=a),i&ve&&(e[8]=null==e[8]?t[8]:zc(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function Yr(e){var t=[];if(null!=e)for(var n in ac(e))t.push(n);return t}function zr(e){return yc.call(e)}function qr(e,t,i){return t=Yc(t===$?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=Yc(o.length-t,0),a=nc(s);++r<s;)a[r]=o[t+r];r=-1;for(var l=nc(t+1);++r<t;)l[r]=o[r];return l[t]=i(a),n(e,this,l)}}function Kr(e,t){return t.length<2?e:_i(e,ao(t,0,-1))}function Zr(e,t){for(var n=e.length,i=zc(t.length,n),o=Vo(e);i--;){var r=t[i];e[i]=kr(r,n)?o[r]:$}return e}function Xr(e,t,n){var i=t+"";return Cd(e,Lr(i,ts(Sr(i),n)))}function Jr(e){var t=0,n=0;return function(){var i=qc(),o=Ee-(i-n);if(n=i,o>0){if(++t>=Te)return arguments[0]}else t=0;return e.apply($,arguments)}}function Qr(e,t){var n=-1,i=e.length,o=i-1;for(t=t===$?i:t;++n<t;){var r=$i(n,o),s=e[r];e[r]=e[n],e[n]=s}return e.length=t,e}function $r(e){if("string"==typeof e||_l(e))return e;var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function es(e){if(null!=e){try{return fc.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ts(e,t){return o(Ne,(function(n){var i="_."+n[0];t&n[1]&&!l(e,i)&&e.push(i)})),e.sort()}function ns(e){if(e instanceof kt)return e.clone();var t=new J(e.__wrapped__,e.__chain__);return t.__actions__=Vo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function is(e,t,n){t=(n?Pr(e,t,n):t===$)?1:Yc(Al(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,r=0,s=nc(Vc(i/t));o<i;)s[r++]=ao(e,o,o+=t);return s}function os(e){for(var t=-1,n=null==e?0:e.length,i=0,o=[];++t<n;){var r=e[t];r&&(o[i++]=r)}return o}function rs(){var e=arguments.length;if(!e)return[];for(var t=nc(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return d(_h(n)?Vo(n):[n],hi(t,1))}function ss(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===$?1:Al(t),ao(e,t<0?0:t,i)):[]}function as(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===$?1:Al(t),t=i-t,ao(e,0,t<0?0:t)):[]}function ls(e,t){return e&&e.length?vo(e,Ar(t,3),!0,!0):[]}function us(e,t){return e&&e.length?vo(e,Ar(t,3),!0):[]}function cs(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Pr(e,t,n)&&(n=0,i=o),ci(e,t,n,i)):[]}function ds(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=null==n?0:Al(n);return o<0&&(o=Yc(i+o,0)),v(e,Ar(t,3),o)}function hs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==$&&(o=Al(n),o=n<0?Yc(i+o,0):zc(o,i-1)),v(e,Ar(t,3),o,!0)}function ps(e){return(null==e?0:e.length)?hi(e,1):[]}function ms(e){return(null==e?0:e.length)?hi(e,Ie):[]}function fs(e,t){return(null==e?0:e.length)?(t=t===$?1:Al(t),hi(e,t)):[]}function _s(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var o=e[t];i[o[0]]=o[1]}return i}function gs(e){return e&&e.length?e[0]:$}function vs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=null==n?0:Al(n);return o<0&&(o=Yc(i+o,0)),y(e,t,o)}function ys(e){return(null==e?0:e.length)?ao(e,0,-1):[]}function Ms(e,t){return null==e?"":Uc.call(e,t)}function bs(e){var t=null==e?0:e.length;return t?e[t-1]:$}function As(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==$&&(o=Al(n),o=o<0?Yc(i+o,0):zc(o,i-1)),t===t?q(e,t,o):v(e,b,o,!0)}function Ts(e,t){return e&&e.length?zi(e,Al(t)):$}function Es(e,t){return e&&e.length&&t&&t.length?Ji(e,t):e}function ws(e,t,n){return e&&e.length&&t&&t.length?Ji(e,t,Ar(n,2)):e}function Os(e,t,n){return e&&e.length&&t&&t.length?Ji(e,t,$,n):e}function Is(e,t){var n=[];if(!e||!e.length)return n;var i=-1,o=[],r=e.length;for(t=Ar(t,3);++i<r;){var s=e[i];t(s,i,e)&&(n.push(s),o.push(i))}return Qi(e,o),n}function Ss(e){return null==e?e:Xc.call(e)}function js(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Pr(e,t,n)?(t=0,n=i):(t=null==t?0:Al(t),n=n===$?i:Al(n)),ao(e,t,n)):[]}function Cs(e,t){return uo(e,t)}function Ds(e,t,n){return co(e,t,Ar(n,2))}function Rs(e,t){var n=null==e?0:e.length;if(n){var i=uo(e,t);if(i<n&&Ya(e[i],t))return i}return-1}function Ls(e,t){return uo(e,t,!0)}function Ns(e,t,n){return co(e,t,Ar(n,2),!0)}function ks(e,t){if(null==e?0:e.length){var n=uo(e,t,!0)-1;if(Ya(e[n],t))return n}return-1}function Ps(e){return e&&e.length?ho(e):[]}function xs(e,t){return e&&e.length?ho(e,Ar(t,2)):[]}function Vs(e){var t=null==e?0:e.length;return t?ao(e,1,t):[]}function Hs(e,t,n){return e&&e.length?(t=n||t===$?1:Al(t),ao(e,0,t<0?0:t)):[]}function Bs(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===$?1:Al(t),t=i-t,ao(e,t<0?0:t,i)):[]}function Ws(e,t){return e&&e.length?vo(e,Ar(t,3),!1,!0):[]}function Fs(e,t){return e&&e.length?vo(e,Ar(t,3)):[]}function Us(e){return e&&e.length?fo(e):[]}function Gs(e,t){return e&&e.length?fo(e,Ar(t,2)):[]}function Ys(e,t){return t="function"==typeof t?t:$,e&&e.length?fo(e,$,t):[]}function zs(e){if(!e||!e.length)return[];var t=0;return e=a(e,(function(e){if(qa(e))return t=Yc(e.length,t),!0})),S(t,(function(t){return c(e,T(t))}))}function qs(e,t){if(!e||!e.length)return[];var i=zs(e);return null==t?i:c(i,(function(e){return n(t,$,e)}))}function Ks(e,t){return bo(e||[],t||[],Zn)}function Zs(e,t){return bo(e||[],t||[],ro)}function Xs(e){var t=z(e);return t.__chain__=!0,t}function Js(e,t){return t(e),e}function Qs(e,t){return t(e)}function $s(){return Xs(this)}function ea(){return new J(this.value(),this.__chain__)}function ta(){this.__values__===$&&(this.__values__=Ml(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?$:this.__values__[this.__index__++]}}function na(){return this}function ia(e){for(var t,n=this;n instanceof X;){var i=ns(n);i.__index__=0,i.__values__=$,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function oa(){var e=this.__wrapped__;if(e instanceof kt){var t=e;return this.__actions__.length&&(t=new kt(this)),t=t.reverse(),t.__actions__.push({func:Qs,args:[Ss],thisArg:$}),new J(t,this.__chain__)}return this.thru(Ss)}function ra(){return yo(this.__wrapped__,this.__actions__)}function sa(e,t,n){var i=_h(e)?s:li;return n&&Pr(e,t,n)&&(t=$),i(e,Ar(t,3))}function aa(e,t){return(_h(e)?a:di)(e,Ar(t,3))}function la(e,t){return hi(ma(e,t),1)}function ua(e,t){return hi(ma(e,t),Ie)}function ca(e,t,n){return n=n===$?1:Al(n),hi(ma(e,t),n)}function da(e,t){return(_h(e)?o:md)(e,Ar(t,3))}function ha(e,t){return(_h(e)?r:fd)(e,Ar(t,3))}function pa(e,t,n,i){e=za(e)?e:$l(e),n=n&&!i?Al(n):0;var o=e.length;return n<0&&(n=Yc(o+n,0)),fl(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&y(e,t,n)>-1}function ma(e,t){return(_h(e)?c:Wi)(e,Ar(t,3))}function fa(e,t,n,i){return null==e?[]:(_h(t)||(t=null==t?[]:[t]),n=i?$:n,_h(n)||(n=null==n?[]:[n]),qi(e,t,n))}function _a(e,t,n){var i=_h(e)?h:w,o=arguments.length<3;return i(e,Ar(t,4),n,o,md)}function ga(e,t,n){var i=_h(e)?p:w,o=arguments.length<3;return i(e,Ar(t,4),n,o,fd)}function va(e,t){return(_h(e)?a:di)(e,Ra(Ar(t,3)))}function ya(e){return(_h(e)?Yn:io)(e)}function Ma(e,t,n){return t=(n?Pr(e,t,n):t===$)?1:Al(t),(_h(e)?zn:oo)(e,t)}function ba(e){return(_h(e)?qn:so)(e)}function Aa(e){if(null==e)return 0;if(za(e))return fl(e)?K(e):e.length;var t=Od(e);return t==Ge||t==Xe?e.size:Vi(e).length}function Ta(e,t,n){var i=_h(e)?m:lo;return n&&Pr(e,t,n)&&(t=$),i(e,Ar(t,3))}function Ea(e,t){if("function"!=typeof t)throw new cc(ne);return e=Al(e),function(){if(--e<1)return t.apply(this,arguments)}}function wa(e,t,n){return t=n?$:t,t=e&&null==t?e.length:t,cr(e,ve,$,$,$,$,t)}function Oa(e,t){var n;if("function"!=typeof t)throw new cc(ne);return e=Al(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=$),n}}function Ia(e,t,n){t=n?$:t;var i=cr(e,me,$,$,$,$,$,t);return i.placeholder=Ia.placeholder,i}function Sa(e,t,n){t=n?$:t;var i=cr(e,fe,$,$,$,$,$,t);return i.placeholder=Sa.placeholder,i}function ja(e,t,n){function i(t){var n=h,i=p;return h=p=$,v=t,f=e.apply(i,n)}function o(e){return v=e,_=jd(a,t),y?i(e):f}function r(e){var n=e-g,i=e-v,o=t-n;return M?zc(o,m-i):o}function s(e){var n=e-g,i=e-v;return g===$||n>=t||n<0||M&&i>=m}function a(){var e=oh();if(s(e))return l(e);_=jd(a,r(e))}function l(e){return _=$,b&&h?i(e):(h=p=$,f)}function u(){_!==$&&bd(_),v=0,h=g=p=_=$}function c(){return _===$?f:l(oh())}function d(){var e=oh(),n=s(e);if(h=arguments,p=this,g=e,n){if(_===$)return o(g);if(M)return _=jd(a,t),i(g)}return _===$&&(_=jd(a,t)),f}var h,p,m,f,_,g,v=0,y=!1,M=!1,b=!0;if("function"!=typeof e)throw new cc(ne);return t=El(t)||0,ol(n)&&(y=!!n.leading,M="maxWait"in n,m=M?Yc(El(n.maxWait)||0,t):m,b="trailing"in n?!!n.trailing:b),d.cancel=u,d.flush=c,d}function Ca(e){return cr(e,Me)}function Da(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new cc(ne);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s)||r,s};return n.cache=new(Da.Cache||un),n}function Ra(e){if("function"!=typeof e)throw new cc(ne);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function La(e){return Oa(2,e)}function Na(e,t){if("function"!=typeof e)throw new cc(ne);return t=t===$?t:Al(t),no(e,t)}function ka(e,t){if("function"!=typeof e)throw new cc(ne);return t=null==t?0:Yc(Al(t),0),no((function(i){var o=i[t],r=wo(i,0,t);return o&&d(r,o),n(e,this,r)}))}function Pa(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new cc(ne);return ol(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),ja(e,t,{leading:i,maxWait:t,trailing:o})}function xa(e){return wa(e,1)}function Va(e,t){return ch(To(t),e)}function Ha(){if(!arguments.length)return[];var e=arguments[0];return _h(e)?e:[e]}function Ba(e){return ii(e,le)}function Wa(e,t){return t="function"==typeof t?t:$,ii(e,le,t)}function Fa(e){return ii(e,se|le)}function Ua(e,t){return t="function"==typeof t?t:$,ii(e,se|le,t)}function Ga(e,t){return null==t||ri(e,t,Bl(t))}function Ya(e,t){return e===t||e!==e&&t!==t}function za(e){return null!=e&&il(e.length)&&!tl(e)}function qa(e){return rl(e)&&za(e)}function Ka(e){return!0===e||!1===e||rl(e)&&vi(e)==Ve}function Za(e){return rl(e)&&1===e.nodeType&&!pl(e)}function Xa(e){if(null==e)return!0;if(za(e)&&(_h(e)||"string"==typeof e||"function"==typeof e.splice||vh(e)||Th(e)||fh(e)))return!e.length;var t=Od(e);if(t==Ge||t==Xe)return!e.size;if(Wr(e))return!Vi(e).length;for(var n in e)if(_c.call(e,n))return!1;return!0}function Ja(e,t){return ji(e,t)}function Qa(e,t,n){n="function"==typeof n?n:$;var i=n?n(e,t):$;return i===$?ji(e,t,$,n):!!i}function $a(e){if(!rl(e))return!1;var t=vi(e);return t==We||t==Be||"string"==typeof e.message&&"string"==typeof e.name&&!pl(e)}function el(e){return"number"==typeof e&&Fc(e)}function tl(e){if(!ol(e))return!1;var t=vi(e);return t==Fe||t==Ue||t==xe||t==Ke}function nl(e){return"number"==typeof e&&e==Al(e)}function il(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Se}function ol(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rl(e){return null!=e&&"object"==typeof e}function sl(e,t){return e===t||Ri(e,t,Er(t))}function al(e,t,n){return n="function"==typeof n?n:$,Ri(e,t,Er(t),n)}function ll(e){return hl(e)&&e!=+e}function ul(e){if(Id(e))throw new oc(te);return Li(e)}function cl(e){return null===e}function dl(e){return null==e}function hl(e){return"number"==typeof e||rl(e)&&vi(e)==Ye}function pl(e){if(!rl(e)||vi(e)!=qe)return!1;var t=Ic(e);if(null===t)return!0;var n=_c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&fc.call(n)==Mc}function ml(e){return nl(e)&&e>=-Se&&e<=Se}function fl(e){return"string"==typeof e||!_h(e)&&rl(e)&&vi(e)==Je}function _l(e){return"symbol"==typeof e||rl(e)&&vi(e)==Qe}function gl(e){return e===$}function vl(e){return rl(e)&&Od(e)==et}function yl(e){return rl(e)&&vi(e)==tt}function Ml(e){if(!e)return[];if(za(e))return fl(e)?Z(e):Vo(e);if(Rc&&e[Rc])return B(e[Rc]());var t=Od(e);return(t==Ge?W:t==Xe?G:$l)(e)}function bl(e){if(!e)return 0===e?e:0;if((e=El(e))===Ie||e===-Ie){return(e<0?-1:1)*je}return e===e?e:0}function Al(e){var t=bl(e),n=t%1;return t===t?n?t-n:t:0}function Tl(e){return e?ni(Al(e),0,De):0}function El(e){if("number"==typeof e)return e;if(_l(e))return Ce;if(ol(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ol(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(jt,"");var n=Bt.test(e);return n||Ft.test(e)?wn(e.slice(2),n?2:8):Ht.test(e)?Ce:+e}function wl(e){return Ho(e,Wl(e))}function Ol(e){return e?ni(Al(e),-Se,Se):0===e?e:0}function Il(e){return null==e?"":mo(e)}function Sl(e,t){var n=pd(e);return null==t?n:Qn(n,t)}function jl(e,t){return g(e,Ar(t,3),pi)}function Cl(e,t){return g(e,Ar(t,3),mi)}function Dl(e,t){return null==e?e:_d(e,Ar(t,3),Wl)}function Rl(e,t){return null==e?e:gd(e,Ar(t,3),Wl)}function Ll(e,t){return e&&pi(e,Ar(t,3))}function Nl(e,t){return e&&mi(e,Ar(t,3))}function kl(e){return null==e?[]:fi(e,Bl(e))}function Pl(e){return null==e?[]:fi(e,Wl(e))}function xl(e,t,n){var i=null==e?$:_i(e,t);return i===$?n:i}function Vl(e,t){return null!=e&&jr(e,t,Mi)}function Hl(e,t){return null!=e&&jr(e,t,bi)}function Bl(e){return za(e)?Bn(e):Vi(e)}function Wl(e){return za(e)?Bn(e,!0):Hi(e)}function Fl(e,t){var n={};return t=Ar(t,3),pi(e,(function(e,i,o){ei(n,t(e,i,o),e)})),n}function Ul(e,t){var n={};return t=Ar(t,3),pi(e,(function(e,i,o){ei(n,i,t(e,i,o))})),n}function Gl(e,t){return Yl(e,Ra(Ar(t)))}function Yl(e,t){if(null==e)return{};var n=c(yr(e),(function(e){return[e]}));return t=Ar(t),Zi(e,n,(function(e,n){return t(e,n[0])}))}function zl(e,t,n){t=Eo(t,e);var i=-1,o=t.length;for(o||(o=1,e=$);++i<o;){var r=null==e?$:e[$r(t[i])];r===$&&(i=o,r=n),e=tl(r)?r.call(e):r}return e}function ql(e,t,n){return null==e?e:ro(e,t,n)}function Kl(e,t,n,i){return i="function"==typeof i?i:$,null==e?e:ro(e,t,n,i)}function Zl(e,t,n){var i=_h(e),r=i||vh(e)||Th(e);if(t=Ar(t,4),null==n){var s=e&&e.constructor;n=r?i?new s:[]:ol(e)&&tl(s)?pd(Ic(e)):{}}return(r?o:pi)(e,(function(e,i,o){return t(n,e,i,o)})),n}function Xl(e,t){return null==e||_o(e,t)}function Jl(e,t,n){return null==e?e:go(e,t,To(n))}function Ql(e,t,n,i){return i="function"==typeof i?i:$,null==e?e:go(e,t,To(n),i)}function $l(e){return null==e?[]:D(e,Bl(e))}function eu(e){return null==e?[]:D(e,Wl(e))}function tu(e,t,n){return n===$&&(n=t,t=$),n!==$&&(n=El(n),n=n===n?n:0),t!==$&&(t=El(t),t=t===t?t:0),ni(El(e),t,n)}function nu(e,t,n){return t=bl(t),n===$?(n=t,t=0):n=bl(n),e=El(e),Ai(e,t,n)}function iu(e,t,n){if(n&&"boolean"!=typeof n&&Pr(e,t,n)&&(t=n=$),n===$&&("boolean"==typeof t?(n=t,t=$):"boolean"==typeof e&&(n=e,e=$)),e===$&&t===$?(e=0,t=1):(e=bl(e),t===$?(t=e,e=0):t=bl(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=Zc();return zc(e+o*(t-e+En("1e-"+((o+"").length-1))),t)}return $i(e,t)}function ou(e){return Zh(Il(e).toLowerCase())}function ru(e){return(e=Il(e))&&e.replace(Gt,Wn).replace(dn,"")}function su(e,t,n){e=Il(e),t=mo(t);var i=e.length;n=n===$?i:ni(Al(n),0,i);var o=n;return(n-=t.length)>=0&&e.slice(n,o)==t}function au(e){return e=Il(e),e&&yt.test(e)?e.replace(gt,Fn):e}function lu(e){return e=Il(e),e&&St.test(e)?e.replace(It,"\\$&"):e}function uu(e,t,n){e=Il(e),t=Al(t);var i=t?K(e):0;if(!t||i>=t)return e;var o=(t-i)/2;return ir(Hc(o),n)+e+ir(Vc(o),n)}function cu(e,t,n){e=Il(e),t=Al(t);var i=t?K(e):0;return t&&i<t?e+ir(t-i,n):e}function du(e,t,n){e=Il(e),t=Al(t);var i=t?K(e):0;return t&&i<t?ir(t-i,n)+e:e}function hu(e,t,n){return n||null==t?t=0:t&&(t=+t),Kc(Il(e).replace(Ct,""),t||0)}function pu(e,t,n){return t=(n?Pr(e,t,n):t===$)?1:Al(t),to(Il(e),t)}function mu(){var e=arguments,t=Il(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function fu(e,t,n){return n&&"number"!=typeof n&&Pr(e,t,n)&&(t=n=$),(n=n===$?De:n>>>0)?(e=Il(e),e&&("string"==typeof t||null!=t&&!bh(t))&&!(t=mo(t))&&V(e)?wo(Z(e),0,n):e.split(t,n)):[]}function _u(e,t,n){return e=Il(e),n=null==n?0:ni(Al(n),0,e.length),t=mo(t),e.slice(n,n+t.length)==t}function gu(e,t,n){var i=z.templateSettings;n&&Pr(e,t,n)&&(t=$),e=Il(e),t=Sh({},t,i,dr);var o,r,s=Sh({},t.imports,i.imports,dr),a=Bl(s),l=D(s,a),u=0,c=t.interpolate||Yt,d="__p += '",h=lc((t.escape||Yt).source+"|"+c.source+"|"+(c===At?xt:Yt).source+"|"+(t.evaluate||Yt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++gn+"]")+"\n";e.replace(h,(function(t,n,i,s,a,l){return i||(i=s),d+=e.slice(u,l).replace(zt,P),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),a&&(r=!0,d+="';\n"+a+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var m=t.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(r?d.replace(pt,""):d).replace(mt,"$1").replace(ft,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var f=Xh((function(){return rc(a,p+"return "+d).apply($,l)}));if(f.source=d,$a(f))throw f;return f}function vu(e){return Il(e).toLowerCase()}function yu(e){return Il(e).toUpperCase()}function Mu(e,t,n){if((e=Il(e))&&(n||t===$))return e.replace(jt,"");if(!e||!(t=mo(t)))return e;var i=Z(e),o=Z(t);return wo(i,L(i,o),N(i,o)+1).join("")}function bu(e,t,n){if((e=Il(e))&&(n||t===$))return e.replace(Dt,"");if(!e||!(t=mo(t)))return e;var i=Z(e);return wo(i,0,N(i,Z(t))+1).join("")}function Au(e,t,n){if((e=Il(e))&&(n||t===$))return e.replace(Ct,"");if(!e||!(t=mo(t)))return e;var i=Z(e);return wo(i,L(i,Z(t))).join("")}function Tu(e,t){var n=be,i=Ae;if(ol(t)){var o="separator"in t?t.separator:o;n="length"in t?Al(t.length):n,i="omission"in t?mo(t.omission):i}e=Il(e);var r=e.length;if(V(e)){var s=Z(e);r=s.length}if(n>=r)return e;var a=n-K(i);if(a<1)return i;var l=s?wo(s,0,a).join(""):e.slice(0,a);if(o===$)return l+i;if(s&&(a+=l.length-a),bh(o)){if(e.slice(a).search(o)){var u,c=l;for(o.global||(o=lc(o.source,Il(Vt.exec(o))+"g")),o.lastIndex=0;u=o.exec(c);)var d=u.index;l=l.slice(0,d===$?a:d)}}else if(e.indexOf(mo(o),a)!=a){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+i}function Eu(e){return e=Il(e),e&&vt.test(e)?e.replace(_t,Un):e}function wu(e,t,n){return e=Il(e),t=n?$:t,t===$?H(e)?Q(e):_(e):e.match(t)||[]}function Ou(e){var t=null==e?0:e.length,i=Ar();return e=t?c(e,(function(e){if("function"!=typeof e[1])throw new cc(ne);return[i(e[0]),e[1]]})):[],no((function(i){for(var o=-1;++o<t;){var r=e[o];if(n(r[0],this,i))return n(r[1],this,i)}}))}function Iu(e){return oi(ii(e,se))}function Su(e){return function(){return e}}function ju(e,t){return null==e||e!==e?t:e}function Cu(e){return e}function Du(e){return xi("function"==typeof e?e:ii(e,se))}function Ru(e){return Fi(ii(e,se))}function Lu(e,t){return Ui(e,ii(t,se))}function Nu(e,t,n){var i=Bl(t),r=fi(t,i);null!=n||ol(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=fi(t,Bl(t)));var s=!(ol(n)&&"chain"in n&&!n.chain),a=tl(e);return o(r,(function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Vo(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,d([this.value()],arguments))})})),e}function ku(){return Sn._===this&&(Sn._=bc),this}function Pu(){}function xu(e){return e=Al(e),no((function(t){return zi(t,e)}))}function Vu(e){return xr(e)?T($r(e)):Xi(e)}function Hu(e){return function(t){return null==e?$:_i(e,t)}}function Bu(){return[]}function Wu(){return!1}function Fu(){return{}}function Uu(){return""}function Gu(){return!0}function Yu(e,t){if((e=Al(e))<1||e>Se)return[];var n=De,i=zc(e,De);t=Ar(t),e-=De;for(var o=S(i,t);++n<e;)t(n);return o}function zu(e){return _h(e)?c(e,$r):_l(e)?[e]:Vo(Dd(Il(e)))}function qu(e){var t=++gc;return Il(e)+t}function Ku(e){return e&&e.length?ui(e,Cu,yi):$}function Zu(e,t){return e&&e.length?ui(e,Ar(t,2),yi):$}function Xu(e){return A(e,Cu)}function Ju(e,t){return A(e,Ar(t,2))}function Qu(e){return e&&e.length?ui(e,Cu,Bi):$}function $u(e,t){return e&&e.length?ui(e,Ar(t,2),Bi):$}function ec(e){return e&&e.length?I(e,Cu):0}function tc(e,t){return e&&e.length?I(e,Ar(t,2)):0}E=null==E?Sn:Gn.defaults(Sn.Object(),E,Gn.pick(Sn,_n));var nc=E.Array,ic=E.Date,oc=E.Error,rc=E.Function,sc=E.Math,ac=E.Object,lc=E.RegExp,uc=E.String,cc=E.TypeError,dc=nc.prototype,hc=rc.prototype,pc=ac.prototype,mc=E["__core-js_shared__"],fc=hc.toString,_c=pc.hasOwnProperty,gc=0,vc=(function(){var e=/[^.]+$/.exec(mc&&mc.keys&&mc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),yc=pc.toString,Mc=fc.call(ac),bc=Sn._,Ac=lc("^"+fc.call(_c).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tc=Dn?E.Buffer:$,Ec=E.Symbol,wc=E.Uint8Array,Oc=Tc?Tc.allocUnsafe:$,Ic=F(ac.getPrototypeOf,ac),Sc=ac.create,jc=pc.propertyIsEnumerable,Cc=dc.splice,Dc=Ec?Ec.isConcatSpreadable:$,Rc=Ec?Ec.iterator:$,Lc=Ec?Ec.toStringTag:$,Nc=(function(){try{var e=wr(ac,"defineProperty");return e({},"",{}),e}catch(e){}})(),kc=E.clearTimeout!==Sn.clearTimeout&&E.clearTimeout,Pc=ic&&ic.now!==Sn.Date.now&&ic.now,xc=E.setTimeout!==Sn.setTimeout&&E.setTimeout,Vc=sc.ceil,Hc=sc.floor,Bc=ac.getOwnPropertySymbols,Wc=Tc?Tc.isBuffer:$,Fc=E.isFinite,Uc=dc.join,Gc=F(ac.keys,ac),Yc=sc.max,zc=sc.min,qc=ic.now,Kc=E.parseInt,Zc=sc.random,Xc=dc.reverse,Jc=wr(E,"DataView"),Qc=wr(E,"Map"),$c=wr(E,"Promise"),ed=wr(E,"Set"),td=wr(E,"WeakMap"),nd=wr(ac,"create"),id=td&&new td,od={},rd=es(Jc),sd=es(Qc),ad=es($c),ld=es(ed),ud=es(td),cd=Ec?Ec.prototype:$,dd=cd?cd.valueOf:$,hd=cd?cd.toString:$,pd=(function(){function e(){}return function(t){if(!ol(t))return{};if(Sc)return Sc(t);e.prototype=t;var n=new e;return e.prototype=$,n}})();z.templateSettings={escape:Mt,evaluate:bt,interpolate:At,variable:"",imports:{_:z}},z.prototype=X.prototype,z.prototype.constructor=z,J.prototype=pd(X.prototype),J.prototype.constructor=J,kt.prototype=pd(X.prototype),kt.prototype.constructor=kt,Xt.prototype.clear=Jt,Xt.prototype.delete=Qt,Xt.prototype.get=$t,Xt.prototype.has=en,Xt.prototype.set=tn,nn.prototype.clear=on,nn.prototype.delete=rn,nn.prototype.get=sn,nn.prototype.has=an,nn.prototype.set=ln,un.prototype.clear=hn,un.prototype.delete=pn,un.prototype.get=mn,un.prototype.has=fn,un.prototype.set=Mn,bn.prototype.add=bn.prototype.push=An,bn.prototype.has=Tn,On.prototype.clear=In,On.prototype.delete=jn,On.prototype.get=Cn,On.prototype.has=Rn,On.prototype.set=Ln;var md=Go(pi),fd=Go(mi,!0),_d=Yo(),gd=Yo(!0),vd=id?function(e,t){return id.set(e,t),e}:Cu,yd=Nc?function(e,t){return Nc(e,"toString",{configurable:!0,enumerable:!1,value:Su(t),writable:!0})}:Cu,Md=no,bd=kc||function(e){return Sn.clearTimeout(e)},Ad=ed&&1/G(new ed([,-0]))[1]==Ie?function(e){return new ed(e)}:Pu,Td=id?function(e){return id.get(e)}:Pu,Ed=Bc?function(e){return null==e?[]:(e=ac(e),a(Bc(e),(function(t){return jc.call(e,t)})))}:Bu,wd=Bc?function(e){for(var t=[];e;)d(t,Ed(e)),e=Ic(e);return t}:Bu,Od=vi;(Jc&&Od(new Jc(new ArrayBuffer(1)))!=it||Qc&&Od(new Qc)!=Ge||$c&&"[object Promise]"!=Od($c.resolve())||ed&&Od(new ed)!=Xe||td&&Od(new td)!=et)&&(Od=function(e){var t=vi(e),n=t==qe?e.constructor:$,i=n?es(n):"";if(i)switch(i){case rd:return it;case sd:return Ge;case ad:return"[object Promise]";case ld:return Xe;case ud:return et}return t});var Id=mc?tl:Wu,Sd=Jr(vd),jd=xc||function(e,t){return Sn.setTimeout(e,t)},Cd=Jr(yd),Dd=(function(e){var t=Da(e,(function(e){return n.size===oe&&n.clear(),e})),n=t.cache;return t})((function(e){var t=[];return wt.test(e)&&t.push(""),e.replace(Ot,(function(e,n,i,o){t.push(i?o.replace(Pt,"$1"):n||e)})),t})),Rd=no((function(e,t){return qa(e)?ai(e,hi(t,1,qa,!0)):[]})),Ld=no((function(e,t){var n=bs(t);return qa(n)&&(n=$),qa(e)?ai(e,hi(t,1,qa,!0),Ar(n,2)):[]})),Nd=no((function(e,t){var n=bs(t);return qa(n)&&(n=$),qa(e)?ai(e,hi(t,1,qa,!0),$,n):[]})),kd=no((function(e){var t=c(e,Ao);return t.length&&t[0]===e[0]?Ti(t):[]})),Pd=no((function(e){var t=bs(e),n=c(e,Ao);return t===bs(n)?t=$:n.pop(),n.length&&n[0]===e[0]?Ti(n,Ar(t,2)):[]})),xd=no((function(e){var t=bs(e),n=c(e,Ao);return t="function"==typeof t?t:$,t&&n.pop(),n.length&&n[0]===e[0]?Ti(n,$,t):[]})),Vd=no(Es),Hd=gr((function(e,t){var n=null==e?0:e.length,i=ti(e,t);return Qi(e,c(t,(function(e){return kr(e,n)?+e:e})).sort(No)),i})),Bd=no((function(e){return fo(hi(e,1,qa,!0))})),Wd=no((function(e){var t=bs(e);return qa(t)&&(t=$),fo(hi(e,1,qa,!0),Ar(t,2))})),Fd=no((function(e){var t=bs(e);return t="function"==typeof t?t:$,fo(hi(e,1,qa,!0),$,t)})),Ud=no((function(e,t){return qa(e)?ai(e,t):[]})),Gd=no((function(e){return Mo(a(e,qa))})),Yd=no((function(e){var t=bs(e);return qa(t)&&(t=$),Mo(a(e,qa),Ar(t,2))})),zd=no((function(e){var t=bs(e);return t="function"==typeof t?t:$,Mo(a(e,qa),$,t)})),qd=no(zs),Kd=no((function(e){var t=e.length,n=t>1?e[t-1]:$;return n="function"==typeof n?(e.pop(),n):$,qs(e,n)})),Zd=gr((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return ti(t,e)};return!(t>1||this.__actions__.length)&&i instanceof kt&&kr(n)?(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:Qs,args:[o],thisArg:$}),new J(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push($),e}))):this.thru(o)})),Xd=Fo((function(e,t,n){_c.call(e,n)?++e[n]:ei(e,n,1)})),Jd=Jo(ds),Qd=Jo(hs),$d=Fo((function(e,t,n){_c.call(e,n)?e[n].push(t):ei(e,n,[t])})),eh=no((function(e,t,i){var o=-1,r="function"==typeof t,s=za(e)?nc(e.length):[];return md(e,(function(e){s[++o]=r?n(t,e,i):wi(e,t,i)})),s})),th=Fo((function(e,t,n){ei(e,n,t)})),nh=Fo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ih=no((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Pr(e,t[0],t[1])?t=[]:n>2&&Pr(t[0],t[1],t[2])&&(t=[t[0]]),qi(e,hi(t,1),[])})),oh=Pc||function(){return Sn.Date.now()},rh=no((function(e,t,n){var i=de;if(n.length){var o=U(n,br(rh));i|=_e}return cr(e,i,t,n,o)})),sh=no((function(e,t,n){var i=de|he;if(n.length){var o=U(n,br(sh));i|=_e}return cr(t,i,e,n,o)})),ah=no((function(e,t){return si(e,1,t)})),lh=no((function(e,t,n){return si(e,El(t)||0,n)}));Da.Cache=un;var uh=Md((function(e,t){t=1==t.length&&_h(t[0])?c(t[0],C(Ar())):c(hi(t,1),C(Ar()));var i=t.length;return no((function(o){for(var r=-1,s=zc(o.length,i);++r<s;)o[r]=t[r].call(this,o[r]);return n(e,this,o)}))})),ch=no((function(e,t){var n=U(t,br(ch));return cr(e,_e,$,t,n)})),dh=no((function(e,t){var n=U(t,br(dh));return cr(e,ge,$,t,n)})),hh=gr((function(e,t){return cr(e,ye,$,$,$,t)})),ph=sr(yi),mh=sr((function(e,t){return e>=t})),fh=Oi(function(){return arguments}())?Oi:function(e){return rl(e)&&_c.call(e,"callee")&&!jc.call(e,"callee")},_h=nc.isArray,gh=Nn?C(Nn):Ii,vh=Wc||Wu,yh=kn?C(kn):Si,Mh=Pn?C(Pn):Di,bh=xn?C(xn):Ni,Ah=Vn?C(Vn):ki,Th=Hn?C(Hn):Pi,Eh=sr(Bi),wh=sr((function(e,t){return e<=t})),Oh=Uo((function(e,t){if(Wr(t)||za(t))return void Ho(t,Bl(t),e);for(var n in t)_c.call(t,n)&&Zn(e,n,t[n])})),Ih=Uo((function(e,t){Ho(t,Wl(t),e)})),Sh=Uo((function(e,t,n,i){Ho(t,Wl(t),e,i)})),jh=Uo((function(e,t,n,i){Ho(t,Bl(t),e,i)})),Ch=gr(ti),Dh=no((function(e){return e.push($,dr),n(Sh,$,e)})),Rh=no((function(e){return e.push($,hr),n(xh,$,e)})),Lh=er((function(e,t,n){e[t]=n}),Su(Cu)),Nh=er((function(e,t,n){_c.call(e,t)?e[t].push(n):e[t]=[n]}),Ar),kh=no(wi),Ph=Uo((function(e,t,n){Gi(e,t,n)})),xh=Uo((function(e,t,n,i){Gi(e,t,n,i)})),Vh=gr((function(e,t){var n={};if(null==e)return n;var i=!1;t=c(t,(function(t){return t=Eo(t,e),i||(i=t.length>1),t})),Ho(e,yr(e),n),i&&(n=ii(n,se|ae|le,pr));for(var o=t.length;o--;)_o(n,t[o]);return n})),Hh=gr((function(e,t){return null==e?{}:Ki(e,t)})),Bh=ur(Bl),Wh=ur(Wl),Fh=Ko((function(e,t,n){return t=t.toLowerCase(),e+(n?ou(t):t)})),Uh=Ko((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Gh=Ko((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Yh=qo("toLowerCase"),zh=Ko((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),qh=Ko((function(e,t,n){return e+(n?" ":"")+Zh(t)})),Kh=Ko((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zh=qo("toUpperCase"),Xh=no((function(e,t){try{return n(e,$,t)}catch(e){return $a(e)?e:new oc(e)}})),Jh=gr((function(e,t){return o(t,(function(t){t=$r(t),ei(e,t,rh(e[t],e))})),e})),Qh=Qo(),$h=Qo(!0),ep=no((function(e,t){return function(n){return wi(n,e,t)}})),tp=no((function(e,t){return function(n){return wi(e,n,t)}})),np=nr(c),ip=nr(s),op=nr(m),rp=rr(),sp=rr(!0),ap=tr((function(e,t){return e+t}),0),lp=lr("ceil"),up=tr((function(e,t){return e/t}),1),cp=lr("floor"),dp=tr((function(e,t){return e*t}),1),hp=lr("round"),pp=tr((function(e,t){return e-t}),0);return z.after=Ea,z.ary=wa,z.assign=Oh,z.assignIn=Ih,z.assignInWith=Sh,z.assignWith=jh,z.at=Ch,z.before=Oa,z.bind=rh,z.bindAll=Jh,z.bindKey=sh,z.castArray=Ha,z.chain=Xs,z.chunk=is,z.compact=os,z.concat=rs,z.cond=Ou,z.conforms=Iu,z.constant=Su,z.countBy=Xd,z.create=Sl,z.curry=Ia,z.curryRight=Sa,z.debounce=ja,z.defaults=Dh,z.defaultsDeep=Rh,z.defer=ah,z.delay=lh,z.difference=Rd,z.differenceBy=Ld,z.differenceWith=Nd,z.drop=ss,z.dropRight=as,z.dropRightWhile=ls,z.dropWhile=us,z.fill=cs,z.filter=aa,z.flatMap=la,z.flatMapDeep=ua,z.flatMapDepth=ca,z.flatten=ps,z.flattenDeep=ms,z.flattenDepth=fs,z.flip=Ca,z.flow=Qh,z.flowRight=$h,z.fromPairs=_s,z.functions=kl,z.functionsIn=Pl,z.groupBy=$d,z.initial=ys,z.intersection=kd,z.intersectionBy=Pd,z.intersectionWith=xd,z.invert=Lh,z.invertBy=Nh,z.invokeMap=eh,z.iteratee=Du,z.keyBy=th,z.keys=Bl,z.keysIn=Wl,z.map=ma,z.mapKeys=Fl,z.mapValues=Ul,z.matches=Ru,z.matchesProperty=Lu,z.memoize=Da,z.merge=Ph,z.mergeWith=xh,z.method=ep,z.methodOf=tp,z.mixin=Nu,z.negate=Ra,z.nthArg=xu,z.omit=Vh,z.omitBy=Gl,z.once=La,z.orderBy=fa,z.over=np,z.overArgs=uh,z.overEvery=ip,z.overSome=op,z.partial=ch,z.partialRight=dh,z.partition=nh,z.pick=Hh,z.pickBy=Yl,z.property=Vu,z.propertyOf=Hu,z.pull=Vd,z.pullAll=Es,z.pullAllBy=ws,z.pullAllWith=Os,z.pullAt=Hd,z.range=rp,z.rangeRight=sp,z.rearg=hh,z.reject=va,z.remove=Is,z.rest=Na,z.reverse=Ss,z.sampleSize=Ma,z.set=ql,z.setWith=Kl,z.shuffle=ba,z.slice=js,z.sortBy=ih,z.sortedUniq=Ps,z.sortedUniqBy=xs,z.split=fu,z.spread=ka,z.tail=Vs,z.take=Hs,z.takeRight=Bs,z.takeRightWhile=Ws,z.takeWhile=Fs,z.tap=Js,z.throttle=Pa,z.thru=Qs,z.toArray=Ml,z.toPairs=Bh,z.toPairsIn=Wh,z.toPath=zu,z.toPlainObject=wl,z.transform=Zl,z.unary=xa,z.union=Bd,z.unionBy=Wd,z.unionWith=Fd,z.uniq=Us,z.uniqBy=Gs,z.uniqWith=Ys,z.unset=Xl,z.unzip=zs,z.unzipWith=qs,z.update=Jl,z.updateWith=Ql,z.values=$l,z.valuesIn=eu,z.without=Ud,z.words=wu,z.wrap=Va,z.xor=Gd,z.xorBy=Yd,z.xorWith=zd,z.zip=qd,z.zipObject=Ks,z.zipObjectDeep=Zs,z.zipWith=Kd,z.entries=Bh,z.entriesIn=Wh,z.extend=Ih,z.extendWith=Sh,Nu(z,z),z.add=ap,z.attempt=Xh,z.camelCase=Fh,z.capitalize=ou,z.ceil=lp,z.clamp=tu,z.clone=Ba,z.cloneDeep=Fa,z.cloneDeepWith=Ua,z.cloneWith=Wa,z.conformsTo=Ga,z.deburr=ru,z.defaultTo=ju,z.divide=up,z.endsWith=su,z.eq=Ya,z.escape=au,z.escapeRegExp=lu,z.every=sa,z.find=Jd,z.findIndex=ds,z.findKey=jl,z.findLast=Qd,z.findLastIndex=hs,z.findLastKey=Cl,z.floor=cp,z.forEach=da,z.forEachRight=ha,z.forIn=Dl,z.forInRight=Rl,z.forOwn=Ll,z.forOwnRight=Nl,z.get=xl,z.gt=ph,z.gte=mh,
z.has=Vl,z.hasIn=Hl,z.head=gs,z.identity=Cu,z.includes=pa,z.indexOf=vs,z.inRange=nu,z.invoke=kh,z.isArguments=fh,z.isArray=_h,z.isArrayBuffer=gh,z.isArrayLike=za,z.isArrayLikeObject=qa,z.isBoolean=Ka,z.isBuffer=vh,z.isDate=yh,z.isElement=Za,z.isEmpty=Xa,z.isEqual=Ja,z.isEqualWith=Qa,z.isError=$a,z.isFinite=el,z.isFunction=tl,z.isInteger=nl,z.isLength=il,z.isMap=Mh,z.isMatch=sl,z.isMatchWith=al,z.isNaN=ll,z.isNative=ul,z.isNil=dl,z.isNull=cl,z.isNumber=hl,z.isObject=ol,z.isObjectLike=rl,z.isPlainObject=pl,z.isRegExp=bh,z.isSafeInteger=ml,z.isSet=Ah,z.isString=fl,z.isSymbol=_l,z.isTypedArray=Th,z.isUndefined=gl,z.isWeakMap=vl,z.isWeakSet=yl,z.join=Ms,z.kebabCase=Uh,z.last=bs,z.lastIndexOf=As,z.lowerCase=Gh,z.lowerFirst=Yh,z.lt=Eh,z.lte=wh,z.max=Ku,z.maxBy=Zu,z.mean=Xu,z.meanBy=Ju,z.min=Qu,z.minBy=$u,z.stubArray=Bu,z.stubFalse=Wu,z.stubObject=Fu,z.stubString=Uu,z.stubTrue=Gu,z.multiply=dp,z.nth=Ts,z.noConflict=ku,z.noop=Pu,z.now=oh,z.pad=uu,z.padEnd=cu,z.padStart=du,z.parseInt=hu,z.random=iu,z.reduce=_a,z.reduceRight=ga,z.repeat=pu,z.replace=mu,z.result=zl,z.round=hp,z.runInContext=f,z.sample=ya,z.size=Aa,z.snakeCase=zh,z.some=Ta,z.sortedIndex=Cs,z.sortedIndexBy=Ds,z.sortedIndexOf=Rs,z.sortedLastIndex=Ls,z.sortedLastIndexBy=Ns,z.sortedLastIndexOf=ks,z.startCase=qh,z.startsWith=_u,z.subtract=pp,z.sum=ec,z.sumBy=tc,z.template=gu,z.times=Yu,z.toFinite=bl,z.toInteger=Al,z.toLength=Tl,z.toLower=vu,z.toNumber=El,z.toSafeInteger=Ol,z.toString=Il,z.toUpper=yu,z.trim=Mu,z.trimEnd=bu,z.trimStart=Au,z.truncate=Tu,z.unescape=Eu,z.uniqueId=qu,z.upperCase=Kh,z.upperFirst=Zh,z.each=da,z.eachRight=ha,z.first=gs,Nu(z,(function(){var e={};return pi(z,(function(t,n){_c.call(z.prototype,n)||(e[n]=t)})),e})(),{chain:!1}),z.VERSION="4.17.4",o(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){z[e].placeholder=z})),o(["drop","take"],(function(e,t){kt.prototype[e]=function(n){n=n===$?1:Yc(Al(n),0);var i=this.__filtered__&&!t?new kt(this):this.clone();return i.__filtered__?i.__takeCount__=zc(n,i.__takeCount__):i.__views__.push({size:zc(n,De),type:e+(i.__dir__<0?"Right":"")}),i},kt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),o(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=n==we||3==n;kt.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ar(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),o(["head","last"],(function(e,t){var n="take"+(t?"Right":"");kt.prototype[e]=function(){return this[n](1).value()[0]}})),o(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");kt.prototype[e]=function(){return this.__filtered__?new kt(this):this[n](1)}})),kt.prototype.compact=function(){return this.filter(Cu)},kt.prototype.find=function(e){return this.filter(e).head()},kt.prototype.findLast=function(e){return this.reverse().find(e)},kt.prototype.invokeMap=no((function(e,t){return"function"==typeof e?new kt(this):this.map((function(n){return wi(n,e,t)}))})),kt.prototype.reject=function(e){return this.filter(Ra(Ar(e)))},kt.prototype.slice=function(e,t){e=Al(e);var n=this;return n.__filtered__&&(e>0||t<0)?new kt(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==$&&(t=Al(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},kt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},kt.prototype.toArray=function(){return this.take(De)},pi(kt.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=z[i?"take"+("last"==t?"Right":""):t],r=i||/^find/.test(t);o&&(z.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,a=t instanceof kt,l=s[0],u=a||_h(t),c=function(e){var t=o.apply(z,d([e],s));return i&&h?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(a=u=!1);var h=this.__chain__,p=!!this.__actions__.length,m=r&&!h,f=a&&!p;if(!r&&u){t=f?t:new kt(this);var _=e.apply(t,s);return _.__actions__.push({func:Qs,args:[c],thisArg:$}),new J(_,h)}return m&&f?e.apply(this,s):(_=this.thru(c),m?i?_.value()[0]:_.value():_)})})),o(["pop","push","shift","sort","splice","unshift"],(function(e){var t=dc[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);z.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var o=this.value();return t.apply(_h(o)?o:[],e)}return this[n]((function(n){return t.apply(_h(n)?n:[],e)}))}})),pi(kt.prototype,(function(e,t){var n=z[t];if(n){var i=n.name+"";(od[i]||(od[i]=[])).push({name:t,func:n})}})),od[$o($,he).name]=[{name:"wrapper",func:$}],kt.prototype.clone=qt,kt.prototype.reverse=Kt,kt.prototype.value=Zt,z.prototype.at=Zd,z.prototype.chain=$s,z.prototype.commit=ea,z.prototype.next=ta,z.prototype.plant=ia,z.prototype.reverse=oa,z.prototype.toJSON=z.prototype.valueOf=z.prototype.value=ra,z.prototype.first=z.prototype.head,Rc&&(z.prototype[Rc]=na),z})();"function"==typeof define&&"object"==typeof define.amd&&define.amd&&define("lodash",[],(function(){return Gn}))}.call(this),define("module/core/js/util/array",["require","lodash"],(function(e){"use strict";function t(){}var n=e("lodash");return t.arrayToHashMap=function(e,t){var n,i,o=Object.create(null);for(n=0;n<e.length;n++)i=e[n],o[t(i)]=i;return o},t.firstNItems=function(e,t){return n.take(e,t)},t.lastNItems=function(e,t){return n.takeRight(e,t)},t.edgeArray=function(e,t,n){return t?n?(e=e.concat(n),e.unshift(t),e):[t].concat(e):n?e.concat(n):e},t.firstOf=function(e){return n.head(e)},t.lastOf=function(e){return n.last(e)},t.nonEmpty=function(e){return!(!e||!e.length)},t.empty=function(e){return!t.nonEmpty(e)},t.unique=function(e){return n.uniq(e)},t.intersection=function(e){return n.intersection.apply(n,arguments)},t.subtraction=function(e,t){return n.difference(e,t)},t.toArray=function(e,t){return Array.prototype.slice.call(e,t)},t.shallowCopy=t.toArray,t.flatten=function(e){return n.remove(e,n.isUndefined),n.flatten(e)},t.groupBy=function(e,t){return n.groupBy(e,t)},t.inPlaceConcat=function(e,t){return Array.prototype.push.apply(e,t),e},t.inPlacePrecat=function(e,t){return Array.prototype.unshift.apply(e,t),e},t.split=function(e,n,i){return t.splitInto("matching","failing",e,n,i)},t.contains=function(e,t){return-1!==e.indexOf(t)},t.containsAll=function(e,n){return t.empty(t.subtraction(e,n))},t.find=function(e,t){var i=n.find(e,t);return void 0!==i?i:null},t.splitInto=function(e,t,n,i,o){var r,s,a=[],l=[],u=n.length,c={};for(r=0;r<u;r++)s=n[r],i.call(o,s)?a.push(s):l.push(s);return c[e]=a,c[t]=l,c},t.remove=function(e,t){var n=e.indexOf(t);return n>-1&&e.splice(n,1),e},t.equals=function(e,t,n){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0},t.range=function(e){var t,n=[];for(t=0;t<e;t++)n.push(t);return n},t.cartesian=function(){return Array.prototype.reduce.call(arguments,(function(e,t){var n=[];return e.forEach((function(e){t.forEach((function(t){n.push(e.concat([t]))}))})),n}),[[]])},Object.freeze(t)})),define("module/core/js/util/class",[],(function(){"use strict";var e={};return e.extend=function(e,t){function n(){}return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,e},Object.freeze(e)})),define("module/core/js/event/events",[],(function(){"use strict";return Object.freeze({jsFrameEnd:"jsFrameEnd",POINTS_LOADED:"pointsLoaded",REQUEST_ERROR:"request/error",TRADE_CONFIRMED:"dealing/trade/confirmed",TRADE_REJECTED:"dealing/trade/rejected",TRADE_INVALID:"dealing/trade/invalid"})})),define("module/core/js/util/animation/fixedtimetask",[],(function(){"use strict";function e(e,t){this.f=e,this.duration=t}var t=e.prototype;return t.f=null,t.startTime=null,t.duration=null,t.step=function(e,t,n){var i,o=e-this.startTime;return i=0===this.duration?1:Math.min(o/this.duration,1),this.f(i,o,e)||i>=1},Object.seal(t),e})),define("module/core/js/util/math",[],(function(){"use strict";var e={};return e.roundToDecimalPlaces=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},e.roundFloatingPointError=function(t){var n=Math.min(8,Math.floor(Math.log10(Number.MAX_SAFE_INTEGER)-Math.log10(Math.abs(t))));return e.roundToDecimalPlaces(t,n)},e.enforceMinimumValue=function(e,t){var n=Math.abs(e),i=e<0?-1:1;return n<t&&(e=t*i),e},e.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.areEqualOrNaN=function(e,t){return e===t||isNaN(e)&&isNaN(t)},e.isFiniteNumber=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},e.sum=function(t){var n,i=0;for(n=0;n<t.length;n++)e.isNumber(t[n])&&(i+=t[n]);return i},e.mean=function(t){return e.roundFloatingPointError(e.sum(t)/t.length)},e.mod=function(e,t){return(e%t+t)%t},e.logWithBase=function(e,t){return Math.log(t)/Math.log(e)},e.toInteger=function(t){var n=parseInt(t,10);return e.isNumber(n)?n:null},e.range=function(e){return e.length<=1?0:Math.max.apply(Math,e)-Math.min.apply(Math,e)},e.degreesToRadians=function(e){return e*Math.PI/180},e.radiansToDegrees=function(e){return 180*e/Math.PI},e.between=function(e,t,n){return Math.min(t,n)<=e&&e<=Math.max(t,n)},e.rangeIntersection=function(t,n){return e.between(t[0],n[0],n[1])||e.between(t[1],n[0],n[1])||e.between(n[0],t[0],t[1])||e.between(n[1],t[0],t[1])?[Math.max(t[0],n[0]),Math.min(t[1],n[1])]:[]},e.floorToClosestMultiples=function(t,n){return e.roundToClosestMultiples(t,n,Math.floor)},e.ceilToClosestMultiples=function(t,n){return e.roundToClosestMultiples(t,n,Math.ceil)},e.roundToClosestMultiples=function(t,n,i){if(i=i||Math.round,0===n)return t;var o=e.roundFloatingPointError(t/n);return e.roundFloatingPointError(i(o)*n)},e.randomSeeded=function(e){var t=1e4*Math.sin(e);return t-Math.floor(t)},e.normaliseAngle=function(e){return e%=360,e>180?e-=360:e<=-180&&(e+=360),e},Object.freeze(e)})),define("module/core/js/util/animation/frameratemonitor",["require","module/core/js/util/math"],(function(e){"use strict";function t(e){e&&(this._framesPerReport=e),this._intervalFrameLengths=[]}var n=e("module/core/js/util/math");t.create=function(e){return new t(e)};var i=t.prototype;return i._framesPerReport=30,i._intervalFrameLengths=null,i.reportFrameLength=function(e){this._intervalFrameLengths.push(e),this._intervalFrameLengths.length>this._framesPerReport&&this._intervalFrameLengths.shift()},i.framesPerSecond=function(){var e=1e3/n.mean(this._intervalFrameLengths);return isFinite(e)?e:0},i.longestFrame=function(){var e=Math.max.apply(null,this._intervalFrameLengths);return isFinite(e)?e:0},i.averageFrame=function(){var e=n.mean(this._intervalFrameLengths);return isFinite(e)?e:0},Object.seal(i),Object.seal(t)})),define("module/core/js/event/subscribable",["require","lodash"],(function(e){"use strict";function t(){}function n(e,t){var n,i=this.__handlers[e];if(i&&i.length)for(n=0;n<i.length;n++)!i[n]||t&&i[n][1]!==t||(i[n]=null,this.__eventsForCleanup[e]=!0)}function i(){if(this.__handlers){var e,t,n=Object.keys(this.__eventsForCleanup);if(n.length)for(t=0;t<n.length;t++)e=o.compact(this.__handlers[n[t]]),e.length?this.__handlers[n[t]]=e:delete this.__handlers[n[t]],delete this.__eventsForCleanup[n[t]]}}var o=e("lodash");t.create=function(){return new t},t.prepareInstance=function(e){return["on","un","fire"].forEach((function(t){e[t]=r[t]})),t._initialiseSubscribable(e),e},t._initialiseSubscribable=function(e){Object.prototype.hasOwnProperty.call(e,"__handlers")||Object.defineProperty(e,"__handlers",{configurable:!0,enumerable:!1,writable:!1,value:Object.create(null)}),Object.prototype.hasOwnProperty.call(e,"__eventsForCleanup")||Object.defineProperty(e,"__eventsForCleanup",{configurable:!0,enumerable:!1,writable:!1,value:Object.create(null)}),Object.prototype.hasOwnProperty.call(e,"__firingLevel")||Object.defineProperty(e,"__firingLevel",{configurable:!0,enumerable:!1,writable:!0,value:r.__firingLevel})};var r=t.prototype;return r.__handlers=null,r.__eventsForCleanup=null,r.__firingLevel=0,r.on=function(e,n,i,o){if(void 0===e)throw new Error("Trying to subscribe to an undefined event");i=i||null,o=o||{},t._initialiseSubscribable(this),(this.__handlers[e]||(this.__handlers[e]=[])).push([n,i,!!o.once])},r.un=function(e,t){var o,r=!!e,s=!!t;if(this.__handlers){if(r&&s)n.call(this,e,t);else if(r)n.call(this,e,null);else for(o in this.__handlers)n.call(this,o,s?t:null);this.__firingLevel||i.call(this)}},r.fire=function(e,t){var n,r,s,a;if(this.__handlers&&(r=this.__handlers[e])){this.__firingLevel++,t=o.slice(arguments,1);try{for(s=r.length,a=0;a<s;a++)(n=r[a])&&(n[2]&&(r[a]=null,this.__eventsForCleanup[e]=!0),n[0].apply(n[1],t))}catch(e){throw this.__firingLevel=1,e}finally{--this.__firingLevel||i.call(this)}}},r.destroy=function(){this.un(),delete this.__handlers},Object.seal(r),Object.seal(t)})),define("module/core/js/util/globalevents",["require","module/core/js/util/class","module/core/js/event/subscribable"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/util/class"),i=e("module/core/js/event/subscribable");return n.extend(t,i),new t})),define("module/core/js/util/animation/ongoingtask",[],(function(){"use strict";function e(e){this.f=e}var t=e.prototype;return t.f=null,t.startTime=null,t.step=function(e,t,n){var i=e-this.startTime,o=Math.min(n,i);return o=Math.max(o,1),this.f(o,i,e)},Object.seal(t),e})),define("module/core/js/util/animation/animationpoller",["require","module/core/js/util/class","module/core/js/event/events","module/core/js/util/animation/fixedtimetask","module/core/js/util/animation/frameratemonitor","module/core/js/util/globalevents","module/core/js/util/animation/ongoingtask","module/core/js/event/subscribable"],(function(e){"use strict";function t(){this.frameRateMonitor=r.create(),this._namespaces=Object.create(null),this._step=this._step.bind(this),this._timeCurrentFrame=this._timeLastFrame=t.timestamp(),s.on(i.jsFrameEnd,this.requestNextStep,this)}var n=e("module/core/js/util/class"),i=e("module/core/js/event/events"),o=e("module/core/js/util/animation/fixedtimetask"),r=e("module/core/js/util/animation/frameratemonitor"),s=e("module/core/js/util/globalevents"),a=e("module/core/js/util/animation/ongoingtask"),l=e("module/core/js/event/subscribable");n.extend(t,l),t.create=function(){return new t},t.TRIGGER_REPOSITION="triggerReposition",t.TRIGGER_RENDER="triggerRender",t.cancelFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e)}).bind(window),t.requestFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,t.MS_FRAME_TIME)}).bind(window),t.timestamp=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,t.MS_FRAME_TIME=16;var u=t.prototype;return u.frameRateMonitor=null,u.taskCount=0,u._isFirstFrameInAnimation=!0,u._stepId=null,u._timeCurrentFrame=null,u._timeDeltaFrame=0,u._timeLastFrame=null,u.destroy=function(){this._stepId&&(t.cancelFrame(this._stepId),this._stepId=null),this.killAllTasks(),this.un(),s.un(null,this)},u.hasTasks=function(e){return!!this._namespaces[e]},u.killAllTasks=function(){this.taskCount=0,this._namespaces=Object.create(null)},u.killTasks=function(e){this._namespaces[e]&&(this.taskCount-=this._namespaces[e].length,delete this._namespaces[e])},u.newFixedTimeTask=function(e,t,n){var i=new o(t,n);return this._addTask(e,i),i},u.newOngoingTask=function(e,t){var n=new a(t);return this._addTask(e,n),n},u.requestNextStep=function(){this._stepId||(this._stepId=t.requestFrame(this._step))},u._addTask=function(e,n){n.startTime=t.timestamp(),this.taskCount++,this._getNamespaceTaskList(e).push(n),this.requestNextStep()},u._executeTasks=function(e){var t,n,i,o=this._getNamespaceTaskList(e),r=o.slice();for(t=0;t<r.length;t++)n=r[t],o.indexOf(n)>-1&&n.step(this._timeCurrentFrame,this._timeLastFrame,this._timeDeltaFrame)&&(o=this._getNamespaceTaskList(e),(i=o.indexOf(n))>-1&&(o.splice(i,1),this.taskCount--));this._getNamespaceTaskList(e).length||this.killTasks(e)},u._getNamespaceTaskList=function(e){var t=this._namespaces[e];return t||(t=[],this._namespaces[e]=t),t},u._step=function(){var e,n,i;this._stepId=null,e=this._timeCurrentFrame=t.timestamp(),n=this._timeDeltaFrame=e-this._timeLastFrame,this._isFirstFrameInAnimation||this.frameRateMonitor.reportFrameLength(n);for(i in this._namespaces)this._executeTasks(i);this.fire(t.TRIGGER_REPOSITION),this.fire(t.TRIGGER_RENDER),this.taskCount&&this.requestNextStep(),this._timeLastFrame=e,this._isFirstFrameInAnimation=!this.taskCount},Object.seal(u),Object.seal(t)})),define("module/core/js/util/object",["require","lodash"],(function(e){"use strict";var t=e("lodash"),n={};n.count=function(e){return t.size(e)},n.isEmpty=function(e){return 0===n.count(e)},n.isLiteral=function(e){return!(!e||!e.constructor||e.constructor!==Object)},n.isArray=function(e){return!(!e||!e.constructor||e.constructor!==Array)},n.isNumber=function(e){return"number"==typeof e},n.some=function(e,n){return t.some(e,n)},n.recursiveFreeze=function(e){if(Object.freeze.shim)return e;var t,i;Object.freeze(e);for(i in e)t=e[i],(n.isLiteral(t)||n.isArray(t))&&n.recursiveFreeze(t);return e},n.applyTo=function(e,t,n){for(var i in t)"prototype"==i||"superclass"==i||n&&void 0!==e[i]||(e[i]=t[i]);return e},n.shallowClone=function(e){return n.applyTo({},e)},n.deepCopyLiteral=function(e,t){var i;for(i in t)if(t.hasOwnProperty(i)){if(e.hasOwnProperty(i))throw new Error('Property "'+i+'" is being overwritten.');n.isLiteral(t[i])?e[i]=n.deepCopyLiteral({},t[i]):e[i]=t[i]}return e},n.getKeyWithValue=function(e,t){return Object.keys(e).filter((function(n){return e[n]===t}))[0]},n.diff=function(e,t){var i,o,r;if(n.isArray(e)&&n.isArray(t)){if(e.length!==t.length)return t.slice();for(r=0;r<t.length;r++)if(void 0!==(o=n.diff(e[r],t[r])))return t.slice()}else if(n.isLiteral(e)&&n.isLiteral(t)){i={};for(r in t)void 0!==(o=n.diff(e[r],t[r]))&&(i[r]=o);if(!n.isEmpty(i))return i}else if(n.isNumber(e)&&n.isNumber(t)){if(!(e===t||isNaN(e)&&isNaN(t)))return t}else if(e!==t)return t},n.merge=function(){var e=Array.prototype.slice.call(arguments);return!0===e[e.length-1]&&e.pop()||e.unshift({}),t.merge.apply(t,e)},n.values=function(e){return t.values(e)},n.deleteProperties=function(e,t){var n;for(n=0;n<t.length;n++)e.hasOwnProperty(t[n])&&delete e[t[n]];return e},n._identity=function(e){return e},n.isDefined=function(e){return void 0!==e},n.defineProperty=Object.defineProperty,n.defineProperties=Object.defineProperties;try{n.defineProperty({},"canDefineGetterProperty",{get:n._identity})}catch(e){n.defineProperty=n._identity,n.defineProperties=n._identity}return Object.freeze(n)})),define("module/core/js/util/defer",["require","module/core/js/util/animation/animationpoller","module/core/js/util/object"],(function(e){"use strict";var t=e("module/core/js/util/animation/animationpoller"),n=e("module/core/js/util/object"),i={};return n.defineProperty(i,"_pendingQueue",{configurable:!1,enumerable:!1,writable:!0,value:[]}),n.defineProperty(i,"_executionQueue",{configurable:!1,enumerable:!1,writable:!0,value:[]}),n.defineProperty(i,"_stepId",{configurable:!1,enumerable:!1,writable:!0,value:null}),n.defineProperty(i,"_executeNext",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(i._executionQueue=i._pendingQueue,i._pendingQueue=[];i._executionQueue.length;)i._executionQueue.shift().fn();i._stepId=i._pendingQueue.length?i._scheduleNextStep(i._executeNext):null}}),n.defineProperty(i,"_scheduleNextStep",{configurable:!1,enumerable:!1,writable:!0,value:function(e){return t.requestFrame(e)}}),n.defineProperty(i,"_cancelNextStep",{configurable:!1,enumerable:!1,writable:!0,value:function(e){return t.cancelFrame(e)}}),i.defer=function(e,t,n){if("function"!=typeof e)throw new Error("First argument to defer must be a function");i._pendingQueue.push({scope:t,fn:function(){e.apply(t,n)}}),i._stepId||(i._stepId=i._scheduleNextStep(i._executeNext))},i.cancel=function(e){if("object"!=typeof e||null===e)throw new Error("Attempted to cancel deferred functions without a valid scope");i._cancelQueue(i._pendingQueue,e),i._cancelQueue(i._executionQueue,e),i._stepId&&!i._pendingQueue.length&&(i._cancelNextStep(i._stepId),i._stepId=null)},i._cancelQueue=function(e,t){for(var n=e.length;n--;)e[n].scope===t&&e.splice(n,1)},Object.seal(i)})),define("module/core/js/util/functional",["require","lodash","module/core/js/util/array","module/core/js/util/defer"],(function(e){"use strict";function t(){}var n=e("lodash"),i=e("module/core/js/util/array"),o=e("module/core/js/util/defer");return t.identity=n.identity,t.defined=function(e){return void 0!==e&&null!==e},t.cache=function(e,t,n){var i,o={},r=0;return n=n||1/0,t=t||function(){return Array.prototype.join.call(arguments,".")},i=function(){var i,s=t.apply(this,arguments);if(o.hasOwnProperty(s))return o[s];if(r===n)for(i in o){delete o[i];break}else r++;return o[s]=e.apply(this,arguments)},i.invalidate=function(){o={},r=0},i},t.addCaching=function(e,n,i,o){e[n]=t.cache(e[n],i,o)},t.plucker=t.cache((function(e){return new Function("d","return d."+e+";")}),t.identity),t.totalPlucker=t.cache((function(){function e(e){return s+="."+e}if(1===arguments.length)return t.plucker(arguments[0]);var n,o=i.toArray(arguments),r=o.slice(0,o.length-1),s="o",a="o."+o.join(".");return n=r.map(e).join(" && "),new Function("o","return (o && ("+n+")) ?"+a+": undefined;")}),(function(){return i.toArray(arguments).join('"')})),t.getter=t.cache((function(){var e,t="";for(e=0;e<arguments.length;e++)t+="number"==typeof arguments[e]?"["+arguments[e]+"]":'["'+arguments[e]+'"]';return new Function("return this"+t)})),t.setter=t.cache((function(e){return new Function("v","this."+e+"= v; return this;")}),t.identity),t.typedSetter=t.cache((function(e,t){return function(n){if(!t.call(this,n,e))throw new Error('Field "'+e+'" is set to invalid value: '+n);return this[e]=n,this}})),t.setAttr=function(e,t){return function(n){return n[e]=t,n}},t.throwError=t.cache((function(e){return function(){throw new Error(e)}})),t.not=n.negate,t.partialComplete=function(e){var t=i.toArray(arguments,1);return function(){var n=i.inPlacePrecat(i.toArray(arguments),t);return e.apply(this,n)}},t.compose=function(){return t.composeBound.apply(t,i.inPlaceConcat([window],arguments))},t.composeBound=function(e){var t=i.toArray(arguments,1);return function(){var n,i=t.length,o=t[i-1].apply(e,arguments);for(n=i-2;n>=0;n--)o=t[n].call(e,o);return o}},t.returns=n.constant,t.identityComparator=function(e){return function(t){return t===e}},t.propertyComparator=function(e,t){return function(n){return n[e]===t}},t.always=n.stubTrue,t.never=n.stubFalse,t.invoker=t.cache((function(e){var t=i.toArray(arguments,1);return function(n){return n[e].apply(n,t)}})),t.invokeWithPassed=function(e,t){return function(n){return e[t].call(e,n)}},t.invokeCall=function(e,n){t.invokeApply(e,n,i.toArray(arguments,2))},t.invokeApply=function(e,t,n){for(var i=0;i<e.length;i++)e[i][t].apply(e[i],n)},t.mapProperties=function(e,t){var n,i=[];for(n in e)i.push(t(n,e[n]));return i},t.objectInvoke=function(e,t,n){var o,r,s=i.toArray(arguments,2);for(r in e)o=e[r],o[t].apply(o,s)},t.ascendingFieldComparator=function(e){return function(t,n){var i=t[e],o=n[e];return i===o?0:i<o?-1:1}},t.delayedFunction=function(e,t){return 0===e?t:function(){var n=arguments,i=this;window.setTimeout((function(){t.apply(i,n)}),e)}},t.throttle=function(e,t,n,o){function r(){d=n?new Date:0,c=null,u=e.apply(a,l)}function s(){var s,h=new Date;return d||n||(d=h),s=t-(h-d),a=this,l=i.toArray(arguments),s<=0?(window.clearTimeout(c),c=null,d=h,u=e.apply(a,l)):!c&&o&&(c=window.setTimeout(r,s)),u}n=void 0!==n&&n,o=void 0===o||o;var a,l,u,c=null,d=0;return s.abort=function(){c&&(window.clearTimeout(c),c=null)},s},t.debounce=function(e,t){function n(){var i=r,o=s,u=Date.now()-a,c="function"==typeof t?t():t;u<c?l=window.setTimeout(n,c-u):(r=s=l=a=null,e.apply(o,i))}function o(){var e="function"==typeof t?t():t;s=this,r=i.toArray(arguments),a=Date.now(),l||(l=window.setTimeout(n,e))}var r,s,a,l=null;return o.abort=function(){l&&(window.clearTimeout(l),r=s=a=l=null)},o},t.deferred=function(e){return function(){o.defer(e,this,arguments)}},t.throttledDeferred=function(e){function n(){n.scheduled||(n.scheduled=!0,o.defer(i,this,arguments))}function i(){n.scheduled&&(n.scheduled=!1,e.apply(this,arguments))}return n.scheduled=!1,n.abort=t.setter("scheduled").bind(n,!1),n},t.empty=n.noop,t.emptyChainable=function(){return this},t.bubbler=function(e){return function(){var t,n=[e];for(t=0;t<arguments.length;t++)n.push(arguments[t]);this.fire.apply(this,n)}},t.observableSetter=function(e,t){return function(n){return this[e]=n,this.fire(t,this),this}},t.delegate=function(e,t){var n=i.toArray(arguments,2);return function(){var o,r=n.concat(i.toArray(arguments)),s=this[e];return s&&(o=s[t].apply(s,r))===s&&(o=this),o}},Object.seal(t)})),define("module/core/js/ext/d3utils",["require","module/core/js/ext/d3","module/core/js/util/array","module/core/js/util/functional"],(function(e){"use strict";var t=e("module/core/js/ext/d3"),n=e("module/core/js/util/array"),i=e("module/core/js/util/functional");if(t.selection.prototype.split=function(e){var n=[],i=[];return this.each((function(t,o){e.call(this,t,o)?n.push(this):i.push(this)})),{matching:t.selectAll(n),failing:t.selectAll(i)}},t.selection.prototype.size)throw new Error("d3 already has support for .size() method");t.selection.prototype.size=function(){var e=0;return this.each((function(){this&&1===this.nodeType&&e++})),e},t.selection.prototype.toArray=function(){var e=[];return this.each((function(){e.push(t.select(this))})),e},t.selection.prototype.top=function(e){return arguments.length>0?(this.style("top",e+"px"),this):parseInt(this.style("top").replace("px",""),10)},t.selection.prototype.bottom=function(e){return arguments.length>0?(this.style("top",e+"px"),this):parseInt(this.style("bottom").replace("px",""),10)},t.selection.prototype.left=function(e){return arguments.length>0?(this.style("left",e+"px"),this):parseInt(this.style("left").replace("px",""),10)},t.selection.prototype.width=function(e){return arguments.length>0?(this.style("width",e+"px"),this):parseInt(this.style("width").replace("px",""),10)},t.selection.prototype.height=function(e){return arguments.length>0?(this.style("height",e+"px"),this):parseInt(this.style("height").replace("px",""),10)},t.selection.prototype.appendElement=function(e){return this.select((function(t,n){var i="function"==typeof e?e(t,n):e;return this.appendChild(i)}))},t.selection.enter.prototype.appendElement=t.selection.prototype.appendElement,t.selection.prototype.eachElement=function(e){return this.each((function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),e.apply(this,t)}))},t.selection.enter.prototype.eachElement=t.selection.prototype.eachElement,t.selection.prototype.mapElement=function(e){var t=[];return this.each((function(){var n=Array.prototype.slice.call(arguments);n.unshift(this),t.push(e.apply(this,n))})),t},t.selection.enter.prototype.mapElement=t.selection.prototype.mapElement,t.selection.prototype.parent=function(){var e=this.mapElement(i.getter("parentNode"));return t.selectAll(n.unique(e))},t.selection.prototype.svgFromString=function(e){return this.select((function(){var t=(new DOMParser).parseFromString(e,"image/svg+xml");return this.appendChild(document.adoptNode(t.documentElement))}))},t.selection.enter.prototype.parent=t.selection.prototype.parent})),define("dependencies",["require","module/core/js/ext/hand-1.3.8.patched","module/core/js/ext/wheel-event-polyfill","module/core/js/ext/d3","module/core/js/ext/d3utils"],(function(e){"use strict";e("module/core/js/ext/hand-1.3.8.patched"),e("module/core/js/ext/wheel-event-polyfill"),e("module/core/js/ext/d3"),e("module/core/js/ext/d3utils")})),define("text",["module"],(function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}function n(e,n,i,o){if(n===o)return!0;if(e===i){if("http"===e)return t(n,"80")===t(o,"80");if("https"===e)return t(n,"443")===t(o,"443")}return!1}var i,o,r,s,a,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,h=d&&location.protocol&&location.protocol.replace(/\:/,""),p=d&&location.hostname,m=d&&(location.port||void 0),f={},_=e.config&&e.config()||{};return i={version:"2.0.15",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:_.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=l[t];try{e=new ActiveXObject(n)}catch(e){}if(e){l=[n];break}}return e},parseName:function(e){var t,n,i,o=!1,r=e.lastIndexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!s||r>1)?(t=e.substring(0,r),n=e.substring(r+1)):t=e,i=n||t,r=i.indexOf("!"),-1!==r&&(o="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:t=i),{moduleName:t,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,o,r){var s,a,l,u=i.xdRegExp.exec(e);return!u||(s=u[2],a=u[3],a=a.split(":"),l=a[1],a=a[0],(!s||s===t)&&(!a||a.toLowerCase()===o.toLowerCase())&&(!l&&!a||n(s,l,t,r)))},finishLoad:function(e,t,n,o){n=t?i.strip(n):n,_.isBuild&&(f[e]=n),o(n)},load:function(e,t,n,o){if(o&&o.isBuild&&!o.inlineText)return void n();_.isBuild=o&&o.isBuild;var r=i.parseName(e),s=r.moduleName+(r.ext?"."+r.ext:""),a=t.toUrl(s),l=_.useXhr||i.useXhr;if(0===a.indexOf("empty:"))return void n();!d||l(a,h,p,m)?i.get(a,(function(t){i.finishLoad(e,r.strip,t,n)}),(function(e){n.error&&n.error(e)})):t([s],(function(e){i.finishLoad(r.moduleName+"."+r.ext,r.strip,e,n)}))},write:function(e,t,n,o){if(f.hasOwnProperty(t)){var r=i.jsEscape(f[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,o,r){var s=i.parseName(t),a=s.ext?"."+s.ext:"",l=s.moduleName+a,u=n.toUrl(s.moduleName+a)+".js";i.load(l,n,(function(t){var n=function(e){return o(u,e)};n.asModule=function(e,t){return o.asModule(e,u,t)},i.write(e,l,n,r)}),r)}},"node"===_.env||!_.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(o=require.nodeRequire("fs"),i.get=function(e,t,n){try{var i=o.readFileSync(e,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),t(i)}catch(e){n&&n(e)}}):"xhr"===_.env||!_.env&&i.createXhr()?i.get=function(e,t,n,o){var r,s=i.createXhr();if(s.open("GET",e,!0),o)for(r in o)o.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),o[r]);_.onXhr&&_.onXhr(s,e),s.onreadystatechange=function(i){var o,r;4===s.readyState&&(o=s.status||0,o>399&&o<600?(r=new Error(e+" HTTP status: "+o),r.xhr=s,n&&n(r)):t(s.responseText),_.onXhrComplete&&_.onXhrComplete(s,e))},s.send(null)}:"rhino"===_.env||!_.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(e,t){var n,i,o=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),"utf-8")),a="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=s.readLine());)n.append(r),n.append(i);a=String(n.toString())}finally{s.close()}t(a)}:("xpconnect"===_.env||!_.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in r,i.get=function(e,t){var n,i,o,l={};a&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{
n=r["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(o,1,0,!1),i=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),i.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),l),i.close(),n.close(),t(l.value)}catch(e){throw new Error((o&&o.path||"")+": "+e)}}),i})),define("text!package.json",[],(function(){return'{\n  "name": "ig-charts",\n  "version": "1.1717.0",\n  "description": "Charts",\n  "group": "com.iggroup.wt.fe.htmlcharts",\n  "artifact": "wt-fe-htmlcharts",\n  "main": "main.js",\n  "devDependencies": {\n    "almond": "0.3.3",\n    "async": "1.5.0",\n    "backbone-events-standalone": "0.2.7",\n    "bluebird": "2.2.1",\n    "bowser": "1.8.1",\n    "chai": "4.1.1",\n    "css-reset": "0.0.1",\n    "cssnano": "3.10.0",\n    "cucumber": "0.5.1",\n    "eslint": "4.11.0",\n    "express": "4.16.2",\n    "grunt": "0.4.5",\n    "grunt-cli": "0.1.13",\n    "grunt-concurrent": "2.3.1",\n    "grunt-contrib-clean": "1.1.0",\n    "grunt-contrib-compress": "1.4.3",\n    "grunt-contrib-copy": "1.0.0",\n    "grunt-contrib-less": "1.4.1",\n    "grunt-contrib-requirejs": "1.0.0",\n    "grunt-eslint": "20.1.0",\n    "grunt-karma": "2.0.0",\n    "grunt-lcov-merge": "1.2.3",\n    "grunt-postcss": "0.9.0",\n    "grunt-search": "0.1.8",\n    "grunt-shell": "2.1.0",\n    "grunt-template": "1.0.0",\n    "grunt-webpack": "2.0.1",\n    "http-proxy": "1.11.1",\n    "ig-content-butler": "3.3.0",\n    "ig-ember-perf": "2.3.0",\n    "ig-grunt-file-list": "2.2.3",\n    "ig-grunt-maven-multi-deploy": "0.8.1",\n    "ig-grunt-release": "0.11.0",\n    "ig-menu": "1.8.0",\n    "ig-phantomjs-binaries": "1.0.0",\n    "ig-sonar-runner": "0.11.0",\n    "ig-trading": "27.2.0",\n    "intl": "1.2.5",\n    "jquery": "2.1.4",\n    "karma": "1.4.1",\n    "karma-chrome-launcher": "2.2.0",\n    "karma-coverage": "1.1.1",\n    "karma-cucumberjs": "0.0.3",\n    "karma-junit-reporter": "0.3.8",\n    "karma-mocha": "1.3.0",\n    "karma-mocha-reporter": "2.2.5",\n    "karma-phantomjs-launcher-nonet": "0.1.3",\n    "karma-requirejs": "1.1.0",\n    "karma-script-launcher": "1.0.0",\n    "less": "2.7.3",\n    "lodash-cli": "4.17.4",\n    "mkdirp": "^0.5.1",\n    "mocha": "3.5.3",\n    "modernizr": "^3.3.1",\n    "moment": "2.19.2",\n    "moment-timezone": "0.5.14",\n    "optimize-js": "1.0.3",\n    "postcss-merge-selectors": "0.0.6",\n    "raw-loader": "0.5.1",\n    "requirejs": "2.3.5",\n    "requirejs-text": "2.0.15",\n    "shelljs": "0.5.3",\n    "sinon": "4.1.2",\n    "tracking-sdk-javascript": "2.0.14",\n    "webdriverio": "4.6.2",\n    "webpack": "2.3.3",\n    "wt-dealing-rest-jsclient": "3.27.0",\n    "wt-fe-ajax": "1.7.0",\n    "wt-fe-buz-business-stoplimit": "2.0.18",\n    "wt-fe-buz-utilities-url": "2.0.18",\n    "wt-fe-clientstreaming-nativestreaming": "1.20.0-snapshot.1500468474486",\n    "wt-fe-clientstreaming-streaming": "1.20.0-snapshot.1500468471748",\n    "wt-fe-nativeinterop": "1.16.0",\n    "wt-statistics-jsclient": "1.12.0",\n    "xmlbuilder": "^8.2.2"\n  },\n  "scripts": {\n    "start": "node server.js",\n    "prepublish": "node_modules/.bin/grunt install",\n    "postpublish": "node_modules/.bin/grunt publish",\n    "tag": "node_modules/.bin/grunt tag",\n    "source": "node_modules/.bin/grunt source",\n    "test": "node_modules/.bin/grunt test",\n    "perf": "node test/perf-main.js",\n    "coverage": "node_modules/.bin/grunt coverage",\n    "prerelease": "node_modules/.bin/grunt prerelease"\n  },\n  "repository": {\n    "type": "git",\n    "url": "https://git.iggroup.local/scm/hc/html-charts.git",\n    "ssh": "ssh://git.iggroup.local:7999/hc/html-charts.git"\n  },\n  "publishConfig": {\n    "registry": "http://bvrprdnex001.iggroup.local:8081/nexus/content/repositories/npm-ig"\n  },\n  "maven": {\n    "repository": "ig.releases",\n    "local": "file://~/.m2/repository",\n    "remote": "http://maven-repo2.iggroup.local:8081/nexus/content/repositories/ig.release"\n  }\n}'})),define("module/core/js/util/oop",["require","module/core/js/util/functional"],(function(e){"use strict";var t=e("module/core/js/util/functional"),n={};return n.abstractMethod=t.throwError("abstract method called"),n.abstractMethod.isAbstract=!0,Object.freeze(n)})),define("module/core/js/model/layouts/abstractlayoutmodule",["require","module/core/js/util/functional","module/core/js/util/oop"],(function(e){"use strict";function t(e,t,n){this._eventBus=t,this._options=n||{},void 0!==e&&null!==e&&this.fromJSON(e)}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/oop"),o=t.prototype;return o._eventBus=null,o._options=null,o.fromJSON=i.abstractMethod,o.toJSON=i.abstractMethod,o.isModified=n.always,o.clone=function(){return new this.constructor(JSON.parse(JSON.stringify(this)),this._eventBus,this._options)},Object.seal(o),Object.seal(t)})),define("module/core/js/enum/pricetypeenum",[],(function(){"use strict";var e={};return e.MID="MID",e.BID="BID",e.ASK="ASK",e.LTP="LAST_TRADED",e.DEFAULT=e.MID,Object.freeze(e)})),define("module/core/js/model/datapointlist",[],(function(){"use strict";function e(e){this.points=e,this._updateDomain()}var t=e.prototype;return t.high=null,t.low=null,t.points=null,t._updateDomain=function(){var e,t=1/0,n=-1/0;for(e=0;e<this.points.length;e++)t=Math.min(t,this.points[e].lowPrice),n=Math.max(n,this.points[e].highPrice);this.low=t,this.high=n},t._insertPointAt=function(e,t,n){if(t){var i=this.points[e];if(n.valueEquals(i))return!1;this.points[e]=n}else this.points.splice(e,0,n);return this._updateDomain(),!0},t.insertPoints=function(e){var t,n,i,o,r=!1,s=this.points,a=0;for(i=0,o=e.length;i<o;i++){for(n=e[i];a<s.length&&(t=s[a].accTime)<n.accTime;)a++;r=this._insertPointAt(a,t===n.accTime,n)||r}return r},Object.seal(t),Object.seal(e)})),define("module/core/js/util/error",[],(function(){"use strict";var e={};return e.captureError=function(t,n,i){if(e.isInDebug())return t.call(i);try{return t.call(i)}catch(e){return n.call(i,e)}},e.isInDebug=function(){return!("object"!=typeof window.IG||!window.IG._isDebugEnabled)},Object.seal(e)})),define("module/core/js/util/log",["require","module/core/js/util/error","module/core/js/util/object"],(function(e){"use strict";function t(e){var t="object"==typeof window.IG&&window.IG._logLevel?window.IG._logLevel.toLowerCase().replace(/^\s+|\s+$/g,""):"notSpecified",n=o.indexOf(t);return o.indexOf(e)>=n}var n=e("module/core/js/util/error"),i=e("module/core/js/util/object"),o=["debug","log","info","warn","error"],r=function(e,t){return{configurable:!1,enumerable:!!t,writable:!1,value:e}},s={};return s._logMessage=function(e){var i;window.console&&window.console[e]&&n.isInDebug()&&t(e)&&(i=Array.prototype.slice.call(arguments,1),window.console[e].apply(window.console,i))},s._flattenArguments=function(e){var t,n,o=[];for(n=0;n<e.length;n++)if(t=e[n],i.isLiteral(t)||i.isArray(t))try{o.push(JSON.stringify(t))}catch(e){o.push(t)}else null===t?o.push("(null)"):void 0===t?o.push("(undefined)"):t&&t.toString?o.push(t.toString()):o.push(t);return o.join(" ")},Object.freeze(i.defineProperties(s,{_logMessage:r(s._logMessage,!1),_flattenArguments:r(s._flattenArguments,!1),debug:r(s._logMessage.bind(s,"debug"),!0),log:r(s._logMessage.bind(s,"log"),!0),info:r(s._logMessage.bind(s,"info"),!0),warn:r(s._logMessage.bind(s,"warn"),!0),error:r(s._logMessage.bind(s,"error"),!0),fatal:r(s._logMessage.bind(s,"error"),!0)}))})),define("module/core/js/util/validator",["require","lodash"],(function(e){"use strict";var t=e("lodash"),n={};return n.isLocale=function(e){return/^[A-Za-z]{2}(_[A-Z]{2})?$/.test(e)},n.isEpic=function(e){var n=/^([A-Z]+(\.[A-Z0-9_\-]+)+|null)$/i;return!(t.size(e)>50)&&n.test(e)},Object.seal(n)})),define("module/core/js/model/userinfo",["require","module/core/js/util/array","moment","module/core/js/util/functional","module/core/js/util/log","module/core/js/util/validator"],(function(e){"use strict";function t(){}var n,i=e("module/core/js/util/array"),o=e("moment"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/log"),a=e("module/core/js/util/validator"),l=["zh_TW","zh_CN","ja_JP","ru_RU"],u=t.prototype;return u._accountId=void 0,u._currencyCode=void 0,u._webSiteId=void 0,u._webSiteType=void 0,u._locale=void 0,u._ssoToken=void 0,u._cstToken=void 0,t.getInstance=function(){return n||(n=new t),n},u.getAccountId=r.getter("_accountId"),u.setAccountId=r.setter("_accountId"),u.getWebSiteId=r.getter("_webSiteId"),u.setWebSiteId=r.setter("_webSiteId"),u.getWebSiteType=r.getter("_webSiteType"),u.setWebSiteType=function(e){return this._webSiteType=e?e.toString().toLowerCase().replace(/[^a-z]+/gi,""):e,this},u.getSsoToken=r.getter("_ssoToken"),u.setSsoToken=r.setter("_ssoToken"),u.getCstToken=r.getter("_cstToken"),u.setCstToken=r.setter("_cstToken"),u.getLocale=r.getter("_locale"),u.setLocale=function(e){return a.isLocale(e)||(s.warn("Attempted to set invalid locale: "+e+". Defaulting to en_GB"),e="en_GB"),e.indexOf("_NO")>-1?e="no_NO":"en_AU"===e&&(e="en_GB"),this._locale=e,o.locale("en_GB"),o.locale(e),this},u.isLatinLang=function(){return!i.contains(l,n.getLocale())},u.isAnonymous=function(){return!this.getAccountId()||"anonymous"===this.getAccountId().toLowerCase()},Object.seal(u),t})),define("module/core/js/i18nloader",["require","module/core/js/model/userinfo"],(function(e){"use strict";function t(e){this._i18n=e,this._userInfo=n.getInstance()}var n=e("module/core/js/model/userinfo");t.DEFAULT_LOCALE="en_GB";var i=t.prototype;return i._i18n=null,i._userInfo=null,i._localeExists=function(e){return!!e&&!!this._i18n[e.split("_")[0]]},i.get=function(e){var n,i=this._userInfo.getLocale(),o=this._localeExists(i)?i:t.DEFAULT_LOCALE,r=this._i18n[o];if(r&&"string"==typeof r[e])return r[e];if("string"==typeof(n=this._i18n[o.split("_")[0]][e]))return n;throw new Error("Unknown i18n property: "+e)},Object.seal(t),Object.seal(t)})),define("module/core/js/util/timeconstants",[],(function(){"use strict";var e={};e.Enum=Object.freeze({MILLISECOND:"MILLISECOND",TICK:"TICK",SECOND:"SECOND",MINUTE:"MINUTE",HOUR:"HOUR",DAY:"DAY",WEEK:"WEEK",MONTH:"MONTH",YEAR:"YEAR",DECADE:"DECADE"});return e.Periods=Object.freeze({MILLISECOND:1,TICK:1e3,SECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,WEEK:6048e5,MONTH:2628e6,YEAR:31536e6,DECADE:31536e7}),Object.freeze(e)})),define("module/core/js/util/dateutils",["require","module/core/js/i18nloader","module/core/js/util/timeconstants"],(function(e){"use strict";var t=e("module/core/js/i18nloader"),n=e("module/core/js/util/timeconstants"),i={};return i.DATE_FORMATS=new t({de:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"},en:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"},en_US:{full:"ddd MMM D YYYY H:mm:ss",tick:"MMM D H:mm:ss.SSS",second:"MMM D H:mm:ss",subDaily:"ddd MMM D H:mm",dailyAccurate:"ddd MMM D YYYY",dailyNonAccurate:"ddd MMM D YYYY H:mm",weekly:"ddd MMM D YYYY",monthly:"MMM D YYYY"},es:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"},fr:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"},it:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"},ja:{full:"ddd YYYY MMM D H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd MMM D H:mm",dailyAccurate:"ddd YYYY MMM D",dailyNonAccurate:"ddd YYYY MMM D H:mm",weekly:"ddd YYYY MMM D",monthly:"YYYY MMM D"},nl:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"},no:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"},pt:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"},sv:{full:"ddd YYYY MMM D H:mm:ss",tick:"MMM D H:mm:ss.SSS",second:"MMM D H:mm:ss",subDaily:"ddd MMM D H:mm",dailyAccurate:"ddd YYYY MMM D",dailyNonAccurate:"ddd YYYY MMM D H:mm",weekly:"ddd YYYY MMM D",monthly:"YYYY MMM D"},zh:{full:"ddd YYYY MMM D H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd MMM D H:mm",dailyAccurate:"ddd YYYY MMM D",dailyNonAccurate:"ddd YYYY MMM D H:mm",weekly:"ddd YYYY MMM D",monthly:"YYYY MMM D"},zh_TW:{full:"ddd D MMM YYYY H:mm:ss",tick:"D MMM H:mm:ss.SSS",second:"D MMM H:mm:ss",subDaily:"ddd D MMM H:mm",dailyAccurate:"ddd D MMM YYYY",dailyNonAccurate:"ddd D MMM YYYY H:mm",weekly:"ddd D MMM YYYY",monthly:"D MMM YYYY"}}),i.laterOf=function(e,t){return e>t?e:t},i.earlierOf=function(e,t){return e<t?e:t},i.inRange=function(e,t){return t>=e[0]&&(t<e[1]||t<=e[0])},i.compareToRange=function(e,t){return t<e[0]?-1:t>=e[1]?t<=e[0]?0:1:0},i.toUrlString=function(e){return[e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()].join("/")},i.format=function(e,t){var o=i.DATE_FORMATS,r=o.get("full"),s=n.Enum;return t&&(t.periodUnit===s.TICK?r=o.get("tick"):t.periodUnit===s.SECOND?r=o.get("second"):t.periodUnit===s.MINUTE?r=o.get("subDaily"):t.periodUnit===s.HOUR?r=o.get("subDaily"):t.periodUnit===s.DAY?r="00:00:00"===e.format("HH:mm:ss")?o.get("dailyAccurate"):o.get("dailyNonAccurate"):t.periodUnit===s.WEEK?r=o.get("weekly"):t.periodUnit===s.MONTH&&(r=o.get("monthly"))),e.format(r)},Object.freeze(i)})),define("module/core/js/util/numberpairs",["require","lodash"],(function(e){"use strict";var t=e("lodash"),n={},i=n.pairSame=function(e,t){return e[0]===t[0]&&e[1]===t[1]};return n.pairDifferent=function(e,t){return!i(e,t)},n.rangeExtent=function(e){return e[1]-e[0]},n.expandProportionally=function(e,t){var i=n.rangeExtent(t),o=i*e*.5;return[t[0]-o,t[1]+o]},n.scaleAboutMidpoint=function(e,t){var n=(e[1]+e[0])/2,i=e[1]-e[0];return[n-i/2*t,n+i/2*t]},n.midPoint=function(e){return(e[1]+e[0])/2},n.minimumExtent=function(e,t){if(Math.abs(n.rangeExtent(t))>=e)return t;var i=n.midPoint(t),o=e/2;return[i-o,i+o]},n.firstRangeContainedInSecond=function(e,t){var n=e[0],i=e[1],o=t[0],r=t[1];return n>=o&&n<=r&&i>=o&&i<=r},n.inRange=function(e,t){return t>=e[0]&&t<=e[1]},n.reverseRange=function(e){return[e[1],e[0]]},n.rangesOverlap=function(e,t){var n=e[0],i=e[1],o=t[0];return n<=t[1]&&i>=o},n.rangeSubtract=function(e,t){var n=e[0],i=e[1],o=t[0]-1,r=t[1]+1;return[o<n?null:[n,o],r>i?null:[r,i]]},n.clampInRange=function(e,n){return t.clamp(e,n[0],n[1])},Object.freeze(n)})),define("module/core/js/model/openperiod",["require","module/core/js/util/dateutils","module/core/js/util/functional","module/core/js/util/object"],(function(e){"use strict";function t(e,t){e&&t&&(this.start=e,this.end=t,this.dateRange=[e,t])}var n=e("module/core/js/util/dateutils"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/object"),r=t.prototype;return r.start=null,r.end=null,r.dateRange=null,r.accStart=null,r.accEnd=null,r.duration=null,r.preGap=null,r.index=null,r.next=null,r.previous=null,o.defineProperty(r,"accDuration",{configurable:!0,enumerable:!0,get:function(){return this.accEnd-this.accStart},set:i.throwError("AccDuration should not be set explicitly.")}),r.containsDate=function(e){return n.inRange([this.start,this.end],e)},t.naturalOrder=i.ascendingFieldComparator("index"),t.comparatorWithDateIncludingPregap=function(e){var t=this.start-this.preGap;return n.compareToRange([t,this.end],e.getTime())},t.comparatorWithAccTime=function(e){return n.compareToRange([this.accStart,this.accEnd],e)},t.strictContainmentComparatorWithPoint=function(e){return n.compareToRange(this.dateRange,e.date)},r.expandToEndAt=function(e){var t=e-this.end;return t>0&&(this.end=e,this.accEnd+=t,this.dateRange=[this.start,e]),this},r.contractToEndAt=function(e){var t=this.end-e;return t>0&&(this.end=e,this.accEnd-=t,this.dateRange=[this.start,e]),this},Object.seal(r),t})),define("module/core/js/model/block",["require","module/core/js/util/array","module/core/js/util/class","module/core/js/model/datapointlist","module/core/js/util/dateutils","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/numberpairs","module/core/js/util/object","module/core/js/model/openperiod"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n),this.points={},this.loading=t.LOADING_NOT_STARTED}var n=e("module/core/js/util/array"),i=e("module/core/js/util/class"),o=e("module/core/js/model/datapointlist"),r=e("module/core/js/util/dateutils"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/math"),l=e("module/core/js/util/numberpairs"),u=e("module/core/js/util/object"),c=e("module/core/js/model/openperiod"),d=u.isEmpty;i.extend(t,c);var h=t.prototype;return t.PERIODS_PER_BLOCK=60,t.LOADING_NOT_STARTED=Object.freeze({status:"NOT_STARTED",queued:!1,started:!1,loaded:!1,calculated:!1,streaming:!1}),t.QUEUED_FOR_LOADING=Object.freeze({status:"QUEUED",queued:!0,started:!1,loaded:!1,calculated:!1,streaming:!1}),t.LOADING=Object.freeze({status:"LOADING",queued:!0,started:!0,loaded:!1,calculated:!1,streaming:!1}),t.UNPROCESSED=Object.freeze({status:"UNPROCESSED",queued:!0,started:!0,loaded:!0,calculated:!1,streaming:!1}),t.LOADED=Object.freeze({status:"LOADED",queued:!0,started:!0,loaded:!0,calculated:!0,streaming:!1}),t.STREAMING=Object.freeze({status:"STREAMING",queued:!0,started:!0,loaded:!0,calculated:!0,streaming:!0}),t.create=function(e,n){return new t(e,n)},t.comparatorWithDate=function(e){return r.compareToRange(this.dateRange,e)},t.indexJoin=s.plucker("index"),h.loading=null,h.points=null,h.rawPriceData=null,h.lastFullPrice=null,h.lastPriceWithVolume=null,h.lastPrice=null,h.getHCDPreNeighbours=s.returns(Object.freeze([])),h.getHCDPostNeighbours=s.returns(Object.freeze([])),h.getLastPointOfTypeInRange=function(e,t){var i,o,r=this.points[t];return r&&(i=r.points.filter((function(t){return l.inRange(e,t.accTime)})),o=n.lastOf(i))?o:null},h.getLastPointsInRange=function(e){var t,n,i,o=Object.keys(this.points),r={};for(i=0;i<o.length;i++)t=o[i],(n=this.getLastPointOfTypeInRange(e,t))&&(r[t]=n);return d(r)?null:r},h.iterateBackward=function(e){!1!==e(this)&&this.previous&&this.previous.iterateBackward(e)},h.iterateForward=function(e){!1!==e(this)&&this.next&&this.next.iterateForward(e)},h.containsPoints=function(e){var t,n,i=this.points;for(e=e||Object.keys(i),n=0;n<e.length;n++)if((t=i[e[n]])&&t.points.length>0)return!0;return!1},h.setPoints=function(e,t){return t.forEach(s.setAttr("block",this)),this._insertIntoList(e,t)},h.removePoints=function(e){var t=this.points;e.forEach((function(e){delete t[e]}))},h.findPointForTimestamp=function(e){var t,n,i=null;if(!this.points.prices||e<this.start.getTime()||e>=this.end.getTime())return null;for(t=this.points.prices.points,n=0;n<t.length;n++)e>=t[n].timestamp&&(i=t[n]);return i},h.findPreviousPointForTimestamp=function(e){var t,n,i=null;if(!this.points.prices||e<this.start.getTime())return null;if(t=this.points.prices.points,e>=this.end.getTime())return t[t.length-1];for(n=0;n<t.length;n++)e>=t[n].timestamp&&(i=n-1);return null===i||i<0?null:t[i]},h._insertIntoList=function(e,t){var n=this.points[e];return n?n.insertPoints(t):(this.points[e]=new o(t),!0)},h.findPreviousBlocksUntilAccTime=function(e){if(e>=this.accStart)return[];for(var t=[],n=this.previous;n&&(t.unshift(n),!(n.accStart<=e&&e<=n.accEnd));)n=n.previous;return t},h.hasPointType=function(e){return this.loading.loaded&&this.points[e]},t.blocksYDomainForAccRange=function(e,t,n){var i,o,r,s,l,u,c,d,h=1/0,p=-1/0;for(t=t||[],i=0;i<e.length;i++)for(s=e[i],o=0;o<t.length;o++)if(c=t[o],(d=s.points[c])&&(u=d.points))for(r=0;r<u.length;r++)l=u[r],a.between(l.accTime,n[0],n[1])&&(a.isNumber(l.lowPrice)&&l.lowPrice<h&&(h=l.lowPrice),a.isNumber(l.highPrice)&&l.highPrice>p&&(p=l.highPrice));return h!==p?[h,p]:[.9*p,1.1*p]},h.isFirstOfInstrument=function(){return!this.previous},h.isLastOfInstrument=function(){return!this.next},h.initialiseUsingTimeline=function(e,t,n){this.previous=e||null,this.next=t||null,this.previous?(this.index=this.previous.index+1,this.preGap=this.start.getTime()-e.end.getTime()):(this.index=0,this.preGap=0),this.duration=this.end.getTime()-this.start.getTime(),this.accStart=n.asAccTime(this.start),this.accEnd=n.asAccTime(this.end)},Object.seal(h),t})),define("module/core/js/util/timezoneoffsetiterator",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/timeconstants"],(function(e){"use strict";function t(e,t){this.unit=e,this.multiple=t||1,this.period=m.Periods[e]*t,this._transposedDate=new Date}function n(e){n.superclass.constructor.call(this,m.Enum.MILLISECOND,e)}function i(e){i.superclass.constructor.call(this,m.Enum.SECOND,e)}function o(e){o.superclass.constructor.call(this,m.Enum.MINUTE,e)}function r(e){r.superclass.constructor.call(this,m.Enum.HOUR,e)}function s(e){if(1!==e)throw new Error("only multiple of 1 is supported but requested ",e);s.superclass.constructor.call(this,m.Enum.DAY,e)}function a(e){if(1!==e)throw new Error("only multiple of 1 is supported");a.superclass.constructor.call(this,m.Enum.WEEK,e)}function l(e){l.superclass.constructor.call(this,m.Enum.MONTH,e)}function u(e){u.superclass.constructor.call(this,m.Enum.YEAR,e)}function c(){this.multiple=0,this.unit=null}var d=e("module/core/js/util/class"),h=e("module/core/js/util/functional"),p=e("module/core/js/util/math"),m=e("module/core/js/util/timeconstants");t.prototype.unit=null,t.prototype.multiple=null,t.prototype.period=null,t.prototype.next=h.abstractMethod,t.prototype.previous=h.abstractMethod,t.prototype._isStop=h.abstractMethod,t.prototype._transposedDate=null,t.prototype.iterateBetween=function(e,t,n){var i,o=e[0],r=e[1];for(i=this.next(o,t);i<r;i=this.next(i,t)){var s=n(i);if(!1===s)return;i=s||i}},t.prototype.expandDateRangeToIteratorStops=function(e,t){return[this.previous(e[0],t),this.next(e[1],t)]},t.prototype.toString=function(){return"["+[this.constructor.name,":",this.multiple,"x",this.unit].join(" ")+"]"},t.prototype._nextTimeUnit=function(e,t){return p.floorToClosestMultiples(e+t,t)},t.prototype._isMidnight=function(e){return 0===e.getUTCHours()&&0===e.getUTCMinutes()&&0===e.getUTCSeconds()&&0===e.getUTCMilliseconds()},Object.seal(t),Object.seal(t.prototype),d.extend(n,t),n.prototype.next=function(e){return new Date(e.getTime()+this.period)},n.prototype.previous=function(e){return new Date(e.getTime()-this.period)},n.prototype._isStop=h.always,Object.seal(n),Object.seal(n.prototype),d.extend(i,t),i.prototype.next=function(e,t){return this._transposedDate.setTime(e.getTime()+t),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate(),this._transposedDate.getUTCHours(),this._transposedDate.getUTCMinutes(),this._nextTimeUnit(this._transposedDate.getUTCSeconds(),this.multiple))-t)},i.prototype.previous=function(e,t){this._transposedDate.setTime(e.getTime()+t);var n=this._transposedDate.getUTCSeconds();return this._isStop(this._transposedDate)||(n+=1),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate(),this._transposedDate.getUTCHours(),this._transposedDate.getUTCMinutes(),this._nextTimeUnit(n,-this.multiple))-t)},i.prototype._isStop=function(e){return e.getUTCSeconds()%this.multiple==0&&0===e.getUTCMilliseconds()},Object.seal(i),Object.seal(i.prototype),d.extend(o,t),o.prototype.next=function(e,t){return this._transposedDate.setTime(e.getTime()+t),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate(),this._transposedDate.getUTCHours(),this._nextTimeUnit(this._transposedDate.getUTCMinutes(),this.multiple))-t)},o.prototype.previous=function(e,t){this._transposedDate.setTime(e.getTime()+t);var n=this._transposedDate.getUTCMinutes();return this._isStop(this._transposedDate)||(n+=1),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate(),this._transposedDate.getUTCHours(),this._nextTimeUnit(n,-this.multiple))-t)},o.prototype._isStop=function(e){return e.getUTCMinutes()%this.multiple==0&&0===e.getUTCMilliseconds()&&0===e.getUTCSeconds()},Object.seal(o),Object.seal(o.prototype),d.extend(r,t),r.prototype.next=function(e,t){return this._transposedDate.setTime(e.getTime()+t),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate(),this._nextTimeUnit(this._transposedDate.getUTCHours(),this.multiple))-t)},r.prototype.previous=function(e,t){this._transposedDate.setTime(e.getTime()+t);var n=this._transposedDate.getUTCHours();return this._isStop(this._transposedDate)||(n+=1),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate(),this._nextTimeUnit(n,-this.multiple))-t)},r.prototype._isStop=function(e){return e.getUTCHours()%this.multiple==0&&0===e.getUTCMinutes()&&0===e.getUTCSeconds()&&0===e.getUTCMilliseconds()},Object.seal(r),Object.seal(r.prototype),d.extend(s,t),s.prototype.next=function(e,t){return this._transposedDate.setTime(e.getTime()+t),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate()+1)-t)},s.prototype.previous=function(e,t){this._transposedDate.setTime(e.getTime()+t);var n=this._transposedDate.getUTCDate();return this._isStop(this._transposedDate)&&(n-=1),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),n)-t)},s.prototype._isStop=t.prototype._isMidnight,Object.seal(s),Object.seal(s.prototype),d.extend(a,t),a.prototype._alignDateToLastMonday=function(e){var t=e.getUTCDay();return 0===t?e.setUTCDate(e.getUTCDate()-6):e.setUTCDate(e.getUTCDate()+1-t),e},a.prototype.next=function(e,t){return this._transposedDate.setTime(e.getTime()+t),this._alignDateToLastMonday(this._transposedDate),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate()+7)-t)},a.prototype.previous=function(e,t){return this._transposedDate.setTime(e.getTime()+t),this._isStop(this._transposedDate)?new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate()-7)-t):(this._alignDateToLastMonday(this._transposedDate),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._transposedDate.getUTCMonth(),this._transposedDate.getUTCDate())-t))},a.prototype._isStop=function(e){return 1===e.getUTCDay()&&this._isMidnight(e)},Object.seal(a),Object.seal(a.prototype),d.extend(l,t),l.prototype.next=function(e,t){return this._transposedDate.setTime(e.getTime()+t),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._nextTimeUnit(this._transposedDate.getUTCMonth(),this.multiple),1)-t)},l.prototype.previous=function(e,t){this._transposedDate.setTime(e.getTime()+t);var n=this._transposedDate.getUTCMonth();return this._isStop(this._transposedDate)||(n+=1),new Date(Date.UTC(this._transposedDate.getUTCFullYear(),this._nextTimeUnit(n,-this.multiple),1)-t)},l.prototype._isStop=function(e){return e.getUTCMonth()%this.multiple==0&&1===e.getUTCDate()&&this._isMidnight(e)},Object.seal(l),Object.seal(l.prototype),d.extend(u,t),u.prototype.next=function(e,t){return this._transposedDate.setTime(e.getTime()+t),new Date(Date.UTC(this._nextTimeUnit(this._transposedDate.getUTCFullYear(),this.multiple),0,1)-t)},u.prototype.previous=function(e,t){this._transposedDate.setTime(e.getTime()+t);var n=this._transposedDate.getUTCFullYear();return this._isStop(this._transposedDate)||(n+=1),new Date(Date.UTC(this._nextTimeUnit(n,-this.multiple),0,1)-t)},u.prototype._isStop=function(e){return e.getUTCFullYear()%this.multiple==0&&0===e.getUTCMonth()&&1===e.getUTCDate()&&this._isMidnight(e)},Object.seal(u),Object.seal(u.prototype),c.prototype.expandDateRangeToIteratorStops=h.identity,c.prototype.iterateBetween=h.empty,c.prototype.next=h.identity,c.prototype.previous=h.identity,Object.seal(c),Object.seal(c.prototype);var f={},_={AbstractTimezoneOffsetIterator:t};return f[m.Enum.MILLISECOND]=n,f[m.Enum.SECOND]=i,f[m.Enum.MINUTE]=o,f[m.Enum.HOUR]=r,f[m.Enum.DAY]=s,f[m.Enum.WEEK]=a,f[m.Enum.MONTH]=l,f[m.Enum.YEAR]=u,_.getIterator=function(e,t){return new(0,f[e])(t)},_.nullIterator=function(){return new c},Object.seal(_),_})),define("module/core/js/model/intervalsplitter",["require","module/core/js/model/block","module/core/js/util/timeconstants","module/core/js/util/timezoneoffsetiterator"],(function(e){"use strict";function t(e){var t=n.PERIODS_PER_BLOCK*e.period;this._iterator=o.getIterator(i.Enum.MILLISECOND,t)}var n=e("module/core/js/model/block"),i=e("module/core/js/util/timeconstants"),o=e("module/core/js/util/timezoneoffsetiterator");t._getRangesBetween=function(e,t,n){var i,o=e[1],r=null,s=[],a=e[0];return n.iterateBetween(e,t,(function(e){r=[a,e],s.push(r),a=e})),r?(r[1]<o&&(i=[r[1],o],s.push(i)),s):[e]};var r=t.prototype;return r._iterator=null,r.split=function(e){return t._getRangesBetween([e.start,e.end],0,this._iterator).map((function(e){return n.create(e[0],e[1])}))},Object.seal(r),t})),define("module/core/js/util/timeiterator",["require","moment","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/timeconstants"],(function(e){"use strict";function t(e,t,n){if(this.unit=e,this.multiple=t||1,this._timezone=n||"UTC",this.period=f.Periods[e]*t,this.multiple<0)throw new Error("Negative multiples are not supported (attempted "+this.multiple+")");if(Math.floor(this.multiple)!==this.multiple)throw new Error("Fractional multiples are not supported (attempted "+this.multiple+")")}function n(e,t){n.superclass.constructor.call(this,f.Enum.MILLISECOND,e,t)}function i(e,t){if(i.superclass.constructor.call(this,f.Enum.SECOND,e,t),f.Periods.MINUTE%this.period)throw new Error("multiple of "+e+" seconds does not align within a minute");if(this.period>=f.Periods.MINUTE)throw new Error("Using second iterator to handle periods of minute and bigger; use minute iterator instead")}function o(e,t){if(o.superclass.constructor.call(this,f.Enum.MINUTE,e,t),f.Periods.HOUR%this.period)throw new Error("multiple of "+e+" minutes does not align within an hour");if(this.period>=f.Periods.HOUR)throw new Error("Using minute iterator to handle periods of hour and bigger; use hour iterator instead")}function r(e,t){if(r.superclass.constructor.call(this,f.Enum.HOUR,e,t),f.Periods.DAY%this.period)throw new Error("multiple of "+e+" hours does not align within a day");if(this.period>=f.Periods.DAY)throw new Error("Using hour iterator to handle periods of day and bigger; use day iterator instead")}function s(e,t){if(s.superclass.constructor.call(this,f.Enum.DAY,e,t),1!==this.multiple)throw new Error("only multiple of 1 is supported but requested "+e)}function a(e,t){if(a.superclass.constructor.call(this,f.Enum.WEEK,e,t),
1!==this.multiple)throw new Error("only multiple of 1 is supported")}function l(e,t){if(l.superclass.constructor.call(this,f.Enum.MONTH,e,t),12%this.multiple)throw new Error("multiple of "+e+" months does not align within a year");if(this.multiple>=12)throw new Error("Using month iterator to handle periods of year and bigger; use year iterator instead")}function u(e,t){u.superclass.constructor.call(this,f.Enum.YEAR,e,t)}function c(){this.multiple=0,this.unit=null}var d=e("moment"),h=e("module/core/js/util/class"),p=e("module/core/js/util/functional"),m=e("module/core/js/util/math"),f=e("module/core/js/util/timeconstants");t._isMidnight=function(e){return 0===e.hour()&&0===e.minute()&&0===e.second()&&0===e.millisecond()},t._nextTimeUnit=function(e,t){return m.floorToClosestMultiples(e+t,t)},t.prototype.unit=null,t.prototype.multiple=null,t.prototype.period=null,t.prototype._timezone="UTC",t.prototype.next=function(e){var n=d(e).tz(this._timezone),i=this.unit.toLowerCase();return n[i](t._nextTimeUnit(n[i](),this.multiple)).startOf(i),n.toDate()},t.prototype.previous=function(e){var n=d(e).tz(this._timezone),i=this.unit.toLowerCase(),o=n[i]();return this._isStop(n)||(o+=1),n[i](t._nextTimeUnit(o,-this.multiple)).startOf(i),n.toDate()},t.prototype.iterateBetween=function(e,t){var n,i=e[0],o=e[1];for(n=this.next(i);n<o;n=this.next(n)){var r=t(n);if(!1===r)return;n=r||n}},t.prototype.expandDateRangeToIteratorStops=function(e){return[this.previous(e[0]),this.next(e[1])]},t.prototype.toString=function(){return"["+[this.constructor.name,":",this.multiple,"x",this.unit].join(" ")+"]"},t.prototype._isStop=p.abstractMethod,Object.seal(t),Object.seal(t.prototype),h.extend(n,t),n.prototype.next=function(e){return new Date(e.getTime()+this.period)},n.prototype.previous=function(e){return new Date(e.getTime()-this.period)},n.prototype._isStop=p.always,Object.seal(n),Object.seal(n.prototype),h.extend(i,t),i.prototype._isStop=function(e){return e.second()%this.multiple==0&&0===e.millisecond()},Object.seal(i),Object.seal(i.prototype),h.extend(o,t),o.prototype._isStop=function(e){return e.minute()%this.multiple==0&&0===e.millisecond()&&0===e.second()},Object.seal(o),Object.seal(o.prototype),h.extend(r,t),r.prototype.next=function(e){var n=d(e).tz(this._timezone),i=n.hour(),o=t._nextTimeUnit(i,this.multiple)-i,r=n.utcOffset();return n.add(o,"hour").startOf("hour"),r=n.utcOffset()-r,r&&this.multiple>1&&n.subtract(r,"minute"),n.toDate().valueOf()===e.valueOf()&&n.add(this.multiple,"hours"),n.toDate()},r.prototype.previous=function(e){var n=d(e).tz(this._timezone),i=n.hour(),o=t._nextTimeUnit(i+!this._isStop(n),-this.multiple)-i,r=n.utcOffset();return n.add(o,"hour").startOf("hour"),r=n.utcOffset()-r,r&&this.multiple>1&&n.subtract(r,"minute"),n.toDate().valueOf()===e.valueOf()&&n.subtract(this.multiple,"hours"),n.toDate()},r.prototype._isStop=function(e){return e.hour()%this.multiple==0&&0===e.minute()&&0===e.second()&&0===e.millisecond()},Object.seal(r),Object.seal(r.prototype),h.extend(s,t),s.prototype.next=function(e){return d(e).tz(this._timezone).add(1,"days").startOf("day").toDate()},s.prototype.previous=function(e){var t=d(e).tz(this._timezone),n=t.date();return this._isStop(t)&&(n-=1),t.date(n).startOf("day"),t.toDate()},s.prototype._isStop=t._isMidnight,Object.seal(s),Object.seal(s.prototype),h.extend(a,t),a.prototype.next=function(e){var t=d(e).tz(this._timezone);return this._alignDateToLastMonday(t),t.add(7,"days").startOf("day"),t.toDate()},a.prototype.previous=function(e){var t=d(e).tz(this._timezone);return this._isStop(t)?t.subtract(7,"days"):this._alignDateToLastMonday(t),t.startOf("day").toDate()},a.prototype._isStop=function(e){return 1===e.day()&&t._isMidnight(e)},a.prototype._alignDateToLastMonday=function(e){var t=e.day();return 0===t?e.date(e.date()-6):e.date(e.date()+1-t),e},Object.seal(a),Object.seal(a.prototype),h.extend(l,t),l.prototype._isStop=function(e){return e.month()%this.multiple==0&&1===e.date()&&t._isMidnight(e)},Object.seal(l),Object.seal(l.prototype),h.extend(u,t),u.prototype._isStop=function(e){return e.year()%this.multiple==0&&0===e.month()&&1===e.date()&&t._isMidnight(e)},Object.seal(u),Object.seal(u.prototype),c.prototype.expandDateRangeToIteratorStops=p.identity,c.prototype.iterateBetween=p.empty,c.prototype.next=p.identity,c.prototype.previous=p.identity,Object.seal(c),Object.seal(c.prototype);var _={},g={AbstractTimeIterator:t};return _[f.Enum.MILLISECOND]=n,_[f.Enum.TICK]=i,_[f.Enum.SECOND]=i,_[f.Enum.MINUTE]=o,_[f.Enum.HOUR]=r,_[f.Enum.DAY]=s,_[f.Enum.WEEK]=a,_[f.Enum.MONTH]=l,_[f.Enum.YEAR]=u,g.getIterator=function(e,t,n){return new(0,_[e])(t,n)},g.nullIterator=function(){return new c},Object.seal(g),Object.seal(g)})),define("module/core/js/model/resolution",["require","module/core/js/model/intervalsplitter","module/core/js/util/timeconstants","module/core/js/util/timeiterator","module/core/js/util/timezoneoffsetiterator"],(function(e){"use strict";function t(e,t,o){this.id=e,this.periodUnit=t,this.multiple=o||1,this.period=i.Periods[t]*this.multiple,this.intervalSplitter=new n(this)}var n=e("module/core/js/model/intervalsplitter"),i=e("module/core/js/util/timeconstants"),o=e("module/core/js/util/timeiterator"),r=e("module/core/js/util/timezoneoffsetiterator"),s=t.prototype;return s.id=null,s.synthetic=null,s.baseResolution=null,s.periodUnit=null,s.period=null,s.multiple=null,s.intervalSplitter=null,s.userTimeZone=null,s.asSyntheticDerivedFrom=function(e){return this.synthetic=!0,this.baseResolution=e,this},s.asNatural=function(){return this.synthetic=!1,this.baseResolution=this,this},s.getPeriodIterator=function(){return o.getIterator(this.periodUnit,this.multiple,this.userTimeZone)},s.getTimezoneOffsetIterator=function(){var e=this.periodUnit,t=this.multiple;return this.periodUnit===i.Enum.TICK&&(e=i.Enum.SECOND,t=1),r.getIterator(e,t)},Object.seal(s),t})),define("module/core/js/model/resolutionsenum",["require","module/core/js/util/functional","module/core/js/util/object","module/core/js/model/resolution","module/core/js/util/timeconstants"],(function(e){"use strict";var t=e("module/core/js/util/functional"),n=e("module/core/js/util/object"),i=e("module/core/js/model/resolution"),o=e("module/core/js/util/timeconstants"),r={};return r.DEFAULT_RESOLUTION_NAME="FIVE_MINUTES",r.values={},r.values.TICK=new i("t1",o.Enum.TICK).asNatural(),r.values.SECOND=new i("s1",o.Enum.SECOND).asNatural(),r.values.MINUTE=new i("m1",o.Enum.MINUTE).asNatural(),r.values.TWO_MINUTES=new i("m2",o.Enum.MINUTE,2).asSyntheticDerivedFrom(r.values.MINUTE),r.values.THREE_MINUTES=new i("m3",o.Enum.MINUTE,3).asSyntheticDerivedFrom(r.values.MINUTE),r.values.FIVE_MINUTES=new i("m5",o.Enum.MINUTE,5).asNatural(),r.values.TEN_MINUTES=new i("m10",o.Enum.MINUTE,10).asSyntheticDerivedFrom(r.values.FIVE_MINUTES),r.values.FIFTEEN_MINUTES=new i("m15",o.Enum.MINUTE,15).asSyntheticDerivedFrom(r.values.FIVE_MINUTES),r.values.THIRTY_MINUTES=new i("m30",o.Enum.MINUTE,30).asSyntheticDerivedFrom(r.values.FIVE_MINUTES),r.values.HOUR=new i("h1",o.Enum.HOUR).asNatural(),r.values.TWO_HOURS=new i("h2",o.Enum.HOUR,2).asSyntheticDerivedFrom(r.values.HOUR),r.values.THREE_HOURS=new i("h3",o.Enum.HOUR,3).asSyntheticDerivedFrom(r.values.HOUR),r.values.FOUR_HOURS=new i("h4",o.Enum.HOUR,4).asSyntheticDerivedFrom(r.values.HOUR),r.values.DAY=new i("d1",o.Enum.DAY).asNatural(),r.values.WEEK=new i("w1",o.Enum.WEEK).asSyntheticDerivedFrom(r.values.HOUR),r.values.MONTH=new i("M1",o.Enum.MONTH).asSyntheticDerivedFrom(r.values.HOUR),r._mapToStatisticsKey={},r._mapToStatisticsKey[r.values.TICK.id]="TICK_1",r._mapToStatisticsKey[r.values.SECOND.id]="SECOND_1",r._mapToStatisticsKey[r.values.MINUTE.id]="MINUTE_1",r._mapToStatisticsKey[r.values.TWO_MINUTES.id]="MINUTE_2",r._mapToStatisticsKey[r.values.THREE_MINUTES.id]="MINUTE_3",r._mapToStatisticsKey[r.values.FIVE_MINUTES.id]="MINUTE_5",r._mapToStatisticsKey[r.values.TEN_MINUTES.id]="MINUTE_10",r._mapToStatisticsKey[r.values.FIFTEEN_MINUTES.id]="MINUTE_15",r._mapToStatisticsKey[r.values.THIRTY_MINUTES.id]="MINUTE_30",r._mapToStatisticsKey[r.values.HOUR.id]="HOUR_1",r._mapToStatisticsKey[r.values.TWO_HOURS.id]="HOUR_2",r._mapToStatisticsKey[r.values.THREE_HOURS.id]="HOUR_3",r._mapToStatisticsKey[r.values.FOUR_HOURS.id]="HOUR_4",r._mapToStatisticsKey[r.values.DAY.id]="DAY_1",r._mapToStatisticsKey[r.values.WEEK.id]="WEEK_1",r._mapToStatisticsKey[r.values.MONTH.id]="MONTH_1",Object.freeze(r._mapToStatisticsKey),r.valueOf=function(e){var t=r.values[e];if(!t)throw new Error('there is no resolution with id "'+e+'"');return t},r.keyFor=function(e){var t;for(t in r.values)if(e.id===r.values[t].id)return t;return null},r.statisticsKeys=function(){return n.values(r._mapToStatisticsKey)},r.statisticsKeyFor=function(e){return r._mapToStatisticsKey[e.id]||null},r.getResolutionForScale=function(e,t){var n;if(e===o.Enum.TICK&&1==t)n=r.values.TICK;else if(e===o.Enum.SECOND)n=r.values.SECOND;else if(e===o.Enum.MINUTE&&1==t)n=r.values.MINUTE;else if(e===o.Enum.MINUTE&&2==t)n=r.values.TWO_MINUTES;else if(e===o.Enum.MINUTE&&3==t)n=r.values.THREE_MINUTES;else if(e===o.Enum.MINUTE&&5==t)n=r.values.FIVE_MINUTES;else if(e===o.Enum.MINUTE&&10==t)n=r.values.TEN_MINUTES;else if(e===o.Enum.MINUTE&&15==t)n=r.values.FIFTEEN_MINUTES;else if(e===o.Enum.MINUTE&&30==t)n=r.values.THIRTY_MINUTES;else if(e===o.Enum.HOUR&&1==t)n=r.values.HOUR;else if(e===o.Enum.HOUR&&2==t)n=r.values.TWO_HOURS;else if(e===o.Enum.HOUR&&3==t)n=r.values.THREE_HOURS;else if(e===o.Enum.HOUR&&4==t)n=r.values.FOUR_HOURS;else if(e===o.Enum.DAY&&1==t)n=r.values.DAY;else if(e===o.Enum.WEEK&&1==t)n=r.values.WEEK;else{if(e!==o.Enum.MONTH||1!=t)throw new Error('there is no resolution with scale "'+e+'" and multiplier "'+t+'"');n=r.values.MONTH}return n},r.getSupportedResolutions=t.getter("values"),n.recursiveFreeze(r.values),Object.seal(r)})),define("module/core/js/view/renderer/abstractrenderer",["require","module/core/js/util/animation/animationpoller","module/core/js/util/functional"],(function(e){"use strict";function t(e,t,n,i){this.name=e,this.group=t,this._eventBus=n,this._captureZoneManager=i}var n=e("module/core/js/util/animation/animationpoller"),i=e("module/core/js/util/functional");t.naturalOrder=i.ascendingFieldComparator("relativeWeighting");var o=t.prototype;return o.dContainer=null,o.group=null,o.name=null,o.relativeWeighting=0,o.position="body",o._animationPoller=null,o._captureZoneManager=null,o._eventBus=null,o._renderOnFrameEnd=!1,o._subView=null,o._visibleWindow=null,o._presentationController=null,o._presentationModel=null,o._instrumentModel=null,o._indicator=null,o.getSubView=i.getter("_subView"),o.getClassNameForContainer=function(){return this.name},o.setContainer=i.setter("dContainer"),o.setVisibleWindow=i.setter("_visibleWindow"),o.setInstrumentModel=i.setter("_instrumentModel"),o.withAnimationPoller=function(e){return this._animationPoller=e,this._animationPoller.on(n.TRIGGER_RENDER,this._handleRenderTrigger,this),this},o.withIndicator=i.setter("_indicator"),o.withPresentationController=i.setter("_presentationController"),o.withPresentationModel=i.setter("_presentationModel"),o.withPosition=i.setter("position"),o.withRelativeWeighting=i.setter("relativeWeighting"),o.withSubView=i.setter("_subView"),o.destroy=function(){return this.dContainer&&this.dContainer.remove(),this._visibleWindow&&this.stopRedrawingBasedOnChangesInVisibleWindow(),this._animationPoller&&(this._animationPoller.un(null,this),this._animationPoller=null),this._eventBus&&this._eventBus.unsubscribeAll(this),this},o.initDom=i.emptyChainable,o.startRedrawingBasedOnChangesInVisibleWindow=i.empty,o.stopRedrawingBasedOnChangesInVisibleWindow=i.empty,o.render=i.empty,o.renderOnFrameEnd=function(){this._renderOnFrameEnd=!0,this._animationPoller&&this._animationPoller.requestNextStep()},o.updateRenderingSpace=i.empty,o._handleRenderTrigger=function(){this._renderOnFrameEnd&&(this.render(),this._renderOnFrameEnd=!1)},Object.seal(o),t})),define("module/core/js/view/axisconstants",[],(function(){"use strict";function e(e){return parseInt(e,2)}var t={};return t.STATIC=e("0000"),t.MOVED=e("0001"),t.ZOOMED=e("0010"),t.INITIALISED=e("0100"),t.RESIZED=e("1000"),Object.freeze(t)})),define("module/core/js/util/interpolation",[],(function(){"use strict";var e={};return e.linearInterpolation=function(e,t,n){return e+(t-e)*n},e.easedInterpolation=function(t,n,i,o){return e.linearInterpolation(n,i,t(o))},Object.freeze(e)})),define("module/core/js/view/axisanimation",["require","module/core/js/ext/d3","module/core/js/util/animation/animationpoller","module/core/js/view/axisconstants","module/core/js/util/functional","module/core/js/util/interpolation","module/core/js/util/numberpairs","module/core/js/util/object","module/core/js/event/subscribable"],(function(e){"use strict";var t=e("module/core/js/ext/d3"),n=e("module/core/js/util/animation/animationpoller"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/interpolation"),s=e("module/core/js/util/numberpairs"),a=e("module/core/js/util/object"),l=e("module/core/js/event/subscribable"),u=s.pairSame,c=r.linearInterpolation,d=s.rangeExtent,h={},p=0,m={};return m.CHANGED="changed",m.wrap=function(e,t,n,i){var o=function(t){return e(t)};return a.applyTo(o,h),o._delegate=e,o.duration=t,o.ease=n,o._animationNamespace=i+"-"+p,l.prepareInstance(o),a.applyTo(o,e,!0),o.isAnimated=!0,p++,o},h.nice=!1,h.domainSet=!1,h.timeLastExtentChange=-1/0,h.hasExtentChangedSince=function(e){return void 0===e||this.timeLastExtentChange>=e},h.range=function(e){var t=this._delegate.range();if(0===arguments.length)return t;if(isNaN(e[0]))throw new Error("nan range");return this._delegate.range(e),d(t)!==d(e)&&(this.timeLastExtentChange=n.timestamp(),this.fire(m.CHANGED,i.RESIZED)),this},h.withAnimationPoller=o.setter("_animationPoller"),h.withDomainNicing=o.setter("nice"),h.domain=function(e,t,o){if(0===arguments.length)return this._delegate.domain();if(isNaN(e[0]))throw new Error("nan domain");return o||(e=this.domainNice(e)),this.domainSet?this._alreadyGoingTo(e)?this:(this.oldDomain=this._delegate.domain(),this.targetDomain=e,this.isPan=d(this.oldDomain)===d(this.targetDomain),this._animationPoller.killTasks(this._animationNamespace),t?this._step(1,0,n.timestamp()):this._animationPoller.newFixedTimeTask(this._animationNamespace,this._step.bind(this),this.duration),this):(this._delegate.domain(e),this.domainSet=!0,this.timeLastExtentChange=n.timestamp(),this.fire(m.CHANGED,i.MOVED|i.ZOOMED|i.INITIALISED),this)},h.getTargetDomain=function(){return this._animationPoller.hasTasks(this._animationNamespace)?this.targetDomain:this._delegate.domain()},h._alreadyGoingTo=function(e){return u(e,this.getTargetDomain())},h.domainNice=function(e){return this.nice?t.scale.linear().domain(e).nice().domain():e},h._step=function(e,t,n){var o=this.ease(e),r=[c(this.oldDomain[0],this.targetDomain[0],o),c(this.oldDomain[1],this.targetDomain[1],o)],s=i.MOVED;if(isNaN(r[0])||isNaN(r[1]))throw new Error("interpolation could not find a value");this._delegate.domain(r),this.isPan||(this.timeLastExtentChange=n,s|=i.ZOOMED),this.fire(m.CHANGED,s)},Object.freeze(h),m})),define("module/core/js/model/instrumentmodelevents",[],(function(){"use strict";return Object.freeze({INFO_LOADED:"instrumentInfoLoaded",ACTIVE_RESOLUTION_LOADED:"ACTIVE_RESOLUTION_LOADED",BLOCKS_POINTS_ADDED:"BLOCKS_POINTS_ADDED",INTERVALS_LOADED:"INTERVALS_LOADED",RESOLUTION_REMOVED:"RESOLUTION_REMOVED",END_DATE_CHANGED:"END_DATE_CHANGED",NEW_CURRENT_DATA_POINT:"NEW_CURRENT_DATA_POINT",STATUS_OK:"OK",STATUS_DELAYED:"DELAYED",STATUS_REMAPPED:"REMAPPED"})})),define("module/core/js/util/lineartransform",[],(function(){"use strict";var e={};return e.pointerTrackingZoom=function(e,t,n,i,o){var r,s,a,l,u=e[1],c=e[0];return a=(n-o)/(t-i),l=n-a*t,r=1/a*u+-1/a*l,s=1/a*c+-1/a*l,[s,r]},Object.freeze(e)})),define("module/core/js/util/binarysearch",[],(function(){"use strict";function e(n,i,o,r,s){var a,l=~~((s-r)/2+r);return r===s?(a=0===r?t.BEFORE_START:r===i.length?t.AFTER_END:t.NOT_PRESENT,a.lastMidIndex=l,a):(a=o.call(i[l],n,i[l],l,i),a<0?e(n,i,o,r,l):a>0?e(n,i,o,l+1,s):l)}var t={};return t.BEFORE_START={fail:"item would be before start of array"},t.AFTER_END={fail:"item would be after end of array"},t.NOT_PRESENT={fail:"item is not in the array"},t.find=function(t,n,i){return e(t,n,i,0,n.length)},t.findClosestIndex=function(e,n,i){var o=t.find(e,n,i);return t.closestIndex(o,n)},t.closestIndex=function(e,n){return e.fail?e===t.BEFORE_START?0:n.length-1:e},Object.freeze(t)})),define("module/core/js/model/intervals",["require","module/core/js/util/log","module/core/js/util/timeconstants"],(function(e){"use strict";var t=e("module/core/js/util/log"),n=e("module/core/js/util/timeconstants"),i={};return i.logStats=function(e,o,r){var s=i.calculateOpenFraction(e),a=i.calculateMeanOpenIntervalDuration(e),l=i.calculateMeanClosedIntervalDuration(e);t.debug(r,"\tnumber of intervals",e.length,"\n","\topen proportion of time:",(100*s).toFixed(2)+"%\n","\tmean open interval duration (hours)",(a/n.Periods.HOUR).toFixed(2),"\n","\tmean closed interval duration (hours)",(l/n.Periods.HOUR).toFixed(2),"\n","\tmean number of periods per open interval:",(a/o).toFixed(2))},i.calculateOpenFraction=function(e){var t=e[e.length-1],n=e[0],i=t.end-n.start;return t.accEnd/i},i.calculateMeanOpenIntervalDuration=function(e){return e[e.length-1].accEnd/e.length},i.calculateMeanClosedIntervalDuration=function(e){var t=e[e.length-1],n=e[0];return(t.end-n.start-t.accEnd)/e.length},Object.seal(i)})),define("module/core/js/model/timeline",["require","module/core/js/util/array","module/core/js/util/binarysearch","module/core/js/util/functional","module/core/js/model/intervals","module/core/js/model/openperiod"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/array"),i=e("module/core/js/util/binarysearch"),o=e("module/core/js/util/functional"),r=e("module/core/js/model/intervals"),s=e("module/core/js/model/openperiod");t.MAX_DATE_CACHE_SIZE=30,t.findAccTimeOfPoints=function(e,t){return(e[t]||e[Object.keys(e)[0]]).accTime},t.create=function(){return new t};var a=t.prototype;return a.intervals=null,a.hasIntervals=function(){return n.nonEmpty(this.intervals)},a.setIntervals=function(e){return this.intervals=e,this._initCache(),this},a.asAccTime=function(e,t){var n,o=this._searchIntervalsForDate(e);return o.fail?o===i.BEFORE_START?e-this.startDate():t&&o===i.AFTER_END?this.accEnd()+(e-this.endDate()):this.accEnd():(n=this.intervals[o],e.getTime()<=n.start.getTime()?n.accStart:n.accStart+(e.getTime()-n.start.getTime()))},a.isAccTimeValid=function(e){return!0},a.shiftDateToAvailableAccTime=function(e,t,n){return e},a.asDate=function(e){var t=this._intervalIndexContainingAccTime(e),n=this.intervals[t],i=e-n.accStart;return new Date(n.start.getTime()+i)},a.isDateValid=function(e){return!0},a.asTimestamp=function(e){return this.asDate(e).getTime()},a.closestIntervalForDate=function(e){var t=i.closestIndex(this._searchIntervalsForDate(e),this.intervals);return this.intervals[t]},a.stableMillisForAccTimeExtent=function(e){var t=r.calculateMeanOpenIntervalDuration(this.intervals),n=r.calculateMeanClosedIntervalDuration(this.intervals),i=e/t;return e+Math.max(0,i-2)*n},a.getAccRangeForAccTime=function(e,t,n){var i=n/2,o=this.asTimestamp(e);return[this.asAccTime(t.previous(new Date(o)))-i,e+i]},a.startAccTime=o.returns(0),a.accDuration=function(){return this.accEnd()-this.startAccTime()},a.accEnd=function(){return this.intervals?n.lastOf(this.intervals).accEnd:0},a.startDate=function(){return this.intervals[0].start},a.endDate=function(){return n.lastOf(this.intervals).end},a.expandToEndAt=function(e){n.lastOf(this.intervals).expandToEndAt(e),this._searchIntervalsForDate.invalidate()},a.contractToEndAt=function(e){n.lastOf(this.intervals).contractToEndAt(e),this._searchIntervalsForDate.invalidate()},a.destroy=function(){this._searchIntervalsForDate.invalidate&&(this._searchIntervalsForDate.invalidate(),delete this._searchIntervalsForDate),this.intervals=null},a._initCache=function(){"function"==typeof this._searchIntervalsForDate.invalidate?this._searchIntervalsForDate.invalidate():o.addCaching(this,"_searchIntervalsForDate",o.invoker("getTime"),t.MAX_DATE_CACHE_SIZE)},a._intervalIndexContainingAccTime=function(e){return i.findClosestIndex(e,this.intervals,s.comparatorWithAccTime)},a._searchIntervalsForDate=function(e){return i.find(e,this.intervals,s.comparatorWithDateIncludingPregap)},Object.seal(a),Object.seal(t)})),define("module/core/js/model/visibledaterangeevents",[],(function(){"use strict";return Object.freeze({MOVED:"moved",X_AXIS_READY:"xAxisReady",VISIBLE_BLOCKS_POINTS_ADDED:"visibleBlocksPointsAdded",VISIBLE_BLOCKS_CHANGED:"visibleBlocksChanged",MOVED_INTO_BOUNDS:"movedIntoBounds",WIDTH_CHANGED:"widthChanged"})})),define("module/core/js/view/visiblewindow",["require","module/core/js/util/animation/animationpoller","module/core/js/util/array","module/core/js/view/axisanimation","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/instrumentmodelevents","module/core/js/util/lineartransform","module/core/js/util/math","module/core/js/util/numberpairs","module/core/js/util/object","module/core/js/event/subscribable","module/core/js/model/timeline","module/core/js/model/visibledaterangeevents"],(function(e){"use strict";function t(e,t,n,i){this.name=e,this.visibleDateRange=t,this._animationPoller=i,this._eventBus=n,this._pointTypes=Object.create(null),this._dataHigh=Object.create(null),this._dataLow=Object.create(null),this._instrumentModels=this.visibleDateRange.getInstrumentModel(),this._instrumentModels.on(l.BLOCKS_POINTS_ADDED,this._handlePointsAdded,this)}var n=e("module/core/js/util/animation/animationpoller"),i=e("module/core/js/util/array"),o=e("module/core/js/view/axisanimation"),r=e("module/core/js/view/axisconstants"),s=e("module/core/js/util/class"),a=e("module/core/js/util/functional"),l=e("module/core/js/model/instrumentmodelevents"),u=e("module/core/js/util/lineartransform"),c=e("module/core/js/util/math"),d=e("module/core/js/util/numberpairs"),h=e("module/core/js/util/object"),p=e("module/core/js/event/subscribable"),m=e("module/core/js/model/timeline"),f=e("module/core/js/model/visibledaterangeevents"),_=r.STATIC;s.extend(t,p),t.create=function(e,n,i,o){return new t(e,n,i,o)},t.MOVED="moved",t.READY_FOR_RENDER="readyForRender",t.POINT_TYPES_CHANGED="pointTypesChanged",t.HIGH_LOW_CHANGED="highLowChanged";var g=t.prototype;return g.name=null,g.y=null,g._dataHigh=null,g._dataLow=null,g.highLowValueRange=null,g.visibleDateRange=null,g._animationPoller=null,g._eventBus=null,g._isXAxisInitialised=!1,g._isYAxisInitialised=!1,g._pointTypes=null,g.getXScale=function(){return this.visibleDateRange.getScale()},g.addPointTypes=function(e,n,o){var r=this._instrumentModels.getAllActiveInstrumentResolutions(),s=e+"-"+n.id;this._pointTypes[s]||(this._pointTypes[s]=[]),i.inPlaceConcat(this._pointTypes[s],o),r.forEach((function(e){e.blocks&&o.forEach((function(t){this._handlePointsAdded(e.blocks,t,e.getEpic(),n)}),this)}),this),this.fire(t.POINT_TYPES_CHANGED)},g.removePointTypes=function(e,n,o){var r=e+"-"+n.id;this._pointTypes[r]&&(this._pointTypes[r]=i.subtraction(this._pointTypes[r],o)),o.forEach((function(e){this._dataHigh[r]&&delete this._dataHigh[r][e],this._dataLow[r]&&delete this._dataLow[r][e]}),this),this._calculateHighLow(),this.fire(t.POINT_TYPES_CHANGED)},g.timestampToXCoordinate=function(e){var t=this.visibleDateRange.getTimeline(),n=this.getXScale();return Math.floor(n(t.asAccTime(e,!0)))},g.toChartPoint=function(e){return{x:this.timestampToXCoordinate(e.timestamp),y:this.y(e.level)}},g.snapCoordinateToClosestPoint=function(e){var t=this.visibleDateRange.pixelsToAccTime(e),n=t?this._instrumentModels.getDataPointsAtAccTime(t):{};return h.isEmpty(n)?null:m.findAccTimeOfPoints(n,"prices")},g.snapCoordinateToClosestPointWithFallback=function(e){var t=this.visibleDateRange.pixelsToAccTime(e),n=this._instrumentModels.getActiveInstrumentResolution().period,i=this.snapCoordinateToClosestPoint(e);return(!c.isNumber(i)||Math.abs(i-t)>n/2)&&(i=c.roundToClosestMultiples(t,n)),i},g._handlePointsAdded=function(e,t,n,o){var r=n+"-"+o.id;if(this._pointTypes[r]&&i.contains(this._pointTypes[r],t)){var s=e.map(a.totalPlucker("points",t,"high")).filter(c.isFiniteNumber),l=e.map(a.totalPlucker("points",t,"low")).filter(c.isFiniteNumber);this._dataHigh[r]?c.isNumber(this._dataHigh[r][t])&&s.push(this._dataHigh[r][t]):this._dataHigh[r]=Object.create(null),this._dataLow[r]?c.isNumber(this._dataLow[r][t])&&l.push(this._dataLow[r][t]):this._dataLow[r]=Object.create(null),s.length&&l.length&&(this._dataHigh[r][t]=Math.max.apply(Math,s),this._dataLow[r][t]=Math.min.apply(Math,l),this._calculateHighLow())}},g._calculateHighLow=function(){var e,n,i,o,r=[],s=[];for(o in this._dataHigh)r.push(Math.max.apply(Math,h.values(this._dataHigh[o])));for(o in this._dataLow)s.push(Math.min.apply(Math,h.values(this._dataLow[o])));e=Math.max.apply(Math,r),n=Math.min.apply(Math,s),isFinite(n)&&isFinite(e)&&(i=[n,e],this.highLowValueRange&&d.pairSame(i,this.highLowValueRange)||(this.highLowValueRange=i,this.fire(t.HIGH_LOW_CHANGED,i)))},g.getPointTypes=a.getter("_pointTypes"),g.withY=function(e){return this.y=e,this._initAxisChangeHandling(),this},g.height=function(){var e=this.y.range();return e[1]-e[0]},g.width=function(){return this.visibleDateRange.width()},g.dimensions=function(){var e=this.visibleDateRange.startPixels(),t=this.y,n=this.visibleDateRange.width(),i=t.range();return{x:e,y:i[0],width:n,height:i[1]-i[0]}},g.greatestValueShown=function(){return this.y.domainSet?this.y.domain()[0]:void 0},g.leastValueShown=function(){return this.y.domainSet?this.y.domain()[1]:void 0},g.isReadyForRender=function(){return this._isXAxisInitialised&&this._isYAxisInitialised},g.zoom=function(e,t,n,i){var o;e=this.y.invert(e),t=this.y.invert(t),n=this.y.invert(n),i=this.y.invert(i),o=u.pointerTrackingZoom(this.y.domain(),e,t,n,i),o[1]<o[0]&&this.y.domain(o,!0,!0)},g.expandBy=function(e){var t,n=this.y.range()[0],i=this.y.domain();e=this.y.invert(n)-this.y.invert(n+e),t=[i[0]+e,i[1]-e],t[1]<t[0]&&this.y.domain(t,!0,!0)},g.zoomByMultiple=function(e){var t=this.y.domain(),n=d.scaleAboutMidpoint(t,e);this.y.domain(n,!0,!0)},g.fitTo=function(e){var t=this.y.domain(),n=Math.abs(t[0]-t[1]),i=n/2;this.y.domain([e+i,e-i],!1,!0)},g.verticalPan=function(e){var t=this.y.domain(),n=t[0],i=t[1],o=this.y.invert(e)-this.y.invert(0);this.y.domain([n-o,i-o],!0,!0)},g._initAxisChangeHandling=function(){var e,i;this._isXAxisReady()&&(e=r.INITIALISED),this.visibleDateRange.on(f.MOVED,(function(t){e|=t,this._animationPoller.requestNextStep()}),this),this.y.on(o.CHANGED,(function(e){i|=e,this._animationPoller.requestNextStep()}),this),this._animationPoller.on(n.TRIGGER_REPOSITION,(function(){(e||i)&&(this._updateAxisState(e,i),this.fire(t.MOVED,e,i),this._eventBus.publish("chart/view/visibleWindow/moved/"+this.name,[e,i])),e=_,i=_}),this)},g._updateAxisState=function(e,n){this._isXAxisInitialised&&this._isYAxisInitialised||(n&&n&r.INITIALISED&&(this._isYAxisInitialised=!0),this._isXAxisInitialised=this._isXAxisReady(),this._isXAxisInitialised&&this._isYAxisInitialised&&this.fire(t.READY_FOR_RENDER))},g.destroy=function(){this._instrumentModels.un(null,this),this.visibleDateRange.un(null,this),this._animationPoller.un(null,this),this.y&&this.y.un(null,this)},g._isXAxisReady=function(){return!!this.visibleDateRange&&this.visibleDateRange.isXAxisReady()},Object.seal(g),Object.seal(t)})),define("module/core/js/view/projection/abstractspaceprojection",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/oop","module/core/js/event/subscribable","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/oop"),r=e("module/core/js/event/subscribable"),s=e("module/core/js/view/visiblewindow");n.extend(t,r);var a=t.prototype;return t.REPLOT_REQUIRED="replotRequired",a._dContainer=null,a._visibleWindow=null,a.setProjectionArea=i.setter("_dContainer"),a.setVisibleWindow=i.setter("_visibleWindow"),a.maintainBackwardsTransform=function(){return this._visibleWindow.on(s.MOVED,this._handleVisibleWindowMoved,this),this._visibleWindow.on(s.HIGH_LOW_CHANGED,this.positionContainer,this),this._visibleWindowDomainSet()&&this.positionContainer(),this},a._handleVisibleWindowMoved=function(e,t){this._updateBackwardsTransformIfRequired(e,t),this._checkIfReplotRequired(e,t)},a.getClassNameForContainer=o.abstractMethod,a._visibleWindowDomainSet=o.abstractMethod,a.stopMaintainingBackwardsTransform=function(){this._visibleWindow.un(null,this)},a._updateBackwardsTransformIfRequired=o.abstractMethod,a._checkIfReplotRequired=o.abstractMethod,a.positionContainer=o.abstractMethod,Object.seal(a),t})),define("module/core/js/view/renderer/abstractprojectedrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/projection/abstractspaceprojection","module/core/js/util/class","module/core/js/util/oop"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/projection/abstractspaceprojection"),o=e("module/core/js/util/class"),r=e("module/core/js/util/oop");o.extend(t,n);var s=t.prototype;return s._createProjection=r.abstractMethod,s._projection=null,s.setVisibleWindow=function(e){return t.superclass.setVisibleWindow.call(this,e),this._projection=this._createProjection(e),this._projection.setProjectionArea(this.dContainer),this._projection.setVisibleWindow(e),this},s.startRedrawingBasedOnChangesInVisibleWindow=function(){this._projection.maintainBackwardsTransform().on(i.REPLOT_REQUIRED,this._replot,this)},s.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._visibleWindow.un(null,this),this._visibleWindow.visibleDateRange.un(null,this),this._projection.stopMaintainingBackwardsTransform(),this._projection.un(null,this)},s._replot=r.abstractMethod,s.updateRenderingSpace=function(){this._projection.positionContainer()},s.render=r.abstractMethod,s._getForwardsProjectionInX=function(){var e=this._visibleWindow;return this._projection.inX.getForwardsProjectionScale(e,e.getXScale())},s._getForwardsProjectionInY=function(){var e=this._visibleWindow;return this._projection.inY.getForwardsProjectionScale(e,e.y)},Object.seal(s),Object.seal(t)})),define("module/core/js/model/openinterval",["require","module/core/js/util/class","module/core/js/model/openperiod"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n),this.midPoint=new Date((n.getTime()+e.getTime())/2)}var n=e("module/core/js/util/class"),i=e("module/core/js/model/openperiod");n.extend(t,i);var o=t.prototype;return o.initialiseRelativeToNeighbours=function(e,t){var n=this.end.getTime()-this.start.getTime();this.previous=e||null,this.next=t||null,this.previous?(this.index=this.previous.index+1,this.preGap=this.start.getTime()-e.end.getTime(),this.accStart=e.accEnd):(this.index=0,this.preGap=0,this.accStart=0),this.duration=n,this.accEnd=this.accStart+n},o.midPoint=null,Object.seal(o),Object.seal(t)})),define("module/core/js/model/tickinterval",["require","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/log","module/core/js/util/math","module/core/js/util/object","module/core/js/model/openinterval"],(function(e){"use strict";function t(e){if(e.date)return e.date;if(e.timestamp)return new Date(e.timestamp);throw new Error("Trying to get the date out of non-point")}function n(e,t,i){n.superclass.constructor.call(this,e,t),this.numberOfPoints=i,this.tickDatesForAccTime=new Array(i)
;for(var o=0;o<this.tickDatesForAccTime.length;o++)this.tickDatesForAccTime[o]=null}var i=e("module/core/js/util/array"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/log"),a=e("module/core/js/util/math"),l=e("module/core/js/util/object"),u=e("module/core/js/model/openinterval");o.extend(n,u),n.ACCTIME_INCREMENT=1e3;var c=n.prototype;return c.numberOfPoints=0,c.tickDatesForAccTime=null,c.isLoaded=function(){return this.tickDatesForAccTime.some(r.identity)},l.defineProperty(c,"accEnd",{configurable:!0,enumerable:!0,get:function(){return a.isNumber(this.accStart)?this.accStart+this.numberOfPoints*n.ACCTIME_INCREMENT:null},set:r.empty}),c.firstTickDate=function(){return i.firstOf(this.tickDatesForAccTime)||null},c.lastTickDate=function(){return i.lastOf(this.tickDatesForAccTime)||null},c.lastTickAccTime=function(){return a.isNumber(this.accStart)?this.accStart+(this.tickDatesForAccTime.length-1)*n.ACCTIME_INCREMENT:null},c.withTickDates=function(e,n,i){var o,r,l,u;if(a.isNumber(n)||(n=0),a.isNumber(i)||(i=this.numberOfPoints),o=this.tickDatesForAccTime.slice(n,n+i),o.length!==i)return s.error("Addition of new tick dates out of bounds (reaches past the end of the mapping)"),this;if(o.length!==e.length)return s.error("Mismatch between number of ticks and the size of slice within tick date mapping"),this;for(r=0;r<i;r++)l=r+n,u=t(e[r]),this.tickDatesForAccTime[l]&&this.tickDatesForAccTime[l].getTime()!==u.getTime()&&s.error("Entry within tick date mapping at index "+l+" is already set with value "+this.tickDatesForAccTime[l].getTime()+" ("+new Date(this.tickDatesForAccTime[l].getTime())+"). Attempted to set it with: "+u.getTime()+" ("+new Date(u.getTime())+")"),this.tickDatesForAccTime[l]=u;return this},c.expandToEndAt=r.throwError("Expanding tick interval by date not allowed"),c.expandToIncludePoints=function(e,n){if(!i.lastOf(this.tickDatesForAccTime))throw new Error("Expanding interval with no tick dates established yet");var o,r,s=this.lastTickDate(),a=e;for(r=0;r<n.length;r++)(o=t(n[r]))>s&&(this.numberOfPoints++,this.tickDatesForAccTime.push(o),a=Math.max(a,o));a>this.end&&this._setEndDate(new Date(a.valueOf()+1))},c.contractToEndAt=function(e){if(!this.lastTickDate())throw new Error("Contracting interval with no tick dates established yet");var t=this.tickDatesForAccTime.filter((function(t){return t<e}));this._setEndDate(e),this.numberOfPoints-=this.tickDatesForAccTime.length-t.length,this.tickDatesForAccTime=t},c._setEndDate=function(e){e instanceof Date||(e=new Date(e)),this.end=e,this.duration=this.end.getTime()-this.start.getTime(),this.dateRange[1]=this.end},Object.seal(c),Object.seal(n)})),define("module/core/js/model/tickblock",["require","module/core/js/model/block","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object","module/core/js/model/tickinterval"],(function(e){"use strict";function t(e){if(e&&!(e instanceof s))throw new Error("Creating tick block from non-tick interval");t.superclass.constructor.call(this),this.interval=e}var n=e("module/core/js/model/block"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/object"),s=e("module/core/js/model/tickinterval");i.extend(t,n),t.TICKS_PER_BLOCK=60,t.create=function(e){return new t(e)};var a=t.prototype;return a.interval=null,a.numberOfPoints=0,a._getBlockOffsetWithinInterval=function(){for(var e=0,t=this;(t=t.previous)&&t.interval===this.interval;)e+=t.numberOfPoints;return e},a.withNumberOfPoints=function(e){this.numberOfPoints=e,this.accEnd=this.accStart+this.numberOfPoints*s.ACCTIME_INCREMENT},a.withTickDates=function(e){return this.interval.withTickDates(e,this._getBlockOffsetWithinInterval(),this.numberOfPoints),this},r.defineProperties(a,{start:{configurable:!0,enumerable:!0,get:function(){var e;if(this.isFirstInInterval())return this.interval.start;if(e=this.interval.tickDatesForAccTime[this._getBlockOffsetWithinInterval()])return e;throw new Error("Getting start date for tick block in unloaded region")},set:o.throwError("Tick start should not be set explicitly.")},end:{configurable:!0,enumerable:!0,get:function(){var e;if(this.isLastInInterval())return this.interval.end;if(e=this.interval.tickDatesForAccTime[this._getBlockOffsetWithinInterval()+this.numberOfPoints])return new Date(e.getTime());throw new Error("Getting end date for tick block in unloaded region")},set:o.throwError("Tick end should not be set explicitly.")},dateRange:{configurable:!0,enumerable:!0,get:function(){return[this.start,this.end]},set:o.throwError("Tick date range should not be set explicitly.")},preGap:{configurable:!0,enumerable:!0,get:function(){return this.isFirstInInterval()?this.interval.preGap:0},set:o.throwError("Tick pre gap should not be set explicitly.")},duration:{configurable:!0,enumerable:!0,get:function(){return this.end.getTime()-this.start.getTime()},set:o.throwError("Tick duration should not be set explicitly.")}}),a.isFirstInInterval=function(){return!this.previous||this.previous.interval!==this.interval},a.isLastInInterval=function(){return!this.next||this.next.interval!==this.interval},a.getHCDPreNeighbours=function(){for(var e=this,t=[];e.previous&&e.previous.interval===this.interval;)e=e.previous,t.push(e);return t.reverse()},a.getHCDPostNeighbours=function(){for(var e=this,t=[];e.next&&e.next.interval===this.interval;)e=e.next,t.push(e);return t},a.initialiseUsingTimeline=function(e,t){this.previous=e||null,this.next=t||null},Object.seal(a),Object.seal(t)})),define("module/core/js/model/blocks",["require","lodash","module/core/js/util/array","module/core/js/util/binarysearch","module/core/js/model/block","module/core/js/util/functional","module/core/js/util/log","module/core/js/util/math","module/core/js/util/object","module/core/js/model/openperiod","module/core/js/model/tickblock"],(function(e){"use strict";function t(e,t){return 0===c.comparatorWithDateIncludingPregap.call(e,t.date)}var n=e("lodash"),i=e("module/core/js/util/array"),o=e("module/core/js/util/binarysearch"),r=e("module/core/js/model/block"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/log"),l=e("module/core/js/util/math"),u=e("module/core/js/util/object"),c=e("module/core/js/model/openperiod"),d=e("module/core/js/model/tickblock"),h=i.firstOf,p=i.lastOf,m=i.nonEmpty,f={};return f.chunkContiguousBlocks=function(e){for(var t,n=[],i=-1/0,o=e.length,r=0;r<o;r++)t=e[r],t.index!==i+1&&n.push([]),n[n.length-1].push(t),i=t.index;return n},f.updateContiguousBlocksWithDataPoints=function(e,t,n){if(1===e.length)return e[0].setPoints(n,t)?e:[];if(t.length>0&&h(t).accTime<h(e).accStart)throw new Error("first point with date "+h(t).date+" before first block with start date "+h(e).start);var o,r=0,s={},l=[];return t.forEach((function(t){for(;r<e.length&&t.accTime>=e[r].accEnd;)r++;if(!(o=e[r])){if(!(t.date.getTime()<i.lastOf(e).end.getTime()))throw new Error("Attempt to add a point out the provided blocks");return void a.error("Point accTime exceeds block end accTime, but point date falls into the block. Point accTime =",t.accTime)}s[o.index]||(s[o.index]=[],l.push(o)),s[o.index].push(t)})),e.forEach((function(e){e.setPoints(n,s[e.index]||[])})),l},f._hasPointAtBlockStartTime=function(e,t){var n=h(t(e));return n&&n.accTime===e.accStart},f._nextPointAfter=function(e,t){for(var n,i=e;i&&i.next;){if(i=i.next,!i.loading.calculated)return null;if(n=t(i),m(n))return h(n)}return null},f._previousPointBefore=function(e,t){for(var n,i=e;i&&i.previous;){if(i=i.previous,!i.loading.calculated)return null;if(n=t(i),m(n))return p(n)}return null},f.getPrecedingBlockWithPoints=function(e,t){for(var n,i=e;i&&i.previous;){if(i=i.previous,!i.loading.calculated)return i;if(n=t(i),m(n))return i}return null},f.getSucceedingBlockWithPoints=function(e,t){for(var n,i=e;i&&i.next;){if(i=i.next,!i.loading.calculated)return i;if(n=t(i),m(n))return i}return null},f.findContainingBlock=function(e,n,i){var r,s=o.find(e.date,n,c.comparatorWithDateIncludingPregap);if("number"==typeof s)return n[s];if(i||s!==o.BEFORE_START){if(!i&&s===o.AFTER_END)for(r=p(n).next;r;){if(t(r,e))return r;r=r.next}}else for(r=h(n).previous;r;){if(t(r,e))return r;r=r.previous}return null},f.countPoints=function(e,t){if(!e)return 0;var n=s.totalPlucker("points",t,"points","length");return l.sum(e.map(n))},f.getPointsForBlocks=function(e,t){return i.flatten(e.map(s.totalPlucker("points",t,"points")))},f.getTrailingPoints=function(e,t,n){if(0===n)return{points:[],outOfBlocks:!1};for(var i=e,o=[],r=0;i;){if(!(i=i.previous))return{points:f.getPointsForBlocks(o,t),outOfBlocks:!0};if(!i.hasPointType(t))return{points:f.getPointsForBlocks(o,t),outOfBlocks:!1};if(r+=f.countPoints([i],t),o.unshift(i),r>=n)return{points:f.getPointsForBlocks(o,t),outOfBlocks:!1}}},f.getPointTypeAccessor=s.cache((function(e){return function(t){return f._getPointsWithPositiveAccTime(t,e)}}),s.identity),f._hasPositiveAccTime=function(e){return e.accTime>=0},f._getPointsWithPositiveAccTime=function(e,t){return e&&e.points&&e.points[t]&&e.points[t].points?e.accStart<0?e.points[t].points.filter(f._hasPositiveAccTime):e.points[t].points:[]},f.getPointsIncludingPrecedingAndSucceeding=function(e,t){var n=f.getPointTypeAccessor(t),o=i.flatten(e.map(n)),r=f._previousPointBefore(i.firstOf(e),n),s=f._nextPointAfter(i.lastOf(e),n);return r&&o.unshift(r),s&&o.push(s),o},f.appendNewBlockEndingAt=function(e,t,n){var i=p(e),o=r.create(i.end,new Date(t));return o.loading=r.STREAMING,e.push(o),i.next=o,o.initialiseUsingTimeline(i,null,n),o},f.expandToContainDate=function(e,t,n,i){var o=p(e),r=t.getTime(),s=Math.min(p(e).start.getTime()+n,r);for(o.expandToEndAt(new Date(s));o.end<t;)s=Math.min(s+n,r),o=f.appendNewBlockEndingAt(e,s,i)},f.expandTickBlockToContainNumberOfPoints=function(e,t){var n,i,o=e,r=d.TICKS_PER_BLOCK-o.numberOfPoints,s=Math.min(t,r),a=[];for(o.withNumberOfPoints(o.numberOfPoints+s),t-=s;t>0;)n=d.create(o.interval),i=Math.min(t,d.TICKS_PER_BLOCK),n.accStart=o.accEnd,n.withNumberOfPoints(i),t-=i,o.next=n,n.initialiseUsingTimeline(o,null),n.index=o.index+1,o=n,a.push(n),n=null;return a},f.truncateEmptyBlocks=function(e,t,n,o){var r,s,a=0,l=e.length;for(t=t||0;l--;){if(e[l].next=null,e[l].containsPoints()||!(e[l].start>t)){for(r in e[l].points)e[l].points.hasOwnProperty(r)&&(s=e[l].points[r].points,s.length&&(a=Math.max(a,i.lastOf(s).timestamp)));return a=new Date(Math.max(a,t)),n&&(a=n.next(a,o)),e[l].contractToEndAt(a),a}e.pop()}},f.findBlockIndicesContainingAccRange=function(e,t){return[o.findClosestIndex(t[0],e,c.comparatorWithAccTime),o.findClosestIndex(t[1],e,c.comparatorWithAccTime)]},f.findBlockContainingAccTime=function(e,t){return e[o.findClosestIndex(t,e,c.comparatorWithAccTime)]},f.findLastPointsInAccRange=function(e,t){var n=f.findBlockIndicesContainingAccRange(e,t),i=e.slice(n[0],n[1]+1).map((function(e){return e.getLastPointsInRange(t)}));return u.merge.apply(u,i)},f.findLastPointFrom=function(e,t){for(var o,r,a,l;e;){if(l=t?n.pickBy(e.points,(function(e,n){return n===t})):e.points,Object.keys(l).length&&(r=i.flatten(u.values(l).map(s.plucker("points"))),a=r.sort(s.ascendingFieldComparator("accTime")),o=i.lastOf(a)))return o;e=e.previous}return null},f.findBlockContainingDate=function(e,t){return e[o.findClosestIndex(t,e,c.comparatorWithDateIncludingPregap)]},Object.seal(f)})),define("module/core/js/model/datapoint/datapoint",["require","module/core/js/util/functional","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i){if(e instanceof t&&(this===window||void 0===this))return e;if(!e)throw new Error("invalid date");this.date=new Date(e),this.value=n,this.volume=i}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/object"),o={get:n.getter("value"),set:n.throwError("attempt to modify immutable property")};t.accTimeJoin=n.plucker("accTime"),t.comparatorOnDateOldestToNewest=n.ascendingFieldComparator("date"),t.fromOtherPoint=function(e){var n=e.date;return n instanceof Date&&(n=n.getTime()),new t(n,e.value,e.volume||0)};var r=t.prototype;return r.accTime=null,r.date=null,i.defineProperty(r,"highPrice",o),i.defineProperty(r,"lowPrice",o),i.defineProperty(r,"timestamp",{get:function(){return this.date.getTime()},set:n.throwError("attempt to modify immutable property")}),r.value=null,r.volume=null,r.toString=function(){var e="BASE";return e+="|",e+=this.date.getTime(),e+="|",e+=this.value},r.valueEquals=function(e){return this.value===e.value},Object.seal(r),Object.seal(t)})),define("module/core/js/util/svg",["require","module/core/js/util/array","module/core/js/util/functional","module/core/js/util/numberpairs"],(function(e){"use strict";function t(e){return"rotate("+e+")"}function n(e){return"scale("+e+",1)"}function i(e){return"scale(1,"+e+")"}function o(e,t){return"scale("+e+","+t+")"}function r(e){return"translate("+e+")"}function s(e){return"translate(0,"+e+")"}function a(e,t){return"translate("+e+","+t+")"}function l(e){return"url("+(document.querySelector("head base")?window.location.href:"")+"#"+e+")"}function u(e,t,n){n=n||{},t||(t=_);var i=e.range(),o=e.domain();return n.scale=f(i)/t(f(o)),n.translate=t(-o[0]),n}function c(e,t,n,i){var o=u(e,i);return t(o.scale)+n(o.translate)}function d(e,t,n,i,r,s){var l=u(e,n),c=u(t,i);return o(r(l.scale),s(c.scale))+a(r(l.translate),s(c.translate))}var h=e("module/core/js/util/array"),p=e("module/core/js/util/functional"),m=e("module/core/js/util/numberpairs"),f=m.rangeExtent,_=p.identity,g=Object.freeze([1,0,0,1,0,0]),v=h.shallowCopy(g),y=h.shallowCopy(g),M=h.shallowCopy(g),b={};return b.svgRotateAttr=t,b.svgScaleAttrX=n,b.svgScaleAttrY=i,b.svgScaleAttrXY=o,b.svgTranslateAttrX=r,b.svgTranslateAttrY=s,b.svgTranslateAttrXY=a,b.localUrlRef=l,b.linearAxisToSvgScaleAndTranslate=u,b.linearXAxisToSvgTransform=function(e,t){return c(e,n,r,t)},b.linearYAxisToSvgTransform=function(e,t){return c(e,i,s,t)},b.linearAxisPairToSvgTransform=d,b.xyTransform=function(e,t,n,i,o,r){return M[0]=n(e),M[3]=r(i),M[4]=n(e*t),M[5]=r(i*o),"matrix("+M.join(",")+")"},b.xTransform=function(e,t,n){return v[0]=n(e),v[4]=n(e*t),"matrix("+v.join(",")+")"},b.yTransform=function(e,t,n){return y[3]=n(e),y[5]=n(e*t),"matrix("+y.join(",")+")"},b.getTranslateX=function(e){var t=/translate\(([\d\-\.]+)[,\s*\d\-\.+]*\)/.exec(e);return t?Number(t[1]):0},b.getTranslateY=function(e){var t=/translate\([\d\-\.]+,\s*([\d\-\.]+)\)/.exec(e);return t?Number(t[1]):0},b.getScaleX=function(e){var t=/scale\(([\d\-\.]+)[,\s*\d\-\.+]*\)/.exec(e);return t?Number(t[1]):1},b.getScaleY=function(e){var t=/scale\([\d\-\.]+,\s*([\d\-\.]+)\)/.exec(e);return t?Number(t[1]):1},b.getRotation=function(e){var t=/rotate\(([\d\-\.]+)\)/.exec(e);return t?Number(t[1]):0},b.createLinearGradient=function(e,t,n,i,o){var r=e.append("svg:linearGradient").attr({id:t,class:n,x1:"0%",y1:"0%",x2:"0%",y2:"100%"});r.append("svg:stop").attr({offset:"0%","stop-color":i}),r.append("svg:stop").attr({offset:"100%","stop-color":o})},b.getBBox=function(e){var t;try{t=e.getBBox()}catch(e){t={x:0,y:0,width:0,height:0}}return t},b.getPolygonAttrString=function(e){var t,n,i="";for(t=0;t<e.length;t++)n=e[t],i+=n.x+","+n.y+" ";return i},Object.freeze(b)})),define("module/core/js/view/renderer/abstractblockrenderer",["require","module/core/js/view/renderer/abstractprojectedrenderer","module/core/js/view/axisconstants","module/core/js/model/block","module/core/js/model/blocks","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/core/js/util/functional","module/core/js/util/svg","module/core/js/model/visibledaterangeevents","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o,s){t.superclass.constructor.apply(this,arguments),s&&(this._pointType=s,this._accessor=r.getPointTypeAccessor(s))}var n=e("module/core/js/view/renderer/abstractprojectedrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/model/block"),r=e("module/core/js/model/blocks"),s=e("module/core/js/util/class"),a=e("module/core/js/model/datapoint/datapoint"),l=e("module/core/js/util/functional"),u=e("module/core/js/util/svg"),c=e("module/core/js/model/visibledaterangeevents"),d=e("module/core/js/view/visiblewindow");s.extend(t,n);var h=t.prototype;return h.name=null,h._dBlocks=null,h._accessor=null,h._pointType=null,h._blockElementType="svg:g",h._baseAccTime=0,h._baseAccTimeChanged=!1,h.getPointType=l.getter("_pointType"),h.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._visibleWindow.on(d.MOVED,this._handleVisibleWindowMoved,this),this._visibleWindow.visibleDateRange.on(c.VISIBLE_BLOCKS_POINTS_ADDED+"-"+this._pointType+"-"+this._indicator.resolution.id,this._handleNewPoints,this),this._visibleWindow.visibleDateRange.on(c.VISIBLE_BLOCKS_CHANGED,this._handleVisibleBlocksChanged,this),this._handleVisibleBlocksChanged()},h._handleVisibleWindowMoved=function(e){e&(i.RESIZED|i.ZOOMED)&&this._positionBlocks(this._dBlocks)},h._handleVisibleBlocksChanged=function(){var e=this._visibleWindow.visibleDateRange.getVisibleBlocks();this._baseAccTime=e.length?e[0].accStart:null,this._baseAccTimeChanged=!0,this.renderOnFrameEnd()},h._handleNewPoints=function(e){this._refreshChangedBlocks(e),this.renderOnFrameEnd()},h._refreshChangedBlocks=function(e){this._dBlocks.data(e,o.indexJoin).remove(),this._dBlocks=this.dContainer.selectAll(".block")},h._useBlock=l.always,h._bindBlockData=function(e){var t=this._visibleWindow.visibleDateRange.getVisibleBlocks(this._indicator.epic,this._indicator.resolution).filter(this._useBlock,this);return e.data(t,o.indexJoin)},h.setContainer=function(e){return this._dBlocks=e.selectAll(".block"),t.superclass.setContainer.apply(this,arguments),this},h.render=function(){this._dBlocks=this._bindBlockData(this._dBlocks),this._renderBlocks(this._dBlocks)},h._handleEntrySet=function(e){var t,n=e.enter();return n.empty()?this:(t=n.append(this._blockElementType).attr("class","block"),this._positionBlocks(t),this._initNewBlocks(t),this)},h._renderBlocks=function(e){this._baseAccTimeChanged&&(this._baseAccTimeChanged=!1,this._positionBlocks(e)),this._handleEntrySet(e),e.exit().remove()},h._initNewBlocks=l.empty,h._isRelative=function(){return this._projection&&this._projection.inX&&this._projection.inX.isRelative},h._positionBlocks=function(e){var t,n,i;this._isRelative()&&(n=this._getForwardsProjectionInX(),i=this._projection.inX.roundValue,t=n(this._baseAccTime),e.attr("transform",(function(e){return u.svgTranslateAttrX(i(n(e.accStart)-t))})))},h._selectPointsInBlocks=function(e){return e.selectAll(".point").data(this._accessor,a.accTimeJoin)},Object.seal(h),Object.seal(t)})),define("module/core/js/util/browsercapabilities",[],(function(){"use strict";function e(){this._testSvgElement=document.createElementNS?document.createElementNS("http://www.w3.org/2000/svg","g"):null}var t,n=e.prototype;return n._testSvgElement=null,e.getInstance=function(){return t||(t=new e),t},n.supportsSvgNonScalingStroke=function(){return this._testSvgElement&&void 0!==this._testSvgElement.style.vectorEffect},Object.seal(n),Object.seal(e)})),define("module/core/js/view/chartanimationconstants",[],(function(){"use strict";return{ANIM_DURATION:300,ANIM_EASE:"cubic-in-out"}})),define("module/core/js/model/datapoint/hlocdatapoint",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/core/js/util/math","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i,o,r,s,a,l,u){if(e instanceof t&&(this===window||void 0===this))return e;t.superclass.constructor.call(this,e,n,i),this.openPrice=s,this.closePrice=a,this.highPrice=o,this.lowPrice=r,this.lastRawPrice=l||null,this.artificial=u||!1,this._analyseHloc()}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/core/js/util/math"),r=e("module/core/js/util/object");n.extend(t,i),t.UP="up",t.DOWN="down",t.NO_MOVEMENT="noMovement",t.fromOtherPoint=function(e){var n=e.date,i=o.isNumber(e.closePrice)?e.closePrice:e.value,r=o.isNumber(e.openPrice)?e.openPrice:i,s=o.isNumber(e.highPrice)?e.highPrice:Math.max(r,i),a=o.isNumber(e.lowPrice)?e.lowPrice:Math.min(r,i);return n instanceof Date&&(n=n.getTime()),new t(n,e.value,e.volume||0,s,a,r,i,e.lastRawPrice,e.artificial)},t._verySmallMovement=function(e){return Math.abs(e)<1e-6};var s=t.prototype;return s.artificial=!1,s.lastRawPrice=null,s.closePrice=null,s.direction=null,s.highOpenClose=null,r.defineProperty(s,"highPrice",{writable:!0,enumerable:!0,configurable:!0,value:null}),s.isZeroMovement=!1,s.lowOpenClose=null,r.defineProperty(s,"lowPrice",{writable:!0,enumerable:!0,configurable:!0,value:null}),s.openPrice=null,s.rangeGoesOutsideOpenClose=!1,s.toString=function(){var e="HLOC";return e+="|",e+=this.date.getTime(),e+="|",e+=this.highPrice,e+="|",e+=this.lowPrice,e+="|",e+=this.openPrice,e+="|",e+=this.closePrice},s.valueEquals=function(e){return this.openPrice===e.openPrice&&this.closePrice===e.closePrice&&this.highPrice===e.highPrice&&this.lowPrice===e.lowPrice&&this.volume===e.volume&&this.lastRawPrice.open.valueEquals(e.lastRawPrice.open)&&this.lastRawPrice.close.valueEquals(e.lastRawPrice.close)&&this.lastRawPrice.high.valueEquals(e.lastRawPrice.high)&&this.lastRawPrice.low.valueEquals(e.lastRawPrice.low)},s._analyseHloc=function(){var e=this.closePrice-this.openPrice;this.isZeroMovement=t._verySmallMovement(e),this.isZeroMovement?(this.direction=t.NO_MOVEMENT,this.highOpenClose=this.closePrice,this.lowOpenClose=this.openPrice):e>0?(this.direction=t.UP,this.highOpenClose=this.closePrice,this.lowOpenClose=this.openPrice):(this.direction=t.DOWN,this.highOpenClose=this.openPrice,this.lowOpenClose=this.closePrice),null===this.highPrice&&(this.highPrice=this.highOpenClose),null===this.lowPrice&&(this.lowPrice=this.lowOpenClose),this.rangeGoesOutsideOpenClose=this.highOpenClose!==this.highPrice||this.lowOpenClose!==this.lowPrice},Object.seal(s),Object.seal(t)})),define("module/core/js/view/renderer/hloctransitionhelper",["require","module/core/js/ext/d3","module/core/js/view/chartanimationconstants","module/core/js/util/functional","module/core/js/model/datapoint/hlocdatapoint","module/core/js/util/interpolation"],(function(e){"use strict";function t(e,t){this._currentPoint=r.fromOtherPoint(e),this._currentPoint.accTime=e.accTime,this._newPoint=t,this._oldPoint=e}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/chartanimationconstants"),o=e("module/core/js/util/functional"),r=e("module/core/js/model/datapoint/hlocdatapoint"),s=e("module/core/js/util/interpolation");t.create=function(e,n){return new t(e,n)};var a=t.prototype;return a._currentPoint=null,a._newPoint=null,a._oldPoint=null,a._dPointElement=null,a._renderer=null,a.withPointElement=function(e){return this._dPointElement=n.select(e),this},a.withRenderer=o.setter("_renderer"),a.abort=function(){this._renderer._animationPoller&&this._renderer._animationPoller.killTasks(this._renderer.name+"-transition-"+this._currentPoint.accTime)},a.startTransition=function(){return this._interpolate=s.easedInterpolation.bind(s,n.ease(i.ANIM_EASE)),this._dPointElement.datum(this._currentPoint),this._renderer._animationPoller.newFixedTimeTask(this._renderer.name+"-transition-"+this._currentPoint.accTime,this._step.bind(this),i.ANIM_DURATION),this},a._interpolate=null,a._replacePoint=function(){var e,t=this._dPointElement.node(),i=t.parentNode;i.removeChild(t),e=n.select(this._renderer._createNewPoint(this._currentPoint)).classed("point",!0).datum(this._currentPoint),i.appendChild(e.node()),this._renderer._positionPointsHorizontally(e),this._dPointElement=e},a._step=function(e){var t=this._currentPoint,n=this._newPoint,i=this._oldPoint,o=t.direction,r=t.rangeGoesOutsideOpenClose;return e>=1?(this._currentPoint=this._newPoint,this._dPointElement.datum(this._newPoint)):(t.highPrice=this._interpolate(i.highPrice,n.highPrice,e),t.lowPrice=this._interpolate(i.lowPrice,n.lowPrice,e),t.openPrice=this._interpolate(i.openPrice,n.openPrice,e),t.closePrice=this._interpolate(i.closePrice,n.closePrice,e),t._analyseHloc()),this._currentPoint.direction===o&&this._currentPoint.rangeGoesOutsideOpenClose===r||this._replacePoint(),this._renderer._positionPointsVertically(this._dPointElement),e>=1&&(this._renderer._clearTransition(this._oldPoint.accTime),!0)},Object.seal(a),Object.seal(t)})),define("module/core/js/view/projection/ordinals/abstractordinalprojection",["require","module/core/js/util/oop"],(function(e){"use strict";function t(){if(this.backwardsTransformNeedsUpdateOnChange.isAbstract||this.getBackwardsTransformComponents.isAbstract||this.getForwardsProjectionScale.isAbstract||this.roundValue.isAbstract||this.contentsNeedReplottingAfterChange.isAbstract)throw new Error("one or more abstract methods have not been overridden in this instantiated AbstractOrdinalProjection subclass")}var n=e("module/core/js/util/oop"),i=t.prototype;return i.forwardsUnchanging=!1,i.isRelative=!1,i.backwardsTransformNeedsUpdateOnChange=i.getBackwardsTransformComponents=i.getForwardsProjectionScale=i.roundValue=i.visibleRoundValue=i.contentsNeedReplottingAfterChange=n.abstractMethod,Object.seal(i),Object.seal(t)})),define("module/core/js/view/projection/ordinals/invertedscreenprojection",["require","module/core/js/view/projection/ordinals/abstractordinalprojection","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/math","module/core/js/util/numberpairs"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/projection/ordinals/abstractordinalprojection"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/util/math"),s=e("module/core/js/util/numberpairs"),a=Object.seal({scale:-1,translate:0}),l=i.ZOOMED|i.RESIZED;o.extend(t,n);var u=t.prototype;return u.name="InvertedScreenProjection",u.backwardsTransformNeedsUpdateOnChange=function(e){return!!(e&l)},u.getBackwardsTransformComponents=function(e,t){var n=s.rangeExtent(t.range());return a.translate=-n,a},u.roundValue=Math.round,u.visibleRoundValue=function(e){return Math.round(r.enforceMinimumValue(e,1))},u.getForwardsProjectionScale=function(e,t){return function(e){return s.rangeExtent(t.range())-t(e)}},u.contentsNeedReplottingAfterChange=function(e){return!!e},Object.seal(u),t})),define("module/core/js/view/projection/ordinals/timeoffsetprojection",["require","module/core/js/view/projection/ordinals/abstractordinalprojection","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math"],(function(e){"use strict";function t(){Object.freeze(this)}var n=e("module/core/js/view/projection/ordinals/abstractordinalprojection"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/math"),a=Object.seal({translate:0,scale:1}),l=i.ZOOMED|i.RESIZED,u=Math.pow(10,-1);t.create=function(){return new t},o.extend(t,n);var c=t.prototype;return c.name="TimeOffsetProjection",c.backwardsTransformNeedsUpdateOnChange=function(e){return!!e},c.getBackwardsTransformComponents=function(e,t){var n=e.visibleDateRange.accStart();return a.translate=t(0)-t(n),a},c.getForwardsProjectionScale=function(e,t){return function(e){var n=t.domain()[0];return t(e+n)}},c.roundValue=r.invoker("toFixed",1),c.visibleRoundValue=function(e){return s.enforceMinimumValue(e,u).toFixed(1)},c.contentsNeedReplottingAfterChange=function(e){return!!(e&l)},Object.seal(c),t})),define("module/core/js/view/projection/ordinals/relativetimeoffsetprojection",["require","module/core/js/util/class","module/core/js/view/projection/ordinals/timeoffsetprojection"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/projection/ordinals/timeoffsetprojection"),o=Object.seal({scale:1,translate:0});n.extend(t,i),t.create=function(){return new t};var r=t.prototype;return r.isRelative=!0,r.getBackwardsTransformComponents=function(e,t){var n,i=e.visibleDateRange.getVisibleBlocks(),r=e.visibleDateRange.accStart();return n=i.length?i[0].accStart:0,o.translate=t(n)-t(r),o},Object.seal(r),Object.seal(t)})),define("module/core/js/view/projection/rounding",["require","module/core/js/util/functional","module/core/js/util/math"],(function(e){"use strict";var t=e("module/core/js/util/functional"),n=e("module/core/js/util/math"),i={};return i.roundForPricePlotting=t.invoker("toPrecision",7),i.roundForTimePlotting=t.invoker("toFixed",6),i.roundForGradientStops=t.invoker("toPrecision",6),i.crossBrowserSafeRounding=function(e){var t=Math.ceil(n.logWithBase(10,e));return Math.pow(10,Math.max(t-1,1))},Object.freeze(i)})),define("module/core/js/view/projection/ordinals/xmodelprojection",["require","module/core/js/view/projection/ordinals/abstractordinalprojection","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/projection/rounding","module/core/js/util/svg"],(function(e){"use strict";function t(e,t){this.roundValue=this.visibleRoundValue=e,t&&(this._projectionScale=function(e){return e/t})}var n=e("module/core/js/view/projection/ordinals/abstractordinalprojection"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/view/projection/rounding"),s=e("module/core/js/util/svg"),a=Object.seal({scale:0,translate:0});i.extend(t,n),t.createForShowingTimeInX=function(e){var n=r.crossBrowserSafeRounding(e);return new t(r.roundForTimePlotting,n)};var l=t.prototype;return l.name="XModelProjection",l._scalingFactor=o.identity,l.backwardsTransformNeedsUpdateOnChange=function(e){return!!e},l.getBackwardsTransformComponents=function(e,t){return s.linearAxisToSvgScaleAndTranslate(t,this._projectionScale,a)},l._projectionScale=o.identity,l.getForwardsProjectionScale=function(e,t){return this._projectionScale},l.forwardsUnchanging=!0,l.contentsNeedReplottingAfterChange=o.returns(!1),Object.seal(l),Object.seal(t)})),define("module/core/js/view/projection/ordinals/relativexmodelprojection",["require","module/core/js/ext/d3","module/core/js/util/class","module/core/js/view/projection/rounding","module/core/js/view/projection/ordinals/xmodelprojection"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/util/class"),o=e("module/core/js/view/projection/rounding"),r=e("module/core/js/view/projection/ordinals/xmodelprojection"),s=n.scale.linear();i.extend(t,r),t.createForShowingTimeInX=function(e){var n=o.crossBrowserSafeRounding(e);return new t(o.roundForTimePlotting,n)};var a=t.prototype;return a.isRelative=!0,a.getBackwardsTransformComponents=function(e,n){var i,o,r=e.visibleDateRange.getVisibleBlocks();return r.length&&(o=r[0].accStart,i=n.domain(),n=s.domain([i[0]-o,i[1]-o]).range(n.range())),t.superclass.getBackwardsTransformComponents.call(this,e,n)},Object.seal(a),Object.seal(t)})),define("module/core/js/view/projection/xyprojection",["require","module/core/js/view/projection/abstractspaceprojection","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/svg"],(function(e){"use strict";function t(e,t){this.inX=e,this.inY=t}var n=e("module/core/js/view/projection/abstractspaceprojection"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/util/svg");o.extend(t,n);var s=t.prototype;return s.inX=null,s.inY=null,s._visibleWindowDomainSet=function(){return this._visibleWindow.isReadyForRender()},s._updateBackwardsTransformIfRequired=function(e,t){void 0!==e&&void 0!==t&&(this.inX.backwardsTransformNeedsUpdateOnChange(e)||this.inY.backwardsTransformNeedsUpdateOnChange(t))&&this.positionContainer()},s.positionContainer=function(){
var e=this._visibleWindow,t=this.inX.getBackwardsTransformComponents(e,e.getXScale()),o=t.scale,s=t.translate,a=this.inY.getBackwardsTransformComponents(e,e.y),l=a.scale,u=a.translate,c=this.inX.contentsNeedReplottingAfterChange(i.RESIZED),d=this.inY.contentsNeedReplottingAfterChange(i.RESIZED);this._dContainer.attr("transform",r.xyTransform(o,s,this.inX.roundValue,l,u,this.inY.roundValue)),(c||d)&&this.fire(n.REPLOT_REQUIRED,c,d)},s.getClassNameForContainer=function(){return"xyProjected x"+this.inX.name+" y"+this.inY.name},s._checkIfReplotRequired=function(e,t){var i=this.inX.contentsNeedReplottingAfterChange(e),o=this.inY.contentsNeedReplottingAfterChange(t);(i||o)&&this.fire(n.REPLOT_REQUIRED,i,o)},Object.seal(s),Object.seal(t)})),define("module/core/js/util/geometry",["require","module/core/js/util/math"],(function(e){"use strict";var t=e("module/core/js/util/math"),n={};return n.lineSegmentsIntersection=function(e,t,i,o,r,s,a,l){var u=n._getSegmentsIntersection(e,t,i,o,r,s,a,l);return u.onLineOne&&u.onLineTwo?{x:u.x,y:u.y}:null},n.lineIntersection=function(e,t,i,o,r,s,a,l){var u=n._getSegmentsIntersection(e,t,i,o,r,s,a,l);return u.x&&u.y?{x:u.x,y:u.y}:null},n.lineSegmentAndLineIntersection=function(e,t,i,o,r,s,a,l){var u=n._getSegmentsIntersection(e,t,i,o,r,s,a,l);return u.onLineOne?{x:u.x,y:u.y}:null},n.segmentIntersectsRectangle=function(e,t,n,i,o,r,s,a){var l,u,c,d=Math.min(e,n),h=Math.max(e,n),p=t,m=i,f=n-e;return h>s&&(h=s),d<o&&(d=o),!(d>h)&&(Math.abs(f)>1e-7&&(u=(i-t)/f,c=t-u*e,p=u*d+c,m=u*h+c),p>m&&(l=m,m=p,p=l),m>a&&(m=a),p<r&&(p=r),!(p>m))},n.slopeInterceptLineRectangleIntersection=function(e,n,i,o,r,s,a){var l=[],u=e*o+n,c=e*s+n,d=(r-n)/e,h=(a-n)/e;return t.isNumber(i)?(i>=o&&i<=s&&(l.push({x:i,y:r}),l.push({x:i,y:a})),l):(u>=r&&u<=a&&l.push({x:o,y:u}),c>=r&&c<=a&&l.push({x:s,y:c}),l.length<2&&d>=o&&d<=s&&l.push({x:d,y:r}),l.length<2&&h>=o&&h<=s&&l.push({x:h,y:a}),l)},n.rectanglesIntersect=function(e,t){var n=e.x2<t.x1,i=e.x1>t.x2,o=e.y2<t.y1,r=e.y1>t.y2;return!(n||i||o||r)},n.pointToPointLineRectangleIntersection=function(e,t,i,o,r,s,a,l){var u=NaN,c=NaN,d=NaN;return 0==i-e?d=e:(u=(o-t)/(i-e),c=t-u*e),n.slopeInterceptLineRectangleIntersection(u,c,d,r,s,a,l)},n.distancePointToSegment=function(e,t,n,i,o,r){var s,a,l=e-n,u=t-i,c=o-n,d=r-i,h=l*c+u*d,p=c*c+d*d,m=h/p;m<0||n===o&&i===r?(s=n,a=i):m>1?(s=o,a=r):(s=n+m*c,a=i+m*d);var f=e-s,_=t-a;return Math.sqrt(f*f+_*_)},n.distancePointToPoint=function(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))},n.getMidPointOfTwoPoints=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},n.movePointBy=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},n.getVector=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},n.findNearestPoint=function(e,t,i){var o,r={point:null,distance:1/0};return i.forEach((function(i){(o=n.distancePointToPoint(e,t,i.x,i.y))<r.distance&&(r.distance=o,r.point=i)})),r},n.getLinearFunctionComponents=function(e,t){var n,i;return n=(t[1]-t[0])/(e[1]-e[0]),i=t[0]-n*e[0],{scale:n,translate:i}},n.isPointInRectangle=function(e,t,n,i,o,r){return e>=n&&e<=o&&t>=i&&t<=r},n.isPointInTriangle=function(e,t,n,i,o,r,s,a){var l=.5*(-r*s+i*(-o+s)+n*(r-a)+o*a),u=l<0?-1:1,c=(i*s-n*a+(a-i)*e+(n-s)*t)*u,d=(n*r-i*o+(i-r)*e+(o-n)*t)*u;return 0===l&&0===c&&0===d?!(e!==n||t!==i):c>=0&&d>=0&&c+d<=2*l*u},n.pointInOval=function(e,t,n,i,o,r){return Math.pow(e-n,2)/Math.pow(o,2)+Math.pow(t-i,2)/Math.pow(r,2)<=1},n.calculateBottomLeftAnchoringPointWithBoundaryConstraints=function(e,t,n){var i=e.y+e.height,o=e.x,r=i+t.height,s=o+t.width,a=n.y+n.height,l=n.x+n.width;return r>a&&(i-=r-a),s>l&&(o-=s-l),{top:i,left:o}},n._getSegmentsIntersection=function(e,t,n,i,o,r,s,a){var l,u,c,d,h,p={x:null,y:null,onLineOne:!1,onLineTwo:!1};return 0===(l=(a-r)*(n-e)-(s-o)*(i-t))?p:(d=t-r,h=e-o,u=(s-o)*d-(a-r)*h,c=(n-e)*d-(i-t)*h,d=u/l,h=c/l,p.x=e+d*(n-e),p.y=t+d*(i-t),0<d&&d<1&&(p.onLineOne=!0),0<h&&h<1&&(p.onLineTwo=!0),p)},Object.seal(n)})),define("module/core/js/view/projection/ordinals/ymodelprojection",["require","module/core/js/ext/d3","module/core/js/view/projection/ordinals/abstractordinalprojection","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/util/numberpairs","module/core/js/view/projection/rounding","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,t){this.roundValue=this.visibleRoundValue=e,this._projectionScale=this._projectionScale.bind(this),t.on(c.HIGH_LOW_CHANGED,this._highLowChanged,this),t.highLowValueRange&&this._highLowChanged(t.highLowValueRange)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/projection/ordinals/abstractordinalprojection"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/geometry"),l=e("module/core/js/util/numberpairs"),u=e("module/core/js/view/projection/rounding"),c=e("module/core/js/view/visiblewindow");r.extend(t,i),t.DEFAULT_TRANSFORM_COMPONENTS=Object.freeze({scale:1,translate:0}),t.INTERMEDIATE_SCALE=Object.freeze([1e3,0]),t.createForShowingValueInY=function(e){return new t(u.roundForPricePlotting,e)};var d=t.prototype;return d.name="YModelProjection",d._scale=null,d._highLowChanged=function(e){this._scale||(this._scale=n.scale.linear().range(t.INTERMEDIATE_SCALE)),this._isReplotNeeded=!0,this._scale.domain(l.reverseRange(e))},d.getForwardsProjectionScale=s.getter("_projectionScale"),d.forwardsUnchanging=!1,d._isReplotNeeded=!1,d.contentsNeedReplottingAfterChange=function(){return!!this._isReplotNeeded&&(this._isReplotNeeded=!1,!0)},d.backwardsTransformNeedsUpdateOnChange=function(e){return!!(e&(o.MOVED|o.RESIZED|o.ZOOMED))},d.getBackwardsTransformComponents=function(e,n){var i,o=t.DEFAULT_TRANSFORM_COMPONENTS;return this._scale&&(i=n.domain().map(this._scale),o=a.getLinearFunctionComponents(i,n.range()),o.translate=-i[0]),o},d._projectionScale=function(e){return this._scale?this._scale(e):e},Object.seal(d),Object.seal(t)})),define("module/core/js/view/renderer/abstracthlocrenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractblockrenderer","module/core/js/util/browsercapabilities","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/renderer/hloctransitionhelper","module/core/js/view/projection/ordinals/invertedscreenprojection","module/core/js/util/oop","module/core/js/view/projection/ordinals/relativetimeoffsetprojection","module/core/js/view/projection/ordinals/relativexmodelprojection","module/core/js/util/svg","module/core/js/view/projection/xyprojection","module/core/js/view/projection/ordinals/ymodelprojection"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments),this._blockCache=Object.create(null),this._pendingTransitions=Object.create(null),this._cacheNeighbouringBlock=s.debounce(this._cacheNeighbouringBlock,1e3)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractblockrenderer"),o=e("module/core/js/util/browsercapabilities"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/renderer/hloctransitionhelper"),l=e("module/core/js/view/projection/ordinals/invertedscreenprojection"),u=e("module/core/js/util/oop"),c=e("module/core/js/view/projection/ordinals/relativetimeoffsetprojection"),d=e("module/core/js/view/projection/ordinals/relativexmodelprojection"),h=e("module/core/js/util/svg"),p=e("module/core/js/view/projection/xyprojection"),m=e("module/core/js/view/projection/ordinals/ymodelprojection");r.extend(t,i);var f=t.prototype;return f._blockCache=null,f._pendingTransitions=null,f._highLowLineY1=s.throwError("cannot calculate dimensions without visibleWindow"),f._highLowLineY2=s.throwError("cannot calculate dimensions without visibleWindow"),f._pointX=s.throwError("cannot calculate dimensions without visibleWindow"),f.setVisibleWindow=function(e){t.superclass.setVisibleWindow.apply(this,arguments);var n=this._indicator.resolution.period,i=this._getForwardsProjectionInX(),o=this._getForwardsProjectionInY(),r=function(){return i(n)};return this._createPositionFunctions(r,i,this._projection.inX.roundValue,this._projection.inX.visibleRoundValue,o,this._projection.inY.roundValue,this._projection.inY.visibleRoundValue),this},f.destroy=function(){this._blockCache=null,this._dBlocks.datum(null),this._cacheNeighbouringBlock.abort(),t.superclass.destroy.call(this)},f._refreshChangedBlocks=s.empty,f._cacheNeighbouringBlock=function(e){var t=e.previous;t&&this._useBlock(t)&&this._createNewBlock(t)},f._clearTransition=function(e){e in this._pendingTransitions&&(this._pendingTransitions[e].abort(),delete this._pendingTransitions[e])},f._createNewBlock=function(e){var t,i;return this._blockCache[e.index]?(t=n.select(this._blockCache[e.index]),this._hasChangingProjection()&&(i=t.selectAll(".point"),this._positionPointsHorizontally(i),this._positionPointsVertically(i))):(t=n.select(document.createElementNS("http://www.w3.org/2000/svg","g")).classed("block",!0).classed("index-"+e.index,!0).datum(e),i=t.selectAll(".point").data(this._accessor(e)).enter().appendElement(this._createNewPoint.bind(this)).classed("point",!0),this._positionPointsHorizontally(i),this._positionPointsVertically(i),this._blockCache[e.index]=t.node()),this._cacheNeighbouringBlock(e),t.node()},f._createNewPoint=u.abstractMethod,f._createPositionFunctions=function(e,t,i,o,r,a,l){var u=this._isRelative();this._highLowLineY1=s.compose(a,r,s.plucker("lowPrice")),this._highLowLineY2=s.compose(a,r,s.plucker("highPrice")),this._pointX=function(e){var o=n.select(this).parent().datum(),r=u&&o?t(o.accStart):0;return h.svgTranslateAttrX(i(t(e.accTime)-r))}},f._createProjection=function(e){var t,n;return o.getInstance().supportsSvgNonScalingStroke()?(t=d.createForShowingTimeInX(this._instrumentModel.getActiveResolution().period),n=m.createForShowingValueInY(e)):(t=new c,n=new l),new p(t,n)},f._handleEntrySet=function(e){var t=e.enter();e.eachElement(this._updateBlock.bind(this)),t.empty()||(t=t.appendElement(this._createNewBlock.bind(this)),this._positionBlocks(t))},f._positionPointsHorizontally=u.abstractMethod,f._positionPointsVertically=u.abstractMethod,f._replot=function(e,t){e&&this._positionPointsHorizontally(this._dBlocks.selectAll(".point")),t&&this._positionPointsVertically(this._dBlocks.selectAll(".point"))},f._updateBlock=function(e,t){var i,o=n.select(e).selectAll(".point"),r=this._accessor(t);o.each(s.setter("__oldData__")),o=o.data(r,s.plucker("accTime")),o.exit().remove(),o.eachElement(this._updatePoint.bind(this)),i=o.enter().appendElement(this._createNewPoint.bind(this)).classed("point",!0),this._positionPointsHorizontally(i),this._positionPointsVertically(i)},f._updatePoint=function(e,t){var n=e.__oldData__,i=this._pendingTransitions;delete e.__oldData__,n.toString()!==t.toString()&&(this._clearTransition(t.accTime),i[t.accTime]=a.create(n,t).withRenderer(this).withPointElement(e).startTransition())},f._useBlock=function(e){return e.loading.calculated},f._hasChangingProjection=function(){return!this._projection.inX.forwardsUnchanging||!this._projection.inY.forwardsUnchanging},Object.seal(f),Object.seal(t)})),define("module/core/js/serviceclient/cacheablerequestpolicy",["require","module/core/js/util/array","module/core/js/model/block"],(function(e){"use strict";var t=e("module/core/js/util/array"),n=e("module/core/js/model/block"),i=t.firstOf,o=t.lastOf,r={};return r.MIN_REQUEST_SIZE_BLOCKS=5,r.alignToResolutionMultiple=function(e){if(!e.length)return e;for(var t=r._startsSuitably,n=r._endsSuitably;!t(e);)e.unshift(i(e).previous);for(;!n(e);)e.push(o(e).next);return e},r._startsSuitably=function(e){var t=i(e);return t.isFirstOfInstrument()||t.index%r.MIN_REQUEST_SIZE_BLOCKS==0},r._endsSuitably=function(e){var t=o(e),n=r.MIN_REQUEST_SIZE_BLOCKS,i=n-1;return t.isLastOfInstrument()||t.index%n===i},r.expandNumberOfPointsToRequest=function(e){var t=r.MIN_REQUEST_SIZE_BLOCKS*n.PERIODS_PER_BLOCK;return Math.ceil(e/t)*t},r})),define("wt-fe-ajax",["require"],(function(require){var langRootNamespace={IG:{}},IG=langRootNamespace.IG,IG=langRootNamespace.IG||{};!(function(){for(var e=["business","format","streaming","ticket","ui","util","validation","widget","rtcharts"],t=0,n=e.length;t<n;t++)IG[e[t]]=IG[e[t]]||{}})();var IG=langRootNamespace.IG||{};return (function(){function e(e){return n?function(){var n=i(e);"none"!=n&&console[n](t(Array.prototype.slice.call(arguments)))}:function(){var t=Array.prototype.slice.call(arguments),n=i(e);if("none"!=n){IG[e]=console[n];try{IG[e].apply?IG[e].apply(this,t):IG[e](t)}catch(i){IG[e]=function(){console[n].apply(console,Array.prototype.slice.call(arguments))},IG[e].apply(this,t)}}}}function t(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if(i&&i.constructor==Object)try{t.push(JSON.stringify(i))}catch(e){t.push(i)}else null===i?t.push("(null)"):void 0===i?t.push("(undefined)"):i&&i.toString?t.push(i.toString()):t.push(i)}return t.join(" ")}var n=navigator.userAgent.match(/(iPhone|iPad)/i),i=function(e){if(window.console&&IG._isDebugEnabled)switch(e){case"error":if(console.error)return"error";case"warn":if(console.warn)return"warn";case"debug":if(console.debug)return"debug";case"info":if(console.info)return"info";default:if(console.log)return"log"}return"none"};IG.error=e("error"),IG.warn=e("warn"),IG.debug=e("debug"),IG.info=e("info")})(),Array.isArray||(Array.isArray=(function(e){return function(t){return"[object Array]"==e.call(t)}})(Object.prototype.toString)),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=this.length,n=Number(arguments[1]);for(isNaN(n)?n=t-1:(n=n<0?Math.ceil(n):Math.floor(n),n<0?n+=t:n>=t&&(n=t-1));n>-1;n--)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.some||(Array.prototype.some=function(e){var t=0,n=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=arguments[1];t<n;t++)if(t in this&&e.call(i,this[t],t,this))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array(t),i=arguments[1],o=0;o<t;o++)o in this&&(n[o]=e.call(i,this[o],o,this));return n}),Array.prototype.every||(Array.prototype.every=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;i<t;i++)if(i in this&&!e.call(n,this[i],i,this))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array,i=arguments[1],o=0;o<t;o++)if(o in this){var r=this[o];e.call(i,r,o,this)&&n.push(r)}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;i<t;i++)i in this&&e.call(n,this[i],i,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;if(0==t&&1==arguments.length)throw new TypeError;var n=0;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n++];break}if(++n>=t)throw new TypeError}for(;n<t;n++)n in this&&(i=e.call(null,i,this[n],n,this));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;if(0==t&&1==arguments.length)throw new TypeError;var n=t-1;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n--];break}if(--n<0)throw new TypeError}for(;n>=0;n--)n in this&&(i=e.call(null,i,this[n],n,this));return i}),Date.now||(Date.now=function(){return(new Date).getTime()}),Function.prototype.bind||(function(e){function t(e,t,n){return function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,i)}}function n(e,t){return function(){return e.apply(t,arguments)}}e.bind=function(e){return arguments.length>1?t(this,e,Array.prototype.slice.call(arguments,1)):n(this,e)}})(Function.prototype),window.JSON||(function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(i=rep[n],(o=str(i,l))&&s.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l))&&s.push(quote(i)+(gap?": ":":")+o);return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}window.JSON={},"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)t[t.length]=n;return t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),(function(e){"use strict";function t(e){!0===e&&(e=t.EVENT_STORE_TYPE.SINGLE),t.prepareInstance(this,e)}t.prepareInstance=function(e,n){e.__events={},e.__handlers=[],n===t.EVENT_STORE_TYPE.GROUP?(e.on=e.subscribe=t.groupEventSubscribe,e.un=e.unsubscribe=t.groupEventUnsubscribe,e.fire=t.groupEventFire,e.hasListener=t.multiEventHasListener):n===t.EVENT_STORE_TYPE.SINGLE?(e.on=e.subscribe=t.singleEventSubscribe,e.un=e.unsubscribe=t.singleEventUnsubscribe,e.fire=t.singleEventFire,e.hasListener=t.singleEventHasListener):(e.onHasListenerChanged?(e.on=e.subscribe=t.advisoryMultiEventSubscribe,e.un=e.unsubscribe=t.advisoryMultiEventUnsubscribe):(e.on=e.subscribe=t.multiEventSubscribe,e.un=e.unsubscribe=t.multiEventUnsubscribe),e.fire=t.multiEventFire,e.hasListener=t.multiEventHasListener),e.unsubscribeEach||(e.unsubscribeEach=t.prototype.unsubscribeEach)},t.getSelectorType=function(e){var n=typeof e;return"number"==n?t.SINGLE_EVENT:"function"==n?t.EVENT_HANDLER_FUNCTION:"string"==n?t.NAMED_EVENT:t.ALL_EVENTS},t.getUnsubscribeMethod=function(e){var n=t.getSelectorType(e);return n==t.SINGLE_EVENT?t.unsubscribeSingleEvent:n==t.NAMED_EVENT?t.unsubscribeNamedEvent:n==t.EVENT_HANDLER_FUNCTION?t.unsubscribeFunctionHandlers:t.unsubscribeAllEvents},t.multiEventSubscribe=function(e,n,i,o){return e=(""+e).toLowerCase(),this.__handlers.push([n,i,e,o]),t.bindEventHandler(this,e,this.__handlers.length-1)},t.singleEventSubscribe=function(e,n,i){return this.__handlers.push([e,n,"default",i]),t.bindEventHandler(this,"default",this.__handlers.length-1)},t.groupEventSubscribe=function(e,n,i,o){e=[].concat(e);var r,s=e.length,a=this.__handlers.length;for(this.__handlers.push([n,i,(""+e[0]).toLowerCase(),o]),r=0;r<s;r++)t.bindEventHandler(this,e[r].toLowerCase(),a);return a},t.advisoryMultiEventSubscribe=function(e,n,i,o){var r,s=this.hasListener(e=(""+e).toLowerCase());return this.__handlers.push([n,i,e,o]),r=t.bindEventHandler(this,e,this.__handlers.length-1),s||this.onHasListenerChanged(e,!0),r},t.bindEventHandler=function(e,t,n){return e.__events[t]||(e.__events[t]=[]),e.__events[t].push(n),n},t.groupEventFire=function(e){for(var n,i,o,r,s={},a=[],l=[],u=l.concat(e);u.length;)for(o=this.__events[(""+u.shift()).toLowerCase()]||l,n=0,i=o.length;n<i;n++)r=o[n],s[r]||(s[r]=!0,a.push(r));return t.processHandlers(this,a,Array.prototype.slice.call(arguments,1))},t.multiEventFire=function(e){return t.processHandlers(this,this.__events[(""+e).toLowerCase()],Array.prototype.slice.call(arguments,1))},t.singleEventFire=function(){return t.processHandlers(this,this.__events.default,arguments)},t.processHandlers=function(e,t,n){var i,o,r,s=t&&t.length?t.length:0;for(i=0;i<s;i++)if((r=e.__handlers[t[i]])&&(o=r[0].apply(r[1]||window,n),r[3]&&r[3].once&&e.un(t[i]),!1===o))return!1;return!0},t.unsubscribeSingleEvent=function(e,t,n){var i=e.__handlers[n],o=!!t;!i||o&&i[1]!==t||(i[0]=null,i[1]=null,e.__handlers[n]=null)},t.unsubscribeNamedEvent=function(e,n,i){var o,r,s=(""+i).toLowerCase(),a=e.__events[s],l=!!n;if(a){for(o=0,r=a.length;o<r;o++)t.unsubscribeSingleEvent(e,n,a[o]);l?t._cleanSubscriptions(e):e.__events[s]=[]}},t.unsubscribeAllEvents=function(e,n){var i,o=e.__handlers,r=!!n;if(o&&o.length){for(i=o.length;i>0;i--)t.unsubscribeSingleEvent(e,n,i-1);r?t._cleanSubscriptions(e):(e.__handlers=[],e.__events={})}},t.unsubscribeFunctionHandlers=function(e,n,i){var o,r,s=e.__handlers,a=!!n;if(s&&s.length){for(o=s.length;o>0;)(r=s[--o])&&r[0]===i&&t.unsubscribeSingleEvent(e,n,o);a&&t._cleanSubscriptions(e)}},t.multiEventUnsubscribe=t.singleEventUnsubscribe=function(e,n){return t.getUnsubscribeMethod(e)(this,n,e),this},t.groupEventUnsubscribe=function(e,n){return t.getUnsubscribeMethod(e)(this,n,e),t._cleanSubscriptions(this),this},t.advisoryMultiEventUnsubscribe=function(e,n){var i,o,r,s=null,a=t.getSelectorType(e);if(a==t.ALL_EVENTS){s=[];for(i in this.__events)this.hasListener(i)&&s.push(i)}else a==t.SINGLE_EVENT&&this.__handlers[e]?i=this.__handlers[e][2]:a==t.NAMED_EVENT&&(i=(""+e).toLowerCase()),i&&this.hasListener(i)&&(s=[i]);if(t.getUnsubscribeMethod(e)(this,n,e),s)for(o=0,r=s.length;o<r;o++)this.hasListener(s[o])||this.onHasListenerChanged(s[o],!1);return this},t.isPreparedInstance=function(e){return!!e.__events&&!!e.__handlers},t.prototype.__events=null,t.prototype.__handlers=null,t.prototype.on=function(){return t.prepareInstance(this),this.on.apply(this,arguments)},t.prototype.subscribe=t.prototype.on,t.prototype.fire=function(){return!0},t.prototype.un=function(e,t){return this},t.prototype.unsubscribe=t.prototype.un,t.prototype.unsubscribeEach=function(e){var n,i;if(t.isPreparedInstance(this)&&e instanceof Array)for(n=0,i=e.length;n<i;n++)this.un(e[n])},t.prototype.hasListener=function(){return!1},t.multiEventHasListener=function(e){var t,n,i=this.__events[(""+e).toLowerCase()];if(i&&(n=i.length))for(t=0;t<n;t++)if(this.__handlers[i[t]])return!0;return!1},t.singleEventHasListener=function(){var e,t,n=this.__handlers;if(n&&(t=n.length))for(e=0;e<t;e++)if(n[e])return!0;return!1},t._cleanSubscriptions=function(e){if(e.__events&&e.__handlers){var t,n,i,o,r,s,a;for(t in e.__events){for(i=!1,n=null,o=e.__events[t],s=0,a=o.length;s<a;s++)r=e.__handlers[o[s]],r?i&&n.push(o[s]):i||(n=s?o.slice(0,s):[],i=!0);i&&(e.__events[t]=n)}for(s=a=e.__handlers.length;--s>0&&!e.__handlers[s];);e.__handlers.splice(s+1,a)}},t.ALL_EVENTS="all",t.NAMED_EVENT="event",t.SINGLE_EVENT="single",t.EVENT_HANDLER_FUNCTION="handler",t.EVENT_STORE_TYPE={SINGLE:0,MULTIPLE:1,GROUP:2},e.util.Subscribable=t})(IG),(function(e,t){function n(e){this._rootNamespace=e}n.prototype._rootNamespace=null,n.prototype.extend=function(e,t){function n(){}return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,e},n.prototype.createMixIn=function(e,t){var n=t.prototype,i=function(){i.superclass.constructor.apply(this,arguments),n.constructor.apply(this,arguments)};this.extend(i,e);for(var o in n)"function"==typeof n[o]&&i.prototype[o]?i.prototype[o]=(function(e,t){return function(){var n=e.apply(this,arguments);return t.apply(this,arguments),n}})(i.prototype[o],n[o]):i.prototype[o]=n[o];return i},n.prototype.namespace=function(){for(var e,t,n,i,o=this._rootNamespace,r=0,s=arguments.length;r<s;r++)for(i={},n=arguments[r].split("."),e=0,t=n.length;e<t;e++)i=e?i[n[e]]||(i[n[e]]={}):o[n[e]]?o[n[e]]:o[n[e]]={}},n.prototype.applyTo=function(e,t,n){for(var i in t)"|prototype|superclass|".indexOf("|"+i+"|")<0&&(!n||void 0===e[i])&&(e[i]=t[i]);return e},n.createGetter=function(e){return function(){return this[e]}},n.createSetter=function(e,t,n){var i="beforeSet"+n,o="afterSet"+n,r=[];return(e[i]||e[o])&&r.push("var oldValue = this."+t+";"),e[i]&&r.push("itemValue = this."+i+"(itemValue);"),r.push("this."+t+" = itemValue;"),e[o]&&r.push("this."+o+"(itemValue, oldValue);"),r.push("return this;"),new Function("itemValue",r.join(""))},n.prototype.applyGetterSetters=function(e){if("function"!=typeof e)throw new TypeError("Lang.applyGetterSetters called on a non-function object.");var t=e.prototype;for(var i in t)if(i&&"|object|function|".indexOf(typeof t[i])>0){var o=i.charAt(0).toUpperCase()+i.substring(1),r="get"+o,s="set"+o;t[r]||(t[r]=n.createGetter(i)),t[s]||(t[s]=n.createSetter(t,i,o))}return e},e.util.Lang=new n("object"==typeof langRootNamespace?langRootNamespace:window)})(IG),(function(e){"use strict";function t(){}function n(e){this._stack=[],this._beforeSend=[],e&&this._beforeSend.push(this.abort)}e.util.Lang.extend(n,e.util.Subscribable),n.prototype._url="",n.prototype._async=!0,n.prototype._postDataContentType=n.JSON_CONTENT_TYPE,n.prototype._handlesProgressEvents=!1,n.prototype._stack=null,n.prototype._beforeSend=null,n.prototype._headers=null,n._defaultSettings={url:"",async:!0,contentType:n.JSON_CONTENT_TYPE,beforeSend:t,complete:t,error:t,success:t,statusCode:{},type:"GET",data:""},"_url,_async,_handlesProgressEvents,_postDataContentType,_headers".split(",").forEach((function(e){var t=e.substring(1,2).toUpperCase()+e.substring(2);n.prototype["get"+t]=function(){return this[e]},n.prototype["set"+t]=function(t){return this[e]=t,this}})),n.send=function(e,t){return arguments.length>=2?(t=arguments[1]||{},t.url=arguments[0]):t="object"==typeof arguments[0]?arguments[0]:{url:arguments[0]},n._send(t)},n._send=function(e){if(e=n._mergeDefaultSettingsWith(e),!e.url)throw new Error("Ajax.send contains no url");var t=(new n).setUrl(e.url).setAsync(e.async).setPostDataContentType(e.contentType).setHeaders(e.headers);t._beforeSend.push(e.beforeSend),t.on("complete",e.complete),t.on("error",e.error),t.on("success",e.success);for(var i in e.statusCode)t.on(i,e.statusCode[i]);return t._sendRequest(e.type,t.getUrl(),e.headers,t.getAsync(),e.data,t.getPostDataContentType()),t},n._mergeDefaultSettingsWith=function(e){if("object"==typeof e){var t,i={};for(t in n._defaultSettings)i[t]=n._defaultSettings[t];for(t in e)void 0!==e[t]&&(i[t]=e[t]);return i}return n._defaultSettings},n.prototype.setUrl=function(e){return this._url=e,this.getUrl="function"==typeof e?n._getFunctionUrl:n._getStringUrl,this},n._getStringUrl=function(){return this._url},n._getFunctionUrl=function(){return this._url.apply(this,arguments)},n.prototype.post=function(e){var t=this._getRequestContentType(e);this._sendRequest("POST",this.getUrl.apply(this,arguments),this._headers,this._async,this._prepareContent(e,t),t)},n.prototype._getRequestContentType=function(e){return!e||window.FormData&&e instanceof window.FormData?null:this._postDataContentType},n.prototype._prepareContent=function(e,t){var i=n.dataProcessors[t];return e&&i?i.request(e):e},n.prototype.get=function(){this._sendRequest("GET",this.getUrl.apply(this,arguments),this._headers,this._async)},n.prototype._sendRequest=function(e,t,n,i,o,r){var s=new XMLHttpRequest;if(this._callBeforeSendMethods(s),s.open(e,t,i),this._handlesProgressEvents&&(s.onprogress=this._onProgress.bind(this,s)),s.onreadystatechange=this._onReadyStateChange.bind(this,s),n)for(var a,l=Object.keys(n),u=0,c=l.length;u<c;u++)a=l[u],s.setRequestHeader(a,n[a]);r&&s.setRequestHeader("Content-Type",r),s.send(o),this._stack.push(s)},n.prototype._callBeforeSendMethods=function(e){for(var t=0,n=this._beforeSend.length;t<n;t++)this._beforeSend[t].call(this,e)},n.prototype._onProgress=function(e,t){this.fire("progress",t,e)},n.prototype._onReadyStateChange=function(e,t){if(e.readyState==n.DONE){var i=e.status,o=this._getResponseContentType(e),r=n._processResponse(o,e.responseText,e.responseXML);this.fire(i,r,e),i>=200&&i<300||304===i?this.fire("success",r,i,e):this.fire("error",r,i,e),this.fire("complete",r,i,e),this._removeFromStack(e),n._destroyXhr(e)}},n.prototype._getResponseContentType=function(e){var t=e.getResponseHeader("Content-Type");return t?t.replace(/(\s|;).*$/,"").toLowerCase():null},n.prototype._getResponseContentType=function(e){return(""+e.getResponseHeader("Content-Type")).replace(/(\s|;).*$/,"").toLowerCase()},n._processResponse=function(e,t,i){var o=n.dataProcessors[e];return o?o.response(t):i||t},n.prototype._removeFromStack=function(e){var t=this._stack.indexOf(e);t>=0&&this._stack.splice(t,1)},n.prototype.abort=function(){for(;this._stack.length;)n._destroyXhr(this._stack.pop())},n._destroyXhr=function(e){e.onreadystatechange=e.onprogress=t,e.onreadystatechange=e.onprogress=null,e.readyState!==n.DONE&&e.abort()},n.DONE=4,n.LOADING=3,n.HEADERS_RECEIVED=2,n.OPENED=1,n.UNSENT=0,n.ABORT_ON_SEND=!0,n.FORM_CONTENT_TYPE="application/x-www-form-urlencoded",n.JSON_CONTENT_TYPE="application/json",e.Ajax=n})(IG),(function(e){"use strict";e.util.Lang.namespace("IG.Ajax.dataProcessors");var t={};t.response=function(e){return JSON.parse(e)},t.request=function(e){return JSON.stringify(e)},e.Ajax.dataProcessors["application/json"]=e.Ajax.dataProcessors.JsonProcessor=t})(IG),(function(e){"use strict";var t={};t.response=function(e){var t,n,i=decodeURIComponent(e),o=i.split("&"),r={};for(t in o)o.hasOwnProperty(t)&&(n=o[t].split("="),r[n[0]]=n[1]);return r},t.request=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},e.Ajax.dataProcessors["application/x-www-form-urlencoded"]=e.Ajax.dataProcessors.FormProcessor=t})(IG),IG.Ajax})),define("module/core/js/util/uid",["require","module/core/js/util/math"],(function(e){"use strict";var t=e("module/core/js/util/math"),n=1,i={};return i.getUid=function(){return n++},i.getGuid=function(e){for(var n,i,o,r="",s=0;s++<36;)n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[s-1],i=16*("number"==typeof e?t.randomSeeded(e++):Math.random())|0,
o="x"==n?i:3&i|8,r+="-"==n||"4"==n?n:o.toString(16);return r},i})),define("module/core/js/model/environmentinfo",["require","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n,i=e("module/core/js/util/functional"),o=t.prototype;return o._origin="",o._dataAdaptor="CHARTS",o._path="deal",t.getInstance=function(){return n||(n=new t),n},o.getOrigin=i.getter("_origin"),o.setOrigin=i.setter("_origin"),o.getDataAdaptor=i.getter("_dataAdaptor"),o.setDataAdaptor=i.setter("_dataAdaptor"),o.getPath=i.getter("_path"),o.setPath=i.setter("_path"),Object.seal(o),t})),define("module/core/js/util/ajaxrequest",["require","wt-fe-ajax","module/core/js/util/functional","module/core/js/util/log","module/core/js/util/object","module/core/js/util/uid","module/core/js/model/userinfo","module/core/js/model/environmentinfo"],(function(e){"use strict";function t(e){var t,n=document.createElement("a");return n.href=e,n.search&&(t=n.search.slice(1).split("&"),t=t.filter((function(e){return!(e.match(/^X_Security_Token=/)||e.match(/^ssoToken=/)||e.match(/^accountId=/))})),n.search=t.length?"?"+t.join("&"):""),n.href}function n(e){this._settings=e,this._endpoint=e.endpoint,this._successCallback=e.success,this._errorCallback=e.error,this._completeCallback=e.complete,this._method=e.method||c}var i=e("wt-fe-ajax"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/log"),s=e("module/core/js/util/object"),a=e("module/core/js/util/uid"),l=e("module/core/js/model/userinfo"),u=e("module/core/js/model/environmentinfo"),c="GET",d={response:"Connection timeout",status:0},h=n.prototype;return n.RETRY_TIME_BASE=15e3,n.RETRY_TIME_MAX=6e4,n.REQUEST_TIMEOUT=n.RETRY_TIME_BASE,n.CONSECUTIVE_FAILED_REQUESTS=0,n.create=function(e){return new n(e)},n.getNextTryDelay=function(){return Math.min(n.RETRY_TIME_BASE*Math.pow(2,Math.min(n.CONSECUTIVE_FAILED_REQUESTS,8)),n.RETRY_TIME_MAX)},h._ajax=null,h._settings=null,h._retryTimeout=null,h._requestTimeout=null,h._requestTime=null,h._timeTaken=null,h._method=null,h.getTimeTaken=o.getter("_timeTaken"),h.getEndpoint=o.getter("_endpoint"),h.getMethod=o.getter("_method"),h.getStrippedEndpoint=function(){return t(this.getEndpoint())},h.send=function(){this._ajax&&(r.warn("Called to send another AJAX request, without receiving results from previous one. Old request will be discarded."),this._ajax.abort(),delete this._ajax),this._ajax=i.send(this._generateRequestSettings()),this._requestTime=(new Date).getTime(),this._requestTimeout=window.setTimeout(this._timeoutHandler.bind(this),n.REQUEST_TIMEOUT),this._timeTaken=null},h.abort=function(){this._ajax&&(this._ajax.abort(),delete this._ajax),this._clearTimeouts()},h._generateRequestSettings=function(){var e,t={"X-Transaction-Id":"htmlcharts_"+a.getGuid()},n=l.getInstance().getCstToken(),i=l.getInstance().getSsoToken(),o=u.getInstance().getOrigin();if(i&&(t["X-SECURITY-TOKEN"]=i),n&&(t.CST=n),!this._endpoint)throw new Error("No endpoint provided");return e={type:this._method,url:o+this._endpoint,dataType:"json",headers:t,success:this._successHandler.bind(this),error:this._errorHandler.bind(this)},this._settings.data&&(e.data=this._settings.data),this._settings.contentType&&(e.contentType=this._settings.contentType),this._settings.headers&&s.merge(e.headers,this._settings.headers,!0),e},h._clearTimeouts=function(){window.clearTimeout(this._requestTimeout),window.clearTimeout(this._retryTimeout),delete this._ajax,delete this._requestTimeout,delete this._retryTimeout},h._successHandler=function(e,t,i){if(this._recordTimeTaken(),e.error)return void this._errorHandler(e.error||"error while loading data",t,i);this._clearTimeouts(),n.CONSECUTIVE_FAILED_REQUESTS>0&&(n.CONSECUTIVE_FAILED_REQUESTS=0),this._successCallback&&this._successCallback(this,e,t),this._completeCallback&&this._completeCallback()},h._errorHandler=function(e,t,i){var o=!1;this._recordTimeTaken(),this._clearTimeouts(),n.CONSECUTIVE_FAILED_REQUESTS++,!1!==this._settings.retry&&(this._scheduleNextTry(),o=!0),this._errorCallback&&this._errorCallback(this,e,t,i),!1===o&&this._completeCallback&&this._completeCallback()},h._recordTimeTaken=function(){this._timeTaken=Date.now()-this._requestTime},h._timeoutHandler=function(){var e={responseURL:this._ajax.getUrl(),status:-1};this._ajax&&(this._ajax.abort(),delete this._ajax),this._errorHandler(d.response,d.status,e)},h._scheduleNextTry=function(){var e=(new Date).getTime()-this._requestTime,t=n.getNextTryDelay()-e;t<=0?this.send():this._retryTimeout=window.setTimeout(this.send.bind(this),t)},Object.seal(h),Object.seal(n)})),define("wt-fe-buz-utilities-url",["require"],(function(require){var langRootNamespace={IG:{}},IG=langRootNamespace.IG,IG=langRootNamespace.IG||{};!(function(){for(var e=["business","format","streaming","ticket","ui","util","validation","widget","rtcharts"],t=0,n=e.length;t<n;t++)IG[e[t]]=IG[e[t]]||{}})();var IG=langRootNamespace.IG||{};return (function(){function e(e){return function(){var n=t(e),i=Array.prototype.slice.call(arguments);if("none"!=n){IG[e]=console[n];try{IG[e].apply?IG[e].apply(this,i):IG[e](i)}catch(t){IG[e]=function(){console[n].apply(console,Array.prototype.slice.call(arguments))},IG[e].apply(this,i)}}}}var t=function(e){if(window.console&&IG._isDebugEnabled)switch(e){case"error":if(console.error)return"error";case"warn":if(console.warn)return"warn";case"debug":if(console.debug)return"debug";case"info":if(console.info)return"info";default:if(console.log)return"log"}return"none"};IG.error=e("error"),IG.warn=e("warn"),IG.debug=e("debug"),IG.info=e("info")})(),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=this.length,n=Number(arguments[1]);for(isNaN(n)?n=t-1:(n=n<0?Math.ceil(n):Math.floor(n),n<0?n+=t:n>=t&&(n=t-1));n>-1;n--)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.some||(Array.prototype.some=function(e){var t=0,n=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=arguments[1];t<n;t++)if(t in this&&e.call(i,this[t],t,this))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array(t),i=arguments[1],o=0;o<t;o++)o in this&&(n[o]=e.call(i,this[o],o,this));return n}),Array.prototype.every||(Array.prototype.every=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;i<t;i++)if(i in this&&!e.call(n,this[i],i,this))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array,i=arguments[1],o=0;o<t;o++)if(o in this){var r=this[o];e.call(i,r,o,this)&&n.push(r)}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;i<t;i++)i in this&&e.call(n,this[i],i,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;if(0==t&&1==arguments.length)throw new TypeError;var n=0;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n++];break}if(++n>=t)throw new TypeError}for(;n<t;n++)n in this&&(i=e.call(null,i,this[n],n,this));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;if(0==t&&1==arguments.length)throw new TypeError;var n=t-1;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n--];break}if(--n<0)throw new TypeError}for(;n>=0;n--)n in this&&(i=e.call(null,i,this[n],n,this));return i}),Date.now||(Date.now=function(){return(new Date).getTime()}),Function.prototype.bind||(function(e){function t(e,t,n){return function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,i)}}function n(e,t){return function(){return e.apply(t,arguments)}}e.bind=function(e){return arguments.length>1?t(this,e,Array.prototype.slice.call(arguments,1)):n(this,e)}})(Function.prototype),window.JSON||(function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(i=rep[n],(o=str(i,l))&&s.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l))&&s.push(quote(i)+(gap?": ":":")+o);return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}window.JSON={},"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)t[t.length]=n;return t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),IG.util.Url=(function(){function e(e,n){return e?(params={},params[n||"wow"]=t++,IG.util.Url.build(e,params,!0)):""}var t=(new Date).getTime();return{cacheBreaker:e,wowUrl:e,encodePlus:function(e){return e.replace(/\+/g,"%2B")},buildQueryString:function(e){var t="",n=e.length;if(n>0&&"input"===e[0].tagName.toLowerCase())for(var i=0;i<n;i++){var o=e[i];t+=(o.id||o.name)+"="+o.value+"&"}else for(var r in e)e[r]instanceof Array?e[r].forEach((function(e){t+=r+"="+e+"&"})):t+=r+"="+e[r]+"&";return t=t.replace(/&$/,""),IG.util.Url.encodePlus(t)},build:function(e,n,i){var o,r=IG.util.Url.getParams(e),s=-1==e.indexOf("#")?"":e.substring(e.indexOf("#"));e=e.replace(s,""),o=e.replace(/\?.*$/,"")+"?";for(var a in n)r[a]=n[a];return o+=IG.util.Url.buildQueryString(r),i||(o+="&"+t+++"="+t),o+=s.toString()},getParams:function(e){var t,n,i,o=/([^?#]*)(#.*)?$/,r={},s=e.match(o)[1];if(s.indexOf("=")<0)return r;t=s.split("&");for(var a=0,l=t.length;a<l;a++)n=t[a].split("="),n[0]&&(r[n[0]]instanceof Array?r[n[0]].push(n[1]):r.hasOwnProperty(n[0])?(i=r[n[0]],r[n[0]]=[i,n[1]]):r[n[0]]=n[1]);return r}}})(),IG.util.Url})),define("module/core/js/model/deviceinfo",["require","text!package.json","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n,i=JSON.parse(e("text!package.json")),o=e("module/core/js/util/functional");t.getMobileDeviceFamily=function(){var e=window.navigator.userAgent.toLowerCase(),n=t.getInstance(),i=n.asJSON();return e.match("iphone")?"iPhone":e.match("ipad")?"iPad":e.match("android")?"Android":e.match("windows phone")?"Windows Phone":e.match("windows nt")&&e.match("touch")&&i&&"Win8"===i.clientType?"Windows RT":null},t.isMobile=function(){return!!this.getMobileDeviceFamily()},t.getInstance=function(){return n||(n=new t),n},t.isTouch=function(){var e=t.getInstance().asJSON();return e&&void 0!==e.touch?e.touch:t.isMobile()},t.isAndroid=function(){return"Android"===t.getMobileDeviceFamily()};var r=t.prototype;return r._json=null,r.setDeviceInfo=o.setter("_json"),r.asJSON=o.getter("_json"),r.getApplicationType=function(){return this._json&&this._json.applicationType?this._json.applicationType:"ig"},r.getClientPlatform=function(){return this._json&&this._json.clientPlatform&&this._json.clientVersion?this._json.clientPlatform:"HTML5_CHARTS"},r.getClientVersion=function(){return this._json&&this._json.clientPlatform&&this._json.clientVersion?this._json.clientVersion:i.version},r.getDeviceType=function(){return this._json&&this._json.deviceType?this._json.deviceType:null},r.getView=o.returns("chart"),Object.seal(r),t})),define("module/core/js/tracker/enum/schema",[],(function(){"use strict";var e={CREATE_POSITION_SCHEMA:"igs:com.ig.tracking.sdk/deal/position/submit/jsonschema/1.1.64",CLOSE_POSITION_SCHEMA:"igs:com.ig.tracking.sdk/deal/position/close/jsonschema/1.1.54",DELETE_ORDER_SCHEMA:"igs:com.ig.tracking.sdk/deal/order/delete/jsonschema/1.1.54",EDIT_ORDER_SCHEMA:"igs:com.ig.tracking.sdk/deal/order/edit/jsonschema/1.1.64",EDIT_POSITION_SCHEMA:"igs:com.ig.tracking.sdk/deal/position/edit/jsonschema/1.1.64",DEALING_ATTRIBUTES_SCHEMA:"igs:com.ig.tracking.sdk/deal/common/attributes/jsonschema/1.1.64",TRADE_CONFIRM_SCHEMA:"igs:com.ig.tracking.sdk/account/trades/confirm/jsonschema/1.1.55",PAPI_TRADE_CONFIRM:"igs:com.ig.tracking.sdk/papi/trade/confirm/jsonschema/1.1.55",BROWSER_DEVICE_SCHEMA:"igs:com.ig.tracking.sdk/common/browser/device/jsonschema/1.1.57",MARKET_PAPI_SCHEMA:"igs:com.ig.tracking.sdk/papi/market/jsonschema/1.1.54",MARKET_INSTRUMENT_SCHEMA:"igs:com.ig.tracking.sdk/market/instrument/jsonschema/1.1.54",MARKET_DATA_SCHEMA:"igs:com.ig.tracking.sdk/market/data/jsonschema/1.1.54",CHART_ATTRIBUTES:"igs:com.ig.tracking.sdk/charts/web/attributes/jsonschema/1.1.38",ANNOTATION_ATTRIBUTES:"igs:com.ig.tracking.sdk/charts/web/ui/annotations/attributes/jsonschema/1.1.38",ANNOTATION_ANCHOR_ATTRIBUTES:"igs:com.ig.tracking.sdk/charts/web/ui/annotations/anchor/jsonschema/1.1.38",INDICATOR_ATTRIBUTES:"igs:com.ig.tracking.sdk/charts/web/ui/indicators/attributes/jsonschema/1.1.38",PRICE_ATTRIBUTES:"igs:com.ig.tracking.sdk/charts/web/ui/prices/attributes/jsonschema/1.1.38",FRAME_RATE:"igs:com.ig.tracking.sdk/charts/web/system/fps/jsonschema/1.1.38",LOAD_LATENCY:"igs:com.ig.tracking.sdk/charts/web/system/load/latency/jsonschema/1.1.38",ERROR:"igs:com.ig.tracking.sdk/system/error/jsonschema/1.1.38",REQUEST_ERROR:"igs:com.ig.tracking.sdk/system/request/error/jsonschema/1.1.57",LATENCY_DATAPOINTS_SCHEMA:"igs:com.ig.tracking.sdk/system/latency/jsonschema/1.1.55",LATENCY_SCHEMA:"igs:com.ig.tracking.sdk/common/browser/latency/jsonschema/1.1.57",ANNOTATIONS_ACTION:"igs:com.ig.tracking.sdk/charts/web/ui/annotations/action/jsonschema/1.1.38",INDICATORS_ACTION:"igs:com.ig.tracking.sdk/charts/web/ui/indicators/action/jsonschema/1.1.38",PRICES_ACTION:"igs:com.ig.tracking.sdk/charts/web/ui/prices/action/jsonschema/1.1.38",CHECKBOX_ACTION:"igs:com.ig.tracking.sdk/charts/web/ui/checkbox/action/jsonschema/1.1.38",RADIO_ACTION:"igs:com.ig.tracking.sdk/charts/web/ui/radio/action/jsonschema/1.1.38",ELEMENT_ACTION:"igs:com.ig.tracking.sdk/charts/web/ui/element/action/jsonschema/1.1.38"};return e.valueOf=function(t){return e[t]?e[t]:null},Object.freeze(e)})),define("module/core/js/util/string",["require","lodash"],(function(e){"use strict";var t=e("lodash"),n={};return n.merge=function(e,t){return 2===arguments.length&&t&&"object"==typeof t||(t=Array.prototype.slice.call(arguments,1)),(e&&e.replace?e:"").replace(/\{([^\}]+)\}/g,(function(e,n){return void 0!==t[n]?t[n]:""}))},n.endsWith=function(e,n){return t.endsWith(e,n)},n.removeAccents=function(e){return t.deburr(e)},n.hash=function(e){var t,n,i=0;if(e.length<=0)return i;for(n=0;n<e.length;n++)t=e.charCodeAt(n),i=(i<<5)-i+t,i|=0;return i},Object.freeze(n)})),(function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define("bowser",n):e.bowser=n()})(this,0,(function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var i,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(e),a=!r&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),u=!l&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),d=/silk/i.test(e),h=/sailfish/i.test(e),p=/tizen/i.test(e),m=/(web|hpw)os/i.test(e),f=/windows phone/i.test(e),_=(/SamsungBrowser/i.test(e),!f&&/windows/i.test(e)),g=!o&&!d&&/macintosh/i.test(e),v=!a&&!h&&!p&&!m&&/linux/i.test(e),y=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),M=t(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e)&&!/tablet pc/i.test(e),A=!b&&/[^-]mobi/i.test(e),T=/xbox/i.test(e);/opera/i.test(e)?i={name:"Opera",opera:s,version:M||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?i={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||M}:/SamsungBrowser/i.test(e)?i={name:"Samsung Internet for Android",samsungBrowser:s,version:M||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?i={name:"Opera Coast",coast:s,version:M||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:s,version:M||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?i={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?i={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?i={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?i={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?i={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?i={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:f?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:s},y?(i.msedge=s,i.version=y):(i.msie=s,i.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?i={name:"Chrome",osname:"Chrome OS",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?i={name:"Microsoft Edge",msedge:s,version:y}:/vivaldi/i.test(e)?i={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||M}:h?i={name:"Sailfish",osname:"Sailfish OS",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(i={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=s,i.osname="Firefox OS")):d?i={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?i={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:s,version:M||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:m?(i={name:"WebOS",osname:"WebOS",webos:s,version:M||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=s)):/bada/i.test(e)?i={name:"Bada",osname:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",osname:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||M}:/qupzilla/i.test(e)?i={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||M}:/chromium/i.test(e)?i={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||M}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:M}:/safari|applewebkit/i.test(e)?(i={name:"Safari",safari:s},M&&(i.version=M)):o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},M&&(i.version=M)):i=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||M}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(i.name=i.name||"Blink",i.blink=s):(i.name=i.name||"Webkit",i.webkit=s),!i.version&&M&&(i.version=M)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=s,i.version=i.version||t(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!a&&!i.silk?!i.windowsphone&&o?(i[o]=s,i.ios=s,i.osname="iOS"):g?(i.mac=s,i.osname="macOS"):T?(i.xbox=s,i.osname="Xbox"):_?(i.windows=s,i.osname="Windows"):v&&(i.linux=s,i.osname="Linux"):(i.android=s,i.osname="Android");var E="";i.windows?E=(function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}})(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?E=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?(E=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),E=E.replace(/[_\s]/g,".")):o?(E=t(/os (\d+([_\s]\d+)*) like mac os x/i),E=E.replace(/[_\s]/g,".")):a?E=t(/android[ \/-](\d+(\.\d+)*)/i):i.webos?E=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?E=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?E=t(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(E=t(/tizen[\/\s](\d+(\.\d+)*)/i)),E&&(i.osversion=E);var w=!i.windows&&E.split(".")[0];return b||u||"ipad"==o||a&&(3==w||w>=4&&!A)||i.silk?i.tablet=s:(A||"iphone"==o||"ipod"==o||a||l||i.blackberry||i.webos||i.bada)&&(i.mobile=s),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=s:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=s:i.x=s,i}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),o=n(e,(function(e){var o=i-t(e);return e+=new Array(o+1).join(".0"),n(e.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));--i>=0;){if(o[0][i]>o[1][i])return 1;if(o[0][i]!==o[1][i])return-1;if(0===i)return 0}}function o(t,n,o){var r=a;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(r=e(o));var s=""+r.version;for(var l in t)if(t.hasOwnProperty(l)&&r[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return i([s,t[l]])<0}return n}function r(e,t,n){return!o(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=o,a.compareVersions=i,a.check=r,a._detect=e,a})),define("bowser",(function(){})),(function(e,t,n){function i(e,t){return typeof e===t}function o(e){var t=E.className,n=b._config.classPrefix||"";if(w&&(t=t.baseVal),b._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}b._config.enableClasses&&(t+=" "+n+e.join(" "+n),w?E.className.baseVal=t:E.className=t)}function r(e,t){if("object"==typeof e)for(var n in e)A(e,n)&&r(n,e[n]);else{e=e.toLowerCase();var i=e.split("."),s=b[i[0]];if(2==i.length&&(s=s[i[1]]),void 0!==s)return b;t="function"==typeof t?t():t,1==i.length?b[i[0]]=t:(!b[i[0]]||b[i[0]]instanceof Boolean||(b[i[0]]=new Boolean(b[i[0]])),b[i[0]][i[1]]=t),o([(t&&0!=t?"":"no-")+i.join("-")]),b._trigger(e,t)}return b}function s(e,t){return!!~(""+e).indexOf(t)}function a(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):w?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function l(){var e=t.body;return e||(e=a(w?"svg":"body"),e.fake=!0),e}function u(e,n,i,o){var r,s,u,c,d="modernizr",h=a("div"),p=l();if(parseInt(i,10))for(;i--;)u=a("div"),u.id=o?o[i]:d+(i+1),h.appendChild(u);return r=a("style"),r.type="text/css",r.id="s"+d,(p.fake?p:h).appendChild(r),p.appendChild(h),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(t.createTextNode(e)),h.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",c=E.style.overflow,E.style.overflow="hidden",E.appendChild(p)),s=n(h,e),p.fake?(p.parentNode.removeChild(p),E.style.overflow=c,E.offsetHeight):h.parentNode.removeChild(h),!!s}function c(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function d(t,n,i){var o;if("getComputedStyle"in e){o=getComputedStyle.call(e,t,n);var r=e.console;if(null!==o)i&&(o=o.getPropertyValue(i));else if(r){var s=r.error?"error":"log";r[s].call(r,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else o=!n&&t.currentStyle&&t.currentStyle[i];return o}function h(t,i){var o=t.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(c(t[o]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var r=[];o--;)r.push("("+c(t[o])+":"+i+")");return r=r.join(" or "),u("@supports ("+r+") { #modernizr { position: absolute; } }",(function(e){return"absolute"==d(e,null,"position")}))}return n}function p(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}function m(e,t,o,r){function l(){c&&(delete j.style,delete j.modElem)}if(r=!i(r,"undefined")&&r,!i(o,"undefined")){var u=h(e,o);if(!i(u,"undefined"))return u}for(var c,d,m,f,_,g=["modernizr","tspan","samp"];!j.style&&g.length;)c=!0,j.modElem=a(g.shift()),j.style=j.modElem.style;for(m=e.length,d=0;d<m;d++)if(f=e[d],_=j.style[f],s(f,"-")&&(f=p(f)),j.style[f]!==n){if(r||i(o,"undefined"))return l(),"pfx"!=t||f;try{j.style[f]=o}catch(e){}if(j.style[f]!=_)return l(),"pfx"!=t||f}return l(),!1}function f(e,t){return function(){return e.apply(t,arguments)}}function _(e,t,n){var o;for(var r in e)if(e[r]in t)return!1===n?e[r]:(o=t[e[r]],i(o,"function")?f(o,n||t):o);return!1}function g(e,t,n,o,r){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+I.join(s+" ")+s).split(" ");return i(t,"string")||i(t,"undefined")?m(a,t,o,r):(a=(e+" "+C.join(s+" ")+s).split(" "),_(a,t,n))}function v(e,t,i){return g(e,n,n,t,i)}var y=[],M={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},b=function(){};b.prototype=M,b=new b;var A,T=[];!(function(){var e={}.hasOwnProperty;A=i(e,"undefined")||i(e.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}})();var E=t.documentElement,w="svg"===E.nodeName.toLowerCase();M._l={},M.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),b.hasOwnProperty(e)&&setTimeout((function(){b._trigger(e,b[e])}),0)},M._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout((function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)}),0),delete this._l[e]}},b._q.push((function(){M.addTest=r}));var O="Moz O ms Webkit",I=M._config.usePrefixes?O.split(" "):[];M._cssomPrefixes=I;var S={elem:a("modernizr")};b._q.push((function(){delete S.elem}));var j={style:S.elem.style};b._q.unshift((function(){delete j.style}));var C=M._config.usePrefixes?O.toLowerCase().split(" "):[];M._domPrefixes=C,M.testAllProps=g;var D=function(t){var i,o=prefixes.length,r=e.CSSRule;if(void 0===r)return n;if(!t)return!1;if(t=t.replace(/^@/,""),(i=t.replace(/-/g,"_").toUpperCase()+"_RULE")in r)return"@"+t;for(var s=0;s<o;s++){var a=prefixes[s];if(a.toUpperCase()+"_"+i in r)return"@-"+a.toLowerCase()+"-"+t}return!1};M.atRule=D;var R=M.prefixed=function(e,t,n){return 0===e.indexOf("@")?D(e):(-1!=e.indexOf("-")&&(e=p(e)),t?g(e,t,n):g(e,"pfx"))};b.addTest("blobconstructor",(function(){try{return!!new Blob}catch(e){return!1}}),{aliases:["blob-constructor"]}),b.addTest("pagevisibility",!!R("hidden",t,!1)),b.addTest("adownload",!e.externalHost&&"download"in a("a")),b.addTest("canvas",(function(){var e=a("canvas");return!(!e.getContext||!e.getContext("2d"))}));var L=a("canvas");b.addTest("todataurljpeg",(function(){return!!b.canvas&&0===L.toDataURL("image/jpeg").indexOf("data:image/jpeg")})),b.addTest("todataurlpng",(function(){return!!b.canvas&&0===L.toDataURL("image/png").indexOf("data:image/png")})),b.addTest("todataurlwebp",(function(){var e=!1;try{e=!!b.canvas&&0===L.toDataURL("image/webp").indexOf("data:image/webp")}catch(e){}return e})),M.testAllProps=v,b.addTest("cssanimations",v("animationName","a",!0)),b.addTest("svgasimg",t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"));var N=R("URL",e,!1);N=N&&e[N],b.addTest("bloburls",N&&"revokeObjectURL"in N&&"createObjectURL"in N),b.addAsyncTest((function(){function e(){var e=new Image;e.onerror=function(){r("datauri",!0),b.datauri=new Boolean(!0),b.datauri.over32kb=!1},e.onload=function(){r("datauri",!0),b.datauri=new Boolean(!0),b.datauri.over32kb=1==e.width&&1==e.height};for(var t="R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.length<33e3;)t="\r\n"+t;e.src="data:image/gif;base64,"+t}-1!==navigator.userAgent.indexOf("MSIE 7.")&&setTimeout((function(){r("datauri",!1)}),10);var t=new Image;t.onerror=function(){r("datauri",!1)},t.onload=function(){1==t.width&&1==t.height?e():r("datauri",!1)},t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="})),(function(){var e,t,n,o,r,s,a;for(var l in y)if(y.hasOwnProperty(l)){if(e=[],t=y[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=i(t.fn,"function")?t.fn():t.fn,r=0;r<e.length;r++)s=e[r],a=s.split("."),1===a.length?b[a[0]]=o:(!b[a[0]]||b[a[0]]instanceof Boolean||(b[a[0]]=new Boolean(b[a[0]])),b[a[0]][a[1]]=o),T.push((o?"":"no-")+a.join("-"))}})(),delete M.addTest,delete M.addAsyncTest;for(var k=0;k<b._q.length;k++)b._q[k]();"function"==typeof define&&(define.amd||e.Ember)&&define("module/core/js/ext/modernizr-amd",[],b)})(window,document),define("modernizr",["require","module/core/js/ext/modernizr-amd"],(function(e){"use strict";var t=e("module/core/js/ext/modernizr-amd");return t.addTest("toblob",(function(){
var e=document.createElement("canvas");return!!t.prefixed("toBlob",e,!1)})),t.onAll=function(e,n){var i=e.length,o=function(){--i||n()};e.forEach((function(e){t.on(e,o)}))},(function(){var e,n=document.createElement("canvas"),i=document.createElement("img");t.todataurlpng?(i.addEventListener("load",e=function(){i.removeEventListener("load",e,!1),n.width=1,n.height=1,setTimeout((function(){n.getContext("2d").drawImage(i,0,0);try{t.addTest("svgtocanvasnocors",!!n.toDataURL("image/png").length)}catch(e){if(!(e instanceof DOMException&&"SecurityError"===e.name))throw e;t.addTest("svgtocanvasnocors",!1)}}),0)},!1),i.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjwvc3ZnPg=="):t.addTest("svgtocanvasnocors",!1)})(),t})),define("module/core/js/tracker/trackeractions",["require","lodash","bowser","module/core/js/model/deviceinfo","modernizr","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(){}var n=e("lodash"),i=e("bowser"),o=e("module/core/js/model/deviceinfo"),r=e("modernizr"),s=e("module/core/js/tracker/enum/schema");return t.error=function(e,t,n,i){var o={schema:s.ERROR,id:e};if(t instanceof Error){if(o.message=t.message,t.stack&&(o.stack=t.stack),t.fileName&&(o.file=t.fileName),t.lineNumber&&(o.line=t.lineNumber),"string"==typeof n)o.message+=" "+n;else if(n&&"object"==typeof n)try{o.message+=" "+JSON.stringify(n)}catch(e){}}else o.message=t.toString(),n&&(o.file=n),i&&(o.line=i);return o},t.generateDeviceInfo=function(){var e,t,n,a,l=window.navigator.connection&&window.navigator.connection.type||"unknown",u=o.getInstance().asJSON();return a=u.osType,"string"==typeof a&&(a=a.toUpperCase()),"IOS"===a&&u.clientType?(e="Apple",t=u.deviceType,n=u.osVersion):"ANDROID"===a&&u.clientType?(e="",t=u.deviceType,n=u.osVersion):(a="BROWSER",e="",t="",n=i.name+" "+i.version),{schema:s.BROWSER_DEVICE_SCHEMA,platform:a,deviceBrand:e,deviceModel:t,deviceDPI:window.devicePixelRatio||1,deviceResolution:window.screen.width+"x"+window.screen.height,osType:n,browserId:"",userAgent:window.navigator.userAgent,language:window.navigator.language||window.navigator.browserLanguage||"unknown",windowSize:window.innerWidth+"x"+window.innerHeight,devicePixelRatio:window.devicePixelRatio||1,networkConnectionType:l,isPageVisibilitySupported:!!r.pagevisibility}},t.latency=function(e,n){return{schema:s.LATENCY_SCHEMA,device:t.generateDeviceInfo(),latency:n.getTimeTaken(),name:e}},n.merge(t.latency,{COMBINED_CALL:"COMBINED_CALL",DATA_POINTS:"DATA_POINTS",EPIC_SETTINGS_LOAD:"EPIC_SETTINGS_LOAD",EPIC_SETTINGS_SAVE:"EPIC_SETTINGS_SAVE",LAYOUT_SETTINGS_SAVE:"LAYOUT_SETTINGS_SAVE",COMBINED_SETTINGS:"COMBINED_SETTINGS",LAYOUT_LIST:"LAYOUT_LIST"}),Object.freeze(t.latency),Object.seal(t)})),define("module/core/js/serviceclient/baseserviceclient",["require","wt-fe-buz-utilities-url","module/core/js/util/ajaxrequest","module/core/js/util/class","module/core/js/model/deviceinfo","module/core/js/util/error","module/core/js/event/events","module/core/js/util/functional","module/core/js/util/log","module/core/js/tracker/enum/schema","module/core/js/util/string","module/core/js/event/subscribable","module/core/js/tracker/trackeractions","module/core/js/model/userinfo"],(function(e){"use strict";function t(e){this._eventBus=e,this._pendingRequests={}}var n=e("wt-fe-buz-utilities-url"),i=e("module/core/js/util/ajaxrequest"),o=e("module/core/js/util/class"),r=e("module/core/js/model/deviceinfo"),s=e("module/core/js/util/error"),a=e("module/core/js/event/events"),l=e("module/core/js/util/functional"),u=e("module/core/js/util/log"),c=e("module/core/js/tracker/enum/schema"),d=e("module/core/js/util/string"),h=e("module/core/js/event/subscribable"),p=e("module/core/js/tracker/trackeractions"),m=e("module/core/js/model/userinfo");o.extend(t,h),t.USER_AGENT_WITH_DEVICE="vendor=IG Group | applicationType={applicationType} | platform={platform} | deviceType={deviceType} | view={view} | version={version}",t.USER_AGENT_WITHOUT_DEVICE="vendor=IG Group | applicationType={applicationType} | platform={platform} | view={view} | version={version}";var f=t.prototype;return f._eventBus=null,f._pendingRequests=null,f._requestHash=l.plucker("endpoint"),f._executeRequest=function(e){var t,n=this._requestHash(e);this._adjustForNadex(e),this._addCommonHeaders(e),e.complete=this._abortRequest.bind(this,n),e.success=this._wrapSuccessCallback.bind(this,e.success),e.error=this._wrapErrorCallback.bind(this,e.error),this._pendingRequests[n]&&this._abortRequest(n),t=i.create(e),this._pendingRequests[n]=t,t.send()},f.abortAll=function(){Object.keys(this._pendingRequests).forEach(this._abortRequest,this)},f.destroy=f.abortAll,f._adjustForNadex=function(e){var t=m.getInstance();"ndx"===t.getWebSiteId()&&(e.endpoint=n.build(e.endpoint,{X_Security_Token:t.getSsoToken(),accountId:t.getAccountId()},!0))},f._addCommonHeaders=function(e){var n,i=r.getInstance(),o=i.getApplicationType(),s=i.getClientPlatform(),a=i.getDeviceType(),l=i.getView(),u=i.getClientVersion();n=a?t.USER_AGENT_WITH_DEVICE:t.USER_AGENT_WITHOUT_DEVICE,e.headers=e.headers||{},e.headers["x-device-user-agent"]=d.merge(n,{applicationType:o,platform:s,deviceType:a,view:l,version:u})},f._abortRequest=function(e){this._pendingRequests[e]&&(this._pendingRequests[e].abort(),delete this._pendingRequests[e])},f._wrapSuccessCallback=function(e,t,n,i){s.captureError((function(){e&&e(t,n,i)}),(function(e){u.error(t.getEndpoint(),e,n,i),this._eventBus.publish("tracker/chart",[p.error("error_in_success_handler",e,this._getRequestError(t,i))])}),this)},f._wrapErrorCallback=function(e,t,n,i,o){var r=!1,l=this._getErrorMessage(n,o);s.captureError((function(){e&&!1===e(t,n,i,l)&&(r=!0)}),(function(e){u.error(t.getEndpoint(),e,l,i,"error_in_error_handler_callback"),this._eventBus.publish("tracker/chart",[p.error("error_in_error_handler_callback",e,this._getRequestError(t,i))])}),this),!1===r&&(this._eventBus.publish(a.REQUEST_ERROR),this._eventBus.publish("tracker/chart",[this._getRequestError(t,i,!0)]))},f._getErrorMessage=function(e,t){return e.error?e.error.toString():"string"==typeof e?e:t.responseText},f._getRequestError=function(e,t,n){var i={url:e.getStrippedEndpoint(),method:e.getMethod(),status:t};return n&&(i.schema=c.REQUEST_ERROR),i},Object.seal(f),Object.seal(t)})),define("module/core/js/serviceclient/combinedcall/combinedcallclient",["require","module/core/js/util/ajaxrequest","wt-fe-buz-utilities-url","module/core/js/serviceclient/baseserviceclient","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/timeconstants","module/core/js/model/userinfo","module/core/js/tracker/trackeractions"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/core/js/util/ajaxrequest"),i=e("wt-fe-buz-utilities-url"),o=e("module/core/js/serviceclient/baseserviceclient"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/math"),l=e("module/core/js/util/timeconstants"),u=e("module/core/js/model/userinfo"),c=e("module/core/js/tracker/trackeractions");r.extend(t,o),t.create=function(e){return new t(e)},t.BASE_SNAPSHOT_ENDPOINT="/chart/snapshot";var d=t.prototype;return d.loadInstrumentData=function(e,t,n){this._executeRequest({instrumentResolution:e,endpoint:this._getCombinedCallEndpoint(e,n),success:this._handleInstrumentData.bind(this,e,t),error:this._handleFailed.bind(this,e.instrumentResolutionGuid)})},d.abort=function(e){this._abortRequest(e.instrumentResolutionGuid)},d._requestHash=s.plucker("instrumentResolution.instrumentResolutionGuid"),d._getCombinedCallEndpoint=function(e,t){var n=this._getSnapshotEndpoint(e,t),o=e.instrumentModel,r=u.getInstance(),s={format:"json",siteId:r.getWebSiteId(),locale:r.getLocale()};if(a.isNumber(o.instrumentVersion)&&(s.version=o.instrumentVersion),a.isNumber(o.delayTime)&&(s.delay=o.delayTime),!s.siteId||!s.locale)throw new Error("Not enough info to make call to combined service: "+JSON.stringify(s));return i.build(n,s,!0)},d._getSnapshotEndpoint=function(e,n){var i=e.instrumentModel,o=a.isNumber(i.instrumentVersion)&&a.isNumber(i.delayTime);return[t.BASE_SNAPSHOT_ENDPOINT,e.getEpic(),e.resolution.multiple,e.resolution.periodUnit,o?"combined-cached":"combined",n].join("/")},d._handleInstrumentData=function(e,t,n,i,o){this._eventBus.publish("tracker/latency",[c.latency(c.latency.COMBINED_CALL,n)]);var r=e.resolution,s=i.instrumentInfoDto.delay*l.Periods.MINUTE,a=Math.floor(s/r.period)*r.period;i.intervalsDto.currentCandleTimestamp-=a,t(i)},d._handleFailed=function(e,t,i,o,r){this._eventBus.publish("statistics",["HCD_REQUEST_FAILED",{instrumentResolutionGuid:e,timeTaken:t.getTimeTaken(),failedRequests:n.CONSECUTIVE_FAILED_REQUESTS,endpoint:t.getEndpoint(),response:r,statusCode:o}])},Object.seal(d),Object.seal(t)})),define("module/core/js/model/blockprocessor",["require","module/core/js/util/array","module/core/js/model/block","module/core/js/util/log","module/core/js/util/functional"],(function(e){"use strict";function t(e,t,n){this._priceAdapter=e,this._priceCalculator=t,this._blocksToProcess=n}var n=e("module/core/js/util/array"),i=e("module/core/js/model/block"),o=e("module/core/js/util/log"),r=e("module/core/js/util/functional");t.create=function(e,n,i){return new t(e,n,i)},t.setTickDatesForAccTime=function(e,t,n){var i=0;n.iterateBackward((function(n){var r=e.length-n.numberOfPoints-i,s=r+n.numberOfPoints;r<0&&(o.error("Not enough points to fill the block. Duplicating",Math.abs(r),"point(s) at the end of the block to fill it."),s-=r,r=0);var a=e.slice(r,s);if(n.withTickDates(a),i+=a.length,t===n)return!1}))},t.preProcessBlocks=function(e,n,o){var r,s=[];for(r=n;r&&(r.loading.loaded||(r.rawPriceData=[],r.loading=i.UNPROCESSED,s.push(r)),r!==o);)r=r.next;s.length&&e.length&&t.attachRawDataToBlocks(e,s)},t.attachRawDataToBlocks=function(e,t){var n,i,o;for(i=e.shift(),o=0;o<t.length;o++)for(n=t[o];i;){if(i.timestamp>=n.start){if(i.timestamp>=n.end)break;n.rawPriceData.push(i)}i=e.shift()}};var s=t.prototype;return s._priceAdapter=null,s._priceCalculator=null,s._blocksToProcess=null,s._processedBlocks=null,s._processedPoints=null,s._finaliseBlockLoading=!1,s.getProcessedBlocks=r.getter("_processedBlocks"),s.getProcessedPoints=r.getter("_processedPoints"),s.processBlocks=function(){var e,t,n=[],i=[];for(t=0;t<this._blocksToProcess.length;t++)e=this._blocksToProcess[t],0===e.index&&(this._priceCalculator.allowPartialDataPoints=!0,this._finaliseBlockLoading=!0),this._formatRawDataInBlock(e,n,i);this._processedBlocks=i,this._processedPoints=n.filter(r.identity)},s._formatRawDataInBlock=function(e,t,o){var r=this._priceAdapter.convertToDataPoints(e);(r.length===e.rawPriceData.length||this._finaliseBlockLoading)&&(n.inPlaceConcat(t,r),o.push(e),e.loading=i.LOADED,e.rawPriceData=null)},Object.seal(s),Object.seal(t)})),define("module/core/js/model/chartmodelevents",[],(function(){"use strict";return Object.freeze({INSTRUMENT_RESOLUTION_CHANGE:"instrumentResolutionChange",INSTRUMENT_RESOLUTION_LOADED:"instrumentResolutionLoaded",INSTRUMENT_CHANGED:"instrumentChanged",INDICATOR_ADDED:"indicatorAdded",INDICATOR_REMOVED:"indicatorRemoved",INDICATOR_UPDATED:"indicatorUpdated",CHART_LOADED:"CHART_LOADED",CHART_CLEARED:"CHART_CLEARED",STREAMING_STATUS_CHANGED:"streamingStatusChanged",STREAMING_STATUS_RECONNECTED:"streamingStatusReconnected"})})),define("module/core/js/model/instrumentresolutionevents",[],(function(){"use strict";return Object.freeze({HCD_DATA_POINTS_LOADED:"hcdDataPointsLoaded",INTERVAL_LIST_LOADED:"intervalListLoaded",BLOCKS_POINTS_ADDED:"blocksPointsAdded",END_DATE_CHANGED:"endDateChanged",NEW_CURRENT_DATA_POINT:"newCurrentDataPoint",CURRENT_DATA_POINT_CHANGED:"currentDataPointChanged",INFO_LOADED:"instrumentResolutionInfoLoaded"})})),define("wt-fe-clientstreaming-streaming",["require"],(function(require){var langRootNamespace={IG:{}},IG=langRootNamespace.IG,IG=langRootNamespace.IG||{};!(function(){for(var e=["business","format","streaming","ticket","ui","util","validation","widget","rtcharts"],t=0,n=e.length;t<n;t++)IG[e[t]]=IG[e[t]]||{}})();var IG=langRootNamespace.IG||{};return (function(){function e(e){return function(){var n=t(e),i=Array.prototype.slice.call(arguments);if("none"!=n){IG[e]=console[n];try{IG[e].apply?IG[e].apply(this,i):IG[e](i)}catch(t){IG[e]=function(){console[n].apply(console,Array.prototype.slice.call(arguments))},IG[e].apply(this,i)}}}}var t=function(e){if(window.console&&IG._isDebugEnabled)switch(e){case"error":if(console.error)return"error";case"warn":if(console.warn)return"warn";case"debug":if(console.debug)return"debug";case"info":if(console.info)return"info";default:if(console.log)return"log"}return"none"};IG.error=e("error"),IG.warn=e("warn"),IG.debug=e("debug"),IG.info=e("info")})(),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=this.length,n=Number(arguments[1]);for(isNaN(n)?n=t-1:(n=n<0?Math.ceil(n):Math.floor(n),n<0?n+=t:n>=t&&(n=t-1));n>-1;n--)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.some||(Array.prototype.some=function(e){var t=0,n=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=arguments[1];t<n;t++)if(t in this&&e.call(i,this[t],t,this))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array(t),i=arguments[1],o=0;o<t;o++)o in this&&(n[o]=e.call(i,this[o],o,this));return n}),Array.prototype.every||(Array.prototype.every=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;i<t;i++)if(i in this&&!e.call(n,this[i],i,this))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array,i=arguments[1],o=0;o<t;o++)if(o in this){var r=this[o];e.call(i,r,o,this)&&n.push(r)}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;i<t;i++)i in this&&e.call(n,this[i],i,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;if(0==t&&1==arguments.length)throw new TypeError;var n=0;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n++];break}if(++n>=t)throw new TypeError}for(;n<t;n++)n in this&&(i=e.call(null,i,this[n],n,this));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;if(0==t&&1==arguments.length)throw new TypeError;var n=t-1;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n--];break}if(--n<0)throw new TypeError}for(;n>=0;n--)n in this&&(i=e.call(null,i,this[n],n,this));return i}),Date.now||(Date.now=function(){return(new Date).getTime()}),Function.prototype.bind||(function(e){function t(e,t,n){return function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,i)}}function n(e,t){return function(){return e.apply(t,arguments)}}e.bind=function(e){return arguments.length>1?t(this,e,Array.prototype.slice.call(arguments,1)):n(this,e)}})(Function.prototype),window.JSON||(function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(i=rep[n],(o=str(i,l))&&s.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l))&&s.push(quote(i)+(gap?": ":":")+o);return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}window.JSON={},"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)t[t.length]=n;return t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),(function(e,t){function n(e){this._rootNamespace=e}n.prototype._rootNamespace=null,n.prototype.extend=function(e,t){function n(){}return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,e},n.prototype.createMixIn=function(e,t){var n=t.prototype,i=function(){i.superclass.constructor.apply(this,arguments),n.constructor.apply(this,arguments)};this.extend(i,e);for(var o in n)"function"==typeof n[o]&&i.prototype[o]?i.prototype[o]=(function(e,t){return function(){var n=e.apply(this,arguments);return t.apply(this,arguments),n}})(i.prototype[o],n[o]):i.prototype[o]=n[o];return i},n.prototype.namespace=function(){for(var e,t,n,i,o=this._rootNamespace,r=0,s=arguments.length;r<s;r++)for(i={},n=arguments[r].split("."),e=0,t=n.length;e<t;e++)i=e?i[n[e]]||(i[n[e]]={}):o[n[e]]?o[n[e]]:o[n[e]]={}},n.prototype.applyTo=function(e,t,n){for(var i in t)"|prototype|superclass|".indexOf("|"+i+"|")<0&&(!n||void 0===e[i])&&(e[i]=t[i]);return e},n.createGetter=function(e){return function(){return this[e]}},n.createSetter=function(e,t,n){var i="beforeSet"+n,o="afterSet"+n,r=[];return(e[i]||e[o])&&r.push("var oldValue = this."+t+";"),e[i]&&r.push("itemValue = this."+i+"(itemValue);"),r.push("this."+t+" = itemValue;"),e[o]&&r.push("this."+o+"(itemValue, oldValue);"),r.push("return this;"),new Function("itemValue",r.join(""))},n.prototype.applyGetterSetters=function(e){if("function"!=typeof e)throw new TypeError("Lang.applyGetterSetters called on a non-function object.");var t=e.prototype;for(var i in t)if(i&&"|object|function|".indexOf(typeof t[i])>0){var o=i.charAt(0).toUpperCase()+i.substring(1),r="get"+o,s="set"+o;t[r]||(t[r]=n.createGetter(i)),t[s]||(t[s]=n.createSetter(t,i,o))}return e},e.util.Lang=new n("object"==typeof langRootNamespace?langRootNamespace:window)})(IG),(function(e){"use strict";function t(e){!0===e&&(e=t.EVENT_STORE_TYPE.SINGLE),t.prepareInstance(this,e)}t.prepareInstance=function(e,n){e.__events={},e.__handlers=[],n===t.EVENT_STORE_TYPE.GROUP?(e.on=e.subscribe=t.groupEventSubscribe,e.un=e.unsubscribe=t.groupEventUnsubscribe,e.fire=t.groupEventFire,e.hasListener=t.multiEventHasListener):n===t.EVENT_STORE_TYPE.SINGLE?(e.on=e.subscribe=t.singleEventSubscribe,e.un=e.unsubscribe=t.singleEventUnsubscribe,e.fire=t.singleEventFire,e.hasListener=t.singleEventHasListener):(e.onHasListenerChanged?(e.on=e.subscribe=t.advisoryMultiEventSubscribe,e.un=e.unsubscribe=t.advisoryMultiEventUnsubscribe):(e.on=e.subscribe=t.multiEventSubscribe,e.un=e.unsubscribe=t.multiEventUnsubscribe),e.fire=t.multiEventFire,e.hasListener=t.multiEventHasListener),e.unsubscribeEach||(e.unsubscribeEach=t.prototype.unsubscribeEach)},t.getSelectorType=function(e){var n=typeof e;return"number"==n?t.SINGLE_EVENT:"function"==n?t.EVENT_HANDLER_FUNCTION:"string"==n?t.NAMED_EVENT:t.ALL_EVENTS},t.getUnsubscribeMethod=function(e){var n=t.getSelectorType(e);return n==t.SINGLE_EVENT?t.unsubscribeSingleEvent:n==t.NAMED_EVENT?t.unsubscribeNamedEvent:n==t.EVENT_HANDLER_FUNCTION?t.unsubscribeFunctionHandlers:t.unsubscribeAllEvents},t.multiEventSubscribe=function(e,n,i,o){return e=(""+e).toLowerCase(),this.__handlers.push([n,i,e,o]),t.bindEventHandler(this,e,this.__handlers.length-1)},t.singleEventSubscribe=function(e,n,i){return this.__handlers.push([e,n,"default",i]),t.bindEventHandler(this,"default",this.__handlers.length-1)},t.groupEventSubscribe=function(e,n,i,o){e=[].concat(e);var r,s=e.length,a=this.__handlers.length;for(this.__handlers.push([n,i,(""+e[0]).toLowerCase(),o]),r=0;r<s;r++)t.bindEventHandler(this,e[r].toLowerCase(),a);return a},t.advisoryMultiEventSubscribe=function(e,n,i,o){var r,s=this.hasListener(e=(""+e).toLowerCase());return this.__handlers.push([n,i,e,o]),r=t.bindEventHandler(this,e,this.__handlers.length-1),s||this.onHasListenerChanged(e,!0),r},t.bindEventHandler=function(e,t,n){return e.__events[t]||(e.__events[t]=[]),e.__events[t].push(n),n},t.groupEventFire=function(e){for(var n,i,o,r,s={},a=[],l=[],u=l.concat(e);u.length;)for(o=this.__events[(""+u.shift()).toLowerCase()]||l,n=0,i=o.length;n<i;n++)r=o[n],s[r]||(s[r]=!0,a.push(r));return t.processHandlers(this,a,Array.prototype.slice.call(arguments,1))},t.multiEventFire=function(e){return t.processHandlers(this,this.__events[(""+e).toLowerCase()],Array.prototype.slice.call(arguments,1))},t.singleEventFire=function(){return t.processHandlers(this,this.__events.default,arguments)},t.processHandlers=function(e,t,n){var i,o,r,s=t&&t.length?t.length:0;for(i=0;i<s;i++)if((r=e.__handlers[t[i]])&&(o=r[0].apply(r[1]||window,n),r[3]&&r[3].once&&e.un(t[i]),!1===o))return!1;return!0},t.unsubscribeSingleEvent=function(e,t,n){var i=e.__handlers[n],o=!!t;!i||o&&i[1]!==t||(i[0]=null,i[1]=null,e.__handlers[n]=null)},t.unsubscribeNamedEvent=function(e,n,i){var o,r,s=(""+i).toLowerCase(),a=e.__events[s],l=!!n;if(a){for(o=0,r=a.length;o<r;o++)t.unsubscribeSingleEvent(e,n,a[o]);l?t._cleanSubscriptions(e):e.__events[s]=[]}},t.unsubscribeAllEvents=function(e,n){var i,o=e.__handlers,r=!!n;if(o&&o.length){for(i=o.length;i>0;i--)t.unsubscribeSingleEvent(e,n,i-1);r?t._cleanSubscriptions(e):(e.__handlers=[],e.__events={})}},t.unsubscribeFunctionHandlers=function(e,n,i){var o,r,s=e.__handlers,a=!!n;if(s&&s.length){for(o=s.length;o>0;)(r=s[--o])&&r[0]===i&&t.unsubscribeSingleEvent(e,n,o);a&&t._cleanSubscriptions(e)}},t.multiEventUnsubscribe=t.singleEventUnsubscribe=function(e,n){return t.getUnsubscribeMethod(e)(this,n,e),this},t.groupEventUnsubscribe=function(e,n){return t.getUnsubscribeMethod(e)(this,n,e),t._cleanSubscriptions(this),this},t.advisoryMultiEventUnsubscribe=function(e,n){var i,o,r,s=null,a=t.getSelectorType(e);if(a==t.ALL_EVENTS){s=[];for(i in this.__events)this.hasListener(i)&&s.push(i)}else a==t.SINGLE_EVENT&&this.__handlers[e]?i=this.__handlers[e][2]:a==t.NAMED_EVENT&&(i=(""+e).toLowerCase()),i&&this.hasListener(i)&&(s=[i]);if(t.getUnsubscribeMethod(e)(this,n,e),s)for(o=0,r=s.length;o<r;o++)this.hasListener(s[o])||this.onHasListenerChanged(s[o],!1);return this},t.isPreparedInstance=function(e){return!!e.__events&&!!e.__handlers},t.prototype.__events=null,t.prototype.__handlers=null,t.prototype.on=function(){return t.prepareInstance(this),this.on.apply(this,arguments)},t.prototype.subscribe=t.prototype.on,t.prototype.fire=function(){return!0},t.prototype.un=function(e,t){return this},t.prototype.unsubscribe=t.prototype.un,t.prototype.unsubscribeEach=function(e){var n,i;if(t.isPreparedInstance(this)&&e instanceof Array)for(n=0,i=e.length;n<i;n++)this.un(e[n])},t.prototype.hasListener=function(){return!1},t.multiEventHasListener=function(e){var t,n,i=this.__events[(""+e).toLowerCase()];if(i&&(n=i.length))for(t=0;t<n;t++)if(this.__handlers[i[t]])return!0;return!1},t.singleEventHasListener=function(){var e,t,n=this.__handlers;if(n&&(t=n.length))for(e=0;e<t;e++)if(n[e])return!0;return!1},t._cleanSubscriptions=function(e){if(e.__events&&e.__handlers){var t,n,i,o,r,s,a;for(t in e.__events){for(i=!1,n=null,o=e.__events[t],s=0,a=o.length;s<a;s++)r=e.__handlers[o[s]],r?i&&n.push(o[s]):i||(n=s?o.slice(0,s):[],i=!0);i&&(e.__events[t]=n)}for(s=a=e.__handlers.length;--s>0&&!e.__handlers[s];);e.__handlers.splice(s+1,a)}},t.ALL_EVENTS="all",t.NAMED_EVENT="event",t.SINGLE_EVENT="single",t.EVENT_HANDLER_FUNCTION="handler",t.EVENT_STORE_TYPE={SINGLE:0,MULTIPLE:1,GROUP:2},e.util.Subscribable=t})(IG),(function(e){function t(e){this._environmentString=t.resolveFromUrl(e)}t.prototype._environmentString="",t.prototype.toString=function(){return this._environmentString},t._getEnvironmentConstant=function(e){var e=(""+e).replace(/^[a-z]+:\/\//,""),t=e.replace(/^\/+/,"").replace(/\/.*$/,""),n=t.split("."),i=n.shift();return 0===i.indexOf("igpc")||0===i.indexOf("vmprd")||0===i.indexOf("igvmpc")||0===i.indexOf("localhost")||0===i.indexOf("igmac")?0:0===i.indexOf("net")?1:0===i.indexOf("web")?2:0===i.indexOf("demo")||0===i.indexOf("alt")?3:4},t.resolveFromUrl=function(e){return t.constants[t._getEnvironmentConstant(e)]},t.getEnvironmentPrefix=function(e){return t.streamingConstants[t._getEnvironmentConstant(e)]},t.getStreamingPrefix=t.getEnvironmentPrefix,t.DEV="dev",t.TEST="test",t.UAT="uat",t.DEMO="demo",t.PROD="prod",t.constants=["dev","test","uat","demo","prod"],t.streamingConstants=["net","net","web","demo",null],e.util.Environment=t})(IG),(function(e){"use strict";e.util.Lang.namespace("IG.service")})(IG),(function(e){function t(e,t){this.subscriptionStringPrefix=e,this.fieldIds=t,this._subscriptions={},this._pendingIds={}}t.prototype.subscriptionStringPrefix=null,t.prototype.fieldIds=null,t.prototype._pendingIds=null,t.prototype._isSubscribed=!1,t.prototype._subscriptions=null,t.prototype._callback=null,t.prototype._callbackScope=null,t.prototype._maxFrequency=null,t.prototype._subscribeMode="MERGE",t.prototype.withRawSubscriptions=function(){return this._subscribeMode="RAW",this},t.prototype.withMaxFrequency=function(e){return this._maxFrequency=e,this},t.prototype.addIds=function(e){for(var t=0,n=e.length;t<n;t++)this.addId(e[t]);return this},t.prototype.addId=function(t){return t?this._isSubscribed?this._subscribeTo(t):this._addPending(t):e.warn("GroupSubscription.addId: cannot add an empty id"),this},t.prototype.removeId=function(e){var t=this._isSubscribed,n=t?this._subscriptions:this._pendingIds;t&&n[e]&&n[e].unsubscribe(),delete n[e]},t.prototype.removeAll=function(){var e=this._isSubscribed,t=e?this._subscriptions:this._pendingIds;for(var n in t)e&&t[n].unsubscribe(),delete t[n];return this},t.prototype.subscribe=function(e,t){var n;if(!this._isSubscribed){this._callback=e,this._callbackScope=t;for(n in this._pendingIds)this._subscribeTo(n);this._pendingIds={},this._isSubscribed=!0}},t.prototype.unsubscribe=function(){for(var e in this._subscriptions)this._subscriptions[e].unsubscribe();this._pendingIds={},this._subscriptions={},this._isSubscribed=!1,this._callback=null,this._callbackScope=null},t.prototype._subscribeTo=function(t){if(!this._subscriptions[t]){var n=this._callback.bind(this._callbackScope||window,t);this._subscriptions[t]=e.service.LightstreamerService.subscribe(this.subscriptionStringPrefix+"|"+t,this.fieldIds,this._subscribeMode,n,this._maxFrequency)}},t.prototype._addPending=function(e){this._pendingIds[e]=!0},e.service.GroupSubscription=t})(IG),(function(e){"use strict";function t(e,n,i,o){this._subscriptionFieldsString=e,this._schema=n,this._channel=i,this._version=o||t.CURRENT_SUBSCRIPTION_VERSION}t.prototype._subscriptionFieldsString=null,t.prototype._schema=null,t.prototype._channel=null,t.prototype._version=null,t.prototype.build=function(e){var t,n;return t=this._version+"-"+this._channel+"-"+this._subscriptionFieldsString,this._getModifiers(e)&&(n=this._getModifiers(e).join(","))&&(t+=":"+n),this._getSubscriptionItemId(e)&&(t+="|"+this._getSubscriptionItemId(e)),t},t.prototype._getModifiers=function(e){return e.getDisplayModifiers()},t.prototype._getSubscriptionItemId=function(e){return e.getDisplaySubscriptionId()},t.prototype.getSchema=function(){return this._schema},t.CURRENT_SUBSCRIPTION_VERSION="V2",e.util.SubscriptionStringBuilder=t})(IG),(function(e){function t(){}e.util.Lang.extend(t,e.util.Subscribable),t.prototype._heartbeat=null,t.prototype.lightstreamerSubscription=null,t.FREQUENCY=1,t.prototype.getHeartbeat=function(){return this._heartbeat},t.prototype._handleUpdate=function(e,n){this._heartbeat=+n.getValue(1),this.fire(t.HEARTBEAT_EVENT,this._heartbeat,this)},t.prototype.subscribe=function(){return this.lightstreamerSubscription||(this.lightstreamerSubscription=e.service.LightstreamerService.subscribe("V2-M-HEARTBEAT|HB.U.HEARTBEAT.IP",["heartbeat"],"MERGE",this._handleUpdate.bind(this),t.FREQUENCY)),this},t.prototype.unsubscribe=function(){return this.lightstreamerSubscription&&(this.lightstreamerSubscription.unsubscribe(),this.lightstreamerSubscription=null),this},t.HEARTBEAT_EVENT="heartbeat",e.service.HeartbeatSubscription=t})(IG),(function(e){"use strict";function t(e){t.superclass.constructor.apply(this,arguments),this._subscriptionStringBuilder=e,this._resetInstruments()}e.util.Lang.extend(t,e.service.GroupSubscription),t.prototype._pendingInstruments=null,t.prototype.addInstruments=function(e){return e.forEach(this.addInstrument,this),this},t.prototype.addInstrument=function(e){var t=e.getKey();return t?(this._pendingInstruments[t]=e,this.addId(t),this):this},t.prototype._subscribeTo=function(t){if(!this._subscriptions[t]){var n=this._callback.bind(this._callbackScope||window,t),i=this._pendingInstruments[t];this._subscriptions[t]=e.service.LightstreamerService.subscribe(this._subscriptionStringBuilder.build(i.getFeedInfo()),this._subscriptionStringBuilder.getSchema(),this._subscribeMode,n,this._maxFrequency)}},t.prototype.removeInstrument=function(e){return this.removeId(e.getKey()),this},t.prototype.removeId=function(e){t.superclass.removeId.call(this,e),delete this._pendingInstruments[e]},t.prototype.removeAll=function(){t.superclass.removeAll.apply(this,arguments),this._resetInstruments()},t.prototype.subscribe=function(e,n){t.superclass.subscribe.apply(this,arguments),this._resetInstruments()},t.prototype.unsubscribe=function(){t.superclass.unsubscribe.apply(this,arguments),this._resetInstruments()},t.prototype.getSchema=function(){return this._subscriptionStringBuilder.getSchema()},t.prototype._resetInstruments=function(){
this._pendingInstruments={}},e.service.InstrumentSubscription=t})(IG),(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}e.util.Lang.extend(t,e.util.SubscriptionStringBuilder),t.prototype._getModifiers=function(e){return e.getDealingModifiers()},t.prototype._getSubscriptionItemId=function(e){return e.getDealingSubscriptionId()},e.util.DealingSubscriptionStringBuilder=t})(IG),(function(e){"use strict";function t(e){this._display=e.display,this._dealing=e.dealing,this._hasAnySubscriptionData=!!this._display||!!this._dealing}t.prototype._dealing=null,t.prototype._display=null,t.prototype._hasAnySubscriptionData=null,t.prototype.getDelayTime=function(){return this._display&&this._display.delayTime?this._display.delayTime:0},t.prototype.getDealingModifiers=function(){return this._dealing?this._dealing.modifiers:null},t.prototype.getDealingSubscriptionId=function(){return this._dealing?this._dealing.subscriptionId:null},t.prototype.getDisplayModifiers=function(){return this._display?this._display.modifiers:this._dealing?this._dealing.modifiers:null},t.prototype.getDisplaySubscriptionId=function(){return this._display?this._display.subscriptionId:this._dealing?this._dealing.subscriptionId:null},t.prototype.getKey=function(){return this._obtainEpicFromSubscriptionId(this.getDisplaySubscriptionId())},t.prototype._obtainEpicFromSubscriptionId=function(e){return e?e.replace(".FREE",""):""},t.prototype.hasAnySubscriptionData=function(){return this._hasAnySubscriptionData},e.util.FeedInfo=t})(IG),(function(){IG.util.Lang.namespace("IG.service");var e,t,n=arguments.length,i=IG.service;for(e=0;e<n;e++)if((t=arguments[e])&&t.Subscription){i.Subscription=t.Subscription,i.LightstreamerClient=t.LightstreamerClient;break}i.LightstreamerClient||IG.warn("Lightstreamer service could not be initialised, ensure LS libraries are included")})(window.Lightstreamer,window),(function(e){function t(t,i,o,r,s,a,l,u){var c=new e.service.Subscription(o,t,i);c.addListener({onItemUpdate:r,onSubscription:u}),c.setRequestedMaxFrequency(a),l&&c.setDataAdapter(l),"MERGE"==o&&c.setRequestedSnapshot("yes"),this._client=s,this._client.subscribe(c),this._subscriptionName=""+n++,this._subscription=c,e.info("Subscribing to ",o,"data with:",t,"group using table(",this._subscriptionName,")")}e.util.Lang.namespace("IG.service");var n=0;t.prototype.unsubscribe=function(){this._client.unsubscribe(this._subscription);e.info("Unsubscribed table (",this._subscriptionName,") from lightstreamer")},e.service.LightstreamerSubscription=t})(IG),(function(e){function t(){this._eventEmitter=new e.util.Subscribable}t.CLIENT_READY_EVENT=t.prototype.CLIENT_READY_EVENT="clientReadyEvent",t.STATUS_CHANGE_EVENT=t.prototype.STATUS_CHANGE_EVENT="statusChange",t.AUTHENTICATION_FAILED_EVENT=t.prototype.AUTHENTICATION_FAILED_EVENT="authenticationFailedEvent",t.prototype._client=null,t.prototype._eventEmitter=null,t.prototype.libraryPath=null,t.prototype.clientName=null,t.prototype._enableStreaming=!0,t.prototype._accountId=null,t.prototype._password=null,t.prototype._lsDomain=null,t.prototype._adaptorName=null,t.prototype._retryingAuthentication=0,t.prototype.on=function(){this._eventEmitter.on.apply(this._eventEmitter,arguments)},t.prototype.un=function(){this._eventEmitter.un.apply(this._eventEmitter,arguments)},t.prototype.configure=function(e,t,n,i,o,r,s){if(!t)throw new Error("Configuring IG.service.LightstreamerService failed",t);this.libraryPath=e,this.clientName=t,this._accountId=n,this._enableStreaming=!i,this._lsDomain=(o||"mdp")+".",this._adaptorName=r||"InVisionProvider",this._password=s,this._retryingAuthentication=0},t.prototype._handleStatusChange=function(n){e.info("Lightstreamer connection status has changed to ",n),"CONNECTING"==n&&this._triggerConnectionEventOnce(),"DISCONNECTED:WILL-RETRY"==n&&this._increaseConnectTimeoutOnce(),this._eventEmitter.fire(t.STATUS_CHANGE_EVENT,n,this._retryingAuthentication>0)},t.prototype._triggerConnectionEventOnce=function(){this._eventEmitter.fire(t.CLIENT_READY_EVENT),this._triggerConnectionEventOnce=function(){}},t.prototype._increaseConnectTimeoutOnce=function(){this._client.connectionOptions.setConnectTimeout(1e4),this._increaseConnectTimeoutOnce=function(){}},t.prototype._getLsPort=function(){return window.location.protocol.indexOf("https")>-1?443:80},t.prototype._getLsDomainFor=function(t){var n=this._lsDomain,i=t.split(".").slice(1),o=e.util.Environment.getStreamingPrefix(t);if(null!=o&&(n=o+"-"+n),n)return document.location.protocol+"//"+n+i.join(".");throw new Error("Unable to compute the domain to use for LightStreamer")},t.prototype._createClient=function(){if(!this.clientName)throw new Error("IG.service.LightstreamerService cannot create a client as it has not been configured");this._client=new e.service.LightstreamerClient(this._getLsDomainFor(document.location.host),this._adaptorName),this._client.addListener({onStatusChange:this._handleStatusChange.bind(this)}),this._client.connectionSharing.enableSharing(this.clientName,"ATTACH","CREATE");var t=this._client.connectionDetails;this._accountId&&t.setUser(this._accountId),this._password&&t.setPassword(this._password),this._client.onServerError=this._onServerError.bind(this),this._client.connect()},t.prototype._onServerError=function(n,i){if(1===n){if(this._retryingAuthentication)throw this._eventEmitter.fire(t.AUTHENTICATION_FAILED_EVENT,n,i),new Error("IG.service.LightstreamerService could not connect due to authentication failure");e.info("Lightstreamer authentication failed. Attempting to connect as anonymous user"),this._retryingAuthentication++,this._client.connectionDetails.setPassword(),this._client.connect()}},t.prototype.subscribe=function(t,n,i,o,r,s,a){return this._enableStreaming?(this._client||this._createClient(),null==r&&(r=1),new e.service.LightstreamerSubscription(t,n,i,o,this._client,r,s,a)):new e.service.NonStreamingSubscription},t.prototype.getStatus=function(){return(this._client?this._client.getStatus():null)||"DISCONNECTED"},t.prototype.changeStatus=function(e){return this._client||this._createClient(),"DISCONNECTED"==e?this.disconnect():("DISCONNECTED"==this._client.getStatus()&&this.connect(),this._client.connectionOptions.setForcedTransport(e)),this},t.prototype.connect=function(){return this._client||this._createClient(),this._client.connect(),this},t.prototype.disconnect=function(){return this._client||this._createClient(),this._client.disconnect(),this},t.prototype.getClient=function(){return this._client||this._createClient(),this._client},e.service.LightstreamerService=new t,e.service.LightstreamerService.subscriptionStrings={MESSAGE_HANDLER:"V2-M-MESSAGE_EVENT_HANDLER|",ACCOUNT_MESSAGING:"M___.MGE|{0} M___.MG|{0}-LGT "}})(IG),(function(e){"use strict";var t,n,i=window.IG;t=i&&i.service&&i.service.LightstreamerService?i.service.LightstreamerService:e.service.LightstreamerService,e.service.LightstreamerAmdService={};for(n in t)"function"==typeof t[n]?e.service.LightstreamerAmdService[n]=function(e){return t[e].apply(t,Array.prototype.slice.call(arguments,1))}.bind(null,n):e.service.LightstreamerAmdService[n]=t[n];e.service.LightstreamerAmdService.useInstance=function(e){t=e},e.service.LightstreamerAmdService._getInstance=function(){return t}})(IG),(function(){function e(){}e.prototype.unsubscribe=function(){},IG.service.NonStreamingSubscription=e})(),(function(e){function t(){}e.util.Lang.extend(t,e.util.Subscribable),t.prototype.serverName="",t.prototype.lightstreamerSubscription=null,t.prototype.getServerName=function(){return this.serverName},t.prototype.on=function(){this.hasListener(this.NAME_SERVER_CHANGED_EVENT)||this._subscribe(),t.superclass.on.apply(this,arguments)},t.prototype.un=function(){t.superclass.un.apply(this,arguments),this.hasListener(this.NAME_SERVER_CHANGED_EVENT)||this._unsubscribe()},t.prototype._handleUpdate=function(e,t){var n=this.serverName;this.serverName=t.getValue(1),n!=this.serverName&&this.fire(this.NAME_SERVER_CHANGED_EVENT,this.serverName,n)},t.prototype._subscribe=function(){this.lightstreamerSubscription||(this.lightstreamerSubscription=e.service.LightstreamerService.subscribe("C|SERVER_NAME",["serverName"],"MERGE",this._handleUpdate.bind(this)))},t.prototype._unsubscribe=function(){this.lightstreamerSubscription&&(this.lightstreamerSubscription.unsubscribe(),this.lightstreamerSubscription=null)},t.prototype.NAME_SERVER_CHANGED_EVENT="nameServerChanged",e.service.ServerNameSubscription=new t})(IG),IG.service.LightstreamerAmdService})),define("module/core/js/serviceclient/rawstreamingclient",["require","streaming","module/core/js/util/array","module/core/js/util/class","module/core/js/util/error","module/core/js/event/events","module/core/js/util/functional","module/core/js/model/instrumentmodelevents","module/core/js/util/log","module/core/js/util/oop","module/core/js/model/resolutionsenum","module/core/js/event/subscribable","module/core/js/model/environmentinfo","module/core/js/tracker/trackeractions"],(function(e){"use strict";function t(e,t,n){this._epic=e,this._resolution=t,this._eventBus=n}var n=e("streaming"),i=e("module/core/js/util/array"),o=e("module/core/js/util/class"),r=e("module/core/js/util/error"),s=e("module/core/js/event/events"),a=e("module/core/js/util/functional"),l=e("module/core/js/model/instrumentmodelevents"),u=e("module/core/js/util/log"),c=e("module/core/js/util/oop"),d=e("module/core/js/model/resolutionsenum"),h=e("module/core/js/event/subscribable"),p=e("module/core/js/model/environmentinfo"),m=e("module/core/js/tracker/trackeractions");o.extend(t,h),t.FIRST_BUFFERED_PRICE="firstBufferedPrice",t.LS_UPDATE="lsUpdate";var f=t.prototype;return f._lightStreamerSubscription=null,f._priceAdapter=null,f._eventBus=null,f._instrumentResolution=null,f._dataBuffer=null,f.withInstrumentResolution=a.setter("_instrumentResolution"),f.usePriceCalculator=function(e){return this._priceAdapter.usePriceCalculator(e),this},f._subscriptionString=function(e){var t=[];return e.status===l.STATUS_REMAPPED?t.push(e.remappedEpic):t.push(this._epic),t.push(this._resolution.periodUnit),t.push(this._resolution.multiple),e.status===l.STATUS_DELAYED?t.push(l.STATUS_DELAYED):t.push(""),this._resolution===d.values.DAY?t.push(this._instrumentResolution.info.getChartServiceTimezone()):t.push(""),"CHARTS|"+t.join("|")+"|"+this._getFids().join("|")},f.startListening=function(e){return this._lightStreamerSubscription=n.subscribe(this._subscriptionString(e),this._getFids(),"DISTINCT",this._handleUpdateFromLightstreamer.bind(this),2,p.getInstance().getDataAdaptor()),this},f.stopListening=function(){return this._lightStreamerSubscription&&(this._lightStreamerSubscription.unsubscribe(),this._lightStreamerSubscription=null),this},f._handleUpdateFromLightstreamer=function(e){for(var n,i,o={},r=this._getFids(),s=0;s<r.length;s++)n=r[s],o[n]=e.getValue(n);if(i=parseInt(o.UTM,10),isNaN(i))return void u.warn("Cannot find matching block for Lightstreamer point: ",JSON.stringify(o));this._dataBuffer?(this._dataBuffer.push(o),1===this._dataBuffer.length&&this.fire(t.FIRST_BUFFERED_PRICE,o)):this._processPointsWithReporting([o]),this.fire(t.LS_UPDATE,e)},f._processLightstreamerPoints=function(e){var t,n,o,r=[];for(o=0;o<e.length;o++){n=new Date(parseInt(e[o].UTM,10)),t=this._instrumentResolution.findBlockContainingDate(n);try{i.inPlaceConcat(r,this._priceAdapter.convertToDataPoints(t,e[o]))}catch(t){u.warn("Invalid point from lightstreamer: ",t.message,JSON.stringify(e[o]));continue}}r=r.filter(a.identity),r.length&&this.fire(s.POINTS_LOADED,r)},f.beginDataBuffering=function(){return this._dataBuffer||(this._dataBuffer=[]),this},f.flushDataBuffering=function(){if(this._dataBuffer){var e=this._dataBuffer;this._dataBuffer=null,this._processPointsWithReporting(e)}return this},f.getFirstBufferedPrice=function(){return this._dataBuffer&&this._dataBuffer.length?this._dataBuffer[0]:null},f._processPointsWithReporting=function(e){r.captureError(this._processLightstreamerPoints.bind(this,e),this._reportError.bind(this,e))},f._reportError=function(e,t){this._eventBus.publish("tracker/chart",[m.error("lighstreamer_error_in_handler",t,JSON.stringify(e))])},f._getFids=c.abstractMethod,Object.seal(f),Object.seal(t)})),define("module/core/js/serviceclient/datagapmanager",["require","module/core/js/model/block","module/core/js/model/chartmodelevents","module/core/js/model/instrumentresolutionevents","module/core/js/util/log","module/core/js/serviceclient/rawstreamingclient"],(function(e){"use strict";function t(e,t){this.instrumentResolution=e,this._eventBus=t}var n=e("module/core/js/model/block"),i=e("module/core/js/model/chartmodelevents"),o=e("module/core/js/model/instrumentresolutionevents"),r=e("module/core/js/util/log"),s=e("module/core/js/serviceclient/rawstreamingclient");t.create=function(e,n){return new t(e,n)};var a=t.prototype;return a.instrumentResolution=null,a._lastPriceDataPoint=null,a._eventBus=null,a.destroy=function(){try{this.instrumentResolution.streamingClient.flushDataBuffering()}catch(e){r.warn("Blocks have probably changed: ",e.message)}this.stopListening(),this.instrumentResolution=null},a.startListening=function(){var e=this.instrumentResolution,t=e.streamingClient,n=e.getCurrentDataPoint("prices");t.beginDataBuffering(),n?this._fillDataGapFrom(n):e.on(o.CURRENT_DATA_POINT_CHANGED+"-prices",this._fillDataGapFrom,this,{once:!0})},a.stopListening=function(){var e=this.instrumentResolution,t=e.streamingClient,n=e.instrumentModel.chartModel;e.un(null,this),t.un(null,this),n.un(null,this)},a._fillDataGapFrom=function(e){var t=this.instrumentResolution.streamingClient,n=t.getFirstBufferedPrice();n?this._requestDataGap(e,n):t.on(s.FIRST_BUFFERED_PRICE,this._requestDataGap.bind(this,e),this,{once:!0})},a._requestDataGap=function(e,t){var n=this.instrumentResolution,i=e.date,o=new Date(parseInt(t.UTM,10)),r=[];o>i&&(n.expandForwardToContainDateAndNotify(o,[],!1),r=n.blocks.slice(n.findBlockContainingDate(i).index,n.findBlockContainingDate(o).index+1)),this._requestDataGapForBlocks(r)},a._requestDataGapForBlocks=function(e){var t,i=this.instrumentResolution;for(0===e.length&&this._handleDataGapFilled(),t=0;t<e.length;t++)e[t].loading=n.LOADING_NOT_STARTED,e[t].points={};i.on(o.HCD_DATA_POINTS_LOADED,this._handleDataGapFilled,this,{once:!0}),i.hcdClient.loadDataForBlocks(e)},a._handleDataGapFilled=function(){this.instrumentResolution.streamingClient.flushDataBuffering(),this._listenForSubsequentDataGaps()},a._listenForSubsequentDataGaps=function(){var e=this.instrumentResolution,t=e.instrumentModel.chartModel;this._handleCurrentPriceChanged(e.getCurrentDataPoint("prices")),e.on(o.CURRENT_DATA_POINT_CHANGED+"-prices",this._handleCurrentPriceChanged,this),t.on(i.STREAMING_STATUS_CHANGED,this._handleStreamingStatusChanged,this)},a._handleCurrentPriceChanged=function(e){this._lastPriceDataPoint=e},a._handleStreamingStatusChanged=function(e){var t=this.instrumentResolution,n=t.streamingClient,i=t.instrumentModel.chartModel;e||(t.un(null,this),i.un(null,this),n.beginDataBuffering(),this._fillDataGapFrom(this._lastPriceDataPoint))},Object.seal(a),t})),define("module/core/js/serviceclient/batchdataclient",["require","module/core/js/util/ajaxrequest","wt-fe-buz-utilities-url","module/core/js/serviceclient/baseserviceclient","module/core/js/util/class","module/core/js/util/dateutils","module/core/js/util/functional","module/core/js/util/math","module/core/js/model/userinfo"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,[i]),this._baseSnapshotEndpoint=["/chart/snapshot",e,n.multiple,n.periodUnit].join("/"),this._epic=e,this._instrumentResolutionGuid=o}var n=e("module/core/js/util/ajaxrequest"),i=e("wt-fe-buz-utilities-url"),o=e("module/core/js/serviceclient/baseserviceclient"),r=e("module/core/js/util/class"),s=e("module/core/js/util/dateutils"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/math"),u=e("module/core/js/model/userinfo");r.extend(t,o),t.create=function(e,n,i,o){return new t(e,n,i,o)};var c=t.prototype;return c._baseSnapshotEndpoint=null,c._epic=null,c._instrumentResolutionGuid=null,c._version=null,c.withVersion=a.setter("_version"),c.getDataFromDateRange=function(e,t,n,i){this._executeRequest({endpoint:this._getDataEndpoint(e,t),success:n,error:this._handleFailedRequest.bind(this,i),retry:!1})},c._getDataEndpoint=function(e,t){var n=[this._baseSnapshotEndpoint,"batch","start",s.toUrlString(e),"end",s.toUrlString(t)].join("/"),o=u.getInstance(),r={format:"json",siteId:o.getWebSiteId(),locale:o.getLocale()};return l.isNumber(this._version)&&(r.version=this._version),i.build(n,r,!0)},c._handleFailedRequest=function(e,t,i,o,r){this._eventBus.publish("statistics",["HCD_REQUEST_FAILED",{instrumentResolutionGuid:this._instrumentResolutionGuid,timeTaken:t.getTimeTaken(),failedRequests:n.CONSECUTIVE_FAILED_REQUESTS,endpoint:t.getEndpoint(),response:r,statusCode:o}]),e(t,i,o,r)},Object.seal(c),Object.seal(t)})),define("module/core/js/serviceclient/trailingpointclient",["require","module/core/js/util/array","module/core/js/model/blocks","module/core/js/model/openperiod","module/core/js/model/resolutionsenum","module/core/js/model/tickinterval"],(function(e){"use strict";function t(e){this._indexToBlockAndTrailingPoints=Object.create(null),this._resolution=e}var n=e("module/core/js/util/array"),i=e("module/core/js/model/blocks"),o=e("module/core/js/model/openperiod"),r=e("module/core/js/model/resolutionsenum"),s=e("module/core/js/model/tickinterval"),a={DEFAULT:1.5,SECOND:10};t.create=function(e){return new t(e)},t._getEarliestContiguousBlockWithData=function(e){for(var t=e;t.previous&&t.previous.loading.loaded;)t=t.previous;return t},t._getMissingTrailingPointCount=function(e,t,n){var o=i.getTrailingPoints(e,t,n);return Math.max(n-o.points.length,0)},t._estimateMissingAccTime=function(e,t){switch(e){case r.values.TICK:return t*s.ACCTIME_INCREMENT;case r.values.SECOND:return t*e.period*a.SECOND;default:return t*e.period*a.DEFAULT}};var l=t.prototype;return l._resolution=null,l._indexToBlockAndTrailingPoints=null,l.loadTrailingPoints=function(e,t,n){var i=this._indexToBlockAndTrailingPoints[e.index];return i&&i.numberOfTrailingPoints<n?i.numberOfTrailingPoints=n:this._indexToBlockAndTrailingPoints[e.index]={block:e,pointType:t,numberOfTrailingPoints:n},this.getTrailingBlocks()},l.getTrailingBlocks=function(){var e,i,r,s,a,l=[];for(e in this._indexToBlockAndTrailingPoints)i=this._indexToBlockAndTrailingPoints[e],s=t._getMissingTrailingPointCount(i.block,i.pointType,i.numberOfTrailingPoints),s>0?(r=t._getEarliestContiguousBlockWithData(i.block),a=r.accStart-t._estimateMissingAccTime(this._resolution,s),l.push(r.findPreviousBlocksUntilAccTime(a))):delete this._indexToBlockAndTrailingPoints[e];return n.unique(n.flatten(l)).sort(o.naturalOrder)},Object.seal(l),Object.seal(t)})),define("module/core/js/serviceclient/hcdclient",["require","module/core/js/util/ajaxrequest","module/core/js/util/array","module/core/js/serviceclient/baseserviceclient","module/core/js/serviceclient/batchdataclient","module/core/js/model/block","module/core/js/model/blocks","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/log","module/core/js/serviceclient/trailingpointclient","module/core/js/tracker/trackeractions"],(function(e){"use strict";function t(e,i,o,s,a){t.superclass.constructor.apply(this,[a]),this._ssoToken=e,this._resolution=o,this._instrumentResolutionGuid=s,this._batchDataClient=r.create(i,o,a,s),this._trailingPointClient=d.create(this._resolution),this._queuedLoadingCalls=[],this._deferredFlushQueue=u.throttle(this._flushQueue,t.FLUSH_DELAY),this._deferredFlushQueueAfterError=u.debounce(this._flushQueue,n.getNextTryDelay)}var n=e("module/core/js/util/ajaxrequest"),i=e("module/core/js/util/array"),o=e("module/core/js/serviceclient/baseserviceclient"),r=e("module/core/js/serviceclient/batchdataclient"),s=e("module/core/js/model/block"),a=e("module/core/js/model/blocks"),l=e("module/core/js/util/class"),u=e("module/core/js/util/functional"),c=e("module/core/js/util/log"),d=e("module/core/js/serviceclient/trailingpointclient"),h=e("module/core/js/tracker/trackeractions");l.extend(t,o);var p=t.prototype;return t.FLUSH_DELAY=100,t.DATA_POINTS_LOADED="hcdDataPointsLoaded",t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)},p._ssoToken=null,p._resolution=null,p._instrumentResolutionGuid=null,p._queuedLoadingCalls=null,p._deferredFlushQueue=null,p._deferredFlushQueueAfterError=null,p._batchDataClient=null,p._trailingPointClient=null,p._cachableRequestPolicy=u.identity,p.withCacheableRequestPolicy=u.setter("_cachableRequestPolicy"),p.withVersion=function(e){return this._batchDataClient.withVersion(e),this},p.destroy=function(){this._deferredFlushQueue.abort(),this._deferredFlushQueueAfterError.abort(),this._batchDataClient.destroy(),t.superclass.destroy.call(this)},p.loadDataForBlocks=function(e){if(e.length){var t=e.filter(this._canBeRequested,this),n=a.chunkContiguousBlocks(t);n=n.map(function(e){return e=this._cachableRequestPolicy(e),i.firstOf(e).getHCDPreNeighbours().concat(e).concat(i.lastOf(e).getHCDPostNeighbours())}.bind(this)),n.forEach(this._loadDataForChunk,this)}},p.loadTrailingPoints=function(e,t,n){var i=this._trailingPointClient.loadTrailingPoints(e,t,n);this.loadDataForBlocks(i)},p.requestMissingTrailingBlocks=function(){var e=this._trailingPointClient.getTrailingBlocks();this.loadDataForBlocks(e)},p._loadDataForChunk=function(e){this._changeNotStartedBlocksState(e,s.QUEUED_FOR_LOADING),this._queuedLoadingCalls.push(e),this._deferredFlushQueue(),this._deferredFlushQueueAfterError.abort()},p._flushQueue=function(){var e;this._queuedLoadingCalls.sort(this._orderChunksByFirstBlock),e=this._mergeAdjacentChunks(this._queuedLoadingCalls),e.forEach(this._loadDataForContiguousBlocks,this),this._queuedLoadingCalls=[]},p._mergeAdjacentChunks=function(e){var t,n,o,r=[i.firstOf(e[0]),i.lastOf(e[0])],s=[r];for(o=1;o<e.length;o++)t=i.firstOf(e[o]),n=i.lastOf(e[o]),t.index>r[1].index+1?(r=[t,n],s.push(r)):n.index>r[1].index&&(r[1]=n);return s},p._changeNotStartedBlocksState=function(e,t){if(e.length)for(var n=e[0],o=i.lastOf(e);n&&n.index<=o.index;)this._canBeRequested(n)&&(n.loading=t),n=n.next},p._orderChunksByFirstBlock=function(e,t){return e[0].index-t[0].index},p._canBeRequested=function(e){return!e.loading.started},p._loadDataForContiguousBlocks=function(e){this._changeNotStartedBlocksState(e,s.LOADING);var t=e[0],n=e[1],i=t.start,o=this._modelEndDateToServerEndDate(n.end);c.debug("requesting historic data in range",i,"to",o),this._batchDataClient.getDataFromDateRange(i,o,this._handleDataForContiguousBlocksLoaded.bind(this,t,n),this._handleDataForContiguousBlocksFailed.bind(this,t,n))},p._handleDataForContiguousBlocksLoaded=function(e,n,i,o,r){this.fire(t.DATA_POINTS_LOADED,o,e,n),this._publishStatisticsEvent(i)},p._handleDataForContiguousBlocksFailed=function(e,t,n,i,o,r){this._queuedLoadingCalls.push([e,t]),this._deferredFlushQueueAfterError()},p._publishStatisticsEvent=function(e){this._eventBus.publish("tracker/latency",[h.latency(h.latency.DATA_POINTS,e)])},p._modelEndDateToServerEndDate=function(e){return new Date(e.getTime()-1)},Object.seal(p),Object.seal(t)})),define("module/core/js/model/abstractpriceadapter",["require","module/core/js/util/functional","module/core/js/util/oop"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/oop"),o=t.prototype;return o._priceCalculator=null,o.usePriceCalculator=n.setter("_priceCalculator"),o.convertToDataPoints=i.abstractMethod,Object.seal(o),t})),define("module/core/js/model/abstractprice",["require","module/core/js/util/oop"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/oop"),i=t.prototype;return i.timestamp=null,i.volume=null,i.hasPriceType=n.abstractMethod,Object.seal(i),Object.seal(t)})),define("module/core/js/model/hlocprice",["require","module/core/js/model/abstractprice","module/core/js/util/class","module/core/js/util/math"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/abstractprice"),i=e("module/core/js/util/class"),o=e("module/core/js/util/math"),r=o.isNumber;i.extend(t,n);var s=t.prototype;return s.high=null,s.low=null,s.open=null,s.close=null,s.hasPriceType=function(e){return r(this.high[e])&&r(this.low[e])&&r(this.open[e])&&r(this.close[e])},Object.seal(s),Object.seal(t)})),define("module/core/js/model/marketprice",["require","module/core/js/util/math"],(function(e){"use strict";function t(e,t,n){this.bid=e,this.ask=t,this.ltp=n}var n=e("module/core/js/util/math"),i=t.prototype;return i.bid=null,i.ask=null,i.ltp=null,i.fillMissingPricesFrom=function(e){n.isNumber(this.bid)||(this.bid=e.bid),n.isNumber(this.ask)||(this.ask=e.ask),n.isNumber(this.ltp)||(this.ltp=e.ltp)},i.valueEquals=function(e){return n.areEqualOrNaN(this.bid,e.bid)&&n.areEqualOrNaN(this.ask,e.ask)&&n.areEqualOrNaN(this.ltp,e.ltp)},Object.seal(i),t})),define("module/core/js/model/historicalpriceadapter",["require","module/core/js/model/abstractpriceadapter","module/core/js/util/class","module/core/js/model/hlocprice","module/core/js/util/log","module/core/js/model/marketprice"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/abstractpriceadapter"),i=e("module/core/js/util/class"),o=e("module/core/js/model/hlocprice"),r=e("module/core/js/util/log"),s=e("module/core/js/model/marketprice");i.extend(t,n),t.create=function(){return new t},t.createFromHcdPoint=function(e){var n=new o;return n.timestamp=e.timestamp,n.volume=e.lastTradedVolume,n.high=t._parseHcdMarketPrice(e.highPrice),n.low=t._parseHcdMarketPrice(e.lowPrice),n.open=t._parseHcdMarketPrice(e.openPrice),n.close=t._parseHcdMarketPrice(e.closePrice),n},t._parseHcdMarketPrice=function(e){return e?new s(e.bid,e.ask,e.lastTraded):new s};var a=t.prototype;return a.convertToDataPoints=function(e){var t,n,i,o=e.rawPriceData,s=[];for(i=0;i<o.length;i++){t=o[i];try{n=this._hcdJsonToDataPoint(t,e),!1!==n&&s.push(n)}catch(e){r.debug("Incomplete or unsupported data point",t,e.message)}}return delete e.lastPrice,s},a._hcdJsonToDataPoint=function(e,n){var i=t.createFromHcdPoint(e);return this._priceCalculator.calculateDataPoint(i,n)},Object.seal(a),Object.seal(t)})),define("module/core/js/model/tickprice",["require","module/core/js/model/abstractprice","module/core/js/util/class","module/core/js/util/math"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/abstractprice"),i=e("module/core/js/util/class"),o=e("module/core/js/util/math");i.extend(t,n);var r=t.prototype;return r.value=null,r.hasPriceType=function(e){return o.isNumber(this.value[e])},Object.seal(r),Object.seal(t)})),define("module/core/js/model/historicaltickpriceadapter",["require","module/core/js/model/abstractpriceadapter","module/core/js/util/class","module/core/js/model/tickprice","module/core/js/util/log","module/core/js/model/marketprice"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/abstractpriceadapter"),i=e("module/core/js/util/class"),o=e("module/core/js/model/tickprice"),r=e("module/core/js/util/log"),s=e("module/core/js/model/marketprice");i.extend(t,n),t.create=function(){return new t},t.createFromTickPoint=function(e){var n=new o;return n.timestamp=e.timestamp,n.volume=e.lastTradedVolume,n.value=t._parseHcdMarketPrice(e.tickPrice),n},t._parseHcdMarketPrice=function(e){return e?new s(e.bid,e.ask,e.lastTraded):new s};var a=t.prototype;return a.convertToDataPoints=function(e){var t,n,i,o=e.rawPriceData,s=[];for(i=0;i<o.length;i++){t=o[i];try{n=this._hcdJsonToDataPoint(t,e),!1!==n&&s.push(n)}catch(e){r.debug("Incomplete or unsupported data point",t,e.message)}}return delete e.lastPrice,s},a._hcdJsonToDataPoint=function(e,n){var i=t.createFromTickPoint(e);return this._priceCalculator.calculateDataPoint(i,n)},Object.seal(a),Object.seal(t)})),define("module/core/js/controller/historicalpriceadapterfactory",["require","module/core/js/model/resolutionsenum","module/core/js/model/historicalpriceadapter","module/core/js/model/historicaltickpriceadapter"],(function(e){"use strict";var t=e("module/core/js/model/resolutionsenum"),n=e("module/core/js/model/historicalpriceadapter"),i=e("module/core/js/model/historicaltickpriceadapter"),o={};return o.adapterForResolution=function(e){return(e.resolution.id===t.values.TICK.id?i:n).create()},Object.seal(o)})),define("module/core/js/util/price",["require","module/core/js/util/array","module/core/js/util/functional"],(function(e){"use strict";var t=e("module/core/js/util/array"),n=e("module/core/js/util/functional"),i={};return i.flattenHcdJson=function(e){var t,n,i,o=[];if(e&&e.intervalsDataPoints)for(n=0;n<e.intervalsDataPoints.length;n++)for(t=e.intervalsDataPoints[n],i=0;i<t.dataPoints.length;i++)o.push(t.dataPoints[i]);return o},i.percentageLtpAvailable=function(e,o){o=o||"closePrice";var r=i.flattenHcdJson(e);return t.split(r,n.totalPlucker(o,"lastTraded")).matching.length/r.length},Object.seal(i)})),define("module/core/js/controller/streamingconsolidator",["require","module/core/js/util/class","module/core/js/event/events","module/core/js/util/functional","module/core/js/model/datapoint/hlocdatapoint","module/core/js/model/hlocprice","module/core/js/model/instrumentresolutionevents","module/core/js/model/marketprice","module/core/js/util/math","module/core/js/util/object","module/core/js/serviceclient/rawstreamingclient","module/core/js/event/subscribable"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/event/events"),o=e("module/core/js/util/functional"),r=e("module/core/js/model/datapoint/hlocdatapoint"),s=e("module/core/js/model/hlocprice"),a=e("module/core/js/model/instrumentresolutionevents"),l=e("module/core/js/model/marketprice"),u=e("module/core/js/util/math"),c=e("module/core/js/util/object"),d=e("module/core/js/serviceclient/rawstreamingclient"),h=e("module/core/js/event/subscribable");n.extend(t,h),t._merge=function(e,n){return e.artificial?new r(e.timestamp,n.value,n.volume,n.highPrice,n.lowPrice,n.openPrice,n.closePrice,n.lastRawPrice,n.artificial):new r(e.timestamp,n.value,n.volume,Math.max(e.highPrice,n.highPrice),Math.min(e.lowPrice,n.lowPrice),e.openPrice,n.closePrice,t._mergeLastRawPrice(e.lastRawPrice,n.lastRawPrice),e.artificial&&n.artificial)},t._mergeLastRawPrice=function(e,t){var n=new s;return n.timestamp=e.timestamp,n.volume=t.volume,n.open=e.open,n.close=t.close,n.high=new l,n.high.ask=Math.max(e.high.ask,t.high.ask),n.high.bid=Math.max(e.high.bid,t.high.bid),n.high.ltp=Math.max(e.high.ltp,t.high.ltp),n.low=new l,n.low.ask=Math.min(e.low.ask,t.low.ask),n.low.bid=Math.min(e.low.bid,t.low.bid),n.low.ltp=Math.min(e.low.ltp,t.low.ltp),n};var p=t.prototype;return p._targetResolutionPeriodIterator=null,p._currentPoint=null,p._currentVolumes=null,p._instrumentResolution=null,p._consolidationTimezoneOffset=null,p._unconsolidatedPointSource=null,p.setConsolidationTimezoneOffset=o.setter("_consolidationTimezoneOffset"),p.withInstrumentResolution=function(e){return this._instrumentResolution=e,this._targetResolutionPeriodIterator=e.resolution.getTimezoneOffsetIterator(),this._unconsolidatedPointSource&&this._unconsolidatedPointSource.withInstrumentResolution(e),e.info?this._handleInstrumentResolutionInfoLoaded(e.info):e.on(a.INFO_LOADED,this._handleInstrumentResolutionInfoLoaded,this),this._currentPoint=e.getCurrentDataPoint("prices"),this._currentPoint||e.on(a.CURRENT_DATA_POINT_CHANGED+"-prices",this._handleCurrentPointChanged,this),this},p._handleCurrentPointChanged=function(e){this._currentPoint=e},p._handleInstrumentResolutionInfoLoaded=function(e){this.setConsolidationTimezoneOffset(e.getConsolidationTimezoneOffset())},p.consolidatePointsFrom=function(e){return this._unconsolidatedPointSource=e,this._instrumentResolution&&this._unconsolidatedPointSource.withInstrumentResolution(this._instrumentResolution),this},
p.startListening=function(e){var t=d.FIRST_BUFFERED_PRICE;return this._unconsolidatedPointSource.on(i.POINTS_LOADED,this._handleStreamedPoints,this),this._unconsolidatedPointSource.on(t,this.fire.bind(this,t),this),this._unconsolidatedPointSource.startListening(e),this},p.stopListening=function(){return this._unconsolidatedPointSource.un(null,this),this._unconsolidatedPointSource.stopListening(),this._instrumentResolution.un(null,this),this},p._handleStreamedPoints=function(e){var t,n,o=[];if(e.length&&null!==this._consolidationTimezoneOffset&&this._currentPoint){for(n=0;n<e.length;n++)t=this._consolidate(this._currentPoint,e[n]),o.length&&t.timestamp===this._currentPoint.timestamp?o[o.length-1]=t:o.push(t),this._currentPoint=t;this.fire(i.POINTS_LOADED,o)}},p._consolidate=function(e,n){var i=this._consolidatedTimestamp(n.timestamp).getTime();return e&&i===e.timestamp?(this._consolidateVolume(n),t._merge(e,n)):(this._currentVolumes={},this._consolidateVolume(n),this._retimePoint(i,n))},p._consolidateVolume=function(e){this._currentVolumes=this._currentVolumes||{},this._currentVolumes[e.timestamp]=e.volume,e.volume=u.sum(c.values(this._currentVolumes))},p._consolidatedTimestamp=function(e){for(var t=this._instrumentResolution.getIntervalStartContainingDate(new Date(e)),n=this._targetResolutionPeriodIterator.next(t,this._consolidationTimezoneOffset);n.getTime()<=e;)t=n,n=this._targetResolutionPeriodIterator.next(t,this._consolidationTimezoneOffset);return t},p._retimePoint=function(e,t){return new r(e,t.value,t.volume,t.highPrice,t.lowPrice,t.openPrice,t.closePrice,t.lastRawPrice,t.artificial)},p.withPriceAdapter=function(e){return this._unconsolidatedPointSource.withPriceAdapter(e),this},p.usePriceCalculator=o.delegate("_unconsolidatedPointSource","usePriceCalculator"),p.getFirstBufferedPrice=o.delegate("_unconsolidatedPointSource","getFirstBufferedPrice"),p.beginDataBuffering=o.delegate("_unconsolidatedPointSource","beginDataBuffering"),p.flushDataBuffering=o.delegate("_unconsolidatedPointSource","flushDataBuffering"),Object.seal(p),t})),define("module/core/js/enum/lightstreamerenum",[],(function(){"use strict";var e={};return e.UTM="UTM",e.LTV="LTV",e.FIDS=Object.freeze({BID:Object.freeze({OPEN:"BID_OPEN",CLOSE:"BID_CLOSE",HIGH:"BID_HIGH",LOW:"BID_LOW"}),OFFER:Object.freeze({OPEN:"OFR_OPEN",CLOSE:"OFR_CLOSE",HIGH:"OFR_HIGH",LOW:"OFR_LOW"}),LTP:Object.freeze({OPEN:"LTP_OPEN",CLOSE:"LTP_CLOSE",HIGH:"LTP_HIGH",LOW:"LTP_LOW"}),DAY:Object.freeze({HIGH:"DAY_HIGH",LOW:"DAY_LOW",NET_CHG_MID:"DAY_NET_CHG_MID",PERC_CHG_MID:"DAY_PERC_CHG_MID"})}),Object.freeze(e)})),define("module/core/js/model/streamingpriceadapter",["require","module/core/js/model/abstractpriceadapter","module/core/js/util/class","module/core/js/model/hlocprice","module/core/js/model/marketprice"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/abstractpriceadapter"),i=e("module/core/js/util/class"),o=e("module/core/js/model/hlocprice"),r=e("module/core/js/model/marketprice");i.extend(t,n),t.createFromLightstreamerPoint=function(e){var t=new o;return t.timestamp=parseInt(e.UTM,10),t.volume=parseFloat(e.LTV),t.high=new r(parseFloat(e.BID_HIGH),parseFloat(e.OFR_HIGH),parseFloat(e.LTP_HIGH)),t.low=new r(parseFloat(e.BID_LOW),parseFloat(e.OFR_LOW),parseFloat(e.LTP_LOW)),t.open=new r(parseFloat(e.BID_OPEN),parseFloat(e.OFR_OPEN),parseFloat(e.LTP_OPEN)),t.close=new r(parseFloat(e.BID_CLOSE),parseFloat(e.OFR_CLOSE),parseFloat(e.LTP_CLOSE)),t};var s=t.prototype;return s.convertToDataPoints=function(e,n){var i=t.createFromLightstreamerPoint(n),o=this._priceCalculator.calculateDataPoint(i,e);if(!1===o)throw new Error("Data could not be converted to point.");return[o]},Object.seal(s),Object.seal(t)})),define("module/core/js/serviceclient/streamingpointclient",["require","module/core/js/util/class","module/core/js/enum/lightstreamerenum","module/core/js/serviceclient/rawstreamingclient","module/core/js/model/streamingpriceadapter"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i),this._priceAdapter=new r}var n=e("module/core/js/util/class"),i=e("module/core/js/enum/lightstreamerenum"),o=e("module/core/js/serviceclient/rawstreamingclient"),r=e("module/core/js/model/streamingpriceadapter");n.extend(t,o);var s=t.prototype;return s._getFids=function(){return[i.UTM,i.LTV,i.FIDS.BID.OPEN,i.FIDS.BID.CLOSE,i.FIDS.BID.HIGH,i.FIDS.BID.LOW,i.FIDS.OFFER.OPEN,i.FIDS.OFFER.CLOSE,i.FIDS.OFFER.HIGH,i.FIDS.OFFER.LOW,i.FIDS.LTP.OPEN,i.FIDS.LTP.CLOSE,i.FIDS.LTP.HIGH,i.FIDS.LTP.LOW,i.FIDS.DAY.NET_CHG_MID,i.FIDS.DAY.PERC_CHG_MID]},Object.seal(s),Object.seal(t)})),define("module/core/js/model/streamingtickpriceadapter",["require","module/core/js/model/abstractpriceadapter","module/core/js/util/class","module/core/js/model/marketprice","module/core/js/model/tickprice"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/abstractpriceadapter"),i=e("module/core/js/util/class"),o=e("module/core/js/model/marketprice"),r=e("module/core/js/model/tickprice");i.extend(t,n),t.createFromLightstreamerPoint=function(e){var t=new r;return t.timestamp=parseInt(e.UTM,10),t.volume=parseFloat(e.LTV),t.value=new o(parseFloat(e.BID),parseFloat(e.OFR),parseFloat(e.LTP)),t};var s=t.prototype;return s.convertToDataPoints=function(e,n){var i=t.createFromLightstreamerPoint(n),o=this._priceCalculator.calculateDataPoint(i,e);if(!1===o)throw new Error("Data could not be converted to point.");return[o]},Object.seal(s),Object.seal(t)})),define("module/core/js/serviceclient/streamingtickpointclient",["require","module/core/js/util/class","module/core/js/serviceclient/rawstreamingclient","module/core/js/model/streamingtickpriceadapter"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i),this._priceAdapter=new o}var n=e("module/core/js/util/class"),i=e("module/core/js/serviceclient/rawstreamingclient"),o=e("module/core/js/model/streamingtickpriceadapter");n.extend(t,i);var r=t.prototype;return r._getFids=function(){return["UTM","LTV","BID","OFR","LTP"]},Object.seal(r),Object.seal(t)})),define("module/core/js/controller/streamingclientfactory",["require","module/core/js/model/resolutionsenum","module/core/js/controller/streamingconsolidator","module/core/js/serviceclient/streamingpointclient","module/core/js/serviceclient/streamingtickpointclient"],(function(e){"use strict";var t=e("module/core/js/model/resolutionsenum"),n=e("module/core/js/controller/streamingconsolidator"),i=e("module/core/js/serviceclient/streamingpointclient"),o=e("module/core/js/serviceclient/streamingtickpointclient"),r={};return r.clientForResolution=function(e,r,s){var a=r.resolution,l=a.id===t.values.TICK.id?o:i,u=new l(e,a.baseResolution,s);return a.synthetic?(new n).withInstrumentResolution(r).consolidatePointsFrom(u):u.withInstrumentResolution(r)},Object.seal(r)})),define("module/core/js/model/instrumentresolution",["require","module/core/js/util/array","module/core/js/model/block","module/core/js/model/blockprocessor","module/core/js/model/blocks","module/core/js/serviceclient/cacheablerequestpolicy","module/core/js/util/class","module/core/js/serviceclient/datagapmanager","module/core/js/model/datapoint/datapoint","module/core/js/event/events","module/core/js/util/functional","module/core/js/serviceclient/hcdclient","module/core/js/controller/historicalpriceadapterfactory","module/core/js/model/instrumentresolutionevents","module/core/js/model/intervals","module/core/js/util/price","module/core/js/model/resolutionsenum","module/core/js/tracker/enum/schema","module/core/js/controller/streamingclientfactory","module/core/js/event/subscribable","module/core/js/util/uid","module/core/js/model/userinfo"],(function(e){"use strict";function t(e,n,i){this.instrumentResolutionGuid=b.getGuid(),this.instrumentModel=e,this.resolution=n,this.period=n.period,this._currentDataPoint={},this._eventBus=i,this._priceAdapter=p.adapterForResolution(this),this.streamingClient=y.clientForResolution(e.epic,this,this._eventBus),this._dataGapManager=this._gapManagerClass.create(this,i),this.hcdClient=t._createHcdClient(i,e,n,this.instrumentResolutionGuid),this.hcdClient.on(h.DATA_POINTS_LOADED,this._handleHcdDataPointsLoaded,this),this._eventBus.publish("tracker/chartAttributes",[{chartInstrumentResolutionId:this.instrumentResolutionGuid}])}var n=e("module/core/js/util/array"),i=e("module/core/js/model/block"),o=e("module/core/js/model/blockprocessor"),r=e("module/core/js/model/blocks"),s=e("module/core/js/serviceclient/cacheablerequestpolicy"),a=e("module/core/js/util/class"),l=e("module/core/js/serviceclient/datagapmanager"),u=e("module/core/js/model/datapoint/datapoint"),c=e("module/core/js/event/events"),d=e("module/core/js/util/functional"),h=e("module/core/js/serviceclient/hcdclient"),p=e("module/core/js/controller/historicalpriceadapterfactory"),m=e("module/core/js/model/instrumentresolutionevents"),f=e("module/core/js/model/intervals"),_=e("module/core/js/util/price"),g=e("module/core/js/model/resolutionsenum"),v=e("module/core/js/tracker/enum/schema"),y=e("module/core/js/controller/streamingclientfactory"),M=e("module/core/js/event/subscribable"),b=e("module/core/js/util/uid"),A=e("module/core/js/model/userinfo"),T=d.plucker("rawPriceData");t._createHcdClient=function(e,t,n,i){var o=A.getInstance().getSsoToken();return h.create(o,t.epic,n,i,e).withCacheableRequestPolicy(s.alignToResolutionMultiple).withVersion(t.instrumentVersion)},a.extend(t,M),t.create=function(e,n,i){return new t(e,n,i)},t.INITIAL_NUMBER_OF_POINTS_SHOWN=64;var E=t.prototype;return E.instrumentModel=null,E.resolution=null,E._timeline=null,E.blocks=null,E.info=null,E.hcdClient=null,E.streamingClient=null,E.period=null,E.delayTime=0,E._gapManagerClass=l,E._dataGapManager=null,E._priceAdapter=null,E._priceCalculator=null,E._currentDataPoint=null,E.instrumentResolutionGuid=null,E._eventBus=null,E.initialDuration=function(){return t.INITIAL_NUMBER_OF_POINTS_SHOWN*this.period},E.getCurrentDataPoint=function(e){return this._currentDataPoint[e]},E.getEpic=function(){return this.instrumentModel.epic},E.getIntervalStartContainingDate=function(e){return this._timeline.closestIntervalForDate(e).start},E.withPriceCalculator=function(e){return this._priceCalculator=e,this._priceAdapter.usePriceCalculator(this._priceCalculator),this.streamingClient.usePriceCalculator(this._priceCalculator),this._handlePriceCalculatorChange(),this},E.withInstrumentVersion=function(e){return this.hcdClient.withVersion(e),this},E.destroy=function(){this.stopStreaming(),this.hcdClient.destroy(),this._eventBus.unsubscribeAll(this),this._dataGapManager.destroy(),this._dataGapManager=null},E.expandForwardToContainDate=function(e,t){return!!this._timeline&&(this.instrumentModel.getActiveInstrumentResolution()!==this?(r.expandToContainDate(this.blocks,e,i.PERIODS_PER_BLOCK*this.period,this._timeline),!1):!(e.getTime()<=this._timeline.endDate().getTime())&&(this._timeline.expandToEndAt(e),r.expandToContainDate(this.blocks,e,i.PERIODS_PER_BLOCK*this.period,this._timeline),!0))},E.expandForwardToContainDateAndNotify=function(e,t,n){var i=this._timeline.accEnd();return!!this.expandForwardToContainDate(e,t)&&(this.fire(m.END_DATE_CHANGED,i,this._timeline.accEnd(),n||!1),!0)},E.findBlockContainingDate=function(e){return r.findBlockContainingDate(this.blocks,e)},E._contractAfterRemovingIndicator=function(){var e=this._timeline.accEnd(),t=this.resolution.getPeriodIterator(),n=this.info.getConsolidationTimezoneOffset(),i=this.instrumentModel.chartModel.priceStreamClock.getCurrentTimestamp(),o=r.truncateEmptyBlocks(this.blocks,i,t,n);this._timeline.contractToEndAt(o),this.fire(m.END_DATE_CHANGED,e,this._timeline.accEnd(),!1)},E._insertPointsIntoUnknownBlocks=function(e,t){if(!this.blocks)return[];var o,r,s,a=[],l=e.length-1;if(e.sort(u.comparatorOnDateOldestToNewest),this.expandForwardToContainDateAndNotify(new Date(n.lastOf(e).date.getTime()+this.period),e,!1),this._isBeforeMarketOpen(e))return[];for(e.forEach(this.addAccTime,this),s=this.blocks.length-1;s>=0;s--){for(o=this.blocks[s],r=[];l>=0&&o.containsDate(e[l].date);l--)r.unshift(e[l]);if(o.setPoints(t,r),a.unshift(o),!o.loading.streaming&&l<0)break;o.loading.streaming&&(o.loading=i.LOADED)}return a},E._insertDisplacedPointsIntoBlocks=function(e,t,i,o){return t.length?(i=this.expandForwardToContainDateAndNotify(new Date(n.lastOf(t).date.getTime()+this.period),t,o)?this.blocks.slice(n.firstOf(i).index,this.blocks.length):this.blocks.slice(n.firstOf(i).index,n.lastOf(i).index+1),this._insertPointsIntoBlocks(i,t,e)):[]},E._isBeforeMarketOpen=function(e){return n.firstOf(e).date.getTime()<n.firstOf(this.blocks).start.getTime()},E.addIndicatorPoints=function(e,t,i,o,r){if(this._timeline){var s;s=i?o?this._insertDisplacedPointsIntoBlocks(e,t,i,r):this._insertPointsIntoBlocks(i,t,e):t.length?this._insertPointsIntoUnknownBlocks(t,e):[],(i||s.length>0)&&(this._firePointsChangedWithSuffix(s,e),this._fireCurrentPointChangedWithSuffix(n.lastOf(t),e))}},E._insertPointsIntoBlocks=function(e,t,n){return t.forEach(this.addAccTime,this),r.updateContiguousBlocksWithDataPoints(e,t,n)},E._firePointsChangedWithSuffix=function(e,t){this.fire(m.BLOCKS_POINTS_ADDED,e,t,this.getEpic(),this.resolution),this.fire(m.BLOCKS_POINTS_ADDED+"-"+t,e,this.getEpic(),this.resolution)},E._fireCurrentPointChangedWithSuffix=function(e,t){e&&(!this._currentDataPoint[t]||e.accTime>=this._currentDataPoint[t].accTime)&&("prices"===t&&this._currentDataPoint.prices&&this._currentDataPoint.prices.accTime<e.accTime&&this.fire(m.NEW_CURRENT_DATA_POINT,e),this._currentDataPoint[t]=e,this.fire(m.CURRENT_DATA_POINT_CHANGED,e,t),this.fire(m.CURRENT_DATA_POINT_CHANGED+"-"+t,e))},E.hasBlocksLoaded=function(){return!!this.blocks},E.getTimeline=d.getter("_timeline"),E.setTimeline=function(e,t,n,i){this.info=i,this.blocks=n,this._timeline=e,this._eventBus.subscribe("chart/indicator/removed/*",this._contractAfterRemovingIndicator,this),this._fireDataInitialisationEvents(t)},E._fireDataInitialisationEvents=function(e){f.logStats(e,this.period,"Interval stats on this Instrument/Resolution"),this._eventBus.publish("chart/resolution/info",[this.info],{retrospective:!0}),this.fire(m.INFO_LOADED,this.info)},E.handleInitialDataPointsLoaded=function(e){var t=this._trimPartialBlocks(e);t&&this._handleDataPointsLoaded(t.points,t.startBlock,t.endBlock)},E._trimPartialBlocks=function(e){var t,i,o=_.flattenHcdJson(e);return o.length?(t=r.findBlockContainingDate(this.blocks,new Date(n.firstOf(o).timestamp)),i=r.findBlockContainingDate(this.blocks,new Date(n.lastOf(o).timestamp)),t.index>0&&t.index<i.index&&(t=t.next),{startBlock:t,endBlock:i,points:o}):null},E._handlePriceCalculatorChange=function(){if(this.blocks){r.chunkContiguousBlocks(this.blocks.filter((function(e){return null!=e.points.prices}))).forEach(this._recalculatePointsInBlocks,this)}},E._recalculatePointsInBlocks=function(e){var t=n.flatten(e.map(this._recalculatePointsInBlock.bind(this)));this.fire(c.POINTS_LOADED,t,e)},E._recalculatePointsInBlock=function(e){return e.points.prices.points.map(this._recalculatePoint.bind(this,e))},E._recalculatePoint=function(e,t){return this._priceCalculator.calculateDataPoint(t.lastRawPrice,e)},E._handleHcdDataPointsLoaded=function(e,t,n){this._handleDataPointsLoaded(_.flattenHcdJson(e),t,n),this.fire(m.HCD_DATA_POINTS_LOADED)},E._handleDataPointsLoaded=function(e,t,n){var i;o.preProcessBlocks(e,t,n),i=r.chunkContiguousBlocks(this.blocks.filter(T)),i.forEach(this._processAndFireBlocks,this),this.hcdClient.requestMissingTrailingBlocks()},E._processAndFireBlocks=function(e){var t=this._processBlocks(e);t&&this.fire(c.POINTS_LOADED,t.getProcessedPoints(),t.getProcessedBlocks())},E._processBlocks=function(e){if(e.length){var t=o.create(this._priceAdapter,this._priceCalculator,e);return t.processBlocks(),t}return null},E.removeIndicatorPoints=function(e){d.invokeCall(this.blocks,"removePoints",e.outputPointTypes)},E.startStreaming=function(e){this._dataGapManager.startListening(),this.streamingClient.startListening(e)},E.stopStreaming=function(){this._dataGapManager.stopListening(),this.streamingClient.stopListening()},E.numberOfLoadedPrices=function(){return r.countPoints(this.blocks,"prices")},E.getLastPointsInAccRange=function(e){return this.period>=this.instrumentModel.getActiveResolution().period&&this.blocks?r.findLastPointsInAccRange(this.blocks,e):null},E.getLastPoint=function(e){return r.findLastPointFrom(n.lastOf(this.blocks),e)},E.getTrackingAttributes=function(){return{schema:v.PRICE_ATTRIBUTES,epic:this.getEpic(),resolution:g.statisticsKeyFor(this.resolution),priceType:this._priceCalculator.type}},E.addAccTime=function(e){e.accTime=this._timeline.asAccTime(e.date,!0)},Object.seal(E),Object.seal(t)})),define("module/core/js/indicator/input/keenloadingpolicy",["require","module/core/js/util/array"],(function(e){"use strict";var t=e("module/core/js/util/array"),n={};return n.expandBlocksList=function(e){if(0===e.length)return[];var n,i,o,r,s=t.shallowCopy(e),a=e.length;for(n=0,o=t.firstOf(s).previous;n<a&&o;n++,o=o.previous)s.unshift(o);for(i=0,r=t.lastOf(s).next;i<a&&r;i++,r=r.next)s.push(r);return s},n.expandNumberOfPointsToRequest=function(e){return 2*e},n})),define("module/core/js/serviceclient/combinedcall/marketloadresult",["require"],(function(e){"use strict";function t(e){this.instrumentResolution=e.instrumentResolution,this.intervals=e.intervals,this.jsonInstrumentData=e.jsonInstrumentData}var n=t.prototype;return n.instrumentResolution=null,n.intervals=null,n.jsonInstrumentData=null,Object.seal(n),Object.seal(t)})),define("module/core/js/model/intervallist/baseformatter",["require","module/core/js/util/oop"],(function(e){"use strict";var t=e("module/core/js/util/oop"),n={};return n.normaliseEndTimestamp=function(e){return e+(e%1e3==999?1:0)},n.initialiseRelativeToNeighbours=function(e){for(var t=0;t<e.length;t++)e[t].initialiseRelativeToNeighbours(e[t-1],e[t+1]);return e},n.formatToIntervals=t.abstractMethod,Object.seal(n)})),define("module/core/js/model/intervallist/tickformatter",["require","module/core/js/util/array","module/core/js/model/intervallist/baseformatter","module/core/js/util/math","module/core/js/model/tickinterval"],(function(e){"use strict";var t=e("module/core/js/util/array"),n=e("module/core/js/model/intervallist/baseformatter"),i=e("module/core/js/util/math"),o=e("module/core/js/model/tickinterval"),r=Object.create(n);return r.formatToIntervals=function(e){return this.removeIrrelevantIntervals(e),this.matchInitialPointsToIntervals(e),this.initialiseRelativeToNeighbours(e.intervalsDto.intervals.map(this.createIntervalModel,this))},r.createIntervalModel=function(e){var t=new o(new Date(e.startTimestamp),new Date(this.normaliseEndTimestamp(e.endTimestamp)),e.numberTicks);return e.tickDates&&t.withTickDates(e.tickDates,e.numberTicks-e.tickDates.length,e.tickDates.length),t},r.matchInitialPointsToIntervals=function(e){var n,o,r,s=e.intervalsDto.intervals,a=e.intervalsDataPointsDto.intervalsDataPoints,l=[],u=s.length-1;if(s.length&&a.length){for(r=t.lastOf(s).endTimestamp,o=a.length-1;o>=0;o--)if(a[o].startTimestamp>r)a[o].dataPoints.length&&l.push(a[o].dataPoints);else for(;u>=0;u--)if(s[u].startTimestamp===a[o].startTimestamp&&s[u].endTimestamp===a[o].endTimestamp&&s[u].numberTicks===a[o].dataPoints.length){s[u].tickDates=a[o].dataPoints;break}l.length&&(l=t.flatten(l),n=t.lastOf(a).tickCount,i.isNumber(n)||(n=l.length),s.push({active:!0,startTimestamp:r+1,endTimestamp:t.lastOf(l).timestamp+1,tickDates:l,numberTicks:n}))}},r.removeIrrelevantIntervals=function(e){var t=e.intervalsDto.intervals;e.intervalsDto.intervals=t.filter((function(e){return e.active&&e.numberTicks>0}))},Object.seal(r)})),define("module/core/js/serviceclient/combinedcall/multiplemarketloader",["require","module/core/js/serviceclient/cacheablerequestpolicy","module/core/js/serviceclient/combinedcall/combinedcallclient","module/core/js/model/instrumentresolution","module/core/js/indicator/input/keenloadingpolicy","module/core/js/serviceclient/combinedcall/marketloadresult","module/core/js/model/resolutionsenum","module/core/js/model/intervallist/tickformatter"],(function(e){"use strict";function t(e,t){this._combinedCallClient=o.create(e),this._eventBus=e,this._intervalListFormatter=t,this._pendingRequests=Object.create(null)}function n(e){var t=e.instrumentResolutionGuid,n=this._pendingRequests[t];this._combinedCallClient.abort(e),n&&(delete this._pendingRequests[t],(n.remainingResponses-=1)||n.callback(n.responses))}var i=e("module/core/js/serviceclient/cacheablerequestpolicy"),o=e("module/core/js/serviceclient/combinedcall/combinedcallclient"),r=e("module/core/js/model/instrumentresolution"),s=e("module/core/js/indicator/input/keenloadingpolicy"),a=e("module/core/js/serviceclient/combinedcall/marketloadresult"),l=e("module/core/js/model/resolutionsenum"),u=e("module/core/js/model/intervallist/tickformatter");t.create=function(e,n){return new t(e,n)},t.POINTS_TO_REQUEST=i.expandNumberOfPointsToRequest(s.expandNumberOfPointsToRequest(r.INITIAL_NUMBER_OF_POINTS_SHOWN));var c=t.prototype;return c._combinedCallClient=null,c._eventBus=null,c._intervalListFormatter=null,c._pendingRequests=null,c.load=function(e,t){var n={callback:t,remainingResponses:e.length,responses:[]};e.forEach((function(e){this._pendingRequests[e.instrumentResolutionGuid]=n,this._requestData(e)}),this)},c._requestData=function(e){this._combinedCallClient.loadInstrumentData(e,this._handleCombinedCallResponse.bind(this,e),t.POINTS_TO_REQUEST)},c._handleCombinedCallResponse=function(e,t){var n=e.resolution===l.values.TICK?u:this._intervalListFormatter,i=n.formatToIntervals(t,e.resolution),o=this._pendingRequests[e.instrumentResolutionGuid];delete this._pendingRequests[e.instrumentResolutionGuid],o.responses.push(new a({instrumentResolution:e,intervals:i,jsonInstrumentData:t})),(o.remainingResponses-=1)||o.callback(o.responses)},c.abort=function(e){e.forEach(n,this)},c.abortAll=function(){this._combinedCallClient.abortAll(),this._pendingRequests=Object.create(null)},c.destroy=function(){this._combinedCallClient.destroy(),delete this._combinedCallClient,delete this._pendingRequests},Object.seal(c),Object.seal(t)})),define("module/core/js/model/ticktimeline",["require","module/core/js/util/array","module/core/js/util/binarysearch","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/tickinterval","module/core/js/model/timeline"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}function n(e,t){var n,i;for(n=e.length-1;n>=0;n--)if(i=e[n][t]())return i;return null}function i(e,t){return e.getTime()-(t?t.getTime():0)}var o=e("module/core/js/util/array"),r=e("module/core/js/util/binarysearch"),s=e("module/core/js/util/class"),a=e("module/core/js/util/functional"),l=e("module/core/js/model/tickinterval"),u=e("module/core/js/model/timeline");s.extend(t,u),t.create=function(){return new t},t.findFirstTickIndexWithDate=function(e,t,n){for(var i=r.find(e,t,n);i>0&&t[i-1]&&t[i-1].getTime()===t[i].getTime();)i--;return i};var c=t.prototype;return c.endTickDate=function(){return n(this.intervals,"lastTickDate")},c.endTickAccTime=function(){return n(this.intervals,"lastTickAccTime")},c.asAccTime=function(e,t){var n,i=this._searchIntervalsForDate(e),o=0;if(i.fail){if(i===r.BEFORE_START)return e-this.startDate();if(i===r.AFTER_END)return t&&(o=e-this.endDate()),this.accEnd()+o;throw new Error("Problem finding the acc time")}return n=this.intervals[i],e.getTime()<=n.start.getTime()?n.accStart:e.getTime()===n.end.getTime()?n.accEnd:this._accTimeWithinInterval(n,e)},c.isAccTimeValid=function(e){var t=this._intervalIndexContainingAccTime(e);return!t.fail&&this.intervals[t].isLoaded()},c.asDate=function(e){var t,n,i,o,r,s=this.endTickAccTime(),a=this._intervalIndexContainingAccTime(e);if(e===this.intervals[a].accStart)return this.intervals[a].start;if(e===this.intervals[a].accEnd)return this.intervals[a].end;if(e>s)return new Date((this.endTickDate()||this.endDate()).getTime()+(e-s));if(n=this.intervals[a].tickDatesForAccTime,i=(e-this.intervals[a].accStart)/l.ACCTIME_INCREMENT,t=i-Math.floor(i)){if(o=n[Math.floor(i)],i>n.length-1){if(!this.intervals[a+1])throw new Error("asDate past the last interval point, should not be reached");r=this.intervals[a+1].firstTickDate()}else r=n[Math.ceil(i)];return o?new Date(o.getTime()+(r.getTime()-o.getTime())*t):null}return n[i]},c.isDateValid=function(e){var t=this._searchIntervalsForDate(e);return!t.fail&&this.intervals[t].isLoaded()},c.shiftDateToAvailableAccTime=function(e,t,n){return this.asAccTime(e,t,n)>=0?e:this._getTick(n)},c._accTimeWithinInterval=function(e,n){var o,s,a=e.tickDatesForAccTime;return e.isLoaded()?(o=t.findFirstTickIndexWithDate(n,a,i),o===r.NOT_PRESENT?(s=o.lastMidIndex,o=a[s-1]?s-1+(n.getTime()-a[s-1].getTime())/(a[s].getTime()-a[s-1].getTime()):s):o===r.BEFORE_START?o=(n.getTime()-e.accStart)/(a[0].getTime()-e.accStart):o===r.AFTER_END&&(o=a.length-(e.accEnd-n.getTime())/(e.accEnd-a[a.length-1].getTime())),e.accStart+o*l.ACCTIME_INCREMENT):0},c.expandToEndAt=a.throwError("Date-based interval expansion not supported on tick timeline"),c.expandToIncludePoints=function(e,t){o.lastOf(this.intervals).expandToIncludePoints(e,t),this._searchIntervalsForDate.invalidate()},c.contractToEndAt=function(e){t.superclass.contractToEndAt.call(this,e),this.asAccTime.invalidate()},c._initCache=function(){t.superclass._initCache.call(this),"function"==typeof this.asAccTime.invalidate?this.asAccTime.invalidate():this.asAccTime.invalidate=function(){}},c.destroy=function(){"function"==typeof this.asAccTime.invalidate&&(this.asAccTime.invalidate(),delete this.asAccTime),t.superclass.destroy.call(this)},c._getTick=function(e){var t,n,i;for(i=0;i<this.intervals.length;i++)if(this.intervals[i].lastTickDate()){t=this.intervals[i];break}for(;t;){for(n=t.tickDatesForAccTime,i=0;i<n.length;i++)if(n[i]&&!e--)return n[i];t=t.next}return null},Object.seal(c),Object.seal(t)})),define("module/core/js/model/instrumentmodelcollection",["require","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/instrumentmodelevents","module/core/js/serviceclient/combinedcall/multiplemarketloader","module/core/js/util/object","module/core/js/model/resolutionsenum","module/core/js/event/subscribable","module/core/js/model/ticktimeline","module/core/js/model/timeline"],(function(e){"use strict";function t(e){return e.instrumentResolution.resolution===c.values.TICK}function n(e){return function(){var t=this.getInstrumentModel(),n=t?t[e].apply(t,arguments):null;return null!==t&&n===t?this:n}}function i(e,t,n){this._chartModel=e,this._eventBus=t,this._intervalListFormatter=n,this._marketLoader=l.create(t,n)}var o=e("module/core/js/util/array"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/model/instrumentmodelevents"),l=e("module/core/js/serviceclient/combinedcall/multiplemarketloader"),u=e("module/core/js/util/object"),c=e("module/core/js/model/resolutionsenum"),d=e("module/core/js/event/subscribable"),h=e("module/core/js/model/ticktimeline"),p=e("module/core/js/model/timeline");r.extend(i,d),i.create=function(e,t,n){return new i(e,t,n)},i.ALL_INTERVALS_LOADED="ALL_INTERVALS_LOADED";var m=i.prototype;return m._chartModel=null,m._eventBus=null,m._instrumentModels=null,m._intervalListFormatter=null,m._marketLoader=null,m._timeline=null,m.getChartModel=s.getter("_chartModel"),m.getTimeline=s.getter("_timeline"),m.loadMarkets=function(e,t){this.clearMarkets(),this._instrumentModels=Object.create(null),this._timeline=t===c.values.TICK?h.create():p.create(),e.forEach((function(e){this.addInstrumentModelWithResolution(e,t)}),this),this._requestDataForInstrumentResolutions(e.map(s.invoker("getActiveInstrumentResolution")),this._handleMarketsLoaded.bind(this,e))},m.addInstrumentModelWithResolution=function(e,t){return this._instrumentModels[e.epic]=e,e.setChartModel(this._chartModel),e.setTimeline(this._timeline),this._subscribeToEvents(e),e.delayTime&&t.period<c.values.FIVE_MINUTES.period&&(t=c.values.FIVE_MINUTES),e.addInstrumentResolution(t,!0)},m.addSecondaryInstrumentResolution=function(e,t){var n=this._instrumentModels[e].addInstrumentResolution(t,!1);return this._requestDataForInstrumentResolutions([n],this._handleAllRequestedResolutionsAreLoaded.bind(this)),n},m._requestDataForInstrumentResolutions=s.delegate("_marketLoader","load"),m.removeInstrumentResolution=function(e,t){var n=this._instrumentModels[e];this._marketLoader.abort([n.getInstrumentResolution(t)]),n.removeInstrumentResolution(t),o.empty(this.getAllActiveInstrumentResolutions())&&(this._timeline.destroy(),delete this._timeline)},m._handleMarketsLoaded=function(e,n){var i;i=n.some(t)?n[0].intervals:this._intervalListFormatter.unifyOpenIntervals(n.map(s.plucker("intervals"))),this._timeline.setIntervals(i),this._handleAllRequestedResolutionsAreLoaded(n)},m._handleAllRequestedResolutionsAreLoaded=function(e){for(var t=0;t<e.length;t++)e[t].instrumentResolution.instrumentModel.handleInstrumentData(e[t].instrumentResolution.resolution,e[t].jsonInstrumentData,e[t].intervals)},m._subscribeToEvents=function(e){e.un(null,this),e.on(a.INFO_LOADED,s.bubbler(a.INFO_LOADED),this),e.on(a.ACTIVE_RESOLUTION_LOADED,s.bubbler(a.ACTIVE_RESOLUTION_LOADED),this),e.on(a.INTERVALS_LOADED,this._handleIntervalsLoaded,this),e.on(a.BLOCKS_POINTS_ADDED,this._fireBlocksPointsAdded,this),e.on(a.RESOLUTION_REMOVED,s.bubbler(a.RESOLUTION_REMOVED),this),e.on(a.END_DATE_CHANGED,s.bubbler(a.END_DATE_CHANGED),this),e.on(a.NEW_CURRENT_DATA_POINT,s.bubbler(a.NEW_CURRENT_DATA_POINT),this)},m._handleIntervalsLoaded=function(){this._hasBlocksLoaded()&&this.fire(i.ALL_INTERVALS_LOADED)},m._fireBlocksPointsAdded=function(e,t,n,i){this.fire(a.BLOCKS_POINTS_ADDED+"-"+t,e,t,n,i),this.fire(a.BLOCKS_POINTS_ADDED,e,t,n,i)},m.getInstrumentModel=function(){if(!this._instrumentModels)return null;var e=Object.keys(this._instrumentModels);if(e.length>1)throw new Error("Expected either 0 or 1 instrument model, but found "+e.length);return this._instrumentModels[e[0]]||null},m.getInstrumentModelInfo=function(){return this.getInstrumentModel().info},m.getActiveResolution=n("getActiveResolution"),m.getInstrumentResolution=function(e,t){return this._instrumentModels[e].getInstrumentResolution(t)},m.getAllInstrumentResolutions=n("getAllInstrumentResolutions"),m.getActiveInstrumentResolution=n("getActiveInstrumentResolution"),m.getAllActiveInstrumentResolutions=function(){return u.values(this._instrumentModels).map(s.invoker("getActiveInstrumentResolution")).filter(s.defined)},m.hasActiveInstrumentResolutions=function(){return this.getAllActiveInstrumentResolutions().length>0},m.getNonActiveInstrumentResolutions=function(){return o.flatten(u.values(this._instrumentModels).map(s.invoker("getNonActiveInstrumentResolutions")))},m.getActiveInstrumentResolutionGuid=n("getActiveInstrumentResolutionGuid"),m.getActiveInstrumentResolutionGuids=function(){return this.getAllActiveInstrumentResolutions().map(s.plucker("instrumentResolutionGuid"))},m.getPriceCalculator=n("getPriceCalculator"),m.getDataPointsAtAccTime=n("getDataPointsAtAccTime"),m.getInitialDuration=function(){var e=this.getAllActiveInstrumentResolutions().map(s.invoker("initialDuration"));return Math.max.apply(Math,e)},m.updatePriceType=function(){s.objectInvoke(this._instrumentModels,"updatePriceType")},m._hasBlocksLoaded=function(){return this.getAllActiveInstrumentResolutions().map(s.invoker("hasBlocksLoaded")).every(s.identity)},m.clearMarkets=function(){var e,t=this._instrumentModels;if(this._marketLoader.abortAll(),this._timeline&&(this._timeline.destroy(),delete this._timeline),t){for(e in t)t[e].destroy();delete this._instrumentModels}},m.destroy=function(){this.clearMarkets(),this._marketLoader.destroy(),delete this._marketLoader},Object.seal(m),Object.seal(i)})),
define("module/core/js/model/visibledaterange",["require","lodash","module/core/js/ext/d3","module/core/js/util/array","module/core/js/view/axisanimation","module/core/js/view/axisconstants","module/core/js/model/blocks","module/core/js/view/chartanimationconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/instrumentmodelcollection","module/core/js/model/instrumentmodelevents","module/core/js/util/math","module/core/js/util/numberpairs","module/core/js/model/resolutionsenum","module/core/js/tracker/enum/schema","module/core/js/event/subscribable","module/core/js/model/visibledaterangeevents"],(function(e){"use strict";function t(e,t,n,i){return this._instrumentModel=t,this._timeline=t.getTimeline(),this._eventBus=e,this._restrictDuration=n,this._allowScrollingIntoFuture=i,this._resolutionIdToVisibleBlocks=Object.create(null),this._x=this._createXAxis(),this._timeline.hasIntervals()?this._handleIntervalListLoaded():this._instrumentModel.on(h.ALL_INTERVALS_LOADED,this._handleIntervalListLoaded,this,{once:!0}),this}function n(e,t){return e+"-"+t}var i=e("lodash"),o=e("module/core/js/ext/d3"),r=e("module/core/js/util/array"),s=e("module/core/js/view/axisanimation"),a=e("module/core/js/view/axisconstants"),l=e("module/core/js/model/blocks"),u=e("module/core/js/view/chartanimationconstants"),c=e("module/core/js/util/class"),d=e("module/core/js/util/functional"),h=e("module/core/js/model/instrumentmodelcollection"),p=e("module/core/js/model/instrumentmodelevents"),m=e("module/core/js/util/math"),f=e("module/core/js/util/numberpairs"),_=e("module/core/js/model/resolutionsenum"),g=e("module/core/js/tracker/enum/schema"),v=e("module/core/js/event/subscribable"),y=e("module/core/js/model/visibledaterangeevents");c.extend(t,v);var M=t.prototype;return t.OPEN_CLOSE_PROPORTIONAL_WIDTH=.7,t.NUMBER_POINTS_AT_MIN_DURATION=10,t.PIXELS_PER_CANDLE=1,t.RESTRICT_DURATION=Object.seal({SCREEN:"screen",DATA:"data",NONE:!1}),t.create=function(e,n,i,o){return new t(e,n,i,o)},t._calculateTargetAccDomain=function(e,t,n,i,o){var r=(t[1]-t[0])/(n[1]-n[0]),s=e*r,a=t[1],l=a-s;return l<i&&(a+=i-l,l=i),a>o&&(a=o),[l,a]},M._allowScrollingIntoFuture=!1,M._instrumentModel=null,M._timeline=null,M._x=null,M._resolutionIdToVisibleBlocks=null,M._eventBus=null,M._minDuration=null,M._maxDuration=1/0,M._hasMinDurationCalculated=!1,M._outOfBounds=!1,M._restrictDuration=t.RESTRICT_DURATION.SCREEN,M.rightMargin=0,M._xAxisReady=!1,M._initialDuration=null,M.allowScrollingIntoFuture=d.getter("_allowScrollingIntoFuture"),M.isXAxisReady=d.getter("_xAxisReady"),M.getInstrumentModel=d.getter("_instrumentModel"),M.getAllVisibleBlockRanges=function(){return i.pickBy(this._resolutionIdToVisibleBlocks,(function(e){return!0===e.activeResolution}))},M.getScale=d.getter("_x"),M.getTimeline=d.getter("_timeline"),M.setXAxisReady=function(e){var t=this._xAxisReady;return this._xAxisReady=e,e&&!t&&this.fire(y.X_AXIS_READY),this},M.getVisibleBlocks=function(e,t){var i;if(null==e&&null==t)i=this._instrumentModel.getActiveInstrumentResolution(),e=i?i.getEpic():null,t=i?i.resolution:null;else{if(null==e||null==t)throw new Error("getVisibleBlocks expects either no arguments or both of them");i=this._instrumentModel.getInstrumentResolution(e,t)}return i&&i.hasBlocksLoaded()?this._resolutionIdToVisibleBlocks[n(e,t.id)]||[]:[]},M._createXAxis=function(){var e=o.scale.linear(),t=s.wrap(e,u.ANIM_DURATION,o.ease(u.ANIM_EASE),"vdrX");return t.on(s.CHANGED,this._handleXDomainChange,this),t},M.withRightMargin=d.setter("rightMargin"),M.withAnimationPoller=function(e){return this._x.withAnimationPoller(e),this},M.width=function(){var e=this._x.range();return e[1]-e[0]},M.setWidth=function(e){this._instrumentModel&&(this._maxDuration=this.pointAccDuration()*(e/t.PIXELS_PER_CANDLE)),this._x.range([0,e])},M.startPixels=function(){return this._x.range()[0]},M.startDate=function(){var e=this._x.domain()[0];return this._timeline.asDate(e)},M.endDate=function(){var e=this._x.domain()[1];return this._timeline.asDate(e)},M.dateRange=function(){var e=this._x.domain();return[this._timeline.asDate(e[0])||this._timeline.startDate(),this._timeline.asDate(e[1])]},M.accStart=function(){return this._x.domain()[0]},M.accEnd=function(){return this._x.domain()[1]},M.accRange=function(){return this._x.domain()},M.accMid=function(){return(this._x.domain()[0]+this._x.domain()[1])/2},M.targetAccEnd=function(){return this._x.getTargetDomain()[1]},M.distanceOverLeftBound=function(){return!!this._timeline.hasIntervals()&&this.accTimeToPixel(0)-this.accTimeToPixel(this.targetAccEnd()-this.targetDuration())},M.distanceOverRightBound=function(){return!!this._timeline.hasIntervals()&&this.accTimeToPixel(this.targetAccEnd())-this.accTimeToPixel(this.getIdealTimelineAccEnd()+this.marginAccDuration())},M.pointAccDuration=function(){return this._instrumentModel.getActiveResolution().period},M._halfCandleAccDuration=function(){return this.pointAccDuration()*t.OPEN_CLOSE_PROPORTIONAL_WIDTH*.5},M.marginAccDuration=function(){return this.pixelsToAccDuration(this.rightMargin)},M.isOutOfBounds=d.getter("_outOfBounds"),M._isOutOfBounds=function(){return Math.round(this.distanceOverLeftBound())>0||Math.round(this.distanceOverRightBound())>0},M.targetDuration=function(){var e=this._x.getTargetDomain();return e[1]-e[0]},M.moveTo=function(e,t,n){this._timeline.hasIntervals()&&(t=this._getValidDuration(t),this._updateXAxisDomain(e-t,e,n))},M.zoomBy=function(e,t,n){if(this._timeline.hasIntervals()){m.isNumber(t)||(t=.5);var i,o=f.rangeExtent(this._x.domain()),r=this._getValidDuration(o*e),s=this._getDistanceFromLastCandle();o!==r&&(i=s>=0?this._getZoomRangeForFuture(r/o,r,s):this._getZoomRangeForPast(t,o,r),this._updateXAxisDomain(i.start,i.end,n))}},M._getZoomRangeForPast=function(e,t,n){var i=(t-n)*e,o=(t-n)*(1-e),r=this.accStart()+i,s=this.accEnd()-o,a=this._getIdealLastCandleAccEnd(n/t);return a<s?{start:a-n,end:a}:{start:r,end:s}},M._getZoomRangeForFuture=function(e,t,n){var i=e>=1?5:3,o=this._getIdealLastCandleAccEnd(e),r=this.marginAccDuration(),s=this.marginAccDuration()*e,a=this.accEnd()-n/i-r+s,l=0===n?o:a;return{start:l-t,end:l}},M._getLastPricesPoint=function(){return this._instrumentModel.getActiveInstrumentResolution().getLastPoint("prices")},M._getDistanceFromLastCandle=function(){var e=this._getLastPricesPoint();return e?Math.round(this.accEnd()-this.marginAccDuration()-this._halfCandleAccDuration()-e.accTime):null},M._getIdealLastCandleAccEnd=function(e){return this._getLastPricesPoint().accTime+this._halfCandleAccDuration()+this.marginAccDuration()*e},M.getIdealTimelineAccEnd=function(){return this._timeline.accEnd()-this._instrumentModel.getActiveInstrumentResolution().period+this._halfCandleAccDuration()},M.resizeTo=function(e,n){var i=this._x.domain(),o=this._x.range(),r=this._timeline.startAccTime(),s=this._timeline.accEnd()+this._halfCandleAccDuration()+this.marginAccDuration(),a=t._calculateTargetAccDomain(e,i,o,r,s),l=this._getValidDuration(a[1]-a[0]);this.setWidth(e),this._updateXAxisDomain(a[1]-l,a[1],n)},M._updateXAxisDomain=function(e,t,n){this._x.domain([e,t],n),this._allowScrollingIntoFuture&&this._instrumentModel.getActiveInstrumentResolution().resolution.id!==_.values.TICK.id&&this._expandToFuture(t)},M._expandToFuture=function(){var e=this.pixelsToAccDuration(this.width()),t=this._timeline.accEnd()-(this.targetAccEnd()-this.marginAccDuration()),n=this._timeline.asDate(this.accEnd()).valueOf()-this._timeline.asDate(this.accStart()).valueOf(),i=new Date(this._timeline.endDate().valueOf()+n),o=new Date(2100,0,1);t<=e&&i.valueOf()<o.valueOf()&&this._instrumentModel.getActiveInstrumentResolution().expandForwardToContainDate(i)},M._getValidDuration=function(e){var n,i,o,r=this._instrumentModel.getActiveInstrumentResolution();switch(e=e||this._instrumentModel.getInitialDuration(),o=r&&(n=r.getLastPoint())?n.accTime+this.marginAccDuration()-this._timeline.startAccTime():this._timeline.accDuration(),this._restrictDuration){case t.RESTRICT_DURATION.SCREEN:i=Math.min(o,this._maxDuration);break;case t.RESTRICT_DURATION.DATA:i=o;break;default:i=e}return e>i?e=i:e<this._minDuration&&(e=this._minDuration),e},M.moveByPixels=function(e,t){this.moveTo(this.targetAccEnd()-this.pixelsToAccDuration(e),this.targetDuration(),t)},M.onScrollEnd=function(e){this._eventBus.publish("tracker/chart",[{schema:g.FRAME_RATE,task:"SCROLL",fps:e.framesPerSecond()}])},M.pixelsToAccDuration=function(e){return this._x.invert(e)-this._x.invert(0)},M.pixelsToAccTime=function(e){return this._timeline.hasIntervals()?this._x.invert(e):null},M.accTimeToPixel=function(e){return this._x(e)},M.accDurationToPixels=function(e){return this._x(e)-this._x(0)},M._alignVisibleBlocksToAccStartAndAccEnd=function(e){var t;e&&e.hasBlocksLoaded()&&(t=e.period/2,this._updateVisibleBlocksList(e,this.accStart(),this.accEnd()+t))},M._alignVisibleBlocksToActiveVisibleBlocks=function(e){if(e&&e.hasBlocksLoaded()){var t=this._instrumentModel.getActiveInstrumentResolution(),i=this._resolutionIdToVisibleBlocks[n(t.getEpic(),t.resolution.id)],o=e.getTimeline();this._updateVisibleBlocksList(e,o.asAccTime(r.firstOf(i).start),o.asAccTime(r.lastOf(i).end))}},M._handleXDomainChange=function(e){var t=this._outOfBounds;this._instrumentModel.getAllActiveInstrumentResolutions().forEach(this._alignVisibleBlocksToAccStartAndAccEnd.bind(this)),this._instrumentModel.getNonActiveInstrumentResolutions().forEach(this._alignVisibleBlocksToActiveVisibleBlocks.bind(this)),this.fire(y.MOVED,e),this._outOfBounds=this._isOutOfBounds(),t&&!this._outOfBounds&&this.fire(y.MOVED_INTO_BOUNDS),(e&a.INITIALISED)!==a.INITIALISED&&(e&a.ZOOMED)===a.ZOOMED&&this.fire(y.WIDTH_CHANGED,this.getCandleWidth())},M._updateVisibleBlocksList=function(e,t,n){var i=e.blocks,o=l.findBlockIndicesContainingAccRange(i,[t,n]);this._setVisibleBlocksList(e,o)},M._setVisibleBlocksList=function(e,t){var i,o=this._resolutionIdToVisibleBlocks[n(e.getEpic(),e.resolution.id)]||[],r=this._visibleBlocksIndexRange(o),s=null!==r,a=e.resolution.id===this._instrumentModel.getActiveResolution().id;s&&!f.pairDifferent(t,r)||(i=!s||!f.firstRangeContainedInSecond(t,r),this._resolutionIdToVisibleBlocks[n(e.getEpic(),e.resolution.id)]=e.blocks.slice(t[0],t[1]+1),this._resolutionIdToVisibleBlocks[n(e.getEpic(),e.resolution.id)].activeResolution=a,this.fire(y.VISIBLE_BLOCKS_CHANGED,i))},M._visibleBlocksIndexRange=function(e){return 0===e.length?null:[e[0].index,r.lastOf(e).index]},M.stableMillisShown=function(){return this._timeline.stableMillisForAccTimeExtent(f.rangeExtent(this._x.domain()))},M.approxTimeDensity=function(){return this.stableMillisShown()/f.rangeExtent(this._x.range())},M._handleIntervalListLoaded=function(){this._instrumentModel.on(p.BLOCKS_POINTS_ADDED,this._handleBlocksPointsAdded,this),this._instrumentModel.on(p.RESOLUTION_REMOVED,this._handleResolutionRemoved,this),this._instrumentModel.on(p.END_DATE_CHANGED,this._handleEndDateChanged,this),this._instrumentModel.on(p.NEW_CURRENT_DATA_POINT,this._handleNewCurrentDataPoint,this),this.setXAxisReady(!0)},M.setInitialDurationFromCandleWidth=function(e){this._initialDuration=e?this.width()/e*this._instrumentModel.getActiveInstrumentResolution().resolution.period:null},M._setToAccTime=function(e){var t,n;t=this._getValidDuration(this._initialDuration),n=t*(this.rightMargin/this.width()),this.moveTo(e+n,t,!0)},M.getCandleWidth=function(){return this.accDurationToPixels(this._instrumentModel.getActiveInstrumentResolution().period)},M.setToLatestTime=function(){this._setToAccTime(this.getIdealTimelineAccEnd())},M.setToLastPoint=function(){this._setToAccTime(this._instrumentModel.getActiveInstrumentResolution().getLastPoint().accTime+this._halfCandleAccDuration())},M.isLatestCandleInVisibleRange=function(){var e=this._instrumentModel.getActiveInstrumentResolution().getLastPoint(),t=e?e.accTime:this._x.domain()[1],n=this._x.domain()[0],i=this._x.domain()[1];return n<=t&&t<=i},M._handleBlocksPointsAdded=function(e,t,i,o){var r,s=this.accStart(),a=this.accEnd();this._updateMinDuration(),this._resolutionIdToVisibleBlocks[n(i,o.id)]||this._alignVisibleBlocksToActiveVisibleBlocks(this._instrumentModel.getInstrumentResolution(i,o)),r=e.filter((function(e){return e.accEnd>s&&e.accStart<a})),0!==r.length&&(this._expandVisibleBlocksToInclude(i,o.id,r),this.fire(y.VISIBLE_BLOCKS_POINTS_ADDED+"-"+t,e,t),this.fire(y.VISIBLE_BLOCKS_POINTS_ADDED+"-"+t+"-"+o.id,e,t))},M._updateMinDuration=function(){var e,n=f.rangeExtent(this._x.domain()),i=this.pointAccDuration();this._hasMinDurationCalculated||(e=this._instrumentModel.getActiveInstrumentResolution().numberOfLoadedPrices(),e>=t.NUMBER_POINTS_AT_MIN_DURATION?(this._hasMinDurationCalculated=!0,this._minDuration=i*t.NUMBER_POINTS_AT_MIN_DURATION):(e>0&&e--,this._minDuration=e*i),this.moveTo(this.accEnd(),n))},M._expandVisibleBlocksToInclude=function(e,t,i){for(var o=r.lastOf(this._resolutionIdToVisibleBlocks[n(e,t)]),s=r.lastOf(i).index;o.index<s;)o=o.next,this._resolutionIdToVisibleBlocks[n(e,t)].push(o)},M._handleEndDateChanged=function(e,t,n){var i=this._instrumentModel.getActiveInstrumentResolution(),o=i.getCurrentDataPoint("prices"),r=o?o.accTime:null,s=i.resolution.period;r&&!n&&this._moveToEnd(r+s,e,t)},M._maxDistanceRequiredToStick=function(){return 1.5*this.pointAccDuration()},M._shouldFollow=function(){var e=this.targetAccEnd(),t=e-this.marginAccDuration(),n=this._timeline.accEnd();return Math.abs(t-n)<=this._maxDistanceRequiredToStick()},M.isLatestPriceFollowed=function(){var e,t=this._instrumentModel.getActiveInstrumentResolution().getCurrentDataPoint("prices");return t?(e=this.targetAccEnd()-this.marginAccDuration(),Math.abs(e-t.accTime)<=this._maxDistanceRequiredToStick()):this._shouldFollow()},M._handleNewCurrentDataPoint=function(e){var t,n,i=this._instrumentModel.getActiveInstrumentResolution(),o=this._x.domain()[1]-this._x.domain()[0],r=this.marginAccDuration()+this._halfCandleAccDuration(),s=this.targetAccEnd()-this.marginAccDuration()+this.pointAccDuration()>=i.getCurrentDataPoint("prices").accTime,a=i.getLastPoint(),l=a&&a.accTime>this.targetAccEnd()-r;!s||a&&!l||(this.isLatestPriceFollowed()?n=e.accTime+this.marginAccDuration()+this._halfCandleAccDuration():(t=e.accTime-i.getCurrentDataPoint("prices").accTime,n=Math.min(this.targetAccEnd()+t,a.accTime+r)),this.moveTo(n,o))},M._moveToEnd=function(e,t,n){var i=this.targetAccEnd(),o=i-this.marginAccDuration(),r=this._x.domain()[1]-this._x.domain()[0];n>=t&&n<o||i>n&&this.moveTo(n-this._instrumentModel.getActiveInstrumentResolution().period+this._halfCandleAccDuration()+this.marginAccDuration(),r)},M._handleResolutionRemoved=function(e,t){delete this._resolutionIdToVisibleBlocks[n(e,t.id)]},M.destroy=function(){this._eventBus.unsubscribeAll(this),this._instrumentModel.un(null,this),this._x&&this._x.un(null,this)},Object.seal(M),t})),define("module/core/js/view/renderer/candlerenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstracthlocrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/visibledaterange"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments),this._applyCandleBorder=s.throttle(this._applyCandleBorder,100)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstracthlocrenderer"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/model/visibledaterange"),l=s.throwError("cannot calculate dimensions without visibleWindow");r.extend(t,i);var u=t.prototype;return u._openCloseLineX=l,u._openCloseRectX=l,u._openCloseRectWidth=l,u._openCloseRectHeight=l,u._yOfOpenClose=l,u.destroy=function(){this._applyCandleBorder.abort(),t.superclass.destroy.call(this)},u.initDom=function(){return t.superclass.initDom.call(this),this.dContainer.classed("candles",!0),this},u.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._visibleWindow.isReadyForRender()&&this._applyCandleBorder()},u._applyCandleBorder=function(){var e=this._visibleWindow.visibleDateRange.accDurationToPixels(this._indicator.resolution.period);this.dContainer.classed("small",e<=6)},u._createNewPoint=function(e){var t=n.select(document.createElementNS("http://www.w3.org/2000/svg","g")).classed("candle",!0).classed(e.direction,!0);return e.rangeGoesOutsideOpenClose&&t.append("svg:line").classed("highLow",!0),t.append(e.isZeroMovement?"svg:line":"svg:rect").classed("openClose",!0),t.node()},u._createPositionFunctions=function(e,n,i,o,r,l,u){t.superclass._createPositionFunctions.apply(this,arguments);var c,d,h;c=function(){return i(e()*(a.OPEN_CLOSE_PROPORTIONAL_WIDTH/2))},d=function(){return i(-e()*(a.OPEN_CLOSE_PROPORTIONAL_WIDTH/2))},h=function(){return o(e()*a.OPEN_CLOSE_PROPORTIONAL_WIDTH)},this._projection.inX.forwardsUnchanging?(this._openCloseLineX=s.returns(c()),this._openCloseRectX=s.returns(d()),this._openCloseRectWidth=s.returns(h())):(this._openCloseLineX=c,this._openCloseRectX=d,this._openCloseRectWidth=h),this._yOfOpenClose=s.compose(l,r,s.plucker("lowOpenClose")),this._openCloseRectHeight=function(e){return u(r(e.highOpenClose)-r(e.lowOpenClose))}},u._positionPointsHorizontally=function(e){var t=this._openCloseLineX();e.attr("transform",this._pointX),e.select("line.openClose").attr({x1:-t,x2:t}),e.select("rect.openClose").attr({x:this._openCloseRectX(),width:this._openCloseRectWidth()})},u._positionPointsVertically=function(e){e.select(".highLow").attr({y1:this._highLowLineY1,y2:this._highLowLineY2}),e.select("line.openClose").attr({y1:this._yOfOpenClose,y2:this._yOfOpenClose}),e.select("rect.openClose").attr({y:this._yOfOpenClose,height:this._openCloseRectHeight})},u._handleVisibleWindowMoved=function(e,n){t.superclass._handleVisibleWindowMoved.call(this,e,n),e&(o.ZOOMED|o.INITIALISED|o.RESIZED)&&this._applyCandleBorder()},Object.seal(u),Object.seal(t)})),define("module/core/js/view/projection/xonlyprojection",["require","module/core/js/view/projection/abstractspaceprojection","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/svg"],(function(e){"use strict";var t=e("module/core/js/view/projection/abstractspaceprojection"),n=e("module/core/js/view/axisconstants"),i=e("module/core/js/util/class"),o=e("module/core/js/util/svg"),r=function(e){this.inX=e};i.extend(r,t),r.create=function(e){return new r(e)};var s=r.prototype;return s.inX=null,s.positionContainer=function(){var e=this._visibleWindow,i=this.inX.getBackwardsTransformComponents(e,e.getXScale()),r=i.scale,s=i.translate,a=this.inX.contentsNeedReplottingAfterChange(n.RESIZED);this._dContainer.attr("transform",o.xTransform(r,s,this.inX.roundValue)),a&&this.fire(t.REPLOT_REQUIRED,!0,!1)},s.getClassNameForContainer=function(){return"xProjected x"+this.inX.name},s._visibleWindowDomainSet=function(){return this._visibleWindow.visibleDateRange.isXAxisReady()},s._updateBackwardsTransformIfRequired=function(e,t){void 0!==e&&this.inX.backwardsTransformNeedsUpdateOnChange(e)&&this.positionContainer()},s._checkIfReplotRequired=function(e,n){this.inX.contentsNeedReplottingAfterChange(e)&&this.fire(t.REPLOT_REQUIRED,!0,!1)},Object.seal(s),r})),define("module/core/js/view/renderer/dataloadingrenderer",["require","module/core/js/view/renderer/abstractblockrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/projection/ordinals/relativexmodelprojection","module/core/js/view/projection/xonlyprojection"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractblockrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/view/projection/ordinals/relativexmodelprojection"),a=e("module/core/js/view/projection/xonlyprojection");o.extend(t,n);var l=t.prototype;return l._blockElementType="svg:rect",l._createProjection=function(e){return new a(s.createForShowingTimeInX(this._instrumentModel.getActiveResolution().period))},l._initNewBlocks=function(e){var t=this._getForwardsProjectionInX();e.attr("y",0).attr("height",this._visibleWindow.height()).attr("width",r.compose(t,r.plucker("accDuration")))},l.setContainer=function(e){return t.superclass.setContainer.apply(this,arguments),this.dContainer=e.classed("chartHasNeverBeenMoved",!0),this},l._handleVisibleWindowMoved=function(e,n){t.superclass._handleVisibleWindowMoved.call(this,e,n),e&i.MOVED&&!(e&i.INITIALISED)&&this.dContainer.classed("chartHasNeverBeenMoved",!1),n&i.RESIZED&&this._dBlocks.attr("height",this._visibleWindow.height())},l._useBlock=function(e){return!e.loading.calculated},Object.seal(l),Object.seal(t)})),define("module/core/js/view/renderer/hlocrenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstracthlocrenderer","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/visibledaterange"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstracthlocrenderer"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/model/visibledaterange");o.extend(t,i);var a=t.prototype;return a._closeLineX=a._closeLineY=a._openLineX=a._openLineY=r.throwError("cannot calculate dimensions without visibleWindow"),a.initDom=function(){return t.superclass.initDom.call(this),this.dContainer.classed("candles",!0),this},a._createNewPoint=function(e){var t=n.select(document.createElementNS("http://www.w3.org/2000/svg","g")).classed("hloc",!0).classed(e.direction,!0);return t.append("svg:line").classed("highLow",!0),t.append("svg:line").classed("open",!0),t.append("svg:line").classed("close",!0),t.node()},a._createPositionFunctions=function(e,n,i,o,a,l,u){t.superclass._createPositionFunctions.apply(this,arguments);var c=function(){return i(-e()*(s.OPEN_CLOSE_PROPORTIONAL_WIDTH/2))},d=function(){return i(e()*(s.OPEN_CLOSE_PROPORTIONAL_WIDTH/2))};this._projection.inX.forwardsUnchanging?(this._openLineX=r.returns(c()),this._closeLineX=r.returns(d())):(this._openLineX=c,this._closeLineX=d),this._openLineY=r.compose(l,a,r.plucker("openPrice")),this._closeLineY=r.compose(l,a,r.plucker("closePrice"))},a._positionPointsHorizontally=function(e){e.attr("transform",this._pointX),e.select(".open").attr({x1:this._openLineX,x2:0}),e.select(".close").attr({x1:0,x2:this._closeLineX})},a._positionPointsVertically=function(e){e.select(".highLow").attr({y1:this._highLowLineY1,y2:this._highLowLineY2}),e.select(".open").attr({y1:this._openLineY,y2:this._openLineY}),e.select(".close").attr({y1:this._closeLineY,y2:this._closeLineY})},Object.seal(a),Object.seal(t)})),define("module/core/js/view/projection/ordinals/screenprojection",["require","module/core/js/view/projection/ordinals/abstractordinalprojection","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/projection/ordinals/abstractordinalprojection"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/math"),s=Object.freeze({scale:1,translate:0});t.create=function(){return new t},i.extend(t,n);var a=t.prototype;return a.name="ScreenProjection",a.backwardsTransformNeedsUpdateOnChange=o.returns(!1),a.getBackwardsTransformComponents=o.returns(s),a.roundValue=Math.round,a.visibleRoundValue=function(e){return Math.round(r.enforceMinimumValue(e,1))},a.getForwardsProjectionScale=function(e,t){return t},a.contentsNeedReplottingAfterChange=function(e){return!!e},Object.seal(a),Object.seal(t)})),define("module/core/js/view/renderer/pathrenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractprojectedrenderer","module/core/js/util/array","module/core/js/model/blocks","module/core/js/util/browsercapabilities","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/core/js/util/functional","module/core/js/model/instrumentmodelevents","module/core/js/view/projection/rounding","module/core/js/view/projection/ordinals/screenprojection","module/core/js/util/svg","module/core/js/view/projection/ordinals/timeoffsetprojection","module/core/js/model/visibledaterangeevents","module/core/js/view/projection/ordinals/xmodelprojection","module/core/js/view/projection/xyprojection","module/core/js/view/projection/ordinals/ymodelprojection"],(function(e){"use strict";function t(e,i,o,s,a){t.superclass.constructor.apply(this,arguments),this._pointType=a,this._accessor=r.getPointTypeAccessor(a),this._dPathFill=n.select(),this._dPathLineUp=n.select(),this._dPathLineDown=n.select(),this._dPathLineNeutral=n.select(),this._dDefs=n.select()}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractprojectedrenderer"),o=e("module/core/js/util/array"),r=e("module/core/js/model/blocks"),s=e("module/core/js/util/browsercapabilities"),a=e("module/core/js/util/class"),l=e("module/core/js/model/datapoint/datapoint"),u=e("module/core/js/util/functional"),c=e("module/core/js/model/instrumentmodelevents"),d=e("module/core/js/view/projection/rounding"),h=e("module/core/js/view/projection/ordinals/screenprojection"),p=e("module/core/js/util/svg"),m=e("module/core/js/view/projection/ordinals/timeoffsetprojection"),f=e("module/core/js/model/visibledaterangeevents"),_=e("module/core/js/view/projection/ordinals/xmodelprojection"),g=e("module/core/js/view/projection/xyprojection"),v=e("module/core/js/view/projection/ordinals/ymodelprojection");a.extend(t,i);var y=t.prototype;return y._dDefs=null,y._dPathLineUp=null,y._dPathLineDown=null,y._dPathLineNeutral=null,y._dPathFill=null,y._stroke=null,y._strokeGradient=null,y._fill=null,y._fillGradient=null,y._fillIntersection=0,y._recreateGradients=!1,y.withStroke=u.setter("_stroke"),y.withStrokeGradient=u.setter("_strokeGradient"),y.withFill=u.setter("_fill"),y.withFillGradient=u.setter("_fillGradient"),y.withFillIntersection=u.setter("_fillIntersection"),y._createProjection=function(e){return s.getInstance().supportsSvgNonScalingStroke()?new g(_.createForShowingTimeInX(this._instrumentModel.getActiveResolution().period),v.createForShowingValueInY(e)):new g(new m,new h)},y.startRedrawingBasedOnChangesInVisibleWindow=function(){return t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._instrumentModel.on(c.BLOCKS_POINTS_ADDED+"-"+this._pointType,this.renderOnFrameEnd,this),this._visibleWindow.visibleDateRange.on(f.VISIBLE_BLOCKS_CHANGED,this._redrawIfNewBlocks,this),this},y.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._instrumentModel.un(null,this),t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this)},y.initDom=function(){return this.dContainer.classed("path",!0).classed(this._pointType,!0),this._recreatePath(),this},y._recreatePath=function(){this._dDefs.remove(),this._dPathFill.remove(),this._dPathLineUp.remove(),this._dPathLineDown.remove(),this._dPathLineNeutral.remove(),(this._strokeGradient||this._fillGradient)&&(this._dDefs=this._subView.newDefs(this._getPrefixedId("defs")).classed("group-"+this.group,!0).classed(this.name,!0),this._createGradientDefs()),(this._fill||this._fillGradient)&&this._initFill(),this._initLine()},y._getPrefixedId=function(e){return this._subView.uniquelyIdentifyPosition(this.position)+"-"+this.name+"-"+e},y._createGradientDefs=function(){var e=this._visibleWindow,n=d.roundForGradientStops,i=this._projection.inY.getForwardsProjectionScale(e,e.y);this._dDefs.selectAll(".gradientStroke, .gradientFill").remove(),this._fillGradient&&t.createGradient(this._dDefs,this._fillGradient,n,i).attr("id",this._getPrefixedId("fill")).classed("gradientFill",!0),this._strokeGradient&&t.createGradient(this._dDefs,this._strokeGradient,n,i).attr("id",this._getPrefixedId("stroke")).classed("gradientStroke",!0)},t.createGradient=function(e,t,n,i){var r,s=function(e,n){return t[e][0]-t[n][0]},a=Object.keys(t).sort(s),l=t[o.firstOf(a)],u=t[o.lastOf(a)],c=n(i(o.firstOf(l))),d=n(i(o.lastOf(u))),h=d-c,p=e.append("svg:linearGradient").attr("gradientUnits","userSpaceOnUse").attr("x1","0").attr("x2","0").attr("y1",c).attr("y2",d);return r=function(e){var o,r;for(r=0;r<t[e].length;r++)o=t[e][r],p.append("svg:stop").attr("offset",(n(i(o))-c)/h).classed("stop",!0).classed(e,!0)},a.forEach(r),p},y._initLine=function(){this._dPathLineUp=this.dContainer.append("svg:path").attr("class","line").classed("up",!0),this._dPathLineDown=this.dContainer.append("svg:path").attr("class","line").classed("down",!0),this._dPathLineNeutral=this.dContainer.append("svg:path").attr("class","line").classed("noMovement",!0),this._strokeGradient?(this._dPathLineUp.attr("stroke",p.localUrlRef(this._getPrefixedId("stroke"))),this._dPathLineDown.attr("stroke",p.localUrlRef(this._getPrefixedId("stroke"))),this._dPathLineNeutral.attr("stroke",p.localUrlRef(this._getPrefixedId("stroke")))):this._stroke&&!0!==this._stroke&&(this._dPathLineUp.attr("stroke",this._stroke),this._dPathLineDown.attr("stroke",this._stroke),this._dPathLineNeutral.attr("stroke",this._stroke))},y._initFill=function(){this._dPathFill=this.dContainer.append("svg:polyline").attr("class","fill"),this._fillGradient?this._dPathFill.attr("fill",p.localUrlRef(this._getPrefixedId("fill"))):this._fill&&!0!==this._fill&&this._dPathFill.attr("fill",this._fill)},y.destroy=function(){t.superclass.destroy.call(this),this._dDefs.remove(),this._dPathFill.remove(),this._dPathLineUp.remove(),this._dPathLineDown.remove(),this._dPathLineNeutral.remove()},y._replot=function(e,t){(this._strokeGradient||this._fillGradient)&&(this._recreateGradients=!0),this.renderOnFrameEnd()},y._redrawIfNewBlocks=function(e){e&&this.renderOnFrameEnd()},y._getTotalPoints=function(e){var t,n,i=o.firstOf(e),s=o.lastOf(e),a=r._previousPointBefore(i,this._accessor),l=r._nextPointAfter(s,this._accessor),u=[];for(n=0;n<e.length;n++)t=this._accessor(e[n]),u=u.concat(t);return l&&u.push(l),a&&u.unshift(a),u},y._createPaths=function(e){var t,n,i,o,r,s="",a="",l="",u="",c=[];for(r=0;r<e.length;r++)t=e[r],a+=this._buildPathString(t),c.push(this._buildPathPoint(t)),i&&(n=this._checkDirection(t,i),-1===n?s+=this._buildPathString(t,i,n!==o):1===n?u+=this._buildPathString(t,i,n!==o):l+=this._buildPathString(t,i,n!==o)),i=t,o=n;return{down:s,full:a,neutral:l,up:u,data:c}},y.render=function(){this._recreateGradients&&(this._recreatePath(),this._recreateGradients=!1);var e,t,n,i=this._visibleWindow.visibleDateRange.getVisibleBlocks(this._indicator.epic,this._indicator.resolution),s=o.firstOf(i),a=o.lastOf(i),l=r._previousPointBefore(s,this._accessor),c=r._nextPointAfter(a,this._accessor),d=this._getTotalPoints(i),h=d.map(u.plucker("value")),p=Math.min(0,Math.min.apply(Math,h)),m=Math.max(0,Math.max.apply(Math,h)),f=this._fillIntersection;if(n=this._createPaths(d),e=o.firstOf(d),t=o.lastOf(d),!(!!t||l&&c))return this._dPathLineUp.attr("d",""),this._dPathLineDown.attr("d",""),this._dPathLineNeutral.attr("d",""),void this._dPathFill.attr("points","");this._dPathLineUp.attr("d",n.up),this._dPathLineDown.attr("d",n.down),this._dPathLineNeutral.attr("d",n.neutral),(this._fill||this._fillGradient)&&("lowestValue"===this._fillIntersection?(f=p,f-=.5*(m-p)):"highestValue"===this._fillIntersection&&(f+=.5*(m-p)),n.full+=this._buildPathString(this._createFinalPoint(t,f)),n.full+=this._buildPathString(this._createFinalPoint(e,f)),this._dPathFill.attr("points",n.full))},y._createFinalPoint=function(e,t){var n=new l(e.timestamp,t);return n.accTime=e.accTime,n},y._checkDirection=function(e,t){return e.value>t.value?1:e.value<t.value?-1:0},y._buildPathString=function(e,t,n){
var i="",o=e.accTime,r=e.value,s=this._projection.inX.roundValue,a=this._projection.inY.roundValue,l=this._projection.inX.getForwardsProjectionScale(this._visibleWindow,this._visibleWindow.getXScale()),u=this._projection.inY.getForwardsProjectionScale(this._visibleWindow,this._visibleWindow.y);return n&&(i="M"+s(l(t.accTime))+","+a(u(t.value))+" "),i+(s(l(o))+",")+a(u(r))+" "},y._buildPathPoint=function(e){return{x:this._visibleWindow.visibleDateRange.accTimeToPixel(e.accTime),y:this._visibleWindow.y(e.value)+this._subView.dimensions.y}},t.getBlocksNeededToRender=function(e,t){var n,i,s=u.totalPlucker("points",t,"points"),a=o.firstOf(e),l=o.lastOf(e);return 0===e.length?[]:(r._hasPointAtBlockStartTime(a,s)||(n=r.getPrecedingBlockWithPoints(a,s)),i=r.getSucceedingBlockWithPoints(l,s),o.edgeArray(e,n,i))},Object.seal(y),Object.seal(t)})),define("module/indicators/js/resolutionchooser/resolutionchooser",[],(function(){"use strict";function e(){}e.create=function(){return new e};var t=e.prototype;return t.chooseResolution=function(e,t){return t},Object.seal(t),Object.seal(e)})),define("module/core/js/model/stylesenum",["require","module/core/js/util/object","module/core/js/util/timeconstants"],(function(e){"use strict";var t=e("module/core/js/util/object"),n=e("module/core/js/util/timeconstants"),i={CANDLE:"CANDLE",LINE:"LINE",HLOC:"HLOC",MOUNTAIN:"MOUNTAIN"};return t.defineProperty(i,"getSupportedStylesForResolution",{configurable:!0,enumerable:!1,writable:!0,value:function(e){return e===n.Enum.TICK?[i.LINE,i.MOUNTAIN]:Object.keys(i)}}),Object.freeze(i)})),define("module/core/js/indicator/rendererchooser/abstractrendererchooser",["require","module/core/js/util/class","module/core/js/util/object","module/core/js/util/oop","module/core/js/event/subscribable"],(function(e){"use strict";function t(e,t){this._choices={},this._expansionFns=e,this._eventBus=t}var n=e("module/core/js/util/class"),i=e("module/core/js/util/object"),o=e("module/core/js/util/oop"),r=e("module/core/js/event/subscribable");n.extend(t,r);var s=t.prototype;return t.CHOICE_CHANGED="choiceChanged",t.INITIAL_CHOICE="initial",s._eventBus=null,s._expansionFns=null,s._choices=null,s._choice=null,s.addChoices=function(e){return i.applyTo(this._choices,e,!1),this},s.setChoice=function(e){return this._choice=e,this.fire(t.CHOICE_CHANGED),this},s.couldProvideExpansionFns=function(){return Object.keys(this._expansionFns).length>0},s.startNotifyingRendererChanges=o.abstractMethod,s.stopNotifyingRendererChanges=o.abstractMethod,s.getCurrentRendererNames=function(){return this._choice&&this._choice in this._choices?this._choices[this._choice]:[]},s.getCurrentExpansionFunctions=function(){var e,t,n,i=this.getCurrentRendererNames(),o=[];for(n=0;n<i.length;n++)e=i[n],(t=this._expansionFns[e])&&o.push(t);return o},Object.seal(s),t})),define("module/styles/js/rendererchooser/stylerendererchooser",["require","module/core/js/indicator/rendererchooser/abstractrendererchooser","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/indicator/rendererchooser/abstractrendererchooser");e("module/core/js/util/class").extend(t,n);var i=t.prototype;return i.startNotifyingRendererChanges=function(){return this._eventBus.subscribe("chart/style/change",this.setChoice,this),this},i.stopNotifyingRendererChanges=function(){return this._eventBus.unsubscribe("chart/style/change",this.setChoice,this),this._eventBus.flush("chart/style/change"),this},Object.seal(i),Object.seal(t)})),define("module/styles/js/config/stylesconfig",["require","module/core/js/view/renderer/candlerenderer","module/core/js/view/renderer/dataloadingrenderer","module/core/js/util/functional","module/core/js/view/renderer/hlocrenderer","module/core/js/util/object","module/core/js/view/renderer/pathrenderer","module/indicators/js/resolutionchooser/resolutionchooser","module/core/js/model/stylesenum","module/styles/js/rendererchooser/stylerendererchooser"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/renderer/candlerenderer"),i=e("module/core/js/view/renderer/dataloadingrenderer"),o=e("module/core/js/util/functional"),r=e("module/core/js/view/renderer/hlocrenderer"),s=e("module/core/js/util/object"),a=e("module/core/js/view/renderer/pathrenderer"),l=e("module/indicators/js/resolutionchooser/resolutionchooser"),u=e("module/core/js/model/stylesenum"),c=e("module/styles/js/rendererchooser/stylerendererchooser"),d={capabilities:[u.CANDLE,u.LINE,u.HLOC,u.MOUNTAIN],resolutionChooser:l,rendererChooser:{type:c,choices:{initial:[u.CANDLE,"dataLoading"],CANDLE:[u.CANDLE,"dataLoading"],LINE:[u.LINE,"dataLoading"],HLOC:[u.HLOC,"dataLoading"],MOUNTAIN:[u.MOUNTAIN,"dataLoading"]}},renderers:{CANDLE:{type:n,properties:{relativeWeighting:-1},serverId:"CANDLE_STICK"},LINE:{type:a,properties:{relativeWeighting:-1},serverId:"LINE"},HLOC:{type:r,properties:{relativeWeighting:-1},serverId:"HLOC"},MOUNTAIN:{type:a,properties:{relativeWeighting:-1,fill:!0},serverId:"MOUNTAIN"},dataLoading:{type:i,pointType:"prices",group:"frame"}}};return t.get=o.returns(d),s.recursiveFreeze(d),Object.seal(t)})),define("module/core/js/model/layouts/corelayoutmodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class","module/core/js/util/object","module/core/js/enum/pricetypeenum","module/core/js/model/resolutionsenum","module/styles/js/config/stylesconfig"],(function(e){"use strict";function t(e,n,i){this.resolution=s.valueOf(s.DEFAULT_RESOLUTION_NAME),this.style=a.get().rendererChooser.choices.initial[0],this.priceType=r.DEFAULT,t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule"),i=e("module/core/js/util/class"),o=e("module/core/js/util/object"),r=e("module/core/js/enum/pricetypeenum"),s=e("module/core/js/model/resolutionsenum"),a=e("module/styles/js/config/stylesconfig");i.extend(t,n),t.BASE_PAYLOAD=o.recursiveFreeze({dailyPriceIsVisible:!0,gridLineType:"BOTH",priceDataToolTip:!0,reticleType:"CIRCLE",showCurrentPrice:!0}),t.SETTINGS_MODULE_NAME="coreModule";var l=t.prototype;return l.resolution=null,l.candleWidth=null,l.style=null,l.priceType=null,l.isAutosaveEnabled=!1,l.desktopTooltipEnabled=!1,l.fromJSON=function(e){var t,n=a.get().renderers;if(e.isAutosaveEnabled&&(this.isAutosaveEnabled=e.isAutosaveEnabled),e.resolution&&(this.resolution=s.getResolutionForScale(e.resolution.scale,e.resolution.multiplier)),e.candleWidth&&(this.candleWidth=e.candleWidth),e.seriesType)for(t in n)n[t].serverId===e.seriesType&&(this.style=t);e.priceType&&(this.priceType=e.priceType),e.desktopTooltipEnabled&&(this.desktopTooltipEnabled=e.desktopTooltipEnabled)},l.fromLocalStorage=function(e){e.has("resolutions")&&(this.resolution=s.valueOf(e.get("resolutions").id)),e.has("styles")&&(this.style=e.get("styles").id),e.has("priceType")&&(this.priceType=e.get("priceType"))},l.toJSON=function(){var e=o.deepCopyLiteral({},t.BASE_PAYLOAD);return e.isAutosaveEnabled=this.isAutosaveEnabled,e.resolution={scale:this.resolution.periodUnit,multiplier:this.resolution.multiple},e.candleWidth=this.candleWidth,e.seriesType=a.get().renderers[this.style].serverId,e.priceType=this.priceType,e.desktopTooltipEnabled=this.desktopTooltipEnabled,e},Object.seal(l),Object.seal(t)})),define("module/core/js/event/eventbus",["require","module/core/js/util/array"],(function(e){"use strict";function t(){this._topics=Object.create(null),this._pastEvents=Object.create(null)}var n=e("module/core/js/util/array");t.create=function(){return new t},t.DEFAULT_MAX_PAST_EVENTS=1,t._removeSubscriber=function(e,t,i){return function(o){return o._actualCallback===t&&o.context===i&&o._relatedTopics&&n.inPlaceConcat(e,o._relatedTopics),!((o.callback===t||o._actualCallback===t)&&o.context===i)}};var i=t.prototype;return i._topics=null,i._pastEvents=null,i.subscribe=function(e,t,n,i){i=i||{};var o,r=i.once||!1,s="/*"===e.slice(-2),a=i._actualCallback||null,l=i._relatedTopics||null;e=s?e.slice(0,e.length-2):e,o=this._getPastValidTopics(e,s),this._topics[e]=this._topics[e]||[],this._topics[e].push({callback:t,context:n,once:r,_listenToChildren:s,_actualCallback:a,_relatedTopics:l}),o&&o.length>0&&this._triggerPastEvents(o,e,t,n,r)},i._triggerPastEvents=function(e,t,n,i,o){var r,s,a,l;for(a=0;a<e.length;a++)for(s=e[a],l=0;l<s.length;l++)if(r=s[l],n.apply(i,r.args),o)return void this._topics[t].pop()},i.subscribeMultiple=function(e,t,i,o){var r,s,a,l=n.shallowCopy(e),u=[];for(o=o||{},a=0;a<e.length;a++)r=e[a],s=(function(o){return function(){n.remove(l,o),u[e.indexOf(o)]=n.toArray(arguments),0===l.length&&(t.apply(i,u),l=n.shallowCopy(e))}})(r),o._actualCallback=t,o._relatedTopics=e.filter((function(e){return e!==r})),this.subscribe(r,s,i,o)},i.unsubscribe=function(e,n,i){var o=[];return this._topics[e]?(this._topics[e]=this._topics[e].filter(t._removeSubscriber(o,n,i)),o.length>0&&this._unsubscribeRelatedTopics(o,n,i),this):this},i._unsubscribeRelatedTopics=function(e,t,n){var i,o;for(o=0;o<e.length;o++)i=e[o],this._topics[i]=this._topics[i].filter((function(e){return!(e._actualCallback===t&&e.context===n)}))},i.unsubscribeAll=function(e){var t,n,i,o;for(t in this._topics){for(n=[],o=0;o<this._topics[t].length;o++)i=this._topics[t][o],i.context!==e&&n.push(i);this._topics[t]=n}return this},i.publish=function(e,n,i){var o,r,s=(i||{}).retrospective||!1,a=this._getSubscriptionsToTrigger(e);if(s&&(this._pastEvents[e]=this._pastEvents[e]||[],this._pastEvents[e].push({args:n}),this._pastEvents[e].splice(0,this._pastEvents[e].length-t.DEFAULT_MAX_PAST_EVENTS)),!(a&&a.length>0))return this;for(r=0;r<a.length;r++)o=a[r],o.callback.apply(o.context,n);return this._topics[e]&&(this._topics[e]=this._topics[e].filter((function(e){return!e.once}))),this},i._getPastValidTopics=function(e,t){var n,i=[];if(this._pastEvents[e]&&i.push(this._pastEvents[e]),t)for(n in this._pastEvents)0===n.indexOf(e+"/")&&i.push(this._pastEvents[n]);return i},i._getSubscriptionsToTrigger=function(e){var t,n,i,o,r=Object.keys(this._topics).filter((function(t){return 0===e.indexOf(t+"/")||t===e})),s=[];for(i=0;i<r.length;i++)if(t=r[i],n=this._topics[t],t===e)s=s.concat(n);else for(o=0;o<n.length;o++)n[o]._listenToChildren&&s.push(n[o]);return s},i.flush=function(e){this._pastEvents[e]&&(this._pastEvents[e]=[])},i.destroy=function(){this._topics=null,this._pastEvents=null},Object.seal(i),Object.seal(t)})),define("module/core/js/model/datapoint/trenddatapoint",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments),this.upTrend=o}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint");n.extend(t,i),t.createFromDataPoint=function(e){return new t(e.timestamp,e.value,e.volume,e.value>0)},t.createFromDataPointUsingPreviousValue=function(e,n,i){var o,r;return 0===n?o=e.value>0:(r=i[--n].value,o=e.value>r),new t(e.timestamp,e.value,e.volume,o)},t.createFromTimeSeriesConsolidatedPointModel=t.createFromTickPointModel=function(e){return new t(e.timestamp,e.value,e.volume,void 0===e.upTrend||e.upTrend)};var o=t.prototype;return o.upTrend=null,o.toString=function(){var e="TREND";return e+="|",e+=this.date.getTime(),e+="|",e+=this.value,e+="|",e+=this.upTrend?"up":"down"},Object.seal(o),Object.seal(t)})),define("module/core/js/indicator/calculator/importedcalculators",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/log","module/core/js/model/datapoint/datapoint","module/core/js/model/datapoint/hlocdatapoint","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";var t=e("module/core/js/util/class"),n=e("module/core/js/util/functional"),i=e("module/core/js/util/log"),o=e("module/core/js/model/datapoint/datapoint"),r=e("module/core/js/model/datapoint/hlocdatapoint"),s=e("module/core/js/model/datapoint/trenddatapoint"),a={getLogger:n.returns(i)},l={};return l.indicator={},l.indicator.mvc={},l.indicator.mvc.model={},l.indicator.mvc.model.calculator={},l.indicator.mvc.model.calculator.point={},l.indicator.mvc.model.calculator.point.pricemovement={},l.indicator.mvc.model.calculator.series={},l.indicator.mvc.model.calculator.series.dmi={},l.indicator.mvc.helper={},l.indicator.mvc.helper.calculator={},l.core={},l.core.mvc={},l.core.mvc.model={},l.core.mvc.model.timeseries={},l.core.mvc.model.timeseries.calculation={},l.core.mvc.model.timeseries.point={},(function(){function e(e){this._period=e}e.prototype._period=null,Object.defineProperty(e.prototype,"period",{enumerable:!0,get:function(){return this._period},set:function(e){this._period=e}}),l.indicator.mvc.model.calculator.series.PeriodCalculatorBase=e})(),(function(){var e={};e.createSimpleCalculatedPoint=function(e,t){return new o(t.timestamp,e,t.volume)},e.createCalculatedPoint=function(e,t){return new r(t.timestamp,e,t.volume,t.highPrice,t.lowPrice,t.openPrice,t.closePrice)},l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory=Object.freeze(e)})(),(function(){function e(t,n){e.superclass.constructor.call(this,t,n)}t.extend(e,Error),l.indicator.mvc.helper.calculator.CalculatorValidationError=e})(),(function(){function e(){}e.prototype.value=null,e.prototype.downChangeEmaValue=null,e.prototype.upChangeEmaValue=null,l.indicator.mvc.model.calculator.series.RSIParameters=e})(),(function(){function e(e,t,n,i,o,r){this.upTrend=e,this.ep=t,this.hp=n,this.lp=i,this.alpha=o,this.previousCalculatedPoint=r}e.prototype.hp=null,e.prototype.upTrend=null,e.prototype.lp=null,e.prototype.alpha=null,e.prototype.ep=null,e.prototype.previousCalculatedPoint=null,l.indicator.mvc.model.calculator.series.ParabolicSarTrend=e})(),(function(){function e(e){this._calculatorValidator=e}e.prototype._calculatorValidator=null,e.prototype.calculatePoint=function(e,t){var n;if(this._calculatorValidator.validatePointsAreTypedAndNotNull(t,e),this._calculatorValidator.validatePointTimestampsMatch(t,e),0==(n=t.value+e.value))return 0;return Math.abs(t.value-e.value)/n*100},l.indicator.mvc.model.calculator.point.DXCalculator=e})(),(function(e){function t(e){this._calculatorValidator=e}t.prototype._calculatorValidator=null,t.prototype.calculatePoint=function(t,n){var i,o,r,s;return NaN,i=NaN,o=NaN,r=NaN,s=NaN,this._calculatorValidator.validatePointsAreTypedAndNotNull(t,n),this._calculatorValidator.validatePointsAreConsecutive(t,n),t instanceof e?(i=t.lowPrice,o=t.highPrice,r=n.lowPrice,s=n.highPrice):(i=t.value,o=t.value,r=n.value,s=n.value),o-s>r-i?Math.max(o-s,0):0},l.indicator.mvc.model.calculator.point.pricemovement.UpwardPriceMovementCalculator=t})(r),(function(e){function t(e){this._calculatorValidator=e}t.prototype._calculatorValidator=null,t.prototype.calculatePoint=function(t,n){var i,o,r,s;return NaN,i=NaN,o=NaN,r=NaN,s=NaN,this._calculatorValidator.validatePointsAreTypedAndNotNull(t,n),this._calculatorValidator.validatePointsAreConsecutive(t,n),t instanceof e?(i=t.lowPrice,o=t.highPrice,r=n.lowPrice,s=n.highPrice):(i=t.value,o=t.value,r=n.value,s=n.value),r-i>o-s?Math.max(r-i,0):0},l.indicator.mvc.model.calculator.point.pricemovement.DownwardPriceMovementCalculator=t})(r),(function(e){function t(e){this._calculatorValidator=e}t.prototype._calculatorValidator=null,t.prototype.calculatePoint=function(t,n){var i,o,r;return NaN,i=NaN,o=NaN,r=NaN,this._calculatorValidator.validatePointsAreTypedAndNotNull(t,n),this._calculatorValidator.validatePointsAreConsecutive(t,n),t instanceof e?(i=t.highPrice,o=t.lowPrice,r=n.closePrice):(i=t.value,o=t.value,r=n.value),Math.max(i,r)-Math.min(o,r)},l.indicator.mvc.model.calculator.point.pricemovement.TrueRangePriceMovementCalculator=t})(r),(function(e,n,i){function o(e,t,n){o.superclass.constructor.call(this,e),this._emaCalculator=t,this._dxCalculator=n}t.extend(o,n),o.prototype._emaCalculator=null,o.prototype._dxCalculator=null,Object.defineProperty(o.prototype,"totalPointsRequired",{enumerable:!0,get:function(){return Math.max(50,4*this.period)}}),o.prototype.calculatePoints=function(t,n,i){var o,r,s,a,l,u,c=[],d=0;if(!t.length||!n.length)return c;for(u=0;u<n.length;u++){for(o=n[u],r=o.timestamp,s=null;d<t.length&&(a=t[d].timestamp,a===r&&(s=t[d]),!(a>=r));d++);l=this._dxCalculator.calculatePoint(s,o),c.push(e.createSimpleCalculatedPoint(l,o))}return this._emaCalculator.calculatePoints(c,this.period,1/this.period,i)},l.indicator.mvc.model.calculator.series.dmi.AverageDirectionalMovementIndexCalculator=o})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,l.indicator.mvc.model.calculator.series.PeriodCalculatorBase,Object),(function(e,n,i){function o(e,t,n,i){o.superclass.constructor.call(this,e),this._priceMovementMACalculator=t,this._trueRangeMACalculator=n,this._calculatorValidator=i,this.period=e}t.extend(o,n),o.prototype._priceMovementMACalculator=null,o.prototype._trueRangeMACalculator=null,o.prototype._calculatorValidator=null,Object.defineProperty(o.prototype,"totalPointsRequired",{enumerable:!0,get:function(){return this._priceMovementMACalculator.totalPointsRequired}}),Object.defineProperty(o.prototype,"period",{enumerable:!0,set:function(e){o.superclass.period=e,this._priceMovementMACalculator.period=e,this._trueRangeMACalculator.period=e}}),o.prototype.calculateDirectionalMovementRatio=function(e,t){return this._calculatorValidator.validatePointTimestampsMatch(e,t),0==e.value?0:0==t.value?100:100*e.value/t.value},o.prototype.calculatePoints=function(t,n){if(!t.length)return[];var i,o,r,s,a,l,u=this._priceMovementMACalculator.calculatePoints(t,n),c=this._trueRangeMACalculator.calculatePoints(t,n),d=[],h=0;for(l=0;l<u.length;l++){for(i=u[l],o=i.timestamp,r=null;h<c.length&&(s=c[h].timestamp,s===o&&(r=c[h]),!(s>=o));h++);a=this.calculateDirectionalMovementRatio(i,r),d.push(e.createSimpleCalculatedPoint(a,i))}return d},l.indicator.mvc.model.calculator.series.dmi.DirectionalMovementIndexCalculator=o})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,l.indicator.mvc.model.calculator.series.PeriodCalculatorBase,Object),(function(e,n){function i(e,t,n){i.superclass.constructor.call(this,e),this._movingAverageCalculator=t,this._priceMovementCalculator=n,this.period=e}t.extend(i,n),i.prototype._movingAverageCalculator=null,i.prototype._priceMovementCalculator=null,Object.defineProperty(i.prototype,"totalPointsRequired",{enumerable:!0,get:function(){return Math.max(50,4*this.period)+1}}),i.prototype.calculatePoints=function(t,n){var i,o,r=0;if(i=[],o=NaN,t.length<this.totalPointsRequired&&!n)return i;for(r=1;r<t.length;r++)o=NaN,o=this._priceMovementCalculator.calculatePoint(t[r],t[r-1]),i.push(e.createSimpleCalculatedPoint(o,t[r]));return this._movingAverageCalculator.calculatePoints(i,this.period,n)},l.indicator.mvc.model.calculator.series.dmi.DirectionalMovementIndexMovingAverageCalculator=i})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,l.indicator.mvc.model.calculator.series.PeriodCalculatorBase),(function(e){function t(){this.MINIMUM_POINTS_REQUIRED=50}t.prototype.MINIMUM_POINTS_REQUIRED=null,t.prototype.calculateForPoint=function(t,n,i,o){var r,s,a=0;for(s=0,a=n;a<o+n;a++)s+=t[a].value;for(r=s;a<i;a++)s=t[a].value,r=r-r/o+s;return e.createSimpleCalculatedPoint(r,t[i-1])},t.prototype.calculatePoints=function(e,t,n){var i,o,r,s=0,a=Math.max(this.MINIMUM_POINTS_REQUIRED,4*t);if(o=[],e.length<a&&!n)return o;if(n)for(i=t;i<a&&i<=e.length;)r=this.calculateForPoint(e,s,s+i,t),o.push(r),i++;for(i=a,s;s+i<=e.length;s++)r=this.calculateForPoint(e,s,s+i,t),o.push(r);return o},l.indicator.mvc.model.calculator.series.dmi.DirectionalMovementMovingAverageCalculator=t})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory),(function(e,t){function n(){}n.LOG=null,n.LOG=t.getLogger(n),n.prototype.validatePointsAreConsecutive=function(t,i){if(t.timestamp<i.timestamp){var o;throw o="The points do now follow each other. Given pointA = '"+t+"', pointB = '"+i+"'.",n.LOG.error(o),new e(o)}},n.prototype.validatePointTimestampsMatch=function(t,i){if(t.timestamp!=i.timestamp){var o;throw o="The point timestamps do not match. Given pointA = '"+t+"', pointB = '"+i+"'.",n.LOG.error(o),new e(o)}},n.prototype.validatePointsAreTypedAndNotNull=function(t){var i=0;for(i=0;i<t.length;i++)if(!t[i]){var o;throw o="One of the points are null or not an instance of ITimeSeriesPointModel. Given points = '"+t,n.LOG.error(o),new e(o)}},l.indicator.mvc.helper.calculator.CalculatorValidationHelper=n})(l.indicator.mvc.helper.calculator.CalculatorValidationError,a),(function(e){function t(){}t.prototype.calculatePoints=function(t,n){var i,o=0,r=0,s=0;for(i=[],o=t.length-n.length,r=t.length,s=o;s<r;s++){var a,l,u,c;a=t[s],l=n[s-o],u=l.value,c=3*u-2*a.value,i.push(e.createSimpleCalculatedPoint(c,a))}return i},l.indicator.mvc.model.calculator.series.StochasticJLineCalculator=t})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory),(function(e,t){function n(){}function i(e,t){this.value=e,this.index=t}n.prototype.calculatePoints=function(t,n,o){var r,s,a=0,l=0,u=0,c=0;if(r=[],t.length<n)return r;for(a=n-1,l=t.length,u=0,s=o?new i(Number.MIN_VALUE,0):new i(Number.MAX_VALUE,0),c=0;c<l;c++)if(u=c-a,this.checkAndUpdatePoint(t[c],s,c,o),u>=0){var d,h=0;h=c-s.index,d=(a-h)/a*100,r.push(e.createSimpleCalculatedPoint(d,t[c])),u==s.index&&this.findAndUpdateNextSignificantPoint(t,s,o,u+1,u+a)}return r},n.prototype.findAndUpdateNextSignificantPoint=function(e,t,n,i,o){var r=0;for(t.index=0,t.value=n?Number.MIN_VALUE:Number.MAX_VALUE,r=i;r<=o;r++)this.checkAndUpdatePoint(e[r],t,r,n)},n.prototype.checkAndUpdatePoint=function(e,n,i,o){var r;if(r=e instanceof t?t(e).closePrice:e.value,o){var s;s=e instanceof t?t(e).highPrice:r,n.value<=s&&(n.index=i,n.value=s)}else{var a;a=e instanceof t?t(e).lowPrice:r,n.value>=a&&(n.index=i,n.value=a)}},l.indicator.mvc.model.calculator.series.AroonCalculator=n,i.prototype.index=null,i.prototype.value=null})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,r),(function(e,t){function n(){this.LAMBERTS_CONSTANT=.015}n.prototype.LAMBERTS_CONSTANT=null,n.prototype.calculatePoints=function(t,n){var i,o,r=0;if(i=[],t.length<n)return i;for(r=n-1;r<t.length;r++){var s,a,l=0;if(isNaN(o)){var u=0;for(o=0,u=0;u<n;u++)o+=this.calulateTypicalPrice(t[u]);o/=n}else o-=this.calulateTypicalPrice(t[r-n])/n,o+=this.calulateTypicalPrice(t[r])/n;for(s=0,l=r-n+1;l<=r;l++)s+=Math.abs(o-this.calulateTypicalPrice(t[l]));s/=n,a=0==s?0:(this.calulateTypicalPrice(t[r])-o)/(s*this.LAMBERTS_CONSTANT),i.push(e.createSimpleCalculatedPoint(a,t[r]))}return i},n.prototype.calulateTypicalPrice=function(e){return e instanceof t?(e.highPrice+e.lowPrice+e.closePrice)/3:e.value},l.indicator.mvc.model.calculator.series.CommoditiesChannelIndexCalculator=n})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,r),(function(e,t){function n(){}n.prototype.calculate=function(n,i,o,r){var s,a,l,u,c,d,h=0,p=0;s=[],a=!isNaN(o),l=o,u=r,c=0,h=i-1,p=0;for(var m=0;m<n.length;m++){d=n[m];var f,_,g,v,y,M,b,A;if(d instanceof t){var T;T=d,f=T.highPrice,_=T.lowPrice,g=T.closePrice}else f=_=g=d.value;if(v=f-_,y=f-u,M=u-_,y=isNaN(y)?0:y,M=isNaN(M)?0:M,b=Math.max(v,y,M),a){var E;E=b-l,A=E*(1/i)+l}else c+=b,p==h?(A=c/i,a=!0):p++;isNaN(A)||(s.push(e.createSimpleCalculatedPoint(A,d)),l=A),u=g}return s},n.prototype.calculatePoints=function(e,t){return this.calculate(e,t)},n.prototype.calculatePointsWithSeed=function(e,t,n,i){return this.calculate(e,t,n,i)},l.indicator.mvc.model.calculator.series.AverageTrueRangeCalculator=n})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,r),(function(e,t){function n(){}n.prototype.calculatePoints=function(t,n){var i,o,r,s,a,l,u=[],c=0;for(l=0;l<t.length;l++){for(i=t[l],o=i.timestamp,r=null;c<n.length&&(s=n[c].timestamp,s===o&&(r=n[c]),!(s>=o));c++);r&&(a=(i.value+r.value)/2,u.push(e.createCalculatedPoint(a,r)))}return u},l.indicator.mvc.model.calculator.series.SenkouSpanACalculator=n})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,Object),(function(e,t){function n(){}function i(e,t){this.value=e,this.index=t}n.prototype.findHighestValueIndex=function(e,n,o){var r,s=0;for(r=new i(Number.MIN_VALUE,n),s=n;s<=o;s++){var a;a=e[s]instanceof t?t(e[s]).highPrice:e[s].value,a>r.value&&(r=new i(a,s))}return r},n.prototype.findLowestValueIndex=function(e,n,o){var r,s=0;for(r=new i(Number.MAX_VALUE,n),s=n;s<=o;s++){var a;a=e[s]instanceof t?t(e[s]).lowPrice:e[s].value,a<r.value&&(r=new i(a,s))}return r},n.prototype.calculatePoints=function(n,o){var r,s,a,l=0;if(r=[],n.length<o)return r;for(s=new i(Number.MIN_VALUE,0),a=new i(Number.MAX_VALUE,0),l=0;l<n.length;l++){var u,c,d,h=0;if(h=l-o+1,u=n[l]instanceof t?t(n[l]).closePrice:n[l].value,c=n[l]instanceof t?t(n[l]).highPrice:u,d=n[l]instanceof t?t(n[l]).lowPrice:u,s.index<h?s=this.findHighestValueIndex(n,h,l):c>s.value&&(s=new i(c,l)),a.index<h?a=this.findLowestValueIndex(n,h,l):d<a.value&&(a=new i(d,l)),h>=0){var p;p=(s.value+a.value)/2,r.push(e.createCalculatedPoint(p,n[l]))}}return r},l.indicator.mvc.model.calculator.series.HighestHighLowestLowMidPointCalculator=n,i.prototype.index=null,i.prototype.value=null})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,r),(function(e){function t(){}t.prototype.calculatePoints=function(t,n){var i,o=0;if(i=[],t.length<=n)return i;for(o=n;o<t.length;o++){var r;r=t[o].value-t[o-n].value,i.push(e.createSimpleCalculatedPoint(r,t[o]))}return i},l.indicator.mvc.model.calculator.series.MomentumCalculator=t})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory),(function(e,t){function n(){}function i(e,t){this.value=e,this.index=t}n.prototype.findHighestValueIndexPair=function(e,n,o){var r,s=0;for(r=new i(Number.MIN_VALUE,n),s=n;s<=o;s++){var a;a=e[s]instanceof t?t(e[s]).highPrice:e[s].value,a>r.value&&(r=new i(a,s))}return r},n.prototype.calculatePoints=function(n,o){var r,s,a,l=0;if(r=[],n.length<o)return r;for(s=new i(Number.MIN_VALUE,0),a=new i(Number.MAX_VALUE,0),l=0;l<n.length;l++){var u,c,d,h=0;if(h=l-o+1,u=n[l]instanceof t?t(n[l]).closePrice:n[l].value,c=n[l]instanceof t?t(n[l]).highPrice:u,d=n[l]instanceof t?t(n[l]).lowPrice:u,s.index<h?s=this.findHighestValueIndexPair(n,h,l):c>s.value&&(s=new i(c,l)),a.index<h?a=this.findLowestValueIndexPair(n,h,l):d<a.value&&(a=new i(d,l)),h>=0){var p;p=s.value-a.value==0?0:-100*(s.value-u)/(s.value-a.value),r.push(e.createSimpleCalculatedPoint(p,n[l]))}}return r},n.prototype.findLowestValueIndexPair=function(e,n,o){var r,s=0;for(r=new i(Number.MAX_VALUE,n),s=n;s<=o;s++){var a;a=e[s]instanceof t?t(e[s]).lowPrice:e[s].value,a<r.value&&(r=new i(a,s))}return r},l.indicator.mvc.model.calculator.series.WilliamsPercentRCalculator=n,i.prototype.index=null,i.prototype.value=null})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,r),(function(e,t,n){function i(e,t){this.kPeriod=e,this.slowingPeriod=t}function o(e,t,n){this.maxValue=e,this.minValue=t,this.point=n}i.prototype._slowingPeriod=null,i.prototype._kPeriod=null,Object.defineProperty(i.prototype,"slowingPeriod",{enumerable:!0,get:function(){return this._slowingPeriod},set:function(e){this._slowingPeriod=e}}),Object.defineProperty(i.prototype,"kPeriod",{enumerable:!0,get:function(){return this._kPeriod},set:function(e){this._kPeriod=e}}),i.prototype.calculatePoints=function(e){var t,n,i,o;for(t=[],n=[],i=0;i+this.kPeriod<=e.length;i++){var r;this.isValidPoint(e[i])&&(r=this.calculateKIntermediatePoint(e,i,i+this.kPeriod),n.push(r))}for(o=0;o+this.slowingPeriod<=n.length;o++){var s;s=this.calculateKPoint(n,o,o+this.slowingPeriod),t.push(s)}return t},i.prototype.calculateKIntermediatePoint=function(e,n,i){var r,s,a,l=0;for(r=Number.MIN_VALUE,s=Number.MAX_VALUE,l=n;l<i;l++)if((a=e[l])&&e[l]instanceof t){var u;u=e[l],r=Math.max(r,u.highPrice),s=Math.min(s,u.lowPrice)}else a&&(r=Math.max(r,a.value),s=Math.min(s,a.value));return new o(r,s,a)},i.prototype.isValidPoint=function(e){return!(e instanceof t&&(isNaN(e.highPrice)||isNaN(e.lowPrice)))},i.prototype.calculateKPoint=function(i,o,r){var s,a,l,u,c=0;for(s=0,a=0,c=o;c<r;c++)if(l=i[c],l.point instanceof n)s+=l.point.value-l.minValue,a+=l.maxValue-l.minValue;else if(l.point instanceof t){var d;d=l.point,s+=d.closePrice-l.minValue,a+=l.maxValue-l.minValue}return u=0==a?100:100*s/a,e.createSimpleCalculatedPoint(u,l.point)},l.indicator.mvc.model.calculator.series.StochasticKLineCalculator=i,o.prototype.point=null,o.prototype.minValue=null,o.prototype.maxValue=null})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,r,o),(function(e){function t(){}t.prototype.calculatePoints=function(t,n){var i,o,r,s,a,l,u,c,d,h=0;if(i=[],o=0,r=0,l=0,u=0,t.length<n)return i;for(h=0;h<t.length;h++){if(h>=n)c=t[h-n],d=t[h],o=s-c.value+d.value,r=a-c.value*c.value+d.value*d.value;else{for(;h<n;h++)null!=(d=t[h])&&(o+=d.value,r+=d.value*d.value);h--}l=(r-o*o/n)/(n-1),l<0&&(l=0),u=Math.sqrt(l),i.push(e.createSimpleCalculatedPoint(u,d)),s=o,a=r}return i},l.indicator.mvc.model.calculator.series.StandardDeviationCalculator=t})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory),(function(e,t){function n(){}n.prototype.calculatePoints=function(t,n){var i,o,r,s,a,l=[],u=null,c=0;for(a=0;a<t.length;a++){for(i=t[a],o=i.timestamp,u=null;c<n.length&&(r=n[c].timestamp,r===o&&(u=n[c]),!(r>=o));c++);u&&(s=u.value-i.value,l.push(e.createSimpleCalculatedPoint(s,u)))}return l},l.indicator.mvc.model.calculator.series.SpreadCalculator=n})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,Object),(function(e,t){function n(){this._weighting=1/this.INITIAL_PERIOD,this.parameters=null,this.INITIAL_PERIOD=14,this._rsiPeriod=this.INITIAL_PERIOD}n.prototype.upChangeEma=null,n.prototype._weighting=null,n.prototype.parameters=null,n.prototype._rsiPeriod=null,n.prototype.INITIAL_PERIOD=null,n.prototype.downChangeEma=null,Object.defineProperty(n.prototype,"rsiPeriod",{enumerable:!0,get:function(){return this._rsiPeriod},set:function(e){this._weighting=1/e,this._rsiPeriod=e}}),n.prototype.calculatePoints=function(t){var n,i,o,r,s,a,l=0;if(n=[],l=0,null!=this.parameters)this.downChangeEma=this.parameters.downChangeEmaValue,this.upChangeEma=this.parameters.upChangeEmaValue,o=this.parameters.value;else{var u,c;if(t.length<this.rsiPeriod+1)return n;for(u=0,c=0;l<this.rsiPeriod;l++)i=t[l].value,isNaN(o)||(r=Math.max(0,o-i),u+=r,s=Math.max(0,i-o),c+=s),o=i;this.downChangeEma=u/(this.rsiPeriod-1),this.upChangeEma=c/(this.rsiPeriod-1)}for(;l<t.length;l++)i=t[l].value,r=Math.max(0,o-i),s=Math.max(0,i-o),this.downChangeEma=this.downChangeEma+this._weighting*(r-this.downChangeEma),this.upChangeEma=this.upChangeEma+this._weighting*(s-this.upChangeEma),a=0==this.upChangeEma?0:0==this.downChangeEma?100:100-100/(1+this.upChangeEma/this.downChangeEma),n.push(e.createSimpleCalculatedPoint(a,t[l])),o=i;return this.parameters=null,n},l.indicator.mvc.model.calculator.series.RelativeStrengthIndexCalculator=n})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,l.indicator.mvc.model.calculator.series.RSIParameters),(function(e,t,n,i){function o(){this._accelerationLimit=.2,this._accelerationStep=.02,this._initialAcceleration=.02,this._period=3}o.prototype._accelerationStep=null,o.prototype._accelerationLimit=null,o.prototype._storedTrend=null,o.prototype._period=null,o.prototype._initialAcceleration=null,Object.defineProperty(o.prototype,"accelerationLimit",{enumerable:!0,get:function(){return this._accelerationLimit},set:function(e){this._accelerationLimit=e}}),Object.defineProperty(o.prototype,"initialAcceleration",{enumerable:!0,get:function(){return this._initialAcceleration},set:function(e){this._initialAcceleration=e}}),Object.defineProperty(o.prototype,"period",{enumerable:!0,get:function(){return this._period
},set:function(e){this._period=e}}),Object.defineProperty(o.prototype,"accelerationStep",{enumerable:!0,get:function(){return this._accelerationStep},set:function(e){this._accelerationStep=e}}),o.prototype.calculatePoints=function(e){var t;return t=e[0],t instanceof n?this.calculatePointsForConsolidatedDataPoints(e):this.calculatePointsForTickDataPoints(e)},o.prototype.calculatePointsForTickDataPoints=function(t){var n,i,o,r,s,a=0;for(n=[],i=t.length>1?t[1].value:NaN,o=!0,r=this.initialAcceleration,s=t.length>1?t[1].value:NaN,a=2;a<t.length;a++){var l,u,c,d,h;l=t[a].value,u=t[a-1].value,c=t[a-2].value,i+=r*(s-i),d=!1,o?l<i&&(o=!1,d=!0):l>i&&(o=!0,d=!0),d?(i=s,s=l,r=this.initialAcceleration):o?(l>s&&(s=l,(r+=this.accelerationStep)>this.accelerationLimit&&(r=this.accelerationLimit)),u<i&&(i=u),c<i&&(i=c)):(l<s&&(s=l,(r+=this.accelerationStep)>this.accelerationLimit&&(r=this.accelerationLimit)),u>i&&(i=u),c>i&&(i=c)),h=e.createFromTickPointModel(t[a]),h.value=i,h.upTrend=o,h.alpha=r,h.currentLowPrice=s,h.currentHighPrice=s,n.push(h)}return n},o.prototype.calculatePointsForConsolidatedDataPoints=function(t){var n,i,o,r,s,a,l=0;for(n=[],i=t.length>1?t[1].lowPrice:NaN,o=!0,r=this.initialAcceleration,s=t.length>1?t[0].highPrice:NaN,a=t.length>1?t[0].lowPrice:NaN,l=2;l<t.length;l++){var u,c,d,h,p,m,f,_;u=t[l].lowPrice,c=t[l].highPrice,d=t[l-1].lowPrice,h=t[l-2].lowPrice,p=t[l-1].highPrice,m=t[l-2].highPrice,i+=o?r*(s-i):r*(a-i),f=!1,o?u<i&&(o=!1,f=!0,i=s,a=u,r=this.initialAcceleration):c>i&&(o=!0,f=!0,i=a,s=c,r=this.initialAcceleration),f||(o?(c>s&&(s=c,(r+=this.accelerationStep)>this.accelerationLimit&&(r=this.accelerationLimit)),d<i&&(i=d),h<i&&(i=h)):(u<a&&(a=u,(r+=this.accelerationStep)>this.accelerationLimit&&(r=this.accelerationLimit)),p>i&&(i=p),m>i&&(i=m))),_=e.createFromTimeSeriesConsolidatedPointModel(t[l]),_.value=i,_.upTrend=o,_.alpha=r,_.currentLowPrice=a,_.currentHighPrice=s,n.push(_)}return n},l.indicator.mvc.model.calculator.series.ParabolicSarCalculator=o})(s,0,r,l.indicator.mvc.model.calculator.series.ParabolicSarTrend),(function(e,t){function n(){}n.prototype.calculatePoints=function(n,i){var o,r,s,a,l,u,c,d=0,h=0,p=0;if(o=[],n.length<i)return o;for(d=i-1,r=0,s=0,l=[],c=0;c<d;c++)l[c]=0;for(l.fixed=!0,u=[],c=0;c<d;c++)l[c]=null;for(l.fixed=!0,h=0,p=n.length,c=0;c<p;c++){var m,f,_,g,v,y;if(n[c]instanceof t?(_=t(n[c]),g=_.closePrice,v=_.highPrice,y=_.lowPrice):(g=n[c].value,v=g,y=g),m=(v+y+g)/3,f=m*n[c].volume,c>0){var M;if(M=m>a,M?r+=f:s+=f,c>=d){var b,A;b=l[h],A=u[h],A?r-=b:s-=b;var T;T=0==s?100:100-100/(1+r/s),T<0&&(T=0),o.push(e.createSimpleCalculatedPoint(T,n[c]))}l[h]=f,u[h]=M,h++,h==d&&(h=0)}a=m}return o},l.indicator.mvc.model.calculator.series.MoneyFlowIndexCalculator=n})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,r),(function(e){function t(){}t.prototype.calculatePoints=function(e,t,n,i){var o,r,s,a=0,l=Math.max(50,4*t);if(r=[],e.length<l&&!i)return r;if(i)for(o=t;o<l&&o<=e.length;)s=this.calculateEMAForPoint(e,a,a+o,t,n),r.push(s),o++;for(o=l,a;a+o<=e.length;a++)s=this.calculateEMAForPoint(e,a,a+o,t,n),r.push(s);return r},t.prototype.calculateEMAForPoint=function(t,n,i,o,r){var s,a,l=0;for(s=0,l=n;l<o+n;l++)s+=t[l].value;for(a=s/o,l;l<i;l++)a+=r*(t[l].value-a);return e.createSimpleCalculatedPoint(a,t[i-1])},l.indicator.mvc.model.calculator.series.ExponentialMovingAverageCalculator=t})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory),(function(e,t){function n(e,t){this._movingAverageCalculator=e,this._standardDeviationCalculator=t}n.LOG=null,n.LOG=t.getLogger(n),n.prototype._movingAverageCalculator=null,n.prototype._standardDeviationCalculator=null,n.prototype.calculatePoints=function(t,i,o){var r,s,a,l=0;if(r=[],t.length<i)return r;if(s=this._movingAverageCalculator.calculatePoints(t,i),a=this._standardDeviationCalculator.calculatePoints(t,i),a.length!=s.length){var u;throw u="The # of standard deviation points("+a.length+") must be the same as the # of moving average points("+s.length+")",n.LOG.error(u),new Error(u)}for(l=0;l<a.length;l++){var c,d,h;c=a[l],d=s[l],h=Number(d.value)+o*Number(c.value),r.push(e.createSimpleCalculatedPoint(h,c))}return r},l.indicator.mvc.model.calculator.series.BollingerPositiveCalculator=n})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,a),(function(e,t){function n(e,t){this._movingAverageCalculator=e,this._standardDeviationCalculator=t}n.LOG=null,n.LOG=t.getLogger(n),n.prototype._movingAverageCalculator=null,n.prototype._standardDeviationCalculator=null,n.prototype.calculatePoints=function(t,i,o){var r,s,a,l=0;if(r=[],t.length<i)return r;if(s=this._movingAverageCalculator.calculatePoints(t,i),a=this._standardDeviationCalculator.calculatePoints(t,i),a.length!=s.length){var u;throw u="The # of standard deviation points("+a.length+") must be the same as the # of moving average points("+s.length+")",n.LOG.error(u),new Error(u)}for(l=0;l<a.length;l++){var c,d,h;c=a[l],d=s[l],h=Number(d.value)-o*Number(c.value),r.push(e.createSimpleCalculatedPoint(h,c))}return r},l.indicator.mvc.model.calculator.series.BollingerNegativeCalculator=n})(l.core.mvc.model.timeseries.calculation.CalculatedTimeSeriesPointModelFactory,a),l.indicator.mvc})),define("module/core/js/indicator/calculator/importedcalculatormodels",["module/core/js/indicator/calculator/importedcalculators"],(function(e){"use strict";return e.model.calculator})),define("module/core/js/model/datapoint/clouddatapoint",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/core/js/util/math"],(function(e){"use strict";function t(e,n,i){var r=o.isNumber(n)?n:i;t.superclass.constructor.call(this,e,r,0),this.valueA=n,this.valueB=i}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/core/js/util/math");n.extend(t,i),t.createVirtualIntersection=function(e,n){var i=new t(Date.now(),n,n);return i.accTime=e,i};var r=t.prototype;return r.valueA=null,r.valueB=null,r.isIntersection=function(){return this.valueA===this.valueB},r.toString=function(){var e="CLOUD";return e+="|",e+=this.date.getTime(),e+="|",e+=this.valueA,e+="|",e+=this.valueB},r.valueEquals=function(e){return this.valueA===e.valueA&&this.valueB===e.valueB},Object.seal(r),t})),define("module/indicators/js/calculator/arooncloudcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/model/datapoint/clouddatapoint"],(function(e){"use strict";function t(){this._aroonCalculator=new n.series.AroonCalculator}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/model/datapoint/clouddatapoint"),o=t.prototype;return o._aroonCalculator=null,o.calculatePoints=function(e,t){var n=this._aroonCalculator.calculatePoints(e,t,!0),i=this._aroonCalculator.calculatePoints(e,t,!1);return this._convertToCloudPoints(n,i)},o._convertToCloudPoints=function(e,t){var n,o,r=[];for(o=0;o<e.length;o++)n=new i(e[o].timestamp,e[o].value,t[o].value),r.push(n);return r},Object.seal(o),t})),define("module/indicators/js/calculator/aroondowncalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels"],(function(e){"use strict";function t(){this._aroonCalculator=new n.series.AroonCalculator}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=t.prototype;return i._aroonCalculator=null,i.calculatePoints=function(e,t){return this._aroonCalculator.calculatePoints(e,t,!1)},Object.seal(i),t})),define("module/indicators/js/calculator/aroonupcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels"],(function(e){"use strict";function t(){this._aroonCalculator=new n.series.AroonCalculator}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=t.prototype;return i._aroonCalculator=null,i.calculatePoints=function(e,t){return this._aroonCalculator.calculatePoints(e,t,!0)},Object.seal(i),t})),define("module/core/js/indicator/calculator/importedcalculatorhelpers",["module/core/js/indicator/calculator/importedcalculators"],(function(e){"use strict";return e.helper.calculator})),define("module/indicators/js/enum/directionalindexstyleenum",["require","module/core/js/util/object"],(function(e){"use strict";var t=e("module/core/js/util/object"),n={};return n.LINE=0,n.HISTOGRAM=1,t.recursiveFreeze(n)})),define("module/indicators/js/calculator/minusdirectionalindexcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/indicator/calculator/importedcalculatorhelpers","module/indicators/js/enum/directionalindexstyleenum","module/core/js/util/object"],(function(e){"use strict";function t(){var e=new i.CalculatorValidationHelper,o=new n.series.dmi.DirectionalMovementMovingAverageCalculator,r=new n.point.pricemovement.TrueRangePriceMovementCalculator(e),s=new n.point.pricemovement.DownwardPriceMovementCalculator(e),a=new n.series.dmi.DirectionalMovementIndexMovingAverageCalculator(t.DEFAULT_PERIOD,o,r),l=new n.series.dmi.DirectionalMovementIndexMovingAverageCalculator(t.DEFAULT_PERIOD,o,s);this._calculator=new n.series.dmi.DirectionalMovementIndexCalculator(t.DEFAULT_PERIOD,l,a,e)}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/indicator/calculator/importedcalculatorhelpers"),o=e("module/indicators/js/enum/directionalindexstyleenum"),r=e("module/core/js/util/object");t.DEFAULT_PERIOD=14,t.create=function(){return new t};var s=t.prototype;return s._calculator=null,s.calculatePoints=function(e,t,n,i){return r.isDefined(n)&&n!==o.LINE?[]:(this._calculator.period=t,this._calculator.calculatePoints(e,i))},Object.seal(s),t})),define("module/indicators/js/calculator/plusdirectionalindexcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/indicator/calculator/importedcalculatorhelpers","module/indicators/js/enum/directionalindexstyleenum","module/core/js/util/object"],(function(e){"use strict";function t(){var e=new i.CalculatorValidationHelper,o=new n.series.dmi.DirectionalMovementMovingAverageCalculator,r=new n.point.pricemovement.TrueRangePriceMovementCalculator(e),s=new n.point.pricemovement.UpwardPriceMovementCalculator(e),a=new n.series.dmi.DirectionalMovementIndexMovingAverageCalculator(t.DEFAULT_PERIOD,o,r),l=new n.series.dmi.DirectionalMovementIndexMovingAverageCalculator(t.DEFAULT_PERIOD,o,s);this._calculator=new n.series.dmi.DirectionalMovementIndexCalculator(t.DEFAULT_PERIOD,l,a,e)}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/indicator/calculator/importedcalculatorhelpers"),o=e("module/indicators/js/enum/directionalindexstyleenum"),r=e("module/core/js/util/object");t.DEFAULT_PERIOD=14,t.create=function(){return new t};var s=t.prototype;return s._calculator=null,s.calculatePoints=function(e,t,n,i){return r.isDefined(n)&&n!==o.LINE?[]:(this._calculator.period=t,this._calculator.calculatePoints(e,i))},Object.seal(s),Object.seal(t)})),define("module/indicators/js/calculator/averagedirectionalindexcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/indicator/calculator/importedcalculatorhelpers","module/indicators/js/calculator/minusdirectionalindexcalculator","module/indicators/js/calculator/plusdirectionalindexcalculator"],(function(e){"use strict";function t(){var e=new i.CalculatorValidationHelper,s=new n.series.ExponentialMovingAverageCalculator,a=new n.point.DXCalculator(e);this._minusDirectionalIndexCalculator=new o,this._plusDirectionalIndexCalculator=new r,this._adxCalculator=new n.series.dmi.AverageDirectionalMovementIndexCalculator(t.DEFAULT_PERIOD,s,a)}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/indicator/calculator/importedcalculatorhelpers"),o=e("module/indicators/js/calculator/minusdirectionalindexcalculator"),r=e("module/indicators/js/calculator/plusdirectionalindexcalculator");t.DEFAULT_PERIOD=14;var s=t.prototype;return s._adxCalculator=null,s._minusDirectionalIndexCalculator=null,s._plusDirectionalIndexCalculator=null,s.calculatePoints=function(e,t,n){var i=this._minusDirectionalIndexCalculator.calculatePoints(e,t,void 0,n),o=this._plusDirectionalIndexCalculator.calculatePoints(e,t,void 0,n);return this._adxCalculator.period=t,this._adxCalculator.calculatePoints(i,o,n)},Object.seal(s),t})),define("module/indicators/js/calculator/simplemovingaveragecalculator",["require","lodash","module/core/js/model/datapoint/datapoint","module/core/js/util/math"],(function(e){"use strict";function t(){}var n=e("lodash"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/core/js/util/math");t.create=function(){return new t};var r=t.prototype;return r.calculatePoints=function(e,t){var r,s,a,l,u,c=[];if(e.length<t)return c;for(u=0;u+t<=e.length;u++)l=u+t-1,s=e.slice(u,u+t),a=n.map(s,this._getPrice),r=o.mean(a),c.push(new i(e[l].timestamp,r));return c},r._getPrice=function(e){return e.value},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/medianpricemovingaveragecalculator",["require","module/core/js/util/class","module/core/js/model/datapoint/hlocdatapoint","module/indicators/js/calculator/simplemovingaveragecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/hlocdatapoint"),o=e("module/indicators/js/calculator/simplemovingaveragecalculator");n.extend(t,o),t.create=function(){return new t};var r=t.prototype;return r._getPrice=function(e){return e instanceof i?(e.highPrice+e.lowPrice)/2:e.value},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/awesomeoscillatorcalculator",["require","module/core/js/util/math","module/indicators/js/calculator/medianpricemovingaveragecalculator","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";function t(){this._shortMovingAverageCalculator=i.create(),this._longMovingAverageCalculator=i.create()}var n=e("module/core/js/util/math"),i=e("module/indicators/js/calculator/medianpricemovingaveragecalculator"),o=e("module/core/js/model/datapoint/trenddatapoint"),r=t.prototype;return r._shortMovingAverageCalculator=null,r._longMovingAverageCalculator=null,r.calculatePoints=function(e,t,i){var r,s,a,l,u=[];if(!e||!n.isNumber(t)||!n.isNumber(i))return u;for(s=this._shortMovingAverageCalculator.calculatePoints(e,t),a=this._longMovingAverageCalculator.calculatePoints(e,i),r=Math.min(s.length,a.length),s=s.slice(-r),a=a.slice(-r),u=s.concat(),l=0;l<r;l++)u[l].value=s[l].value-a[l].value;return u.map(o.createFromDataPointUsingPreviousValue)},Object.seal(r),Object.seal(t)})),define("module/core/js/view/renderer/barrenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractblockrenderer","module/core/js/model/block","module/core/js/util/class","module/core/js/util/oop","module/core/js/view/projection/ordinals/relativexmodelprojection","module/core/js/util/svg","module/core/js/view/projection/xyprojection","module/core/js/view/projection/ordinals/ymodelprojection"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractblockrenderer"),o=e("module/core/js/model/block"),r=e("module/core/js/util/class"),s=e("module/core/js/util/oop"),a=e("module/core/js/view/projection/ordinals/relativexmodelprojection"),l=e("module/core/js/util/svg"),u=e("module/core/js/view/projection/xyprojection"),c=e("module/core/js/view/projection/ordinals/ymodelprojection");r.extend(t,i),t.BAR_PROPORTIONAL_WIDTH=.7;var d=t.prototype;return d._x=null,d._width=null,d._setVerticalDimensions=s.abstractMethod,d._barClass=function(e){var t=["point","bar"];return"boolean"==typeof e.upTrend&&t.push(e.upTrend?"up":"down"),t.join(" ")},d._createProjection=function(e){var t=a.createForShowingTimeInX(this._instrumentModel.getActiveResolution().period),n=c.createForShowingValueInY(e),i=n.roundValue,o=n.visibleRoundValue,r=n.getForwardsProjectionScale();return this._setVerticalDimensions=function(e){var t=r(Math.max(e.value,0)),n=r(Math.min(e.value,0));this.setAttribute("height",o(Math.abs(t-n))),this.setAttribute("y",i(n))},new u(t,n)},d.initDom=function(){return this.dContainer.classed("bars",!0),this},d.setVisibleWindow=function(e){t.superclass.setVisibleWindow.apply(this,arguments);var n=this._getForwardsProjectionInX(),i=this._projection.inX.roundValue,o=this._projection.inX.visibleRoundValue,r=n(this._indicator.resolution.period);return this._x=i(-r*(t.BAR_PROPORTIONAL_WIDTH/2)),this._width=o(r*t.BAR_PROPORTIONAL_WIDTH),this},d._useBlock=function(e){var t=this._accessor(e);return t&&0!==t.length},d._initNewBlocks=function(e){this._createNewBars(this._selectPointsInBlocks(e))},d._refreshChangedBlocks=function(e){var t=this._dBlocks.data(e,o.indexJoin),n=this._selectPointsInBlocks(t);this._setValueOfBars(n),this._createNewBars(n)},d._createNewBars=function(e){var t=e.enter().append("svg:rect").attr("x",this._x).attr("width",this._width);this._setValueOfBars(t),this._positionBarsHorizontally(t)},d._setValueOfBars=function(e){e.attr("class",this._barClass).each(this._setVerticalDimensions)},d._replot=function(e,t){t&&this._setValueOfBars(this._dBlocks.selectAll(".point"))},d._positionBarsHorizontally=function(e){var t=this._getForwardsProjectionInX(),i=this._projection.inX.roundValue,o=this._isRelative();return e.attr("transform",(function(e){var r=n.select(this).parent().datum(),s=o&&r?t(r.accStart):0;return l.svgTranslateAttrX(i(t(e.accTime)-s))}))},Object.seal(d),Object.seal(t)})),define("module/core/js/indicator/input/indicatorinput",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/event/subscribable"],(function(e){"use strict";function t(e,t,n){this._inputPointType=e,this._outputPointType=t,this._numberOfTrailingPoints=n}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/event/subscribable");n.extend(t,o);var r=t.prototype;return t.INDICATOR_INPUT="indicatorInput",r._inputPointType=null,r._outputPointType=null,r._numberOfTrailingPoints=0,r.startRequestingPointsVia=i.empty,r.stopRequestingPointsVia=i.empty,r.collatePointsForBlocks=i.empty,r.getInputPointType=i.getter("_inputPointType"),Object.seal(r),t})),define("module/indicators/js/input/blocksinput",["require","module/core/js/util/array","module/core/js/model/blocks","module/core/js/util/class","module/core/js/indicator/input/indicatorinput","module/core/js/model/instrumentresolutionevents"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/array"),i=e("module/core/js/model/blocks"),o=e("module/core/js/util/class"),r=e("module/core/js/indicator/input/indicatorinput"),s=e("module/core/js/model/instrumentresolutionevents");o.extend(t,r);var a=t.prototype;return a._hcdClient=null,a.startRequestingPointsVia=function(e){e.on(s.BLOCKS_POINTS_ADDED+"-"+this._inputPointType,this._handleBlocksPointsAdded,this),this._hcdClient=e.hcdClient},a.stopRequestingPointsVia=function(e){e.un(null,this)},a.collatePointsForBlocks=function(e){var t,n=e.filter(this._hasInput,this),i=e.filter(this._hasNoOutput,this);if(0!==i.length){if(n.length<e.length)return void this._collatePartiallyLoadedBlocks(i);t=this._getInputPointsForBlocks(i),null===t?this._collatePartiallyLoadedBlocks(i):this._fireInput(t,i)}},a._getInputPointsForBlocks=function(e){if(0==e.length)return null;var t=i.getTrailingPoints(n.firstOf(e),this._inputPointType,this._numberOfTrailingPoints);return this._hasInput(n.firstOf(e))&&(!0===t.outOfBlocks||t.points.length>=this._numberOfTrailingPoints)?t.points.concat(this._inputPointsForBlocks(e)):null},a._collatePartiallyLoadedBlocks=function(e){this._fireBlocksWithEnoughTrailingPoints(e),this._hcdClient.loadTrailingPoints(n.firstOf(e),this._inputPointType,this._numberOfTrailingPoints),this._hcdClient.loadDataForBlocks(e)},a._fireBlocksWithEnoughTrailingPoints=function(e){var t,n=e.filter(this._hasInput,this),o=[],r=0;for(t=0;t<n.length;t++)r>=this._numberOfTrailingPoints&&o.push(n[t]),r+=i.countPoints([n[t]],this._inputPointType);this._fireInput(this._inputPointsForBlocks(n),o)},a._fireInput=function(e,t){e.length>0&&t.length>0&&this.fire(r.INDICATOR_INPUT,e,t)},a._hasInput=function(e){return e.hasPointType(this._inputPointType)},a._hasNoOutput=function(e){return!e.points[this._outputPointType]},a._inputPointsForBlocks=function(e){return i.getPointsForBlocks(e,this._inputPointType)},a._handleBlocksPointsAdded=function(e){var t=e.concat(this._getAffectedBlocks(e)),n=this._getInputPointsForBlocks(t);n?this._fireInput(n,t):this._fireBlocksWithEnoughTrailingPoints(t)},a._getAffectedBlocks=function(e){for(var t=[],i=n.lastOf(e);i&&i.next&&i.next.loading.loaded&&this._hasNoOutput(i.next);)i=i.next,t.push(i);return t},Object.seal(a),t})),define("module/indicators/js/calculator/chaikinvolatilitycalculator",["require","module/core/js/model/datapoint/datapoint"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/datapoint/datapoint"),i=t.prototype;return i.calculatePoints=function(e,t,i){var o,r,s=0,a=e[s],l=a.highPrice-a.lowPrice,u=l,c=2/(t+1),d=[],h=[];for(s=1;s<t;s++)a=e[s],l=a.highPrice-a.lowPrice,u+=c*(l-u);for(s=t,this.addEMAValue(u,i,h),s;s<e.length;s++)a=e[s],l=a.highPrice-a.lowPrice,u+=c*(l-u),this.addEMAValue(u,i,h),s>=t+i-1&&(o=h[0],r=0!==o?100*(u-o)/o:0,d.push(new n(e[s].timestamp,r,e[s].volume)));return d},t.prototype.addEMAValue=function(e,t,n){n.push(e),n.length>t+1&&n.shift()},Object.seal(i),Object.seal(t)})),define("module/core/js/indicator/calculator/timedisplacedcalculator",["require","lodash","module/core/js/model/blocks","module/core/js/util/functional","module/core/js/util/oop"],(function(e){"use strict";function t(){}var n=e("lodash"),i=e("module/core/js/model/blocks"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/oop"),s=o.totalPlucker("points","prices","points"),a=o.plucker("date"),l=t.prototype;return l.isDisplaced=!0,l._consolidationTimezoneOffset=null,l._futureDisplaceFunc=o.identity,l.withConsolidationTimezoneOffset=o.setter("_consolidationTimezoneOffset"),l.withDisplacementIterator=function(e){return this._futureDisplaceFunc=o.cache(e.next.bind(e),o.invoker("getTime"),500),this},l.calculatePoints=function(){var e=Array.prototype.slice.call(arguments),t=this._calculate.apply(this,e).filter(o.identity);return"boolean"==typeof e[e.length-1]&&e.pop(),t.length>0&&(e[0]=t,t=this._displacePoints.apply(this,e)),t},l._displacePoints=function(e){var t=n.last(arguments),i=this._calculateDisplacement.apply(this,arguments);return i>0?this._displacePointsIntoFuture(e,i,t):i<0?this._displacePointsIntoPast(e,-i,t):e},l._displacePointsIntoFuture=function(e,t,i){var o,r,s,a=this._getFutureTimestamps(e,t,i);for(r=0;r<e.length;r++){if((s=r+t)<a.length)e[r].date=a[s];else{if(!o)for(s-=a.length,o=n.last(a);s--;)o=this._futureDisplaceFunc(o,this._consolidationTimezoneOffset);e[r].date=this._futureDisplaceFunc(o,this._consolidationTimezoneOffset)}o=e[r].date}return e},l._getFutureTimestamps=function(e,t,o){function r(e){return e.date.getTime()>n.last(c).getTime()}for(var l,u=i.findContainingBlock(n.last(e),o,!1),c=e.map(a);t>0&&u;)l=s(u),l&&(l=l.filter(r).map(a),t-=l.length,c=c.concat(l)),u=i.getSucceedingBlockWithPoints(u,s);return c},l._displacePointsIntoPast=function(e,t,n){var i,o,r=this._getPastTimestamps(e,t,n),s=[];for(i=1;i<=e.length;i++)(o=i+t)<=r.length&&(e[e.length-i].date=r[r.length-o],s.unshift(e[e.length-i]));return s},l._getPastTimestamps=function(e,t,o){function r(e){return e.date.getTime()<n.first(c).getTime()}for(var l,u=i.findContainingBlock(n.first(e),o,!1),c=e.map(a);t>0&&u;)l=s(u),l&&(l=l.filter(r).map(a),t-=l.length,c=l.concat(c)),u=i.getPrecedingBlockWithPoints(u,s);return c},l._calculate=r.abstractMethod,l._calculateDisplacement=r.abstractMethod,Object.seal(l),Object.seal(t)})),define("module/indicators/js/calculator/chikouspancalculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/core/js/indicator/calculator/timedisplacedcalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/core/js/indicator/calculator/timedisplacedcalculator");n.extend(t,o);var r=t.prototype;return r._calculate=function(e){return e.map(i.fromOtherPoint)},r._calculateDisplacement=function(e,t){return-t},Object.seal(r),t})),define("module/core/js/view/renderer/cloudrenderer",["require","module/core/js/view/renderer/abstractprojectedrenderer","module/core/js/util/array","module/core/js/model/blocks","module/core/js/util/browsercapabilities","module/core/js/util/class","module/core/js/model/datapoint/clouddatapoint","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/model/instrumentmodelevents","module/core/js/view/projection/ordinals/screenprojection","module/core/js/view/projection/ordinals/timeoffsetprojection","module/core/js/model/visibledaterangeevents","module/core/js/view/projection/ordinals/xmodelprojection","module/core/js/view/projection/xyprojection","module/core/js/view/projection/ordinals/ymodelprojection"],(function(e){"use strict";function t(e,n,i,r,s){t.superclass.constructor.apply(this,arguments),this._pointType=s,this._accessor=o.getPointTypeAccessor(s)}var n=e("module/core/js/view/renderer/abstractprojectedrenderer"),i=e("module/core/js/util/array"),o=e("module/core/js/model/blocks"),r=e("module/core/js/util/browsercapabilities"),s=e("module/core/js/util/class"),a=e("module/core/js/model/datapoint/clouddatapoint"),l=e("module/core/js/util/functional"),u=e("module/core/js/util/geometry"),c=e("module/core/js/model/instrumentmodelevents"),d=e("module/core/js/view/projection/ordinals/screenprojection"),h=e("module/core/js/view/projection/ordinals/timeoffsetprojection"),p=e("module/core/js/model/visibledaterangeevents"),m=e("module/core/js/view/projection/ordinals/xmodelprojection"),f=e("module/core/js/view/projection/xyprojection"),_=e("module/core/js/view/projection/ordinals/ymodelprojection");s.extend(t,n);var g=t.prototype;return g._dCloudSections=null,g._createProjection=function(e){var t,n;return r.getInstance().supportsSvgNonScalingStroke()?(t=m.createForShowingTimeInX(this._instrumentModel.getActiveResolution().period),n=_.createForShowingValueInY(e)):(t=new h,n=new d),new f(t,n)},g.startRedrawingBasedOnChangesInVisibleWindow=function(){return t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._instrumentModel.on(c.BLOCKS_POINTS_ADDED+"-"+this._pointType,this.renderOnFrameEnd,this),this._visibleWindow.visibleDateRange.on(p.VISIBLE_BLOCKS_CHANGED,this._redrawIfNewBlocks,this),this},g.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._instrumentModel.un(null,this),t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this)},g.initDom=function(){return this.dContainer.classed("cloud",!0).classed(this._pointType,!0),this._dCloudSections=[],this},g.destroy=function(){this._removePolylines(),this._dCloudSections=null,t.superclass.destroy.call(this)},g._replot=function(e,t){this.renderOnFrameEnd()},g._redrawIfNewBlocks=function(e){e&&this.renderOnFrameEnd()},g.render=function(){var e=this.getPointsToRender();e=this._insertVirtualIntersections(e.allPoints,e.pointsWithA,e.pointsWithB),this._removePolylines(),this._generateCloudSections(e)},g._createPolylineCoordinate=function(e,t){var n=this._projection.inX.roundValue,i=this._projection.inX.getForwardsProjectionScale(this._visibleWindow,this._visibleWindow.getXScale()),o=this._projection.inY.roundValue,r=this._projection.inY.getForwardsProjectionScale(this._visibleWindow,this._visibleWindow.y);return n(i(e))+","+o(r(t))},g._createPolyline=function(e,t){var n=this.dContainer.append("svg:polyline").attr("points",e.join(" ")).classed("line",!0);t&&n.classed(t,!0),this._dCloudSections.push(n)},g._removePolylines=function(){this._dCloudSections.forEach(l.invoker("remove")),this._dCloudSections=[]},g.getPointsToRender=function(){var e,t=this._visibleWindow.visibleDateRange.getVisibleBlocks(this._indicator.epic,this._indicator.resolution),n=o._previousPointBefore(i.firstOf(t),this._accessor),r=o._nextPointAfter(i.lastOf(t),this._accessor),s=i.flatten(t.map(this._accessor)),a=[],l=[];for(n&&s.unshift(n),r&&s.push(r),e=0;e<s.length;e++)null!==s[e].valueA&&a.push(s[e]),null!==s[e].valueB&&l.push(s[e]);return{allPoints:s,pointsWithA:a,pointsWithB:l}},g._insertVirtualIntersections=function(e,t,n){var i,o,r,s,l,c=1;for(s=1;s<t.length;s++)if(null!==(i=this._getSegmentCover(t[s-1].accTime,t[s].accTime,n,c)))for(c=i[1]-1,l=i[0];l<i[1];l++)(o=u.lineSegmentsIntersection(t[s-1].accTime,t[s-1].valueA,t[s].accTime,t[s].valueA,n[l-1].accTime,n[l-1].valueB,n[l].accTime,n[l].valueB))&&(r=Math.max(e.indexOf(t[s-1]),e.indexOf(n[l-1]))+1,e.splice(r,0,a.createVirtualIntersection(o.x,o.y)));return e},g._getSegmentCover=function(e,t,n,o){var r,s=!1,a=!1,l=o||1,u=n[l-1].accTime,c=i.lastOf(n).accTime;if(t<u||e>=c)return null;for(r=l;r<n.length&&(u=n[r-1].accTime,c=n[r].accTime,a=c>=e&&u<t,!s&&a&&(s=!0,l=r),!s||a);r++);return s?[l,r]:null},g._generateCloudSections=function(e){var t,n,o,r,s=[],a=[],l=!0;for(t=function(e){var t=s;e&&t.push(this._createPolylineCoordinate(e.accTime,e.value)),i.inPlaceConcat(t,a),n&&t.push(this._createPolylineCoordinate(n.accTime,n.value)),t.length>=3&&this._createPolyline(t,l?"aIsOverB":"bIsOverA")},r=0;r<e.length;r++)e[r].isIntersection()?(o!==n&&(t.call(this,e[r]),s=[],a=[]),n=e[r]):(null!==e[r].valueA&&s.push(this._createPolylineCoordinate(e[r].accTime,e[r].valueA)),null!==e[r].valueB&&a.unshift(this._createPolylineCoordinate(e[r].accTime,e[r].valueB)),null!==e[r].valueA&&null!==e[r].valueB&&(l=e[r].valueA>=e[r].valueB)),o=e[r];t.call(this)},Object.seal(g),Object.seal(t)})),define("module/indicators/js/calculator/dpodisplacedmovingaveragecalculator",["require","module/core/js/util/class","module/indicators/js/calculator/simplemovingaveragecalculator","module/core/js/indicator/calculator/timedisplacedcalculator"],(function(e){"use strict";function t(){this._movingAverageCalculator=new i}var n=e("module/core/js/util/class"),i=e("module/indicators/js/calculator/simplemovingaveragecalculator"),o=e("module/core/js/indicator/calculator/timedisplacedcalculator");n.extend(t,o);var r=t.prototype;return r._movingAverageCalculator=null,r._calculate=function(e,t){return this._movingAverageCalculator.calculatePoints(e,t)},r._calculateDisplacement=function(e,t){return Math.floor(t/2)+1},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/dpocalculator",["require","module/core/js/util/class","module/indicators/js/calculator/dpodisplacedmovingaveragecalculator","module/core/js/util/functional","module/core/js/indicator/calculator/timedisplacedcalculator","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";function t(){this._dpoMovingAverageCalculator=new i}var n=e("module/core/js/util/class"),i=e("module/indicators/js/calculator/dpodisplacedmovingaveragecalculator"),o=e("module/core/js/util/functional"),r=e("module/core/js/indicator/calculator/timedisplacedcalculator"),s=e("module/core/js/model/datapoint/trenddatapoint");n.extend(t,r);var a=t.prototype;return a._dpoMovingAverageCalculator=null,a.withDisplacementIterator=function(e){return this._dpoMovingAverageCalculator.withDisplacementIterator(e),this},a.withConsolidationTimezoneOffset=function(e){return this._dpoMovingAverageCalculator.withConsolidationTimezoneOffset(e),this},a._calculate=function(e,t,n){for(var i,o,r,a=this._dpoMovingAverageCalculator.calculatePoints(e,t,n),l=[],u=0,c=0;u<e.length&&c<a.length;)i=e[u].timestamp-a[c].timestamp,0===i?(o=e[u].value-a[c].value,r=new s(e[u].timestamp,o,e[u].volume,o>0),l.push(r),u++,c++):i>0?c++:i<0&&u++;return l},
a._calculateDisplacement=o.returns(0),Object.seal(a),Object.seal(t)})),define("module/indicators/js/calculator/directionalindexhistogramcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/indicators/js/enum/directionalindexstyleenum","module/indicators/js/calculator/minusdirectionalindexcalculator","module/indicators/js/calculator/plusdirectionalindexcalculator","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";function t(){this._minusDirectionalIndexCalculator=o.create(),this._plusDirectionalIndexCalculator=r.create(),this._spreadCalculator=new n.series.SpreadCalculator}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/indicators/js/enum/directionalindexstyleenum"),o=e("module/indicators/js/calculator/minusdirectionalindexcalculator"),r=e("module/indicators/js/calculator/plusdirectionalindexcalculator"),s=e("module/core/js/model/datapoint/trenddatapoint"),a=t.prototype;return a._minusDirectionalIndexCalculator=null,a._plusDirectionalIndexCalculator=null,a._spreadCalculator=null,a.calculatePoints=function(e,t,n,o){if(n!==i.HISTOGRAM)return[];var r=this._minusDirectionalIndexCalculator.calculatePoints(e,t,void 0,o),a=this._plusDirectionalIndexCalculator.calculatePoints(e,t,void 0,o);return this._spreadCalculator.calculatePoints(r,a).map(s.createFromDataPoint)},Object.seal(a),Object.seal(t)})),define("module/indicators/js/calculator/highesthighcalculator",["require","module/core/js/model/datapoint/datapoint","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/datapoint/datapoint"),i=e("module/core/js/util/functional");t.create=function(){return new t};var o=t.prototype;return o.calculatePoints=function(e,t){var o,r,s,a,l=[];if(e.length<t)return l;for(o=0;o+t+1<=e.length;o++)s=o+t,r=e.slice(o,o+t).map(i.plucker("highPrice")),a=Math.max.apply(this,r),l.push(new n(e[s].timestamp,a));return l},Object.seal(o),t})),define("module/indicators/js/calculator/lowestlowcalculator",["require","module/core/js/model/datapoint/datapoint","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/datapoint/datapoint"),i=e("module/core/js/util/functional");t.create=function(){return new t};var o=t.prototype;return o.calculatePoints=function(e,t){var o,r,s,a,l=[];if(e.length<t)return l;for(o=0;o+t+1<=e.length;o++)s=o+t,r=e.slice(o,o+t).map(i.plucker("lowPrice")),a=Math.min.apply(this,r),l.push(new n(e[s].timestamp,a));return l},Object.seal(o),t})),define("module/indicators/js/calculator/donchianchannelcalculator",["require","module/core/js/model/datapoint/clouddatapoint","module/indicators/js/calculator/highesthighcalculator","module/indicators/js/calculator/lowestlowcalculator"],(function(e){"use strict";function t(){this._highestHighCalculator=i.create(),this._lowestLowCalculator=o.create()}var n=e("module/core/js/model/datapoint/clouddatapoint"),i=e("module/indicators/js/calculator/highesthighcalculator"),o=e("module/indicators/js/calculator/lowestlowcalculator"),r=t.prototype;return r._highestHighCalculator=null,r._lowestLowCalculator=null,r.calculatePoints=function(e,t){var n=this._highestHighCalculator.calculatePoints(e,t),i=this._lowestLowCalculator.calculatePoints(e,t);return this._convertToCloudPoints(n,i)},r._convertToCloudPoints=function(e,t){var i,o,r=[];for(o=0;o<e.length;o++)i=new n(e[o].timestamp,e[o].value,t[o].value),r.push(i);return r},Object.seal(r),t})),define("module/indicators/js/calculator/donchianmiddlecalculator",["require","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/highesthighcalculator","module/indicators/js/calculator/lowestlowcalculator"],(function(e){"use strict";function t(){this._donchianDownCalculator=o.create(),this._donchianUpCalculator=i.create()}var n=e("module/core/js/model/datapoint/datapoint"),i=e("module/indicators/js/calculator/highesthighcalculator"),o=e("module/indicators/js/calculator/lowestlowcalculator");t.create=function(){return new t};var r=t.prototype;return r._donchianUpCalculator=null,r._donchianDownCalculator=null,r.calculatePoints=function(e,t){var n,i;return e.length<t?[]:(n=this._donchianDownCalculator.calculatePoints(e,t),i=this._donchianUpCalculator.calculatePoints(e,t),this._calculateMidPoints(n,i))},r._calculateMidPoints=function(e,t){var i,o=[];for(i=0;i<e.length;i++)o.push(new n(e[i].timestamp,(e[i].value+t[i].value)/2));return o},Object.seal(r),t})),define("module/core/js/view/renderer/dotrenderer",["require","module/core/js/view/renderer/abstractblockrenderer","module/core/js/model/block","module/core/js/util/class","module/core/js/view/projection/ordinals/screenprojection","module/core/js/view/projection/ordinals/timeoffsetprojection","module/core/js/view/projection/xyprojection"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractblockrenderer"),i=e("module/core/js/model/block"),o=e("module/core/js/util/class"),r=e("module/core/js/view/projection/ordinals/screenprojection"),s=e("module/core/js/view/projection/ordinals/timeoffsetprojection"),a=e("module/core/js/view/projection/xyprojection"),l={width:4,height:4};o.extend(t,n);var u=t.prototype;return u._createProjection=function(){return new a(new s,new r)},u.initDom=function(){return this.dContainer.classed("dots",!0),this},u._useBlock=function(e){var t=this._accessor(e);return t&&0!==t.length},u._initNewBlocks=function(e){this._createNewDots(this._selectPointsInBlocks(e))},u._refreshChangedBlocks=function(e){var t=this._dBlocks.data(e,i.indexJoin),n=this._selectPointsInBlocks(t);this._setValueOfDots(n),this._createNewDots(n)},u._createNewDots=function(e){e.enter().append("svg:rect").attr(l).call(this._positionDotsHorizontally.bind(this)).call(this._setValueOfDots.bind(this))},u._setValueOfDots=function(e){e.attr("class",this._dotClass).call(this._positionDotsVertically.bind(this))},u._dotClass=function(e){return"point "+(e.upTrend?"up":"down")},u._replot=function(e,t){var n=this._dBlocks.selectAll(".point");e&&this._positionDotsHorizontally(n),t&&this._positionDotsVertically(n)},u._positionDotsHorizontally=function(e){var t=this._getForwardsProjectionInX(),n=this._projection.inX.roundValue;e.attr("x",(function(e){return n(t(e.accTime)-2)}))},u._positionDotsVertically=function(e){var t=this._getForwardsProjectionInY(),n=this._projection.inY.roundValue;e.attr("y",(function(e){return n(t(e.value)-2)}))},Object.seal(u),t})),define("module/indicators/js/input/futureblocksinput",["require","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/core/js/indicator/input/indicatorinput","module/core/js/model/instrumentresolutionevents"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i),this._accessor=o.totalPlucker("points",e,"points")}var n=e("module/core/js/util/array"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/indicator/input/indicatorinput"),s=e("module/core/js/model/instrumentresolutionevents"),a=n.firstOf,l=n.lastOf;i.extend(t,r);var u=t.prototype;return u._accessor=null,u.startRequestingPointsVia=function(e){e.on(s.BLOCKS_POINTS_ADDED+"-"+this._inputPointType,this._handleBlocksPointsAdded,this)},u.stopRequestingPointsVia=function(e){e.un(null,this)},u.collatePointsForBlocks=function(e){var t=e.filter(this._hasInput,this),n=t.filter(this._hasNoOutput,this),i=this._getInputPointsForBlocks(n);this._fireInput(i,n)},u._hasInput=function(e){return e.loading.loaded&&e.points[this._inputPointType]},u._hasNoOutput=function(e){return!e.points[this._outputPointType]},u._fireInput=function(e,t){e.length&&t.length&&this.fire(r.INDICATOR_INPUT,e,t)},u._getInputPointsForBlocks=function(e){if(!e.length)return[];if(0===this._numberOfTrailingPoints)return this._inputPointsForBlocks(e);for(var t=[],n=0,i=l(e).next;i&&this._hasInput(i)&&n<this._numberOfTrailingPoints;)n+=this._accessor(i).length,t.push(i),i=i.next;return this._inputPointsForBlocks(e.concat(t))},u._inputPointsForBlocks=function(e){return n.flatten(e.map(this._accessor))},u._getAffectedBlocks=function(e){for(var t=e.slice(),n=l(e).index-a(e).index+1,i=a(e).previous;i&&this._hasInput(i)&&n;)t.unshift(i),this._hasNoOutput(i)||n--,i=i.previous;return t},u._handleBlocksPointsAdded=function(e){if(e.length){var t=this._getAffectedBlocks(e),n=this._getInputPointsForBlocks(t);this._fireInput(n,t)}},Object.seal(u),t})),define("module/indicators/js/calculator/highesthighlowestlowmidpointcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/model/datapoint/datapoint"],(function(e){"use strict";function t(){this._highestHighLowestLowMidPointCalculator=new n.series.HighestHighLowestLowMidPointCalculator}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/model/datapoint/datapoint"),o=t.prototype;return o._highestHighLowestLowMidPointCalculator=null,o.calculatePoints=function(e,t){var n,o=function(e){return new i(e.timestamp,e.value,e.volume)};return n=this._highestHighLowestLowMidPointCalculator.calculatePoints(e,t),n.map(o)},Object.seal(o),t})),define("module/indicators/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{indicatorsDisabled:"Anzeigen",notAvailableInTick:"Indikator nicht als Tick-Intervall verfügbar",volumeNotAvailable:"Volumen für diesen Markt nicht verfügbar",MVAVG:"Moving Average","MVAVG-short":"MA","MVAVG-period1":"MA für 1","MVAVG-period2":"MA für 2","MVAVG-period3":"MA für 3","MVAVG-period4":"MA für 4","MVAVG-period5":"MA für 5","MVAVG-period6":"MA für 6","MVAVG-period7":"MA für 7","MVAVG-period8":"MA für 8","MVAVG-movingAverage1":"MA({period1})","MVAVG-movingAverage2":"MA({period2})","MVAVG-movingAverage3":"MA({period3})","MVAVG-movingAverage4":"MA({period4})","MVAVG-movingAverage5":"MA({period5})","MVAVG-movingAverage6":"MA({period6})","MVAVG-movingAverage7":"MA({period7})","MVAVG-movingAverage8":"MA({period8})",EMA:"Exponential Moving Average","EMA-short":"EMA","EMA-period1":"EMA für 1","EMA-period2":"EMA für 2","EMA-period3":"EMA für 3","EMA-period4":"EMA für 4","EMA-period5":"EMA für 5","EMA-period6":"EMA für 6","EMA-period7":"EMA für 7","EMA-period8":"EMA für 8","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Periode","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolic SAR","SAR-short":"SAR","SAR-initialAcceleration":"Einstiegs-Beschleuning","SAR-accelerationStep":"Beschleunigungsstufe","SAR-accelerationLimit":"Beschleunigungslimit","SAR-parabolicSar":"SAR",BOL:"Bollinger Band","BOL-short":"Boll","BOL-period":"Periode","BOL-standardDeviation":"Standardabweichung","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"MA",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"Slow EMA Periode","MACD-fastEmaPeriod":"Fast EMA Periode","MACD-signalEmaPeriod":"Signallinie Periode","MACD-macd":"MACD","MACD-macdHistogram":"MACD Histogramm","MACD-macdSignal":"Signallinie",MFI:"Money Flow Index","MFI-short":"MFI","MFI-period":"Periode","MFI-moneyFlowIndex":"MFI({period})",STOCH:"Stochastik","STOCH-short":"Stoch","STOCH-periodK":"%K Perioden","STOCH-slowing":"Slowing Perioden","STOCH-periodD":"%D Perioden","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volume","VOLUME-short":"Volume","VOLUME-volume":"Volume","VOLUME-tick":"Volumen auf Tick-Basis",STDEV:"Standard-Abweichung","STDEV-short":"SA","STDEV-period":"Periode","STDEV-standardDeviation":"SA({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Periode","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Periode","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"Short Periode","ICHIMOKU-longPeriod":"Long Periode","ICHIMOKU-signalPeriod":"Signal Periode","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Awesome Oszillator","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Short Periode","AWESOME-longPeriod":"Long Periode","AWESOME-awesome":"Awesome",ATR:"Average True Range","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Periode",CCI:"Commodity Channel Index","CCI-short":"CCI","CCI-period":"Periode","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Periode","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K Perioden","KDJ-slowing":"Slowing Perioden","KDJ-periodD":"%D Perioden","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Chaikin Volatilität","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"EMA Periode","CHAIKIN-pastPeriod":"Vergangene Periode",DPO:"Detrended Price Oszillator","DPO-short":"DPO","DPO-period":"Periode","DPO-dpo":"DPO({period})",DMI:"Directional Movement","DMI-short":"D. Mvt","DMI-period":"Periode","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Stil","DMI-line":"Linie","DMI-diHistogram":"Histogramm",PIVOT:"Pivot Punkt","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Intervall","PIVOT-daily":"Täglich","PIVOT-weekly":"Wöchentlich","PIVOT-monthly":"Monatlich","PIVOT-formula":"Formula","PIVOT-HLO":"(H+T+E)/3","PIVOT-HLC":"(H+T+S)/3","PIVOT-HLOC":"(H+T+S+E)/4",DONCHIAN:"Donchian Channel","DONCHIAN-short":"Donchian","DONCHIAN-period":"Periode","DONCHIAN-donchianUp":"Donchian Up","DONCHIAN-donchianDown":"Donchian Down","DONCHIAN-donchianMiddle":"Donchian Middle",KELTNER:"Keltner Channel","KELTNER-short":"Keltner","KELTNER-period":"Periode","KELTNER-multiplier":"Multiplikator","KELTNER-keltnerUp":"Keltner Up","KELTNER-keltnerDown":"Keltner Down","KELTNER-keltnerMiddle":"Keltner Middle",WMA:"Weighted Moving Average","WMA-short":"WMA","WMA-period1":"WMA für 1","WMA-period2":"WMA für 2","WMA-period3":"WMA für 3","WMA-period4":"WMA für 4","WMA-period5":"WMA für 5","WMA-period6":"WMA für 6","WMA-period7":"WMA für 7","WMA-period8":"WMA für 8","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"SuperTrend","SUPERTREND-short":"STrend","SUPERTREND-period":"Periode","SUPERTREND-multiplier":"Multiplikator","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"Rate of Change","ROC-short":"ROC","ROC-period":"Periode","ROC-roc":"ROC({period})"},en:{indicatorsDisabled:"Show",notAvailableInTick:"Indicator not available in Tick interval",volumeNotAvailable:"Volume is not available for this market",MVAVG:"Moving Average","MVAVG-short":"MA","MVAVG-period1":"MA for 1","MVAVG-period2":"MA for 2","MVAVG-period3":"MA for 3","MVAVG-period4":"MA for 4","MVAVG-period5":"MA for 5","MVAVG-period6":"MA for 6","MVAVG-period7":"MA for 7","MVAVG-period8":"MA for 8","MVAVG-movingAverage1":"MA({period1})","MVAVG-movingAverage2":"MA({period2})","MVAVG-movingAverage3":"MA({period3})","MVAVG-movingAverage4":"MA({period4})","MVAVG-movingAverage5":"MA({period5})","MVAVG-movingAverage6":"MA({period6})","MVAVG-movingAverage7":"MA({period7})","MVAVG-movingAverage8":"MA({period8})",EMA:"Exponential Moving Average","EMA-short":"EMA","EMA-period1":"EMA for 1","EMA-period2":"EMA for 2","EMA-period3":"EMA for 3","EMA-period4":"EMA for 4","EMA-period5":"EMA for 5","EMA-period6":"EMA for 6","EMA-period7":"EMA for 7","EMA-period8":"EMA for 8","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Period","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolic SAR","SAR-short":"SAR","SAR-initialAcceleration":"Initial Acceleration","SAR-accelerationStep":"Acceleration Step","SAR-accelerationLimit":"Acceleration Limit","SAR-parabolicSar":"SAR",BOL:"Bollinger Bands","BOL-short":"Boll","BOL-period":"Period","BOL-standardDeviation":"Standard Deviation","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"MA",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"Slow EMA Period","MACD-fastEmaPeriod":"Fast EMA Period","MACD-signalEmaPeriod":"Signal Line Period","MACD-macd":"MACD","MACD-macdHistogram":"MACD Histogram","MACD-macdSignal":"Signal Line",MFI:"Money Flow Index","MFI-short":"MFI","MFI-period":"Period","MFI-moneyFlowIndex":"MFI({period})",STOCH:"Stochastic","STOCH-short":"Stoch","STOCH-periodK":"%K Period","STOCH-slowing":"Slowing Period","STOCH-periodD":"%D Period","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volume","VOLUME-short":"Volume","VOLUME-volume":"Volume","VOLUME-tick":"Tick Volume",STDEV:"Standard Deviation","STDEV-short":"SD","STDEV-period":"Period","STDEV-standardDeviation":"SD({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Period","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Period","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"Short Period","ICHIMOKU-longPeriod":"Long Period","ICHIMOKU-signalPeriod":"Signal Period","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Awesome Oscillator","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Short Period","AWESOME-longPeriod":"Long Period","AWESOME-awesome":"Awesome",ATR:"Average True Range","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Period",CCI:"Commodity Channel Index","CCI-short":"CCI","CCI-period":"Period","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Period","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K Periods","KDJ-slowing":"Slowing Periods","KDJ-periodD":"%D Periods","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Chaikin Volatility","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"EMA Period","CHAIKIN-pastPeriod":"Past Period",DPO:"Detrended Price Oscillator","DPO-short":"DPO","DPO-period":"Period","DPO-dpo":"DPO({period})",DMI:"Directional Movement","DMI-short":"D. Mvt","DMI-period":"Period","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Style","DMI-line":"Line","DMI-diHistogram":"Histogram",PIVOT:"Pivot Point","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Interval","PIVOT-daily":"Daily","PIVOT-weekly":"Weekly","PIVOT-monthly":"Monthly","PIVOT-formula":"Formula","PIVOT-HLO":"(H+L+O)/3","PIVOT-HLC":"(H+L+C)/3","PIVOT-HLOC":"(H+L+C+O)/4",DONCHIAN:"Donchian Channel","DONCHIAN-short":"Donchian","DONCHIAN-period":"Period","DONCHIAN-donchianUp":"Donchian Up","DONCHIAN-donchianDown":"Donchian Down","DONCHIAN-donchianMiddle":"Donchian Middle",KELTNER:"Keltner Channel","KELTNER-short":"Keltner","KELTNER-period":"Period","KELTNER-multiplier":"Multiplier","KELTNER-keltnerUp":"Keltner Up","KELTNER-keltnerDown":"Keltner Down","KELTNER-keltnerMiddle":"Keltner Middle",WMA:"Weighted Moving Average","WMA-short":"WMA","WMA-period1":"WMA for 1","WMA-period2":"WMA for 2","WMA-period3":"WMA for 3","WMA-period4":"WMA for 4","WMA-period5":"WMA for 5","WMA-period6":"WMA for 6","WMA-period7":"WMA for 7","WMA-period8":"WMA for 8","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"SuperTrend","SUPERTREND-short":"STrend","SUPERTREND-period":"Period","SUPERTREND-multiplier":"Multiplier","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"Rate of Change","ROC-short":"ROC","ROC-period":"Period","ROC-roc":"ROC({period})"},es:{indicatorsDisabled:"Mostrar",notAvailableInTick:"El indicador no está disponible en este intervalo",volumeNotAvailable:"El volumen no está disponible para este mercado",MVAVG:"SMA","MVAVG-short":"SMA","MVAVG-period1":"SMA para 1","MVAVG-period2":"SMA para 2","MVAVG-period3":"SMA para 3","MVAVG-period4":"SMA para 4","MVAVG-period5":"SMA para 5","MVAVG-period6":"SMA para 6","MVAVG-period7":"SMA para 7","MVAVG-period8":"SMA para 8","MVAVG-movingAverage1":"SMA({period1})","MVAVG-movingAverage2":"SMA({period2})","MVAVG-movingAverage3":"SMA({period3})","MVAVG-movingAverage4":"SMA({period4})","MVAVG-movingAverage5":"SMA({period5})","MVAVG-movingAverage6":"SMA({period6})","MVAVG-movingAverage7":"SMA({period7})","MVAVG-movingAverage8":"SMA({period8})",EMA:"EMA","EMA-short":"EMA","EMA-period1":"EMA para 1","EMA-period2":"EMA para 2","EMA-period3":"EMA para 3","EMA-period4":"EMA para 4","EMA-period5":"EMA para 5","EMA-period6":"EMA para 6","EMA-period7":"EMA para 7","EMA-period8":"EMA para 8","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Periodo","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolic SAR","SAR-short":"SAR","SAR-initialAcceleration":"Aceleración inicial","SAR-accelerationStep":"Intervalo de Aceleración","SAR-accelerationLimit":"Límite de Aceleración","SAR-parabolicSar":"SAR",BOL:"Bandas de Bollinger","BOL-short":"Boll","BOL-period":"Periodo","BOL-standardDeviation":"Desviación estándar","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"MM",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"Periodo EMA Lento","MACD-fastEmaPeriod":"Periodo EMA Rápido","MACD-signalEmaPeriod":"Periodo de Línea de Señal","MACD-macd":"MACD","MACD-macdHistogram":"Histograma MACD","MACD-macdSignal":"Línea de Señal",MFI:"Money Flow Index","MFI-short":"MFI","MFI-period":"Periodo","MFI-moneyFlowIndex":"MFI({period})",STOCH:"Estocástico","STOCH-short":"Sto","STOCH-periodK":"%K Periodos","STOCH-slowing":"Periodos de bajadas","STOCH-periodD":"%D Periodos","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volumen","VOLUME-short":"Volumen","VOLUME-volume":"Volumen","VOLUME-tick":"Volumen por ticks",STDEV:"Desviación estándar","STDEV-short":"DE","STDEV-period":"Periodo","STDEV-standardDeviation":"DE({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Periodo","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Periodo","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"Periodo corto","ICHIMOKU-longPeriod":"Periodo largo","ICHIMOKU-signalPeriod":"Periodo señal","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Oscilador Awesome","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Periodo corto","AWESOME-longPeriod":"Periodo largo","AWESOME-awesome":"Awesome",ATR:"ATR","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Periodo",CCI:"CCI","CCI-short":"CCI","CCI-period":"Periodo","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Periodo","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K Periodos","KDJ-slowing":"Periodos de bajadas","KDJ-periodD":"%D Periodos","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Volatilidad Chaikin","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"Periodo EMA","CHAIKIN-pastPeriod":"Periodo pasado",DPO:"Detrended Price Oscillator","DPO-short":"DPO","DPO-period":"Periodo","DPO-dpo":"DPO({period})",DMI:"Directional Movement","DMI-short":"D. Mvt","DMI-period":"Periodo","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Estilo","DMI-line":"Línea","DMI-diHistogram":"Histograma",PIVOT:"Pivot Points","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Intervalo","PIVOT-daily":"Diario","PIVOT-weekly":"Semanal","PIVOT-monthly":"Mensual","PIVOT-formula":"Formula","PIVOT-HLO":"(A+B+Ab)/3","PIVOT-HLC":"(A+B+C)/3","PIVOT-HLOC":"(A+B+C+Ab)/4",DONCHIAN:"Canal de Donchian","DONCHIAN-short":"Donchian","DONCHIAN-period":"Periodo","DONCHIAN-donchianUp":"Donchian Sube","DONCHIAN-donchianDown":"Donchian Baja","DONCHIAN-donchianMiddle":"Donchian Medio",KELTNER:"Bandas de Keltner","KELTNER-short":"Keltner","KELTNER-period":"Periodo","KELTNER-multiplier":"Multiplicador","KELTNER-keltnerUp":"Keltner Sube","KELTNER-keltnerDown":"Keltner Baja","KELTNER-keltnerMiddle":"Keltner Medio",WMA:"WMA","WMA-short":"WMA","WMA-period1":"WMA en 1","WMA-period2":"WMA en 2","WMA-period3":"WMA en 3","WMA-period4":"WMA en 4","WMA-period5":"WMA en 5","WMA-period6":"WMA en 6","WMA-period7":"WMA en 7","WMA-period8":"WMA en 8","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"Súper Tendencia","SUPERTREND-short":"STrend","SUPERTREND-period":"Periodo","SUPERTREND-multiplier":"Multiplicador","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"ROC","ROC-short":"ROC","ROC-period":"Periodo","ROC-roc":"ROC({period})"},fr:{indicatorsDisabled:"Afficher",notAvailableInTick:"Indicateur non disponible pour l'intervalle tick par tick",volumeNotAvailable:"Le volume renseigné est indisponible sur ce marché",MVAVG:"Moyenne Mobile","MVAVG-short":"MM","MVAVG-period1":"MM pour 1","MVAVG-period2":"MM pour 2","MVAVG-period3":"MM pour 3","MVAVG-period4":"MM pour 4","MVAVG-period5":"MM pour 5","MVAVG-period6":"MM pour 6","MVAVG-period7":"MM pour 7","MVAVG-period8":"MM pour 8","MVAVG-movingAverage1":"MM ({period1})","MVAVG-movingAverage2":"MM ({period2})","MVAVG-movingAverage3":"MM ({period3})","MVAVG-movingAverage4":"MM ({period4})","MVAVG-movingAverage5":"MM ({period5})","MVAVG-movingAverage6":"MM ({period6})","MVAVG-movingAverage7":"MM ({period7})","MVAVG-movingAverage8":"MM ({period8})",EMA:"Moyenne Mobile Exponentielle","EMA-short":"MME","EMA-period1":"MME pour 1","EMA-period2":"MME pour 2","EMA-period3":"MME pour 3","EMA-period4":"MME pour 4","EMA-period5":"MME pour 5","EMA-period6":"MME pour 6","EMA-period7":"MME pour 7","EMA-period8":"MME pour 8","EMA-exponentialMovingAverage1":"MME ({period1})","EMA-exponentialMovingAverage2":"MME ({period2})","EMA-exponentialMovingAverage3":"MME ({period3})","EMA-exponentialMovingAverage4":"MME ({period4})","EMA-exponentialMovingAverage5":"MME ({period5})","EMA-exponentialMovingAverage6":"MME ({period6})","EMA-exponentialMovingAverage7":"MME ({period7})","EMA-exponentialMovingAverage8":"MME ({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Période","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolique SAR","SAR-short":"SAR","SAR-initialAcceleration":"Accélération Min","SAR-accelerationStep":"Facteur d’accélération","SAR-accelerationLimit":"Accélération Max","SAR-parabolicSar":"SAR",BOL:"Bande de Bollinger","BOL-short":"Boll","BOL-period":"Période","BOL-standardDeviation":"Déviation Standard","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"MM",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"MM long terme","MACD-fastEmaPeriod":"MM court terme","MACD-signalEmaPeriod":"Période de la ligne de Signal","MACD-macd":"MACD","MACD-macdHistogram":"Histogramme du MACD","MACD-macdSignal":"Ligne de signal",MFI:"Money Flow Index","MFI-short":"MFI","MFI-period":"Période","MFI-moneyFlowIndex":"MFI ({period})",STOCH:"Stochastique","STOCH-short":"Stoch","STOCH-periodK":"%K Périodes","STOCH-slowing":"Période de lissage","STOCH-periodD":"%D Périodes","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volume","VOLUME-short":"Volume","VOLUME-volume":"Volume","VOLUME-tick":"Volume en ticks",STDEV:"Écart type","STDEV-short":"ET","STDEV-period":"Période","STDEV-standardDeviation":"ET({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Période","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Période","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"MM court terme","ICHIMOKU-longPeriod":"MM long terme","ICHIMOKU-signalPeriod":"Nb de périodes signal","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Oscillateur Awesome","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Période courte","AWESOME-longPeriod":"Période longue","AWESOME-awesome":"Awesome",ATR:"Average True Range","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Période",CCI:"Commodity Channel Index","CCI-short":"CCI","CCI-period":"Période","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Période","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K Périodes","KDJ-slowing":"Période de lissage","KDJ-periodD":"%D Périodes","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Volatilité de Chaikin","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})",
"CHAIKIN-emaPeriod":"Nb Périodes MM","CHAIKIN-pastPeriod":"Nb Périodes antérieures",DPO:"Detrended Price Oscillator","DPO-short":"DPO","DPO-period":"Période","DPO-dpo":"DPO({period})",DMI:"Mouvement Directionnel","DMI-short":"DMI","DMI-period":"Période","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Style","DMI-line":"Ligne","DMI-diHistogram":"Histogramme",PIVOT:"Point pivot","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Intervalle","PIVOT-daily":"Quotidien","PIVOT-weekly":"Hebdomadaire","PIVOT-monthly":"Mensuel","PIVOT-formula":"Formula","PIVOT-HLO":"(H+B+O)/3","PIVOT-HLC":"(H+B+C)/3","PIVOT-HLOC":"(H+B+C+O)/4",DONCHIAN:"Canal de Donchian","DONCHIAN-short":"Donchian","DONCHIAN-period":"Période","DONCHIAN-donchianUp":"Donchian Haussier","DONCHIAN-donchianDown":"Donchian Baisser","DONCHIAN-donchianMiddle":"Donchian Neutre",KELTNER:"Canal de Keltner","KELTNER-short":"Keltner","KELTNER-period":"Période","KELTNER-multiplier":"Multiplicateur","KELTNER-keltnerUp":"Keltner Haussier","KELTNER-keltnerDown":"Keltner Baissier","KELTNER-keltnerMiddle":"Keltner Neutre",WMA:"Moyenne mobile pondérée","WMA-short":"MMP","WMA-period1":"MMP-période 1","WMA-period2":"MMP-période 2","WMA-period3":"MMP-période 3","WMA-period4":"MMP-période 4","WMA-period5":"MMP-période 5","WMA-period6":"MMP-période 6","WMA-period7":"MMP-période 7","WMA-period8":"MMP-période 8","WMA-weightedMovingAverage1":"MMP({period1})","WMA-weightedMovingAverage2":"MMP({period2})","WMA-weightedMovingAverage3":"MMP({period3})","WMA-weightedMovingAverage4":"MMP({period4})","WMA-weightedMovingAverage5":"MMP({period5})","WMA-weightedMovingAverage6":"MMP({period6})","WMA-weightedMovingAverage7":"MMP({period7})","WMA-weightedMovingAverage8":"MMP({period8})",SUPERTREND:"SuperTrend","SUPERTREND-short":"STrend","SUPERTREND-period":"Période","SUPERTREND-multiplier":"Multiplicateur","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"Taux de change","ROC-short":"TDC","ROC-period":"Période","ROC-roc":"TDC({period})"},it:{indicatorsDisabled:"Mostra",notAvailableInTick:'Indicatore non disponibile nell\'intervallo "tick" dei grafici',volumeNotAvailable:"Quantità non disponibile per questo mercato",MVAVG:"Media mobile","MVAVG-short":"MA","MVAVG-period1":"MA per 1","MVAVG-period2":"MA per 2","MVAVG-period3":"MA per 3","MVAVG-period4":"MA per 4","MVAVG-period5":"MA per 5","MVAVG-period6":"MA per 6","MVAVG-period7":"MA per 7","MVAVG-period8":"MA per 8","MVAVG-movingAverage1":"MA({period1})","MVAVG-movingAverage2":"MA({period2})","MVAVG-movingAverage3":"MA({period3})","MVAVG-movingAverage4":"MA({period4})","MVAVG-movingAverage5":"MA({period5})","MVAVG-movingAverage6":"MA({period6})","MVAVG-movingAverage7":"MA({period7})","MVAVG-movingAverage8":"MA({period8})",EMA:"Media mobile esponenziale","EMA-short":"EMA","EMA-period1":"EMA per 1","EMA-period2":"EMA per 2","EMA-period3":"EMA per 3","EMA-period4":"EMA per 4","EMA-period5":"EMA per 5","EMA-period6":"EMA per 6","EMA-period7":"EMA per 7","EMA-period8":"EMA per 8","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Periodo","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolic SAR","SAR-short":"SAR","SAR-initialAcceleration":"Fattore d'accelerazione iniziale","SAR-accelerationStep":"Fattore addizionale","SAR-accelerationLimit":"Limite Fattore d'accelerazione","SAR-parabolicSar":"SAR",BOL:"Banda di Bollinger","BOL-short":"Boll","BOL-period":"Periodo","BOL-standardDeviation":"Deviazione standard","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"MA",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"Periodo EMA lento","MACD-fastEmaPeriod":"Periodo EMA veloce","MACD-signalEmaPeriod":"Periodo Linea di segnale","MACD-macd":"MACD","MACD-macdHistogram":"Istogramma MACD","MACD-macdSignal":"Linea di segnale",MFI:"Money Flow Index","MFI-short":"MFI","MFI-period":"Periodo","MFI-moneyFlowIndex":"MFI({period})",STOCH:"Stocastico","STOCH-short":"Stoch","STOCH-periodK":"%K Periodi","STOCH-slowing":"Periodi di rallentamento","STOCH-periodD":"%D Periodi","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volume","VOLUME-short":"Volume","VOLUME-volume":"Volume","VOLUME-tick":"Tick Volume",STDEV:"Deviazione standard","STDEV-short":"DS","STDEV-period":"Periodo","STDEV-standardDeviation":"DS({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Periodo","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Periodo","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"Periodo breve","ICHIMOKU-longPeriod":"Periodo lungo","ICHIMOKU-signalPeriod":"Segnale periodo","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Awesome Oscillator","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Periodo breve","AWESOME-longPeriod":"Periodo lungo","AWESOME-awesome":"Awesome",ATR:"Average True Range","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Periodo",CCI:"Commodity Channel Index","CCI-short":"CCI","CCI-period":"Periodo","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Periodo","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K Periodi","KDJ-slowing":"Periodi di rallentamento","KDJ-periodD":"%D Periodi","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Volatilità Chaikin","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"Periodo EMA","CHAIKIN-pastPeriod":"Periodo passato",DPO:"Oscillazione detrended del prezzo","DPO-short":"DPO","DPO-period":"Periodo","DPO-dpo":"DPO({period})",DMI:"Movimento direzionale","DMI-short":"D. Mvt","DMI-period":"Periodo","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Stile","DMI-line":"Lineare","DMI-diHistogram":"Istogramma",PIVOT:"Punto Pivot","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Intervallo","PIVOT-daily":"Giornaliero","PIVOT-weekly":"Settimanale","PIVOT-monthly":"Mensile","PIVOT-formula":"Formula","PIVOT-HLO":"(H+L+O)/3","PIVOT-HLC":"(H+L+C)/3","PIVOT-HLOC":"(H+L+C+O)/4",DONCHIAN:"Canale di Donchian","DONCHIAN-short":"Donchian","DONCHIAN-period":"Periodo","DONCHIAN-donchianUp":"Banda superiore Donchian","DONCHIAN-donchianDown":"Banda inferiore Donchian","DONCHIAN-donchianMiddle":"Banda media Donchian",KELTNER:"Canale di Keltner","KELTNER-short":"Keltner","KELTNER-period":"Periodo","KELTNER-multiplier":"Moltiplicatore","KELTNER-keltnerUp":"Banda superiore Keltner","KELTNER-keltnerDown":"Banda inferiore Keltner","KELTNER-keltnerMiddle":"Banda media Keltner",WMA:"Media Mobile Ponderata","WMA-short":"WMA","WMA-period1":"WMA per 1","WMA-period2":"WMA per 2","WMA-period3":"WMA per 3","WMA-period4":"WMA per 4","WMA-period5":"WMA per 5","WMA-period6":"WMA per 6","WMA-period7":"WMA per 7","WMA-period8":"WMA per 8","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"SuperTrend","SUPERTREND-short":"STrend","SUPERTREND-period":"Periodo","SUPERTREND-multiplier":"Moltiplicatore","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"Rate of Change","ROC-short":"ROC","ROC-period":"Periodo","ROC-roc":"ROC({period})"},ja:{indicatorsDisabled:"表示する",notAvailableInTick:"この指標はティックではご利用できません",volumeNotAvailable:"この銘柄の出来高は利用できません",MVAVG:"移動平均","MVAVG-short":"移動平均","MVAVG-period1":"移動平均 1","MVAVG-period2":"移動平均 2","MVAVG-period3":"移動平均 3","MVAVG-period4":"移動平均 4","MVAVG-period5":"移動平均 5","MVAVG-period6":"移動平均 6","MVAVG-period7":"移動平均 7","MVAVG-period8":"移動平均 8","MVAVG-movingAverage1":"移動平均({period1})","MVAVG-movingAverage2":"移動平均({period2})","MVAVG-movingAverage3":"移動平均({period3})","MVAVG-movingAverage4":"移動平均({period4})","MVAVG-movingAverage5":"移動平均({period5})","MVAVG-movingAverage6":"移動平均({period6})","MVAVG-movingAverage7":"移動平均({period7})","MVAVG-movingAverage8":"移動平均({period8})",EMA:"指数平滑移動平均(EMA)","EMA-short":"EMA","EMA-period1":"EMA　 1","EMA-period2":"EMA　 2","EMA-period3":"EMA　 3","EMA-period4":"EMA　 4","EMA-period5":"EMA　 5","EMA-period6":"EMA　 6","EMA-period7":"EMA　 7","EMA-period8":"EMA　 8","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"期間","RSI-relativeStrengthIndex":"RSI",SAR:"パラボリックSAR","SAR-short":"SAR","SAR-initialAcceleration":"加速因子","SAR-accelerationStep":"加速因子加算幅","SAR-accelerationLimit":"加速因子上限","SAR-parabolicSar":"SAR",BOL:"ボリンジャー・バンド","BOL-short":"ボリンジャー","BOL-period":"期間","BOL-standardDeviation":"標準偏差","BOL-bollingerPositiveBand":"ボリンジャー+","BOL-bollingerNegativeBand":"ボリンジャー-","BOL-bollingerMovingAverageBand":"移動平均",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"長期EMA","MACD-fastEmaPeriod":"短期EMA","MACD-signalEmaPeriod":"シグナルライン","MACD-macd":"MACD","MACD-macdHistogram":"MACDヒストグラム","MACD-macdSignal":"シグナルライン",MFI:"マネーフローインデックス","MFI-short":"MFI","MFI-period":"期間","MFI-moneyFlowIndex":"MFI({period})",STOCH:"ストキャスティクス","STOCH-short":"STC","STOCH-periodK":"%K期間","STOCH-slowing":"スロー期間","STOCH-periodD":"%D期間","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"出来高","VOLUME-short":"出来高","VOLUME-volume":"出来高","VOLUME-tick":"ティックボリューム",STDEV:"標準偏差","STDEV-short":"標準偏差","STDEV-period":"期間","STDEV-standardDeviation":"標準偏差({period})",WILLR:"ウィリアムズ%R","WILLR-short":"ウィリアムズ%R","WILLR-period":"期間","WILLR-williamsPercentR":"ウィリアムズ%R({period})",MOMENTUM:"モメンタム","MOMENTUM-short":"モメンタム","MOMENTUM-period":"期間","MOMENTUM-momentum":"M({period})",ICHIMOKU:"一目均衡表","ICHIMOKU-short":"一目均衡表","ICHIMOKU-ichimoku":"一目均衡表","ICHIMOKU-shortPeriod":"短期","ICHIMOKU-longPeriod":"長期","ICHIMOKU-signalPeriod":"シグナル期間","ICHIMOKU-tenkan":"転換線({shortPeriod})","ICHIMOKU-kijun":"基準線({longPeriod})","ICHIMOKU-spana":"スパンA({longPeriod})","ICHIMOKU-spanb":"スパンB({signalPeriod})","ICHIMOKU-chikou":"遅行線({longPeriod})",AWESOME:"オーサム・オシレーター","AWESOME-short":"オーサム","AWESOME-shortPeriod":"短期周期","AWESOME-longPeriod":"長期周期","AWESOME-awesome":"オーサム",ATR:"アベレージ・トゥルー・レンジ(ATR)","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"期間",CCI:"商品チャネル指数","CCI-short":"商品チャネル指数","CCI-period":"期間","CCI-cci":"CCI({period})",AROON:"アルーン","AROON-short":"アルーン","AROON-period":"期間","AROON-aroonUp":"アルーン+({period})","AROON-aroonDown":"アルーン-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K期間","KDJ-slowing":"スロー期間","KDJ-periodD":"%D期間","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"チャイキン・ボラティリティー","CHAIKIN-short":"チャイキン","CHAIKIN-chaikinVolatility":"チャイキン・ボラティリティー({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"EMA期間数","CHAIKIN-pastPeriod":"過去期間数",DPO:"デトレンディッド・プライス・ オシレーター","DPO-short":"DPO","DPO-period":"期間","DPO-dpo":"DPO({period})",DMI:"ディレクショナル・ムーブメント","DMI-short":"ディレクショナル・ムーブメント","DMI-period":"期間","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"チャート種類","DMI-line":"ライン","DMI-diHistogram":"ヒストグラム",PIVOT:"ピボット・ポイント","PIVOT-short":"ピボット","PIVOT-pivot":"ピボット・ポイント","PIVOT-pivotShort":"ピボット","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"間隔","PIVOT-daily":"日間","PIVOT-weekly":"週間","PIVOT-monthly":"月間","PIVOT-formula":"Formula","PIVOT-HLO":"(H+L+O)/3","PIVOT-HLC":"(H+L+C)/3","PIVOT-HLOC":"(H+L+C+O)/4",DONCHIAN:"ドンチャン・チャネル","DONCHIAN-short":"ドンチャン","DONCHIAN-period":"期間","DONCHIAN-donchianUp":"期間","DONCHIAN-donchianDown":"下落","DONCHIAN-donchianMiddle":"中間",KELTNER:"ケルトナー・チャネル","KELTNER-short":"ケルトナー","KELTNER-period":"期間","KELTNER-multiplier":"乗数","KELTNER-keltnerUp":"上昇","KELTNER-keltnerDown":"下落","KELTNER-keltnerMiddle":"中間",WMA:"加重移動平均(WMA)","WMA-short":"WMA","WMA-period1":"WMA-期間1","WMA-period2":"WMA-期間2","WMA-period3":"WMA-期間3","WMA-period4":"WMA-期間4","WMA-period5":"WMA-期間5","WMA-period6":"WMA-期間6","WMA-period7":"WMA-期間7","WMA-period8":"WMA-期間8","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"スーパートレンド","SUPERTREND-short":"STトレンド","SUPERTREND-period":"期間","SUPERTREND-multiplier":"乗数","SUPERTREND-superTrend":"STトレンド({period},{multiplier})",ROC:"変化率","ROC-short":"%","ROC-period":"期間","ROC-roc":"ROC({period})"},nl:{indicatorsDisabled:"Tonen",notAvailableInTick:"Indicator niet beschikbaar voor het Tick interval",volumeNotAvailable:"Volume is niet beschikbaar voor deze markt",MVAVG:"Moving Average","MVAVG-short":"MA","MVAVG-period1":"MA voor 1","MVAVG-period2":"MA voor 2","MVAVG-period3":"MA voor 3","MVAVG-period4":"MA voor 4","MVAVG-period5":"MA voor 5","MVAVG-period6":"MA voor 6","MVAVG-period7":"MA voor 7","MVAVG-period8":"MA voor 8","MVAVG-movingAverage1":"MA({period1})","MVAVG-movingAverage2":"MA({period2})","MVAVG-movingAverage3":"MA({period3})","MVAVG-movingAverage4":"MA({period4})","MVAVG-movingAverage5":"MA({period5})","MVAVG-movingAverage6":"MA({period6})","MVAVG-movingAverage7":"MA({period7})","MVAVG-movingAverage8":"MA({period8})",EMA:"Exponentieel Moving Average","EMA-short":"EMA","EMA-period1":"EMA voor 1","EMA-period2":"EMA voor 2","EMA-period3":"EMA voor 3","EMA-period4":"EMA voor 4","EMA-period5":"EMA voor 5","EMA-period6":"EMA voor 6","EMA-period7":"EMA voor 7","EMA-period8":"EMA voor 8","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Periode","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolische SAR","SAR-short":"SAR","SAR-initialAcceleration":"Initiële Acceleratie","SAR-accelerationStep":"Acceleratie Stap","SAR-accelerationLimit":"Acceleratie Limiet","SAR-parabolicSar":"SAR",BOL:"Bollinger Band","BOL-short":"Boll","BOL-period":"Periode","BOL-standardDeviation":"Standaard Deviatie","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"MA",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"Langzame EMA Periode","MACD-fastEmaPeriod":"Snelle EMA Periode","MACD-signalEmaPeriod":"Signaallijn Periode","MACD-macd":"MACD","MACD-macdHistogram":"MACD Histogram","MACD-macdSignal":"Signaallijn",MFI:"Money Flow Index","MFI-short":"MFI","MFI-period":"Periode","MFI-moneyFlowIndex":"MFI({period})",STOCH:"Stochastic","STOCH-short":"Stoch","STOCH-periodK":"%K Periodes","STOCH-slowing":"Periodes","STOCH-periodD":"%D Periodes","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volume","VOLUME-short":"Volume","VOLUME-volume":"Volume","VOLUME-tick":"Aantal ticks (volume)",STDEV:"Standaard Deviatie","STDEV-short":"SD","STDEV-period":"Periode","STDEV-standardDeviation":"SD({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Periode","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Periode","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"Korte Periode","ICHIMOKU-longPeriod":"Lange Periode","ICHIMOKU-signalPeriod":"Signaal Periode","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Awesome Oscillator","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Korte Periode","AWESOME-longPeriod":"Lange Periode","AWESOME-awesome":"Awesome",ATR:"Average True Range","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Periode",CCI:"Commodity Channel Index","CCI-short":"CCI","CCI-period":"Periode","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Periode","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K Periodes","KDJ-slowing":"Periodes","KDJ-periodD":"%D Periodes","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Chaikin Volatiliteit","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"EMA periode","CHAIKIN-pastPeriod":"Vorige periode",DPO:"Detrended Price Oscillator","DPO-short":"DPO","DPO-period":"Periode","DPO-dpo":"DPO({period})",DMI:"Directional Movement","DMI-short":"D. Mvt","DMI-period":"Periode","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Stijl","DMI-line":"Lijn","DMI-diHistogram":"Histogram",PIVOT:"Pivot Punt","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Interval","PIVOT-daily":"Dagelijks","PIVOT-weekly":"Wekelijks","PIVOT-monthly":"Maandelijks","PIVOT-formula":"Formula","PIVOT-HLO":"(H+L+O)/3","PIVOT-HLC":"(H+L+C)/3","PIVOT-HLOC":"(H+L+C+O)/4",DONCHIAN:"Donchian Channel","DONCHIAN-short":"Donchian","DONCHIAN-period":"Periode","DONCHIAN-donchianUp":"Donchian Omhoog","DONCHIAN-donchianDown":"Donchian Nederwaarts","DONCHIAN-donchianMiddle":"Donchian Midden",KELTNER:"Keltner Channel","KELTNER-short":"Keltner","KELTNER-period":"Periode","KELTNER-multiplier":"Vermenigvulder","KELTNER-keltnerUp":"Keltner Omhoog","KELTNER-keltnerDown":"Keltner Nederwaarts","KELTNER-keltnerMiddle":"Keltner Midden",WMA:"Weighted Moving Average","WMA-short":"WMA","WMA-period1":"WMA voor 1","WMA-period2":"WMA voor 2","WMA-period3":"WMA voor 3","WMA-period4":"WMA voor 4","WMA-period5":"WMA voor 5","WMA-period6":"WMA voor 6","WMA-period7":"WMA voor 7","WMA-period8":"WMA voor 8","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"SuperTrend","SUPERTREND-short":"STrend","SUPERTREND-period":"Periode","SUPERTREND-multiplier":"Vermenigvulder","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"Rate of Change","ROC-short":"ROC","ROC-period":"Periode","ROC-roc":"ROC({period})"},no:{indicatorsDisabled:"Vis",notAvailableInTick:"Indikatoren er ikke tilgjengelig i tick-intervall",volumeNotAvailable:"Indikator er ikke tilgjengelige i Tick oppløsningen",MVAVG:"Glidende gjennomsnitt","MVAVG-short":"GG","MVAVG-period1":"MA 1","MVAVG-period2":"MA 2","MVAVG-period3":"MA 3","MVAVG-period4":"MA 4","MVAVG-period5":"MA 5","MVAVG-period6":"MA 6","MVAVG-period7":"MA 7","MVAVG-period8":"MA 8","MVAVG-movingAverage1":"GG({period1})","MVAVG-movingAverage2":"GG({period2})","MVAVG-movingAverage3":"GG({period3})","MVAVG-movingAverage4":"GG({period4})","MVAVG-movingAverage5":"GG({period5})","MVAVG-movingAverage6":"GG({period6})","MVAVG-movingAverage7":"GG({period7})","MVAVG-movingAverage8":"GG({period8})",EMA:"Eksonensielt glidende gjennomsnitt","EMA-short":"EGG","EMA-period1":"EMA 1","EMA-period2":"EMA 2","EMA-period3":"EMA 3","EMA-period4":"EMA 4","EMA-period5":"EMA 5","EMA-period6":"EMA 6","EMA-period7":"EMA 7","EMA-period8":"EMA 8","EMA-exponentialMovingAverage1":"EGG({period1})","EMA-exponentialMovingAverage2":"EGG({period2})","EMA-exponentialMovingAverage3":"EGG({period3})","EMA-exponentialMovingAverage4":"EGG({period4})","EMA-exponentialMovingAverage5":"EGG({period5})","EMA-exponentialMovingAverage6":"EGG({period6})","EMA-exponentialMovingAverage7":"EGG({period7})","EMA-exponentialMovingAverage8":"EGG({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Periode","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolic SAR","SAR-short":"SAR","SAR-initialAcceleration":"Initial Acceleration","SAR-accelerationStep":"Acceleration Step","SAR-accelerationLimit":"Acceleration Limit","SAR-parabolicSar":"SAR",BOL:"Bollinger Band","BOL-short":"Boll","BOL-period":"Periode","BOL-standardDeviation":"Standardavvik","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"GG",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"Slow EMA periode","MACD-fastEmaPeriod":"Fast EMA periode","MACD-signalEmaPeriod":"Signal Line periode","MACD-macd":"MACD","MACD-macdHistogram":"MACD Histogram","MACD-macdSignal":"Signal Line",MFI:"Money Flow Index","MFI-short":"MFI","MFI-period":"Periode","MFI-moneyFlowIndex":"MFI({period})",STOCH:"Stochastic","STOCH-short":"Stoch","STOCH-periodK":"%K Perioder","STOCH-slowing":"Slowing Periods","STOCH-periodD":"%D Perioder","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volum","VOLUME-short":"Volum","VOLUME-volume":"Volum","VOLUME-tick":"Tick Volum",STDEV:"Standardavvik","STDEV-short":"SA","STDEV-period":"Periode","STDEV-standardDeviation":"SA({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Periode","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Periode","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"Kort periode","ICHIMOKU-longPeriod":"Lang periode","ICHIMOKU-signalPeriod":"Signal periode","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Awesome Oscillator","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Kort periode","AWESOME-longPeriod":"Lang periode","AWESOME-awesome":"Awesome",ATR:"Average True Range","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Periode",CCI:"Commodity Channel Index","CCI-short":"CCI","CCI-period":"Periode","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Periode","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K Perioder","KDJ-slowing":"Slowing Periods","KDJ-periodD":"%D Perioder","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Chaikin Volatility","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"EMA Periode","CHAIKIN-pastPeriod":"Tidligere Periode",DPO:"Detrended Price Oscillator","DPO-short":"DPO","DPO-period":"Periode","DPO-dpo":"DPO({period})",DMI:"Retningsbestemt bevegelse","DMI-short":"D. Mvt","DMI-period":"Periode","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Stil","DMI-line":"Linje","DMI-diHistogram":"Histogram",PIVOT:"Pivot Point","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Intervall","PIVOT-daily":"Daglig","PIVOT-weekly":"Ukentlig","PIVOT-monthly":"Månedlig","PIVOT-formula":"Formula","PIVOT-HLO":"(H+L+O)/3","PIVOT-HLC":"(H+L+C)/3","PIVOT-HLOC":"(H+L+C+O)/4",DONCHIAN:"Donchian Channel","DONCHIAN-short":"Donchian","DONCHIAN-period":"Periode","DONCHIAN-donchianUp":"Donchian Opp","DONCHIAN-donchianDown":"Donchian Ned","DONCHIAN-donchianMiddle":"Donchian Midten",KELTNER:"Keltner Channel","KELTNER-short":"Keltner","KELTNER-period":"Periode","KELTNER-multiplier":"Multippel","KELTNER-keltnerUp":"Keltner Opp","KELTNER-keltnerDown":"Keltner Ned","KELTNER-keltnerMiddle":"Keltner Midten",WMA:"Weighted Moving Average","WMA-short":"WMA","WMA-period1":"WMA for 1","WMA-period2":"WMA for 2","WMA-period3":"WMA for 3","WMA-period4":"WMA for 4","WMA-period5":"WMA for 5","WMA-period6":"WMA for 6","WMA-period7":"WMA for 7","WMA-period8":"WMA for 8","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"SuperTrend","SUPERTREND-short":"STrend","SUPERTREND-period":"Periode","SUPERTREND-multiplier":"Multippel","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"Rate of Change","ROC-short":"ROC","ROC-period":"Periode","ROC-roc":"ROC({period})"},pt:{indicatorsDisabled:"Mostrar",notAvailableInTick:"Este indicador não está disponível para este intervalo",volumeNotAvailable:"Este volume não está disponível para este mercado",MVAVG:"Média Móvel","MVAVG-short":"MM","MVAVG-period1":"MM para 1","MVAVG-period2":"MM para 2","MVAVG-period3":"MM para 3","MVAVG-period4":"MM para 4","MVAVG-period5":"MM para 5","MVAVG-period6":"MM para 6","MVAVG-period7":"MM para 7","MVAVG-period8":"MM para 8","MVAVG-movingAverage1":"MM({period1})","MVAVG-movingAverage2":"MM({period2})","MVAVG-movingAverage3":"MM({period3})","MVAVG-movingAverage4":"MM({period4})","MVAVG-movingAverage5":"MM({period5})","MVAVG-movingAverage6":"MM({period6})","MVAVG-movingAverage7":"MM({period7})","MVAVG-movingAverage8":"MM({period8})",EMA:"Média Móvel Exponencial","EMA-short":"MME","EMA-period1":"MME para 1","EMA-period2":"MME para 2","EMA-period3":"MME para 3","EMA-period4":"MME para 4","EMA-period5":"MME para 5","EMA-period6":"MME para 6","EMA-period7":"MME para 7","EMA-period8":"MME para 8","EMA-exponentialMovingAverage1":"MME({period1})","EMA-exponentialMovingAverage2":"MME({period2})","EMA-exponentialMovingAverage3":"MME({period3})","EMA-exponentialMovingAverage4":"MME({period4})","EMA-exponentialMovingAverage5":"MME({period5})","EMA-exponentialMovingAverage6":"MME({period6})","EMA-exponentialMovingAverage7":"MME({period7})","EMA-exponentialMovingAverage8":"MME({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Período","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolic SAR","SAR-short":"SAR","SAR-initialAcceleration":"Aceleração Inicial","SAR-accelerationStep":"Passo da Aceleração","SAR-accelerationLimit":"Limite da Aceleração","SAR-parabolicSar":"SAR",BOL:"Bandas Bollinger","BOL-short":"Boll","BOL-period":"Período","BOL-standardDeviation":"Desvio Padrão","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"MM",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"Período da EMA lenta","MACD-fastEmaPeriod":"Período da EMA rápida","MACD-signalEmaPeriod":"Período da Linha de sinal","MACD-macd":"MACD","MACD-macdHistogram":"MACD Histograma","MACD-macdSignal":"Linha de sinal",MFI:"Índice Money Flow","MFI-short":"IMF","MFI-period":"Período","MFI-moneyFlowIndex":"IMF ({period})",STOCH:"Estocásticos","STOCH-short":"Stoch","STOCH-periodK":"%K Períodos","STOCH-slowing":"Períodos Lentos","STOCH-periodD":"%D Períodos","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volume","VOLUME-short":"Volume","VOLUME-volume":"Volume","VOLUME-tick":"Volume de tick",STDEV:"Desvio Padrão","STDEV-short":"DP","STDEV-period":"Período","STDEV-standardDeviation":"DP({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Período","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Período","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"Período Curto","ICHIMOKU-longPeriod":"Período Longo","ICHIMOKU-signalPeriod":"Período do Sinal","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Awesome Oscillator","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Período Curto","AWESOME-longPeriod":"Período Longo","AWESOME-awesome":"Awesome",ATR:"Average True Range","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Período",CCI:"Commodity Channel Index","CCI-short":"CCI","CCI-period":"Período","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Período","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K Períodos","KDJ-slowing":"Períodos Lentos","KDJ-periodD":"%D Períodos","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Volatilidade Chaikin","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"Período EMA","CHAIKIN-pastPeriod":"Período passado",DPO:"Oscilador de Preço sem tendência","DPO-short":"DPO","DPO-period":"Período","DPO-dpo":"DPO({period})",DMI:"Movimento Direccional","DMI-short":"D. Mvt","DMI-period":"Período","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Estilo","DMI-line":"Linha","DMI-diHistogram":"Histograma",PIVOT:"Ponto Pivot","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Intervalo","PIVOT-daily":"Diário","PIVOT-weekly":"Semanal","PIVOT-monthly":"Mensal","PIVOT-formula":"Formula","PIVOT-HLO":"(Max+Min+A)/3","PIVOT-HLC":"(Max+Min+F)/3","PIVOT-HLOC":"(Max+Min+F+A)/4",DONCHIAN:"Canal de Donchian","DONCHIAN-short":"Donchian","DONCHIAN-period":"Período","DONCHIAN-donchianUp":"Donchian Sobe","DONCHIAN-donchianDown":"Donchian Baixa","DONCHIAN-donchianMiddle":"Donchian Meio",KELTNER:"Canal de Keltner","KELTNER-short":"Keltner","KELTNER-period":"Período","KELTNER-multiplier":"Multiplicador","KELTNER-keltnerUp":"Keltner Sobe","KELTNER-keltnerDown":"Keltner Baixa","KELTNER-keltnerMiddle":"Keltner Meio",WMA:"Média Móvel Ponderada","WMA-short":"MMP","WMA-period1":"MMP para 1","WMA-period2":"MMP para 2","WMA-period3":"MMP para 3","WMA-period4":"MMP para 4","WMA-period5":"MMP para 5","WMA-period6":"MMP para 6","WMA-period7":"MMP para 7","WMA-period8":"MMP para 8",
"WMA-weightedMovingAverage1":"MMP({period1})","WMA-weightedMovingAverage2":"MMP({period2})","WMA-weightedMovingAverage3":"MMP({period3})","WMA-weightedMovingAverage4":"MMP({period4})","WMA-weightedMovingAverage5":"MMP({period5})","WMA-weightedMovingAverage6":"MMP({period6})","WMA-weightedMovingAverage7":"MMP({period7})","WMA-weightedMovingAverage8":"MMP({period8})",SUPERTREND:"SuperTrend","SUPERTREND-short":"STrend","SUPERTREND-period":"Período","SUPERTREND-multiplier":"Multiplicador","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"Taxa de variação","ROC-short":"TDV","ROC-period":"Período","ROC-roc":"TDV({period})"},sv:{indicatorsDisabled:"Visa",notAvailableInTick:"Indikatorn är inte tillgänglig i tick-intervall",volumeNotAvailable:"Volym är inte tillgänglig för det här marknaden",MVAVG:"Glidande medelvärde (MA)","MVAVG-short":"MA","MVAVG-period1":"MA 1","MVAVG-period2":"MA 2","MVAVG-period3":"MA 3","MVAVG-period4":"MA 4","MVAVG-period5":"MA 5","MVAVG-period6":"MA 6","MVAVG-period7":"MA 7","MVAVG-period8":"MA 8","MVAVG-movingAverage1":"MA({period1})","MVAVG-movingAverage2":"MA({period2})","MVAVG-movingAverage3":"MA({period3})","MVAVG-movingAverage4":"MA({period4})","MVAVG-movingAverage5":"MA({period5})","MVAVG-movingAverage6":"MA({period6})","MVAVG-movingAverage7":"MA({period7})","MVAVG-movingAverage8":"MA({period8})",EMA:"Exponentiellt glidande medelvärde","EMA-short":"EMA","EMA-period1":"EMA 1","EMA-period2":"EMA 2","EMA-period3":"EMA 3","EMA-period4":"EMA 4","EMA-period5":"EMA 5","EMA-period6":"EMA 6","EMA-period7":"EMA 7","EMA-period8":"EMA 8","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"RSI","RSI-short":"RSI","RSI-period":"Period","RSI-relativeStrengthIndex":"RSI",SAR:"Parabolic SAR","SAR-short":"SAR","SAR-initialAcceleration":"Initial acceleration","SAR-accelerationStep":"Accelerationssteg","SAR-accelerationLimit":"Accelerationsgräns","SAR-parabolicSar":"SAR",BOL:"Bollingerband","BOL-short":"Boll","BOL-period":"Period","BOL-standardDeviation":"Standardavvikelse","BOL-bollingerPositiveBand":"Bollinger+","BOL-bollingerNegativeBand":"Bollinger-","BOL-bollingerMovingAverageBand":"MA",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"Perioder längre","MACD-fastEmaPeriod":"Perioder kortare","MACD-signalEmaPeriod":"Perioder signallinje","MACD-macd":"MACD","MACD-macdHistogram":"MACD-histogram","MACD-macdSignal":"Signallinje",MFI:"Money Flow-index","MFI-short":"MFI","MFI-period":"Period","MFI-moneyFlowIndex":"MFI({period})",STOCH:"Stokastisk","STOCH-short":"Stoch","STOCH-periodK":"%K-perioder","STOCH-slowing":"Långsamma perioder","STOCH-periodD":"%D-perioder","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"Volym","VOLUME-short":"Volym","VOLUME-volume":"Volym","VOLUME-tick":"Tickvolym",STDEV:"Standardavvikelse","STDEV-short":"SA","STDEV-period":"Period","STDEV-standardDeviation":"SA({period})",WILLR:"Williams %R","WILLR-short":"W%R","WILLR-period":"Period","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"Momentum","MOMENTUM-short":"Momntm","MOMENTUM-period":"Period","MOMENTUM-momentum":"M({period})",ICHIMOKU:"Ichimoku","ICHIMOKU-short":"Ichi","ICHIMOKU-ichimoku":"Ichimoku","ICHIMOKU-shortPeriod":"Kort period","ICHIMOKU-longPeriod":"Lång period","ICHIMOKU-signalPeriod":"Signal period","ICHIMOKU-tenkan":"Tenkan({shortPeriod})","ICHIMOKU-kijun":"Kijun({longPeriod})","ICHIMOKU-spana":"Span A({longPeriod})","ICHIMOKU-spanb":"Span B({signalPeriod})","ICHIMOKU-chikou":"Chikou({longPeriod})",AWESOME:"Awesome Oscillator","AWESOME-short":"Awsm","AWESOME-shortPeriod":"Kort period","AWESOME-longPeriod":"Lång period","AWESOME-awesome":"Awesome",ATR:"Average True Range","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"Period",CCI:"Commodity Channel Index","CCI-short":"CCI","CCI-period":"Period","CCI-cci":"CCI({period})",AROON:"Aroon","AROON-short":"Aroon","AROON-period":"Period","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K-perioder","KDJ-slowing":"Långsamma perioder","KDJ-periodD":"%D-perioder","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"Chaikin-volatilitet","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"Chaikin({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"EMA-period","CHAIKIN-pastPeriod":"Tidigare period",DPO:"Detrended Price Oscillator","DPO-short":"DPO","DPO-period":"Period","DPO-dpo":"DPO({period})",DMI:"Directional Movement","DMI-short":"D. Movt","DMI-period":"Period","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"Stil","DMI-line":"Linje","DMI-diHistogram":"Histogram",PIVOT:"Pivotpunkt","PIVOT-short":"Pivot","PIVOT-pivot":"Pivot","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"Intervall","PIVOT-daily":"Dag","PIVOT-weekly":"Vecka","PIVOT-monthly":"Månad","PIVOT-formula":"Formula","PIVOT-HLO":"(H+L+Ö)/3","PIVOT-HLC":"(H+L+S)/3","PIVOT-HLOC":"(H+L+S+Ö)/4",DONCHIAN:"Donchian Channel","DONCHIAN-short":"Donchian","DONCHIAN-period":"Periode","DONCHIAN-donchianUp":"Donchian Opp","DONCHIAN-donchianDown":"Donchian Ned","DONCHIAN-donchianMiddle":"Donchian Midten",KELTNER:"Keltner Channel","KELTNER-short":"Keltner","KELTNER-period":"Periode","KELTNER-multiplier":"Multippel","KELTNER-keltnerUp":"Keltner Opp","KELTNER-keltnerDown":"Keltner Ned","KELTNER-keltnerMiddle":"Keltner Midten",WMA:"Weighted Moving Average","WMA-short":"WMA","WMA-period1":"WMA för 1","WMA-period2":"WMA för 2","WMA-period3":"WMA för 3","WMA-period4":"WMA för 4","WMA-period5":"WMA för 5","WMA-period6":"WMA för 6","WMA-period7":"WMA för 7","WMA-period8":"WMA för 8","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"SuperTrend","SUPERTREND-short":"STrend","SUPERTREND-period":"Periode","SUPERTREND-multiplier":"Multiplikator","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"Rate of Change","ROC-short":"ROC","ROC-period":"Periode","ROC-roc":"ROC({period})"},zh:{indicatorsDisabled:"显示",notAvailableInTick:"技术指标不能在最少时间间隔内使用",volumeNotAvailable:"本市场没有成交量数据可供参考",MVAVG:"移动平均线","MVAVG-short":"移动平均","MVAVG-period1":"时期","MVAVG-period2":"时期","MVAVG-period3":"时期","MVAVG-period4":"时期","MVAVG-period5":"时期","MVAVG-period6":"时期","MVAVG-period7":"时期","MVAVG-period8":"时期","MVAVG-movingAverage1":"MA({period1})","MVAVG-movingAverage2":"MA({period2})","MVAVG-movingAverage3":"MA({period3})","MVAVG-movingAverage4":"MA({period3})","MVAVG-movingAverage5":"MA({period3})","MVAVG-movingAverage6":"MA({period3})","MVAVG-movingAverage7":"MA({period3})","MVAVG-movingAverage8":"MA({period3})",EMA:"指数平均数指标","EMA-short":"指数移动平均","EMA-period1":"时期","EMA-period2":"时期","EMA-period3":"时期","EMA-period4":"时期","EMA-period5":"时期","EMA-period6":"时期","EMA-period7":"时期","EMA-period8":"时期","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"相对强弱指数","RSI-short":"强弱","RSI-period":"时期","RSI-relativeStrengthIndex":"相对强弱指数",SAR:"抛物线转向指标","SAR-short":"抛物线转向","SAR-initialAcceleration":"初始加速度","SAR-accelerationStep":"步长","SAR-accelerationLimit":"加速度极限","SAR-parabolicSar":"抛物线转向指标",BOL:"布林带","BOL-short":"布林","BOL-period":"时期","BOL-standardDeviation":"标准差","BOL-bollingerPositiveBand":"布林线+","BOL-bollingerNegativeBand":"布林线-","BOL-bollingerMovingAverageBand":"MA",MACD:"MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"慢速 EMA 时期","MACD-fastEmaPeriod":"快速 EMA 时期","MACD-signalEmaPeriod":"信号线时期","MACD-macd":"MACD","MACD-macdHistogram":"MACD 直方图","MACD-macdSignal":"信号线",MFI:"资金流量指标","MFI-short":"资金流向","MFI-period":"时期","MFI-moneyFlowIndex":"MFI({period})",STOCH:"随机KD指标","STOCH-short":"随机","STOCH-periodK":"%K 时期","STOCH-slowing":"减慢时期","STOCH-periodD":"%D 时期","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D",VOLUME:"成交量指标","VOLUME-short":"交易量","VOLUME-volume":"成交量指标","VOLUME-tick":"TICK 跳动量指标",STDEV:"标准差","STDEV-short":"标准差","STDEV-period":"时期","STDEV-standardDeviation":"SD({period})",WILLR:"威廉指数 %R","WILLR-short":"威廉","WILLR-period":"时期","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"动量线","MOMENTUM-short":"动量","MOMENTUM-period":"时期","MOMENTUM-momentum":"M({period})",ICHIMOKU:"一目均衡表","ICHIMOKU-short":"一目","ICHIMOKU-ichimoku":"一目均衡表","ICHIMOKU-shortPeriod":"短线周期","ICHIMOKU-longPeriod":"长线周期","ICHIMOKU-signalPeriod":"信号周期","ICHIMOKU-tenkan":"转折线({shortPeriod})","ICHIMOKU-kijun":"基准线({longPeriod})","ICHIMOKU-spana":"先行上线({longPeriod})","ICHIMOKU-spanb":"先行下线({signalPeriod})","ICHIMOKU-chikou":"延迟线({longPeriod})",AWESOME:"动量震荡指标","AWESOME-short":"动量震荡","AWESOME-shortPeriod":"短期","AWESOME-longPeriod":"长期","AWESOME-awesome":"Awesome",ATR:"平均真实波幅","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"时期",CCI:"顺势指标","CCI-short":"商品通道","CCI-period":"时期","CCI-cci":"CCI({period})",AROON:"阿隆指标","AROON-short":"安隆","AROON-period":"时期","AROON-aroonUp":"阿隆+({period})","AROON-aroonDown":"阿隆-({period})",KDJ:"KDJ","KDJ-short":"KDJ","KDJ-periodK":"%K 时期","KDJ-slowing":"减慢时期","KDJ-periodD":"%D 时期","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"蔡金波动性指标","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"蔡金波动性指标({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"EMA 时期","CHAIKIN-pastPeriod":"过去时段",DPO:"区间震荡线","DPO-short":"非趋势震荡","DPO-period":"时期","DPO-dpo":"DPO({period})",DMI:"动向指数","DMI-short":"动向","DMI-period":"时期","DMI-diPlus":"DI+({period})","DMI-diMinus":"DI-({period})","DMI-adx":"ADX({period})","DMI-style":"风格","DMI-line":"线图","DMI-diHistogram":"直方图",PIVOT:"基准点","PIVOT-short":"枢轴","PIVOT-pivot":"基准","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"间隔","PIVOT-daily":"每日","PIVOT-weekly":"每周","PIVOT-monthly":"每月","PIVOT-formula":"Formula","PIVOT-HLO":"(高+低+开盘价)/3","PIVOT-HLC":"(高+低+收盘价)/3","PIVOT-HLOC":"(高+低+收盘价+开盘价)/4",DONCHIAN:"唐奇安通道指标","DONCHIAN-short":"唐奇安短仓","DONCHIAN-period":"时期","DONCHIAN-donchianUp":"唐奇安 上","DONCHIAN-donchianDown":"唐奇安 下","DONCHIAN-donchianMiddle":"唐奇安 中",KELTNER:"肯特纳通道指标","KELTNER-short":"肯特纳短仓","KELTNER-period":"时期","KELTNER-multiplier":"乘数","KELTNER-keltnerUp":"肯特纳 上","KELTNER-keltnerDown":"肯特纳 下","KELTNER-keltnerMiddle":"肯特纳 中",WMA:"加权移动平均办法","WMA-short":"WMA","WMA-period1":"时间段1 WMA","WMA-period2":"时间段2 WMA","WMA-period3":"时间段3 WMA","WMA-period4":"时间段4 WMA","WMA-period5":"时间段5 WMA","WMA-period6":"时间段6 WMA","WMA-period7":"时间段7 WMA","WMA-period8":"时间段8 WMA","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"SuperTrend指标","SUPERTREND-short":"STrend","SUPERTREND-period":"时期","SUPERTREND-multiplier":"乘数","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"变化率","ROC-short":"变化率","ROC-period":"时期","ROC-roc":"变化率({period})"},zh_TW:{indicatorsDisabled:"顯示",notAvailableInTick:"技術指標不能在最少時間間隔內使用",volumeNotAvailable:"本市場無成交量數據可供參考",MVAVG:"移動平均值","MVAVG-short":"移動平均","MVAVG-period1":"移動平均值 – 參數 1","MVAVG-period2":"移動平均值 – 參數 2","MVAVG-period3":"移動平均值 – 參數 3","MVAVG-period4":"移動平均值 – 參數 4","MVAVG-period5":"移動平均值 – 參數 5","MVAVG-period6":"移動平均值 – 參數 6","MVAVG-period7":"移動平均值 – 參數 7","MVAVG-period8":"移動平均值 – 參數 8","MVAVG-movingAverage1":"MA({period1})","MVAVG-movingAverage2":"MA({period2})","MVAVG-movingAverage3":"MA({period3})","MVAVG-movingAverage4":"MA({period4})","MVAVG-movingAverage5":"MA({period5})","MVAVG-movingAverage6":"MA({period6})","MVAVG-movingAverage7":"MA({period7})","MVAVG-movingAverage8":"MA({period8})",EMA:"指數移動平均值","EMA-short":"指數移動平均","EMA-period1":"指數移動平均值– 參數 1","EMA-period2":"指數移動平均值– 參數 2","EMA-period3":"指數移動平均值– 參數 3","EMA-period4":"指數移動平均值– 參數 4","EMA-period5":"指數移動平均值– 參數 5","EMA-period6":"指數移動平均值– 參數 6","EMA-period7":"指數移動平均值– 參數 7","EMA-period8":"指數移動平均值– 參數 8","EMA-exponentialMovingAverage1":"EMA({period1})","EMA-exponentialMovingAverage2":"EMA({period2})","EMA-exponentialMovingAverage3":"EMA({period3})","EMA-exponentialMovingAverage4":"EMA({period4})","EMA-exponentialMovingAverage5":"EMA({period5})","EMA-exponentialMovingAverage6":"EMA({period6})","EMA-exponentialMovingAverage7":"EMA({period7})","EMA-exponentialMovingAverage8":"EMA({period8})",RSI:"相對強弱指數","RSI-short":"強弱","RSI-period":"時期","RSI-relativeStrengthIndex":"相對強弱指數",SAR:"拋物線轉向指標","SAR-short":"拋物線轉向","SAR-initialAcceleration":"初始加速因子","SAR-accelerationStep":"步長","SAR-accelerationLimit":"加速度極限","SAR-parabolicSar":"拋物線轉向指標止損反轉",BOL:"布林線","BOL-short":"布林","BOL-period":"週期","BOL-standardDeviation":"標準差","BOL-bollingerPositiveBand":"正布林線+","BOL-bollingerNegativeBand":"負布林線-","BOL-bollingerMovingAverageBand":"移動平均值",MACD:"指數平滑異同移動平均線 MACD","MACD-short":"MACD","MACD-slowEmaPeriod":"慢速 EMA 週期","MACD-fastEmaPeriod":"快速 EMA 週期","MACD-signalEmaPeriod":"信號線週期","MACD-macd":"指數平滑異同移動平均線 MACD","MACD-macdHistogram":"MACD 柱狀圖","MACD-macdSignal":"信號線",MFI:"資金流向指標","MFI-short":"資金流向","MFI-period":"週期","MFI-moneyFlowIndex":"MFI({period})",STOCH:"隨機指標","STOCH-short":"隨機","STOCH-periodK":"%K 週期隨機指標","STOCH-slowing":"慢速週期","STOCH-periodD":"%D 週期隨機指標","STOCH-stochasticK":"%K 隨機指標","STOCH-stochasticD":"%D 隨機指標",VOLUME:"交易量","VOLUME-short":"交易量","VOLUME-volume":"交易量","VOLUME-tick":"TICK 變動量指標",STDEV:"標準差","STDEV-short":"標準差","STDEV-period":"週期","STDEV-standardDeviation":"SD({period})",WILLR:"威廉指數 %R","WILLR-short":"威廉","WILLR-period":"週期","WILLR-williamsPercentR":"W%R({period})",MOMENTUM:"動量指標","MOMENTUM-short":"動量","MOMENTUM-period":"週期","MOMENTUM-momentum":"M({period})",ICHIMOKU:"一目平衡表","ICHIMOKU-short":"一目","ICHIMOKU-ichimoku":"一目平衡表","ICHIMOKU-shortPeriod":"短線週期","ICHIMOKU-longPeriod":"長線週期","ICHIMOKU-signalPeriod":"信號週期","ICHIMOKU-tenkan":"轉折線({shortPeriod})","ICHIMOKU-kijun":"基準線({longPeriod})","ICHIMOKU-spana":"先行上線({longPeriod})","ICHIMOKU-spanb":"先行下線({signalPeriod})","ICHIMOKU-chikou":"延遲線({longPeriod})",AWESOME:"動量震蕩指標","AWESOME-short":"動量震蕩","AWESOME-shortPeriod":"短線週期","AWESOME-longPeriod":"長線週期","AWESOME-awesome":"動量",ATR:"真實波動均值","ATR-short":"ATR","ATR-averageTrueRange":"ATR({period})","ATR-period":"週期",CCI:"商品通道指標","CCI-short":"商品通道","CCI-period":"週期","CCI-cci":"商品通道指標({period})",AROON:"安隆指標","AROON-short":"安隆","AROON-period":"週期","AROON-aroonUp":"Aroon+({period})","AROON-aroonDown":"Aroon-({period})",KDJ:"KDJ 隨機指標","KDJ-short":"KDJ","KDJ-periodK":"%K 週期","KDJ-slowing":"慢速週期","KDJ-periodD":"%D 週期","KDJ-KDJStochasticK":"%K","KDJ-KDJStochasticD":"%D","KDJ-KDJStochasticJ":"%J",CHAIKIN:"蔡金(Chaikin)波幅率","CHAIKIN-short":"Chaik","CHAIKIN-chaikinVolatility":"蔡金波幅率({emaPeriod},{pastPeriod})","CHAIKIN-emaPeriod":"指數移動平均值週期","CHAIKIN-pastPeriod":"過去時期",DPO:"非趨勢價格震蕩指標","DPO-short":"非趨勢震蕩","DPO-period":"週期","DPO-dpo":"非趨勢價格震蕩指標({period})",DMI:"動向指標","DMI-short":"動向","DMI-period":"時期","DMI-diPlus":"動向指標+({period})","DMI-diMinus":"動向指標-({period})","DMI-adx":"平均動向指標({period})","DMI-style":"風格","DMI-line":"線狀圖","DMI-diHistogram":"柱狀圖",PIVOT:"樞軸點圖","PIVOT-short":"樞軸","PIVOT-pivot":"樞軸","PIVOT-pivotShort":"Piv","PIVOT-r1":"R1","PIVOT-r2":"R2","PIVOT-r3":"R3","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","PIVOT-resolution":"間隔","PIVOT-formula":"Formula","PIVOT-HLO":"(H+L+O)/3","PIVOT-HLC":"(H+L+C)/3","PIVOT-HLOC":"(H+L+C+O)/4",DONCHIAN:"唐奇安通道指標","DONCHIAN-short":"唐奇安短倉","DONCHIAN-period":"週期","DONCHIAN-donchianUp":"唐奇安 上","DONCHIAN-donchianDown":"唐奇安 下","DONCHIAN-donchianMiddle":"唐奇安 中",KELTNER:"肯特納通道指標","KELTNER-short":"肯特納短倉","KELTNER-period":"週期","KELTNER-multiplier":"乘數","KELTNER-keltnerUp":"肯特納 上","KELTNER-keltnerDown":"肯特納 下","KELTNER-keltnerMiddle":"肯特納 中",WMA:"加權移動平均辦法","WMA-short":"WMA","WMA-period1":"時間段1 WMA","WMA-period2":"時間段2 WMA","WMA-period3":"時間段3 WMA","WMA-period4":"時間段4 WMA","WMA-period5":"時間段5 WMA","WMA-period6":"時間段6 WMA","WMA-period7":"時間段7 WMA","WMA-period8":"時間段8 WMA","WMA-weightedMovingAverage1":"WMA({period1})","WMA-weightedMovingAverage2":"WMA({period2})","WMA-weightedMovingAverage3":"WMA({period3})","WMA-weightedMovingAverage4":"WMA({period4})","WMA-weightedMovingAverage5":"WMA({period5})","WMA-weightedMovingAverage6":"WMA({period6})","WMA-weightedMovingAverage7":"WMA({period7})","WMA-weightedMovingAverage8":"WMA({period8})",SUPERTREND:"SuperTrend指標","SUPERTREND-short":"STrend","SUPERTREND-period":"週期","SUPERTREND-multiplier":"乘數","SUPERTREND-superTrend":"STrend({period},{multiplier})",ROC:"變化率","ROC-short":"變化率","ROC-period":"週期","ROC-roc":"變化率({period})"}})})),define("module/core/js/model/instrumenttypeenum",["require"],(function(e){"use strict";var t={};return t.values={},t.values.COMMODITIES="COMMODITIES",t.values.CURRENCIES="CURRENCIES",t.values.INDICES="INDICES",t.values.SHARES="SHARES",t.valueOf=function(e){var n=e.toUpperCase().trim();return t.values[n]||n},Object.freeze(t.values),Object.seal(t)})),define("module/indicators/js/calculator/highlowmovingaveragecalculator",["require","module/core/js/util/class","module/indicators/js/calculator/simplemovingaveragecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/indicators/js/calculator/simplemovingaveragecalculator");n.extend(t,i),t.create=function(){return new t};var o=t.prototype;return o._getPrice=function(e){return e.highPrice-e.lowPrice},Object.seal(o),Object.seal(t)})),define("module/indicators/js/calculator/typicalpricemovingaveragecalculator",["require","module/core/js/util/class","module/core/js/model/datapoint/hlocdatapoint","module/indicators/js/calculator/simplemovingaveragecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/hlocdatapoint"),o=e("module/indicators/js/calculator/simplemovingaveragecalculator");n.extend(t,o),t.create=function(){return new t};var r=t.prototype;return r._getPrice=function(e){return e instanceof i?(e.highPrice+e.lowPrice+e.closePrice)/3:e.value},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/keltnerbandcalculator",["require","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/highlowmovingaveragecalculator","module/indicators/js/calculator/typicalpricemovingaveragecalculator"],(function(e){"use strict";function t(){this._typicalMovingAverageCalculator=o.create(),this._highLowMovingAverageCalculator=i.create()}var n=e("module/core/js/model/datapoint/datapoint"),i=e("module/indicators/js/calculator/highlowmovingaveragecalculator"),o=e("module/indicators/js/calculator/typicalpricemovingaveragecalculator");t.create=function(){return new t};var r=t.prototype;return r._typicalMovingAverageCalculator=null,r._highLowMovingAverageCalculator=null,r.calculatePoints=function(e,t,i){var o,r,s,a=this._typicalMovingAverageCalculator.calculatePoints(e,t),l=this._highLowMovingAverageCalculator.calculatePoints(e,t),u=[];for(s=0;s<a.length;s++)o=a[s],r=l[s],u.push(new n(o.timestamp,o.value+i*r.value));return u},Object.seal(r),t})),define("module/indicators/js/calculator/keltnerchannelcalculator",["require","module/core/js/model/datapoint/clouddatapoint","module/indicators/js/calculator/keltnerbandcalculator"],(function(e){"use strict";function t(){this._keltnerBandCalculator=i.create()}var n=e("module/core/js/model/datapoint/clouddatapoint"),i=e("module/indicators/js/calculator/keltnerbandcalculator"),o=t.prototype;return o._keltnerBandCalculator=null,o.calculatePoints=function(e,t,n){var i=this._keltnerBandCalculator.calculatePoints(e,t,-n),o=this._keltnerBandCalculator.calculatePoints(e,t,n);return this._convertToCloudPoints(o,i)},o._convertToCloudPoints=function(e,t){var i,o,r=[];for(o=0;o<e.length;o++)i=new n(e[o].timestamp,e[o].value,t[o].value),r.push(i);return r},Object.seal(o),Object.seal(t)})),define("module/indicators/js/calculator/senkouspanacalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/highesthighlowestlowmidpointcalculator","module/core/js/indicator/calculator/timedisplacedcalculator"],(function(e){"use strict";function t(){this._senkouSpanACalculator=new n.series.SenkouSpanACalculator,this._highestHighLowestLowMidPointCalculator=new r}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/util/class"),o=e("module/core/js/model/datapoint/datapoint"),r=e("module/indicators/js/calculator/highesthighlowestlowmidpointcalculator"),s=e("module/core/js/indicator/calculator/timedisplacedcalculator");i.extend(t,s);var a=t.prototype;return a._senkouSpanACalculator=null,a._highestHighLowestLowMidPointCalculator=null,a._calculate=function(e,t,n){var i=this._highestHighLowestLowMidPointCalculator.calculatePoints(e,t),r=this._highestHighLowestLowMidPointCalculator.calculatePoints(e,n);return this._senkouSpanACalculator.calculatePoints(i,r).map(o.fromOtherPoint)},a._calculateDisplacement=function(e,t,n){return n},Object.seal(a),t})),define("module/indicators/js/calculator/senkouspanbcalculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/highesthighlowestlowmidpointcalculator","module/core/js/indicator/calculator/timedisplacedcalculator"],(function(e){"use strict";function t(){this._highestHighLowestLowMidPointCalculator=new o}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/indicators/js/calculator/highesthighlowestlowmidpointcalculator"),r=e("module/core/js/indicator/calculator/timedisplacedcalculator");n.extend(t,r);var s=t.prototype;return s._highestHighLowestLowMidPointCalculator=null,s._calculate=function(e,t,n){return this._highestHighLowestLowMidPointCalculator.calculatePoints(e,n).map(i.fromOtherPoint)},s._calculateDisplacement=function(e,t,n){return t},Object.seal(s),t})),define("module/indicators/js/calculator/kumocalculator",["require","module/core/js/util/class","module/core/js/model/datapoint/clouddatapoint","module/core/js/util/functional","module/indicators/js/calculator/senkouspanacalculator","module/indicators/js/calculator/senkouspanbcalculator","module/core/js/indicator/calculator/timedisplacedcalculator"],(function(e){"use strict";function t(){this._senkouSpanACalculator=new r,this._senkouSpanBCalculator=new s}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/clouddatapoint"),o=e("module/core/js/util/functional"),r=e("module/indicators/js/calculator/senkouspanacalculator"),s=e("module/indicators/js/calculator/senkouspanbcalculator"),a=e("module/core/js/indicator/calculator/timedisplacedcalculator");n.extend(t,a);var l=t.prototype;return l._senkouSpanACalculator=null,l._senkouSpanBCalculator=null,l.withDisplacementIterator=function(e){return this._senkouSpanACalculator.withDisplacementIterator(e),this._senkouSpanBCalculator.withDisplacementIterator(e),this},l.withConsolidationTimezoneOffset=function(e){return this._senkouSpanACalculator.withConsolidationTimezoneOffset(e),this._senkouSpanBCalculator.withConsolidationTimezoneOffset(e),this},l._calculate=function(e,t,n,o,r){for(var s,a,l=this._senkouSpanACalculator.calculatePoints(e,t,n,r),u=this._senkouSpanBCalculator.calculatePoints(e,n,o,r),c=[],d=0,h=0;d<l.length&&h<u.length;)a=l[d].timestamp-u[h].timestamp,0===a?(s=new i(l[d].timestamp,l[d].value,u[h].value),d++,h++):a>0?(c.length&&(s=new i(u[h].timestamp,null,u[h].value)),h++):a<0&&(c.length&&(s=new i(l[d].timestamp,l[d].value,null)),d++),s&&c.push(s);return c},l._calculateDisplacement=o.returns(0),Object.seal(l),t})),define("module/indicators/js/calculator/macdcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels"],(function(e){"use strict";function t(){this._emaCalculator=new n.series.ExponentialMovingAverageCalculator,this._spreadCalculator=new n.series.SpreadCalculator}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=t.prototype;return t.create=function(){return new t},i._emaCalculator=null,i._spreadCalculator=null,i.calculatePoints=function(e,t,n,i,o,r){var s=this._emaCalculator.calculatePoints(e,t,i,r),a=this._emaCalculator.calculatePoints(e,n,o,r);return this._spreadCalculator.calculatePoints(s,a)},Object.seal(i),Object.seal(t)})),define("module/indicators/js/calculator/macdsignalcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/indicators/js/calculator/macdcalculator"],(function(e){"use strict";function t(){this._emaCalculator=new n.series.ExponentialMovingAverageCalculator,this._macdCalculator=i.create()}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/indicators/js/calculator/macdcalculator"),o=t.prototype;return t.create=function(){return new t},o._emaCalculator=null,o._macdCalculator=null,o.calculatePoints=function(e,t,n,i,o,r,s,a){var l=this._macdCalculator.calculatePoints(e,t,n,o,r,a);return this._emaCalculator.calculatePoints(l,i,s,a)},Object.seal(o),Object.seal(t)})),define("module/indicators/js/calculator/macdhistogramcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/indicators/js/calculator/macdcalculator","module/indicators/js/calculator/macdsignalcalculator","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";function t(){this._spreadCalculator=new n.series.SpreadCalculator,this._macdCalculator=i.create(),this._macdSignalCalculator=o.create()}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/indicators/js/calculator/macdcalculator"),o=e("module/indicators/js/calculator/macdsignalcalculator"),r=e("module/core/js/model/datapoint/trenddatapoint"),s=t.prototype;return s._spreadCalculator=null,s._macdCalculator=null,s._macdSignalCalculator=null,s.calculatePoints=function(e,t,n,i,o,s,a,l){var u=this._macdCalculator.calculatePoints(e,t,n,o,s,l),c=this._macdSignalCalculator.calculatePoints(e,t,n,i,o,s,a,l);return this._spreadCalculator.calculatePoints(c,u).map(r.createFromDataPoint)},Object.seal(s),t})),define("module/indicators/js/calculator/momentumcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";function t(){this._calculator=new n.series.MomentumCalculator}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/model/datapoint/trenddatapoint"),o=t.prototype;return o._calculator=null,o.calculatePoints=function(e,t){return this._calculator.calculatePoints(e,t).map(i.createFromDataPoint)},Object.seal(o),t})),define("module/indicators/js/availability/baseindicatoravailability",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/event/subscribable"],(function(e){"use strict";function t(e,t){this._eventBus=t,this._indicator=e}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/event/subscribable");n.extend(t,o),t.create=function(e,n){return new t(e,n)},t.CHANGED="CHANGED";var r=t.prototype;return r._eventBus=null,r._indicator=null,r._needsUpdate=!1,r._resolution=null,r.withResolution=i.setter("_resolution"),r.initialise=function(){return this._needsUpdate=!0,this},r.initialiseIfNeeded=function(){this._needsUpdate||this.initialise()},r.destroy=function(){this._needsUpdate=!1,this._indicator.un(null,this),this._eventBus.unsubscribeAll(this)},r.isAvailable=i.always,r.getUnavailabilityReason=i.returns(null),r.updateAvailability=function(){this._needsUpdate&&this.fire(t.CHANGED,this._indicator)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/availability/nontickindicatoravailability",["require","module/indicators/js/availability/baseindicatoravailability","module/core/js/util/class","module/indicators/js/i18n","module/core/js/model/resolutionsenum"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/indicators/js/availability/baseindicatoravailability"),i=e("module/core/js/util/class"),o=e("module/indicators/js/i18n"),r=e("module/core/js/model/resolutionsenum");i.extend(t,n),t.create=function(e,n){return new t(e,n)};var s=t.prototype;return s.isAvailable=function(){return this._resolution!==r.values.TICK},s.getUnavailabilityReason=function(){return this.isAvailable()?null:o.get("notAvailableInTick")},Object.seal(s),Object.seal(t)})),define("module/indicators/js/enum/pivotpointformulaenum",["require","module/core/js/util/object"],(function(e){"use strict";var t=e("module/core/js/util/object"),n={};return n.HLC=0,n.HLO=1,n.HLOC=2,t.recursiveFreeze(n)})),define("module/indicators/js/calculator/pivotpointbasecalculator",["require","module/core/js/util/oop","module/indicators/js/enum/pivotpointformulaenum"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/oop"),i=e("module/indicators/js/enum/pivotpointformulaenum"),o=t.prototype;return o.calculateNewValue=n.abstractMethod,o.calculatePoints=function(e,t,n){var i,o,r,s=[],a=e[0],l=e[0];for(i=1;i<e.length;i++)l=e[i],o=this._getPivotValueByFormula(t,a.highPrice,a.lowPrice,l.openPrice,a.closePrice),r=this.calculateNewValue(o,l,a),s.push(r),a=l;return s},o._getPivotValueByFormula=function(e,t,n,o,r){var s;return e=e||i.HLC,e===i.HLC?s=(t+n+r)/3:e===i.HLOC?s=(t+n+r+o)/4:e===i.HLO&&(s=(t+n+o)/3),s},Object.seal(o),Object.seal(t)})),define("module/indicators/js/calculator/pivotpointpivotcalculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/pivotpointbasecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/indicators/js/calculator/pivotpointbasecalculator");n.extend(t,o);var r=t.prototype;return r.calculateNewValue=function(e,t,n){return new i(t.timestamp,e,t.volume)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/pivotpointr1calculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/pivotpointbasecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/indicators/js/calculator/pivotpointbasecalculator");n.extend(t,o);var r=t.prototype;return r.calculateNewValue=function(e,t,n){return new i(t.timestamp,e+(e-n.lowPrice),t.volume)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/pivotpointr2calculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/pivotpointbasecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/indicators/js/calculator/pivotpointbasecalculator");n.extend(t,o);var r=t.prototype;return r.calculateNewValue=function(e,t,n){
return new i(t.timestamp,e+(n.highPrice-n.lowPrice),t.volume)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/pivotpointr3calculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/pivotpointbasecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/indicators/js/calculator/pivotpointbasecalculator");n.extend(t,o);var r=t.prototype;return r.calculateNewValue=function(e,t,n){return new i(t.timestamp,n.highPrice+2*(e-n.lowPrice),t.volume)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/enum/pivotpointresolutionenum",["require","module/core/js/util/object"],(function(e){"use strict";var t=e("module/core/js/util/object"),n={};return n.DAILY=0,n.MONTHLY=1,n.WEEKLY=2,t.recursiveFreeze(n)})),define("module/indicators/js/resolutionchooser/pivotpointresolutionchooser",["require","module/core/js/util/class","module/indicators/js/enum/pivotpointresolutionenum","module/indicators/js/resolutionchooser/resolutionchooser","module/core/js/model/resolutionsenum"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/indicators/js/enum/pivotpointresolutionenum"),o=e("module/indicators/js/resolutionchooser/resolutionchooser"),r=e("module/core/js/model/resolutionsenum");n.extend(t,o),t.create=function(){return new t},t._getResolutionForEnum=function(e){switch(e){case i.DAILY:return r.values.DAY;case i.WEEKLY:return r.values.WEEK;case i.MONTHLY:return r.values.MONTH;default:throw new Error("Unknown pivot point resolution enum value: "+e)}};var s=t.prototype;return s.chooseResolution=function(e,n){return t._getResolutionForEnum(e.resolution)},Object.seal(s),Object.seal(t)})),define("module/indicators/js/calculator/pivotpoints1calculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/pivotpointbasecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/indicators/js/calculator/pivotpointbasecalculator");n.extend(t,o);var r=t.prototype;return r.calculateNewValue=function(e,t,n){return new i(t.timestamp,e-(n.highPrice-e),t.volume)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/pivotpoints2calculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/pivotpointbasecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/indicators/js/calculator/pivotpointbasecalculator");n.extend(t,o);var r=t.prototype;return r.calculateNewValue=function(e,t,n){return new i(t.timestamp,e-(n.highPrice-n.lowPrice),t.volume)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/pivotpoints3calculator",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint","module/indicators/js/calculator/pivotpointbasecalculator"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/indicators/js/calculator/pivotpointbasecalculator");n.extend(t,o);var r=t.prototype;return r.calculateNewValue=function(e,t,n){return new i(t.timestamp,n.lowPrice-2*(n.highPrice-e),t.volume)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/rateofchangecalculator",["require","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/datapoint/trenddatapoint"),i=t.prototype;return i.calculatePoints=function(e,t){var i,o,r,s,a=[];if(e.length<t)return a;for(s=t;s<e.length;s++)i=e[s].value,o=e[s-t].value,r=100*(i-o)/o,a.push(new n(e[s].timestamp,r,e[s].volume,r>0));return a},Object.seal(i),Object.seal(t)})),define("module/indicators/js/calculator/simplebollingernegativecalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/indicators/js/calculator/simplemovingaveragecalculator"],(function(e){"use strict";function t(){var e=new i,t=new n.series.StandardDeviationCalculator;this._calculator=new n.series.BollingerNegativeCalculator(e,t)}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/indicators/js/calculator/simplemovingaveragecalculator"),o=t.prototype;return o._calculator=null,o.calculatePoints=function(e,t,n){return this._calculator.calculatePoints(e,t,n)},Object.seal(o),t})),define("module/indicators/js/calculator/simplebollingerpositivecalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/indicators/js/calculator/simplemovingaveragecalculator"],(function(e){"use strict";function t(){var e=new i,t=new n.series.StandardDeviationCalculator;this._calculator=new n.series.BollingerPositiveCalculator(e,t)}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/indicators/js/calculator/simplemovingaveragecalculator"),o=t.prototype;return o._calculator=null,o.calculatePoints=function(e,t,n){return this._calculator.calculatePoints(e,t,n)},Object.seal(o),Object.seal(t)})),define("module/indicators/js/calculator/simplebollingerchannelcalculator",["require","module/core/js/model/datapoint/clouddatapoint","module/indicators/js/calculator/simplebollingernegativecalculator","module/indicators/js/calculator/simplebollingerpositivecalculator"],(function(e){"use strict";function t(){this._bollingerNegativeCalculator=new i,this._bollingerPositiveCalculator=new o}var n=e("module/core/js/model/datapoint/clouddatapoint"),i=e("module/indicators/js/calculator/simplebollingernegativecalculator"),o=e("module/indicators/js/calculator/simplebollingerpositivecalculator"),r=t.prototype;return r._bollingerNegativeCalculator=null,r._bollingerPositiveCalculator=null,r.calculatePoints=function(e,t,n){var i=this._bollingerNegativeCalculator.calculatePoints(e,t,n),o=this._bollingerPositiveCalculator.calculatePoints(e,t,n);return this._convertToCloudPoints(o,i)},r._convertToCloudPoints=function(e,t){var i,o,r=[];for(o=0;o<e.length;o++)i=new n(e[o].timestamp,e[o].value,t[o].value),r.push(i);return r},Object.seal(r),t})),define("module/indicators/js/view/steplabelpresentationmodel",["require"],(function(e){"use strict";function t(e,t){this.priceValue=e,this.textAccTime=t}t.id=function(e){return e.priceValue+"|"+e.textAccTime};var n=t.prototype;return n.priceValue=null,n.textAccTime=null,Object.seal(n),Object.seal(t)})),define("module/indicators/js/view/renderer/steplabelrenderer",["require","module/core/js/view/renderer/abstractprojectedrenderer","module/core/js/view/axisconstants","module/core/js/model/blocks","module/core/js/util/class","module/core/js/util/functional","module/indicators/js/i18n","module/core/js/model/instrumentmodelevents","module/core/js/view/projection/ordinals/screenprojection","module/indicators/js/view/steplabelpresentationmodel","module/core/js/util/svg","module/core/js/view/projection/ordinals/timeoffsetprojection","module/core/js/model/visibledaterangeevents","module/core/js/view/visiblewindow","module/core/js/view/projection/xyprojection"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments),this._pointType=r}var n=e("module/core/js/view/renderer/abstractprojectedrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/model/blocks"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/indicators/js/i18n"),l=e("module/core/js/model/instrumentmodelevents"),u=e("module/core/js/view/projection/ordinals/screenprojection"),c=e("module/indicators/js/view/steplabelpresentationmodel"),d=e("module/core/js/util/svg"),h=e("module/core/js/view/projection/ordinals/timeoffsetprojection"),p=e("module/core/js/model/visibledaterangeevents"),m=e("module/core/js/view/visiblewindow"),f=e("module/core/js/view/projection/xyprojection");r.extend(t,n),t.TEXT_BOTTOM_GAP=3,t.TEXT_RIGHT_GAP=1,t.PIXELS_REQUIRED_PER_LABEL=30;var _=t.prototype;return _._label=null,_._hidden=!1,_.withLabel=s.setter("_label"),_._getText=function(){return a.get(this._label)},_._createProjection=function(){return new f(h.create(),u.create())},_.initDom=function(){return this.dContainer.classed("labels",!0),this._showHideLabels(),this},_.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._eventBus.subscribe("chart/indicator/updated/"+this._indicator.name,this._showHideLabels,this),this._instrumentModel.on(l.BLOCKS_POINTS_ADDED+"-"+this._pointType,this.renderOnFrameEnd,this),this._visibleWindow.visibleDateRange.on(p.VISIBLE_BLOCKS_CHANGED,this.renderOnFrameEnd,this),this._visibleWindow.on(m.MOVED,this._handleVisibleWindowMoved,this)},_.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._instrumentModel.un(null,this),this._eventBus.unsubscribeAll(null,this),t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this)},_._handleVisibleWindowMoved=function(e){e&(i.ZOOMED|i.INITIALISED|i.RESIZED)&&this._showHideLabels()},_._showHideLabels=function(){var e=this._visibleWindow.visibleDateRange.accDurationToPixels(this._indicator.resolution.period),n=e<=t.PIXELS_REQUIRED_PER_LABEL;n!==this._hidden&&(this._hidden=n,this.dContainer.classed("hidden",this._hidden))},_.render=function(){var e;!this._hidden&&this._instrumentModel.getTimeline().hasIntervals()&&(e=this.dContainer.selectAll(".label").data(this._getStepLabels(),c.id),e.enter().append("svg:text").classed("label",!0).text(this._getText.bind(this)),e.exit().remove(),e.call(this._positionLabels.bind(this)))},_._getStepLabels=function(){var e,n,i,o,r=this._getVisiblePoints(),s=this._visibleWindow.visibleDateRange.pixelsToAccDuration(this._subView.getChartView().rightMargin),a=this._visibleWindow.visibleDateRange.accEnd()-s,l=this._instrumentModel.getTimeline(),u=l.accEnd(),d=this._visibleWindow.visibleDateRange.pixelsToAccDuration(t.PIXELS_REQUIRED_PER_LABEL),h=[];for(o=0;o<r.length;o++)i=o<r.length-1?this._convertAccTime(l,r[o+1]):u,n=this._convertAccTime(l,r[o])+this._indicator.resolution.period,e=Math.min(n,i),i>a&&(e=this._convertAccTime(l,r[o])<a-d?Math.min(n,a):this._convertAccTime(l,r[o])+d),h[o]=new c(r[o].value,e);return h},_._convertAccTime=function(e,t){return e.asAccTime(t.date,!0)},_._getVisiblePoints=function(){var e=this._visibleWindow.visibleDateRange.getVisibleBlocks(this._indicator.epic,this._indicator.resolution);return o.getPointsIncludingPrecedingAndSucceeding(e,this._pointType)},_._replot=function(e,t){this.renderOnFrameEnd()},_._positionLabels=function(e){var n=this._getForwardsProjectionInX(),i=this._projection.inX.roundValue,o=this._getForwardsProjectionInY(),r=this._projection.inY.roundValue;e.attr("transform",(function(e){return d.svgTranslateAttrXY(i(n(e.textAccTime)-t.TEXT_RIGHT_GAP),r(o(e.priceValue)-t.TEXT_BOTTOM_GAP))}))},Object.seal(_),Object.seal(t)})),define("module/indicators/js/view/renderer/steprenderer",["require","module/core/js/view/renderer/abstractprojectedrenderer","module/core/js/model/blocks","module/core/js/util/class","module/core/js/model/instrumentmodelevents","module/core/js/model/visibledaterangeevents","module/core/js/view/projection/ordinals/xmodelprojection","module/core/js/view/projection/xyprojection","module/core/js/view/projection/ordinals/ymodelprojection"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments),this._pointType=r}var n=e("module/core/js/view/renderer/abstractprojectedrenderer"),i=e("module/core/js/model/blocks"),o=e("module/core/js/util/class"),r=e("module/core/js/model/instrumentmodelevents"),s=e("module/core/js/model/visibledaterangeevents"),a=e("module/core/js/view/projection/ordinals/xmodelprojection"),l=e("module/core/js/view/projection/xyprojection"),u=e("module/core/js/view/projection/ordinals/ymodelprojection");o.extend(t,n);var c=t.prototype;return c.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._instrumentModel.on(r.BLOCKS_POINTS_ADDED+"-"+this._pointType,this.renderOnFrameEnd,this),this._instrumentModel.on(r.END_DATE_CHANGED,this.renderOnFrameEnd,this),this._visibleWindow.visibleDateRange.on(s.VISIBLE_BLOCKS_CHANGED,this._redrawIfNewBlocks,this)},c.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._instrumentModel.un(null,this),t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this)},c.initDom=function(){return this.dContainer.classed("path",!0).classed(this._pointType,!0),this._dPath=this.dContainer.append("path"),this},c._x=function(e){var t=this._getForwardsProjectionInX();return(0,this._projection.inX.roundValue)(t(Math.abs(e)))},c._y=function(e){var t=this._getForwardsProjectionInY();return(0,this._projection.inY.roundValue)(t(Math.abs(e)))},c._createProjection=function(e){var t=a.createForShowingTimeInX(this._instrumentModel.getActiveResolution().period),n=u.createForShowingValueInY(e);return new l(t,n)},c._redrawIfNewBlocks=function(e){e&&this.renderOnFrameEnd()},c.render=function(){var e,t;this._instrumentModel.getTimeline().hasIntervals()&&(e=this._getVisiblePoints(),e.length&&""!==(t=this._pathDAttribute(e))&&this._dPath.attr("d",t))},c._getVisiblePoints=function(){var e=this._visibleWindow.visibleDateRange.getVisibleBlocks(this._indicator.epic,this._indicator.resolution);return i.getPointsIncludingPrecedingAndSucceeding(e,this._pointType)},c._replot=function(e,t){this.renderOnFrameEnd()},c._pathDAttribute=function(e){var t,n,i,o,r,s,a,l=this._visibleWindow.visibleDateRange.getVisibleBlocks(),u=l[0].accStart,c=l[l.length-1].accEnd,d=this._instrumentModel.getTimeline(),h=d.accEnd(),p=this._indicator.resolution.period,m="";for(o=0;o<e.length;o++)n=this._convertAccTime(d,e[o]),i=this._convertAccTime(d,e[o])+p,n>c||i<u||(t=o<e.length-1?this._convertAccTime(d,e[o+1]):h,n=Math.max(n,u),i=Math.min(i,t,c,h),s=this._x(n),a=this._x(i),r=this._y(e[o].value),m+="M "+s+" "+r+" L "+a+" "+r+" ");return m},c._convertAccTime=function(e,t){return e.asAccTime(t.date,!0)},Object.seal(c),Object.seal(t)})),define("module/indicators/js/calculator/stochasticdcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/util/object","module/indicators/js/calculator/simplemovingaveragecalculator"],(function(e){"use strict";function t(){this._stochasticKCalculator=new n.series.StochasticKLineCalculator,this._movingAverageCalculator=o.create()}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/util/object"),o=e("module/indicators/js/calculator/simplemovingaveragecalculator"),r=t.prototype;return r._stochasticKCalculator=null,r._movingAverageCalculator=null,r.dPeriod=null,i.defineProperty(r,"kPeriod",{get:function(){return this._stochasticKCalculator.kPeriod},set:function(e){this._stochasticKCalculator.kPeriod=e}}),i.defineProperty(r,"slowingPeriod",{get:function(){return this._stochasticKCalculator.slowingPeriod},set:function(e){this._stochasticKCalculator.slowingPeriod=e}}),r.calculatePoints=function(e){var t=this._stochasticKCalculator.calculatePoints(e);return this._movingAverageCalculator.calculatePoints(t,this.dPeriod)},Object.seal(r),t})),define("module/indicators/js/calculator/stochasticjcalculator",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/core/js/util/object","module/indicators/js/calculator/stochasticdcalculator"],(function(e){"use strict";function t(){this._stochasticKCalculator=new n.series.StochasticKLineCalculator,this._stochasticDCalculator=new o,this._stochasticJCalculator=new n.series.StochasticJLineCalculator}var n=e("module/core/js/indicator/calculator/importedcalculatormodels"),i=e("module/core/js/util/object"),o=e("module/indicators/js/calculator/stochasticdcalculator"),r=t.prototype;return r._stochasticKCalculator=null,r._stochasticDCalculator=null,r._stochasticJCalculator=null,i.defineProperty(r,"kPeriod",{get:function(){return this._stochasticDCalculator.kPeriod},set:function(e){this._stochasticDCalculator.kPeriod=e,this._stochasticKCalculator.kPeriod=e}}),i.defineProperty(r,"slowingPeriod",{get:function(){return this._stochasticDCalculator.slowingPeriod},set:function(e){this._stochasticDCalculator.slowingPeriod=e,this._stochasticKCalculator.slowingPeriod=e}}),i.defineProperty(r,"dPeriod",{get:function(){return this._stochasticDCalculator.dPeriod},set:function(e){this._stochasticDCalculator.dPeriod=e}}),r.calculatePoints=function(e){var t=this._stochasticKCalculator.calculatePoints(e),n=this._stochasticDCalculator.calculatePoints(e);return this._stochasticJCalculator.calculatePoints(t,n)},Object.seal(r),t})),define("module/core/js/view/studyviewconstants",[],(function(){"use strict";var e={MIN_RESIZABLE_RELATIVE_HEIGHT:.05,MIN_LABEL_HEIGHT:32,DEFAULT_RELATIVE_HEIGHT:.3,DEFAULT_PRICES_MIN_HEIGHT:.33};return Object.freeze(e)})),define("module/indicators/js/input/volumeblocksinput",["require","module/indicators/js/input/blocksinput","module/core/js/util/class","module/core/js/model/instrumentmodelevents"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.apply(this,arguments)}var n=e("module/indicators/js/input/blocksinput"),i=e("module/core/js/util/class"),o=e("module/core/js/model/instrumentmodelevents");i.extend(t,n);var r=t.prototype;return r.volumePresent=!1,r.startRequestingPointsVia=function(e){t.superclass.startRequestingPointsVia.call(this,e);var n=e.instrumentModel;n.info?this._handleInstrumentInfoLoaded(n.info):n.on(o.INFO_LOADED,this._handleInstrumentInfoLoaded,this,{once:!0})},r.stopRequestingPointsVia=function(e){t.superclass.stopRequestingPointsVia.call(this,e),e.instrumentModel.un(null,this)},r._handleInstrumentInfoLoaded=function(e){this.volumePresent=e.volumePresent},r.collatePointsForBlocks=function(e){this.volumePresent&&t.superclass.collatePointsForBlocks.call(this,e)},r._handleBlocksPointsAdded=function(e){this.volumePresent&&t.superclass._handleBlocksPointsAdded.call(this,e)},Object.seal(r),Object.seal(t)})),define("module/indicators/js/calculator/volumecalculator",["require","module/core/js/model/datapoint/hlocdatapoint","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";function t(){}var n=e("module/core/js/model/datapoint/hlocdatapoint"),i=e("module/core/js/model/datapoint/trenddatapoint"),o=t.prototype;return o.calculatePoints=function(e){return e.map(this._mapToVolume)},o._mapToVolume=function(e){var t;switch(e.direction){case n.UP:t=!0;break;case n.DOWN:t=!1;break;default:t=null}return new i(e.timestamp,e.volume,e.volume,t)},Object.seal(o),t})),define("module/indicators/js/availability/volumeindicatoravailability",["require","module/indicators/js/availability/baseindicatoravailability","module/core/js/util/class","module/indicators/js/i18n","module/core/js/util/functional"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/indicators/js/availability/baseindicatoravailability"),i=e("module/core/js/util/class"),o=e("module/indicators/js/i18n"),r=e("module/core/js/util/functional");i.extend(t,n),t.create=function(e,n){return new t(e,n)};var s=t.prototype;return s._volumePresent=null,s.initialise=function(){return t.superclass.initialise.call(this),this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfoLoaded,this),this},s.destroy=function(){t.superclass.destroy.call(this),this._volumePresent=null},s.isAvailable=r.getter("_volumePresent"),s.getUnavailabilityReason=function(){return this.isAvailable()?null:o.get("volumeNotAvailable")},s._handleInstrumentInfoLoaded=function(e){this._volumePresent!==e.volumePresent&&(this._volumePresent=e.volumePresent,this.updateAvailability())},Object.seal(s),Object.seal(t)})),define("module/indicators/js/calculator/weightedmovingaveragecalculator",["require","lodash","module/core/js/model/datapoint/datapoint"],(function(e){"use strict";function t(){}var n=e("lodash"),i=e("module/core/js/model/datapoint/datapoint"),o=t.prototype;return o.calculatePoints=function(e,t){var o,r,s,a,l,u=[];if(e.length<t)return u;for(l=0;l+t<=e.length;l++)a=l+t-1,r=e.slice(l,l+t),s=n.map(r,this._getPrice),o=this._getAverage(s,t),u.push(new i(e[a].timestamp,o));return u},o._getAverage=function(e,t){var n,i=0,o=t*(t+1)/2,r=1;for(n=0;n<e.length;n++)i+=e[n]*r/o,r++;return i},o._getPrice=function(e){return e.value},Object.seal(o),Object.seal(t)})),define("module/indicators/js/config/indicatorsconfig",["require","module/core/js/indicator/calculator/importedcalculatormodels","module/indicators/js/calculator/arooncloudcalculator","module/indicators/js/calculator/aroondowncalculator","module/indicators/js/calculator/aroonupcalculator","module/indicators/js/calculator/averagedirectionalindexcalculator","module/indicators/js/calculator/awesomeoscillatorcalculator","module/core/js/view/renderer/barrenderer","module/indicators/js/input/blocksinput","module/indicators/js/calculator/chaikinvolatilitycalculator","module/indicators/js/calculator/chikouspancalculator","module/core/js/view/renderer/cloudrenderer","module/indicators/js/calculator/dpocalculator","module/indicators/js/calculator/directionalindexhistogramcalculator","module/indicators/js/enum/directionalindexstyleenum","module/indicators/js/calculator/donchianchannelcalculator","module/indicators/js/calculator/donchianmiddlecalculator","module/core/js/view/renderer/dotrenderer","module/core/js/util/functional","module/indicators/js/input/futureblocksinput","module/indicators/js/calculator/highesthighcalculator","module/indicators/js/calculator/highesthighlowestlowmidpointcalculator","module/indicators/js/i18n","module/core/js/model/instrumenttypeenum","module/indicators/js/calculator/keltnerbandcalculator","module/indicators/js/calculator/keltnerchannelcalculator","module/indicators/js/calculator/kumocalculator","module/indicators/js/calculator/lowestlowcalculator","module/indicators/js/calculator/macdcalculator","module/indicators/js/calculator/macdhistogramcalculator","module/indicators/js/calculator/macdsignalcalculator","module/indicators/js/calculator/minusdirectionalindexcalculator","module/indicators/js/calculator/momentumcalculator","module/indicators/js/availability/nontickindicatoravailability","module/core/js/util/object","module/core/js/view/renderer/pathrenderer","module/indicators/js/enum/pivotpointformulaenum","module/indicators/js/calculator/pivotpointpivotcalculator","module/indicators/js/calculator/pivotpointr1calculator","module/indicators/js/calculator/pivotpointr2calculator","module/indicators/js/calculator/pivotpointr3calculator","module/indicators/js/resolutionchooser/pivotpointresolutionchooser","module/indicators/js/enum/pivotpointresolutionenum","module/indicators/js/calculator/pivotpoints1calculator","module/indicators/js/calculator/pivotpoints2calculator","module/indicators/js/calculator/pivotpoints3calculator","module/indicators/js/calculator/plusdirectionalindexcalculator","module/indicators/js/calculator/rateofchangecalculator","module/indicators/js/calculator/senkouspanacalculator","module/indicators/js/calculator/senkouspanbcalculator","module/indicators/js/calculator/simplebollingerchannelcalculator","module/indicators/js/calculator/simplebollingernegativecalculator","module/indicators/js/calculator/simplebollingerpositivecalculator","module/indicators/js/calculator/simplemovingaveragecalculator","module/indicators/js/view/renderer/steplabelrenderer","module/indicators/js/view/renderer/steprenderer","module/indicators/js/calculator/stochasticdcalculator","module/indicators/js/calculator/stochasticjcalculator","module/core/js/view/studyviewconstants","module/indicators/js/calculator/typicalpricemovingaveragecalculator","module/indicators/js/input/volumeblocksinput","module/indicators/js/calculator/volumecalculator","module/indicators/js/availability/volumeindicatoravailability","module/indicators/js/calculator/weightedmovingaveragecalculator"],(function(e){"use strict";function t(){}function n(e){return e.preferredHeight?e.preferredHeight:se.MIN_RESIZABLE_RELATIVE_HEIGHT}var i=e("module/core/js/indicator/calculator/importedcalculatormodels"),o=e("module/indicators/js/calculator/arooncloudcalculator"),r=e("module/indicators/js/calculator/aroondowncalculator"),s=e("module/indicators/js/calculator/aroonupcalculator"),a=e("module/indicators/js/calculator/averagedirectionalindexcalculator"),l=e("module/indicators/js/calculator/awesomeoscillatorcalculator"),u=e("module/core/js/view/renderer/barrenderer"),c=e("module/indicators/js/input/blocksinput"),d=e("module/indicators/js/calculator/chaikinvolatilitycalculator"),h=e("module/indicators/js/calculator/chikouspancalculator"),p=e("module/core/js/view/renderer/cloudrenderer"),m=e("module/indicators/js/calculator/dpocalculator"),f=e("module/indicators/js/calculator/directionalindexhistogramcalculator"),_=e("module/indicators/js/enum/directionalindexstyleenum"),g=e("module/indicators/js/calculator/donchianchannelcalculator"),v=e("module/indicators/js/calculator/donchianmiddlecalculator"),y=e("module/core/js/view/renderer/dotrenderer"),M=e("module/core/js/util/functional"),b=e("module/indicators/js/input/futureblocksinput"),A=e("module/indicators/js/calculator/highesthighcalculator"),T=e("module/indicators/js/calculator/highesthighlowestlowmidpointcalculator"),E=e("module/indicators/js/i18n"),w=e("module/core/js/model/instrumenttypeenum"),O=e("module/indicators/js/calculator/keltnerbandcalculator"),I=e("module/indicators/js/calculator/keltnerchannelcalculator"),S=e("module/indicators/js/calculator/kumocalculator"),j=e("module/indicators/js/calculator/lowestlowcalculator"),C=e("module/indicators/js/calculator/macdcalculator"),D=e("module/indicators/js/calculator/macdhistogramcalculator"),R=e("module/indicators/js/calculator/macdsignalcalculator"),L=e("module/indicators/js/calculator/minusdirectionalindexcalculator"),N=e("module/indicators/js/calculator/momentumcalculator"),k=e("module/indicators/js/availability/nontickindicatoravailability"),P=e("module/core/js/util/object"),x=e("module/core/js/view/renderer/pathrenderer"),V=e("module/indicators/js/enum/pivotpointformulaenum"),H=e("module/indicators/js/calculator/pivotpointpivotcalculator"),B=e("module/indicators/js/calculator/pivotpointr1calculator"),W=e("module/indicators/js/calculator/pivotpointr2calculator"),F=e("module/indicators/js/calculator/pivotpointr3calculator"),U=e("module/indicators/js/resolutionchooser/pivotpointresolutionchooser"),G=e("module/indicators/js/enum/pivotpointresolutionenum"),Y=e("module/indicators/js/calculator/pivotpoints1calculator"),z=e("module/indicators/js/calculator/pivotpoints2calculator"),q=e("module/indicators/js/calculator/pivotpoints3calculator"),K=e("module/indicators/js/calculator/plusdirectionalindexcalculator"),Z=e("module/indicators/js/calculator/rateofchangecalculator"),X=e("module/indicators/js/calculator/senkouspanacalculator"),J=e("module/indicators/js/calculator/senkouspanbcalculator"),Q=e("module/indicators/js/calculator/simplebollingerchannelcalculator"),$=e("module/indicators/js/calculator/simplebollingernegativecalculator"),ee=e("module/indicators/js/calculator/simplebollingerpositivecalculator"),te=e("module/indicators/js/calculator/simplemovingaveragecalculator"),ne=e("module/indicators/js/view/renderer/steplabelrenderer"),ie=e("module/indicators/js/view/renderer/steprenderer"),oe=e("module/indicators/js/calculator/stochasticdcalculator"),re=e("module/indicators/js/calculator/stochasticjcalculator"),se=e("module/core/js/view/studyviewconstants"),ae=e("module/indicators/js/calculator/typicalpricemovingaveragecalculator"),le=e("module/indicators/js/input/volumeblocksinput"),ue=e("module/indicators/js/calculator/volumecalculator"),ce=e("module/indicators/js/availability/volumeindicatoravailability"),de=e("module/indicators/js/calculator/weightedmovingaveragecalculator");t.getNumericConstraints=function(e,t,n,i,o){return{type:"number",color:e,defaultValue:n,serverValue:function(e){return e[t]},range:i,decimalPoints:o}};var he={AROON:{settings:{period:{type:"number",defaultValue:14,serverValue:M.plucker("period"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"AROON",location:"OSCILLATOR",period:e.period,preferredHeight:e.preferredHeight}},subIndicators:{AROON_UP:{input:{type:c},calculator:{type:s,arguments:["settings.period + 1"]},renderers:{aroonUp:{type:x,pointType:"aroonUp"}},numberOfTrailingPoints:"settings.period + 1",outputPointType:"aroonUp"},AROON_DOWN:{input:{type:c},calculator:{type:r,arguments:["settings.period + 1"]},renderers:{aroonDown:{type:x,pointType:"aroonDown"}},numberOfTrailingPoints:"settings.period + 1",outputPointType:"aroonDown"},AROON_CLOUD:{input:{type:c},calculator:{type:o,arguments:["settings.period + 1"]},renderers:{aroonCloud:{type:p,pointType:"aroonCloud"}},showOnTooltip:!1,numberOfTrailingPoints:"settings.period + 1",outputPointType:"aroonCloud"}},study:"aroon"},ATR:{settings:{period:{type:"number",defaultValue:14,serverValue:M.plucker("period"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"AVERAGE_TRUE_RANGE",location:"OSCILLATOR",period:e.period,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:i.series.AverageTrueRangeCalculator,arguments:["settings.period"]},renderers:{averageTrueRange:{type:x,pointType:"averageTrueRange",properties:{fill:!0}}},numberOfTrailingPoints:"4 * settings.period",outputPointType:"averageTrueRange",study:"atr"},AWESOME:{settings:{shortPeriod:{type:"number",defaultValue:5,serverValue:M.plucker("shortPeriod"),range:{min:1,max:999},decimalPoints:0},longPeriod:{type:"number",defaultValue:34,serverValue:M.plucker("longPeriod"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"AWESOME_OSCILLATOR",location:"OSCILLATOR",shortPeriod:e.shortPeriod,longPeriod:e.longPeriod,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:l,arguments:["settings.shortPeriod","settings.longPeriod"]},renderers:{awesome:{type:u,pointType:"awesome"}},numberOfTrailingPoints:"Math.max(settings.shortPeriod, settings.longPeriod)",outputPointType:"awesome",study:"awesome"},BOL:{settings:{period:{type:"number",color:"#D5680F",defaultValue:20,serverValue:M.plucker("deviationPeriod"),range:{min:2,max:999},decimalPoints:0},standardDeviation:{type:"number",color:"#D5680F",defaultValue:2,serverValue:M.plucker("standardDeviation"),range:{min:.01,max:999.99,step:.01},decimalPoints:2}},serverSettings:function(e){return{type:"BOLLINGER_BAND",location:"STUDY",standardDeviation:e.standardDeviation,deviationPeriod:e.period}},subIndicators:{BOLPOS:{input:{type:c},calculator:{type:ee,arguments:["settings.period","settings.standardDeviation"]},renderers:{bollingerPositiveBand:{type:x,pointType:"bollingerPositiveBand"}},numberOfTrailingPoints:"settings.period - 1",outputPointType:"bollingerPositiveBand"},BOLMA:{input:{type:c},calculator:{type:te,arguments:["settings.period"]},renderers:{bollingerMovingAverageBand:{type:x,pointType:"bollingerMovingAverageBand"}},numberOfTrailingPoints:"settings.period - 1",outputPointType:"bollingerMovingAverageBand"},BOLNEG:{input:{type:c},calculator:{type:$,arguments:["settings.period","settings.standardDeviation"]},renderers:{bollingerNegativeBand:{type:x,pointType:"bollingerNegativeBand"}},numberOfTrailingPoints:"settings.period - 1",outputPointType:"bollingerNegativeBand"},BOLCHANNEL:{input:{type:c},calculator:{type:Q,arguments:["settings.period","settings.standardDeviation"]},renderers:{
bollingerChannel:{type:p,pointType:"bollingerChannel",properties:{relativeWeighting:-2}}},showOnTooltip:!1,numberOfTrailingPoints:"settings.period - 1",outputPointType:"bollingerChannel"}},study:"prices"},CHAIKIN:{availability:k,settings:{emaPeriod:{type:"number",defaultValue:10,serverValue:M.plucker("emaPeriod"),range:{min:1,max:999},decimalPoints:0},pastPeriod:{type:"number",defaultValue:10,serverValue:M.plucker("chaikinPeriod"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"CHAIKIN_VOLATILITY",location:"OSCILLATOR",chaikinPeriod:e.pastPeriod,emaPeriod:e.emaPeriod,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:d,arguments:["settings.emaPeriod","settings.pastPeriod"]},renderers:{chaikinVolatility:{type:x,pointType:"chaikinVolatility",properties:{fill:!0,fillIntersection:"lowestValue"}}},numberOfTrailingPoints:"4 * (settings.emaPeriod + settings.pastPeriod)",outputPointType:"chaikinVolatility",study:"chaikin"},CCI:{settings:{period:{type:"number",defaultValue:20,serverValue:M.plucker("period"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"CCI",location:"OSCILLATOR",period:e.period,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:i.series.CommoditiesChannelIndexCalculator,arguments:["settings.period"]},renderers:{cci:{type:x,pointType:"cci",properties:{strokeGradient:{topArea:[100,200],neutral:[-100,100],bottomArea:[-200,-100]},fillGradient:{topArea:[100,200],blank:[-100,100],bottomArea:[-200,-100]},fillIntersection:0}}},numberOfTrailingPoints:"settings.period",outputPointType:"cci",study:"cci"},DPO:{settings:{period:{type:"number",defaultValue:20,serverValue:M.plucker("period"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"DETRENDED_PRICE_OSCILLATOR",location:"OSCILLATOR",period:e.period,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:m,arguments:["settings.period"]},renderers:{dpo:{type:x,pointType:"dpo",properties:{strokeGradient:{topArea:[0,10],bottomArea:[-10,0]},fillGradient:{topArea:[0,10],bottomArea:[-10,0]}}}},numberOfTrailingPoints:"2 * settings.period",outputPointType:"dpo",study:"dpo"},DMI:{settings:{period:{type:"number",defaultValue:14,serverValue:M.plucker("period"),range:{min:2,max:999},decimalPoints:0},style:{type:"enum",options:[{localisationKey:"DMI-line",value:_.LINE},{localisationKey:"DMI-diHistogram",value:_.HISTOGRAM}],i18n:E,defaultValue:_.LINE,serverValue:function(e){return e.isShowingHistogram?_.HISTOGRAM:_.LINE}},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{isShowingHistogram:e.style===_.HISTOGRAM,type:"DMI",location:"OSCILLATOR",period:e.period,preferredHeight:e.preferredHeight}},subIndicators:{DI_PLUS:{input:{type:c},calculator:{type:K,arguments:["settings.period","settings.style"]},renderers:{diPlus:{type:x,pointType:"diPlus"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.period) + 1",outputPointType:"diPlus"},DI_MINUS:{input:{type:c},calculator:{type:L,arguments:["settings.period","settings.style"]},renderers:{diMinus:{type:x,pointType:"diMinus"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.period) + 1",outputPointType:"diMinus"},DI_HISTOGRAM:{input:{type:c},calculator:{type:f,arguments:["settings.period","settings.style"]},renderers:{diHistogram:{type:u,pointType:"diHistogram"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.period) + 1",outputPointType:"diHistogram"},ADX:{input:{type:c},calculator:{type:a,arguments:["settings.period"]},renderers:{adx:{type:x,pointType:"adx"}},numberOfTrailingPoints:"2 * (Math.max(50, 4 * settings.period) + 1)",outputPointType:"adx"}},study:"dmi"},DONCHIAN:{settings:{period:{type:"number",color:"#56a0d3",defaultValue:20,serverValue:M.plucker("period"),range:{min:2,max:999},decimalPoints:0}},serverSettings:function(e){return{type:"DONCHIAN",location:"STUDY",period:e.period}},subIndicators:{DONCHIANUP:{input:{type:c},calculator:{type:A,arguments:["settings.period"]},renderers:{donchianUp:{type:x,pointType:"donchianUp"}},numberOfTrailingPoints:"settings.period + 1",outputPointType:"donchianUp"},DONCHIANMIDDLE:{input:{type:c},calculator:{type:v,arguments:["settings.period"]},renderers:{donchianMiddle:{type:x,pointType:"donchianMiddle"}},numberOfTrailingPoints:"settings.period + 1",outputPointType:"donchianMiddle"},DONCHIANDOWN:{input:{type:c},calculator:{type:j,arguments:["settings.period"]},renderers:{donchianDown:{type:x,pointType:"donchianDown"}},numberOfTrailingPoints:"settings.period + 1",outputPointType:"donchianDown"},DONCHIANCHANNEL:{input:{type:c},calculator:{type:g,arguments:["settings.period"]},renderers:{donchianChannel:{type:p,pointType:"donchianChannel",properties:{relativeWeighting:-3}}},showOnTooltip:!1,numberOfTrailingPoints:"settings.period + 1",outputPointType:"donchianChannel"}},study:"prices"},EMA:{stylesMapping:{ema1:"period1",ema2:"period2",ema3:"period3",ema4:"period4",ema5:"period5",ema6:"period6",ema7:"period7",ema8:"period8"},settings:{period1:t.getNumericConstraints("#634D81","period1",20,{min:2,max:999},0),period2:t.getNumericConstraints("#2E9BA3","period2",50,{min:2,max:999},0),period3:t.getNumericConstraints("#C78C20","period3",100,{min:2,max:999},0),period4:t.getNumericConstraints("#9090A0","period4",NaN,{min:2,max:999},0),period5:t.getNumericConstraints("#F45D24","period5",NaN,{min:2,max:999},0),period6:t.getNumericConstraints("#57B159","period6",NaN,{min:2,max:999},0),period7:t.getNumericConstraints("#5698D3","period7",NaN,{min:2,max:999},0),period8:t.getNumericConstraints("#B6AAC7","period8",NaN,{min:2,max:999},0)},serverSettings:function(e){return{type:"EMA",location:"STUDY",period1:e.period1,period2:e.period2,period3:e.period3,period4:e.period4,period5:e.period5,period6:e.period6,period7:e.period7,period8:e.period8,isVisible1:!0,isVisible2:!0,isVisible3:!0}},subIndicators:{EMA1:{input:{type:c},calculator:{type:i.series.ExponentialMovingAverageCalculator,arguments:["settings.period1","2/(settings.period1 + 1)"]},renderers:{exponentialMovingAverage1:{type:x,pointType:"exponentialMovingAverage1"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.period1)",outputPointType:"exponentialMovingAverage1"},EMA2:{input:{type:c},calculator:{type:i.series.ExponentialMovingAverageCalculator,arguments:["settings.period2","2/(settings.period2 + 1)"]},renderers:{exponentialMovingAverage2:{type:x,pointType:"exponentialMovingAverage2"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.period2)",outputPointType:"exponentialMovingAverage2"},EMA3:{input:{type:c},calculator:{type:i.series.ExponentialMovingAverageCalculator,arguments:["settings.period3","2/(settings.period3 + 1)"]},renderers:{exponentialMovingAverage3:{type:x,pointType:"exponentialMovingAverage3"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.period3)",outputPointType:"exponentialMovingAverage3"},EMA4:{input:{type:c},calculator:{type:i.series.ExponentialMovingAverageCalculator,arguments:["settings.period4","2/(settings.period4 + 1)"]},renderers:{exponentialMovingAverage4:{type:x,pointType:"exponentialMovingAverage4"}},numberOfTrailingPoints:"Math.max(120, 4 * settings.period4)",outputPointType:"exponentialMovingAverage4"},EMA5:{input:{type:c},calculator:{type:i.series.ExponentialMovingAverageCalculator,arguments:["settings.period5","2/(settings.period5 + 1)"]},renderers:{exponentialMovingAverage5:{type:x,pointType:"exponentialMovingAverage5"}},numberOfTrailingPoints:"Math.max(120, 4 * settings.period5)",outputPointType:"exponentialMovingAverage5"},EMA6:{input:{type:c},calculator:{type:i.series.ExponentialMovingAverageCalculator,arguments:["settings.period6","2/(settings.period6 + 1)"]},renderers:{exponentialMovingAverage6:{type:x,pointType:"exponentialMovingAverage6"}},numberOfTrailingPoints:"Math.max(120, 4 * settings.period6)",outputPointType:"exponentialMovingAverage6"},EMA7:{input:{type:c},calculator:{type:i.series.ExponentialMovingAverageCalculator,arguments:["settings.period7","2/(settings.period7 + 1)"]},renderers:{exponentialMovingAverage7:{type:x,pointType:"exponentialMovingAverage7"}},numberOfTrailingPoints:"Math.max(120, 4 * settings.period7)",outputPointType:"exponentialMovingAverage7"},EMA8:{input:{type:c},calculator:{type:i.series.ExponentialMovingAverageCalculator,arguments:["settings.period8","2/(settings.period8 + 1)"]},renderers:{exponentialMovingAverage8:{type:x,pointType:"exponentialMovingAverage8"}},numberOfTrailingPoints:"Math.max(120, 4 * settings.period8)",outputPointType:"exponentialMovingAverage8"}},study:"prices"},ICHIMOKU:{availability:k,settings:{shortPeriod:{type:"number",defaultValue:9,serverValue:M.plucker("shortPeriod"),range:{min:1,max:999},decimalPoints:0},longPeriod:{type:"number",defaultValue:26,serverValue:M.plucker("longPeriod"),range:{min:1,max:999},decimalPoints:0},signalPeriod:{type:"number",defaultValue:52,serverValue:M.plucker("signalPeriod"),range:{min:1,max:999},decimalPoints:0}},serverSettings:function(e){return{type:"ICHIMOKU",location:"STUDY",longPeriod:e.longPeriod,shortPeriod:e.shortPeriod,signalPeriod:e.signalPeriod}},subIndicators:{TENKAN:{input:{type:c},calculator:{type:T,arguments:["settings.shortPeriod"]},renderers:{tenkan:{type:x,pointType:"tenkan"}},numberOfTrailingPoints:"settings.shortPeriod",outputPointType:"tenkan"},KIJUN:{input:{type:c},calculator:{type:T,arguments:["settings.longPeriod"]},renderers:{kijun:{type:x,pointType:"kijun"}},numberOfTrailingPoints:"settings.longPeriod",outputPointType:"kijun"},SPANA:{input:{type:c},calculator:{type:X,arguments:["settings.shortPeriod","settings.longPeriod"]},renderers:{spana:{type:x,pointType:"spana"}},numberOfTrailingPoints:"Math.max(settings.shortPeriod, settings.longPeriod, settings.signalPeriod) + settings.longPeriod",outputPointType:"spana"},SPANB:{input:{type:c},calculator:{type:J,arguments:["settings.longPeriod","settings.signalPeriod"]},renderers:{spanb:{type:x,pointType:"spanb"}},numberOfTrailingPoints:"Math.max(settings.shortPeriod, settings.longPeriod, settings.signalPeriod) + settings.longPeriod",outputPointType:"spanb"},KUMO:{input:{type:c},calculator:{type:S,arguments:["settings.shortPeriod","settings.longPeriod","settings.signalPeriod"]},renderers:{kumo:{type:p,pointType:"kumo"}},showOnTooltip:!1,numberOfTrailingPoints:"Math.max(settings.shortPeriod, settings.longPeriod, settings.signalPeriod) + settings.longPeriod",outputPointType:"kumo",study:"prices"},CHIKOU:{input:{type:b},calculator:{type:h,arguments:["settings.longPeriod"]},renderers:{chikou:{type:x,pointType:"chikou"}},numberOfTrailingPoints:"settings.longPeriod",outputPointType:"chikou"}},study:"prices"},KDJ:{settings:{periodK:{type:"number",defaultValue:5,serverValue:M.plucker("kPeriod"),range:{min:2,max:999},decimalPoints:0},slowing:{type:"number",defaultValue:3,serverValue:M.plucker("slowingPeriod"),range:{min:1,max:999},decimalPoints:0},periodD:{type:"number",color:"#E62322",defaultValue:3,serverValue:M.plucker("dPeriod"),range:{min:2,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"KDJ",location:"OSCILLATOR",dPeriod:e.periodD,kPeriod:e.periodK,slowingPeriod:e.slowing,preferredHeight:e.preferredHeight}},subIndicators:{STOCHASTIC_K:{input:{type:c},calculator:{type:i.series.StochasticKLineCalculator,properties:{kPeriod:"settings.periodK",slowingPeriod:"settings.slowing"}},renderers:{stochasticK:{type:x,pointType:"KDJStochasticK"}},numberOfTrailingPoints:"4 * Math.max(settings.periodK, settings.slowing)",outputPointType:"KDJStochasticK"},STOCHASTIC_D:{input:{type:c},calculator:{type:oe,properties:{kPeriod:"settings.periodK",slowingPeriod:"settings.slowing",dPeriod:"settings.periodD"}},renderers:{stochasticD:{type:x,pointType:"KDJStochasticD"}},numberOfTrailingPoints:"8 * Math.max(settings.periodK, settings.slowing, settings.periodD)",outputPointType:"KDJStochasticD"},STOCHASTIC_J:{input:{type:c},calculator:{type:re,properties:{kPeriod:"settings.periodK",slowingPeriod:"settings.slowing",dPeriod:"settings.periodD"}},renderers:{stochasticJ:{type:x,pointType:"KDJStochasticJ"}},numberOfTrailingPoints:"8 * Math.max(settings.periodK, settings.slowing, settings.periodD)",outputPointType:"KDJStochasticJ"}},study:"kdj"},KELTNER:{settings:{period:{type:"number",color:"#8000c0",defaultValue:20,serverValue:M.plucker("period"),range:{min:2,max:999},decimalPoints:0}},serverSettings:function(e){return{type:"KELTNER",location:"STUDY",period:e.period}},subIndicators:{KELTNERUP:{input:{type:c},calculator:{type:O,arguments:["settings.period","1"]},renderers:{keltnerUp:{type:x,pointType:"keltnerUp"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.period)",outputPointType:"keltnerUp"},KELTNERMIDDLE:{input:{type:c},calculator:{type:ae,arguments:["settings.period"]},renderers:{keltnerMiddle:{type:x,pointType:"keltnerMiddle"}},numberOfTrailingPoints:"settings.period",outputPointType:"keltnerMiddle"},KELTNERDOWN:{input:{type:c},calculator:{type:O,arguments:["settings.period","-1"]},renderers:{keltnerDown:{type:x,pointType:"keltnerDown"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.period)",outputPointType:"keltnerDown"},KELTNERCHANNEL:{input:{type:c},calculator:{type:I,arguments:["settings.period","1"]},renderers:{keltnerChannel:{type:p,pointType:"keltnerChannel",properties:{relativeWeighting:-4}}},showOnTooltip:!1,numberOfTrailingPoints:"settings.period",outputPointType:"keltnerChannel"}},study:"prices"},MACD:{settings:{fastEmaPeriod:{type:"number",defaultValue:12,serverValue:M.plucker("fastEmaPeriod"),range:{min:2,max:999},decimalPoints:0},slowEmaPeriod:{type:"number",defaultValue:26,serverValue:M.plucker("slowEmaPeriod"),range:{min:2,max:999},decimalPoints:0},signalEmaPeriod:{type:"number",defaultValue:9,serverValue:M.plucker("signalLinePeriod"),range:{min:2,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"MACD",location:"OSCILLATOR",signalLinePeriod:e.signalEmaPeriod,slowEmaPeriod:e.slowEmaPeriod,fastEmaPeriod:e.fastEmaPeriod,preferredHeight:e.preferredHeight}},subIndicators:{MACDHIST:{input:{type:c},calculator:{type:D,arguments:["settings.slowEmaPeriod","settings.fastEmaPeriod","settings.signalEmaPeriod","2/(settings.slowEmaPeriod + 1)","2/(settings.fastEmaPeriod + 1)","2/(settings.signalEmaPeriod + 1)"]},renderers:{macdHistogram:{type:u,pointType:"macdHistogram"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.signalEmaPeriod) + Math.max(50, 4 * Math.max(settings.slowEmaPeriod, settings.fastEmaPeriod))",outputPointType:"macdHistogram"},MACDLINE:{input:{type:c},calculator:{type:C,arguments:["settings.slowEmaPeriod","settings.fastEmaPeriod","2/(settings.slowEmaPeriod + 1)","2/(settings.fastEmaPeriod + 1)"]},renderers:{macdLine:{type:x,pointType:"macd"}},numberOfTrailingPoints:"Math.max(50, 4 * Math.max(settings.slowEmaPeriod, settings.fastEmaPeriod))",outputPointType:"macd"},MACDSIG:{input:{type:c},calculator:{type:R,arguments:["settings.slowEmaPeriod","settings.fastEmaPeriod","settings.signalEmaPeriod","2/(settings.slowEmaPeriod + 1)","2/(settings.fastEmaPeriod + 1)","2/(settings.signalEmaPeriod + 1)"]},renderers:{macdSignal:{type:x,pointType:"macdSignal"}},numberOfTrailingPoints:"Math.max(50, 4 * settings.signalEmaPeriod) + Math.max(50, 4 * Math.max(settings.slowEmaPeriod, settings.fastEmaPeriod))",outputPointType:"macdSignal"}},study:"macd"},MOMENTUM:{settings:{period:{type:"number",defaultValue:12,serverValue:M.plucker("momentumPeriod"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"MOMENTUM",location:"OSCILLATOR",momentumPeriod:e.period,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:N,arguments:["settings.period"]},renderers:{momentum:{type:x,pointType:"momentum",properties:{strokeGradient:{topArea:[0,1],bottomArea:[-1,0]},fillGradient:{topArea:[0,1],bottomArea:[-1,0]}}}},numberOfTrailingPoints:"settings.period",outputPointType:"momentum",study:"momentum"},MFI:{availability:ce,settings:{period:{type:"number",defaultValue:14,serverValue:M.plucker("period"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"MONEY_FLOW_INDEX",location:"OSCILLATOR",period:e.period,preferredHeight:e.preferredHeight}},input:{type:le},calculator:{type:i.series.MoneyFlowIndexCalculator,arguments:["settings.period + 1"]},renderers:{moneyFlowIndex:{type:x,pointType:"moneyFlowIndex",properties:{strokeGradient:{topArea:[80,100],neutral:[20,80],bottomArea:[0,20]},fillGradient:{topArea:[80,100],blank:[20,80],bottomArea:[0,20]},fillIntersection:50}}},numberOfTrailingPoints:"settings.period",outputPointType:"moneyFlowIndex",study:"mfi"},MVAVG:{stylesMapping:{movingAverage1:"period1",movingAverage2:"period2",movingAverage3:"period3",movingAverage4:"period4",movingAverage5:"period5",movingAverage6:"period6",movingAverage7:"period7",movingAverage8:"period8"},settings:{period1:t.getNumericConstraints("#E01B1C","period1",20,{min:2,max:999},0),period2:t.getNumericConstraints("#282830","period2",50,{min:2,max:999},0),period3:t.getNumericConstraints("#3BA43B","period3",100,{min:2,max:999},0),period4:t.getNumericConstraints("#F5AD1C","period4",NaN,{min:2,max:999},0),period5:t.getNumericConstraints("#3987CC","period5",NaN,{min:2,max:999},0),period6:t.getNumericConstraints("#686878","period6",NaN,{min:2,max:999},0),period7:t.getNumericConstraints("#F34706","period7",NaN,{min:2,max:999},0),period8:t.getNumericConstraints("#6D558E","period8",NaN,{min:2,max:999},0)},serverSettings:function(e){return{type:"MOVING_AVERAGE",location:"STUDY",period1:e.period1,period2:e.period2,period3:e.period3,period4:e.period4,period5:e.period5,period6:e.period6,period7:e.period7,period8:e.period8,isVisible1:!0,isVisible2:!0,isVisible3:!0}},subIndicators:{MA1:{input:{type:c},calculator:{type:te,arguments:["settings.period1"]},renderers:{movingAverage1:{type:x,pointType:"movingAverage1"}},numberOfTrailingPoints:"settings.period1 - 1",outputPointType:"movingAverage1"},MA2:{input:{type:c},calculator:{type:te,arguments:["settings.period2"]},renderers:{movingAverage2:{type:x,pointType:"movingAverage2"}},numberOfTrailingPoints:"settings.period2 - 1",outputPointType:"movingAverage2"},MA3:{input:{type:c},calculator:{type:te,arguments:["settings.period3"]},renderers:{movingAverage3:{type:x,pointType:"movingAverage3"}},numberOfTrailingPoints:"settings.period3 - 1",outputPointType:"movingAverage3"},MA4:{input:{type:c},calculator:{type:te,arguments:["settings.period4"]},renderers:{movingAverage4:{type:x,pointType:"movingAverage4"}},numberOfTrailingPoints:"settings.period4 - 1",outputPointType:"movingAverage4"},MA5:{input:{type:c},calculator:{type:te,arguments:["settings.period5"]},renderers:{movingAverage5:{type:x,pointType:"movingAverage5"}},numberOfTrailingPoints:"settings.period5 - 1",outputPointType:"movingAverage5"},MA6:{input:{type:c},calculator:{type:te,arguments:["settings.period6"]},renderers:{movingAverage6:{type:x,pointType:"movingAverage6"}},numberOfTrailingPoints:"settings.period6 - 1",outputPointType:"movingAverage6"},MA7:{input:{type:c},calculator:{type:te,arguments:["settings.period7"]},renderers:{movingAverage7:{type:x,pointType:"movingAverage7"}},numberOfTrailingPoints:"settings.period7 - 1",outputPointType:"movingAverage7"},MA8:{input:{type:c},calculator:{type:te,arguments:["settings.period8"]},renderers:{movingAverage8:{type:x,pointType:"movingAverage8"}},numberOfTrailingPoints:"settings.period8 - 1",outputPointType:"movingAverage8"}},study:"prices"},SAR:{settings:{initialAcceleration:{type:"number",defaultValue:.02,serverValue:M.plucker("initialAcceleration"),range:{min:0,max:999.995,step:.005},decimalPoints:3},accelerationStep:{type:"number",defaultValue:.02,serverValue:M.plucker("accelerationStep"),range:{min:0,max:999.995,step:.005},decimalPoints:3},accelerationLimit:{type:"number",defaultValue:.2,serverValue:M.plucker("accelerationLimit"),range:{min:0,max:999.9,step:.1},decimalPoints:1}},serverSettings:function(e){return{type:"PARABOLIC_SAR",location:"STUDY",accelerationLimit:e.accelerationLimit,accelerationStep:e.accelerationStep,initialAcceleration:e.initialAcceleration}},input:{type:c},calculator:{type:i.series.ParabolicSarCalculator,properties:{initialAcceleration:"settings.initialAcceleration",accelerationStep:"settings.accelerationStep",accelerationLimit:"settings.accelerationLimit"}},renderers:{parabolicSar:{type:y,pointType:"parabolicSar"}},numberOfTrailingPoints:"400",outputPointType:"parabolicSar",study:"prices"},PIVOT:{availability:k,resolutionChooser:U,settings:{resolution:{type:"enum",options:[{localisationKey:"PIVOT-daily",value:G.DAILY},{localisationKey:"PIVOT-weekly",value:G.WEEKLY},{localisationKey:"PIVOT-monthly",value:G.MONTHLY}],i18n:E,defaultValue:G.DAILY,serverValue:function(e){switch(e.pivotScale){case"DAY":return G.DAILY;case"WEEK":return G.WEEKLY;case"MONTH":return G.MONTHLY}}},formula:{type:"enum",options:[{localisationKey:"PIVOT-HLC",value:V.HLC},{localisationKey:"PIVOT-HLO",value:V.HLO},{localisationKey:"PIVOT-HLOC",value:V.HLOC}],i18n:E,defaultValue:V.HLC,serverValue:function(e){switch(e.formula){case"HLC":return V.HLC;case"HLO":return V.HLO;case"HLOC":return V.HLOC}}}},serverSettings:function(e){return{type:"PIVOT_POINT",location:"STUDY",pivotScale:(function(e){switch(e.resolution){case G.DAILY:return"DAY";case G.WEEKLY:return"WEEK";case G.MONTHLY:return"MONTH"}})(e),formula:(function(e){switch(e.formula){case V.HLC:return"HLC";case V.HLO:return"HLO";case V.HLOC:return"HLOC"}})(e)}},subIndicators:{PIV:{input:{type:c},calculator:{type:H,arguments:["settings.formula"]},renderers:{pivot:{type:ie,pointType:"pivot"},pivotLabel:{type:ne,pointType:"pivot",properties:{label:"PIVOT-pivotShort"}}},numberOfTrailingPoints:"1",outputPointType:"pivot"},R1:{input:{type:c},calculator:{type:B,arguments:["settings.formula"]},renderers:{r1:{type:ie,pointType:"r1"},r1Label:{type:ne,pointType:"r1",properties:{label:"PIVOT-r1"}}},numberOfTrailingPoints:"1",outputPointType:"r1"},R2:{input:{type:c},calculator:{type:W,arguments:["settings.formula"]},renderers:{r2:{type:ie,pointType:"r2"},r2Label:{type:ne,pointType:"r2",properties:{label:"PIVOT-r2"}}},numberOfTrailingPoints:"1",outputPointType:"r2"},R3:{input:{type:c},calculator:{type:F,arguments:["settings.formula"]},renderers:{r3:{type:ie,pointType:"r3"},r3Label:{type:ne,pointType:"r3",properties:{label:"PIVOT-r3"}}},numberOfTrailingPoints:"1",outputPointType:"r3"},S1:{input:{type:c},calculator:{type:Y,arguments:["settings.formula"]},renderers:{s1:{type:ie,pointType:"s1"},s1Label:{type:ne,pointType:"s1",properties:{label:"PIVOT-s1"}}},numberOfTrailingPoints:"1",outputPointType:"s1"},S2:{input:{type:c},calculator:{type:z,arguments:["settings.formula"]},renderers:{s2:{type:ie,pointType:"s2"},s2Label:{type:ne,pointType:"s2",properties:{label:"PIVOT-s2"}}},numberOfTrailingPoints:"1",outputPointType:"s2"},S3:{input:{type:c},calculator:{type:q,arguments:["settings.formula"]},renderers:{s3:{type:ie,pointType:"s3"},s3Label:{type:ne,pointType:"s3",properties:{label:"PIVOT-s3"}}},numberOfTrailingPoints:"1",outputPointType:"s3"}},study:"prices"},ROC:{settings:{period:{type:"number",defaultValue:12,serverValue:M.plucker("rocPeriod"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"ROC",location:"OSCILLATOR",rocPeriod:e.period,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:Z,arguments:["settings.period"]},renderers:{roc:{type:x,pointType:"roc",properties:{strokeGradient:{topArea:[0,1],bottomArea:[-1,0]},fillGradient:{topArea:[0,1],bottomArea:[-1,0]}}}},numberOfTrailingPoints:"settings.period",outputPointType:"roc",study:"roc"},RSI:{settings:{period:{type:"number",defaultValue:14,serverValue:M.plucker("rsiPeriod"),range:{min:2,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"RSI",location:"OSCILLATOR",rsiPeriod:e.period,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:i.series.RelativeStrengthIndexCalculator,properties:{rsiPeriod:"settings.period"}},renderers:{relativeStrengthIndex:{type:x,pointType:"relativeStrengthIndex",properties:{strokeGradient:{topArea:[70,100],neutral:[30,70],bottomArea:[0,30]},fillGradient:{topArea:[70,100],blank:[30,70],bottomArea:[0,30]},fillIntersection:50}}},numberOfTrailingPoints:"4 * settings.period",outputPointType:"relativeStrengthIndex",study:"rsi"},STDEV:{settings:{period:{type:"number",defaultValue:20,serverValue:M.plucker("period"),range:{min:2,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"STANDARD_DEVIATION",location:"OSCILLATOR",period:e.period,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:i.series.StandardDeviationCalculator,arguments:["settings.period"]},renderers:{standardDeviation:{type:x,pointType:"standardDeviation",properties:{fill:!0}}},numberOfTrailingPoints:"settings.period",outputPointType:"standardDeviation",study:"stdev"},STOCH:{settings:{periodK:{type:"number",defaultValue:5,serverValue:M.plucker("kPeriod"),range:{min:2,max:999},decimalPoints:0},slowing:{type:"number",defaultValue:3,serverValue:M.plucker("slowingPeriod"),range:{min:1,max:999},decimalPoints:0},periodD:{type:"number",color:"#E62322",defaultValue:3,serverValue:M.plucker("dPeriod"),range:{min:2,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"STOCHASTIC",location:"OSCILLATOR",dPeriod:e.periodD,kPeriod:e.periodK,slowingPeriod:e.slowing,preferredHeight:e.preferredHeight}},subIndicators:{STOCHASTIC_K:{input:{type:c},calculator:{type:i.series.StochasticKLineCalculator,properties:{kPeriod:"settings.periodK",slowingPeriod:"settings.slowing"}},renderers:{stochasticK:{type:x,pointType:"stochasticK"}},numberOfTrailingPoints:"4 * Math.max(settings.periodK, settings.slowing)",outputPointType:"stochasticK"},STOCHASTIC_D:{input:{type:c},calculator:{type:oe,properties:{kPeriod:"settings.periodK",slowingPeriod:"settings.slowing",dPeriod:"settings.periodD"}},renderers:{stochasticD:{type:x,pointType:"stochasticD"}},numberOfTrailingPoints:"8 * Math.max(settings.periodK, settings.slowing, settings.periodD)",outputPointType:"stochasticD"}},study:"stochastic"},VOLUME:{availability:ce,settings:{preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"LAST_TRADE_VOLUME",location:"OSCILLATOR",preferredHeight:e.preferredHeight}},tooltipSettings:{decimalPlaces:0},input:{type:le},calculator:{type:ue,arguments:[]},renderers:{volume:{type:u,pointType:"volume"}},outputPointType:"volume",study:"volume",labelTypes:(function(){var e={};return e[w.values.CURRENCIES]="tick",e})()},WMA:{stylesMapping:{wma1:"period1",wma2:"period2",wma3:"period3",wma4:"period4",wma5:"period5",wma6:"period6",wma7:"period7",wma8:"period8"},settings:{period1:t.getNumericConstraints("#9CC2E6","period1",20,{min:2,max:999},0),period2:t.getNumericConstraints("#3987CC","period2",50,{min:2,max:999},0),period3:t.getNumericConstraints("#1D466A","period3",100,{min:2,max:999},0),period4:t.getNumericConstraints("#DE9D25","period4",NaN,{min:2,max:999},0),period5:t.getNumericConstraints("#50505C","period5",NaN,{min:2,max:999},0),period6:t.getNumericConstraints("#349535","period6",NaN,{min:2,max:999},0),period7:t.getNumericConstraints("#48A9B1","period7",NaN,{min:2,max:999},0),period8:t.getNumericConstraints("#CB181A","period8",NaN,{min:2,max:999},0)},serverSettings:function(e){return{type:"WMA",location:"STUDY",period1:e.period1,period2:e.period2,period3:e.period3,period4:e.period4,period5:e.period5,period6:e.period6,period7:e.period7,period8:e.period8,isVisible1:!0,isVisible2:!0,isVisible3:!0}},subIndicators:{WMA1:{input:{type:c},calculator:{type:de,arguments:["settings.period1"]},renderers:{weightedMovingAverage1:{type:x,pointType:"weightedMovingAverage1"}},numberOfTrailingPoints:"settings.period1",outputPointType:"weightedMovingAverage1"},WMA2:{input:{type:c},calculator:{type:de,arguments:["settings.period2"]},renderers:{weightedMovingAverage2:{type:x,pointType:"weightedMovingAverage2"}},numberOfTrailingPoints:"settings.period2",outputPointType:"weightedMovingAverage2"},WMA3:{input:{type:c},calculator:{type:de,arguments:["settings.period3"]},renderers:{weightedMovingAverage3:{type:x,pointType:"weightedMovingAverage3"}},numberOfTrailingPoints:"settings.period3",outputPointType:"weightedMovingAverage3"},WMA4:{input:{type:c},calculator:{type:de,arguments:["settings.period4"]},renderers:{weightedMovingAverage4:{type:x,pointType:"weightedMovingAverage4"}},numberOfTrailingPoints:"settings.period4",outputPointType:"weightedMovingAverage4"},WMA5:{input:{type:c},calculator:{type:de,arguments:["settings.period5"]},renderers:{weightedMovingAverage5:{type:x,pointType:"weightedMovingAverage5"}},numberOfTrailingPoints:"settings.period5",outputPointType:"weightedMovingAverage5"},WMA6:{input:{type:c},calculator:{type:de,arguments:["settings.period6"]},renderers:{weightedMovingAverage6:{type:x,pointType:"weightedMovingAverage6"}},numberOfTrailingPoints:"settings.period6",outputPointType:"weightedMovingAverage6"},WMA7:{input:{type:c},calculator:{type:de,arguments:["settings.period7"]},renderers:{weightedMovingAverage7:{type:x,pointType:"weightedMovingAverage7"}},numberOfTrailingPoints:"settings.period7",outputPointType:"weightedMovingAverage7"},WMA8:{input:{type:c},calculator:{type:de,arguments:["settings.period8"]},renderers:{weightedMovingAverage8:{type:x,pointType:"weightedMovingAverage8"}},numberOfTrailingPoints:"settings.period8",outputPointType:"weightedMovingAverage8"}},study:"prices"},WILLR:{settings:{period:{type:"number",defaultValue:14,serverValue:M.plucker("period"),range:{min:1,max:999},decimalPoints:0},preferredHeight:{type:"number",defaultValue:se.DEFAULT_RELATIVE_HEIGHT,serverValue:n}},serverSettings:function(e){return{type:"WILLIAMS_PERCENT_R",location:"OSCILLATOR",period:e.period,preferredHeight:e.preferredHeight}},input:{type:c},calculator:{type:i.series.WilliamsPercentRCalculator,arguments:["settings.period"]},renderers:{williamsPercentR:{type:x,pointType:"williamsPercentR",properties:{strokeGradient:{topArea:[-20,0],neutral:[-80,-20],bottomArea:[-100,-80]},fillGradient:{topArea:[-20,0],blank:[-80,-20],bottomArea:[-100,-80]},fillIntersection:-50}}},numberOfTrailingPoints:"settings.period",outputPointType:"williamsPercentR",study:"willr"}};return t.get=M.returns(he),P.recursiveFreeze(he),Object.seal(t)})),define("module/core/js/model/layouts/indicatorlayoutmodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class","module/core/js/util/error","module/indicators/js/config/indicatorsconfig","module/core/js/util/object","module/core/js/tracker/trackeractions"],(function(e){"use strict";function t(e,n,i){this.indicators=[],t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule"),i=e("module/core/js/util/class"),o=e("module/core/js/util/error"),r=e("module/indicators/js/config/indicatorsconfig"),s=e("module/core/js/util/object"),a=e("module/core/js/tracker/trackeractions");i.extend(t,n),t.BASE_PAYLOAD=s.recursiveFreeze({indicators:[]}),
t.SETTINGS_MODULE_NAME="indicatorModule";var l=t.prototype;return l.addIndicators=function(e){e.forEach(this._addIndicator,this)},l.removeIndicator=function(e){var t;for(t=0;t<this.indicators.length;t++)if(this.indicators[t].id===e)return void this.indicators.splice(t,1)},l.fromJSON=function(e){this.indicators=[],e.indicators&&e.indicators.forEach((function(e){var t=this._makeIndicator(e);t&&this.indicators.push(t)}),this)},l.fromLocalStorage=function(e){this.indicators=e?Object.keys(e).filter((function(e){return r.get()[e]})).map((function(t){return{id:t,settings:e[t].value}})):[]},l.toJSON=function(){return this.isModified()?{indicators:this.indicators.map((function(e){return r.get()[e.id].serverSettings(e.settings)}))}:{}},l.isModified=function(){return!(!this.indicators||!this.indicators.length)},l._addIndicator=function(e){var t;for(t=0;t<this.indicators.length;t++)if(this.indicators[t].id===e.id)return void(this.indicators[t].settings=e.settings);this.indicators.push({id:e.id,settings:e.settings})},l._makeIndicator=function(e){var t,n,i,s,l={};return o.captureError((function(){return t=r.get(),n=Object.keys(t).filter((function(n){return t[n].serverSettings({}).type===e.type}))[0],i=t[n].settings,s=Object.keys(i),s.forEach((function(t){l[t]=i[t].serverValue(e)})),{id:n,settings:l}}),(function(t){return this._eventBus.publish("tracker/chart",[a.error("creating_indicator_server_data",t,e)]),null}),this)},Object.seal(l),Object.seal(t)})),define("module/core/js/settings/layoutsclientevents",[],(function(){"use strict";return Object.freeze({LAYOUT_CHANGED:"LAYOUT_CHANGED",LAYOUT_TEMPLATE_IMPORTED:"LAYOUT_TEMPLATE_IMPORTED"})})),define("module/core/js/model/layouts/unknownlayoutmodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class","module/core/js/util/functional"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional");i.extend(t,n);var r=t.prototype;return r._jsonPayload=null,r.fromJSON=o.setter("_jsonPayload"),r.toJSON=o.getter("_jsonPayload"),Object.seal(r),Object.seal(t)})),define("module/core/js/model/layouts/layout",["require","module/core/js/model/layouts/corelayoutmodule","module/core/js/model/layouts/indicatorlayoutmodule","module/core/js/util/math","module/core/js/util/object","module/core/js/model/layouts/unknownlayoutmodule"],(function(e){"use strict";function t(e,o,a,l){this.id=o,this.name=e,this.description=l||null,this.modules=r.merge(t.moduleMap(),{coreModule:new n,overviewChartModule:new s({isOverviewVisible:!0}),tradingModule:new s({dealingBarVisibilityPolicy:"POSITION"}),indicatorModule:new i({})},a||{},!0)}var n=e("module/core/js/model/layouts/corelayoutmodule"),i=e("module/core/js/model/layouts/indicatorlayoutmodule"),o=e("module/core/js/util/math"),r=e("module/core/js/util/object"),s=e("module/core/js/model/layouts/unknownlayoutmodule"),a={configurable:!1,enumerable:!1,writable:!1,value:function(){var e,t={};for(e in this)this[e].isModified()&&(t[e]=this[e]);return t}};t.TYPES=Object.freeze({USER:"USER",SYSTEM:"SYSTEM"}),t.moduleMap=function(){return Object.defineProperty({},"toJSON",a)},t.clone=function(e){var n,i,o={};for(n in e.modules)o[n]=new e.modules[n].constructor(JSON.parse(JSON.stringify(e.modules[n])));return i=new t(e.name,e.id,o,e.description),i.type=e.type,"boolean"==typeof e.isDefault&&(i.isDefault=e.isDefault),i};var l=t.prototype;return l.description=null,l.id=null,l.modules=null,l.name=null,l.original=null,l.type=t.TYPES.USER,l.toJSON=function(){var e={label:this.name,description:this.description,isAutomaticTemplate:!1,settings:this.modules,type:this.type};return o.isNumber(this.id)&&(e.id=this.id),"boolean"==typeof this.isDefault&&(e.isDefault=this.isDefault),e},t.sortLayouts=function(e){e.sort((function(e,n){return e.type===n.type?e.name<n.name?-1:1:e.type===t.TYPES.SYSTEM?-1:1}))},l.restore=function(){var e,n=t.moduleMap(),i=this.original;for(e in i.modules)n[e]=new i.modules[e].constructor(i.modules[e].toJSON());return this.name=i.name,this.id=i.id,this.modules=n,this.description=i.description,this.type=i.type,"boolean"==typeof i.isDefault&&(this.isDefault=i.isDefault),this},Object.seal(l),Object.seal(t)})),define("module/overview/js/model/layouts/overviewvisibilitymodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule");e("module/core/js/util/class").extend(t,n),t.SETTINGS_MODULE_NAME="overviewChartModule";var i=t.prototype;return i.isOverviewVisible=!0,i.fromJSON=function(e){this.isOverviewVisible=e.modified?!!e.isOverviewVisible:!!this._options.isVisibleByDefault,this.modified=!0},i.toJSON=function(){return{isOverviewVisible:this.isOverviewVisible,modified:this.modified}},Object.seal(i),Object.seal(t)})),define("module/core/js/util/storage",["require","module/core/js/util/functional"],(function(e){"use strict";function t(e,t){this._storage=t||window.localStorage,this._namespace=e}var n=e("module/core/js/util/functional");t.create=function(e,n){return new t(e,n)};var i=t.prototype;return i._storage=null,i._namespace=null,i.has=function(e){return void 0!==this.get(e)},i.get=function(e){var t=this._storage.getItem(this._namespace+"/"+e);if(t&&"undefined"!==t)return JSON.parse(t)},i.set=function(e,t){return this._storage.setItem(this._namespace+"/"+e,JSON.stringify(t)),this},i.remove=function(e){return this._storage.removeItem(this._namespace+"/"+e),this},i.clear=function(){return this.keys().forEach(this.remove,this),this},i.keys=function(){var e=this._namespace.length+1;return Object.keys(this._storage).filter(RegExp.prototype.test.bind(new RegExp("^"+this._namespace+"/"))).map(n.invoker("slice",e))},Object.seal(i),Object.seal(t)})),define("module/core/js/serviceclient/settingsclient",["require","module/core/js/serviceclient/baseserviceclient","module/core/js/util/class","module/core/js/model/layouts/corelayoutmodule","module/core/js/model/deviceinfo","module/core/js/util/error","module/core/js/util/functional","module/core/js/model/layouts/indicatorlayoutmodule","module/core/js/model/layouts/layout","module/core/js/settings/layoutsclientevents","module/core/js/util/log","module/core/js/util/math","module/core/js/util/object","module/overview/js/model/layouts/overviewvisibilitymodule","module/core/js/model/resolutionsenum","module/core/js/util/storage","module/core/js/util/string","module/core/js/tracker/trackeractions","module/core/js/model/layouts/unknownlayoutmodule","module/core/js/model/userinfo","module/core/js/util/uid"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,[e]),this._parsingMapEpic=n,this._parsingMapGlobal=i,this._parsingMapTemplate=o,this._localStorage=_.create("layout"),this._sendSaveRequest=a.debounce(this._sendSaveRequest,t.SAVE_DELAY)}var n=e("module/core/js/serviceclient/baseserviceclient"),i=e("module/core/js/util/class"),o=e("module/core/js/model/layouts/corelayoutmodule"),r=e("module/core/js/model/deviceinfo"),s=e("module/core/js/util/error"),a=e("module/core/js/util/functional"),l=e("module/core/js/model/layouts/indicatorlayoutmodule"),u=e("module/core/js/model/layouts/layout"),c=e("module/core/js/settings/layoutsclientevents"),d=e("module/core/js/util/log"),h=e("module/core/js/util/math"),p=e("module/core/js/util/object"),m=e("module/overview/js/model/layouts/overviewvisibilitymodule"),f=e("module/core/js/model/resolutionsenum"),_=e("module/core/js/util/storage"),g=e("module/core/js/util/string"),v=e("module/core/js/tracker/trackeractions"),y=e("module/core/js/model/layouts/unknownlayoutmodule"),M=e("module/core/js/model/userinfo"),b=e("module/core/js/util/uid");i.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)},t.SAVE_DELAY=500,t.ENDPOINTS=Object.freeze({BOOTSTRAP:"/settings/v2/combined/?epic={epic}&deviceId={deviceId}&containerId={containerId}&locale={locale}",LOAD:"/settings/v2/templates/?locale={locale}",SAVE:"/settings/v2/layout/?deviceId={deviceId}&containerId={containerId}",DELETE:"/settings/userTemplate/{layoutid}",EXPORT:"/settings/v2/template/?deviceId={deviceId}&containerId={containerId}",DELETE_TEMPLATE:"/settings/v2/template/?templateId={templateId}",IMPORT:"/settings/v2/layout/?templateId={templateId}&deviceId={deviceId}&containerId={containerId}&systemTemplate={systemTemplate}&locale={locale}",SAVE_GLOBAL_TEMPLATE_ENDPOINT:"/settings/userTemplate/{update}{deviceId}",LOAD_EPIC_SETTINGS:"/settings/v2/epic/?epic={epic}",SAVE_EPIC_SETTINGS:"/settings/userEpicTemplate/update"}),t.EMPTY_USER_EPIC_TEMPLATE=p.recursiveFreeze({id:0,epic:null,type:"USEREPIC",settings:{}}),t.generateDeviceId=function(){var e,t=r.getInstance(),n=M.getInstance();return e=g.hash([n.getAccountId(),t.asJSON().clientType,t.getClientPlatform(),t.getClientVersion(),t.asJSON().osType,t.asJSON().osVersion].filter(a.defined).join("|")),b.getGuid(e)},t.getServerDeviceId=function(){return _.create("layout").get("deviceId")||"DESKTOP"},t.getFallbackLayout=function(){var e,t,n={};return t=new o,t.resolution=f.valueOf(f.DEFAULT_RESOLUTION_NAME),t.style="CANDLE",n.coreModule=t,n.indicatorModule=new l,n.overviewChartModule=new m,e=new u("Default Chart Layout",-1,n,"Layout used in case the layouts external service is unavailable."),e.type=u.TYPES.SYSTEM,e},t.parseLayout=function(e,n,i){var o,r=e.id?parseInt(e.id,10):0,s=e.label||"TEMPLATE",a=e.description||null,l=t.parseLayoutModules(e.settings,n,i,!0);return o=new u(s,r,l,a),o.type=u.TYPES[e.type]||u.TYPES.USER,o},t.parseLayoutModules=function(e,t,n,i){var o,r=u.moduleMap();if(t=p.shallowClone(t)){for(o in e)t.hasOwnProperty(o)?r[o]=new t[o].type(e[o],n,t[o].options):r[o]=new y(e[o],n),delete t[o];if(i)for(o in t)r[o]=new t[o].type(null,n,t[o].options)}return r},t.getFallbackSettings=function(){return{id:null,isGlobal:!0,description:null,isDefault:!1,label:null,isAutomaticTemplate:!1,type:"USER",settings:{coreModule:{isAutosaveEnabled:!1},tradingModule:{isConfirmationOn:!0,isValidationOn:!1,isWorkingOrdersEnabled:!0,isOpenPositionEnabled:!0},calendarEventsModule:{companyEvents:[],economicEvents:[],selectedCountry:"US"}}}};var A=t.prototype;return A._templateSaveable=!0,A._templateId=null,A._localStorage=null,A._parsingMapEpic=null,A._parsingMapGlobal=null,A._parsingMapTemplate=null,A.loadSettings=function(e,n,i){var o,s;r.isMobile()&&!this._localStorage.has("deviceId")&&this._localStorage.set("deviceId",t.generateDeviceId()),s=function(e,t){var o=this._parseGlobalSettings(t.userGlobalTemplate),r=this._parseChartSettings(t.generalTemplate),s=this._parseEpicSettings(n,t.userEpicTemplate);this._templateSaveable=!0,this._logLatency(v.latency.COMBINED_SETTINGS,e),i(r,o,s)}.bind(this),o=function(e){this._templateSaveable=!1,i(this._parseChartSettings(t.getFallbackSettings()),this._parseGlobalSettings(t.getFallbackSettings()),this._parseEpicSettings(n))}.bind(this),this._executeRequest({endpoint:this._getSettingsEndpoint(e,n),success:s.bind(this),error:o.bind(this),retry:!0})},A.loadEpicSettings=function(e,n){var i=function(t,i){this._logLatency(v.latency.EPIC_SETTINGS_LOAD,t),n(this._parseEpicSettings(e,i))}.bind(this),o=function(){n(this._parseEpicSettings(e))}.bind(this);this._executeRequest({contentType:"application/json",endpoint:g.merge(t.ENDPOINTS.LOAD_EPIC_SETTINGS,{epic:e}),success:i.bind(this),error:o.bind(this),retry:!0})},A.saveChartSettings=function(e,t){-1!==t.id&&this._sendSaveRequest(e,t,this._handleLayoutSaved.bind(this,t))},A.saveGlobalSettings=function(e){if(!e)throw new Error("Trying to save global settings before any have been provided!");if(this._templateSaveable){var n=function(e,t){h.isNumber(t.id)&&(this._templateId=t.id)}.bind(this),i={id:h.isNumber(this._templateId)?this._templateId:null,label:null,description:null,isDefault:!1,isGlobal:!0,isAutomaticTemplate:!1,type:"USER",settings:e},o={update:h.isNumber(this._templateId)?"update/":"",deviceId:t.getServerDeviceId()};this._executeRequest({method:"POST",contentType:"application/json",endpoint:g.merge(t.ENDPOINTS.SAVE_GLOBAL_TEMPLATE_ENDPOINT,o),data:JSON.stringify(i),success:n.bind(this),retry:!0})}},A.getTemplateList=function(e){this._emitRequestStatistic("LOAD_LAYOUTS_START");var t=function(t,n){this._logLatency(v.latency.LAYOUT_LIST,t),e(n.templateList)}.bind(this);this._executeRequest({endpoint:this._getTemplatesEndpoint(),success:t.bind(this),retry:!0})},A.exportLayout=function(e,t,n,i){this._sendExportRequest(e,t,n,i.bind(null,!1))},A.importLayout=function(e,n,i,o,r){var s,a;a=function(i,r){this.fire(c.LAYOUT_TEMPLATE_IMPORTED,e,t.parseLayoutModules(r.settings,this._parsingMapTemplate,this._eventBus,!0)),o(n)},s=function(){r(n)},this._executeRequest({method:"POST",endpoint:g.merge(t.ENDPOINTS.IMPORT,{templateId:n,deviceId:t.getServerDeviceId(),containerId:e,systemTemplate:i===u.TYPES.SYSTEM,locale:M.getInstance().getLocale()}),contentType:"application/json",retry:!0,success:a.bind(this),error:s.bind(this)})},A.deleteTemplate=function(e,n){s.captureError((function(){if(n===u.TYPES.SYSTEM)throw new Error('Attempting to delete system template "'+e+'"');this._executeRequest({method:"DELETE",endpoint:g.merge(t.ENDPOINTS.DELETE_TEMPLATE,{templateId:e}),contentType:"application/json",retry:!0})}),(function(e){this._eventBus.publish("tracker/chart",[v.error("settings_client_delete_template",e)]),d.error(e.message)}),this)},A.saveEpicSpecificSettings=function(e){this._executeRequest({method:"POST",contentType:"application/json",endpoint:t.ENDPOINTS.SAVE_EPIC_SETTINGS,retry:!0,success:this._handleEpicSpecificSettingsSaved.bind(this),data:JSON.stringify(e)})},A.abortAll=function(e,t){Object.keys(this._pendingRequests).filter(this._matchingRequestHash.bind(this,e,t)).forEach(this._abortRequest,this)},A.destroy=function(){this._sendSaveRequest.abort(),t.superclass.destroy.call(this)},A._matchingRequestHash=function(e,t,n){var i=n.indexOf("containerId="+e)>-1,o=n.indexOf("epic="+t)>-1;return n.indexOf("containerId=")>-1&&n.indexOf("epic=")>-1?i&&o:o||i},A._emitRequestStatistic=function(e){this._eventBus.publish("statistics",[e])},A._logLatency=function(e,t){this._eventBus.publish("tracker/latency",[v.latency(e,t)])},A._getTemplatesEndpoint=function(){return g.merge(t.ENDPOINTS.LOAD,{locale:M.getInstance().getLocale()})},A._getSettingsEndpoint=function(e,n){return g.merge(t.ENDPOINTS.BOOTSTRAP,{epic:n.replace(".FREE",""),locale:M.getInstance().getLocale(),deviceId:t.getServerDeviceId(),containerId:e})},A._parseEpicSettings=function(e,n){var i=p.deepCopyLiteral({},n||t.EMPTY_USER_EPIC_TEMPLATE);return i.epic=i.epic||e,i.settings=t.parseLayoutModules(i.settings||t.EMPTY_USER_EPIC_TEMPLATE.settings,this._parsingMapEpic,this._eventBus),i},A._parseGlobalSettings=function(e){var n,i;return e?(i=parseInt(e.id,10),h.isNumber(i)&&(this._templateId=i),n=t.parseLayoutModules(e.settings,this._parsingMapGlobal,this._eventBus,!0)):n=this._parseGlobalSettings(t.getFallbackSettings()),n},A._parseChartSettings=function(e){return s.captureError((function(){return t.parseLayout(e,this._parsingMapTemplate,this._eventBus)}),(function(n){return this._eventBus.publish("tracker/chart",[v.error("settings_client_parse_template",n,e)]),t.getFallbackLayout()}),this)},A._sendExportRequest=function(e,n,i,o){M.getInstance().isAnonymous()||(this._emitRequestStatistic("EXPORT_LAYOUT_START"),this._executeRequest({method:"POST",contentType:"application/json",endpoint:g.merge(t.ENDPOINTS.EXPORT,{deviceId:t.getServerDeviceId(),containerId:e}),data:n,success:i,error:o,retry:!0}))},A._handleEpicSpecificSettingsSaved=function(e){this._logLatency(v.latency.EPIC_SETTINGS_SAVE,e)},A._handleLayoutSaved=function(e,t,n){this._logLatency(v.latency.LAYOUT_SETTINGS_SAVE,t),n&&n.id&&(e.id=parseInt(n.id,10))},A._sendSaveRequest=function(e,n,i){var o;M.getInstance().isAnonymous()||(o=JSON.stringify(n),this._executeRequest({method:"PUT",contentType:"application/json",endpoint:g.merge(t.ENDPOINTS.SAVE,{deviceId:t.getServerDeviceId(),containerId:e}),data:o,success:i,retry:!0}))},Object.seal(A),Object.seal(t)})),define("module/core/js/settings/settingsevents",["require"],(function(e){"use strict";var t={};return t.LAYOUT_SETTINGS_CHANGED="settingsChanged",t.LAYOUT_SETTINGS_IMPORTED="layoutSettingsImported",t.GLOBAL_SETTINGS_CHANGED="globalSettingsChanged",t.EPIC_SETTINGS_LOADED="epicSettingsLoaded",t.EPIC_SETTINGS_CHANGED="epicSettingsChanged",t.THEME_CHANGED="themeChanged",Object.seal(t)})),define("wt-statistics-jsclient",["require"],(function(require){function pad(e){var t=String(e);return 1===t.length?"0"+t:t}var langRootNamespace={IG:{}},IG=langRootNamespace.IG,IG=langRootNamespace.IG||{};!(function(){for(var e=["business","format","streaming","ticket","ui","util","validation","widget","rtcharts"],t=0,n=e.length;t<n;t++)IG[e[t]]=IG[e[t]]||{}})();var IG=langRootNamespace.IG||{};return (function(){function e(e){return n?function(){var n=i(e);"none"!=n&&console[n](t(Array.prototype.slice.call(arguments)))}:function(){var t=Array.prototype.slice.call(arguments),n=i(e);if("none"!=n){IG[e]=console[n];try{IG[e].apply?IG[e].apply(this,t):IG[e](t)}catch(i){IG[e]=function(){console[n].apply(console,Array.prototype.slice.call(arguments))},IG[e].apply(this,t)}}}}function t(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if(i&&i.constructor==Object)try{t.push(JSON.stringify(i))}catch(e){t.push(i)}else null===i?t.push("(null)"):void 0===i?t.push("(undefined)"):i&&i.toString?t.push(i.toString()):t.push(i)}return t.join(" ")}var n=navigator.userAgent.match(/(iPhone|iPad)/i),i=function(e){if(window.console&&IG._isDebugEnabled)switch(e){case"error":if(console.error)return"error";case"warn":if(console.warn)return"warn";case"debug":if(console.debug)return"debug";case"info":if(console.info)return"info";default:if(console.log)return"log"}return"none"};IG.error=e("error"),IG.warn=e("warn"),IG.debug=e("debug"),IG.info=e("info")})(),Array.isArray||(Array.isArray=(function(e){return function(t){return"[object Array]"==e.call(t)}})(Object.prototype.toString)),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=this.length,n=Number(arguments[1]);for(isNaN(n)?n=t-1:(n=n<0?Math.ceil(n):Math.floor(n),n<0?n+=t:n>=t&&(n=t-1));n>-1;n--)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.some||(Array.prototype.some=function(e){var t=0,n=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=arguments[1];t<n;t++)if(t in this&&e.call(i,this[t],t,this))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array(t),i=arguments[1],o=0;o<t;o++)o in this&&(n[o]=e.call(i,this[o],o,this));return n}),Array.prototype.every||(Array.prototype.every=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;i<t;i++)if(i in this&&!e.call(n,this[i],i,this))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array,i=arguments[1],o=0;o<t;o++)if(o in this){var r=this[o];e.call(i,r,o,this)&&n.push(r)}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;i<t;i++)i in this&&e.call(n,this[i],i,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;if(0==t&&1==arguments.length)throw new TypeError;var n=0;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n++];break}if(++n>=t)throw new TypeError}for(;n<t;n++)n in this&&(i=e.call(null,i,this[n],n,this));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=this.length>>>0;if("function"!=typeof e)throw new TypeError;if(0==t&&1==arguments.length)throw new TypeError;var n=t-1;if(arguments.length>=2)var i=arguments[1];else for(;;){if(n in this){i=this[n--];break}if(--n<0)throw new TypeError}for(;n>=0;n--)n in this&&(i=e.call(null,i,this[n],n,this));return i}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+pad(this.getUTCMonth()+1)+"-"+pad(this.getUTCDate())+"T"+pad(this.getUTCHours())+":"+pad(this.getUTCMinutes())+":"+pad(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}),"classList"in document.createElement("a")||!window.Element||(function(){"use strict";function e(e){for(var t=String.prototype.trim.call(e.className.baseVal||e.className),n=t?t.split(/\s+/):[],i=0;i<n.length;i++)this.push(n[i]);this._element=e}var t=function(){return new e(this)},n=window.Element.prototype,i=e.prototype=[];if(i._element=null,i.add=function(e){this.contains(e)||(this.push(e),this._updateClassName())},i.contains=function(e){return this.indexOf(e)>=0},i.item=function(e){return this[e]||null},i.remove=function(e){var t=this.indexOf(e);t>=0&&(this.splice(t,1),this._updateClassName())},i.toString=function(){return this.join(" ")},i.toggle=function(e){return this.contains(e)?(this.remove(e),!1):(this.add(e),!0)},i._updateClassName=function(){this._element.setAttribute("class",this.toString())},Object.defineProperty){var o={get:t,enumerable:!0,configurable:!0};try{Object.defineProperty(n,"classList",o)}catch(e){-2146823252===e.number&&(o.enumerable=!1,Object.defineProperty(n,"classList",o))}}else Object.prototype.__defineGetter__&&n.__defineGetter__("classList",t)})(),Function.prototype.bind||(function(e){function t(e,t,n){return function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,i)}}function n(e,t){return function(){return e.apply(t,arguments)}}e.bind=function(e){return arguments.length>1?t(this,e,Array.prototype.slice.call(arguments,1)):n(this,e)}})(Function.prototype),window.JSON||(function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(i=rep[n],(o=str(i,l))&&s.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l))&&s.push(quote(i)+(gap?": ":":")+o);return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}window.JSON={},"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)t[t.length]=n;return t}),Object.seal||(Object.seal=function(e){return e},Object.seal.shim=!0),Object.freeze||(Object.freeze=function(e){return e},Object.freeze.shim=!0),Object.isFrozen||(Object.isFrozen=function(e){return!1},Object.isFrozen.shim=!0),Object.isSealed||(Object.isSealed=function(e){return!1},Object.isSealed.shim=!0),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),(function(e,t){function n(e){this._rootNamespace=e}n.prototype._rootNamespace=null,n.prototype.extend=function(e,t){function n(){}return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,e},n.prototype.createMixIn=function(e,t){var n=t.prototype,i=function(){i.superclass.constructor.apply(this,arguments),n.constructor.apply(this,arguments)};this.extend(i,e);for(var o in n)"function"==typeof n[o]&&i.prototype[o]?i.prototype[o]=(function(e,t){return function(){var n=e.apply(this,arguments);return t.apply(this,arguments),n}})(i.prototype[o],n[o]):i.prototype[o]=n[o];return i},n.prototype.namespace=function(){for(var e,t,n,i,o=this._rootNamespace,r=0,s=arguments.length;r<s;r++)for(i={},n=arguments[r].split("."),e=0,t=n.length;e<t;e++)i=e?i[n[e]]||(i[n[e]]={}):o[n[e]]?o[n[e]]:o[n[e]]={}},n.prototype.applyTo=function(e,t,n){for(var i in t)"|prototype|superclass|".indexOf("|"+i+"|")<0&&(!n||void 0===e[i])&&(e[i]=t[i]);return e},n.createGetter=function(e){return function(){return this[e]}},n.createSetter=function(e,t,n){var i="beforeSet"+n,o="afterSet"+n,r=[];return(e[i]||e[o])&&r.push("var oldValue = this."+t+";"),e[i]&&r.push("itemValue = this."+i+"(itemValue);"),r.push("this."+t+" = itemValue;"),e[o]&&r.push("this."+o+"(itemValue, oldValue);"),r.push("return this;"),new Function("itemValue",r.join(""))},n.prototype.applyGetterSetters=function(e){if("function"!=typeof e)throw new TypeError("Lang.applyGetterSetters called on a non-function object.");var t=e.prototype;for(var i in t)if(i&&"|object|function|".indexOf(typeof t[i])>0){var o=i.charAt(0).toUpperCase()+i.substring(1),r="get"+o,s="set"+o;t[r]||(t[r]=n.createGetter(i)),t[s]||(t[s]=n.createSetter(t,i,o))}return e},e.util.Lang=new n("object"==typeof langRootNamespace?langRootNamespace:window)})(IG),(function(e){"use strict";function t(e){!0===e&&(e=t.EVENT_STORE_TYPE.SINGLE),t.prepareInstance(this,e)}t.prepareInstance=function(e,n){e.__events={},e.__handlers=[],n===t.EVENT_STORE_TYPE.GROUP?(e.on=e.subscribe=t.groupEventSubscribe,e.un=e.unsubscribe=t.groupEventUnsubscribe,e.fire=t.groupEventFire,e.hasListener=t.multiEventHasListener):n===t.EVENT_STORE_TYPE.SINGLE?(e.on=e.subscribe=t.singleEventSubscribe,e.un=e.unsubscribe=t.singleEventUnsubscribe,e.fire=t.singleEventFire,e.hasListener=t.singleEventHasListener):(e.onHasListenerChanged?(e.on=e.subscribe=t.advisoryMultiEventSubscribe,e.un=e.unsubscribe=t.advisoryMultiEventUnsubscribe):(e.on=e.subscribe=t.multiEventSubscribe,e.un=e.unsubscribe=t.multiEventUnsubscribe),e.fire=t.multiEventFire,e.hasListener=t.multiEventHasListener),e.unsubscribeEach||(e.unsubscribeEach=t.prototype.unsubscribeEach)},t.getSelectorType=function(e){var n=typeof e;return"number"==n?t.SINGLE_EVENT:"function"==n?t.EVENT_HANDLER_FUNCTION:"string"==n?t.NAMED_EVENT:t.ALL_EVENTS},t.getUnsubscribeMethod=function(e){var n=t.getSelectorType(e);return n==t.SINGLE_EVENT?t.unsubscribeSingleEvent:n==t.NAMED_EVENT?t.unsubscribeNamedEvent:n==t.EVENT_HANDLER_FUNCTION?t.unsubscribeFunctionHandlers:t.unsubscribeAllEvents},t.multiEventSubscribe=function(e,n,i,o){return e=(""+e).toLowerCase(),this.__handlers.push([n,i,e,o]),t.bindEventHandler(this,e,this.__handlers.length-1)},t.singleEventSubscribe=function(e,n,i){return this.__handlers.push([e,n,"default",i]),t.bindEventHandler(this,"default",this.__handlers.length-1)},t.groupEventSubscribe=function(e,n,i,o){e=[].concat(e);var r,s=e.length,a=this.__handlers.length;for(this.__handlers.push([n,i,(""+e[0]).toLowerCase(),o]),r=0;r<s;r++)t.bindEventHandler(this,e[r].toLowerCase(),a);return a},t.advisoryMultiEventSubscribe=function(e,n,i,o){var r,s=this.hasListener(e=(""+e).toLowerCase());return this.__handlers.push([n,i,e,o]),r=t.bindEventHandler(this,e,this.__handlers.length-1),s||this.onHasListenerChanged(e,!0),r},t.bindEventHandler=function(e,t,n){return e.__events[t]||(e.__events[t]=[]),e.__events[t].push(n),n},t.groupEventFire=function(e){for(var n,i,o,r,s={},a=[],l=[],u=l.concat(e);u.length;)for(o=this.__events[(""+u.shift()).toLowerCase()]||l,n=0,i=o.length;n<i;n++)r=o[n],s[r]||(s[r]=!0,a.push(r));return t.processHandlers(this,a,Array.prototype.slice.call(arguments,1))},t.multiEventFire=function(e){return t.processHandlers(this,this.__events[(""+e).toLowerCase()],Array.prototype.slice.call(arguments,1))},t.singleEventFire=function(){return t.processHandlers(this,this.__events.default,arguments)},t.processHandlers=function(e,t,n){var i,o,r,s=t&&t.length?t.length:0;for(i=0;i<s;i++)if((r=e.__handlers[t[i]])&&(o=r[0].apply(r[1]||window,n),r[3]&&r[3].once&&e.un(t[i]),!1===o))return!1;return!0},t.unsubscribeSingleEvent=function(e,t,n){var i=e.__handlers[n],o=!!t;!i||o&&i[1]!==t||(i[0]=null,i[1]=null,e.__handlers[n]=null)},t.unsubscribeNamedEvent=function(e,n,i){var o,r,s=(""+i).toLowerCase(),a=e.__events[s],l=!!n;if(a){for(o=0,r=a.length;o<r;o++)t.unsubscribeSingleEvent(e,n,a[o]);l?t._cleanSubscriptions(e):e.__events[s]=[]}},t.unsubscribeAllEvents=function(e,n){var i,o=e.__handlers,r=!!n;if(o&&o.length){for(i=o.length;i>0;i--)t.unsubscribeSingleEvent(e,n,i-1);r?t._cleanSubscriptions(e):(e.__handlers=[],e.__events={})}},t.unsubscribeFunctionHandlers=function(e,n,i){var o,r,s=e.__handlers,a=!!n;if(s&&s.length){for(o=s.length;o>0;)(r=s[--o])&&r[0]===i&&t.unsubscribeSingleEvent(e,n,o);a&&t._cleanSubscriptions(e)}},t.multiEventUnsubscribe=t.singleEventUnsubscribe=function(e,n){return t.getUnsubscribeMethod(e)(this,n,e),this},t.groupEventUnsubscribe=function(e,n){return t.getUnsubscribeMethod(e)(this,n,e),t._cleanSubscriptions(this),this},t.advisoryMultiEventUnsubscribe=function(e,n){var i,o,r,s=null,a=t.getSelectorType(e);if(a==t.ALL_EVENTS){s=[];for(i in this.__events)this.hasListener(i)&&s.push(i)}else a==t.SINGLE_EVENT&&this.__handlers[e]?i=this.__handlers[e][2]:a==t.NAMED_EVENT&&(i=(""+e).toLowerCase()),i&&this.hasListener(i)&&(s=[i]);if(t.getUnsubscribeMethod(e)(this,n,e),s)for(o=0,r=s.length;o<r;o++)this.hasListener(s[o])||this.onHasListenerChanged(s[o],!1);return this},t.isPreparedInstance=function(e){return!!e.__events&&!!e.__handlers},t.prototype.__events=null,t.prototype.__handlers=null,t.prototype.on=function(){return t.prepareInstance(this),this.on.apply(this,arguments)},t.prototype.subscribe=t.prototype.on,
t.prototype.fire=function(){return!0},t.prototype.un=function(e,t){return this},t.prototype.unsubscribe=t.prototype.un,t.prototype.unsubscribeEach=function(e){var n,i;if(t.isPreparedInstance(this)&&e instanceof Array)for(n=0,i=e.length;n<i;n++)this.un(e[n])},t.prototype.hasListener=function(){return!1},t.multiEventHasListener=function(e){var t,n,i=this.__events[(""+e).toLowerCase()];if(i&&(n=i.length))for(t=0;t<n;t++)if(this.__handlers[i[t]])return!0;return!1},t.singleEventHasListener=function(){var e,t,n=this.__handlers;if(n&&(t=n.length))for(e=0;e<t;e++)if(n[e])return!0;return!1},t._cleanSubscriptions=function(e){if(e.__events&&e.__handlers){var t,n,i,o,r,s,a;for(t in e.__events){for(i=!1,n=null,o=e.__events[t],s=0,a=o.length;s<a;s++)r=e.__handlers[o[s]],r?i&&n.push(o[s]):i||(n=s?o.slice(0,s):[],i=!0);i&&(e.__events[t]=n)}for(s=a=e.__handlers.length;--s>0&&!e.__handlers[s];);e.__handlers.splice(s+1,a)}},t.ALL_EVENTS="all",t.NAMED_EVENT="event",t.SINGLE_EVENT="single",t.EVENT_HANDLER_FUNCTION="handler",t.EVENT_STORE_TYPE={SINGLE:0,MULTIPLE:1,GROUP:2},e.util.Subscribable=t})(IG),(function(e){"use strict";function t(){}function n(e){this._stack=[],this._beforeSend=[],e&&this._beforeSend.push(this.abort)}e.util.Lang.extend(n,e.util.Subscribable),n.prototype._url="",n.prototype._async=!0,n.prototype._postDataContentType=n.JSON_CONTENT_TYPE,n.prototype._handlesProgressEvents=!1,n.prototype._stack=null,n.prototype._beforeSend=null,n.prototype._headers=null,n._defaultSettings={url:"",async:!0,contentType:n.JSON_CONTENT_TYPE,beforeSend:t,complete:t,error:t,success:t,statusCode:{},type:"GET",data:""},"_url,_async,_handlesProgressEvents,_postDataContentType,_headers".split(",").forEach((function(e){var t=e.substring(1,2).toUpperCase()+e.substring(2);n.prototype["get"+t]=function(){return this[e]},n.prototype["set"+t]=function(t){return this[e]=t,this}})),n.send=function(e,t){return arguments.length>=2?(t=arguments[1]||{},t.url=arguments[0]):t="object"==typeof arguments[0]?arguments[0]:{url:arguments[0]},n._send(t)},n._send=function(e){if(e=n._mergeDefaultSettingsWith(e),!e.url)throw new Error("Ajax.send contains no url");var t=(new n).setUrl(e.url).setAsync(e.async).setPostDataContentType(e.contentType).setHeaders(e.headers);t._beforeSend.push(e.beforeSend),t.on("complete",e.complete),t.on("error",e.error),t.on("success",e.success);for(var i in e.statusCode)t.on(i,e.statusCode[i]);return t._sendRequest(e.type,t.getUrl(),e.headers,t.getAsync(),e.data,t.getPostDataContentType()),t},n._mergeDefaultSettingsWith=function(e){if("object"==typeof e){var t,i={};for(t in n._defaultSettings)i[t]=n._defaultSettings[t];for(t in e)void 0!==e[t]&&(i[t]=e[t]);return i}return n._defaultSettings},n.prototype.setUrl=function(e){return this._url=e,this.getUrl="function"==typeof e?n._getFunctionUrl:n._getStringUrl,this},n._getStringUrl=function(){return this._url},n._getFunctionUrl=function(){return this._url.apply(this,arguments)},n.prototype.post=function(e){var t=this._getRequestContentType(e);this._sendRequest("POST",this.getUrl.apply(this,arguments),this._headers,this._async,this._prepareContent(e,t),t)},n.prototype._getRequestContentType=function(e){return!e||window.FormData&&e instanceof window.FormData?null:this._postDataContentType},n.prototype._prepareContent=function(e,t){var i=n.dataProcessors[t];return e&&i?i.request(e):e},n.prototype.get=function(){this._sendRequest("GET",this.getUrl.apply(this,arguments),this._headers,this._async)},n.prototype._sendRequest=function(e,t,n,i,o,r){var s=new XMLHttpRequest;if(this._callBeforeSendMethods(s),s.open(e,t,i),this._handlesProgressEvents&&(s.onprogress=this._onProgress.bind(this,s)),s.onreadystatechange=this._onReadyStateChange.bind(this,s),n)for(var a,l=Object.keys(n),u=0,c=l.length;u<c;u++)a=l[u],s.setRequestHeader(a,n[a]);r&&s.setRequestHeader("Content-Type",r),s.send(o),this._stack.push(s)},n.prototype._callBeforeSendMethods=function(e){for(var t=0,n=this._beforeSend.length;t<n;t++)this._beforeSend[t].call(this,e)},n.prototype._onProgress=function(e,t){this.fire("progress",t,e)},n.prototype._onReadyStateChange=function(e,t){if(e.readyState==n.DONE){var i=e.status,o=this._getResponseContentType(e),r=n._processResponse(o,e.responseText,e.responseXML);this.fire(i,r,e),i<300?this.fire("success",r,i,e):this.fire("error",r,i,e),this.fire("complete",r,i,e),this._removeFromStack(e),n._destroyXhr(e)}},n.prototype._getResponseContentType=function(e){var t=e.getResponseHeader("Content-Type");return t?t.replace(/(\s|;).*$/,"").toLowerCase():null},n.prototype._getResponseContentType=function(e){return(""+e.getResponseHeader("Content-Type")).replace(/(\s|;).*$/,"").toLowerCase()},n._processResponse=function(e,t,i){var o=n.dataProcessors[e];return o?o.response(t):i||t},n.prototype._removeFromStack=function(e){var t=this._stack.indexOf(e);t>=0&&this._stack.splice(t,1)},n.prototype.abort=function(){for(;this._stack.length;)n._destroyXhr(this._stack.pop())},n._destroyXhr=function(e){e.onreadystatechange=e.onprogress=t,e.onreadystatechange=e.onprogress=null,e.readyState!==n.DONE&&e.abort()},n.DONE=4,n.LOADING=3,n.HEADERS_RECEIVED=2,n.OPENED=1,n.UNSENT=0,n.ABORT_ON_SEND=!0,n.FORM_CONTENT_TYPE="application/x-www-form-urlencoded",n.JSON_CONTENT_TYPE="application/json",e.Ajax=n})(IG),(function(e){"use strict";e.util.Lang.namespace("IG.Ajax.dataProcessors");var t={};t.response=function(e){return JSON.parse(e)},t.request=function(e){return JSON.stringify(e)},e.Ajax.dataProcessors["application/json"]=e.Ajax.dataProcessors.JsonProcessor=t})(IG),(function(e){"use strict";var t={};t.response=function(e){var t,n,i=decodeURIComponent(e),o=i.split("&"),r={};for(t in o)o.hasOwnProperty(t)&&(n=o[t].split("="),r[n[0]]=n[1]);return r},t.request=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},e.Ajax.dataProcessors["application/x-www-form-urlencoded"]=e.Ajax.dataProcessors.FormProcessor=t})(IG),(function(){IG.util.Lang.namespace("IG.stats")})(),(function(e){function t(){this._queuedEvents=[],this._statisticsUrl=n}var n="/statistics/events";t.prototype.session=null,t.prototype._queuedEvents=null,t.prototype._postedEvents=null,t.prototype._currentRequest=null,t.prototype._queuedPostId=null,t.prototype._requestTimeoutId=null,t.prototype._cycleInterval=5e3,t.prototype._unhappyPath=!1,t.prototype._maxBatchSize=100,t.prototype.setOrigin=function(e){this._statisticsUrl=e+n},t.prototype.startPosting=function(e,t){this.session=e,t&&(this._cycleInterval=t),this._queueNextPost(this._cycleInterval)},t.prototype.reportEvent=function(e){this._queuedEvents.length<this._maxBatchSize&&this._queuedEvents.push(e)},t.prototype.isPosting=function(){return this._currentRequest||this._queuedPostId},t.prototype.post=function(){this._currentRequest||(this._flush(),window.clearTimeout(this._queuedPostId))},t.prototype._queueNextPost=function(e){this._queuedPostId=window.setTimeout(this._flush.bind(this),e)},t.prototype._flush=function(){this._queuedEvents.length?(this._postEvents(this._queuedEvents),this._postedEvents=this._queuedEvents,this._queuedEvents=[]):this._queueNextPost(this._cycleInterval)},t.prototype._postEvents=function(t){var n={clientBatchTimestamp:Date.now(),sessionDto:this.session,events:t};this._requestTimeoutId=window.setTimeout(this._timeoutHandler.bind(this),this._cycleInterval),this._currentRequest=e.Ajax.send({type:"POST",url:this._statisticsUrl,dataType:"json",contentType:"application/json",data:JSON.stringify(n),success:this._successHandler.bind(this),error:this._errorHandler.bind(this)})},t.prototype._successHandler=function(){window.clearTimeout(this._requestTimeoutId),this._unhappyPath=!1,this._queueNextPost(this._cycleInterval)},t.prototype._errorHandler=function(){var e=this._getUnhappyInterval();window.clearTimeout(this._requestTimeoutId),this._queuedEvents=this._postedEvents.concat(this._queuedEvents),this._unhappyPath=!0,this._queueNextPost(e)},t.prototype._timeoutHandler=function(){var e=this._getUnhappyInterval();this._currentRequest.abort(),this._queuedEvents=this._postedEvents.concat(this._queuedEvents),this._unhappyPath=!0,this._queueNextPost(e)},t.prototype._getUnhappyInterval=function(){return this._unhappyPath?6e5+Math.round(3e5*Math.random()):2*this._cycleInterval},Object.seal(t.prototype),e.stats.Client=new t})(IG),(function(e){function t(e){this.eventName=e,this.eventCategories=[],this.eventProperties={}}t.create=function(e){return new t(e)},t.prototype.eventName=null,t.prototype.eventCategories=null,t.prototype.eventProperties=null,t.prototype.clientEventTimestamp=null,t.prototype.addCategory=function(e){return this.eventCategories.push(e),this},t.prototype.addProperty=function(e,t){return this.eventProperties[e]=t,this},t.prototype.report=function(){this.clientEventTimestamp=Date.now(),e.stats.Client.reportEvent(this)},Object.seal(t.prototype),e.stats.Event=t})(IG),(function(e){function t(){this.sessionProperties={}}t.prototype.applicationName=null,t.prototype.applicationVersion=null,t.prototype.locale=null,t.prototype.websiteId=null,t.prototype.accountId=null,t.prototype.ssoTokenFirstTenChars=null,t.prototype.tdValue=null,t.prototype.siteCatalystSession=null,t.prototype.anonymousUserFlag=!1,t.prototype.sessionProperties=null,t.prototype.addProperty=function(e,t){return this.sessionProperties[e]=t,this},Object.seal(t.prototype),e.stats.Session=t})(IG),IG.stats})),define("module/core/js/error/report",[],(function(){"use strict";function e(e,t){this.message=e,this.errorId=t||"unknown",this.additionalFields=Object.create(null)}e.create=function(t,n,i){return t.error?e._convertToReport(t.error).addField("fileName",t.filename).addField("lineNumber",t.lineno):t instanceof Error?e._convertToReport(t):new e(t,"uncaught").addField("fileName",n).addField("lineNumber",i)},e._convertToReport=function(t){var n=new e(t.message,"unexpected");return n.addField("stackTrace",t.stack),n};var t=e.prototype;return t.errorId=null,t.message=null,t.additionalFields=null,t.addField=function(e,t){return void 0!==t&&(this.additionalFields[e]=t),this},Object.seal(t),Object.seal(e)})),define("module/statistics/js/statistics",["require","module/core/js/util/log","wt-statistics-jsclient","module/core/js/util/object","module/core/js/error/report"],(function(e){"use strict";function t(e){this._eventBus=e,this._commonInfo={}}var n=e("module/core/js/util/log"),i=e("wt-statistics-jsclient"),o=e("module/core/js/util/object"),r=e("module/core/js/error/report");t.reportStatsEvent=function(e,t){var n,r,s=i.Event.create(e),a=o.merge({clientTimestamp:Date.now()},t);for(r in a)n="object"==typeof a[r]?JSON.stringify(a[r]):a[r],s.addProperty(r,n);s.report()};var s=t.prototype;return s._boundErrorHandler=null,s._eventBus=null,s._commonInfo=null,s.init=function(){this._eventBus.subscribe("statistics",this._handleChartStatisticsEvent,this),this._eventBus.subscribe("statistics/commonInfo",this._handleCommonInformation,this),this._boundErrorHandler=this._handleUncaughtError.bind(this),window.addEventListener("error",this._boundErrorHandler,!1)},s.destroy=function(){this._eventBus.unsubscribeAll(this),window.removeEventListener("error",this._boundErrorHandler,!1),this._boundErrorHandler=null},s._handleCommonInformation=function(e){var t,n;for(t in e)n=e[t],void 0!==n?this._commonInfo[t]=n:delete this._commonInfo[t]},s._handleErrorReport=function(e){e=o.applyTo({message:e.message,errorId:e.errorId},e.additionalFields),this._handleChartStatisticsEvent("ERROR",e),n.error(e.message)},s._handleChartStatisticsEvent=function(e,n){t.reportStatsEvent(e,o.merge(this._commonInfo,n))},s._handleUncaughtError=function(e){var t=r.create(e.message,e.filename,e.lineno);return this._handleErrorReport(t),n.error("HTML charts error",e.message,"File: "+e.filename,"Line: "+e.lineno),!0},Object.seal(s),Object.seal(t)})),define("module/core/js/tracker/tracker",["require","module/core/js/util/log"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/log");return t.trackEvent=function(e){t._IGTrackerIsDefined()&&(n.debug("Tracking event:",e),window.IG.Tracker.trackEvent(e))},t._IGTrackerIsDefined=function(){return!(!window.IG||"object"!=typeof window.IG||!window.IG.Tracker)},Object.seal(t)})),define("module/core/js/settings/apisettingsmanager",["require","lodash","module/core/js/util/class","module/core/js/model/layouts/corelayoutmodule","module/core/js/event/eventbus","module/core/js/event/events","module/core/js/util/functional","module/core/js/model/layouts/indicatorlayoutmodule","module/core/js/settings/layoutsclientevents","module/core/js/serviceclient/settingsclient","module/core/js/settings/settingsevents","module/statistics/js/statistics","module/core/js/event/subscribable","module/core/js/tracker/tracker","module/core/js/model/layouts/unknownlayoutmodule"],(function(e){"use strict";function t(e){this._settingsEventBus=a.create(),this._parsingMapGlobal=t._getParsingMap(e,"global"),this._parsingMapEpic=t._getParsingMap(e,"epic"),this._parsingMapTemplate=o.merge({},t.DEFAULT_TEMPLATE_PARSING_MAP,t._getParsingMap(e,"template")),this._settingsEpic={},this._settingsTemplate={},this._tempSettingsEpic={},this._tempSettingsGlobal={},this._tempSettingsTemplate={},this._settingsClient=h.create(this._settingsEventBus,this._parsingMapEpic,this._parsingMapGlobal,this._parsingMapTemplate),this._settingsClient.on(d.LAYOUT_TEMPLATE_IMPORTED,this._handleTemplateImported,this),this._settingsEventBus.subscribe("statistics",m.reportStatsEvent,this),this._settingsEventBus.subscribe("tracker/chart",_.trackEvent,this),this._settingsEventBus.subscribe("tracker/latency",_.trackEvent,this),this._settingsEventBus.subscribe(l.REQUEST_ERROR,u.bubbler(t.REQUEST_ERROR),this)}function n(e,t,n,i,o){var r,s=t[e];return s||(n&&(r=n[e])?r instanceof g||(s=t[e]=r.clone()):i[e]&&(s=t[e]=new i[e].type(null,o,i[e].options),n&&(n[e]=new i[e].type(null,o,i[e].options)))),s||null}function i(e,t,n,i,o){var r=!1,s=!1;if(n&&!o)throw new Error("Settings not loaded yet!");if(!i)throw new Error('Attempting to change settings in module "'+e+'", but no such module is handled');if("boolean"!=typeof(r=t(i)))throw new Error("Change function must return a boolean to indicate if something has changed");if(n&&"boolean"!=typeof(s=t(o[e])))throw new Error("Change function must return a boolean to indicate if something has changed");return r||s}var o=e("lodash"),r=e("module/core/js/util/class"),s=e("module/core/js/model/layouts/corelayoutmodule"),a=e("module/core/js/event/eventbus"),l=e("module/core/js/event/events"),u=e("module/core/js/util/functional"),c=e("module/core/js/model/layouts/indicatorlayoutmodule"),d=e("module/core/js/settings/layoutsclientevents"),h=e("module/core/js/serviceclient/settingsclient"),p=e("module/core/js/settings/settingsevents"),m=e("module/statistics/js/statistics"),f=e("module/core/js/event/subscribable"),_=e("module/core/js/tracker/tracker"),g=e("module/core/js/model/layouts/unknownlayoutmodule");r.extend(t,f),t.DEFAULT_TEMPLATE_PARSING_MAP=Object.freeze({coreModule:{type:s},indicatorModule:{type:c}}),t.create=function(e){return new t(e.modules)},t.createFromConfigs=function(e){var n=o.map(e,"modules"),i=o.merge.apply(o,[{}].concat(n));return t._validateMergedConfigs(n,i),new t(i)},t._validateMergedConfigs=function(e,t){e.forEach((function(e){var n,i,r;for(n in e)if(i=e[n].settingsOptions,r=t[n].settingsOptions,i&&!o.isEqual(o.merge({},i,r),o.merge({},r,i)))throw new Error("Settings options mismatch.")}))},t._getParsingMap=function(e,t){var n={};return o.each(e,(function(e){var i;if(e.type.settingsParsers&&e.type.settingsParsers[t]){if(i=e.type.settingsParsers[t],n[i.moduleName])throw new Error('Parsing class for "'+i.moduleName+'" in '+t+" map has already been set.");n[i.moduleName]={type:i.parserClass,options:e.settingsOptions?e.settingsOptions[t]:null}}})),Object.freeze(n)},t.REQUEST_ERROR="REQUEST_ERROR";var v=t.prototype;return v._settingsEventBus=null,v._settingsEpic=null,v._settingsGlobal=null,v._settingsTemplate=null,v._parsingMapEpic=null,v._parsingMapGlobal=null,v._parsingMapTemplate=null,v._tempSettingsEpic=null,v._tempSettingsGlobal=null,v._tempSettingsTemplate=null,v.exportLayout=u.delegate("_settingsClient","exportLayout"),v.importTemplate=u.delegate("_settingsClient","importLayout"),v.deleteTemplate=u.delegate("_settingsClient","deleteTemplate"),v.hasSettings=function(e){return!!this._settingsTemplate[e]},v.hasEpicSettings=function(e){return!!this._settingsEpic[e]},v.removeSettings=function(e){delete this._settingsTemplate[e]},v.loadSettings=function(e,t){t?this.hasSettings(e)?this._settingsClient.loadEpicSettings(t,this._onEpicSettingsLoaded.bind(this,t)):this._settingsClient.loadSettings(e,t,this._onSettingsLoaded.bind(this,e,t)):this._settingsClient.abortAll(e,t)},v.abortAll=u.delegate("_settingsClient","abortAll"),v.notifyOfTemplateChange=function(e){this.hasSettings(e)&&this.fire(p.LAYOUT_SETTINGS_CHANGED,e)},v.notifyOfEpicChange=function(e,t){this.hasEpicSettings(e)&&this.fire(p.EPIC_SETTINGS_CHANGED,e,t)},v.notifyOfEpicLoaded=function(e){this.hasEpicSettings(e)&&this.fire(p.EPIC_SETTINGS_LOADED,e)},v.notifyOfGlobalChange=function(e){this._settingsGlobal&&this.fire(p.GLOBAL_SETTINGS_CHANGED,e)},v.getTemplateSettings=function(e,t){return n(t,this._tempSettingsTemplate[e]||{},this._settingsTemplate[e]&&this._settingsTemplate[e].modules,this._parsingMapTemplate,this._settingsEventBus)},v.getEpicSpecificSettings=function(e,t){return n(t,this._tempSettingsEpic[e],this._settingsEpic[e]&&this._settingsEpic[e].settings,this._parsingMapEpic,this._settingsEventBus)},v.getGlobalSettings=function(e){return n(e,this._tempSettingsGlobal,this._settingsGlobal,this._parsingMapGlobal,this._settingsEventBus)},v.getTemplateList=u.delegate("_settingsClient","getTemplateList"),v.changeTemplateSettings=function(e,t,n,o){i(t,n,!!o,this.getTemplateSettings(e,t),this._settingsTemplate[e]&&this._settingsTemplate[e].modules)&&(o&&this._settingsClient.saveChartSettings(e,this._settingsTemplate[e]),this.notifyOfTemplateChange(e))},v.changeEpicSpecificSettings=function(e,t,n,o,r){i(n,o,r,this.getEpicSpecificSettings(t,n),this._settingsEpic[t]&&this._settingsEpic[t].settings)&&(r&&this._settingsClient.saveEpicSpecificSettings(this._settingsEpic[t]),this.notifyOfEpicChange(t,e))},v.changeGlobalSettings=function(e,t,n){i(e,t,n,this.getGlobalSettings(e),this._settingsGlobal)&&(n&&this._settingsClient.saveGlobalSettings(this._settingsGlobal),this.notifyOfGlobalChange(e))},v.resetTemplateSettings=function(e,t){this._tempSettingsTemplate[e][t]&&(delete this._tempSettingsTemplate[e][t],this.notifyOfTemplateChange(e))},v._handleTemplateImported=function(e,t){this._settingsTemplate[e].modules=t,this._tempSettingsTemplate[e]={},this.notifyOfTemplateChange(e),this.fire(p.LAYOUT_SETTINGS_IMPORTED,e)},v._onSettingsLoaded=function(e,t,n,i,o){this._settingsTemplate[e]=n,this._settingsGlobal=i,this._tempSettingsTemplate[e]={},this._tempSettingsGlobal={},this.notifyOfTemplateChange(e),this.notifyOfGlobalChange(),this._onEpicSettingsLoaded(t,o)},v._onEpicSettingsLoaded=function(e,t){this._settingsEpic[e]=t,this._tempSettingsEpic[e]={},this.notifyOfEpicChange(e),this.notifyOfEpicLoaded(e)},v.destroy=function(){this._settingsClient.destroy(),this._settingsEventBus.destroy(),delete this._parsingMapEpic,delete this._parsingMapGlobal,delete this._parsingMapTemplate,delete this._settingsClient,delete this._settingsEpic,delete this._settingsGlobal,delete this._settingsTemplate,delete this._tempSettingsEpic,delete this._tempSettingsGlobal,delete this._tempSettingsTemplate},Object.seal(v),Object.seal(t)})),define("module/annotations/js/model/anchor",["require","module/core/js/util/math"],(function(e){"use strict";function t(e,t){this.timestamp=e||null,this.level=n.isNumber(t)?t:null}var n=e("module/core/js/util/math"),i=t.prototype;return i.timestamp=null,i.level=null,i.copy=function(){var e=new t;return e.timestamp=this.timestamp?new Date(this.timestamp.getTime()):null,e.level=this.level,e},i.isEqualTo=function(e){var t,n;return!!e&&(t=this.timestamp&&this.timestamp.getTime(),n=e.timestamp&&e.timestamp.getTime(),t===n&&this.level===e.level)},i.toString=function(){return"("+(null!==this.timestamp?this.timestamp.getTime()+"":"null")+", "+this.level+")"},i.isSet=function(){return null!==this.timestamp&&null!==this.level},Object.seal(i),Object.seal(t)})),define("module/annotations/js/model/annotation",["require","lodash","module/annotations/js/model/anchor","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object","module/core/js/util/oop","module/core/js/model/resolutionsenum","module/core/js/event/subscribable","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,t,n,i){this._subViewScalingMap=e,this._type=t,this._style=n||this.getDefaultStyle(),this.anchors=i,this._subViewName="prices",this._subViewScalingFactor=this._subViewScalingMap[this._subViewName]}var n=e("lodash"),i=e("module/annotations/js/model/anchor"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/object"),a=e("module/core/js/util/oop"),l=e("module/core/js/model/resolutionsenum"),u=e("module/core/js/event/subscribable"),c=e("module/core/js/tracker/enum/schema");o.extend(t,u),t.MODIFIED="modified",t.DEFAULT_STYLE={colour:"#262629",style:"solid",width:"narrow"},t.DARK_DEFAULT_STYLE={colour:"#F5F6F7",style:"solid",width:"narrow"},t._indicatorToSubviewNames={AROON:"aroon",AVERAGE_TRUE_RANGE:"atr",AWESOME_OSCILLATOR:"awesome",CCI:"cci",CHAIKIN_VOLATILITY:"chaikin",DETRENDED_PRICE_OSCILLATOR:"dpo",DMI:"dmi",KDJ:"kdj",MACD:"macd",MOMENTUM:"momentum",MONEY_FLOW_INDEX:"mfi",RATE_OF_CHANGE:"roc",RSI:"rsi",STANDARD_DEVIATION:"stdev",STOCHASTIC:"stochastic",LAST_TRADE_VOLUME:"volume",WILLIAMS_PERCENT_R:"willr"},t._cssClassToColour={annotationColourStyleDefault:"#262629",annotationColourStyle1:"#0095d6",annotationColourStyle2:"#da291c",annotationColourStyle3:"#e7b826",annotationColourStyle4:"#5f9c04",annotationColourStyle5:"#777777",annotationColourStyle6:"#9E5A30"};var d=t.prototype;return d._subViewScalingMap=null,d._resolution=null,d._style=null,d._subViewName=null,d._subViewScalingFactor=null,d._type=null,d.getResolution=r.getter("_resolution"),d.setResolution=r.setter("_resolution"),d.getAttributes=r.empty,d.setAttributes=r.empty,d.getStyle=r.getter("_style"),d.setStyle=r.setter("_style"),d.getSubViewName=r.getter("_subViewName"),d.getSubViewScalingFactor=r.getter("_subViewScalingFactor"),d.getType=r.getter("_type"),d.anchors=null,d.copy=a.abstractMethod,d.getAnchors=r.getter("anchors"),d.getAnchor=function(e){return e=e||0,this.anchors[e]},d.setAnchor=function(e,t){t=t||0,this.anchors[t]=e},d.getDefaultStyle=function(){return{default:s.shallowClone(t.DEFAULT_STYLE),dark:s.shallowClone(t.DARK_DEFAULT_STYLE)}},d.applyGlobalStyles=r.setter("_style"),d.getTrackingAttributes=function(e){return{schema:c.ANNOTATION_ATTRIBUTES,anchors:this.getAnchors().map((function(e){return{schema:c.ANNOTATION_ANCHOR_ATTRIBUTES,timestamp:e.timestamp?e.timestamp.getTime():0,level:e.level}})),colour:this.getStyle()[e].colour}},t.getAnchorsFromJson=function(e){for(var t=[],n=1;e.hasOwnProperty("point"+n);)t.push(new i(new Date(e["point"+n].x),parseFloat(e["point"+n].y))),n++;return t},t.getJsonFromAnchors=function(e,t){var n,i={};for(n=0;n<e.length;n++)i["point"+(n+1)]={x:e[n].timestamp?e[n].timestamp.getTime():new Date,y:e[n].level/t};return i},d.marshal=function(){var e={styles:this._style.default,"styles-dark":this._style.dark,type:this._type};return"prices"!==this._subViewName&&(e.indicator=t._subviewToIndicatorName(this._subViewName)),this._resolution&&(e.resolution={multiplier:this._resolution.multiple,scale:this._resolution.periodUnit}),s.applyTo(e,t.getJsonFromAnchors(n.invokeMap(this.anchors,"copy"),this._subViewScalingFactor),!1),e},d.unmarshal=function(e){var n=s.deepCopyLiteral({},e);return t._indicatorToSubviewNames[n.indicator]&&(this._subViewName=t._indicatorToSubviewNames[n.indicator],this._subViewScalingFactor=this._subViewScalingMap[this._subViewName]),this._type=n.type,this._style=this._unmarshalStyles(n),this._applyPointScaling(n,this._subViewScalingFactor),n.resolution&&(this._resolution=l.getResolutionForScale(n.resolution.scale,n.resolution.multiplier)),this.anchors=t.getAnchorsFromJson(n),n},t._subviewToIndicatorName=function(e){return s.getKeyWithValue(t._indicatorToSubviewNames,e)},d._unmarshalStyles=function(e){return{default:e.styles?s.merge(this.getDefaultStyle().default,e.styles):this._getDeprecatedStyles(e),dark:s.merge(this.getDefaultStyle().dark,e["styles-dark"])}},d._applyPointScaling=function(e,t){for(var n=1;e.hasOwnProperty("point"+n);)e["point"+n].y*=t,n++},d._getDeprecatedStyles=function(e){var n=s.shallowClone(this.getDefaultStyle().default);return n.colour=t._cssClassToColour[e.selectedStyle],n},Object.seal(d),Object.seal(t)})),define("module/annotations/js/model/annotationtypeenum",["require"],(function(e){"use strict";var t={};return t.ARROW="ARROW",t.CHANNEL="CHANNEL",t.ELLIOTT_WAVE="ELLIOTT_WAVE",t.ELLIOTT_WAVE_ABC="ELLIOTT_WAVE_ABC",t.FIBONACCI="FIBONACCI",t.FIBONACCI_EXTENSION="FIBONACCI_EXTENSION",t.GANN_FAN="GANN_FAN",t.GANN_LINE="GANN_LINE",t.HEAD_AND_SHOULDERS="HEAD_AND_SHOULDERS",t.HORIZONTAL_LINE="HORIZONTAL_LINE",t.OVAL="OVAL",t.PITCHFORK="PITCHFORK",t.POINT_TO_POINT="POINT_TO_POINT",t.RECTANGLE="RECTANGLE",t.TEXT="TEXT",t.TREND_LINE="TREND_LINE",t.TRIANGLE="TRIANGLE",t.VERTICAL_LINE="VERTICAL_LINE",Object.freeze(t)})),define("module/annotations/js/model/arrowannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,o),this.setAngle(r)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/math"),l=e("module/core/js/util/object");r.extend(t,i),t.createDefault=function(e,i){return new t(e,o.ARROW,null,[new n],null)};var u=t.prototype;return u._angle=null,u.getAngle=s.getter("_angle"),u.setAngle=function(e){null!==e&&(e=a.normaliseAngle(e)),e!==this._angle&&(this._angle=e)},u.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy()],this._angle)},u.marshal=function(){var e=t.superclass.marshal.call(this);return l.applyTo(e,{arrowAngle:this.getAngle()}),l.applyTo(e,{point2:{x:0,y:0}}),e},u.unmarshal=function(e){var n=t.superclass.unmarshal.call(this,e);this.setAngle(n.arrowAngle)},u.getDefaultStyle=function(){return{default:{colour:i.DEFAULT_STYLE.colour,width:i.DEFAULT_STYLE.width},dark:{colour:i.DARK_DEFAULT_STYLE.colour,width:i.DARK_DEFAULT_STYLE.width}}},Object.seal(u),Object.seal(t)})),define("module/annotations/js/model/threeanchorannotation",["require","module/annotations/js/model/annotation","module/core/js/util/class","module/core/js/util/oop"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/annotations/js/model/annotation"),i=e("module/core/js/util/class"),o=e("module/core/js/util/oop");i.extend(t,n),t.createDefault=o.abstractMethod;var r=t.prototype;return r.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy(),this.anchors[1].copy(),this.anchors[2].copy()]).setResolution(this._resolution)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/model/channelannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/annotations/js/model/threeanchorannotation"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotationtypeenum"),o=e("module/core/js/util/class"),r=e("module/annotations/js/model/threeanchorannotation");return o.extend(t,r),t.createDefault=function(e,o){return new t(e,i.CHANNEL,null,[new n,new n,new n]).setResolution(o)},Object.seal(t.prototype),Object.seal(t)})),define("module/annotations/js/model/elliottwave12345annotation",["require","lodash","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("lodash"),i=e("module/annotations/js/model/anchor"),o=e("module/annotations/js/model/annotation"),r=e("module/annotations/js/model/annotationtypeenum");e("module/core/js/util/class").extend(t,o);var s=t.prototype;return t.createDefault=function(e,n){return new t(e,r.ELLIOTT_WAVE,null,[new i,new i,new i,new i,new i,new i]).setResolution(n)},s.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,n.invokeMap(this.anchors,"copy")).setResolution(this._resolution)},Object.seal(s),Object.seal(t)})),define("module/annotations/js/model/elliottwaveabcannotation",["require","lodash","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("lodash"),i=e("module/annotations/js/model/anchor"),o=e("module/annotations/js/model/annotation"),r=e("module/annotations/js/model/annotationtypeenum");e("module/core/js/util/class").extend(t,o);var s=t.prototype;return t.createDefault=function(e,n){return new t(e,r.ELLIOTT_WAVE_ABC,null,[new i,new i,new i,new i]).setResolution(n)},s.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,n.invokeMap(this.anchors,"copy")).setResolution(this._resolution)},Object.seal(s),Object.seal(t)})),define("module/annotations/js/model/fibonacciannotation",["require","lodash","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,o),this._ratioSettings=r}var n=e("lodash"),i=e("module/annotations/js/model/anchor"),o=e("module/annotations/js/model/annotation"),r=e("module/annotations/js/model/annotationtypeenum"),s=e("module/core/js/util/class"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/object");s.extend(t,o),t.createDefault=function(e,n){return new t(e,r.FIBONACCI,null,[new i,new i,new i],null).setResolution(n)};var u=t.prototype;return u._ratioSettings=null,u._getExpectedAnchors=n.constant(3),u.getRatioSettings=a.getter("_ratioSettings"),u.setRatioSettings=a.setter("_ratioSettings"),u.copy=function(){var e=this.anchors.map((function(e){return e.copy()}));return new t(this._subViewScalingMap,this._type,this._style,e,n.cloneDeep(this._ratioSettings)).setResolution(this._resolution)},u.unmarshal=function(e){var n=t.superclass.unmarshal.call(this,e);this._ratioSettings=this.getRatioSettingsFromJson(n),this.anchors.length===this._getExpectedAnchors()-1&&this.anchors.push(this.anchors[this.anchors.length-1].copy())},u.marshal=function(){var e=t.superclass.marshal.call(this);return this._ratioSettings&&l.applyTo(e,this.getJsonFromRatioSettings(),!1),e},u.getRatioSettingsFromJson=function(e){var t=[];return e.hasOwnProperty("ratios")&&(t=e.ratios),t.length>0?t:null},u.getJsonFromRatioSettings=function(){var e={};return e.ratios=this._ratioSettings,e},u.getDefaultStyle=function(){return{default:{colour:o.DEFAULT_STYLE.colour,width:o.DEFAULT_STYLE.width},dark:{colour:o.DARK_DEFAULT_STYLE.colour,
width:o.DARK_DEFAULT_STYLE.width}}},u.getAttributes=function(){return{ratios:this._ratioSettings}},u.setAttributes=function(e){this._ratioSettings=e.ratios},Object.seal(u),Object.seal(t)})),define("module/annotations/js/model/fibonacciextensionannotation",["require","lodash","module/annotations/js/model/anchor","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/annotations/js/model/fibonacciannotation"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/model/anchor"),o=e("module/annotations/js/model/annotationtypeenum"),r=e("module/core/js/util/class"),s=e("module/annotations/js/model/fibonacciannotation");return r.extend(t,s),t.prototype._getExpectedAnchors=n.constant(4),t.createDefault=function(e,n){return new t(e,o.FIBONACCI_EXTENSION,null,[new i,new i,new i,new i],null).setResolution(n)},Object.seal(t.prototype),Object.seal(t)})),define("module/annotations/js/model/gannlineannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,o),this.setAngle(r)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/math"),l=e("module/core/js/util/object");r.extend(t,i),t.createDefault=function(e,i){return new t(e,o.GANN_LINE,null,[new n],null).setResolution(i)};var u=t.prototype;return u._angle=null,u.getAngle=s.getter("_angle"),u.setAngle=function(e){null!==e&&(e=a.normaliseAngle(e)),e!==this._angle&&(this._angle=e)},u.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy()],this._angle)},u.marshal=function(){var e=t.superclass.marshal.call(this);return l.applyTo(e,{angleDegrees:this.getAngle()}),l.applyTo(e,{point2:{x:0,y:0}}),e},u.unmarshal=function(e){var n=t.superclass.unmarshal.call(this,e);this.setAngle(n.angleDegrees)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/model/gannfanannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotationtypeenum","module/annotations/js/model/gannlineannotation","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotationtypeenum"),o=e("module/annotations/js/model/gannlineannotation");e("module/core/js/util/class").extend(t,o),t.createDefault=function(e,o){return new t(e,i.GANN_FAN,null,[new n],null).setResolution(o)};var r=t.prototype;return r.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy()],this._angle)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/model/headandshouldersannotation",["require","lodash","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("lodash"),i=e("module/annotations/js/model/anchor"),o=e("module/annotations/js/model/annotation"),r=e("module/annotations/js/model/annotationtypeenum");e("module/core/js/util/class").extend(t,o),t.createDefault=function(e,n){return new t(e,r.HEAD_AND_SHOULDERS,null,[new i,new i,new i,new i,new i,new i,new i]).setResolution(n)};var s=t.prototype;return s.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,n.invokeMap(this.anchors,"copy")).setResolution(this._resolution)},Object.seal(s),Object.seal(t)})),define("module/annotations/js/model/horizontallineannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/object");r.extend(t,i),t.createDefault=function(e,i){return new t(e,o.HORIZONTAL_LINE,null,[new n])};var l=t.prototype;return l.setResolution=s.emptyChainable,l.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[new n])},l.marshal=function(){var e,n,o,r=t.superclass.marshal.call(this);return e=this.anchors[0].copy(),e.timestamp=e.timestamp||new Date,n=this.anchors[0].copy(),n.timestamp=new Date(e.timestamp.getTime()+1),o=[e,n],a.applyTo(r,i.getJsonFromAnchors(o,this._subViewScalingFactor),!1),r},Object.seal(l),Object.seal(t)})),define("module/annotations/js/model/ovalannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum");e("module/core/js/util/class").extend(t,i),t.createDefault=function(e,i){return new t(e,o.OVAL,null,[new n,new n]).setResolution(i)};var r=t.prototype;return r.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy(),this.anchors[1].copy()]).setResolution(this._resolution)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/model/pitchforkannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum");e("module/core/js/util/class").extend(t,i),t.createDefault=function(e,i){return new t(e,o.PITCHFORK,null,[new n(new Date,null),new n(new Date,null),new n(new Date,null),new n(new Date,null)]).setResolution(i)};var r=t.prototype;return r.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy(),this.anchors[1].copy(),this.anchors[2].copy(),this.anchors[3].copy()]).setResolution(this._resolution)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/model/pointtopointannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum");e("module/core/js/util/class").extend(t,i),t.createDefault=function(e,i){return new t(e,o.POINT_TO_POINT,null,[new n,new n]).setResolution(i)};var r=t.prototype;return r.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy(),this.anchors[1].copy()]).setResolution(this._resolution)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/model/rectangleannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum");e("module/core/js/util/class").extend(t,i),t.createDefault=function(e,i){return new t(e,o.RECTANGLE,null,[new n,new n]).setResolution(i)};var r=t.prototype;return r.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy(),this.anchors[1].copy()]).setResolution(this._resolution)},Object.seal(r),Object.seal(t)})),define("module/colour-customisation/js/constants",["require","module/core/js/util/object"],(function(e){"use strict";var t=e("module/core/js/util/object"),n={STYLE:{SOLID:"solid",DASHED:"dashed",DOTTED:"dotted"},WIDTH:{NARROW:"narrow",MEDIUM:"medium",THICK:"thick"},COLOUR_REGEXP:/^#(?:([0-9a-f])\1\1|[0-9a-f]{6})$/i};return t.recursiveFreeze(n)})),define("module/colour-customisation/js/enum/colourpalette",["require","module/core/js/util/object"],(function(e){"use strict";return e("module/core/js/util/object").recursiveFreeze({GREEN:{50:"#E5F3E5",100:"#C2E3C2",200:"#9CD29D",300:"#75BF75",400:"#57B159",500:"#3BA43B",600:"#349535",700:"#2E852F",800:"#267429",900:"#1D551E"},BLUE:{50:"#E5EFF8",100:"#C1DAEF",200:"#9CC2E6",300:"#74AADB",400:"#5698D3",500:"#3987CC",600:"#337AB9",700:"#2E6DA5",800:"#285F91",900:"#1D466A"},RED:{50:"#FBE1E1",100:"#F6B8B8",200:"#F08D8E",300:"#E95E5F",400:"#E43C3D",500:"#E01B1C",600:"#CB181A",700:"#B61516",800:"#9F1414",900:"#750E0E"},ORANGE:{50:"#FCE1D6",100:"#F9BBA3",200:"#F79772",300:"#F57544",400:"#F45D24",500:"#F34706",600:"#DD3A00",700:"#C93400",800:"#B22E00",900:"#832200"},YELLOW:{50:"#FEF4E1",100:"#FCE6B8",200:"#FAD68E",300:"#F8C55F",400:"#F6B93D",500:"#F5AD1C",600:"#DE9D25",700:"#C78C20",800:"#AE7A1A",900:"#805A11"},PURPLE:{50:"#ECE9F0",100:"#D2CADC",200:"#B6AAC7",300:"#9887AF",400:"#826E9E",500:"#6D558E",600:"#634D81",700:"#584573",800:"#4D3C64",900:"#392C4A"},TEAL:{50:"#E4F2F3",100:"#BDE0E2",200:"#95CDD2",300:"#69B8BF",400:"#48A9B1",500:"#2E9BA3",600:"#228D95",700:"#1F7D85",800:"#1A6E74",900:"#145156"},GREY:{50:"#F5F6F7",100:"#EBEBED",200:"#D8D8DC",300:"#B0B0B8",400:"#9696A3",500:"#6C6C7A",600:"#46474F",700:"#37373F",800:"#262629",900:"#1A1A1E"}})})),define("module/core/js/enum/themesenum",[],(function(){"use strict";var e={};return e.IG="ig",e.NADEX="dxd",e.COMMSEC="commsec",e.CFDTRADER="cfdtrader",e.HARGREAVES="hargreaves",e.NWTP_LIGHT="nwtpLight",e.NWTP_DARK="nwtpDark",e.THEME_SETTINGS_MODE=Object.freeze({default:"default",dark:"dark"}),e.THEME_SETTINGS_MAP=Object.freeze({ig:e.THEME_SETTINGS_MODE.default,dxd:e.THEME_SETTINGS_MODE.default,commsec:e.THEME_SETTINGS_MODE.default,cfdtrader:e.THEME_SETTINGS_MODE.default,hargreaves:e.THEME_SETTINGS_MODE.default,nwtpLight:e.THEME_SETTINGS_MODE.default,nwtpDark:e.THEME_SETTINGS_MODE.dark}),Object.freeze(e)})),define("module/colour-customisation/js/model/layouts/defaults",["require","lodash","module/colour-customisation/js/enum/colourpalette","module/colour-customisation/js/constants","module/core/js/util/functional","module/core/js/util/log","module/core/js/enum/themesenum","module/core/js/util/object"],(function(e){"use strict";function t(e){return this[e]}function n(e,t,n){t(n)?(this[e]=n,this.modified=!0):l.warn("Invalid value provided for colour customisation setting")}function i(){return this.modified?this:void 0}var o=e("lodash"),r=e("module/colour-customisation/js/enum/colourpalette"),s=e("module/colour-customisation/js/constants"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/log"),u=e("module/core/js/enum/themesenum"),c=e("module/core/js/util/object"),d={};return d.generateDefaults=function(){return{default:d._generateLightDefaults(),dark:d._generateDarkDefaults()}},d._generateLightDefaults=function(){var e={};return e.themeSettingsMode=u.THEME_SETTINGS_MODE.default,e.candlestick=d.style({up:{fill:d.colour(r.GREEN[500]),stroke:d.unstyledStroke(r.GREEN[500],s.WIDTH.NARROW)},noMovement:{stroke:d.unstyledStroke(r.GREY[800],s.WIDTH.NARROW)},down:{fill:d.colour(r.RED[500]),stroke:d.unstyledStroke(r.RED[500],s.WIDTH.NARROW)}}),e.hloc=d.style({up:d.unstyledStroke(r.GREEN[500],s.WIDTH.NARROW),noMovement:d.unstyledStroke(r.GREY[800],s.WIDTH.NARROW),down:d.unstyledStroke(r.RED[500],s.WIDTH.NARROW)}),e.line=d.style({up:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),noMovement:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),down:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW)}),e.mountain=d.style({fill:d.colour(r.BLUE[50]),line:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW)}),e.indicators={},e.indicators.AROON=d.style({up:{line:d.colouredStroke(r.GREEN[500],s.STYLE.SOLID,s.WIDTH.NARROW),cloud:d.colour(r.GREEN[50])},down:{line:d.colouredStroke(r.RED[500],s.STYLE.SOLID,s.WIDTH.NARROW),cloud:d.colour(r.RED[50])}}),e.indicators.ATR=d.style({line:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.BLUE[50])}),e.indicators.AWESOME=d.style({up:d.colour(r.GREEN[500]),down:d.colour(r.RED[500])}),e.indicators.BOL=d.style({positiveBand:d.colouredStroke(r.YELLOW[500],s.STYLE.SOLID,s.WIDTH.NARROW),movingAverageBand:d.colouredStroke(r.GREY[700],s.STYLE.SOLID,s.WIDTH.NARROW),negativeBand:d.colouredStroke(r.YELLOW[500],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.YELLOW[50])}),e.indicators.CHAIKIN=d.style({line:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.BLUE[50])}),e.indicators.CCI=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[50])},down:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[50])}}),e.indicators.DONCHIAN=d.style({up:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW),middle:d.colouredStroke(r.BLUE[800],s.STYLE.SOLID,s.WIDTH.NARROW),down:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.BLUE[50])}),e.indicators.DPO=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[50])},down:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[50])}}),e.indicators.DMI=d.style({diPlus:d.colouredStroke(r.GREEN[500],s.STYLE.SOLID,s.WIDTH.NARROW),adx:d.colouredStroke(r.GREY[800],s.STYLE.SOLID,s.WIDTH.NARROW),diMinus:d.colouredStroke(r.RED[500],s.STYLE.SOLID,s.WIDTH.NARROW),histogram:{up:d.colour(r.GREEN[500]),down:d.colour(r.RED[500])}}),e.indicators.EMA=d.style({ema1:d.colouredStroke(r.PURPLE[600],s.STYLE.SOLID,s.WIDTH.NARROW),ema2:d.colouredStroke(r.TEAL[500],s.STYLE.SOLID,s.WIDTH.NARROW),ema3:d.colouredStroke(r.YELLOW[700],s.STYLE.SOLID,s.WIDTH.NARROW),ema4:d.colouredStroke(r.GREY[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1),ema5:d.colouredStroke(r.ORANGE[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1),ema6:d.colouredStroke(r.GREEN[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1),ema7:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),ema8:d.colouredStroke(r.PURPLE[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1)}),e.indicators.ICHIMOKU=d.style({chikou:d.colouredStroke(r.PURPLE[600],s.STYLE.SOLID,s.WIDTH.NARROW),kijun:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW),tenkan:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),spanA:d.colouredStroke(r.GREY[700],s.STYLE.SOLID,s.WIDTH.NARROW),cloudUp:d.colour(r.GREEN[50]),spanB:d.colouredStroke(r.GREY[600],s.STYLE.SOLID,s.WIDTH.NARROW),cloudDown:d.colour(r.RED[50])}),e.indicators.KDJ=d.style({stochasticK:d.colouredStroke(r.GREY[800],s.STYLE.SOLID,s.WIDTH.NARROW),stochasticD:d.colouredStroke(r.RED[500],s.STYLE.DASHED,s.WIDTH.NARROW),stochasticJ:d.colouredStroke(r.GREEN[500],s.STYLE.SOLID,s.WIDTH.NARROW)}),e.indicators.KELTNER=d.style({up:d.colouredStroke(r.PURPLE[600],s.STYLE.SOLID,s.WIDTH.NARROW),middle:d.colouredStroke(r.PURPLE[800],s.STYLE.SOLID,s.WIDTH.NARROW),down:d.colouredStroke(r.PURPLE[600],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.PURPLE[50])}),e.indicators.MACD=d.style({macd:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),signal:d.colouredStroke(r.RED[400],s.STYLE.SOLID,s.WIDTH.NARROW),histogram:{up:d.colour(r.GREEN[500]),down:d.colour(r.RED[500])}}),e.indicators.MOMENTUM=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[50])},down:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[50])}}),e.indicators.MFI=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[50])},down:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[50])}}),e.indicators.MVAVG=d.style({movingAverage1:d.colouredStroke(r.GREEN[400],s.STYLE.SOLID,s.WIDTH.NARROW),movingAverage2:d.colouredStroke(r.GREY[800],s.STYLE.SOLID,s.WIDTH.NARROW),movingAverage3:d.colouredStroke(r.RED[400],s.STYLE.SOLID,s.WIDTH.NARROW),movingAverage4:d.colouredStroke(r.YELLOW[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),movingAverage5:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),movingAverage6:d.colouredStroke(r.GREY[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),movingAverage7:d.colouredStroke(r.ORANGE[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),movingAverage8:d.colouredStroke(r.PURPLE[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1)}),e.indicators.SAR=d.style({up:d.colour(r.GREEN[400]),down:d.colour(r.RED[400])}),e.indicators.PIVOT=d.style({r3:d.colouredStroke(r.RED[400],s.STYLE.SOLID,s.WIDTH.MEDIUM),r2:d.colouredStroke(r.RED[400],s.STYLE.DASHED,s.WIDTH.MEDIUM),r1:d.colouredStroke(r.RED[400],s.STYLE.DASHED,s.WIDTH.NARROW),pivot:d.colouredStroke(r.GREY[700],s.STYLE.DASHED,s.WIDTH.NARROW),s1:d.colouredStroke(r.GREEN[400],s.STYLE.DASHED,s.WIDTH.NARROW),s2:d.colouredStroke(r.GREEN[400],s.STYLE.DASHED,s.WIDTH.MEDIUM),s3:d.colouredStroke(r.GREEN[400],s.STYLE.SOLID,s.WIDTH.MEDIUM)}),e.indicators.ROC=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[50])},down:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[50])}}),e.indicators.RSI=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[50])},down:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[50])}}),e.indicators.STDEV=d.style({line:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.BLUE[50])}),e.indicators.STOCH=d.style({stochasticK:d.colouredStroke(r.GREY[800],s.STYLE.SOLID,s.WIDTH.NARROW),stochasticD:d.colouredStroke(r.RED[500],s.STYLE.DASHED,s.WIDTH.NARROW)}),e.indicators.SUPERTREND=d.style({up:d.colouredStroke(r.GREEN[500],s.STYLE.SOLID,s.WIDTH.NARROW),down:d.colouredStroke(r.RED[500],s.STYLE.SOLID,s.WIDTH.NARROW)}),e.indicators.VOLUME=d.style({up:d.colour(r.GREEN[500]),fill:d.colour(r.GREY[800]),down:d.colour(r.RED[500])}),e.indicators.WMA=d.style({wma1:d.colouredStroke(r.BLUE[200],s.STYLE.SOLID,s.WIDTH.NARROW),wma2:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW),wma3:d.colouredStroke(r.BLUE[800],s.STYLE.SOLID,s.WIDTH.NARROW),wma4:d.colouredStroke(r.YELLOW[600],s.STYLE.SOLID,s.WIDTH.NARROW,!1),wma5:d.colouredStroke(r.GREY[600],s.STYLE.SOLID,s.WIDTH.NARROW,!1),wma6:d.colouredStroke(r.GREEN[600],s.STYLE.SOLID,s.WIDTH.NARROW,!1),wma7:d.colouredStroke(r.TEAL[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1),wma8:d.colouredStroke(r.RED[600],s.STYLE.SOLID,s.WIDTH.NARROW,!1)}),e.indicators.WILLR=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[50])},down:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[50])}}),Object.seal(e.indicators),Object.freeze(e)},d._generateDarkDefaults=function(){var e=o.assign({},d._generateLightDefaults());return e.themeSettingsMode=u.THEME_SETTINGS_MODE.dark,e.candlestick=d.style({up:{fill:d.colour(r.GREEN[500]),stroke:d.unstyledStroke(r.GREEN[500],s.WIDTH.NARROW)},noMovement:{stroke:d.unstyledStroke(r.GREY[200],s.WIDTH.NARROW)},down:{fill:d.colour(r.RED[500]),stroke:d.unstyledStroke(r.RED[500],s.WIDTH.NARROW)}}),e.hloc=d.style({up:d.unstyledStroke(r.GREEN[500],s.WIDTH.NARROW),noMovement:d.unstyledStroke(r.GREY[200],s.WIDTH.NARROW),down:d.unstyledStroke(r.RED[500],s.WIDTH.NARROW)}),e.line=d.style({up:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),noMovement:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),down:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW)}),e.mountain=d.style({fill:d.colour(r.BLUE[500]),line:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW)}),e.indicators.AROON=d.style({up:{line:d.colouredStroke(r.GREEN[500],s.STYLE.SOLID,s.WIDTH.NARROW),cloud:d.colour(r.GREEN[400])},down:{line:d.colouredStroke(r.RED[500],s.STYLE.SOLID,s.WIDTH.NARROW),cloud:d.colour(r.RED[400])}}),e.indicators.ATR=d.style({line:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.BLUE[500])}),e.indicators.AWESOME=d.style({up:d.colour(r.GREEN[500]),down:d.colour(r.RED[500])}),e.indicators.BOL=d.style({positiveBand:d.colouredStroke(r.YELLOW[500],s.STYLE.SOLID,s.WIDTH.NARROW),movingAverageBand:d.colouredStroke(r.GREY[200],s.STYLE.SOLID,s.WIDTH.NARROW),negativeBand:d.colouredStroke(r.YELLOW[500],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.YELLOW[500])}),e.indicators.CHAIKIN=d.style({line:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.BLUE[500])}),e.indicators.CCI=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[400])},down:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[400])}}),e.indicators.DONCHIAN=d.style({up:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW),middle:d.colouredStroke(r.BLUE[800],s.STYLE.SOLID,s.WIDTH.NARROW),down:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.BLUE[500])}),e.indicators.DPO=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[400])},down:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[400])}}),e.indicators.DMI=d.style({diPlus:d.colouredStroke(r.GREEN[500],s.STYLE.SOLID,s.WIDTH.NARROW),adx:d.colouredStroke(r.GREY[200],s.STYLE.SOLID,s.WIDTH.NARROW),diMinus:d.colouredStroke(r.RED[500],s.STYLE.SOLID,s.WIDTH.NARROW),histogram:{up:d.colour(r.GREEN[500]),down:d.colour(r.RED[500])}}),e.indicators.EMA=d.style({ema1:d.colouredStroke(r.PURPLE[400],s.STYLE.SOLID,s.WIDTH.NARROW),ema2:d.colouredStroke(r.TEAL[400],s.STYLE.SOLID,s.WIDTH.NARROW),ema3:d.colouredStroke(r.YELLOW[700],s.STYLE.SOLID,s.WIDTH.NARROW),ema4:d.colouredStroke(r.GREY[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1),ema5:d.colouredStroke(r.ORANGE[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1),ema6:d.colouredStroke(r.GREEN[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1),ema7:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),ema8:d.colouredStroke(r.PURPLE[200],s.STYLE.SOLID,s.WIDTH.NARROW,!1)}),e.indicators.ICHIMOKU=d.style({chikou:d.colouredStroke(r.PURPLE[400],s.STYLE.SOLID,s.WIDTH.NARROW),kijun:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW),tenkan:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),spanA:d.colouredStroke(r.GREY[200],s.STYLE.SOLID,s.WIDTH.NARROW),cloudUp:d.colour(r.GREEN[400]),spanB:d.colouredStroke(r.GREY[400],s.STYLE.SOLID,s.WIDTH.NARROW),cloudDown:d.colour(r.RED[400])}),e.indicators.KDJ=d.style({stochasticK:d.colouredStroke(r.GREY[200],s.STYLE.SOLID,s.WIDTH.NARROW),stochasticD:d.colouredStroke(r.RED[500],s.STYLE.DASHED,s.WIDTH.NARROW),stochasticJ:d.colouredStroke(r.GREEN[500],s.STYLE.SOLID,s.WIDTH.NARROW)}),e.indicators.KELTNER=d.style({up:d.colouredStroke(r.PURPLE[400],s.STYLE.SOLID,s.WIDTH.NARROW),middle:d.colouredStroke(r.PURPLE[500],s.STYLE.SOLID,s.WIDTH.NARROW),down:d.colouredStroke(r.PURPLE[400],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.PURPLE[500])}),e.indicators.MACD=d.style({macd:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),signal:d.colouredStroke(r.RED[400],s.STYLE.SOLID,s.WIDTH.NARROW),histogram:{up:d.colour(r.GREEN[500]),down:d.colour(r.RED[500])}}),e.indicators.MOMENTUM=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[400])},down:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[400])}}),e.indicators.MFI=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[400])},down:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[400])}}),e.indicators.MVAVG=d.style({movingAverage1:d.colouredStroke(r.GREEN[200],s.STYLE.SOLID,s.WIDTH.NARROW),movingAverage2:d.colouredStroke(r.GREY[200],s.STYLE.SOLID,s.WIDTH.NARROW),movingAverage3:d.colouredStroke(r.RED[200],s.STYLE.SOLID,s.WIDTH.NARROW),movingAverage4:d.colouredStroke(r.YELLOW[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),movingAverage5:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),movingAverage6:d.colouredStroke(r.GREY[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),movingAverage7:d.colouredStroke(r.ORANGE[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1),movingAverage8:d.colouredStroke(r.PURPLE[500],s.STYLE.SOLID,s.WIDTH.NARROW,!1)}),e.indicators.SAR=d.style({up:d.colour(r.GREEN[400]),down:d.colour(r.RED[400])}),e.indicators.PIVOT=d.style({r3:d.colouredStroke(r.RED[400],s.STYLE.SOLID,s.WIDTH.MEDIUM),r2:d.colouredStroke(r.RED[400],s.STYLE.DASHED,s.WIDTH.MEDIUM),r1:d.colouredStroke(r.RED[400],s.STYLE.DASHED,s.WIDTH.NARROW),pivot:d.colouredStroke(r.GREY[200],s.STYLE.DASHED,s.WIDTH.NARROW),s1:d.colouredStroke(r.GREEN[400],s.STYLE.DASHED,s.WIDTH.NARROW),s2:d.colouredStroke(r.GREEN[400],s.STYLE.DASHED,s.WIDTH.MEDIUM),s3:d.colouredStroke(r.GREEN[400],s.STYLE.SOLID,s.WIDTH.MEDIUM)}),e.indicators.ROC=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[400])},down:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[400])}}),e.indicators.RSI=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[400])},down:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[400])}}),e.indicators.STDEV=d.style({line:d.colouredStroke(r.BLUE[400],s.STYLE.SOLID,s.WIDTH.NARROW),fill:d.colour(r.BLUE[500])}),e.indicators.STOCH=d.style({stochasticK:d.colouredStroke(r.GREY[200],s.STYLE.SOLID,s.WIDTH.NARROW),stochasticD:d.colouredStroke(r.RED[500],s.STYLE.DASHED,s.WIDTH.NARROW)}),e.indicators.SUPERTREND=d.style({up:d.colouredStroke(r.GREEN[500],s.STYLE.SOLID,s.WIDTH.NARROW),down:d.colouredStroke(r.RED[500],s.STYLE.SOLID,s.WIDTH.NARROW)}),e.indicators.VOLUME=d.style({up:d.colour(r.GREEN[500]),fill:d.colour(r.GREY[200]),down:d.colour(r.RED[500])}),e.indicators.WMA=d.style({wma1:d.colouredStroke(r.BLUE[200],s.STYLE.SOLID,s.WIDTH.NARROW),wma2:d.colouredStroke(r.BLUE[500],s.STYLE.SOLID,s.WIDTH.NARROW),wma3:d.colouredStroke(r.BLUE[800],s.STYLE.SOLID,s.WIDTH.NARROW),wma4:d.colouredStroke(r.YELLOW[600],s.STYLE.SOLID,s.WIDTH.NARROW,!1),wma5:d.colouredStroke(r.GREY[600],s.STYLE.SOLID,s.WIDTH.NARROW,!1),wma6:d.colouredStroke(r.GREEN[600],s.STYLE.SOLID,s.WIDTH.NARROW,!1),wma7:d.colouredStroke(r.TEAL[400],s.STYLE.SOLID,s.WIDTH.NARROW,!1),wma8:d.colouredStroke(r.ORANGE[600],s.STYLE.SOLID,s.WIDTH.NARROW,!1)}),e.indicators.WILLR=d.style({line:d.stroke(s.STYLE.SOLID,s.WIDTH.NARROW),up:{lineColour:d.colour(r.RED[500]),fill:d.colour(r.RED[400])},down:{lineColour:d.colour(r.GREEN[500]),fill:d.colour(r.GREEN[400])}}),Object.freeze(e)},d.resetToDefaults=function(e,t,n){var i=d.generateDefaults()[n];t.forEach((function(e){i=i[e]})),c.merge(e,i,!0),e.modified=!1},d.colour=function(e){return{colour:e,isVisible:!0}},d.stroke=function(e,t){return{style:e,width:t,isVisible:!0}},d.unstyledStroke=function(e,t){return{colour:e,width:t,isVisible:!0}},d.colouredStroke=function(e,t,n,i){return i=void 0===i||i,{colour:e,style:t,width:n,isVisible:i}},d.style=function(e){var n,o={},r={},s=[];s.counter=0,s.modified=!1;for(n in e)r[n]=d._createPropDescriptor(e[n],s);return r.modified={configurable:!1,enumerable:!1,get:t.bind(s,"modified"),set:function(e){s.modified=!!e}},r.toJSON={configurable:!1,enumerable:!1,writable:!1,value:i},c.defineProperties(o,r),Object.seal(o)},d._createPropDescriptor=function(e,i){var o,r,s;if(c.isLiteral(e)){for(s in e)c.defineProperty(e,s,d._createPropDescriptor(e[s],i));return{configurable:!1,enumerable:!0,writable:!1,value:e}}return o=d._filterColour(e)?d._filterColour:d._filterStyle(e)?d._filterStyle:d._filterWidth(e)?d._filterWidth:d._filterVisibility(e)?d._filterVisibility:a.returns(!1),i[i.counter]=e,r={configurable:!1,enumerable:!0,get:t.bind(i,i.counter),set:n.bind(i,i.counter,o)},i.counter+=1,r},d._filterColour=function(e){return!(null!==e&&!s.COLOUR_REGEXP.test(e))},d._filterStyle=function(e){return e===s.STYLE.SOLID||e===s.STYLE.DASHED||e===s.STYLE.DOTTED},d._filterWidth=function(e){return e===s.WIDTH.NARROW||e===s.WIDTH.MEDIUM||e===s.WIDTH.THICK},d._filterVisibility=function(e){return"boolean"==typeof e},Object.seal(d)})),define("module/annotations/js/model/textannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/colour-customisation/js/constants","module/colour-customisation/js/model/layouts/defaults","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments),this.userText=r}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum"),r=e("module/core/js/util/class"),s=e("module/colour-customisation/js/constants"),a=e("module/colour-customisation/js/model/layouts/defaults"),l=e("module/core/js/util/object");r.extend(t,i),t.createDefault=function(e,i){return new t(e,o.TEXT,null,[new n],"")};var u=t.prototype;return u.userText="",u.copy=function(){return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy()],this.userText)},u.unmarshal=function(e){var n=t.superclass.unmarshal.call(this,e);this.userText=n.userText},u.applyGlobalStyles=function(e){var n;return e.default.background?t.superclass.applyGlobalStyles.call(this,e):(n=this.getDefaultStyle(),n.default.colour=e.default.colour,n.default.background.colour=e.default.colour,n.default.border.colour=e.default.colour,n.dark.colour=e.dark.colour,n.dark.background.colour=e.dark.colour,n.dark.border.colour=e.dark.colour,t.superclass.applyGlobalStyles.call(this,n))},u.marshal=function(){var e=t.superclass.marshal.call(this);return l.applyTo(e,{userText:this.userText}),e},u.getDefaultStyle=function(){return{default:{colour:i.DEFAULT_STYLE.colour,background:a.colour(i.DEFAULT_STYLE.colour),border:a.colouredStroke(i.DEFAULT_STYLE.colour,s.STYLE.SOLID,s.WIDTH.NARROW)},dark:{colour:i.DARK_DEFAULT_STYLE.colour,background:a.colour(i.DARK_DEFAULT_STYLE.colour),border:a.colouredStroke(i.DARK_DEFAULT_STYLE.colour,s.STYLE.SOLID,s.WIDTH.NARROW)}}},u._unmarshalStyles=function(e){var n=t.superclass._unmarshalStyles.call(this,e);if(e.styles){if(e.styles.background)return n;n.default.background.colour=e.styles.colour||i.DEFAULT_STYLE.colour,n.default.border.colour=e.styles.colour||i.DEFAULT_STYLE.colour,e["styles-dark"]&&e["styles-dark"].colour&&(n.dark.background.colour=e["styles-dark"].colour,n.dark.border.colour=e["styles-dark"].colour)}else n.default.background.colour=i._cssClassToColour[e.selectedStyle],n.default.border.colour=i._cssClassToColour[e.selectedStyle];return n},Object.seal(u),Object.seal(t)})),define("module/annotations/js/model/trendlineannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum");e("module/core/js/util/class").extend(t,i),t.createDefault=function(e,i){return new t(e,o.TREND_LINE,null,[new n,new n]).setResolution(i)};var r=t.prototype;return r.copy=function(){
return new t(this._subViewScalingMap,this._type,this._style,[this.anchors[0].copy(),this.anchors[1].copy()]).setResolution(this._resolution)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/model/triangleannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/annotations/js/model/threeanchorannotation"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotationtypeenum"),o=e("module/core/js/util/class"),r=e("module/annotations/js/model/threeanchorannotation");return o.extend(t,r),t.createDefault=function(e,o){return new t(e,i.TRIANGLE,null,[new n,new n,new n]).setResolution(o)},Object.seal(t.prototype),Object.seal(t)})),define("module/annotations/js/model/verticallineannotation",["require","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/annotations/js/model/anchor"),i=e("module/annotations/js/model/annotation"),o=e("module/annotations/js/model/annotationtypeenum"),r=e("module/core/js/util/class"),s=e("module/core/js/util/object");r.extend(t,i);var a=t.prototype;return t.createDefault=function(e,i){return new t(e,o.VERTICAL_LINE,null,[new n]).setResolution(i)},a.copy=function(){var e=this.anchors[0];return new t(this._subViewScalingMap,this._type,this._style,[new n(new Date(e.timestamp.getTime()),e.level)]).setResolution(this._resolution)},a.marshal=function(){var e=t.superclass.marshal.call(this),o=new n(new Date(this.anchors[0].timestamp.getTime()),0),r=new n(new Date(this.anchors[0].timestamp.getTime()),1),a=[o,r];return s.applyTo(e,i.getJsonFromAnchors(a,this._subViewScalingFactor),!1),e},Object.seal(a),Object.seal(t)})),define("module/annotations/js/factory/annotationfactory",["require","module/annotations/js/model/annotationtypeenum","module/annotations/js/model/arrowannotation","module/annotations/js/model/channelannotation","module/annotations/js/model/elliottwave12345annotation","module/annotations/js/model/elliottwaveabcannotation","module/annotations/js/model/fibonacciannotation","module/annotations/js/model/fibonacciextensionannotation","module/annotations/js/model/gannfanannotation","module/annotations/js/model/gannlineannotation","module/annotations/js/model/headandshouldersannotation","module/annotations/js/model/horizontallineannotation","module/annotations/js/model/ovalannotation","module/annotations/js/model/pitchforkannotation","module/annotations/js/model/pointtopointannotation","module/annotations/js/model/rectangleannotation","module/annotations/js/model/textannotation","module/annotations/js/model/trendlineannotation","module/annotations/js/model/triangleannotation","module/annotations/js/model/verticallineannotation"],(function(e){"use strict";function t(){}var n=e("module/annotations/js/model/annotationtypeenum"),i=e("module/annotations/js/model/arrowannotation"),o=e("module/annotations/js/model/channelannotation"),r=e("module/annotations/js/model/elliottwave12345annotation"),s=e("module/annotations/js/model/elliottwaveabcannotation"),a=e("module/annotations/js/model/fibonacciannotation"),l=e("module/annotations/js/model/fibonacciextensionannotation"),u=e("module/annotations/js/model/gannfanannotation"),c=e("module/annotations/js/model/gannlineannotation"),d=e("module/annotations/js/model/headandshouldersannotation"),h=e("module/annotations/js/model/horizontallineannotation"),p=e("module/annotations/js/model/ovalannotation"),m=e("module/annotations/js/model/pitchforkannotation"),f=e("module/annotations/js/model/pointtopointannotation"),_=e("module/annotations/js/model/rectangleannotation"),g=e("module/annotations/js/model/textannotation"),v=e("module/annotations/js/model/trendlineannotation"),y=e("module/annotations/js/model/triangleannotation"),M=e("module/annotations/js/model/verticallineannotation");return t._domainModelsMap={},t._domainModelsMap[n.ARROW]=i,t._domainModelsMap[n.CHANNEL]=o,t._domainModelsMap[n.ELLIOTT_WAVE]=r,t._domainModelsMap[n.ELLIOTT_WAVE_ABC]=s,t._domainModelsMap[n.FIBONACCI]=a,t._domainModelsMap[n.FIBONACCI_EXTENSION]=l,t._domainModelsMap[n.GANN_FAN]=u,t._domainModelsMap[n.GANN_LINE]=c,t._domainModelsMap[n.HEAD_AND_SHOULDERS]=d,t._domainModelsMap[n.HORIZONTAL_LINE]=h,t._domainModelsMap[n.OVAL]=p,t._domainModelsMap[n.PITCHFORK]=m,t._domainModelsMap[n.POINT_TO_POINT]=f,t._domainModelsMap[n.RECTANGLE]=_,t._domainModelsMap[n.TEXT]=g,t._domainModelsMap[n.TREND_LINE]=v,t._domainModelsMap[n.TRIANGLE]=y,t._domainModelsMap[n.VERTICAL_LINE]=M,Object.seal(t._domainModelsMap),t.createFromJson=function(e,n){var i,o=t._domainModelsMap[e.type];return o?(i=new o(n),i.unmarshal(e),i):null},t.createDefaultAnnotation=function(e,n,i){return t._domainModelsMap[e].createDefault(n,i)},Object.seal(t)})),define("module/annotations/js/model/annotationcollection",["require","module/annotations/js/model/annotation","module/annotations/js/factory/annotationfactory","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/core/js/event/subscribable","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,t){this._eventBus=e,this._settingsManager=t,this._annotations=[]}var n=e("module/annotations/js/model/annotation"),i=e("module/annotations/js/factory/annotationfactory"),o=e("module/core/js/util/array"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/event/subscribable"),l=e("module/core/js/tracker/enum/schema");r.extend(t,a),t.ANNOTATIONS_SET="ANNOTATIONS_SET",t.ANNOTATION_ADDED="ANNOTATION_ADDED";var u=t.prototype;return u._eventBus=null,u._annotations=null,u._settingsManager=null,u._subViewScalingMap=null,u.getAll=s.getter("_annotations"),u.setSubViewScalingMap=s.setter("_subViewScalingMap"),u.createDefaultAnnotation=function(e,t){return i.createDefaultAnnotation(e,this._subViewScalingMap,t)},u.initialiseCollection=function(e){this.replaceAnnotationsInPlace(e),this._annotations.forEach((function(e){this._eventBus.publish("statistics",["ANNOTATION_CURRENTLY_USED",{annotation:e.getType()}])}),this)},u.setAnnotations=function(e){this.replaceAnnotationsInPlace(e),this._save()},u.replaceAnnotationsInPlace=function(e){for(;this._annotations.length;)this._annotations.pop().un(null,this);e.forEach(this._addAnnotation,this),this.fire(t.ANNOTATIONS_SET,this._annotations)},u._addAnnotation=function(e){e.on(n.MODIFIED,this._handleAnnotationChanged.bind(this,e),this),this._annotations.push(e),this.fire(t.ANNOTATION_ADDED)},u._deleteAnnotation=function(e){e.un(null,this),o.remove(this._annotations,e)},u.addAnnotation=function(e){this._eventBus.publish("tracker/chart",[{schema:l.ANNOTATIONS_ACTION,elementId:"ANNOTATION_"+e.getType().toUpperCase(),elementGroup:"ANNOTATION",elementValue:e.getType().toUpperCase(),elementType:"LAYER",actionType:"CREATE",annotationAttributes:e.getTrackingAttributes(this._settingsManager.getThemeSettingsMode())}]),this._addAnnotation(e)},u.deleteAnnotation=function(e){this._eventBus.publish("tracker/chart",[{schema:l.ANNOTATIONS_ACTION,elementId:"ANNOTATION_"+e.getType().toUpperCase(),elementGroup:"ANNOTATION",elementValue:e.getType().toUpperCase(),elementType:"LAYER",actionType:"DELETE",annotationAttributes:e.getTrackingAttributes(this._settingsManager.getThemeSettingsMode())}]),this._deleteAnnotation(e),this._save()},u.deleteAllAnnotations=function(){this._annotations.slice().forEach(this._deleteAnnotation,this),this._save()},u.destroy=function(){this._annotations.forEach((function(e){e.un(null,this)}),this),this._annotations=[]},u._handleAnnotationChanged=function(e,t){t||this._eventBus.publish("tracker/chart",[{schema:l.ANNOTATIONS_ACTION,elementId:"ANNOTATION_"+e.getType().toUpperCase(),elementGroup:"ANNOTATION",elementValue:e.getType().toUpperCase(),elementType:"LAYER",actionType:"UPDATE",annotationAttributes:e.getTrackingAttributes(this._settingsManager.getThemeSettingsMode())}]),this._save()},u._save=function(){var e=[];this._annotations.forEach((function(t){var n=t.marshal();n&&e.push(n)}),this),this._settingsManager.putAnnotationSettings(e)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/model/layouts/annotationsmodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule");e("module/core/js/util/class").extend(t,n),t.SETTINGS_MODULE_NAME="userAnnotationModule";var i=t.prototype;return i.userAnnotations=Object.freeze([]),i.fromJSON=function(e){this.userAnnotations=e.userAnnotations},i.toJSON=function(){return{userAnnotations:this.userAnnotations}},i.isModified=function(){return!!this.userAnnotations.length},Object.seal(i),Object.seal(t)})),define("module/annotations/js/controller/annotationscontroller",["require","lodash","module/annotations/js/model/annotationcollection","module/annotations/js/factory/annotationfactory","module/annotations/js/model/layouts/annotationsmodule","module/core/js/util/functional","module/core/js/settings/settingsevents","module/core/js/model/userinfo"],(function(e){"use strict";function t(e,t,n){this._eventBus=e,this._subViewsConfigAggregator=t,this._settingsManager=n,this._collection=new i(e,n),this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfoChanged,this),this._settingsManager.on(a.EPIC_SETTINGS_LOADED,this._loadAnnotations,this),this._settingsManager.on(a.EPIC_SETTINGS_CHANGED,this._handleEpicSettingsChanged,this)}var n=e("lodash"),i=e("module/annotations/js/model/annotationcollection"),o=e("module/annotations/js/factory/annotationfactory"),r=e("module/annotations/js/model/layouts/annotationsmodule"),s=e("module/core/js/util/functional"),a=e("module/core/js/settings/settingsevents"),l=e("module/core/js/model/userinfo");t.create=function(e,n,i){return new t(e,n,i)};var u=t.prototype;return u._eventBus=null,u._collection=null,u._subViewScalingMap=null,u._subViewsConfigAggregator=null,u._settingsManager=null,u.getAnnotationCollection=s.getter("_collection"),u._handleInstrumentInfoChanged=function(e){this._subViewScalingMap=this._constructSubViewScalingMap(e),this._collection.destroy(),this._collection.setSubViewScalingMap(this._subViewScalingMap),this._loadAnnotations()},u._loadAnnotations=function(){var e;!l.getInstance().isAnonymous()&&this._settingsManager.hasEpicSettings()&&this._subViewScalingMap&&(e=this._parseAnnotationsModule(this._settingsManager.getEpicSpecificSettings(r.SETTINGS_MODULE_NAME)),this._collection.initialiseCollection(e))},u._handleEpicSettingsChanged=function(){var e;!l.getInstance().isAnonymous()&&this._subViewScalingMap&&(e=this._parseAnnotationsModule(this._settingsManager.getEpicSpecificSettings(r.SETTINGS_MODULE_NAME)),this._collection.replaceAnnotationsInPlace(e))},u._parseAnnotationsModule=function(e){return e&&e.userAnnotations.length?e.userAnnotations.map(this._createAnnotationFromJson,this).filter(n.identity):[]},u._createAnnotationFromJson=function(e){return o.createFromJson(e,this._subViewScalingMap)},u._constructSubViewScalingMap=function(e){var t={};return this._subViewsConfigAggregator.getNames().forEach((function(n){t[n]=this._subViewsConfigAggregator.getConfig(n).instrumentScaling?e.scalingFactor:1}),this),t},u.destroy=function(){this._collection.destroy(),this._settingsManager.un(null,this),this._eventBus.unsubscribeAll(this)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/annotationsevents",["require"],(function(e){"use strict";return Object.freeze({ANNOTATIONS_CHANGED:"ANNOTATIONS_CHANGED",LOCK_CHANGED:"LOCK_CHANGED"})})),define("module/annotations/js/enum/annotationsmenuenum",[],(function(){"use strict";return Object.freeze({MENU_CONTAINER_ID:"EDIT_ANNOTATIONS_MENU"})})),define("module/core/js/view/component/dialog/abstractdialogcontent",["require","lodash","module/core/js/util/class","module/core/js/event/subscribable"],(function(e){"use strict";function t(e,t,n,i){this._dialog=e,this._captureZoneManager=n,this._eventBus=t,this._taskManager=i}var n=e("lodash"),i=e("module/core/js/util/class"),o=e("module/core/js/event/subscribable");i.extend(t,o),t.create=function(e,n,i,o){return new t(e,n,i,o)};var r=t.prototype;return r.dContainer=null,r._captureZoneManager=null,r._dialog=null,r._eventBus=null,r._taskManager=null,r.initDom=function(e){return this.dContainer=e,this},r.updateCaptureZones=n.noop,r.show=function(){return this.dContainer.classed("hidden",!1),this},r.hide=function(){return this.dContainer.classed("hidden",!0),this},Object.seal(r),Object.seal(t)})),define("module/annotations/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{STYLE:"Stil",BACKGROUND:"Hintergrund",BORDER:"Umrandung",DISPLAY_DRAWINGS_TEXT:"Anzeigen",ARROW:"Pfeil",ELLIOTT_WAVE:"Elliott-Welle (12345)",ELLIOTT_WAVE_ABC:"Elliott-Welle (ABC)",FIBONACCI:"Fibonacci Retracement",FIBONACCI_EXTENSION:"Fibonacci Extension",GANN_FAN:"Gann Fan",GANN_LINE:"Gann Line",HEAD_AND_SHOULDERS:"Kopf-Schulter-Formation",HORIZONTAL_LINE:"Horizontal","HORIZONTAL_LINE-LEVEL":"Level",OVAL:"Ellipse",POINT_TO_POINT:"Punkt zu punkt",CHANNEL:"Kanal",RECTANGLE:"Rechteck",TEXT:"Text",TREND_LINE:"Trend",TRIANGLE:"Dreieck",PITCHFORK:"Pitchfork",VERTICAL_LINE:"Vertikal",DELETE_ANNOTATION:"Löschen",DELETE_ALL_ANNOTATIONS:"Eingezeichnete Symbole löschen",COPY_ANNOTATION:"Duplizieren",ANNOTATION_CUSTOMISE:"Bearbeiten",ADD_TITLE:"Text hinzufügen",EDIT_TITLE:"Text hinzufügen",MAX_CHARS:"Max. Zeichen:",CHARS_REMAINING:"Überbleibende Zeichen:","GANN-angle":"Winkel",MEASURE_TOOL:"Messwerkzeug",UNDO_DELETE_ALL_INFO:"Zeichnungen gelöscht.",UNDO_DELETE_ALL_ACTION:"Wiederherstellen.",LEVELS:"Levels"},en:{STYLE:"Style",BACKGROUND:"Background",BORDER:"Border",DISPLAY_DRAWINGS_TEXT:"Show",ARROW:"Arrow",ELLIOTT_WAVE:"Elliott wave (12345)",ELLIOTT_WAVE_ABC:"Elliott wave (ABC)",FIBONACCI:"Fibonacci retracement",FIBONACCI_EXTENSION:"Fibonacci extension",GANN_LINE:"Gann line",GANN_FAN:"Gann fan",HEAD_AND_SHOULDERS:"Head and shoulders",HORIZONTAL_LINE:"Horizontal","HORIZONTAL_LINE-LEVEL":"Level",OVAL:"Oval",POINT_TO_POINT:"Point to point",CHANNEL:"Channel",RECTANGLE:"Rectangle",TEXT:"Text",TREND_LINE:"Trend",TRIANGLE:"Triangle",PITCHFORK:"Pitchfork",VERTICAL_LINE:"Vertical",DELETE_ANNOTATION:"Delete",DELETE_ALL_ANNOTATIONS:"Delete all drawings",COPY_ANNOTATION:"Duplicate",ANNOTATION_CUSTOMISE:"Edit",ADD_TITLE:"Add Text",EDIT_TITLE:"Edit Text",MAX_CHARS:"Characters remaining:",CHARS_REMAINING:"Characters remaining:","GANN-angle":"Angle",MEASURE_TOOL:"Measure tool",UNDO_DELETE_ALL_INFO:"Drawings deleted.",UNDO_DELETE_ALL_ACTION:"Undo.",LEVELS:"Levels"},es:{STYLE:"Estilo",BACKGROUND:"Fondo",BORDER:"Borde",DISPLAY_DRAWINGS_TEXT:"Mostrar",ARROW:"Flecha",ELLIOTT_WAVE:"Onda de Elliott (12345)",ELLIOTT_WAVE_ABC:"Onda de Elliott (ABC)",FIBONACCI:"Retroceso de Fibonacci",FIBONACCI_EXTENSION:"Extensión de Fibonacci",GANN_LINE:"Línea Gann",GANN_FAN:"Gann Fan",HEAD_AND_SHOULDERS:"Cabeza y hombros",HORIZONTAL_LINE:"Horizontal","HORIZONTAL_LINE-LEVEL":"Nivel",OVAL:"Óvalo",POINT_TO_POINT:"Punto a punto",CHANNEL:"Canal",RECTANGLE:"Rectángulo",TEXT:"Texto",TREND_LINE:"Tendencia",TRIANGLE:"Triángulo",PITCHFORK:"Horquilla",VERTICAL_LINE:"Vertical",DELETE_ANNOTATION:"Eliminar",DELETE_ALL_ANNOTATIONS:"Borrar todo",COPY_ANNOTATION:"Duplicar",ANNOTATION_CUSTOMISE:"Editar",ADD_TITLE:"Añadir texto",EDIT_TITLE:"Editar texto",MAX_CHARS:"Máx caract:",CHARS_REMAINING:"Caracteres disponibles:","GANN-angle":"Ángulo",MEASURE_TOOL:"Herramienta de medida",UNDO_DELETE_ALL_INFO:"Dibujos borrados.",UNDO_DELETE_ALL_ACTION:"Deshacer.",LEVELS:"Niveles"},fr:{STYLE:"Style",BACKGROUND:"Arrière-plan",BORDER:"Bordure",DISPLAY_DRAWINGS_TEXT:"Afficher",ARROW:"Flèche",ELLIOTT_WAVE:"Vagues d'Elliott (1,2,3,4,5)",ELLIOTT_WAVE_ABC:"Vagues d'Elliott (A,B,C)",FIBONACCI:"Retracement de Fibonacci",FIBONACCI_EXTENSION:"Extension de Fibonacci",GANN_FAN:"Gann Fan",GANN_LINE:"Ligne de Gann",HEAD_AND_SHOULDERS:"Épaule-tête-épaule",HORIZONTAL_LINE:"Horizontal","HORIZONTAL_LINE-LEVEL":"Cours",OVAL:"Elipse",POINT_TO_POINT:"Point par point",CHANNEL:"Canal",RECTANGLE:"Rectangle",TEXT:"Texte",TREND_LINE:"Tendance",TRIANGLE:"Triangle",PITCHFORK:"Fourche",VERTICAL_LINE:"Vertical",DELETE_ANNOTATION:"Supprimer",DELETE_ALL_ANNOTATIONS:"Effacer tous les dessins",COPY_ANNOTATION:"Dupliquer",ANNOTATION_CUSTOMISE:"Éditer",ADD_TITLE:"Ajouter du texte",EDIT_TITLE:"Modifier le texte",MAX_CHARS:"Caract. Max :",CHARS_REMAINING:"Caractères restants :","GANN-angle":"Angle",MEASURE_TOOL:"Outil de mesure",UNDO_DELETE_ALL_INFO:"Dessins supprimés.",UNDO_DELETE_ALL_ACTION:"Annuler.",LEVELS:"Niveaux"},it:{STYLE:"Stile",BACKGROUND:"Sfondo",BORDER:"Bordo",DISPLAY_DRAWINGS_TEXT:"Mostra",ARROW:"Freccia",ELLIOTT_WAVE:"Onde di Elliot (1,2,3,4,5)",ELLIOTT_WAVE_ABC:"Onde di Elliot (A,B,C)",FIBONACCI:"Ritracciamenti di Fibonacci",FIBONACCI_EXTENSION:"Estensioni di Fibonacci",GANN_FAN:"Gann Fan",GANN_LINE:"Gann Line",HEAD_AND_SHOULDERS:"Testa e spalle",HORIZONTAL_LINE:"Orizzontale","HORIZONTAL_LINE-LEVEL":"Prezzo",OVAL:"Ellisse",POINT_TO_POINT:"Da punto a punto",CHANNEL:"Canale",RECTANGLE:"Rettangolo",TEXT:"Testo",TREND_LINE:"Trend",TRIANGLE:"Triangolo",PITCHFORK:"Pitchfork",VERTICAL_LINE:"Verticale",DELETE_ANNOTATION:"Elimina",DELETE_ALL_ANNOTATIONS:"Cancella tutto",COPY_ANNOTATION:"Duplica",ANNOTATION_CUSTOMISE:"Modifica",ADD_TITLE:"Aggiungi testo",EDIT_TITLE:"Modifica testo",MAX_CHARS:"Max carat.:",CHARS_REMAINING:"Caratteri rimanenti:","GANN-angle":"Angolo",MEASURE_TOOL:"Righello",UNDO_DELETE_ALL_INFO:"Cancellato tutto.",UNDO_DELETE_ALL_ACTION:"Annulla.",LEVELS:"Livelli"},ja:{STYLE:"チャート種類",BACKGROUND:"背景",BORDER:"枠線",DISPLAY_DRAWINGS_TEXT:"表示する",ARROW:"矢印",ELLIOTT_WAVE:"エリオット波動（1波、2波、3波、4波、5波）",ELLIOTT_WAVE_ABC:"エリオット波動（A波、B波、C波）",FIBONACCI:"フィボナッチ・リトレースメント",FIBONACCI_EXTENSION:"フィボナッチ・エクステンション",GANN_FAN:"ギャン・ファン",GANN_LINE:"ギャンライン",HEAD_AND_SHOULDERS:"ヘッド・アンド・ショルダー",HORIZONTAL_LINE:"水平線","HORIZONTAL_LINE-LEVEL":"レート",OVAL:"オーバル",POINT_TO_POINT:"ポイントライン",CHANNEL:"チャネル",RECTANGLE:"レクタングル",TEXT:"テキスト",TREND_LINE:"トレンドライン",TRIANGLE:"トライアングル",PITCHFORK:"ピッチフォーク",VERTICAL_LINE:"垂直線",DELETE_ANNOTATION:"削除",DELETE_ALL_ANNOTATIONS:"全ての描画を削除",COPY_ANNOTATION:"複製",ANNOTATION_CUSTOMISE:"編集",ADD_TITLE:"テキストを追加",EDIT_TITLE:"テキストを編集",MAX_CHARS:"最大文字数",CHARS_REMAINING:"残りの文字:","GANN-angle":"角度",MEASURE_TOOL:"計測ツール",UNDO_DELETE_ALL_INFO:"オブジェクトは削除されました",UNDO_DELETE_ALL_ACTION:"戻す",LEVELS:"レベル"},nl:{STYLE:"Stijl",BACKGROUND:"Achtergrond",BORDER:"Rand",DISPLAY_DRAWINGS_TEXT:"Tonen",ARROW:"Pijl",ELLIOTT_WAVE:"Elliott Wave (1,2,3,4,5)",ELLIOTT_WAVE_ABC:"Elliott Wave (A,B,C)",FIBONACCI:"Fibonacci Retracement",FIBONACCI_EXTENSION:"Fibonacci Extensie",GANN_FAN:"Gann Fan",GANN_LINE:"Gann Lijn",HEAD_AND_SHOULDERS:"Hoofd en schouders",HORIZONTAL_LINE:"Horizontaal","HORIZONTAL_LINE-LEVEL":"Niveau",OVAL:"Ovaal",POINT_TO_POINT:"Punt tot punt",CHANNEL:"Channel",RECTANGLE:"Rektangel",TEXT:"Tekst toevoegen",TREND_LINE:"Trend",TRIANGLE:"Driehoek",PITCHFORK:"Pitchfork",VERTICAL_LINE:"Verticaal",DELETE_ANNOTATION:"Verwijderen",DELETE_ALL_ANNOTATIONS:"Verwijder alle tekeningen",COPY_ANNOTATION:"Dupliceren",ANNOTATION_CUSTOMISE:"Aanpassen",ADD_TITLE:"Tekst toevoegen",EDIT_TITLE:"Tekst aanpassen",MAX_CHARS:"Max aantal karakters:",CHARS_REMAINING:"Karakters die nog open zijn:","GANN-angle":"Hoek",MEASURE_TOOL:"Metingstool",UNDO_DELETE_ALL_INFO:"Tekeningen zijn verwijderd.",UNDO_DELETE_ALL_ACTION:"Ongedaan maken.",LEVELS:"Niveaus"},no:{STYLE:"Stil",BACKGROUND:"Bakgrunn",BORDER:"Ramme",DISPLAY_DRAWINGS_TEXT:"Vis",ARROW:"Pil",ELLIOTT_WAVE:"Elliott Wave (12345)",ELLIOTT_WAVE_ABC:"Elliott Wave (ABC)",FIBONACCI:"Fibonacci Retracement",FIBONACCI_EXTENSION:"Fibonacci Extension",GANN_FAN:"Gann Fan",GANN_LINE:"Gann Line",HEAD_AND_SHOULDERS:"Hode og skuldre",HORIZONTAL_LINE:"Horisontal","HORIZONTAL_LINE-LEVEL":"Nivå",OVAL:"Oval",POINT_TO_POINT:"Punkt til punkt",CHANNEL:"Kanal",RECTANGLE:"Rectangle",TEXT:"Tekst",TREND_LINE:"Trend",TRIANGLE:"Triangle",PITCHFORK:"Pitchfork",VERTICAL_LINE:"Vertikal",DELETE_ANNOTATION:"Slett",DELETE_ALL_ANNOTATIONS:"Slett alle merknader",COPY_ANNOTATION:"Dupliser",ANNOTATION_CUSTOMISE:"Rediger",ADD_TITLE:"Legg til tekst",EDIT_TITLE:"Rediger tekst",MAX_CHARS:"Characters remaining:",CHARS_REMAINING:"Gjenstående tegn:","GANN-angle":"Vinkel",MEASURE_TOOL:"Måleverktøy",UNDO_DELETE_ALL_INFO:"Merknader har blitt slettet.",UNDO_DELETE_ALL_ACTION:"Angre.",LEVELS:"Nivåer"},pt:{STYLE:"Estilo",BACKGROUND:"Fundo",BORDER:"Linha/Borda",DISPLAY_DRAWINGS_TEXT:"Mostrar",ARROW:"Seta",ELLIOTT_WAVE:"Ondas de Elliott (1,2,3,4,5)",ELLIOTT_WAVE_ABC:"Ondas de Elliott (A,B,C)",FIBONACCI:"Retrocesso de Fibonacci",FIBONACCI_EXTENSION:"Extensão de Fibonacci",GANN_FAN:"Gann Fan",GANN_LINE:"Linha Gann",HEAD_AND_SHOULDERS:"Ombro-cabeça-ombro",HORIZONTAL_LINE:"Horizontal","HORIZONTAL_LINE-LEVEL":"Preço",OVAL:"Oval",POINT_TO_POINT:"Ponto a ponto",CHANNEL:"Canal",RECTANGLE:"Rectângulo",TEXT:"Text",TREND_LINE:"Tendência",TRIANGLE:"Triângulo",PITCHFORK:"Forquilha",VERTICAL_LINE:"Vertical",DELETE_ANNOTATION:"Apagar",DELETE_ALL_ANNOTATIONS:"Apagar tudo",COPY_ANNOTATION:"Duplicar",ANNOTATION_CUSTOMISE:"Editar",ADD_TITLE:"Adicionar texto",EDIT_TITLE:"Editar Texto",MAX_CHARS:"Max no Graf:",CHARS_REMAINING:"Caracteres Remanescentes:","GANN-angle":"Ângulo",MEASURE_TOOL:"Ferramenta de medida",UNDO_DELETE_ALL_INFO:"Figuras apagadas.",UNDO_DELETE_ALL_ACTION:"Desfazer.",LEVELS:"Níveis"},sv:{STYLE:"Stil",BACKGROUND:"Bakgrund",BORDER:"Kantlinje",DISPLAY_DRAWINGS_TEXT:"Visa",ARROW:"Pil",ELLIOTT_WAVE:"Elliott Wave (12345)",ELLIOTT_WAVE_ABC:"Elliott Wave (ABC)",FIBONACCI:"Fibonacci Retracement",FIBONACCI_EXTENSION:"Fibonacci Extension",GANN_FAN:"Gann Fan",GANN_LINE:"Gannlinje",HEAD_AND_SHOULDERS:"Huvudskuldra",HORIZONTAL_LINE:"Horisontell","HORIZONTAL_LINE-LEVEL":"Nivå",OVAL:"Oval",POINT_TO_POINT:"Punkt-till-punkt",CHANNEL:"Kanal",RECTANGLE:"Rektangel",TEXT:"Text",TREND_LINE:"Trendlinje",TRIANGLE:"Triangel",PITCHFORK:"Pitchfork",VERTICAL_LINE:"Vertikal Linje",DELETE_ANNOTATION:"Radera",DELETE_ALL_ANNOTATIONS:"Radera alla ritobjekt",COPY_ANNOTATION:"Duplicera",ANNOTATION_CUSTOMISE:"Redigera",ADD_TITLE:"Lägg till text",EDIT_TITLE:"Redigera text",MAX_CHARS:"Max antal tecken:",CHARS_REMAINING:"Tecken som återstår:","GANN-angle":"Vinkel",MEASURE_TOOL:"Mätverktyg",UNDO_DELETE_ALL_INFO:"Ritobjekten har raderats.",UNDO_DELETE_ALL_ACTION:"Ångra.",LEVELS:"Nivåer"},zh:{STYLE:"风格",BACKGROUND:"背景",BORDER:"边框",DISPLAY_DRAWINGS_TEXT:"显示",ARROW:"箭头",ELLIOTT_WAVE:"艾略特波浪(1,2,3,4,5)",ELLIOTT_WAVE_ABC:"艾略特波浪(A,B,C)",FIBONACCI:"斐波纳契回撤线",FIBONACCI_EXTENSION:"斐波纳契扩展线",GANN_FAN:"江恩扇形线",GANN_LINE:"江恩角度线",HEAD_AND_SHOULDERS:"头肩型",HORIZONTAL_LINE:"水平线","HORIZONTAL_LINE-LEVEL":"价位",OVAL:"椭圆形",POINT_TO_POINT:"点对点线",CHANNEL:"通道",RECTANGLE:"矩形",TEXT:"文字",TREND_LINE:"趋势",TRIANGLE:"三角形",PITCHFORK:"叉子",VERTICAL_LINE:"垂直线",DELETE_ANNOTATION:"删除",DELETE_ALL_ANNOTATIONS:"删除所有绘图",COPY_ANNOTATION:"复制",ANNOTATION_CUSTOMISE:"编辑",ADD_TITLE:"添加文字",EDIT_TITLE:"编辑文字",MAX_CHARS:"余下字符:",CHARS_REMAINING:"余下字符:","GANN-angle":"角度",MEASURE_TOOL:"测量工具",UNDO_DELETE_ALL_INFO:"绘图已删除。",UNDO_DELETE_ALL_ACTION:"撤销",LEVELS:"水平"},zh_TW:{STYLE:"風格",BACKGROUND:"背景",BORDER:"邊框",DISPLAY_DRAWINGS_TEXT:"顯示",ARROW:"箭头",ELLIOTT_WAVE:"艾略特波浪(1,2,3,4,5)",ELLIOTT_WAVE_ABC:"艾略特波浪(A,B,C)",FIBONACCI:"斐波納契回撤線",FIBONACCI_EXTENSION:"斐波納契擴展線",GANN_FAN:"江恩扇形线",GANN_LINE:"江恩角度线",HEAD_AND_SHOULDERS:"頭肩型",HORIZONTAL_LINE:"水平线","HORIZONTAL_LINE-LEVEL":"价位",OVAL:"橢圓形",POINT_TO_POINT:"点对点线",CHANNEL:"通道",RECTANGLE:"矩形",TEXT:"文字",TREND_LINE:"趋势",TRIANGLE:"三角形",PITCHFORK:"叉子",VERTICAL_LINE:"垂直线",DELETE_ANNOTATION:"删除",DELETE_ALL_ANNOTATIONS:"刪除所有繪圖",COPY_ANNOTATION:"複製",ANNOTATION_CUSTOMISE:"編輯",ADD_TITLE:"添加文字",EDIT_TITLE:"编辑文字",MAX_CHARS:"余下字符:",CHARS_REMAINING:"余下字符:","GANN-angle":"角度",MEASURE_TOOL:"測量工具",UNDO_DELETE_ALL_INFO:"繪圖已刪除。",UNDO_DELETE_ALL_ACTION:"撤銷",LEVELS:"水平"}})})),define("module/core/js/view/userinput/eventpropagation",[],(function(){"use strict";return{BLOCK_ALL:"blockAll",PROPAGATE_UNHANDLED:"propagateUnhandled",PROPAGATE_ALL:"propagateAll"}})),define("module/core/js/view/userinput/abstractgesturerecogniser",["require","lodash","module/core/js/util/class","module/core/js/event/subscribable"],(function(e){"use strict";function t(e){e=e||{},this.withHandler(e.onGesture,e.context),this.withStartHandler(e.onStart,e.startContext),this.withEndHandler(e.onEnd,e.endContext)}var n=e("lodash"),i=e("module/core/js/util/class"),o=e("module/core/js/event/subscribable");i.extend(t,o),t.GESTURE_TIMEOUT=300,t.GESTURE_PRECISION=20,t._handlerMap=Object.freeze({pointerenter:"_handlePointerEnter",pointerdown:"_handlePointerDown",pointermove:"_handlePointerMove",pointerup:"_handlePointerUp",pointerleave:"_handlePointerLeave",contextmenu:"_handleContextMenu",wheel:"_handleMouseWheel"}),t.HANDLED="gestureHandled";var r=t.prototype;return r._inProgress=!1,r._isRecognised=!1,r._handler=n.noop,r._handlerContext=null,r._startHandler=n.noop,r._startHandlerContext=null,r._endHandler=n.noop,r._endHandlerContext=null,r.withHandler=function(e,t){return this._handler=e||n.noop,this._handlerContext=t||null,this},r.withStartHandler=function(e,t){return this._startHandler=e||n.noop,this._startHandlerContext=t||null,this},r.withEndHandler=function(e,t){return this._endHandler=e||n.noop,this._endHandlerContext=t||null,this},r.clearHandlers=function(){delete this._handler,delete this._startHandler,delete this._endHandler,delete this._handlerContext,delete this._startHandlerContext,delete this._endHandlerContext},r.process=function(e,n,i){return!!this[t._handlerMap[i.type]](e,n,i)},r.reset=function(){this._endGesture(),this._inProgress=!1},r.destroy=function(){this.reset(),this.clearHandlers(),t.superclass.destroy.call(this)},n.each(t._handlerMap,(function(e){r[e]=n.noop})),r._callHandler=function(){this.fire(t.HANDLED),this._handler.call(this._handlerContext,this)},r._startGesture=function(){this._isRecognised||(this._isRecognised=!0,this._startHandler.call(this._startHandlerContext,this))},r._endGesture=function(){this._isRecognised&&(this._isRecognised=!1,this._endHandler.call(this._endHandlerContext,this))},r._startProcessing=function(){this._inProgress||(this._inProgress=!0)},r._endProcessing=function(){this._inProgress&&this.reset()},r.resetHover=n.noop,Object.seal(r),Object.seal(t)})),define("module/core/js/view/userinput/deprecatedgesturerecogniser",["require","lodash","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/util/class","module/core/js/event/subscribable"],(function(e){"use strict";function t(e){e=e||{},this._startHandler=e.onStart||null,this._endHandler=e.onEnd||null,this._handler=e.onGesture||null}var n=e("lodash"),i=e("module/core/js/view/userinput/abstractgesturerecogniser"),o=e("module/core/js/util/class"),r=e("module/core/js/event/subscribable");o.extend(t,r),t.GESTURE_TIMEOUT=300,t.GESTURE_PRECISION=20,t.isRightClick=function(e){return"mouse"===e.pointerType&&(2===e.button||!!e.ctrlKey)};var s=t.prototype;return s._inProgress=!1,s._isRecognised=!1,s._handler=n.noop,s._handlerContext=null,s._startHandler=null,s._startHandlerContext=null,s._endHandler=n.noop,s._endHandlerContext=null,s._lockHandler=n.noop,s._lockHandlerContext=null,s.type=null,s._handlePointerDown=n.noop,s._handlePointerUp=n.noop,s._handlePointerMove=n.noop,s._handlePointerEnter=n.noop,s._handlePointerLeave=n.noop,s._filterEvent=function(e){return!t.isRightClick(e)},s._startGesture=function(){this._inProgress=!0,this._startHandler&&this._startHandler.call(this._startHandlerContext,this)},s._endGesture=function(){this._inProgress=!1,this._endHandler&&this._endHandler.call(this._endHandlerContext,this)},s._callHandler=function(){this.fire(i.HANDLED),this._handler.call(this._handlerContext,this)},s.withHandler=function(e,t){return this._handler=e||s._handler,this._handlerContext=t,this},s.withStartHandler=function(e,t){return this._startHandler=e||s._startHandler,this._startHandlerContext=t,this},s.withLockHandler=function(e,t){return this._lockHandler=e||s._lockHandler,this._lockHandlerContext=t,this},s.withEndHandler=function(e,t){return this._endHandler=e||s._endHandler,this._endHandlerContext=t,this},s.clearHandlers=function(){this.withHandler().withLockHandler().withStartHandler().withEndHandler()},s.process=function(e,t,n){if(!this._filterEvent(n))return!1;switch(n.type){case"pointerenter":this._handlePointerEnter(e,t,n);break;case"pointerdown":this._handlePointerDown(e,t,n);break;case"pointerleave":this._handlePointerLeave(e,t,n);break;case"pointerup":this._handlePointerUp(e,t,n);break;case"pointermove":this._handlePointerMove(e,t,n);break;case"wheel":this._handleMouseWheel(e,t,n);break;case"contextmenu":this._handleContextMenu(e,t,n)}return this._isRecognised},s.reset=n.noop,s._handleMouseWheel=function(){this._isRecognised=!1},s._handleContextMenu=n.noop,s.resetHover=n.noop,Object.seal(s),Object.seal(t)})),define("module/core/js/enum/pointersenum",[],(function(){"use strict";var e={};return e.MOUSE="mouse",e.TOUCH="touch",Object.freeze(e)})),define("module/core/js/view/userinput/hovergesturerecogniser",["require","module/core/js/view/userinput/deprecatedgesturerecogniser","module/core/js/util/class","module/core/js/enum/pointersenum"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/core/js/view/userinput/deprecatedgesturerecogniser"),i=e("module/core/js/util/class"),o=e("module/core/js/enum/pointersenum");i.extend(t,n),t.create=function(e){return new t(e)};var r=t.prototype;return r.type="hover",r._handlePointerDown=function(){this._isRecognised=!1},r._handlePointerMove=function(e,t,n){n.pointerType===o.MOUSE&&(this.x=e.x,this.y=e.y,this._inProgress||(this._isRecognised=!0,this._startGesture()),this._handler&&this._callHandler())},r._callHandler=function(){this._handler.call(this._handlerContext,this)},r._handlePointerLeave=function(){this.resetHover()},r.resetHover=function(){this._inProgress&&(this._isRecognised=!1,this._endGesture())},r.destroy=function(){this.resetHover(),t.superclass.destroy.call(this)},Object.seal(r),Object.seal(t)})),define("module/core/js/view/userinput/tapgesturerecogniser",["require","module/core/js/view/userinput/deprecatedgesturerecogniser","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object","module/core/js/enum/pointersenum"],(function(e){"use strict";function t(e,t,i){void 0!==e&&(this._tapExpectedCount=e),void 0!==t&&(this._fastTap=t),void 0!==i&&(this._handleDown=i),this._countLeft=this._tapExpectedCount,this._timeout=o.debounce(this._timeout,n.GESTURE_TIMEOUT)}var n=e("module/core/js/view/userinput/deprecatedgesturerecogniser"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/object"),s=e("module/core/js/enum/pointersenum"),a=n.GESTURE_PRECISION*n.GESTURE_PRECISION;i.extend(t,n),t.create=function(e,n,i){return new t(e,n,i)};var l=t.prototype;return l.type="tap",l.x=null,l.y=null,l._countLeft=null,l._handleDown=!1,l._fastTap=!0,l._tapExpectedCount=1,l.destroy=function(){this._timeout.abort()},l._endGesture=function(){this._timeout.abort(),t.superclass._endGesture.call(this)},l._timeout=function(){var e=0===this._countLeft&&!this._fastTap;e&&(this._isRecognised=!0),this._endGesture(),e&&this._callHandler()},l._handlePointerDown=function(e,t,n){this._isRecognised=this._handleDown,this._countLeft%1!=0&&(this._countLeft=this._tapExpectedCount),1!==r.count(t)?this._inProgress&&this._endGesture():this._inProgress?(this._countLeft-=.5,this._timeout(),this._limitPointerMovement(e)):(this._startGesture(),
this.x=e.x,this.y=e.y,this._countLeft=this._tapExpectedCount-.5,this._timeout())},l._handlePointerMove=function(e,t,n){if(0===this._countLeft&&this._isRecognised)return this._isRecognised=!1,void this._endGesture();(n.pointerType!==s.MOUSE||this._countLeft%1)&&this._limitPointerMovement(e)},l._limitPointerMovement=function(e){var t=this.x-e.x,n=this.y-e.y;t*t+n*n>a&&this._endGesture()},l._handlePointerUp=function(e,t,n){var i;this._inProgress&&(this._countLeft-=.5,i=0===this._countLeft&&this._fastTap,i?(this._isRecognised=!0,this._endGesture(),this._callHandler()):this._timeout())},Object.seal(l),Object.seal(t)})),define("module/core/js/enum/zindexenum",[],(function(){"use strict";var e={};return e.MAX=999,e.COLOUR_PICKER_DIALOG_CONTROLS=900,e.COLOUR_PICKER_DIALOG_BODY=897,e.COLOUR_PICKER_DIALOG_DISMISSAL_ZONE=895,e.DIALOG_CONTROLS=890,e.DIALOG=800,e.MENU_TOOLS_BUTTON=703,e.MENU_ARROWS=794,e.MENU_SCROLL=793,e.MENU_STICKY_SCROLLABLE=792,e.MENU_STICKY_FIXED=791,e.MENU=790,e.MENU_BLOCK_INTERACTIONS=789,e.OVERVIEW_HANDLE=782,e.SCROLL_THUMB=781,e.OVERVIEW_CLOSE_ICON=780,e.SCROLL_TRACK=779,e.ALERT_BOX=700,e.DEAL_CONFIRMATION_BOX=682,e.DEAL_TICKET_CONTROLS=681,e.DEAL_TICKET_BODY=680,e.CLOSE_TOOLTIP_BUTTON=670,e.TOOLTIP_CLOSE_ICON=657,e.TOOLTIP_BODY=656,e.UNDO_DELETE_ALL_ACTION=655,e.CALENDAR_DETAILS_PAGINATION=654,e.CALENDAR_DETAILS_DETAILS=653,e.CALENDAR_SELECTION=652,e.CALENDAR_SELECTION_BLOCKING_ZONE=651,e.TOOLTIP_ENABLED_SELECTION_LAYER=650,e.DRAWING_TOOLBOX_BUTTON=650,e.DEAL_TICKET_DISMISSAL=649,e.INTERACTIVE_DRAWING=649,e.MEASURE_TOOL_WAITING=649,e.DRAWING_TOOLBOX_HOVER=646,e.INDICATOR_LABELS_CLOSE=630,e.INDICATOR_LABELS_SETTINGS=620,e.CALENDAR_DETAILS_DISMISS=612,e.RESIZABLE_STUDYVIEW_EDGE_ON_RESIZE_MODE=501,e.STOP_OR_LIMIT_TEXT_BUBBLE=502,e.POSITION_SELECT_BADGE_ON_POSITION_SELECTED=501,e.POSITION_CLOSE_BUTTONS=502,e.POSITION_SELECTED_LAYER=500,e.COMMON_BUTTON=140,e.NADEX_OVERLAY_POSITIONS=117,e.NADEX_POSITIONS=110,e.NADEX_LADDERS=100,e.POSITION_PRICE_LINE=72,e.POSITION_SELECTED_STOP_LIMIT_LINE=73,e.POSITION_SELECT_BADGE=90,e.MEASURE_TOOL_DISMISS=84,e.MEASURE_TOOL_RECTANGLE_ANCHORS=83,e.MEASURE_TOOL_RECTANGLE_MOVING=82,e.RECTANGLE_ANCHORS=81,e.RECTANGLE_MOVING=80,e.ANNOTATION_ANCHORS=77,e.ANNOTATION_MOVING=76,e.ANNOTATION_EDIT_MODE_TEXT_SELECTION=75,e.ANNOTATION_EDIT_MODE_SELECTION=74,e.ANNOTATION_EDIT_MODE_ACTIVE=73,e.ANNOTATION_TEXT_SELECTION=71,e.ANNOTATION_SELECTION=70,e.SHARED_DISMISSAL_CAPTURE_ZONE=59,e.TOOLTIP_SELECTION_LAYER=50,e.Y_AXIS=10,e.BLOCK_CHART_PAN=1,e.BASE=0,Object.freeze(e)})),define("module/core/js/view/component/button",["require","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/event/subscribable","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/view/userinput/eventpropagation"),o=e("module/core/js/util/functional"),r=e("module/core/js/view/userinput/hovergesturerecogniser"),s=e("module/core/js/event/subscribable"),a=e("module/core/js/view/userinput/tapgesturerecogniser"),l=e("module/core/js/enum/zindexenum");n.extend(t,s),t.create=function(){return new t},t.HOVER_ENTER="HOVER_ENTER",t.HOVER_EXIT="HOVER_EXIT";var u=t.prototype;return u._captureZone=null,u._id=null,u._dContainer=null,u._dButton=null,u._enabled=!0,u._coordinates=null,u._selected=!1,u._tapRecogniser=null,u.initDom=function(e,t){var n=t||"buttonContainer";return this._dContainer=e.append("div").attr("class",n),this._dButton=this._dContainer.append("div").attr("class","button"),this},u.startListening=function(e,n,o){return this._tapRecogniser=a.create().withHandler(this._clickHandler.bind(this,n)),this._captureZoneManager=e,this._captureZone=e.create(i.BLOCK_ALL,o||l.COMMON_BUTTON).addGestureRecogniser(this._tapRecogniser),this._dContainer.classed("hidden")&&this._captureZone.hide(),this._hoverGestureRecogniser=r.create().withStartHandler(this.fire.bind(this,t.HOVER_ENTER),this).withEndHandler(this.fire.bind(this,t.HOVER_EXIT),this),this._captureZone.addGestureRecogniser(this._hoverGestureRecogniser),this.updateCaptureZone(),this},u.setCoordinates=o.setter("_coordinates"),u._clickHandler=function(e){this._enabled&&e(this._id)},u.stopListening=function(){return this._captureZone&&this._captureZone.destroy(),this._tapRecogniser&&this._tapRecogniser.destroy(),this._hoverGestureRecogniser&&this._hoverGestureRecogniser.destroy(),this._captureZone=this._tapRecogniser=this._captureZoneManager=null,this},u.setSelected=function(e){return this._dContainer.classed("selected",e),this._selected=e,this},u.isSelected=o.getter("_selected"),u.setText=function(e){return this._dButton.text(e),this._dContainer.attr("data-button-id",e||""),this},u.setId=function(e){return this._dContainer.attr("data-button-id",e||""),this._id=e,this},u.setTitle=function(e){return this._dContainer.attr("title",e),this},u.setHidden=function(e){return this._dContainer.classed("hidden",e),this._captureZone&&(e?this.disable():this.enable()),this},u.disable=function(){return this._captureZone.hide(),this._dContainer.classed("disabled",!0),this},u.enable=function(){return this._captureZone.show(),this._dContainer.classed("disabled",!1),this},u.updateCaptureZone=function(e){this._coordinates?this._captureZone.setDimensions(this._coordinates):this._captureZone.setDimensionsBasedOnElement(e||this._dContainer)},u.setEnabled=o.setter("_enabled"),u.getId=o.getter("_id"),u.classed=function(e,t){return this._dContainer.classed(e,t),this},u.getRect=function(){return this._coordinates?{top:this._coordinates.y,left:this._coordinates.x,width:this._coordinates.width,height:this._coordinates.height}:this._dContainer.node().getBoundingClientRect()},u.destroy=function(){this.stopListening(),this._dContainer&&(this._dContainer.remove(),this._dContainer=null)},Object.seal(u),Object.seal(t)})),define("module/core/js/view/component/checkbox",["require","module/core/js/view/component/button","module/core/js/util/class"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/component/button");e("module/core/js/util/class").extend(t,n),t.create=function(){return new t};var i=t.prototype;return i._clickHandler=function(e){this._enabled&&!1!==e()&&this.setSelected(!this._selected)},Object.seal(i),Object.seal(t)})),define("text!module/core/svg/icon-close.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#6C6C79"\n          d="M6.7 5L10 1.7 8.3 0 5 3.3 1.7 0 0 1.7 3.3 5 0 8.3 1.7 10 5 6.7 8.3 10 10 8.3z"/>\n</svg>'})),define("module/core/js/util/dom",["require","module/core/js/model/deviceinfo"],(function(e){"use strict";var t=e("module/core/js/model/deviceinfo"),n={};return n.getRootContainer=function(e){for(;"main-container"!==e.attr("data-container");){if(e.node()==document.body)throw new Error("Did not retrieve the main container");e=e.parent()}return e},n.updateCursorPosition=function(e,t,i){var o=n.getRootContainer(e),r=o.node().getBoundingClientRect(),s=t>=0&&t<=r.width&&i>=0&&i<=r.height,a=n.getRootContainer(e).select("div.customCursor");s?(a.style("visibility","visible"),a.style("left",t+"px").style("top",i+"px")):a.style("visibility","hidden")},n.selectWithinChart=function(e,t){return n.getRootContainer(t).select(e)},n.forceToRedrawIOS=function(e){var i=t.getMobileDeviceFamily();"iPhone"!==i&&"iPad"!==i||n._forceToRedraw(e)},n._forceToRedraw=function(e){var t,n,i=e;"string"==typeof e?i=document.querySelector(i):"function"==typeof e.node&&(i=e.node()),t=i.nextSibling,(n=i.parentNode)&&(i=n.removeChild(i),i.offsetHeight,n.offsetHeight,t?n.insertBefore(i,t):n.appendChild(i))},Object.seal(n)})),define("module/core/js/util/css",["require","module/core/js/util/dom"],(function(e){"use strict";function t(e,t,n){return[e?Math.round(e)+"px":"0px",t?Math.round(t)+"px":"0px",n?Math.round(n)+"px":"0px"].join(",")}function n(e,t){return"-ms-"+e+":"+t+";-moz-"+e+":"+t+";-webkit-"+e+":"+t+";"+e+":"+t+";"}function i(e,i){return n("transform",i?"translate3d("+t(e)+")":"translateX("+Math.round(e)+"px)")}function o(e,i){return n("transform",i?"translate3d("+t(0,e)+")":"translateY("+Math.round(e)+"px)")}function r(e,i,o){return n("transform",o?"translate3d("+t(e,i)+")":"translate("+Math.round(e)+"px,"+Math.round(i)+"px)")}var s=e("module/core/js/util/dom"),a={};return a.cssTranslateAttrX=i,a.cssTranslateAttrY=o,a.cssTranslateAttrXY=r,a.chartWideClassed=function(e,t,n){var i=s.getRootContainer(e);return void 0!==n?i.classed(t,n):i.classed(t)},a.setChartCursor=function(e,t){var n,i;for(n in a.CURSOR_TYPE)i=a.CURSOR_TYPE[n],a.chartWideClassed(e,i,t===i&&t!==a.CURSOR_TYPE.DEFAULT)},a.CURSOR_TYPE=Object.freeze({CROSSHAIR:"cursorCrosshair",DEFAULT:"default",GRAB:"cursorGrab",GRABBING:"cursorGrabbing",POINTER:"cursorPointer",NS_RESIZE:"cursorNSResize",EW_RESIZE:"cursorEWResize",TEXT:"cursorText",HEAD_AND_SHOULDERS_CROSSHAIR:"cursorHeadAndShouldersCrosshair",HORIZONTAL_LINE_CROSSHAIR:"cursorHorizontalLineCrosshair",VERTICAL_LINE_CROSSHAIR:"cursorVerticalLineCrosshair",ARROW_CROSSHAIR:"cursorArrowCrosshair",CHANNEL_CROSSHAIR:"cursorChannelCrosshair",FIBONACCI_CROSSHAIR:"cursorFibonacciCrosshair",FIBONACCI_EXTENSION_CROSSHAIR:"cursorFibonacciExtensionCrosshair",GANN_FAN_CROSSHAIR:"cursorGannFanCrosshair",GANN_LINE_CROSSHAIR:"cursorGannLineCrosshair",RECTANGLE_CROSSHAIR:"cursorRectangleCrosshair",TRIANGLE_CROSSHAIR:"cursorTriangleCrosshair",OVAL_CROSSHAIR:"cursorOvalCrosshair",POINT_TO_POINT_CROSSHAIR:"cursorPointToPointCrosshair",TREND_CROSSHAIR:"cursorTrendCrosshair",MEASURE_TOOL_CROSSHAIR:"cursorMeasureToolCrosshair",PITCHFORK_CROSSHAIR:"cursorPitchforkCrosshair",ELLIOTT_WAVE_CROSSHAIR:"cursorElliottWave12345Crosshair",ELLIOTT_WAVE_ABC_CROSSHAIR:"cursorElliottWaveABCCrosshair"}),Object.seal(a)})),define("module/core/js/view/component/closeicon",["require","text!module/core/svg/icon-close.svg","module/core/js/util/css","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/hovergesturerecogniser"],(function(e){"use strict";function t(e){return"http://www.w3.org/2000/svg"===e.node().namespaceURI}function n(e,i,o,s){this._dCloseIcon=this._createElement(e),this._captureZone=i.createTapZone(s,o,null,r.BLOCK_ALL).withAssociatedElement(this._dCloseIcon).withDefaultPadding(),t(e)&&(this._setSize(n.DEFAULT_CLOSE_ICON_SIZE),this._addHoverGestureRecogniser(e)),this.updateCaptureZone()}var i=e("text!module/core/svg/icon-close.svg"),o=e("module/core/js/util/css"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/userinput/hovergesturerecogniser");n.DEFAULT_CLOSE_ICON_SIZE=8,n.create=function(e,t,i,o){return new n(e,t,i,o)};var l=n.prototype;return l._dCloseIcon=null,l._captureZone=null,l._hoverGestureRecogniser=null,l.enable=s.delegate("_captureZone","show"),l.disable=s.delegate("_captureZone","hide"),l.updateCaptureZone=s.delegate("_captureZone","setDimensionsBasedOnAssociatedElement"),l.show=function(){return t(this._dCloseIcon)?this._dCloseIcon.attr("visibility","visible"):(this._dCloseIcon.classed("hidden",!1),this.enable()),this._captureZone.show(),this},l.hide=function(){return t(this._dCloseIcon)?this._dCloseIcon.attr("visibility","hidden"):(this._dCloseIcon.classed("hidden",!0),this.disable()),this._captureZone.hide(),this},l.setPosition=function(e,n){return t(this._dCloseIcon)&&(this._dCloseIcon.attr({x:e,y:n}),this.updateCaptureZone()),this},l.enforceHover=function(e){this._hoverGestureRecogniser||this._addHoverGestureRecogniser(e)},l.destroy=function(){this._hoverGestureRecogniser&&this._hoverGestureRecogniser.destroy(),this._captureZone.destroy(),this._dCloseIcon.remove()},l._createElement=function(e){return t(e)?e.svgFromString(i).classed("closeIcon",!0):e.append("span").attr("class","closeIcon")},l._setSize=function(e){this._dCloseIcon.attr({width:e,height:e})},l._addHoverGestureRecogniser=function(e){return this._hoverGestureRecogniser=a.create(),this._hoverGestureRecogniser.withStartHandler(this._dCloseIcon.classed.bind(this._dCloseIcon,"hover",!0),this._dCloseIcon).withEndHandler(this._dCloseIcon.classed.bind(this._dCloseIcon,"hover",!1),this._dCloseIcon),this._captureZone.addGestureRecogniser(this._hoverGestureRecogniser),this._captureZone.withCursorOnHover(o.CURSOR_TYPE.POINTER,e),this},Object.seal(l),Object.seal(n)})),define("module/core/js/enum/hotkeyenum",[],(function(){"use strict";var e={};return e.DELETE=46,e.BACKSPACE=8,e.D=68,e.E=69,e.O=79,e.P=80,e.T=84,e.ESCAPE=27,e.ENTER=13,e.SPACE=32,e.UP=38,e.RIGHT=39,e.DOWN=40,e.LEFT=37,e.keyName=function(t){if(t>=65&&t<=90)return String.fromCharCode(t);switch(t){case e.DELETE:return"Del";default:return""}},Object.freeze(e)})),define("module/core/js/view/userinput/abstractcapturezone",["require","lodash","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/util/css","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/util/math","module/core/js/util/object","module/core/js/util/dom","module/core/js/util/oop"],(function(e){"use strict";function t(e,t,n){this.zoneId=t,this._manager=e,this._recognisers=[],this._clientRecognisers=[],this._eventPropagation=n||r.PROPAGATE_ALL}var n=e("lodash"),i=e("module/core/js/view/userinput/abstractgesturerecogniser"),o=e("module/core/js/util/css"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/userinput/hovergesturerecogniser"),l=e("module/core/js/util/math"),u=e("module/core/js/util/object"),c=e("module/core/js/util/dom"),d=e("module/core/js/util/oop");t.GESTURES=u.recursiveFreeze({HOVER:a});var h=t.prototype;return h.visible=!0,h.zIndex=0,h.zoneId=null,h._eventPropagation=null,h._padding=0,h._recognisers=null,h._clientRecognisers=null,h._cursorGesture=null,h.getEventPropagation=s.getter("_eventPropagation"),h.withEventPropagation=s.setter("_eventPropagation"),h.getPadding=s.getter("_padding"),h.withPadding=function(e){if(!l.isNumber(e))throw new Error("Attempt to set an invalid value. Padding must be a number.");return this._padding=e,this},h.withDefaultPadding=function(){return this._padding=this._manager.getDefaultPadding(),this},h.withZIndex=s.setter("zIndex"),h.getType=d.abstractMethod,h.destroy=function(){this.visible=!1,this._manager.remove(this),this._removeAllGestureRecognisers()},h.addGesture=function(e,t){var n=e.create.apply(e,Array.prototype.slice.call(arguments,1));return n.on(i.HANDLED,this._handleGestureHandled.bind(this,n),this),this._recognisers.push(n),n},h.removeGesture=function(e){this._recognisers=this._recognisers.filter((function(t){return t!==e||(t.destroy(),!1)}))},h.removeGestures=function(e){this._recognisers=this._recognisers.filter((function(t){return!(t instanceof e)||(t.destroy(),!1)}))},h.addGestureRecogniser=function(e){return n.includes(this._clientRecognisers,e)||(this._clientRecognisers.push(e),e.on(i.HANDLED,this._handleGestureHandled.bind(this,e),this)),this},h.removeGestureRecogniser=function(e){return n.includes(this._clientRecognisers,e)&&(n.pull(this._clientRecognisers,e),e.reset(),e.un(null,this)),this},h._handleGestureHandled=s.delegate("_manager","gestureHandledBy"),h.pointInCaptureZone=d.abstractMethod,h.handleEvent=function(e,t,n){var i=this._delegateEventToRecognisers(this._recognisers,e,t,n),o=this._delegateEventToRecognisers(this._clientRecognisers,e,t,n);return i||o},h.show=function(){return this.visible=!0,this},h.hide=function(){return this.visible=!1,this},h.reset=function(e){function t(t){t!==e&&t.reset()}this._recognisers.forEach(t),this._clientRecognisers.forEach(t)},h.resetHover=function(){s.invokeCall(this._recognisers,"resetHover"),s.invokeCall(this._clientRecognisers,"resetHover")},h.withCursorOnHover=function(e,n){var i=c.getRootContainer(n);return this._cursorGesture&&this.withoutCursorOnHover(),this._cursorGesture=this.addGesture(t.GESTURES.HOVER,{onEnd:o.setChartCursor.bind(o,i,o.CURSOR_TYPE.DEFAULT),onGesture:o.setChartCursor.bind(o,i,e)}),this},h.withoutCursorOnHover=function(){this.removeGesture(this._cursorGesture),this._cursorGesture=null},h._removeAllGestureRecognisers=function(){s.invokeCall(this._recognisers,"destroy"),s.invokeCall(this._clientRecognisers,"reset"),s.invokeCall(this._clientRecognisers,"un",null,this),this._recognisers=[],this._clientRecognisers=[]},h.isSet=d.abstractMethod,h._delegateEventToRecognisers=function(e,t,n,i){var o,r=!1;for(o=0;o<e.length;o++)e[o]&&e[o].process(t,n,i)&&(r=!0);return r},Object.seal(h),Object.seal(t)})),define("module/core/js/view/userinput/infinitecapturezone",["require","module/core/js/view/userinput/abstractcapturezone","module/core/js/util/class","module/core/js/util/functional"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/view/userinput/abstractcapturezone"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional");i.extend(t,n),t.create=function(e,n,i){return new t(e,n,i)};var r=t.prototype;return r.x=0,r.y=0,r.pointInCaptureZone=o.returns(!0),r.getType=o.returns("infinite"),r.isSet=o.returns(!1),Object.seal(r),Object.seal(t)})),define("module/core/js/view/userinput/rectanglecapturezone",["require","module/core/js/view/userinput/abstractcapturezone","module/core/js/util/class","module/core/js/util/defer","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/object"],(function(e){"use strict";function t(e){var t;for(t=1;t<arguments.length;t++)if(!a.isNumber(e[arguments[t]]))return!1;return!0}function n(e,t,i){n.superclass.constructor.call(this,e,t,i)}var i=e("module/core/js/view/userinput/abstractcapturezone"),o=e("module/core/js/util/class"),r=e("module/core/js/util/defer"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/math"),l=e("module/core/js/util/object");o.extend(n,i),n.create=function(e,t,i){return new n(e,t,i)},n.nullZoneDimensions=Object.freeze({x:0,y:0,width:0,height:0}),n.normaliseDimensions=function(e){var n={};if(a.isNumber(e.x)?n.x=e.x:a.isNumber(e.left)&&(n.x=e.left),a.isNumber(e.y)?n.y=e.y:a.isNumber(e.top)&&(n.y=e.top),a.isNumber(e.width)?n.width=e.width:a.isNumber(e.right)&&(n.width=e.right-e.left),a.isNumber(e.height)?n.height=e.height:a.isNumber(e.bottom)&&(n.height=e.bottom-e.top),!t(n,"x","y","width","height"))throw new Error("Failed to normalise zone dimensions: "+JSON.stringify(e)+" to "+JSON.stringify(n));return n},n.constrainZoneDimensions=function(e,t){var i=Object.create(null);return i.left=Math.max(e.x,t.x),i.top=Math.max(e.y,t.y),i.right=Math.min(e.x+e.width,t.x+t.width),i.bottom=Math.min(e.y+e.height,t.y+t.height),i.left>=i.right||i.top>=i.bottom?n.nullZoneDimensions:n.normaliseDimensions(i)};var u=n.prototype;return u.x=0,u.y=0,u.height=0,u.width=0,u._dAssociatedElement=null,u.getAssociatedElement=s.getter("_dAssociatedElement"),u.withAssociatedElement=s.setter("_dAssociatedElement"),u.getType=s.returns("rectangle"),u.getLocalCoordinates=function(e,t){var n={x:e.x,y:e.y};return n.x-=this.x,n.y-=this.y,t&&(n.x=Math.max(0,Math.min(this.width,n.x)),n.y=Math.max(0,Math.min(this.height,n.y))),n},u.pointInCaptureZone=function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height},u.setDimensions=function(e,t){return e=n.normaliseDimensions(e),e.x-=this._padding,e.y-=this._padding,e.width+=2*this._padding,e.height+=2*this._padding,t&&(e=n.constrainZoneDimensions(e,n.normaliseDimensions(t))),l.applyTo(this,e),this},u.setDimensionsBasedOnElement=function(e,t){return"function"==typeof e.node&&(e=e.node()),e.getBoundingClientRect?r.defer(this._setDimensionsBasedOnElement,this,[e,t]):this._setDimensionsBasedOnElement(e,t),this},u.setDimensionsBasedOnAssociatedElement=function(){if(this._dAssociatedElement)return this.setDimensionsBasedOnElement(this._dAssociatedElement);throw new Error("Setting zone dimensions without associated element!")},u._setDimensionsBasedOnElement=function(e,t){var i=this._manager.getOffset();e=n.normaliseDimensions(e.getBoundingClientRect?e.getBoundingClientRect():e),e.x-=i.left,e.y-=i.top,this.setDimensions(e,t)},u.isSet=function(){return!(!this.width&&!this.height)},u.destroy=function(){n.superclass.destroy.call(this),r.cancel(this)},Object.seal(u),Object.seal(n)})),define("module/core/js/config/taskconfig",[],(function(){"use strict";var e={EDIT_ANNOTATION:{ID:"EDIT_ANNOTATION_TASK_ID"},RESIZE_SUBVIEW:{ID:"RESIZE_SUBVIEW_TASK_ID",concurrentTasks:["TOOLTIP_MOBILE_TASK_ID","TOOLTIP_DESKTOP_TASK_ID"]},TOOLTIP_MOBILE:{ID:"TOOLTIP_MOBILE_TASK_ID",concurrentTasks:["DEAL_TICKET_TASK_ID","RESIZE_SUBVIEW_TASK_ID"]},TOOLTIP_DESKTOP:{ID:"TOOLTIP_DESKTOP_TASK_ID",persistent:!0,concurrentTasks:["MAIN_MENU_TASK_ID"]},DEAL_TICKET:{ID:"DEAL_TICKET_TASK_ID",concurrentTasks:["TOOLTIP_MOBILE_TASK_ID"]},DEAL_POSITION:{ID:"DEAL_POSITION_TASK_ID"},MAIN_MENU:{ID:"MAIN_MENU_TASK_ID",persistent:!0,concurrentTasks:["TOOLTIP_DESKTOP_TASK_ID"]},MEASURE_TOOL:{ID:"MEASURE_TOOL_TASK_ID"},CONCURRENT_DIALOG:{ID:"CONCURRENT_DIALOG_TASK_ID",blockUnhandledHotkeys:!0,persistent:!0,fullyConcurrent:!0},ANNOTATION_TOOLBOX:{ID:"ANNOTATION_TOOLBOX_TASK_ID",fullyConcurrent:!0,nonConcurrentTasks:["TOOLTIP_DESKTOP_TASK_ID"]},NON_CONCURRENT_DIALOG:{ID:"NON_CONCURRENT_DIALOG_TASK_ID",blockUnhandledHotkeys:!0,persistent:!0},GLOBAL:{ID:"GLOBAL_TASK_ID",fullyConcurrent:!0,persistent:!0}};return Object.freeze(e)})),define("module/core/js/util/touch",[],(function(){"use strict";function e(){"ontouchstart"in document.documentElement?(this.touchEnabled=!0,this._boundHandlersByElementId={}):this._handleTouchDisabled()}var t=e.prototype;return t.touchEnabled=!1,t._boundHandlersByElementId=null,t._handleTouchDisabled=function(){for(var e in t)t.hasOwnProperty(e)&&"_"!==e[0]&&"function"==typeof t[e]&&(this[e]=function(){})},t.disablePageScrolling=function(){function e(e){e.stopPropagation()}document.addEventListener("touchstart",(function(e){e.allowDefault||e.preventDefault()})),document.addEventListener("mousedown",e,!0),document.addEventListener("mouseup",e,!0),document.addEventListener("mousemove",e,!0)},t.enableScrolling=function(e){function t(t){t.allowDefault=!0,e.scrollTop<=0?e.scrollTop=1:e.scrollTop+e.offsetHeight>=e.scrollHeight&&(e.scrollTop-=1)}function n(t){0===e.scrollTop&&e.offsetHeight-1<=e.scrollHeight&&t.preventDefault()}function i(t){e.addEventListener(t,o[t],!1)}var o;e.id||(e.id=Date.now()),o={touchstart:t,touchmove:n},Object.keys(o).forEach(i),this._boundHandlersByElementId[e.id]=o},t.enableDefault=function(e){function t(e){e.allowDefault=!0}function n(t){e.addEventListener(t,i[t],!1)}var i;e.id||(e.id=Date.now()),i={touchstart:t,touchend:t},Object.keys(i).forEach(n),this._boundHandlersByElementId[e.id]=i},t.cancelScrolling=function(e){function t(t){e.removeEventListener(t,n[t],!1)}var n=this._boundHandlersByElementId[e.id];n&&(Object.keys(n).forEach(t),delete this._boundHandlersByElementId[e.id])},Object.seal(t),new e})),define("module/core/js/tracker/trackeractions/dialog",["require","lodash","module/core/js/tracker/enum/schema"],(function(e){"use strict";var t=e("lodash"),n=e("module/core/js/tracker/enum/schema"),i={};return i.dismiss=function(e){return{schema:n.ELEMENT_ACTION,elementId:"DISMISS",elementGroup:"DIALOG",elementParentId:e,elementType:e===i.dismiss.HOTKEY?"LAYER":"BUTTON",actionType:"PRESS"}},Object.freeze(t.assign(i.dismiss,{CANCEL:"CANCEL",CLOSE_ICON:"CLOSE_ICON",HOTKEY:"HOTKEY"})),i.submit=function(e){return{schema:n.ELEMENT_ACTION,elementId:"SUBMIT",elementGroup:"DIALOG",elementParentId:e,elementType:e===i.submit.HOTKEY?"LAYER":"BUTTON",actionType:"PRESS"}},Object.freeze(t.assign(i.submit,{DONE:"DONE",HOTKEY:"HOTKEY"})),Object.seal(i)})),define("module/core/js/view/component/dialog/abstractdialog",["require","lodash","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/view/component/closeicon","module/core/js/util/defer","module/core/js/util/dom","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/enum/hotkeyenum","module/core/js/view/userinput/infinitecapturezone","module/core/js/util/oop","module/core/js/view/userinput/rectanglecapturezone","module/core/js/event/subscribable","module/core/js/config/taskconfig","module/core/js/util/touch","module/core/js/tracker/trackeractions/dialog","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(){this._dOverlay&&this._dOverlay.classed("fixScrollOniOS",!1)}function n(e,t,n,i){var o=!1,r=function(){if(o)return n.apply(i,arguments)};e.subscribe(t,r,i),o=!0}function i(e,t,n){this._eventBus=e,this._captureZoneManager=t,this._taskManager=n,this._hotkeyMap={},this._hotkeyMap[h.ESCAPE]=this.cancel.bind(this,y.dismiss.HOTKEY),this._hotkeyMap[h.ENTER]=this.submit.bind(this,y.submit.HOTKEY),this.updateCaptureZones=d.throttledDeferred(this.updateCaptureZones),this._fixScrollOniOS=d.throttledDeferred(this._fixScrollOniOS)}var o=e("lodash"),r=e("module/core/js/view/axisconstants"),s=e("module/core/js/util/class"),a=e("module/core/js/view/component/closeicon"),l=e("module/core/js/util/defer"),u=e("module/core/js/util/dom"),c=e("module/core/js/view/userinput/eventpropagation"),d=e("module/core/js/util/functional"),h=e("module/core/js/enum/hotkeyenum"),p=e("module/core/js/view/userinput/infinitecapturezone"),m=e("module/core/js/util/oop"),f=e("module/core/js/view/userinput/rectanglecapturezone"),_=e("module/core/js/event/subscribable"),g=e("module/core/js/config/taskconfig"),v=e("module/core/js/util/touch"),y=e("module/core/js/tracker/trackeractions/dialog"),M=e("module/core/js/enum/zindexenum");s.extend(i,_),i.CLOSE="close",i.DONE="done",i.create=function(e,t,n){return new i(e,t,n)};var b=i.prototype;return b.content=null,b.dContainer=null,b._dDialog=null,b._dDialogContainer=null,b._dOverlay=null,b._eventBus=null,b._closeIcon=null,b._overlayCaptureZone=null,b._overlayScrollHandler=null,b._hotkeyMap=null,b.initDom=function(e,t,i){return this._startTask(),this.dContainer=e,this._dOverlay=this._createOverlay(e,i),this._dDialogContainer=this._dOverlay.append("div").classed("dialogContainer",!0),this._dDialog=this._dDialogContainer.append("div").attr("class",this._getDialogClasses()).classed("dialog",!0),this._createHeader(this._dDialog),this.content=this._createContent(this._dDialog.append("div").classed("body",!0),t),this._eventBus.subscribe("chart/view/visibleWindow/moved/*",this._handleVisibleWindowMoved,this),n(this._eventBus,"chart/resolution/changed",this.destroy,this),this._dialogDimensions=f.normaliseDimensions(this._dDialog.node().getBoundingClientRect()),this._handleVisibleWindowMoved(r.RESIZED,r.RESIZED),this},b.destroy=function(){this._finishTask(),this.dContainer=null,this._eventBus.unsubscribeAll(this),this.updateCaptureZones.abort(),this._fixScrollOniOS.abort(),this.content&&(this.content.un(null,this),this.content.destroy(),delete this.content),this._destroyHeader(),this._dDialogContainer&&(this._overlayScrollHandler&&(v.cancelScrolling(this._dDialogContainer.node()),this._dDialogContainer.node().removeEventListener("scroll",this._overlayScrollHandler,!1),delete this._overlayScrollHandler),this._dDialogContainer.remove(),delete this._dDialogContainer,delete this._dDialog),this._destroyOverlay()},b.show=function(){return this._dDialogContainer.classed("hidden",!1),this.content.show(),this._closeIcon&&this._closeIcon.show(),this.updateCaptureZones(),this},b.hide=function(){return this._dDialogContainer.classed("hidden",!0),this.content.hide(),this._closeIcon&&this._closeIcon.hide(),this},b.enable=function(){return this.content.enable(),this._closeIcon&&this._closeIcon.enable(),this},b.disable=function(){return this.content.disable(),this._closeIcon&&this._closeIcon.disable(),this},b.cancel=function(e){e in y.dismiss||(e=y.dismiss.CANCEL),this._eventBus.publish("tracker/chart",[y.dismiss(e)]),this.close()},b.submit=function(e){this._eventBus.publish("tracker/chart",[y.submit(e)]),this.done()},b.close=function(){this.fire(i.CLOSE),this.destroy()},b.done=function(){this.fire(i.DONE),this.destroy()},b.updateCaptureZones=function(){return this._closeIcon&&this._closeIcon.updateCaptureZone(),this.content&&this.content.updateCaptureZones(),this},b._getDialogTitle=m.abstractMethod,b._getDialogClasses=d.returns(""),b._createContent=m.abstractMethod,b.getDialogContainer=d.getter("_dDialogContainer"),b._createHeader=function(e,t){this._getDialogTitle()&&(void 0===t&&(t=!0),this._dHeader=e.append("div").classed("title",!0),this._dHeader.append("span").text(this._getDialogTitle()),t&&(this._closeIcon=a.create(this._dHeader,this._captureZoneManager,M.DIALOG_CONTROLS,this.cancel.bind(this,y.dismiss.CLOSE_ICON))))},b._destroyHeader=function(){this._dHeader&&(this._dHeader.remove(),this._dHeader=null),this._closeIcon&&(this._closeIcon.destroy(),this._closeIcon=null)},b._getTaskConfig=o.constant(g.CONCURRENT_DIALOG),b._startTask=function(){this._taskManager.startTask(this._getTaskConfig(),{hotkeyMap:this._hotkeyMap})},b._finishTask=function(){this._taskManager.finishTask(this._getTaskConfig().ID)},b._createOverlay=function(e,t){var n=e.selectAll("div > .modalOverlay");return n.size()<=0&&(n=e.append("div").classed("modalOverlay",!0)),this._overlayCaptureZone=this._captureZoneManager.createZone(p,c.BLOCK_ALL,t||M.DIALOG),n},b._destroyOverlay=function(){this._dOverlay&&(this._overlayCaptureZone.destroy(),this._overlayCaptureZone=null,this._dOverlay.selectAll(".dialog").size()<=0&&this._dOverlay.remove(),this._dOverlay=null)},b._fixScrollOniOS=function(){this._dOverlay.classed("fixScrollOniOS",!0),l.defer(t,this)},b._handleVisibleWindowMoved=function(e,t){var n,i;(e|t)&r.RESIZED&&(n=f.normaliseDimensions(this._captureZoneManager.getOffset()),this._allowFullscreen()&&(i=this._dDialogContainer.select(".dialog").classed("fullscreen",n.width<this._dialogDimensions.width||n.height<this._dialogDimensions.height),u.forceToRedrawIOS(i)),this.updateCaptureZones()),t&r.RESIZED&&this._fixScrollOniOS()},b.makeScrollable=function(){return this._dDialogContainer.classed("scrollable",!0),v.enableScrolling(this._dDialogContainer.node()),this._overlayScrollHandler=this.updateCaptureZones.bind(this),this._dDialogContainer.node().addEventListener("scroll",this._overlayScrollHandler,!1),this},b.removeScrollingBehaviour=function(){return this._dDialogContainer.classed("scrollable",!1),this._overlayScrollHandler&&(v.cancelScrolling(this._dDialogContainer.node()),this._dDialogContainer.node().removeEventListener("scroll",this._overlayScrollHandler,!1)),this},b._allowFullscreen=o.constant(!0),Object.seal(b),Object.seal(i)})),define("module/colour-customisation/js/model/colour",["require","module/colour-customisation/js/constants"],(function(e){"use strict";function t(e,t,n,i,o,r){this.r=e,this.g=t,this.b=n,this.h=i,this.s=o,this.v=r}var n=e("module/colour-customisation/js/constants");t.createFromHSV=function(e,n,i){var o,r,s,a,l,u,c,d,h=e%360/60;return l=i*n,a=l*(1-Math.abs(h%2-1)),o=r=s=i-l,h=~~h,o+=[l,a,0,0,a,l][h],r+=[a,l,l,a,0,0][h],s+=[0,0,a,l,l,a][h],u=Math.round(255*o),c=Math.round(255*r),d=Math.round(255*s),new t(u,c,d,e,n,i)},t.createFromRGB=function(e,n,i){var o,r,s,a,l=e,u=n,c=i;return(e>1||n>1||i>1)&&(l/=255,u/=255,c/=255),s=Math.max(l,u,c),a=s-Math.min(l,u,c),o=0==a?null:s==l?(u-c)/a+(u<c?6:0):s==u?(c-l)/a+2:(l-u)/a+4,o=o%6*60,r=0==a?0:a/s,new t(e,n,i,o,r,s)},t.createFromHex=function(e){if(!n.COLOUR_REGEXP.test(e))throw new Error(e+" is not a valid colour hex code.");return e=e.slice(1),3===e.length&&(e+=e),t.createFromRGB(parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16))};var i=t.prototype;return i.r=null,i.g=null,i.b=null,i.h=null,i.s=null,i.v=null,i.toHex=function(){
return"#"+(16777216|this.b|this.g<<8|this.r<<16).toString(16).slice(1).toUpperCase()},i.toString=function(){return"rgb("+[this.r,this.g,this.b].join(", ")+")"},Object.seal(i),Object.seal(t)})),define("text!module/core/js/view/colourpicker.html",[],(function(){return'<div class="colourPicker">\n\n    <div class="saturationValueSelector">\n        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%">\n            <defs>\n                <linearGradient id="gradient-black" x1="0%" y1="100%" x2="0%" y2="0%">\n                    <stop offset="0%" stop-color="#000000" stop-opacity="1"></stop>\n                    <stop offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop>\n                </linearGradient>\n                <linearGradient id="gradient-white" x1="0%" y1="100%" x2="100%" y2="100%">\n                    <stop offset="0%" stop-color="#FFFFFF" stop-opacity="1"></stop>\n                    <stop offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop>\n                </linearGradient>\n            </defs>\n            <rect x="0" y="0" width="100%" height="100%" fill="url(#gradient-white)"></rect>\n            <rect x="0" y="0" width="100%" height="100%" fill="url(#gradient-black)"></rect>\n        </svg>\n        <div class="indicator"></div>\n    </div>\n\n    <div class="hueSelector">\n        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%">\n            <defs>\n                <linearGradient id="gradient-hsv" x1="0%" y1="0%" x2="100%" y2="0%">\n                    <stop offset="0%" stop-color="#FF0000" stop-opacity="1"></stop>\n                    <stop offset="13%" stop-color="#FFFF00" stop-opacity="1"></stop>\n                    <stop offset="25%" stop-color="#0BED00" stop-opacity="1"></stop>\n                    <stop offset="38%" stop-color="#00FF40" stop-opacity="1"></stop>\n                    <stop offset="50%" stop-color="#00FFFF" stop-opacity="1"></stop>\n                    <stop offset="63%" stop-color="#0040FF" stop-opacity="1"></stop>\n                    <stop offset="75%" stop-color="#8000FF" stop-opacity="1"></stop>\n                    <stop offset="88%" stop-color="#FF00FF" stop-opacity="1"></stop>\n                    <stop offset="100%" stop-color="#FF0000" stop-opacity="1"></stop>\n                </linearGradient>\n            </defs>\n\n            <g fill="none">\n                <rect x="0" y="0" width="100%" height="100%" fill="url(#gradient-hsv)" rx="2"></rect>\n                <rect stroke-opacity="0.2" stroke="#262629" stroke-width="1" x="0.5%" y="6.5%" width="99%" height="87%" rx="2"></rect>\n            </g>\n        </svg>\n        <div class="indicator"></div>\n    </div>\n    <div class="selectedColourContainer">\n        <div class="selectedColour"></div>\n    </div>\n</div>'})),define("module/core/js/view/userinput/primarypointergesturerecogniser",["require","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/util/class"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/core/js/view/userinput/abstractgesturerecogniser");e("module/core/js/util/class").extend(t,n);var i=t.prototype;return i.process=function(e,n,i){return!(!n||Object.keys(n).length<1)&&(Object.keys(n).length>1?(this._endGesture(),this._endProcessing(),!1):("mouse"!==i.pointerType||2!==i.button&&!i.ctrlKey)&&(!("mouse"!==i.pointerType&&!i.isPrimary)&&t.superclass.process.call(this,e,n,i)))},Object.seal(i),Object.seal(t)})),define("module/core/js/view/userinput/pangesturerecogniser",["require","lodash","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/userinput/primarypointergesturerecogniser"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e=e||{}),e.handleHold&&(this._timeout=n.debounce(this._timeout,i.GESTURE_TIMEOUT))}var n=e("lodash"),i=e("module/core/js/view/userinput/abstractgesturerecogniser"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/geometry"),a=e("module/core/js/view/userinput/primarypointergesturerecogniser");o.extend(t,a),t.create=function(e){return new t(e)};var l=t.prototype;return l.deltaX=null,l.deltaY=null,l.startX=null,l.startY=null,Object.defineProperty(l,"x",{configurable:!0,enumerable:!0,get:function(){return"number"==typeof this.startX?this.startX+this.deltaX:null},set:r.throwError("x is a read-only derived property")}),Object.defineProperty(l,"y",{configurable:!0,enumerable:!0,get:function(){return"number"==typeof this.startY?this.startY+this.deltaY:null},set:r.throwError("y is a read-only derived property")}),l._startProcessing=function(e){this._inProgress||(this.startX=e.x,this.startY=e.y,this.deltaX=this.deltaY=0,t.superclass._startProcessing.call(this),this._handlesHold()&&this._timeout())},l._startGesture=function(){this._handlesHold()&&this._timeout.cancel(),t.superclass._startGesture.call(this)},l._updateMovementState=function(e){if(this._updateDeltas(e),!this._isRecognised){s.distancePointToPoint(this.startX,this.startY,e.x,e.y)>i.GESTURE_PRECISION&&this._startGesture()}},l._updateDeltas=function(e){this.deltaX=e.x-this.startX,this.deltaY=e.y-this.startY},l._handlesHold=function(){return"function"==typeof this._timeout.cancel},l._timeout=function(){this._startGesture(),this._callHandler()},l.reset=function(){t.superclass.reset.call(this),this._handlesHold()&&this._timeout.cancel(),this.startX=null,this.startY=null,this.deltaX=null,this.deltaY=null},l._handlePointerDown=function(e,t){if(window.IG._featureFlagEnabled){if(this._inProgress)throw new Error("Pan gesture recogniser handling pointer down when it is in progress");if(this._isRecognised)throw new Error("Pan gesture recogniser handling pointer down when it is recognised");if(!t||1!==Object.keys(t).length)throw new Error("Pan gesture recogniser doing pointer down with invalid amount of pointers!")}this._startProcessing(e)},l._handlePointerMove=function(e,t){if(this._inProgress){if(window.IG._featureFlagEnabled&&(!t||1!==Object.keys(t).length))throw new Error("Pan gesture recogniser doing pointer move with invalid amount of pointers!");if(this._updateMovementState(e),this._isRecognised)return this._callHandler(),!0}},l._handlePointerUp=l._endProcessing,Object.seal(l),Object.seal(t)})),define("module/core/js/view/userinput/directionalpangesturerecogniser",["require","module/core/js/util/class","module/core/js/view/userinput/pangesturerecogniser"],(function(e){"use strict";function t(e){if(t.superclass.constructor.call(this,e),e=e||{},"function"!=typeof e.plane)throw new Error("Plane function needs to be provided");this._updateDeltas=e.plane}var n=e("module/core/js/util/class"),i=e("module/core/js/view/userinput/pangesturerecogniser");n.extend(t,i),t.create=function(e){return new t(e)},t.PLANES=Object.freeze({HORIZONTAL:function(e){this.deltaX=e.x-this.startX,this.deltaY=0},VERTICAL:function(e){this.deltaX=0,this.deltaY=e.y-this.startY}});var o=t.prototype;return o.rawDeltaX=null,o.rawDeltaY=null,o._updateMovementState=function(e){this.rawDeltaX=e.x-this.startX,this.rawDeltaY=e.y-this.startY,t.superclass._updateMovementState.call(this,e)},o.reset=function(){t.superclass.reset.call(this),this.rawDeltaX=null,this.rawDeltaY=null},Object.seal(t.prototype),Object.seal(t)})),define("module/colour-customisation/js/view/component/colourpicker",["require","module/core/js/ext/d3","module/colour-customisation/js/model/colour","text!module/core/js/view/colourpicker.html","module/core/js/util/defer","module/core/js/view/userinput/directionalpangesturerecogniser","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/pangesturerecogniser","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t){this._captureZoneManager=e,this._colourSelected=t||i.createFromHSV(0,1,1),this._scaleHue=n.scale.linear().clamp(!0),this._scaleSaturation=n.scale.linear().clamp(!0),this._scaleValue=n.scale.linear().clamp(!0),this.updateCaptureZones=l.throttledDeferred(this.updateCaptureZones)}var n=e("module/core/js/ext/d3"),i=e("module/colour-customisation/js/model/colour"),o=e("text!module/core/js/view/colourpicker.html"),r=e("module/core/js/util/defer"),s=e("module/core/js/view/userinput/directionalpangesturerecogniser"),a=e("module/core/js/view/userinput/eventpropagation"),l=e("module/core/js/util/functional"),u=e("module/core/js/view/userinput/pangesturerecogniser"),c=e("module/core/js/view/userinput/tapgesturerecogniser"),d=e("module/core/js/enum/zindexenum");t.create=function(e,n){return new t(e,n)};var h=t.prototype;return h._captureZoneManager=null,h._colourSelected=null,h._dHueIndicator=null,h._dHueSelector=null,h._dPicker=null,h._dSaturationValueIndicator=null,h._dSaturationValueSelector=null,h._dSelectedColour=null,h._scaleHue=null,h._scaleSaturation=null,h._scaleValue=null,h._zoneHue=null,h._zoneSaturationValue=null,h.getColour=l.getter("_colourSelected"),h.initDom=function(e){var t=document.createElement("div");return t.innerHTML=o,this._dPicker=e.appendElement(t.querySelector(".colourPicker")),this._initHueSelector(),this._initSaturationValueSelector(),this._dSelectedColour=this._dPicker.select(".selectedColour"),this.updateCaptureZones(),this},h._initHueSelector=function(){this._dHueSelector=this._dPicker.select(".hueSelector svg"),this._dHueIndicator=this._dPicker.select(".hueSelector .indicator"),this._zoneHue=this._captureZoneManager.create(a.BLOCK_ALL,d.COLOUR_PICKER_DIALOG_CONTROLS).withAssociatedElement(this._dHueSelector).withDefaultPadding(),this._zoneHue.addGesture(c).withHandler(this._handleHueSelection,this),this._zoneHue.addGesture(s,{handleHold:!0,plane:s.PLANES.HORIZONTAL,onGesture:this._handleHueSelection,context:this})},h._initSaturationValueSelector=function(){this._dSaturationValueSelector=this._dPicker.select(".saturationValueSelector svg"),this._dSaturationValueIndicator=this._dPicker.select(".saturationValueSelector .indicator"),this._zoneSaturationValue=this._captureZoneManager.create(a.BLOCK_ALL,d.COLOUR_PICKER_DIALOG_CONTROLS).withAssociatedElement(this._dSaturationValueSelector),this._zoneSaturationValue.addGesture(c).withHandler(this._handleSaturationValueSelection,this),this._zoneSaturationValue.addGesture(u,{handleHold:!0,onGesture:this._handleSaturationValueSelection,context:this})},h._setInitialIndicators=function(){var e=this._scaleHue(this._colourSelected.h)+this._zoneHue.x,t=this._scaleSaturation(this._colourSelected.s)+this._zoneSaturationValue.x,n=this._scaleValue(this._colourSelected.v)+this._zoneSaturationValue.y;this._handleHueSelection({x:e}),this._handleSaturationValueSelection({x:t,y:n})},h.show=function(){return this._dPicker.classed("hidden",!1),this._zoneHue.show(),this._zoneSaturationValue.show(),this},h.hide=function(){return this._dPicker.classed("hidden",!0),this._zoneHue.hide(),this._zoneSaturationValue.hide(),this},h.updateCaptureZones=function(){return this._zoneHue.setDimensionsBasedOnAssociatedElement(),this._zoneSaturationValue.setDimensionsBasedOnAssociatedElement(),r.defer(this._updateScales,this),this},h.destroy=function(){this._dPicker&&(this._dPicker.remove(),this._dPicker=null,this._zoneHue.destroy(),this._zoneHue=null,this._zoneSaturationValue.destroy(),this._zoneSaturationValue=null,this.updateCaptureZones.abort(),r.cancel(this))},h._updateScales=function(){var e=this._dHueSelector.node().getBoundingClientRect().width,t=this._zoneSaturationValue.width,n=this._zoneSaturationValue.height;this._scaleHue.domain([0,0,360,360]).range([0,this._zoneHue.getPadding(),e,e+this._zoneHue.getPadding()]),this._scaleSaturation.domain([0,1]).range([0,t]),this._scaleValue.domain([1,0]).range([0,n]),this._setInitialIndicators()},h._handleHueSelection=function(e){var t=this._zoneHue.getLocalCoordinates(e,!0),n=this._scaleHue.invert(t.x),o=n/360*100+"%";this._colourSelected=i.createFromHSV(n,this._colourSelected.s,this._colourSelected.v),this._dHueIndicator.style("left",o),this._dSaturationValueSelector.style("background-color",i.createFromHSV(this._colourSelected.h,1,1).toHex()),this._dSelectedColour.style("background-color",this._colourSelected.toHex()),this._dHueIndicator.style("background-color",i.createFromHSV(this._colourSelected.h+10,1,1).toHex())},h._handleSaturationValueSelection=function(e){var t=this._zoneSaturationValue.getLocalCoordinates(e,!0),n=this._scaleSaturation.invert(t.x),o=this._scaleValue.invert(t.y);this._colourSelected=i.createFromHSV(this._colourSelected.h,n,o),this._dSaturationValueIndicator.style({left:Math.round(t.x)+"px",top:Math.round(t.y)+"px"}),this._dSelectedColour.style("background-color",this._colourSelected.toHex())},Object.seal(h),Object.seal(t)})),define("module/menu-common/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{styles:"Chartstil",resolutions:"Intervall",annotations:"Zeichnungen",highlowstats:"Preisänderung",priceline:"Kurslinie",overview:"Zeitleiste",indicators:"Indikatoren",layouts:"Layouts",visibility:"Anzeigen",ASK:"Briefkurs",BID:"Geldkurs",MID:"Mitte",LAST_TRADED:"Zuletzt getradet",LT:"ZG",priceType:"Preis",tooltip:"HLOC Daten",menu:"Tools",styles_customise:"Bearbeiten",customise_appearance:"Darstellung anpassen",delete:"Löschen",delete_layout:"Layout löschen",dealing:"Handel",dealOnCharts:"Handel aus dem Chart",dealingSettings:"Einstellungen",save_as:"Speichern unter",save_layout:"Layout speichern",layout_name:"Layout-Name",calendarevents:"Events",apply:"Verwenden",save:"Speichern",cancel:"Abbrechen",apply_layout:"Layout anwenden",positions_shown:"Offene Positionen eingeblendet",positions_hidden:"Offene Positionen ausgeblendet",p_show_hide:"(zum Ein-/Ausblenden drücken Sie P)",wo_shown:"Hinterlegte Orders eingeblendet",wo_hidden:"Hinterlegte Orders ausgeblendet",o_show_hide:"(zum Aus-/Einblenden drücken Sie O)"},en:{styles:"Types",resolutions:"Interval",annotations:"Drawings",highlowstats:"Price Changes",priceline:"Price Line",overview:"Timeline",indicators:"Indicators",layouts:"Layouts",visibility:"Show",ASK:"Ask",BID:"Bid",MID:"Mid",LAST_TRADED:"Last Traded",LT:"LT",priceType:"Price",tooltip:"HLOC data",menu:"Tools",styles_customise:"Customise",customise_appearance:"Customise appearance",delete_layout:"Delete layout",delete:"Delete",dealing:"Dealing",dealOnCharts:"Dealing on charts",dealingSettings:"Settings",save_as:"Save As",save_layout:"Save layout",layout_name:"Layout name",calendarevents:"Events",apply:"Apply",save:"Save",cancel:"Cancel",apply_layout:"Apply layout",positions_shown:"Open positions shown",positions_hidden:"Open positions hidden",p_show_hide:"(press P to show/hide)",wo_shown:"Working orders shown",wo_hidden:"Working orders hidden",o_show_hide:"(press O to show/hide)"},es:{styles:"Tipos",resolutions:"Intervalo",annotations:"Dibujo",highlowstats:"Cambios en el precio",priceline:"Línea de precio",overview:"Línea de tiempo",indicators:"Indicadores",layouts:"Disposición",visibility:"Mostrar",ASK:"Ask",BID:"Bid",MID:"Med",LAST_TRADED:"Última operación",LT:"ÚO",priceType:"Precio",tooltip:"Datos HLOC",menu:"Ajustes",styles_customise:"Personalizar",customise_appearance:"Personalizar diseño",delete:"Eliminar",delete_layout:"Eliminar plantilla",dealing:"Operar",dealOnCharts:"Operar desde gráficos",dealingSettings:"Preferencias",save_as:"Guardar como",save_layout:"Guardar diseño",layout_name:"Nombre del diseño",calendarevents:"Eventos",apply:"Aplicar",save:"Guardar",cancel:"Cancelar",apply_layout:"Aplicar plantilla",positions_shown:"Abrir las posiciones mostradas",positions_hidden:"Abrir las posiciones ocultas",p_show_hide:"(pulse P para mostrar/ocultar)",wo_shown:"Órdenes en ejecución mostradas",wo_hidden:"Órdenes en ejecución ocultas",o_show_hide:"(pulse O para mostrar/ocultar)"},fr:{styles:"Types",resolutions:"Intervalle",annotations:"Croquis",highlowstats:"Évolutions du cours",priceline:"Ligne de prix",overview:"Période",indicators:"Indicateurs",layouts:"Configurations",visibility:"Afficher",ASK:"Achat",BID:"Vente",MID:"Moyenne",LAST_TRADED:"Dernier Trade",LT:"DT",priceType:"Cours",tooltip:"Données HLOC",menu:"Outils",styles_customise:"Personnaliser",customise_appearance:"Personnaliser l'apparence",delete:"Supprimer",delete_layout:"Supprimer une mise en page",dealing:"Passage d'ordre",dealOnCharts:"Passage d'ordre sur graphiques",dealingSettings:"Réglages",save_as:"Enregistrer sous",save_layout:"Enregistrer la configuration",layout_name:"Nom de la configuration",calendarevents:"Événements",apply:"Appliquer",save:"Sauvegarder",cancel:"Annuler",apply_layout:"Appliquer une mise en page",positions_shown:"Positions ouvertes affichées",positions_hidden:"Positions ouvertes masquées",p_show_hide:"(appuyez sur P pour afficher/masquer)",wo_shown:"Ordres en cours affichés",wo_hidden:"Ordres en cours masqués",o_show_hide:"(appuyez sur O pour afficher/masquer)"},it:{styles:"Tipo",resolutions:"Intervallo",annotations:"Traccia",highlowstats:"Variazione di prezzo",priceline:"Linea di prezzo",overview:"Timeline",indicators:"Indicatori",layouts:"Layout",visibility:"Mostra",ASK:"Lettera",BID:"Denaro",MID:"Metà",LAST_TRADED:"Ultimo Trade",LT:"UT",priceType:"Prezzo",tooltip:"HLOC",menu:"Strumenti",styles_customise:"Personalizza",customise_appearance:"Configura il grafico",delete:"Elimina",delete_layout:"Cancella layout",dealing:"Trading",dealOnCharts:"Trading dai grafici",dealingSettings:"Impostazioni",save_as:"Salva come",save_layout:"Salva layout",layout_name:"Nome Template",calendarevents:"Eventi",apply:"Seleziona",save:"Salva",cancel:"Annulla",apply_layout:"Applica layout",positions_shown:"Le posizioni aperte sono visibili",positions_hidden:"Le posizioni aperte sono nascoste",p_show_hide:"(premi P per visualizzarle/nasconderle)",wo_shown:"Gli ordini in lavorazione sono visibili",wo_hidden:"Gli ordini in lavorazione sono nascosti",o_show_hide:"(premi O per visualizzarli/nasconderli)"},ja:{styles:"タイプ",resolutions:"間隔",annotations:"ライン",highlowstats:"価格変動",priceline:"プライスライン",overview:"表示期間",indicators:"テクニカル分析",layouts:"レイアウト",visibility:"表示する",ASK:"買値",BID:"売値",MID:"中値",LAST_TRADED:"直近値",LT:"直近値",priceType:"価格",tooltip:"四本値",menu:"ツール",styles_customise:"カスタマイズ",customise_appearance:"表示をカスタマイズ",delete:"削除",delete_layout:"レイアウトの削除",dealing:"取引",dealOnCharts:"チャート直接取引",dealingSettings:"設定",save_as:"保存する",save_layout:"レイアウトの保存",layout_name:"レイアウト名",calendarevents:"イベント",apply:"選択",save:"保存",cancel:"キャンセル",apply_layout:"レイアウトの適用",positions_shown:"ポジション一覧を表示",positions_hidden:"ポジション一覧を非表示",p_show_hide:"（キーボードのPをクリック）",wo_shown:"未決オーダーを表示",wo_hidden:"未決オーダーを非表示",o_show_hide:"（キーボードのOをクリック）"},nl:{styles:"Soorten",resolutions:"Interval",annotations:"Tekeningen",highlowstats:"Prijsveranderingen",priceline:"Koerslijn",overview:"Tijdsperiode",indicators:"Indicatoren",layouts:"Layouts",visibility:"Tonen",ASK:"Vraag",BID:"Bied",MID:"Mid",LAST_TRADED:"Laatst Verhandeld",LT:"LV",priceType:"Prijstype",tooltip:"HLOC data",menu:"Tools",styles_customise:"Aanpassen",customise_appearance:"Lay-out aanpassen",delete:"Verwijderen",delete_layout:"Lay-out verwijderen",dealing:"Handelen",dealOnCharts:"Handelen via grafieken",dealingSettings:"Instellingen",save_as:"Opslaan Als",save_layout:"Layout opslaan",layout_name:"Layout Naam",calendarevents:"Evenementen",apply:"Toepassen",save:"Opslaan",cancel:"Annuleer",apply_layout:"Lay-out toepassen",positions_shown:"Open posities getoond",positions_hidden:"Open posities niet getoond",p_show_hide:"(druk op P voor tonen/verbergen)",wo_shown:"Werkende orders getoond",wo_hidden:"Werkende orders niet getoond",o_show_hide:"(druk op O voor tonen/verbergen)"},no:{styles:"Type",resolutions:"Intervall",annotations:"Markeringer",highlowstats:"Prisendringer",priceline:"Prislinje",overview:"Tidslinje",indicators:"Indikatorer",layouts:"Oppsett",visibility:"Vis",ASK:"Kjøp",BID:"Selg",MID:"Mid",LAST_TRADED:"Sist handlet",LT:"SH",priceType:"Kurs",tooltip:"HLOC-data",menu:"Verktøy",styles_customise:"Skreddersy",customise_appearance:"Tilpass utseende",delete:"Slett",delete_layout:"Slett layout",dealing:"Trading",dealOnCharts:"Trading gjennom diagrammer",dealingSettings:"Innstillinger",save_as:"Lagre som",save_layout:"Lagre layout",layout_name:"Navn på oppsett",calendarevents:"Hendelser",apply:"Bruk",save:"Lagre",cancel:"Kanseller",apply_layout:"Anvend layout",positions_shown:"Åpne posisjoner vises",positions_hidden:"Åpne posisjoner skjulte",p_show_hide:"(trykk P for å vise/skjule)",wo_shown:"Betingede ordre vises",wo_hidden:"Betingede ordre skjulte",o_show_hide:"(trykk O for å vise/skjule)"},pt:{styles:"Tipos",resolutions:"Intervalo",annotations:"Marcações",highlowstats:"Variação de preço",priceline:"Linha de preço",overview:"Linha do tempo",indicators:"Indicadores",layouts:"Modelos",visibility:"Mostrar",ASK:"Compra",BID:"Venda",MID:"Meio",LAST_TRADED:"Último preço",LT:"ÚP",priceType:"Preço",tooltip:"Dados HLOC",menu:"Opções",styles_customise:"Personalizar",customise_appearance:"Personalizar Aparência",delete:"Apagar",delete_layout:"Eliminar layout",dealing:"Negociar",dealOnCharts:"Negociar nos gráficos",dealingSettings:"Preferências",save_as:"Guardar como",save_layout:"Guardar layout",layout_name:"Nome do modelo",calendarevents:"Eventos",apply:"Aplicar",save:"Guardar",cancel:"Cancelar",apply_layout:"Aplicar layout",positions_shown:"Abrir posições mostradas",positions_hidden:"Abrir posições escondidas",p_show_hide:"(pressione P para mostrar/ocultar)",wo_shown:"Ordens de trabalho mostradas",wo_hidden:"Ordens de trabalho escondidas",o_show_hide:"(pressione O para mostrar/ocultar)"},sv:{styles:"Stil",resolutions:"Intervall",annotations:"Ritobjekt",highlowstats:"Prisförändring",priceline:"Prislinje",overview:"Tidslinje",indicators:"Indikatorer",layouts:"Diagramlayouter",visibility:"Visa",ASK:"Säljkurs",BID:"Köpkurs",MID:"Mittkurs",LAST_TRADED:"Senast handlad",LT:"SH",priceType:"Pris",tooltip:"HLOC-data",menu:"Alternativ",styles_customise:"Anpassa",customise_appearance:"Anpassa utseende",delete:"Radera",delete_layout:"Radera layout",dealing:"Transaktioner",dealOnCharts:"Handel via diagram",dealingSettings:"Inställningar",save_as:"Spara som",save_layout:"Spara layout",layout_name:"Layoutnamn",calendarevents:"Händelser",apply:"Använd",save:"Spara",cancel:"Avbryt",apply_layout:"Använd layout",positions_shown:"Öppna positioner visas",positions_hidden:"Öppna positioner dolda",p_show_hide:"(tryck på P för att visa/dölja)",wo_shown:"Väntande ordrar visas",wo_hidden:"Väntande ordrar dolda",o_show_hide:"(tryck på O för att visa/dölja)"},zh:{styles:"类型",resolutions:"间隔",annotations:"绘图",highlowstats:"价格变动",priceline:"价格曲线",overview:"时间轴",indicators:"指标",layouts:"佈局",visibility:"显示",ASK:"买入价",BID:"卖出价",MID:"中间价",LAST_TRADED:"最后交易价",LT:"最后交易价",priceType:"价格",tooltip:"HLOC数据",menu:"工具",styles_customise:"自定义",customise_appearance:"自定义外观",delete:"删除",delete_layout:"删除布局",dealing:"交易",dealOnCharts:"图表交易",dealingSettings:"设置",save_as:"保存为",save_layout:"保存布局",layout_name:"布局名称",calendarevents:"事件",apply:"应用",save:"保存",cancel:"取消",apply_layout:"应用布局",positions_shown:"已开仓位已显示",positions_hidden:"已开仓位已隐藏",p_show_hide:"（按P键切换）",wo_shown:"未执行定单已显示",wo_hidden:"未执行定单已隐藏",o_show_hide:"（按O键切换）"},zh_TW:{styles:"類型",resolutions:"間隔",annotations:"绘图",highlowstats:"價格變動",priceline:"價格曲線",overview:"時間軸",indicators:"指標",layouts:"佈局",visibility:"顯示",ASK:"買入價",BID:"賣出價",MID:"中間價",LAST_TRADED:"最後交易價",LT:"最後交易價",priceType:"价格",tooltip:"HLOC數據",menu:"工具",styles_customise:"自定義",customise_appearance:"自定義外觀",delete:"删除",delete_layout:"删除布局",dealing:"交易",dealOnCharts:"圖表交易",dealingSettings:"設置",save_as:"保存为",save_layout:"保存布局",layout_name:"布局名称",calendarevents:"事件",apply:"應用",save:"保存",cancel:"取消",apply_layout:"應用佈局",positions_shown:"已開倉位已顯示",positions_hidden:"已開倉位已隱藏",p_show_hide:"（按P鍵切換）",wo_shown:"未執行定單已顯示",wo_hidden:"未執行定單已隱藏",o_show_hide:"（按O鍵切換）"}})})),define("module/core/js/view/component/dialog/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{cancel:"Abbrechen",done:"Fertig",reset:"Auf Grundeinstellungen zurücksetzen",undo:"Zurücksetzen"},en:{cancel:"Cancel",done:"Done",reset:"Reset to Defaults",undo:"Reset"},es:{cancel:"Cancelar",done:"Volver",reset:"Volver a configuración por defecto",undo:"Reajustar"},fr:{cancel:"Annuler",done:"Réduire",reset:"Réinitialiser les valeurs par défaut",undo:"Réinitialiser"},it:{cancel:"Annulla",done:"Chiudi",reset:"Ripristinare le impostazioni predefinite",undo:"Reset"},ja:{cancel:"キャンセル",done:"縮小",reset:"デフォルト設定／リセット",undo:"リセット"},nl:{cancel:"Annuleer",done:"Volledig",reset:"Herzetten naar standaardinstellingen",undo:"Reset"},no:{cancel:"Kanseller",done:"Ferdig",reset:"Tilbakestill til standard",undo:"Tilbakestill"},pt:{cancel:"Cancelar",done:"Voltar",reset:"Reset",undo:"Redefinir"},sv:{cancel:"Avbryt",done:"Minimera",reset:"Återställ till standard",undo:"Återställ"},zh:{cancel:"取消",done:"完成",reset:"还原为默认设置",undo:"重设"},zh_TW:{cancel:"取消",done:"完成",reset:"還原為默認設置",undo:"重設"}})})),define("module/core/js/view/component/dialog/submittabledialogcontent",["require","module/core/js/view/component/dialog/abstractdialog","module/core/js/view/component/dialog/abstractdialogcontent","module/core/js/view/component/button","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/component/dialog/i18n","module/core/js/tracker/trackeractions/dialog","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this.updateCaptureZones=s.throttledDeferred(this.updateCaptureZones)}var n=e("module/core/js/view/component/dialog/abstractdialog"),i=e("module/core/js/view/component/dialog/abstractdialogcontent"),o=e("module/core/js/view/component/button"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/component/dialog/i18n"),l=e("module/core/js/tracker/trackeractions/dialog"),u=e("module/core/js/enum/zindexenum");r.extend(t,i),t.create=function(e,n,i,o){return new t(e,n,i,o)};var c=t.prototype;return c._dButtonContainer=null,c._doneButton=null,c._resetButton=null,c._cancelButton=null,c.initDom=function(e){return t.superclass.initDom.call(this,e),this.updateCaptureZones(),this},c.updateCaptureZones=function(){return this._doneButton&&this._doneButton.updateCaptureZone(),this._cancelButton&&this._cancelButton.updateCaptureZone(),this._resetButton&&this._resetButton.updateCaptureZone(),this},c.show=function(){return t.superclass.show.call(this),this._doneButton&&this._doneButton.setHidden(!1),this._cancelButton&&this._cancelButton.setHidden(!1),this._resetButton&&this._resetButton.setHidden(!1),this._dButtonContainer&&this._dButtonContainer.classed("hidden",!1),this.enable(),this},c.hide=function(){return t.superclass.hide.call(this),this._doneButton&&this._doneButton.setHidden(!0),this._cancelButton&&this._cancelButton.setHidden(!0),this._resetButton&&this._resetButton.setHidden(!0),this._dButtonContainer&&this._dButtonContainer.classed("hidden",!0),this.disable(),this},c.enable=function(){return this._doneButton&&this._doneButton.enable(),this._cancelButton&&this._cancelButton.enable(),this._resetButton&&this._resetButton.enable(),this},c.disable=function(){return this._doneButton&&this._doneButton.disable(),this._cancelButton&&this._cancelButton.disable(),this._resetButton&&this._resetButton.disable(),this},c.destroy=function(){this._dButtonContainer&&(this._dButtonContainer.remove(),this._dButtonContainer=null),this._doneButton&&(this._doneButton.destroy(),this._doneButton=null),this._cancelButton&&(this._cancelButton.destroy(),this._cancelButton=null),this._resetButton&&(this._resetButton.destroy(),this._resetButton=null),this.updateCaptureZones.abort()},c._createDoneButton=function(e,t,i){this._doneButton=o.create().initDom(this._getButtonContainer(),"doneButton").setText(t||a.get("done")).startListening(this._captureZoneManager,this._dialog.submit.bind(this._dialog,l.submit.DONE),i||u.DIALOG_CONTROLS),e&&this._dialog.on(n.DONE,e,this)},c._createCancelButton=function(e,t,i){this._cancelButton=o.create().initDom(this._getButtonContainer(),"cancelButton").setText(t||a.get("cancel")).startListening(this._captureZoneManager,this._dialog.cancel.bind(this._dialog,l.submit.CANCEL),i||u.DIALOG_CONTROLS),e&&this._dialog.on(n.CLOSE,e,this)},c._createResetButton=function(e,t,n){this._resetButton=o.create().initDom(this._getButtonContainer(),"resetButton").setText(t||a.get("reset")).startListening(this._captureZoneManager,e.bind(this),n||u.DIALOG_CONTROLS)},c._getButtonContainer=function(){return this._dButtonContainer||(this._dButtonContainer=this.dContainer.append("div").classed("actions",!0)),this._dButtonContainer},Object.seal(c),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/colourpickerdialogcontent",["require","module/core/js/util/class","module/colour-customisation/js/model/colour","module/colour-customisation/js/view/component/colourpicker","module/menu-common/js/i18n","module/core/js/view/component/dialog/submittabledialogcontent","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,r,s,a){t.superclass.constructor.call(this,e,n,r),this._callback=a,this._colourPicker=o.create(r,s?i.createFromHex(s):null)}var n=e("module/core/js/util/class"),i=e("module/colour-customisation/js/model/colour"),o=e("module/colour-customisation/js/view/component/colourpicker"),r=e("module/menu-common/js/i18n"),s=e("module/core/js/view/component/dialog/submittabledialogcontent"),a=e("module/core/js/enum/zindexenum");n.extend(t,s),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var l=t.prototype;return l._callback=null,l._colourPicker=null,l.initDom=function(e){return t.superclass.initDom.call(this,e),this._colourPicker.initDom(e),this._createDoneButton(this._onDoneButtonPressed,r.get("save"),a.COLOUR_PICKER_DIALOG_CONTROLS),this._createCancelButton(void 0,void 0,a.COLOUR_PICKER_DIALOG_CONTROLS),this},l.show=function(){return this._colourPicker.show(),t.superclass.show.call(this)},l.hide=function(){return this._colourPicker.hide(),t.superclass.hide.call(this)},l.updateCaptureZones=function(){return this._colourPicker.updateCaptureZones(),t.superclass.updateCaptureZones.call(this)},l.destroy=function(){this._colourPicker&&(this._colourPicker.destroy(),this._colourPicker=null),t.superclass.destroy.call(this)},l._onDoneButtonPressed=function(){this._callback(this._colourPicker.getColour().toHex())},Object.seal(l),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/colourpickerdialog",["require","lodash","module/core/js/view/component/dialog/abstractdialog","module/core/js/util/class","module/colour-customisation/js/view/component/dialog/colourpickerdialogcontent","module/core/js/model/deviceinfo","module/core/js/view/userinput/eventpropagation","module/core/js/util/geometry","module/core/js/view/userinput/rectanglecapturezone","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,r),this._callback=o,this._currentColour=i,this._dAnchorComponent=s}var n=e("lodash"),i=e("module/core/js/view/component/dialog/abstractdialog"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/component/dialog/colourpickerdialogcontent"),s=e("module/core/js/model/deviceinfo"),a=e("module/core/js/view/userinput/eventpropagation"),l=e("module/core/js/util/geometry"),u=e("module/core/js/view/userinput/rectanglecapturezone"),c=e("module/core/js/view/userinput/tapgesturerecogniser"),d=e("module/core/js/enum/zindexenum");o.extend(t,i),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var h=t.prototype;return h._blockingZone=null,h._callback=null,
h._currentColour=null,h.initDom=function(e){var n=t.superclass.initDom.call(this,e,null,d.COLOUR_PICKER_DIALOG_DISMISSAL_ZONE);return this._overlayCaptureZone.addGesture(c,1).withHandler(this.close,this),this._blockingZone=this._captureZoneManager.create(a.BLOCK_ALL,d.COLOUR_PICKER_DIALOG_BODY).withAssociatedElement(this._dDialog),n},h.show=function(){return this._blockingZone.show(),t.superclass.show.call(this)},h.hide=function(){return this._blockingZone.hide(),t.superclass.show.call(this)},h.updateCaptureZones=function(){return this._blockingZone.setDimensionsBasedOnAssociatedElement(),t.superclass.updateCaptureZones.call(this)},h.destroy=function(){this._blockingZone&&(this._blockingZone.destroy(),delete this._blockingZone),t.superclass.destroy.call(this)},h._getDialogTitle=n.constant(null),h._getDialogClasses=n.constant("colour"),h._handleVisibleWindowMoved=function(e,n){if(t.superclass._handleVisibleWindowMoved.call(this,e,n),!s.isMobile()){var i=u.normaliseDimensions(this._dAnchorComponent.node().getBoundingClientRect()),o=u.normaliseDimensions(this._dDialog.node().getBoundingClientRect()),r=u.normaliseDimensions(this._captureZoneManager.getOffset()),a=l.calculateBottomLeftAnchoringPointWithBoundaryConstraints(i,o,r);this._dDialog.style("position","fixed"),this._dDialog.style("left",a.left-4+"px"),this._dDialog.style("top",a.top+4+4+"px")}},h._createContent=function(e){return r.create(this,this._eventBus,this._captureZoneManager,this._currentColour,this._handleNewColour.bind(this)).initDom(e)},h._handleNewColour=function(e){this._callback(e)},h._allowFullscreen=n.constant(!1),Object.seal(h),Object.seal(t)})),define("module/colour-customisation/js/view/component/lineselectorwidget",["require","module/core/js/ext/d3","module/core/js/util/functional","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n){this._title=e,this._callback=n,this._selectionOptions=t}var n=e("module/core/js/ext/d3"),i=e("module/core/js/util/functional"),o=e("module/core/js/enum/zindexenum");t.create=function(e,n,i){return new t(e,n,i)};var r=t.prototype;return r._title=null,r._callback=null,r._dButtons=null,r._selectionOptions=null,r._zones=null,r.initDom=function(e,t,n){return this._zones=[],this._selectionOptions.forEach((function(i){var r=e.append("div").attr("class",n).classed("selector",!0).classed(i,!0);r.append("hr"),r.attr("data-widget-title",this._title),this._zones.push(t.createTapZone(this._handleNewChoice.bind(this,i),o.DIALOG_CONTROLS).withAssociatedElement(r))}),this),this._dButtons=e.selectAll(".selector"),this},r.enable=function(){return i.invokeApply(this._zones,"show"),this},r.disable=function(){return i.invokeApply(this._zones,"hide"),this},r.show=function(){return this._dButtons.classed("hidden",!1),this.enable()},r.hide=function(){return this._dButtons.classed("hidden",!0),this.disable()},r.updateCaptureZones=function(){return i.invokeApply(this._zones,"setDimensionsBasedOnAssociatedElement"),this},r.destroy=function(){this._dButtons&&(this._dButtons.remove(),this._dButtons=null),this._zones&&(i.invokeApply(this._zones,"destroy"),this._zones=null)},r.setSelected=function(e){return this._dButtons.classed("selected",(function(){return n.select(this).classed(e)})),this},r._handleNewChoice=function(e){this.setSelected(e),this._callback(e)},Object.seal(r),Object.seal(t)})),define("module/colour-customisation/js/view/component/stylingwidget",["require","module/core/js/view/component/checkbox","module/colour-customisation/js/view/component/dialog/colourpickerdialog","module/core/js/view/component/dialog/abstractdialog","module/colour-customisation/js/constants","module/core/js/util/functional","module/colour-customisation/js/view/component/lineselectorwidget","module/core/js/util/object","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n){this._initialSettings=e,this._callback=t,this._taskManager=n,this._hasColour=e.hasOwnProperty("colour"),this._hasStyle=e.hasOwnProperty("style"),this._hasWidth=e.hasOwnProperty("width"),this._hasColour&&(this._currentColour=e.colour)}var n=e("module/core/js/view/component/checkbox"),i=e("module/colour-customisation/js/view/component/dialog/colourpickerdialog"),o=e("module/core/js/view/component/dialog/abstractdialog"),r=e("module/colour-customisation/js/constants"),s=e("module/core/js/util/functional"),a=e("module/colour-customisation/js/view/component/lineselectorwidget"),l=e("module/core/js/util/object"),u=e("module/core/js/enum/zindexenum");t.create=function(e,n,i){return new t(e,n,i)};var c=t.prototype;return c._baseDialog=null,c._callback=null,c._captureZoneManager=null,c._currentColour=null,c._eventBus=null,c._dSelectorColour=null,c._dWidget=null,c._initialSettings=null,c._hasColour=null,c._hasStyle=null,c._hasWidth=null,c._checkboxAvailable=!1,c._widgetStyle=null,c._widgetWidth=null,c._zoneColour=null,c._colourDialog=null,c._dSettingTitleContainer=null,c._inlineComponent=null,c.setInlineComponent=s.setter("_inlineComponent"),c._isBaseDialogScrollable=null,c.changeCheckboxStateAndVisibility=function(e){this._checkBox&&(this._callback("isVisible",e),this._checkBox.setSelected(e))},c.initDom=function(e,t,i,o,s,c,d,h){var p,m;if(h=h||s,this._baseDialog=o,this._captureZoneManager=i,this._eventBus=t,this._dWidget=e.append("div").classed("stylesWidget",!0),c&&this._dWidget.attr("data-identifier",c.join(".")),p=this._dWidget.append("div").classed("leftColumn",!0),this._dSettingTitleContainer=p.append("div").classed("settingTitleContainer",!0),this._checkboxAvailable&&(this._checkBox=n.create(),this._checkBox.initDom(this._dSettingTitleContainer,"checkbox").setSelected(d),this._checkBox.startListening(this._captureZoneManager,this._handleVisibilityChange.bind(this),u.DIALOG_CONTROLS),this._dSettingTitleContainer.classed("hasCheckbox",!0)),s&&(p.classed("withSettingTitle",!0),this._dSettingTitleContainer.append("span").classed("settingTitle",!0).text(s)),this._inlineComponent){var f=p.append("div").classed("setting-row",!0);this._inlineComponent.initDom(f)}return m=this._dWidget.append("div").classed("rightColumn",!0),this._hasColour&&(this._dSelectorColour=m.append("div").classed("selector",!0).classed("colourContainer",!0).append("div").classed("colour",!0).style("background-color",this._currentColour),this._dSelectorColour.attr("data-widget-title",h),this._zoneColour=this._captureZoneManager.createTapZone(this._showColourPicker.bind(this),u.DIALOG_CONTROLS).withAssociatedElement(this._dSelectorColour)),this._hasStyle&&(this._widgetStyle=a.create(h,l.values(r.STYLE),this._callback.bind(this,"style")).initDom(m.append("div").classed("selectorGroup",!0),i,"style").setSelected(this._initialSettings.style)),this._hasWidth&&(this._widgetWidth=a.create(h,l.values(r.WIDTH),this._callback.bind(this,"width")).initDom(m.append("div").classed("selectorGroup",!0),i,"width").setSelected(this._initialSettings.width)),this},c.setStyles=function(e){e.colour&&this._setColour(e.colour),e.style&&this._widgetStyle.setSelected(e.style),e.width&&this._widgetWidth.setSelected(e.width)},c.enable=function(){return this._checkBox&&this._checkBox.enable(),this._zoneColour&&this._zoneColour.show(),this._widgetStyle&&this._widgetStyle.enable(),this._widgetWidth&&this._widgetWidth.enable(),this._inlineComponent&&this._inlineComponent.enable(),this},c.disable=function(){return this._checkBox&&this._checkBox.disable(),this._zoneColour&&this._zoneColour.hide(),this._widgetStyle&&this._widgetStyle.disable(),this._widgetWidth&&this._widgetWidth.disable(),this._inlineComponent&&this._inlineComponent.disable(),this},c.show=function(){return this._dWidget.classed("hidden",!1),this.enable(),this},c.hide=function(){return this._dWidget.classed("hidden",!0),this.disable(),this},c.updateCaptureZones=function(){return this._checkBox&&this._checkBox.updateCaptureZone(this._dSettingTitleContainer),this._zoneColour&&this._zoneColour.setDimensionsBasedOnAssociatedElement(),this._widgetStyle&&this._widgetStyle.updateCaptureZones(),this._widgetWidth&&this._widgetWidth.updateCaptureZones(),this._inlineComponent&&this._inlineComponent.updateCaptureZones(),this},c.destroy=function(){this._checkBox&&(this._checkBox.destroy(),this._checkBox=null),this._colourDialog&&(this._colourDialog.destroy(),this._colourDialog=null),this._zoneColour&&(this._zoneColour.destroy(),this._zoneColour=null),this._widgetStyle&&(this._widgetStyle.destroy(),this._widgetStyle=null),this._widgetWidth&&(this._widgetWidth.destroy(),this._widgetWidth=null),this._dWidget&&(this._dWidget.remove(),this._dWidget=null),this._inlineComponent&&(this._inlineComponent.un(null,this),this._inlineComponent.destroy(),this._inlineComponent=null)},c.setCheckboxAvailable=function(e){return this._checkboxAvailable=e,this},c._handleVisibilityChange=function(){this._callback("isVisible",!this._checkBox.isSelected()),this._inlineComponent&&!this._checkBox.isSelected()&&this._inlineComponent.requestFocus()},c._showColourPicker=function(){this._colourDialog=i.create(this._eventBus,this._captureZoneManager,this._currentColour,this._handleNewColour.bind(this),this._taskManager,this._dSelectorColour).initDom(this._baseDialog.getDialogContainer()),this._colourDialog.on(o.CLOSE,this._handleColourDialogClose,this),this._colourDialog.on(o.DONE,this._handleColourDialogClose,this),this._isBaseDialogScrollable=this._baseDialog.getDialogContainer().classed("scrollable"),this._isBaseDialogScrollable&&this._baseDialog.removeScrollingBehaviour()},c._handleColourDialogClose=function(){this._isBaseDialogScrollable&&this._baseDialog.makeScrollable(),this._colourDialog.un(null,this),this._colourDialog=null},c._setColour=function(e){this._currentColour=e,this._dSelectorColour.style("background-color",e)},c._handleNewColour=function(e){this._setColour(e),this._callback("colour",e),this._handleColourDialogClose()},Object.seal(c),Object.seal(t)})),define("module/annotations/js/view/component/dialog/annotationstyledialogcontent",["require","module/core/js/view/component/dialog/abstractdialogcontent","module/core/js/util/class","module/core/js/util/functional","module/annotations/js/i18n","module/core/js/util/object","module/core/js/settings/settingsevents","module/colour-customisation/js/view/component/stylingwidget"],(function(e){"use strict";function t(e,n,i,o,r,a){t.superclass.constructor.call(this,e,n,i,r),this._annotationPresentationModel=a,this._initialStyles=s.shallowClone(this._annotationPresentationModel.getStyle()||{}),this._settingsManager=o}var n=e("module/core/js/view/component/dialog/abstractdialogcontent"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/annotations/js/i18n"),s=e("module/core/js/util/object"),a=e("module/core/js/settings/settingsevents"),l=e("module/colour-customisation/js/view/component/stylingwidget");i.extend(t,n),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var u=t.prototype;return u._annotationPresentationModel=null,u._initialStyles=null,u._settingsManager=null,u._widgets=null,u.initDom=function(e){var t=this._annotationPresentationModel.getStyle()||{};return this._widgets=this._generateWidgets(t,this._annotationPresentationModel.getAnnotation().getType(),e),this._settingsManager.on(a.THEME_CHANGED,o.delegate("_dialog","close"),this),this},u._generateWidgets=function(e,t,n){return[l.create(e,this._handleNewStyle.bind(this),this._taskManager).initDom(n,this._eventBus,this._captureZoneManager,this._dialog,r.get("STYLE"))]},u.resetToDefaults=function(){this._annotationPresentationModel.setStyle(s.shallowClone(this._annotationPresentationModel.getDefaultStyle())),o.invokeCall(this._widgets,"setStyles",s.shallowClone(this._annotationPresentationModel.getDefaultStyle()))},u.revertChanges=function(){this._annotationPresentationModel.setStyle(s.shallowClone(this._initialStyles))},u.save=o.emptyChainable,u.updateCaptureZones=function(){t.superclass.updateCaptureZones.call(this),o.invokeCall(this._widgets,"updateCaptureZones")},u.destroy=function(){this._settingsManager.un(null,this),o.invokeApply(this._widgets,"destroy"),this._widgets=null,t.superclass.destroy.call(this)},u._handleNewStyle=function(e,t){var n=this._annotationPresentationModel.getStyle();n[e]=t,this._annotationPresentationModel.setStyle(n)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/model/abstractannotationpresentationmodel",["require","lodash","module/annotations/js/model/anchor","module/annotations/js/model/annotation","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/object","module/core/js/util/oop","module/annotations/js/view/component/dialog/annotationstyledialogcontent","module/core/js/event/subscribable"],(function(e){"use strict";function t(e,t){this._annotation=e,this._annotationsPresentationModel=t,this._anchors=n.cloneDeep(e.getAnchors())}var n=e("lodash"),i=e("module/annotations/js/model/anchor"),o=e("module/annotations/js/model/annotation"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/math"),l=e("module/core/js/util/object"),u=e("module/core/js/util/oop"),c=e("module/annotations/js/view/component/dialog/annotationstyledialogcontent"),d=e("module/core/js/event/subscribable");r.extend(t,d);var h=t.prototype;return t.CHANGED="CHANGED",t.STYLE_CHANGED="STYLE_CHANGED",t.HOVERED="HOVERED",t.CONTEXT_MENU="CONTEXT_MENU",h._annotation=null,h._annotationsPresentationModel=null,h._anchors=null,h._active=!1,h._hovered=!1,h._isWithinVisibleRange=!0,h._style=null,h._themeSettingsMode=null,h.hasAngle=n.constant(!1),h.getSettingsDialogContent=n.constant([{name:"STYLE",type:c}]),h.moveBy=function(e,t,n,i){var o;i.x&&this.getAnchors().forEach((function(t,r){t.timestamp&&(o=e(n.asAccTime(t.timestamp,!0)),this.setAnchor(n.asDate(e.invert(o+i.x)),t.level,r))}),this),i.y&&this.getAnchors().forEach((function(e,n){e.level&&this.setAnchor(e.timestamp,t.invert(t(e.level)+i.y),n)}),this)},h.getSubViewScalingFactor=function(){return this._annotation.getSubViewScalingFactor()},h.getDefaultStyle=function(){return this._annotation.getDefaultStyle()[this._themeSettingsMode]},h.getStyle=s.getter("_style"),h.isActive=s.getter("_active"),h.setActive=s.setter("_active"),h.isHovered=s.getter("_hovered"),h.setHovered=s.observableSetter("_hovered",t.HOVERED),h.setStyle=s.observableSetter("_style",t.STYLE_CHANGED),h.getType=s.delegate("_annotation","getType"),h.getTrackingAttributes=function(){return this._annotation.getTrackingAttributes(this._themeSettingsMode)},h.getIsWithinVisibleRange=s.getter("_isWithinVisibleRange"),h.setIsWithinVisibleRange=function(e,t,n){this._isWithinVisibleRange=this._calculateIsWithinVisibleRange(e,t,n)},h.getAnnotation=s.getter("_annotation"),h.getAnchors=s.getter("_anchors"),h.getAnchor=function(e){return this._anchors[e||0]},h.setAnchor=function(e,n,o){this._anchorIsDifferent(e,n,o)&&(this._anchors[o||0]=new i(e,n),this.fire(t.CHANGED))},h.setThemeSettingsMode=function(e){this._themeSettingsMode=e,this.setStyle(l.deepCopyLiteral({},this._annotation.getStyle()[e]))},h.updateDomainModel=function(){var e,t=this._isAnnotationNew(),i=!1;this._hasAnyAttributeChanged()&&(this._addAttributeChanges(),i=!0),e=this._getUpdatedStyle(),e&&(this._annotation.setStyle(n.cloneDeep(e)),i=!0),i&&this._annotation.fire(o.MODIFIED,t)},h._hasAnyAttributeChanged=function(){for(var e=0;e<this._anchors.length;e++)if(!this._anchors[e].isEqualTo(this._annotation.getAnchor(e)))return!0;return!1},h._addAttributeChanges=function(){for(var e=0;e<this._anchors.length;e++)this._annotation.setAnchor(this._anchors[e].copy(),e)},h._isAnnotationNew=function(){return!a.isNumber(this._annotation.getAnchor(0).level)},h._calculateIsWithinVisibleRange=u.abstractMethod,h.updateView=function(e,n,i,o,r){this._isWithinVisibleRange=this._annotationsPresentationModel.getEditModeAnnotation()===this||this._calculateIsWithinVisibleRange(i,o,r),this._isWithinVisibleRange&&this._shouldUpdateBasedOnViewChange(e,n)&&this.fire(t.CHANGED)},h._shouldUpdateBasedOnViewChange=function(e,t){return!!(e|t)},h.positionInView=function(e,t,i,o,r){var s,a,l,u,c,d,h;s=o.getAnchors().map((function(n){return{x:e(i.asAccTime(n.timestamp,!0)),y:t(n.level)}})),a=Math.max.apply(null,n.map(s,"x")),l=Math.min.apply(null,n.map(s,"x")),u=Math.max.apply(null,n.map(s,"y")),c=Math.min.apply(null,n.map(s,"y")),d=r.x-(a+l)/2,h=r.y-(u+c)/2,s.forEach((function(e){e.x+=d,e.y+=h})),s.forEach((function(n,o){this.setAnchor(i.asDate(e.invert(n.x)),t.invert(n.y),o)}),this)},h.contextMenu=function(e){this.fire(t.CONTEXT_MENU,this,e)},h._anchorIsDifferent=function(e,t,n){var i=this._anchors[n||0];return!i||e&&(!i.timestamp||e.getTime()!==i.timestamp.getTime())||!e&&i.timestamp||t!==i.level},h.getIndexOfFirstUnsetAttribute=function(){for(var e=0;e<this._anchors.length;e++)if(!this._anchors[e].isSet())return e;return null},h.allAttributesAreSet=function(){return null===this.getIndexOfFirstUnsetAttribute()},h.getAttributes=s.empty,h.getGlobalAnnotationSettings=function(){var e=this._getUpdatedStyle()||this._annotation.getStyle(),t=this.getAttributes();return t?{styles:e,attributes:t}:{styles:e}},h._getUpdatedStyle=function(){var e;return l.diff(this._style,this._annotation.getStyle()[this._themeSettingsMode])?(e=l.deepCopyLiteral({},this._annotation.getStyle()),e[this._themeSettingsMode]=this.getStyle(),e):null},Object.seal(h),Object.seal(t)})),define("module/core/js/view/presentationmodel/abstractpresentationmodel",["require","module/core/js/util/class","module/core/js/event/subscribable"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/event/subscribable");return n.extend(t,i),Object.seal(t.prototype),Object.seal(t)})),define("module/annotations/js/view/model/annotationspresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/view/presentationmodel/abstractpresentationmodel","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional"],(function(e){"use strict";function t(e){this._annotations=[]}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/core/js/view/presentationmodel/abstractpresentationmodel"),o=e("module/core/js/util/array"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional");r.extend(t,i),t.RESET="RESET",t.DESTROYED="DESTROYED",t.UPDATED="UPDATED",t.HIDDEN_OR_SHOWN="HIDDEN_OR_SHOWN",t.EDIT_MODE_ANNOTATION_CHANGED="EDIT_MODE_ANNOTATION_CHANGED",t.INTERACTIVE_EDIT_MODE_CHANGED="INTERACTIVE_EDIT_MODE_CHANGED";var a=t.prototype;return a._annotations=null,a._editModeAnnotation=null,a._interactiveEditModeActive=!1,a._instrumentModel=null,a.getInstrumentModel=s.getter("_instrumentModel"),a.setInstrumentModel=s.setter("_instrumentModel"),a.getAnnotations=s.getter("_annotations"),a.getEditModeAnnotation=s.getter("_editModeAnnotation"),a.setInteractiveEditMode=function(e){e!==this._interactiveEditModeActive&&(this._interactiveEditModeActive=e,this.fire(t.INTERACTIVE_EDIT_MODE_CHANGED))},a.getInteractiveEditMode=s.getter("_interactiveEditModeActive"),a.getTimeline=function(){return this._instrumentModel?this._instrumentModel.getTimeline():null},a.addAnnotation=function(e){this._annotations.push(e),this._addEventListenersToAnnotation(e),this.fire(t.HIDDEN_OR_SHOWN,e,e.getIsWithinVisibleRange())},a.deleteAnnotation=function(e){this.fire(t.HIDDEN_OR_SHOWN,e,!1),e.un(null,this),o.remove(this._annotations,e)},a.deleteAllAnnotations=function(){this._annotations.slice().forEach(this.deleteAnnotation,this)},a.clear=function(){this._annotations.length&&(s.invokeCall(this._annotations,"un",null,this),this._annotations=[]),this.fire(t.DESTROYED)},a.destroy=function(){this.clear(),t.superclass.destroy.call(this)},a.onVisibleRangeUpdate=function(e,t,n,i){this._annotations.forEach(this._updateAnnotationView.bind(this,e,t,n,i))},a.setAnnotations=function(e){this.clear(),this._annotations=e,this._annotations.forEach(this._addEventListenersToAnnotation,this),this.fire(t.RESET)},a.editModeChanged=function(e){var n=this._editModeAnnotation,i=this._getHoveredAnnotation();n&&n.updateDomainModel(),i&&i!=e&&i.setHovered(!1),e||this.setInteractiveEditMode(!1),this._editModeAnnotation=e,this._editModeAnnotation&&this._editModeAnnotation.setActive(!0),this.fire(t.EDIT_MODE_ANNOTATION_CHANGED,e,n)},a.updateHoverSelection=function(e,t){var n=o.find(this._annotations,s.invoker("isActive")),i=this._getHoveredAnnotation();n||(i&&t&&i.setHovered(!1),e.setHovered(t))},a._addEventListenersToAnnotation=function(e){e.on(n.CHANGED,this._fireChange,this)},a._fireChange=function(){this.fire(t.UPDATED)},a._getHoveredAnnotation=function(){return o.find(this._annotations,s.invoker("isHovered"))},a._updateAnnotationView=function(e,n,i,o,r){var s=r.getIsWithinVisibleRange();r.updateView(e,n,i,o,this.getTimeline()),s!==r.getIsWithinVisibleRange()&&this.fire(t.HIDDEN_OR_SHOWN,r,r.getIsWithinVisibleRange())},Object.seal(a),Object.seal(t)})),define("module/core/js/view/abstractpresentationcontroller",["require","module/core/js/util/functional"],(function(e){"use strict";function t(e){this._hotkeyMap={},this._eventBus=e}var n=e("module/core/js/util/functional"),i=t.prototype;return i._eventBus=null,i._presentationModel=null,i._visibleWindow=null,i._subView=null,i._moduleLoader=null,i._containerProvider=null,i._settingsManager=null,i._taskManager=null,i._hotkeyMap=null,i.withSubView=n.setter("_subView"),i.withModuleLoader=n.setter("_moduleLoader"),i.withContainerProvider=n.setter("_containerProvider"),i.withSettingsManager=n.setter("_settingsManager"),i.withTaskManager=n.setter("_taskManager"),i.withPresentationModel=n.setter("_presentationModel"),i.startListening=n.setter("_visibleWindow"),i.stopListening=function(){this._eventBus.unsubscribeAll(this),this._visibleWindow&&(this._visibleWindow.un(null,this),delete this._visibleWindow)},i.getPresentationModel=n.getter("_presentationModel"),i.getTaskManager=n.getter("_taskManager"),i.destroy=function(){this._visibleWindow?this.stopListening():this._eventBus.unsubscribeAll(this),this._presentationModel&&(this._presentationModel.destroy(),delete this._presentationModel)},Object.seal(i),t})),define("module/core/js/util/pointslopeline",["require"],(function(e){"use strict";function t(){}t.create=function(){return new t};var n=t.prototype;return n.slope=null,n.yIntercept=null,n.xInVerticalLine=null,n.fromPoints=function(e,t,n,i){var o=n-e,r=i-t;this.xInVerticalLine=0===o?e:NaN,this.slope=r/o,this.yIntercept=t-this.slope*e},n.fromPointAngle=function(e,t,n){var i=n>=0?1:-1;this.xInVerticalLine=90===Math.abs(n%180)?e:NaN,this.slope=90===Math.abs(n%180)?1/0*i:Math.tan(n*Math.PI/180),this.yIntercept=t-this.slope*e},n.calculateYFromX=function(e){return this.slope===Math.abs(1/0)?NaN:this.slope*e+this.yIntercept},n.calculateXFromY=function(e){return 0===this.slope?NaN:Math.abs(this.slope)===1/0?this.xInVerticalLine:(e-this.yIntercept)/this.slope},Object.seal(n),Object.seal(t)})),define("module/annotations/js/view/model/angleannotationpresentationmodel",["require","lodash","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/util/math","module/core/js/util/pointslopeline"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments),this._angle=e.getAngle()}var n=e("lodash"),i=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/geometry"),a=e("module/core/js/util/math"),l=e("module/core/js/util/pointslopeline");o.extend(t,i),t.create=function(e,n){return new t(e,n)};var u=t.prototype;return u._angle=null,u._defaultAngle=90,u._distanceToEditAnchor=null,u._maxSize=1,u.getAngle=r.getter("_angle"),u.hasAngle=n.constant(!0),u.setAngle=function(e){var t=a.normaliseAngle(e);this._angle!==t&&(this._angle=t,this.fire(i.CHANGED))},u.getDistanceToEditAnchor=r.getter("_distanceToEditAnchor"),u.setDistanceToEditAnchor=function(e){this._distanceToEditAnchor!=e&&(this._distanceToEditAnchor=e,this.fire(i.CHANGED))},u._hasAnyAttributeChanged=function(){return t.superclass._hasAnyAttributeChanged.call(this)||this._angle!==this._annotation.getAngle()},u._addAttributeChanges=function(){t.superclass._addAttributeChanges.call(this),this._annotation.setAngle(this._angle)},u._isAnnotationNew=function(){return!a.isNumber(this._annotation.getAngle())},u.positionInView=function(e,t,n,i,o){var r=i?i.getAngle():this.getAngle()||this._defaultAngle,s=o.x+this.getInitialXOffset(r),a=o.y+this.getInitialYOffset(r);this.setAnchor(n.asDate(e.invert(s)),t.invert(a)),this.setAngle(r)},u.getVisibleAnchor=function(e){var t,n,i,o,r=this.getAnchor(),s=this.getAngle(),u=l.create();return t=e.shiftDateToAvailableAccTime(r.timestamp,!0,0),i=t.getTime()!==r.timestamp.getTime(),i?(u.fromPointAngle(r.timestamp.getTime(),r.level,s),o=u.calculateYFromX(t.getTime()),n=a.isNumber(o)?o:r.level):n=r.level,{timestamp:t,level:n}},u.getInitialXOffset=n.constant(0),u.getInitialYOffset=n.constant(0),u.getIndexOfFirstUnsetAttribute=function(){return this.getAnchor(0).isSet()?null===this._angle?1:null:0},u._shouldUpdateBasedOnViewChange=n.constant(!0),u._calculateIsWithinVisibleRange=function(e,t,n){var i=this.getVisibleAnchor(n),o=e(n.asAccTime(i.timestamp,!0)),r=t(i.level),l=o+Math.cos(a.degreesToRadians(this.getAngle()))*this._maxSize,u=r+Math.sin(a.degreesToRadians(-this.getAngle()))*this._maxSize,c=e.range(),d=t.range();return s.segmentIntersectsRectangle(o,r,l,u,c[0],d[0],c[1],d[1])},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/model/arrowpresentationmodel",["require","module/core/js/util/class","module/annotations/js/view/model/angleannotationpresentationmodel","module/core/js/util/math"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/annotations/js/view/model/angleannotationpresentationmodel"),o=e("module/core/js/util/math");n.extend(t,i),t.create=function(e,n){return new t(e,n)},t.DEFAULT_DISTANCE_TO_EDIT_ANCHOR=97.5;var r=t.prototype;return r.getInitialXOffset=function(e){return-Math.cos(o.degreesToRadians(e))},r.getInitialYOffset=function(e){return-Math.sin(o.degreesToRadians(e))},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/model/channelpresentationmodel",["require","module/core/js/util/class","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/geometry"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/util/class"),i=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),o=e("module/core/js/util/geometry");n.extend(t,i);var r=t.prototype;return r._calculateIsWithinVisibleRange=function(e,t,n){var i=new Date(this.getAnchor(0).timestamp),r=this.getAnchor(0).level,s=new Date(this.getAnchor(1).timestamp),a=this.getAnchor(1).level,l=(a+r)/2,u=s,c=a+(this.getAnchor(2).level-l),d=i,h=r+(this.getAnchor(2).level-l),p=e.range(),m=t.range();return o.segmentIntersectsRectangle(e(n.asAccTime(i),!0),t(r),e(n.asAccTime(s),!0),t(a),p[0],m[0],p[1],m[1])||o.segmentIntersectsRectangle(e(n.asAccTime(u),!0),t(c),e(n.asAccTime(d),!0),t(h),p[0],m[0],p[1],m[1])},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/model/elliottwavepresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class","module/core/js/util/geometry","module/core/js/util/oop"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/core/js/util/geometry"),r=e("module/core/js/util/oop");i.extend(t,n);var s=t.prototype;return s.getLabels=r.abstractMethod,s._calculateIsWithinVisibleRange=function(e,t,n){return this.getAnchors().map(this._convertToXY.bind(null,e,t,n)).reduce(this._convertToLines,[]).some(this._linesAreVisible.bind(null,e.range(),t.range()))},s._convertToXY=function(e,t,n,i){return{x:e(n.asAccTime(i.timestamp,!0)),y:t(i.level)}},s._convertToLines=function(e,t,n,i){return i[n+1]?e.concat({x1:t.x,y1:t.y,x2:i[n+1].x,y2:i[n+1].y}):e},s._linesAreVisible=function(e,t,n){return o.segmentIntersectsRectangle(n.x1,n.y1,n.x2,n.y2,e[0],t[0],e[1],t[1])},Object.seal(s),Object.seal(t)})),define("module/annotations/js/view/model/elliottwave12345presentationmodel",["require","lodash","module/core/js/util/class","module/annotations/js/view/model/elliottwavepresentationmodel"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("lodash"),i=e("module/core/js/util/class"),o=e("module/annotations/js/view/model/elliottwavepresentationmodel");i.extend(t,o);var r=t.prototype;return r.getLabels=n.constant(["1","2","3","4","5"]),Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/model/elliottwaveabcpresentationmodel",["require","lodash","module/core/js/util/class","module/annotations/js/view/model/elliottwavepresentationmodel"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("lodash"),i=e("module/core/js/util/class"),o=e("module/annotations/js/view/model/elliottwavepresentationmodel");i.extend(t,o);var r=t.prototype;return r.getLabels=n.constant(["A","B","C"]),Object.seal(r),Object.seal(t)})),define("module/core/js/view/component/dialog/dialogevents",[],(function(){"use strict";return Object.freeze({VALUE_CHANGED:"VALUE_CHANGED",VALUE_ADDED:"VALUE_ADDED"})})),define("module/core/js/view/component/dialog/constraint/numericsettingconstraints",["require","module/core/js/util/functional","module/core/js/util/math"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/math"),o=t.prototype;return o.viewType="NUMERIC",o.min=null,o.max=null,o.precision=null,o.step=null,o.defaultValue=null,o.periodic=!1,o.withMin=n.setter("min"),o.withMax=n.setter("max"),o.withPrecision=n.setter("precision"),o.withStep=n.setter("step"),o.withDefaultValue=n.setter("defaultValue"),o.withPeriod=n.setter("periodic"),t.createFrom=function(e){return(new t).withMin(e.range.min).withMax(e.range.max).withStep(e.range.step||1).withPrecision(e.range.precision).withDefaultValue(e.defaultValue)},t.create=function(e){return new t(e)},t._valueWithinPeriod=function(e,t,n){var o=t-e;return e+i.mod(n-e,o)},o.constrain=function(e){var n,o,r=this.precision||this.step,s=i.floorToClosestMultiples(e,r);return n=i.isNumber(this.max)&&s>this.max,o=i.isNumber(this.min)&&s<this.min,(n||o)&&this.periodic?s=t._valueWithinPeriod(this.min,this.max,s):n?s=this.max:o&&(s=this.min),s},o.getTextForValue=function(e){return String(e)},Object.seal(o),Object.seal(t)})),define("module/core/js/view/component/dialog/control/numericsettingcontrol",["require","module/core/js/util/class","module/core/js/view/component/dialog/dialogevents","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/util/math","module/core/js/event/subscribable","module/core/js/util/touch","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n,i,o,s){this._allowEmpty=s,this._i18n=e,this._constraints=i,this._settingCategory=t,this._setting=n,this._lastSavedValue=parseFloat(o),this.lastValidValue=isNaN(o)?this._constraints.defaultValue:o.toString(),this.deferredCommitSetting=r.debounce(this.commitSetting,3e3),this._handleNewInput=r.debounce(this._handleNewInput.bind(this),300),this.commitSetting=this.commitSetting.bind(this),this._handleKeyInput=this._handleKeyInput.bind(this)}
var n=e("module/core/js/util/class"),i=e("module/core/js/view/component/dialog/dialogevents"),o=e("module/core/js/view/userinput/eventpropagation"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/math"),a=e("module/core/js/event/subscribable"),l=e("module/core/js/util/touch"),u=e("module/core/js/enum/zindexenum"),c=/-?[0-9]+/,d=/-?[0-9]+\.?[0-9]*/;n.extend(t,a),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var h=t.prototype;return h.dInputField=null,h.deferredCommitSetting=null,h._i18n=null,h._suffix=null,h._allowEmpty=!1,h.lastValidValue=null,h._dContainer=null,h._dDecreaseButton=null,h._dIncreaseButton=null,h._captureZoneDecrease=null,h._captureZoneIncrease=null,h._captureZoneManager=null,h._constraints=null,h._settingCategory=null,h._lastSavedValue=null,h._setting=null,h.withCaptureZoneManager=r.setter("_captureZoneManager"),h._showPlusAndMinusButtons=!0,h.withPlusAndMinusButtons=r.setter("_showPlusAndMinusButtons"),h.setSuffix=r.setter("_suffix"),h.destroy=function(){this.deferredCommitSetting.abort(),this._handleNewInput.abort(),this._stopListening(),this._dContainer.remove()},h.initDom=function(e){var t;return t=this._settingCategory&&this._setting?this._settingCategory+"-"+this._setting:this._setting?this._setting:this._settingCategory,this._dContainer=e.append("div").classed("setting",!0),this._settingCategory&&this._dContainer.classed(this._settingCategory,!0),this._setting&&this._dContainer.classed(this._setting,!0),this._i18n&&this._dContainer.append("span").text(this._i18n.get(t)).classed("settingName",!0),this._initInputField(),this._startListening(),this},h.enable=function(){return this.dInputField&&(this.dInputField.node().disabled=!1),this._captureZoneDecrease&&this._captureZoneDecrease.show(),this._captureZoneIncrease&&this._captureZoneIncrease.show(),this},h.disable=function(){return this.dInputField&&(this.dInputField.node().disabled=!0),this._captureZoneDecrease&&this._captureZoneDecrease.hide(),this._captureZoneIncrease&&this._captureZoneIncrease.hide(),this},h.show=function(){return this._dContainer.classed("hidden",!1),this.enable()},h.hide=function(){return this._dContainer.classed("hidden",!0),this.disable()},h.updateCaptureZones=function(){return this._captureZoneDecrease&&this._captureZoneDecrease.setDimensionsBasedOnElement(this._dDecreaseButton),this._captureZoneIncrease&&this._captureZoneIncrease.setDimensionsBasedOnElement(this._dIncreaseButton),this},h.validateSetting=function(e){var t,n=this._sanitizeValue(e);return""===e||!(!n||(t=parseFloat(n),s.floorToClosestMultiples(t,this._constraints.step)!==t))},h.commitSetting=function(){this.deferredCommitSetting.abort(),this._handleNewInput.abort();var e,t=parseFloat(this.lastValidValue);this.lastValidValue||this._allowEmpty?(e=this._constraints.constrain(t),this.updateInputField(e),e!==this._lastSavedValue&&(!isNaN(e)&&isNaN(this._lastSavedValue)&&this.fire(i.VALUE_ADDED),this._lastSavedValue=e,this.fire(i.VALUE_CHANGED,this._setting,e))):this.updateInputField(this._lastSavedValue)},h.updateInputField=function(e){e=this._sanitizeValue(e.toString()),this.lastValidValue=e,this.dInputField.node().value!=e&&(this.dInputField.node().value=e)},h.reset=function(){this.updateInputField(this._constraints.defaultValue),this.commitSetting()},h.requestFocus=function(){this.dInputField.node().focus()},h._createTapHandler=function(e,t){return this._captureZoneManager.createTapZone(e,u.DIALOG_CONTROLS,t,o.BLOCK_ALL)},h._startListening=function(){var e=this.dInputField.node();this._showPlusAndMinusButtons&&(this._captureZoneDecrease=this._createTapHandler(this._handleSettingDecreased.bind(this),10),this._captureZoneIncrease=this._createTapHandler(this._handleSettingIncreased.bind(this),10)),e.addEventListener("blur",this.commitSetting),e.addEventListener("keyup",this._handleKeyInput),e.addEventListener("input",this._handleNewInput),l.enableDefault(e),this.updateCaptureZones()},h._stopListening=function(){var e=this.dInputField.node();this._captureZoneDecrease&&(this._captureZoneDecrease.destroy(),this._captureZoneDecrease=null),this._captureZoneIncrease&&(this._captureZoneIncrease.destroy(),this._captureZoneIncrease=null),e.removeEventListener("blur",this.commitSetting),e.removeEventListener("keyup",this._handleKeyInput),e.removeEventListener("input",this._handleNewInput),l.cancelScrolling(e)},h._initInputField=function(){var e=this._dContainer.append("span").classed("numberFieldContainer",!0);this._showPlusAndMinusButtons&&(this._dDecreaseButton=e.append("span").classed("minusButton",!0).classed("decrease",!0)),this.dInputField=e.append("input").property({type:"number",value:this.lastValidValue}).attr({min:this._constraints.min,max:this._constraints.max,step:this._constraints.precision||this._constraints.step}).classed("value",!0).classed("numberInput",!0),this._suffix&&e.append("span").classed("suffix",!0).text("%"),this._showPlusAndMinusButtons&&(this._dIncreaseButton=e.append("span").classed("plusButton",!0).classed("increase",!0))},h._sanitizeValue=function(e){var t=this._constraints.step%1==0?c:d,n=e.match(t);return n?n[0]:null},h._changeSettings=function(e){e=e||"",this.validateSetting(e)?this.updateInputField(e):this.dInputField.node().value=this.lastValidValue},h._handleNewInput=function(){this._changeSettings(this.dInputField.node().value),this.commitSetting()},h._handleKeyInput=function(e){this._handleNewInput.abort();var t=this.dInputField.node().value;if(13===e.keyCode)e.target.blur();else{if(""==e.target.value&&189==e.keyCode)return;e.keyCode<58&&e.keyCode>47||8==e.keyCode||190==e.keyCode?("0"==t[0]&&t.length>1&&"."!=t[1]&&(t=t.substr(1)),this._changeSettings(t),this.deferredCommitSetting()):(this._changeSettings(t),this.deferredCommitSetting())}},h._handleSettingDecreased=function(){var e=parseFloat(this.lastValidValue)-this._constraints.step;e=isNaN(e)?this._constraints.max:e,e=s.floorToClosestMultiples(e,this._constraints.step),this._changeSettings(e.toString()),this.commitSetting()},h._handleSettingIncreased=function(){var e=parseFloat(this.lastValidValue)+this._constraints.step;e=isNaN(e)?this._constraints.min:e,e=s.floorToClosestMultiples(e,this._constraints.step),this._changeSettings(e.toString()),this.commitSetting()},Object.seal(h),Object.seal(t)})),define("module/core/js/view/valueformatter",["require","module/core/js/util/functional","module/core/js/util/math"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/math");t.create=function(){return new t};var o=t.prototype;return o._scalingFactor=1,o._decimalPlaces=null,o.getScalingFactor=n.getter("_scalingFactor"),o.getDecimalPlaces=n.getter("._decimalPlaces"),o.getStep=function(){return Math.pow(10,-1*this._decimalPlaces)},o.withScalingFactor=n.setter("_scalingFactor"),o.withDecimalPlaces=n.setter("_decimalPlaces"),o.scaleAndRoundPrice=function(e,t,n){return void 0===t&&(t=this._scalingFactor),void 0===n&&(n=this._decimalPlaces),e=i.roundFloatingPointError(e/t),null!==n&&(e=e.toFixed(n)),String(e)},Object.seal(o),Object.seal(t)})),define("module/core/js/view/component/checkboxwithinput",["require","module/core/js/util/class","module/core/js/view/component/dialog/dialogevents","module/core/js/util/functional","module/core/js/view/component/dialog/constraint/numericsettingconstraints","module/core/js/view/component/dialog/control/numericsettingcontrol","module/core/js/view/valueformatter","module/core/js/view/component/button"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/component/dialog/dialogevents"),o=e("module/core/js/util/functional"),r=e("module/core/js/view/component/dialog/constraint/numericsettingconstraints"),s=e("module/core/js/view/component/dialog/control/numericsettingcontrol"),a=e("module/core/js/view/valueformatter"),l=e("module/core/js/view/component/button");n.extend(t,l),t.create=function(){return new t};var u=t.prototype;return u._captureZoneManager=null,u._inputControl=null,u._inputCallback=null,u._inputValue=null,u._inputDefaultValue=null,u._inputId=null,u._suffix=null,u.withCaptureZoneManager=o.setter("_captureZoneManager"),u.withInputCallback=o.setter("_inputCallback"),u.withInputValue=o.setter("_inputValue"),u.withInputDefaultValue=o.setter("_inputDefaultValue"),u.withInputId=o.setter("_inputId"),u.setSuffix=o.setter("_suffix"),u.reset=function(){this._inputControl.reset(),this.setSelected(!0)},u.updateCaptureZone=function(){t.superclass.updateCaptureZone.call(this,this._dButton)},u.disable=function(){return t.superclass.disable.call(this),this._inputControl.disable(),this},u.initDom=function(e,n){t.superclass.initDom.call(this,e,n),this._dInput=this._dContainer.append("div").attr("class","inputContainer"),this._valueFormatter=a.create().withDecimalPlaces(1);var o=this._dInput.append("div").attr("class","setting-row"),l=r.create().withStep(this._valueFormatter.getStep()).withDefaultValue(this._inputDefaultValue);return this._inputControl=s.create(null,null,this._inputId,l,this._inputValue,!0).setSuffix(this._suffix).withPlusAndMinusButtons(!1).withCaptureZoneManager(this._captureZoneManager).initDom(o),this._inputControl.on(i.VALUE_CHANGED,this._inputCallback,this),this},u.destroy=function(){t.superclass.destroy.call(this),this._inputControl&&(this._inputControl.un(null,this),this._inputControl.destroy())},Object.seal(u),Object.seal(t)})),define("module/core/js/view/component/abstractbuttonlist",["require","module/core/js/util/array","module/core/js/view/component/button","module/core/js/util/functional","module/core/js/util/oop"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/array"),i=e("module/core/js/view/component/button"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/oop"),s=t.prototype;return s._buttons=null,s._currentValues=null,s._dContainer=null,s._getButtonClass=o.returns(null),s._getListClass=r.abstractMethod,s._onButtonClick=r.abstractMethod,s.getValues=o.getter("_currentValues"),s.initDom=function(e){return this._dContainer=e.append("div").classed(this._getListClass(),!0),this},s._createButton=function(e){return i.create().initDom(this._dContainer,this._getButtonClass()).setText(e.title).setId(e.value).setSelected(e.selected)},s.setData=function(e){return this._destroyButtons(),this._buttons=[],this._currentValues=[],e.forEach((function(e){this._buttons.push(this._createButton(e)),e.selected&&this._currentValues.push(e.value)}),this),this},s.startListening=function(e,t,n){return this._buttons&&this._buttons.forEach((function(i){i.startListening(e,function(e){this._onButtonClick.call(this,i),t(i)}.bind(this,i),n)}),this),this},s.updateCaptureZones=function(){o.invokeCall(this._buttons,"updateCaptureZone")},s._destroyButtons=function(){this._buttons&&(o.invokeCall(this._buttons,"destroy"),this._buttons=null)},s.destroy=function(){this._destroyButtons(),this._dContainer.remove(),this._dContainer=null},s.enable=function(e){this._buttons&&this._buttons.forEach((function(t){n.contains(e,t.getId())&&t.enable()}))},s.disable=function(e){this._buttons&&this._buttons.forEach((function(t){n.contains(e,t.getId())&&t.disable()}))},s.enableAll=function(){this._buttons&&o.invokeCall(this._buttons,"enable")},s.disableAll=function(){this._buttons&&o.invokeCall(this._buttons,"disable")},s.selectAll=function(){this._buttons&&o.invokeCall(this._buttons,"setSelected",!0)},Object.seal(s),Object.seal(t)})),define("module/core/js/view/component/checkboxlist",["require","module/core/js/util/functional","module/core/js/view/component/abstractbuttonlist","module/core/js/util/class"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("module/core/js/view/component/abstractbuttonlist"),o=e("module/core/js/util/class");t.create=function(){return new t},o.extend(t,i);var r=t.prototype;return r._getListClass=n.returns("checkboxList"),r._getButtonClass=n.returns("checkbox"),r._onButtonClick=function(e){var t=e.getId(),n=this._currentValues.indexOf(t);n>-1?(this._currentValues.splice(n,1),e.setSelected(!1)):(this._currentValues.push(t),e.setSelected(!0))},Object.seal(r),Object.seal(t)})),define("module/core/js/view/component/checkboxinputlist",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/component/checkboxwithinput","module/core/js/view/component/checkboxlist"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/view/component/checkboxwithinput"),r=e("module/core/js/view/component/checkboxlist");n.extend(t,r),t.create=function(){return new t};var s=t.prototype;return s._captureZoneManager=null,s._inputCallback=null,s.withCaptureZoneManager=i.setter("_captureZoneManager"),s.withInputCallback=i.setter("_inputCallback"),s.reset=function(){i.invokeCall(this._buttons,"reset")},s._createButton=function(e){return o.create().withInputValue(e.inputValue).withInputDefaultValue(e.inputDefaultValue).withInputId(e.id).withCaptureZoneManager(this._captureZoneManager).withInputCallback(this._inputCallback).setSuffix(e.suffix).initDom(this._dContainer,this._getButtonClass()).setId(e.id).setSelected(e.selected)},Object.seal(s),Object.seal(t)})),define("module/annotations/js/view/component/dialog/fibonacciconfigdialogcontent",["require","lodash","module/core/js/view/component/dialog/abstractdialogcontent","module/core/js/view/component/checkboxinputlist","module/core/js/util/class","module/core/js/util/functional","module/annotations/js/i18n","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,i,o,r,s,a){t.superclass.constructor.call(this,e,i,o,s),this._annotationPresentationModel=a,this._initialRatioSettings=n.cloneDeep(this._annotationPresentationModel.getRatioSettings())}var n=e("lodash"),i=e("module/core/js/view/component/dialog/abstractdialogcontent"),o=e("module/core/js/view/component/checkboxinputlist"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/annotations/js/i18n"),l=e("module/core/js/enum/zindexenum");r.extend(t,i),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var u=t.prototype;return u._initialRatioSettings=null,u._checkboxListContainer=null,u._checkboxList=null,u._enabledButtonsMap=null,u._annotationPresentationModel=null,u.initDom=function(e){var n=t.superclass.initDom.call(this,e);return this._enabledButtonsMap=Object.create(null),this._checkboxListContainer=e.append("div").attr("class","checkboxListContainer"),this._checkboxListContainer.append("text").attr("class","checkboxListLabel").text(a.get("LEVELS")),this._createCheckboxList(this._checkboxListContainer,this._annotationPresentationModel.getRatioSettings()),n},u.save=s.emptyChainable,u.revertChanges=function(){this._annotationPresentationModel.setRatioSettings(this._initialRatioSettings)},u.resetToDefaults=function(){this._annotationPresentationModel.resetToDefault(),this._checkboxList.reset()},u._sortCheckboxesData=function(e){var t,n,i=[],o=this._annotationPresentationModel.getCompulsoryRatioIndices()[1];for(t=0;t<o;t++)i.push(e[t]),n=o+t,e[n]&&i.push(e[n]);return i},u._createCheckboxList=function(e,t){var n,i=[],r=this._annotationPresentationModel.getDefaultRatioValues(),s=[];t.forEach(function(e,t){n=t.toString(),e.disabled?s.push(n):this._enabledButtonsMap[t]=e.value,i.push({id:n,value:n,inputValue:null===e.value?"":e.value,inputDefaultValue:r[t],selected:e.isVisible,suffix:"%"})}.bind(this)),i=this._sortCheckboxesData(i),this._checkboxList=o.create().withCaptureZoneManager(this._captureZoneManager).withInputCallback(this._handleInputUpdated.bind(this)).initDom(e).setData(i).startListening(this._captureZoneManager,this._handleSettingUpdated.bind(this),l.DIALOG_CONTROLS),this._checkboxList.disable(s)},u.enable=function(){return this._checkboxList.enable(Object.keys(this._enabledButtonsMap)),this},u.disable=function(){return this._checkboxList.disableAll(),this},u.updateCaptureZones=function(){return this._checkboxList.updateCaptureZones(),this},u.destroy=function(){this._checkboxList&&this._checkboxList.destroy(),this._checkboxListContainer&&this._checkboxListContainer.remove(),this._enabledButtonsMap=null,t.superclass.destroy.call(this)},u._handleSettingUpdated=function(e){this._annotationPresentationModel.changeLineVisibility(parseInt(e.getId(),10),e.isSelected())},u._handleInputUpdated=function(e,t){t=isNaN(t)?null:t,this._annotationPresentationModel.updateRatio(parseInt(e,10),t)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/model/abstractfibonaccipresentationmodel",["require","lodash","module/core/js/util/array","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class","module/annotations/js/view/component/dialog/fibonacciconfigdialogcontent","module/annotations/js/view/component/dialog/annotationstyledialogcontent","module/core/js/util/object","module/core/js/util/oop"],(function(e){"use strict";function t(e,i){t.superclass.constructor.apply(this,arguments),this._annotation=e,this._ratioSettings=n.cloneDeep(this.determineRatioSettings())}var n=e("lodash"),i=e("module/core/js/util/array"),o=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),r=e("module/core/js/util/class"),s=e("module/annotations/js/view/component/dialog/fibonacciconfigdialogcontent"),a=e("module/annotations/js/view/component/dialog/annotationstyledialogcontent"),l=e("module/core/js/util/object"),u=e("module/core/js/util/oop");r.extend(t,o),t.create=function(e,n){return new t(e,n)},t.SETTINGS_CHANGED="settingsChanged",t.RESIZING_GAP=20;var c=t.prototype;return c._ratioSettings=null,c.getSettingsDialogContent=n.constant([{name:"CONFIG",type:s},{name:"STYLE",type:a}]),c.getCompulsoryRatioIndices=u.abstractMethod,c.getDefaultRatioValues=u.abstractMethod,c._zeroLevel=u.abstractMethod,c._maxRatioLevel=u.abstractMethod,c._getStartAnchor=u.abstractMethod,c._getExtensionAnchor=u.abstractMethod,c.getLevelForRatio=function(e,t,n){return e+(t-e)*n*.01},c.getRatioSettings=function(){var e=this.getCompulsoryRatioIndices();return this._ratioSettings.map((function(t,o){return n.assign({disabled:i.contains(e,o)},t)}))},c.updateRatio=function(e,n){var i=this._ratioSettings[e];i.value!==n&&(i.value=n,this.fire(t.SETTINGS_CHANGED))},c._calculateIsWithinVisibleRange=function(e,t,n){var i=this._zeroLevel(),o=this._maxRatioLevel(),r=t(Math.max(i,o)),s=t(Math.min(i,o)),a=e(n.asAccTime(this._getLeftMostDate(),!0)),l=e(n.asAccTime(this._getRightMostDate(),!0)),u=e.range(),c=t.range();return c[0]<s&&r<c[1]&&u[0]<l&&a<u[1]},c._addAttributeChanges=function(){t.superclass._addAttributeChanges.call(this),this._annotation.setRatioSettings(n.cloneDeep(this._ratioSettings))},c._hasAnyAttributeChanged=function(){var e=this._annotation.getRatioSettings(),n=!1;if(!e&&this._ratioSettings)return!0;for(var i=0;i<this._ratioSettings.length;i++)if(this._ratioSettings[i].isVisible!==e[i].isVisible||this._ratioSettings[i].value!==e[i].value){n=!0;break}return t.superclass._hasAnyAttributeChanged.call(this)||n},c.getRatioValues=function(){return this._ratioSettings.filter((function(e){return e.isVisible&&null!==e.value})).map((function(e){return e.value}))},c.determineRatioSettings=function(){var e=this._annotation.getRatioSettings();return e||this._getDefaultRatioSettings()},c.changeLineVisibility=function(e,n){var i=this._ratioSettings[e];i.isVisible!==n&&(i.isVisible=n,this.fire(t.SETTINGS_CHANGED))},c.resetToDefault=function(){this.setRatioSettings(this._getDefaultRatioSettings())},c.setRatioSettings=function(e){this._ratioSettings=e,this.fire(t.SETTINGS_CHANGED)},c.getAttributes=function(){var e=this._annotation.getAttributes();return l.diff(e.ratios,this._ratioSettings)?{ratios:this._ratioSettings}:e},c._getLeftMostDate=function(){return this._getStartAnchor().timestamp.getTime()<this._getExtensionAnchor().timestamp.getTime()?this._getStartAnchor().timestamp:this._getExtensionAnchor().timestamp},c._getRightMostDate=function(){return this._getStartAnchor().timestamp.getTime()<this._getExtensionAnchor().timestamp.getTime()?this._getExtensionAnchor().timestamp:this._getStartAnchor().timestamp},c._getDefaultRatioSettings=function(){return this.getDefaultRatioValues().map((function(e){return{value:e,isVisible:!0}}))},Object.seal(c),Object.seal(t)})),define("module/annotations/js/view/model/fibonaccipresentationmodel",["require","lodash","module/annotations/js/view/model/abstractfibonaccipresentationmodel","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/model/abstractfibonaccipresentationmodel");e("module/core/js/util/class").extend(t,i),t.create=function(e,n){return new t(e,n)},t.RATIO_VALUES=[0,23.6,38.2,50,61.8,76.4,100,127.2,161.8,261.8,423.6];var o=t.prototype;return o.getDefaultRatioValues=n.constant(t.RATIO_VALUES),t.prototype.getCompulsoryRatioIndices=n.constant([0,6]),o._zeroLevel=function(){return this.getAnchor(0).timestamp.getTime()<this.getAnchor(1).timestamp.getTime()?this.getAnchor(1).level:this.getAnchor(0).level},o._maxRatioLevel=function(){var e=this._zeroLevel(),n=this.getAnchor(0).timestamp.getTime()<this.getAnchor(1).timestamp.getTime()?this.getAnchor(0).level:this.getAnchor(1).level;return this.getLevelForRatio(e,n,t.RATIO_VALUES[t.RATIO_VALUES.length-1])},o._getStartAnchor=function(){return this.getAnchor(0)},o._getExtensionAnchor=function(){return this.getAnchor(2)},Object.seal(o),Object.seal(t)})),define("module/annotations/js/view/model/fibonacciextensionpresentationmodel",["require","lodash","module/annotations/js/view/model/abstractfibonaccipresentationmodel","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("lodash"),i=e("module/annotations/js/view/model/abstractfibonaccipresentationmodel");e("module/core/js/util/class").extend(t,i),t.RATIO_VALUES=[0,23.6,38.2,50,61.8,76.4,100,161.8,261.8,423.6],t.prototype.getCompulsoryRatioIndices=n.constant([0,6]);var o=t.prototype;return o.getDefaultRatioValues=n.constant(t.RATIO_VALUES),o._zeroLevel=function(){return this.getAnchor(2).level},o._maxRatioLevel=function(){var e=this._zeroLevel(),n=e+(this.getAnchor(1).level-this.getAnchor(0).level);return this.getLevelForRatio(e,n,t.RATIO_VALUES[t.RATIO_VALUES.length-1])},o._getStartAnchor=function(){return this.getAnchor(1)},o._getExtensionAnchor=function(){return this.getAnchor(3)},Object.seal(o),Object.seal(t)})),define("module/annotations/js/view/component/dialog/gannangledialogcontent",["require","module/core/js/view/component/dialog/abstractdialogcontent","module/annotations/js/i18n","module/core/js/util/class","module/core/js/view/component/dialog/dialogevents","module/core/js/util/functional","module/core/js/view/component/dialog/constraint/numericsettingconstraints","module/core/js/view/component/dialog/control/numericsettingcontrol"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,r),this._annotationPresentationModel=s,this._initialAngle=Math.round(this._annotationPresentationModel.getAngle())}var n=e("module/core/js/view/component/dialog/abstractdialogcontent"),i=e("module/annotations/js/i18n"),o=e("module/core/js/util/class"),r=e("module/core/js/view/component/dialog/dialogevents"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/component/dialog/constraint/numericsettingconstraints"),l=e("module/core/js/view/component/dialog/control/numericsettingcontrol");o.extend(t,n),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var u=t.prototype;return u._angleControl=null,u._initialAngle=null,u._annotationPresentationModel=null,u.save=function(){this._angleControl.commitSetting(),this._annotationPresentationModel.updateDomainModel()},u.resetToDefaults=s.delegate("_angleControl","reset"),u.initDom=function(e){var n=t.superclass.initDom.call(this,e),o=e.append("div").attr("class","setting-row"),s=(new a).withMin(-180).withMax(180).withStep(1).withDefaultValue(45).withPeriod(!0);return this._angleControl=l.create(i,"GANN","angle",s,this._initialAngle).withCaptureZoneManager(this._captureZoneManager).initDom(o),this._angleControl.on(r.VALUE_CHANGED,this._handleSettingUpdated,this),n},u.updateCaptureZones=function(){return this._angleControl.updateCaptureZones(),this},u.destroy=function(){this._angleControl&&(this._angleControl.un(null,this),this._angleControl.destroy(),this._angleControl=null),t.superclass.destroy.apply(this,arguments)},u.revertChanges=function(){this._annotationPresentationModel.setAngle(parseFloat(this._initialAngle))},u._handleSettingUpdated=function(){this._annotationPresentationModel.setAngle(parseFloat(this._angleControl.lastValidValue))},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/model/gannpresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/annotations/js/view/model/angleannotationpresentationmodel","module/core/js/util/class","module/core/js/util/geometry","module/core/js/util/oop","module/core/js/util/functional","module/annotations/js/view/component/dialog/gannangledialogcontent","module/annotations/js/view/component/dialog/annotationstyledialogcontent","module/core/js/util/math"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments),this._createGannAngles(c.degreesToRadians(e.getAngle()))}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/annotations/js/view/model/angleannotationpresentationmodel"),o=e("module/core/js/util/class"),r=e("module/core/js/util/geometry"),s=e("module/core/js/util/oop"),a=e("module/core/js/util/functional"),l=e("module/annotations/js/view/component/dialog/gannangledialogcontent"),u=e("module/annotations/js/view/component/dialog/annotationstyledialogcontent"),c=e("module/core/js/util/math");o.extend(t,i),t.create=function(e,n){return new t(e,n)},t.GANN_LINE_SIZE=5e3,t.DEFAULT_DISTANCE_TO_EDIT_ANCHOR=150;var d=t.prototype;return d.getSettingsDialogContent=a.returns([{name:"CONFIG",type:l},{name:"STYLE",type:u}]),d._maxSize=t.GANN_LINE_SIZE,d._defaultAngle=45,d._getGradients=s.abstractMethod,d.getClassName=s.abstractMethod,d._gannAngles=null,d.getGannAngles=a.getter("_gannAngles"),d.setAngle=function(e){var t=c.normaliseAngle(e);this._angle!==t&&(this._angle=t,this._createGannAngles(c.degreesToRadians(this._angle)),this.fire(n.CHANGED))},d.getInitialXOffset=function(e){return-Math.cos(c.degreesToRadians(e))*t.DEFAULT_DISTANCE_TO_EDIT_ANCHOR/2},d.getInitialYOffset=function(e){return Math.sin(c.degreesToRadians(e))*t.DEFAULT_DISTANCE_TO_EDIT_ANCHOR/2},d._calculateIsWithinVisibleRange=function(e,n,i){var o,s,a,l=e(i.asAccTime(this.getAnchor().timestamp,!0)),u=n(this.getAnchor().level),d=e.range(),h=n.range();if(d[0]-l>t.GANN_LINE_SIZE||l-d[1]>t.GANN_LINE_SIZE)return!1;if(l-d[1]>0&&Math.abs(c.degreesToRadians(this._annotation.getAngle()))<Math.PI/2)return!1;for(a=0;a<this._gannAngles.length;a++)if(o=l+Math.cos(this._gannAngles[a])*t.GANN_LINE_SIZE,s=u+Math.sin(-this._gannAngles[a])*t.GANN_LINE_SIZE,r.segmentIntersectsRectangle(l,u,o,s,d[0],h[0],d[1],h[1]))return!0;return!1},d._createGannAngles=function(e){var t,n=Math.tan(e);for(this._gannAngles=[],t=0;t<this._getGradients().length;t++){var i=this._getGradients()[t]*n,o=Math.atan(i);Math.abs(e)>Math.PI/2&&(o+=Math.PI),this._gannAngles.push(o)}},Object.seal(d),Object.seal(t)})),define("module/annotations/js/view/model/gannfanpresentationmodel",["require","module/core/js/util/class","module/annotations/js/view/model/gannpresentationmodel"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/annotations/js/view/model/gannpresentationmodel");n.extend(t,i),t.create=function(e,n){return new t(e,n)};var o=t.prototype;return o.getClassName=function(){return"gannFan"},o._getGradients=function(){return[1/8,.25,1/3,.5,1,2,3,4,8]},Object.seal(o),Object.seal(t)})),define("module/annotations/js/view/model/gannlinepresentationmodel",["require","module/core/js/util/class","module/annotations/js/view/model/gannpresentationmodel"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/annotations/js/view/model/gannpresentationmodel");n.extend(t,i),t.create=function(e,n){return new t(e,n)};var o=t.prototype;return o.getClassName=function(){return"gannLine"},o._getGradients=function(){return[1]},Object.seal(o),Object.seal(t)})),define("module/annotations/js/view/model/headandshoulderspresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class","module/core/js/util/geometry"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/core/js/util/geometry");i.extend(t,n);var r=t.prototype;return r._calculateIsWithinVisibleRange=function(e,t,n){var i=this.getAnchors().map(this._convertToXY.bind(null,e,t,n));return this._linesAreVisible(i,e,t)},r._convertToXY=function(e,t,n,i){return{x:e(n.asAccTime(i.timestamp,!0)),y:t(i.level)}},r._linesAreVisible=function(e,t,n){return e.reduce(this._convertToLines,[]).some(this._lineIsVisible.bind(null,t.range(),n.range()))},r._convertToLines=function(e,t,n,i){return i[n+1]?e.concat({x1:t.x,y1:t.y,x2:i[n+1].x,y2:i[n+1].y}):e},r._lineIsVisible=function(e,t,n){return o.segmentIntersectsRectangle(n.x1,n.y1,n.x2,n.y2,e[0],t[0],e[1],t[1])},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/component/dialog/horizontallinedialogcontent",["require","module/core/js/view/component/dialog/abstractdialogcontent","module/annotations/js/i18n","module/core/js/util/class","module/core/js/view/component/dialog/dialogevents","module/core/js/util/functional","module/core/js/view/component/dialog/constraint/numericsettingconstraints","module/core/js/view/component/dialog/control/numericsettingcontrol"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,r),this._annotationPresentationModel=s,this._valueFormatter=this._annotationPresentationModel.getLevelValueFormatter(),this._resetValue=this._annotationPresentationModel.getAnchor().level}var n=e("module/core/js/view/component/dialog/abstractdialogcontent"),i=e("module/annotations/js/i18n"),o=e("module/core/js/util/class"),r=e("module/core/js/view/component/dialog/dialogevents"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/component/dialog/constraint/numericsettingconstraints"),l=e("module/core/js/view/component/dialog/control/numericsettingcontrol");o.extend(t,n),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var u=t.prototype;return u._levelControl=null,u._annotationPresentationModel=null,u._resetValue=null,u._valueFormatter=null,u.initDom=function(e){t.superclass.initDom.call(this,e);var n=e.append("div").attr("class","setting-row"),o=this._valueFormatter.scaleAndRoundPrice(this._resetValue),s=(new a).withStep(this._valueFormatter.getStep()).withDefaultValue(o);return this._levelControl=l.create(i,"HORIZONTAL_LINE","LEVEL",s,o).withCaptureZoneManager(this._captureZoneManager).initDom(n),this._levelControl.on(r.VALUE_CHANGED,this._handleSettingUpdated,this),this},u.revertChanges=function(){this._annotationPresentationModel.setAnchor(null,this._resetValue),this._levelControl.reset()},u.resetToDefaults=s.empty,u.save=s.delegate("_levelControl","commitSetting"),u.updateCaptureZones=function(){return this._levelControl.updateCaptureZones(),this},u.destroy=function(){this._levelControl&&(this._levelControl.un(null,this),this._levelControl.destroy(),this._levelControl=null),t.superclass.destroy.apply(this,arguments)},
u._handleSettingUpdated=function(){var e=parseFloat(this._levelControl.lastValidValue)*this._valueFormatter.getScalingFactor();this._annotationPresentationModel.setAnchor(null,e)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/model/horizontallinepresentationmodel",["require","lodash","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/annotations/js/view/component/dialog/horizontallinedialogcontent","module/annotations/js/view/component/dialog/annotationstyledialogcontent","module/core/js/view/valueformatter"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments),this._levelValueFormatter=(new u).withScalingFactor(this.getSubViewScalingFactor()).withDecimalPlaces(this._annotationsPresentationModel.getInstrumentModel().getInstrumentModelInfo().decimalPlaces)}var n=e("lodash"),i=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/annotations/js/view/component/dialog/horizontallinedialogcontent"),l=e("module/annotations/js/view/component/dialog/annotationstyledialogcontent"),u=e("module/core/js/view/valueformatter");r.extend(t,i),t.POPUP_VISIBLE_CHANGED="POPUP_VISIBLE_CHANGED",t.create=function(e,n){return new t(e,n)};var c=t.prototype;return c._levelValueFormatter=null,c.getLevelValueFormatter=s.getter("_levelValueFormatter"),c.getSettingsDialogContent=n.constant([{name:"CONFIG",type:a},{name:"STYLE",type:l}]),c.positionInView=function(e,t,n,i,o){this.setAnchor(null,t.invert(o.y))},c._shouldUpdateBasedOnViewChange=function(e,t){return e&o.RESIZED||t!==o.STATIC},c.getIndexOfFirstUnsetAttribute=function(){return null!==this._anchors[0].level?null:0},c._calculateIsWithinVisibleRange=function(e,t,n){var i=t.range(),o=t(this.getAnchor().level);return o>i[0]&&o<i[1]},Object.seal(c),Object.seal(t)})),define("module/annotations/js/view/model/ovalpresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class","module/core/js/util/geometry"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/core/js/util/geometry");i.extend(t,n),t.DEFAULT_RADIUS=25;var r=t.prototype;return r.positionInView=function(e,n,i,r,s){var a,l,u;r?(a={x:e(i.asAccTime(r.getAnchor(0).timestamp,!0)),y:n(r.getAnchor(0).level)},u={x:e(i.asAccTime(r.getAnchor(1).timestamp,!0)),y:n(r.getAnchor(1).level)},l={x:s.x-a.x,y:s.y-a.y},u=o.movePointBy(u,l),a=o.movePointBy(a,l)):(a=s,u=o.movePointBy(s,{x:t.DEFAULT_RADIUS,y:t.DEFAULT_RADIUS})),this.setAnchor(i.asDate(e.invert(a.x)),n.invert(a.y),0),this.setAnchor(i.asDate(e.invert(u.x)),n.invert(u.y),1)},r._calculateIsWithinVisibleRange=function(e,t,n){var i,r,s,a,l,u=e.range(),c=t.range();return i={x:e(n.asAccTime(this.getAnchor(0).timestamp,!0)),y:t(this.getAnchor(0).level)},r={x:e(n.asAccTime(this.getAnchor(1).timestamp,!0)),y:t(this.getAnchor(1).level)},a=Math.abs(r.x-i.x),l=Math.abs(r.y-i.y),s=o.movePointBy(i,{x:-a,y:-l}),o.rectanglesIntersect({x1:s.x,y1:s.y,x2:s.x+2*a,y2:s.y+2*l},{x1:u[0],y1:c[0],x2:u[1],y2:c[1]})},Object.seal(r),Object.seal(t)})),define("module/core/js/util/lineclipping",[],(function(){"use strict";var e={};return e.POSITION={INSIDE:0,LEFT:1,RIGHT:2,BOTTOM:4,TOP:8},e._computeOutCode=function(t,n,i,o,r,s){var a=e.POSITION.INSIDE;return t<i?a|=e.POSITION.LEFT:t>o&&(a|=e.POSITION.RIGHT),n<r?a|=e.POSITION.BOTTOM:n>s&&(a|=e.POSITION.TOP),a},e._clipLineToRectangle=function(t,n,i,o,r,s,a,l){for(var u,c,d,h=e._computeOutCode(t,n,r,s,a,l),p=e._computeOutCode(i,o,r,s,a,l),m=!1;;){if(!(h|p)){m=!0;break}if(h&p)break;d=h||p,d&e.POSITION.TOP?(u=t+(i-t)*(l-n)/(o-n),c=l):d&e.POSITION.BOTTOM?(u=t+(i-t)*(a-n)/(o-n),c=a):d&e.POSITION.RIGHT?(c=n+(o-n)*(s-t)/(i-t),u=s):d&e.POSITION.LEFT&&(c=n+(o-n)*(r-t)/(i-t),u=r),d==h?(t=u,n=c,h=e._computeOutCode(t,n,r,s,a,l)):(i=u,o=c,p=e._computeOutCode(i,o,r,s,a,l))}return m?[{x:t,y:n},{x:i,y:o}]:[]},e.clipLineToRectangle=function(t,n,i,o){return e._clipLineToRectangle(t.x,t.y,n.x,n.y,Math.min(i.x,o.x),Math.max(i.x,o.x),Math.min(i.y,o.y),Math.max(i.y,o.y))},e.clipPathToRectangle=function(t,n,i){var o,r,s,a=[];for(r=0;r<t.length-1;r++)o=e.clipLineToRectangle(t[r],t[r+1],n,i),2===o.length&&(a.push(o[0]),s=o[1]);return s&&a.push(s),a},Object.seal(e)})),define("module/annotations/js/view/model/pointtopointpresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class","module/core/js/ext/d3","module/core/js/util/geometry","module/core/js/util/lineclipping"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/core/js/ext/d3"),r=e("module/core/js/util/geometry"),s=e("module/core/js/util/lineclipping");i.extend(t,n);var a=t.prototype;return a.getFirstAnchorCoordinates=function(e,t,n){var i=null;return null!==this.getAnchor().level&&(i={x:t(e.asAccTime(this.getAnchor().timestamp,!0)),y:n(this.getAnchor().level)}),i},a.getLineCoordinates=function(e,t,n){var i,o,r,a,l,u;return u=this._getVisibleAnchors(e),i=t(e.asAccTime(u.anchorOne.timestamp,!0)),r=t(e.asAccTime(u.anchorTwo.timestamp,!0)),o=n(u.anchorOne.level),a=n(u.anchorTwo.level),l=s.clipLineToRectangle({x:i,y:o},{x:r,y:a},{x:0,y:0},{x:t.range()[1],y:n.range()[1]}),l.length?{x1:l[0].x,x2:l[1].x,y1:l[0].y,y2:l[1].y}:{x1:-1,x2:-1,y1:-1,y2:-1}},a._getVisibleAnchors=function(e){var t,n,i,r=this.getAnchor(0),s=r.level,a=this.getAnchor(1),l=a.level;return i=o.scale.linear().domain([r.timestamp.getTime(),a.timestamp.getTime()]).range([r.level,a.level]),t=e.shiftDateToAvailableAccTime(r.timestamp,!0,0),n=e.shiftDateToAvailableAccTime(a.timestamp,!0,1),t.getTime()!==n.getTime()&&(s=i(t.getTime()),l=i(n.getTime())),{anchorOne:{timestamp:t,level:s},anchorTwo:{timestamp:n,level:l}}},a._calculateIsWithinVisibleRange=function(e,t,n){var i=this._getVisibleAnchors(n);return r.segmentIntersectsRectangle(e(n.asAccTime(i.anchorOne.timestamp),!0),t(i.anchorOne.level),e(n.asAccTime(i.anchorTwo.timestamp),!0),t(i.anchorTwo.level),e.range()[0],t.range()[0],e.range()[1],t.range()[1])},Object.seal(a),Object.seal(t)})),define("module/annotations/js/view/model/rectanglepresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel");e("module/core/js/util/class").extend(t,n);var i=t.prototype;return i._calculateIsWithinVisibleRange=function(e,t,n){var i=e.range(),o=t.range(),r=t(Math.max(this.getAnchor(0).level,this.getAnchor(1).level)),s=t(Math.min(this.getAnchor(0).level,this.getAnchor(1).level)),a=e(n.asAccTime(this._getLeftAnchor().timestamp,!0)),l=e(n.asAccTime(this._getRightAnchor().timestamp,!0));return o[0]<s&&r<o[1]&&i[0]<l&&a<i[1]},i._getLeftAnchor=function(){return this.getAnchor(0).timestamp.getTime()<this.getAnchor(1).timestamp.getTime()?this.getAnchor(0):this.getAnchor(1)},i._getRightAnchor=function(){return this.getAnchor(0).timestamp.getTime()<this.getAnchor(1).timestamp.getTime()?this.getAnchor(1):this.getAnchor(0)},Object.seal(i),Object.seal(t)})),define("module/annotations/js/view/component/dialog/textstyledialogcontent",["require","module/annotations/js/view/component/dialog/annotationstyledialogcontent","module/core/js/util/class","module/annotations/js/i18n","module/colour-customisation/js/view/component/stylingwidget"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,o,r,s)}var n=e("module/annotations/js/view/component/dialog/annotationstyledialogcontent"),i=e("module/core/js/util/class"),o=e("module/annotations/js/i18n"),r=e("module/colour-customisation/js/view/component/stylingwidget");i.extend(t,n),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var s=t.prototype;return s._generateWidgets=function(e,t,n){return[r.create(e.border,this._handleBorderChange.bind(this),this._taskManager).setCheckboxAvailable(!0).initDom(n,this._eventBus,this._captureZoneManager,this._dialog,o.get("BORDER"),null,e.border.isVisible),r.create(e.background,this._handleBackgroundStyle.bind(this),this._taskManager).setCheckboxAvailable(!0).initDom(n,this._eventBus,this._captureZoneManager,this._dialog,o.get("BACKGROUND"),null,e.background.isVisible)]},s._handleBackgroundStyle=function(e,t){var n=this._annotationPresentationModel.getStyle();n[e]=t,n.background[e]=t,this._annotationPresentationModel.setStyle(n)},s._handleBorderChange=function(e,t){var n=this._annotationPresentationModel.getStyle();n.border[e]=t,this._annotationPresentationModel.setStyle(n)},Object.seal(s),Object.seal(t)})),define("module/core/js/view/component/characterlimitedtextarea",["require","module/core/js/util/touch","module/core/js/util/functional"],(function(e){"use strict";function t(e,t,n,i){this._rows=e,this._cols=t,this._maxChars=n,this._maxCharsText=i,this._blockedHotkeys=[],this._handleKeyUp=this._handleKeyUp.bind(this)}var n=e("module/core/js/util/touch"),i=e("module/core/js/util/functional");t.create=function(e,n,i,o){return new t(e,n,i,o)};var o=t.prototype;return o._rows=0,o._cols=0,o._maxChars=0,o._maxCharsText=null,o._dTextAreaContainer=null,o._dTextArea=null,o._dCharactersRemainingContainer=null,o._dCharactersRemaining=null,o._blockedHotkeys=null,o._dContainer=null,o.setHotkeysToBlock=i.setter("_blockedHotkeys"),o.initDom=function(e){return this._dContainer=e,this._dTextAreaContainer=e.append("div").classed("charLimitedTextAreaContainer",!0),n.enableDefault(this._dTextAreaContainer.node()),this._dTextArea=this._dTextAreaContainer.append("div").append("textarea").classed("charLimitedTextArea",!0).attr("rows",this._rows).attr("cols",this._cols),this._createCharactersRemainingSection(),this._dContainer.node().addEventListener("keyup",this._handleKeyUp),this},o._handleKeyUp=function(e){this._blockedHotkeys.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation())},o._createCharactersRemainingSection=function(){this._dCharactersRemainingContainer=this._dTextAreaContainer.append("div"),this._dCharactersRemainingContainer.append("span").classed("charsRemainingLabel",!0).text(this._maxCharsText),this._dCharactersRemaining=this._dCharactersRemainingContainer.append("span").classed("charsRemainingNo",!0),this._dTextArea.on("keyup",this._charactersRemainingInputListener.bind(this)),this._dTextArea.on("blur",this._charactersRemainingInputListener.bind(this))},o._charactersRemainingInputListener=function(){var e=this._dTextArea.node();/^[0-9]+$/.test(e.maxLength)?this._clipToLength(e.maxLength):this._clipToLength(this._maxChars),this._setCharsRemaining()},o._clipToLength=function(e){var t,n=this._dTextArea.property("value");n.length>e&&(t=n.substr(0,e),this._dTextArea.property("value",t))},o.setText=function(e){var t=e.substr(0,this._maxChars);return this._dTextArea.property("value",t),this._setCharsRemaining(t),this},o._setCharsRemaining=function(){var e=this._dTextArea.property("value");this._dCharactersRemaining.text(this._maxChars-e.length)},o.getText=function(){return this._dTextArea.property("value")},o.show=function(){return this._dTextAreaContainer.classed("hidden",!1),this},o.hide=function(){return this._dTextAreaContainer.classed("hidden",!0),this},o.destroy=function(){this._dContainer.node().removeEventListener("keyup",this._handleKeyUp),this._dTextAreaContainer&&(n.cancelScrolling(this._dTextAreaContainer.node()),this._dTextAreaContainer.remove(),this._dTextAreaContainer=null)},Object.seal(o),Object.seal(t)})),define("module/annotations/js/view/component/dialog/textannotationdialogcontent",["require","module/core/js/view/component/dialog/abstractdialogcontent","module/annotations/js/i18n","module/core/js/view/component/characterlimitedtextarea","module/core/js/util/class","module/core/js/util/functional","module/core/js/enum/hotkeyenum"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,r),this._presentationModel=s}var n=e("module/core/js/view/component/dialog/abstractdialogcontent"),i=e("module/annotations/js/i18n"),o=e("module/core/js/view/component/characterlimitedtextarea"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/enum/hotkeyenum");r.extend(t,n),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)},t.DONE="DONE",t.DIMENSIONS=Object.freeze({cols:30,rows:5}),t.MAX_CHARS=250;var l=t.prototype;return l._presentationModel=null,l._textArea=null,l.initDom=function(e){return t.superclass.initDom.call(this,e),this._textArea=o.create(t.DIMENSIONS.rows,t.DIMENSIONS.cols,t.MAX_CHARS,i.get("CHARS_REMAINING")+" ").initDom(e).setHotkeysToBlock([a.ENTER]).setText(this._presentationModel.getUserText()),this},l.show=function(){return this._textArea.show(),t.superclass.show.call(this)},l.hide=function(){return this._textArea.hide(),t.superclass.hide.call(this)},l.destroy=function(){this._presentationModel&&0===this._presentationModel.getUserText().trim().length&&this._eventBus.publish("annotations/delete"),this._textArea&&(this._textArea.destroy(),this._textArea=null),t.superclass.destroy.call(this)},l.revertChanges=s.empty,l.save=function(){var e=this._textArea.getText();this._presentationModel.setUserText(e),e.trim().length>0&&this._presentationModel.updateDomainModel(),this._presentationModel.fire(t.DONE)},l.resetToDefaults=s.empty,Object.seal(l),Object.seal(t)})),define("module/annotations/js/view/model/textpresentationmodel",["require","lodash","module/annotations/js/view/model/abstractannotationpresentationmodel","module/annotations/js/view/component/dialog/textstyledialogcontent","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/annotations/js/view/component/dialog/textannotationdialogcontent"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments),this._text=e.userText}var n=e("lodash"),i=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),o=e("module/annotations/js/view/component/dialog/textstyledialogcontent"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/math"),l=e("module/annotations/js/view/component/dialog/textannotationdialogcontent");r.extend(t,i),t.TEXT_CHANGED="TEXT_CHANGED",t.create=function(e,n){return new t(e,n)};var u=t.prototype;return u.annotationHeight=null,u.annotationWidth=null,u._text="",u.getUserText=s.getter("_text"),u.setUserText=function(e){e!==this._text&&(this._text=e,this.fire(t.TEXT_CHANGED,this._text))},u.getResolution=function(){return null},u.getSettingsDialogContent=n.constant([{name:"CONFIG",type:l},{name:"STYLE",type:o}]),u.positionInView=function(e,t,n,i,o){var r,s;i?(r=o.x-i.annotationWidth/2,s=o.y-i.annotationHeight/2):(r=o.x,s=o.y),this.setAnchor(n.asDate(e.invert(r)),t.invert(s))},u._hasAnyAttributeChanged=function(){return t.superclass._hasAnyAttributeChanged.call(this)||this._text!==this._annotation.userText},u._addAttributeChanges=function(){t.superclass._addAttributeChanges.call(this),this._annotation.userText=this._text},u._calculateIsWithinVisibleRange=function(e,t,n){var i,o,r=t(this.getAnchor().level),s=n.isDateValid(this._annotation.getAnchor().timestamp);return!!s&&(i=n.asAccTime(this._annotation.getAnchor().timestamp,!0),o=e(i),a.between(r+this.annotationHeight,t.range()[0],t.range()[1])&&a.between(o+this.annotationWidth,e.range()[0],e.range()[1]))},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/model/trendlinepresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class","module/core/js/ext/d3","module/core/js/util/geometry"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/core/js/ext/d3"),r=e("module/core/js/util/geometry");i.extend(t,n);var s=t.prototype;return s.setIsWithinVisibleRange=function(e,n,i){this._adjustAnchors(i),t.superclass.setIsWithinVisibleRange.apply(this,arguments)},s._calculateIsWithinVisibleRange=function(e,t,n){var i=e(n.asAccTime(this.getAnchor(0).timestamp,!0)),o=t(this.getAnchor(0).level),s=e(n.asAccTime(this.getAnchor(1).timestamp,!0)),a=t(this.getAnchor(1).level),l=e.range()[1],u=t.range()[1];return 2==r.pointToPointLineRectangleIntersection(i,o,s,a,0,0,l,u).length},s._adjustAnchors=function(e){var t,n=this.getAnchor(0),i=this.getAnchor(1);e.hasIntervals()&&(t=o.scale.linear().domain([n.timestamp.getTime(),i.timestamp.getTime()]).range([n.level,i.level]),n.timestamp=e.shiftDateToAvailableAccTime(n.timestamp,!0,0),i.timestamp=e.shiftDateToAvailableAccTime(i.timestamp,!0,1),n.timestamp.getTime()!==i.timestamp.getTime()&&(n.level=t(n.timestamp.getTime()),i.level=t(i.timestamp.getTime())))},Object.seal(s),Object.seal(t)})),define("module/annotations/js/view/model/trianglepresentationmodel",["require","module/core/js/util/class","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/geometry"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/util/class"),i=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),o=e("module/core/js/util/geometry");n.extend(t,i);var r=t.prototype;return r._calculateIsWithinVisibleRange=function(e,t,n){var i=e(n.asAccTime(this.getAnchor(0).timestamp),!0),r=e(n.asAccTime(this.getAnchor(1).timestamp),!0),s=e(n.asAccTime(this.getAnchor(2).timestamp),!0),a=t(this.getAnchor(0).level),l=t(this.getAnchor(1).level),u=t(this.getAnchor(2).level),c=e.range(),d=t.range();return o.segmentIntersectsRectangle(i,a,r,l,c[0],d[0],c[1],d[1])||o.segmentIntersectsRectangle(r,l,s,u,c[0],d[0],c[1],d[1])||o.segmentIntersectsRectangle(s,u,i,a,c[0],d[0],c[1],d[1])},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/model/pitchforkpresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/util/class","module/core/js/util/geometry"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/core/js/util/geometry");i.extend(t,n);var r=t.prototype;return r._calculateIsWithinVisibleRange=function(e,t,n){var i=e.range(),r=t.range(),s={x:e(n.asAccTime(this._anchors[0].timestamp,!0)),y:t(this._anchors[0].level)},a={x:e(n.asAccTime(this._anchors[1].timestamp,!0)),y:t(this._anchors[1].level)},l={x:e(n.asAccTime(this._anchors[2].timestamp,!0)),y:t(this._anchors[2].level)},u={x:e(n.asAccTime(this._anchors[3].timestamp,!0)),y:t(this._anchors[3].level)},c={x:(l.x+a.x)/2,y:(l.y+a.y)/2},d=o.distancePointToPoint(c.x,c.y,u.x,u.y),h=Math.atan2(s.y-c.y,c.x-s.x),p=Math.cos(h)*d,m=Math.sin(h)*d,f=o.segmentIntersectsRectangle(s.x,s.y,u.x,u.y,i[0],r[0],i[1],r[1]),_=o.segmentIntersectsRectangle(a.x,a.y,a.x+p,a.y-m,i[0],r[0],i[1],r[1]),g=o.segmentIntersectsRectangle(l.x,l.y,l.x+p,l.y-m,i[0],r[0],i[1],r[1]);return f||_||g},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/model/verticallinepresentationmodel",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/core/js/view/axisconstants","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/core/js/view/axisconstants");e("module/core/js/util/class").extend(t,n),t.create=function(e,n){return new t(e,n)};var o=t.prototype;return o.positionInView=function(e,t,n,i,o){var r=e.invert(o.x);this.setAnchor(n.asDate(r))},o.getIndexOfFirstUnsetAttribute=function(){return null!==this._anchors[0].timestamp?null:0},o._isAnnotationNew=function(){return!this._annotation.getAnchor().timestamp},o._calculateIsWithinVisibleRange=function(e,t,n){var i,o,r=n.isDateValid(this.getAnchor().timestamp),s=e.range();return!!r&&(i=n.asAccTime(this.getAnchor().timestamp,!0),(o=e(i))>s[0]&&o<s[1])},o._shouldUpdateBasedOnViewChange=function(e,t){return t===i.RESIZED||e!==i.STATIC},Object.seal(o),Object.seal(t)})),define("module/annotations/js/view/factory/annotationpresentationmodelfactory",["require","module/annotations/js/model/annotationtypeenum","module/annotations/js/view/model/arrowpresentationmodel","module/annotations/js/view/model/channelpresentationmodel","module/annotations/js/view/model/elliottwave12345presentationmodel","module/annotations/js/view/model/elliottwaveabcpresentationmodel","module/annotations/js/view/model/fibonaccipresentationmodel","module/annotations/js/view/model/fibonacciextensionpresentationmodel","module/annotations/js/view/model/gannfanpresentationmodel","module/annotations/js/view/model/gannlinepresentationmodel","module/annotations/js/view/model/headandshoulderspresentationmodel","module/annotations/js/view/model/horizontallinepresentationmodel","module/annotations/js/view/model/ovalpresentationmodel","module/annotations/js/view/model/pointtopointpresentationmodel","module/annotations/js/view/model/rectanglepresentationmodel","module/annotations/js/view/model/textpresentationmodel","module/annotations/js/view/model/trendlinepresentationmodel","module/annotations/js/view/model/trianglepresentationmodel","module/annotations/js/view/model/pitchforkpresentationmodel","module/annotations/js/view/model/verticallinepresentationmodel"],(function(e){"use strict";function t(){}var n=e("module/annotations/js/model/annotationtypeenum"),i=e("module/annotations/js/view/model/arrowpresentationmodel"),o=e("module/annotations/js/view/model/channelpresentationmodel"),r=e("module/annotations/js/view/model/elliottwave12345presentationmodel"),s=e("module/annotations/js/view/model/elliottwaveabcpresentationmodel"),a=e("module/annotations/js/view/model/fibonaccipresentationmodel"),l=e("module/annotations/js/view/model/fibonacciextensionpresentationmodel"),u=e("module/annotations/js/view/model/gannfanpresentationmodel"),c=e("module/annotations/js/view/model/gannlinepresentationmodel"),d=e("module/annotations/js/view/model/headandshoulderspresentationmodel"),h=e("module/annotations/js/view/model/horizontallinepresentationmodel"),p=e("module/annotations/js/view/model/ovalpresentationmodel"),m=e("module/annotations/js/view/model/pointtopointpresentationmodel"),f=e("module/annotations/js/view/model/rectanglepresentationmodel"),_=e("module/annotations/js/view/model/textpresentationmodel"),g=e("module/annotations/js/view/model/trendlinepresentationmodel"),v=e("module/annotations/js/view/model/trianglepresentationmodel"),y=e("module/annotations/js/view/model/pitchforkpresentationmodel"),M=e("module/annotations/js/view/model/verticallinepresentationmodel");return t._presentationModelsMap={},t._presentationModelsMap[n.ARROW]=i,t._presentationModelsMap[n.CHANNEL]=o,t._presentationModelsMap[n.ELLIOTT_WAVE]=r,t._presentationModelsMap[n.ELLIOTT_WAVE_ABC]=s,t._presentationModelsMap[n.FIBONACCI]=a,t._presentationModelsMap[n.FIBONACCI_EXTENSION]=l,t._presentationModelsMap[n.GANN_FAN]=u,t._presentationModelsMap[n.GANN_LINE]=c,t._presentationModelsMap[n.HEAD_AND_SHOULDERS]=d,t._presentationModelsMap[n.HORIZONTAL_LINE]=h,t._presentationModelsMap[n.OVAL]=p,t._presentationModelsMap[n.PITCHFORK]=y,t._presentationModelsMap[n.POINT_TO_POINT]=m,t._presentationModelsMap[n.RECTANGLE]=f,t._presentationModelsMap[n.TEXT]=_,t._presentationModelsMap[n.TREND_LINE]=g,t._presentationModelsMap[n.TRIANGLE]=v,t._presentationModelsMap[n.VERTICAL_LINE]=M,Object.seal(t._presentationModelsMap),t.create=function(e,n){return new(0,t._presentationModelsMap[e.getType()])(e,n)},Object.seal(t)})),define("module/core/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"Daten sind indikativ",BUTTON_OK:"OK",BUTTON_CANCEL:"Abbrechen",BUTTON_APPLY:"Verwenden",BUTTON_RESET_TO_DEFAULTS:"Auf Grundeinstellungen zurücksetzen",SAVE_SETTINGS:"Einstellungen speichern"},en:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"Data is indicative",BUTTON_OK:"OK",BUTTON_CANCEL:"Cancel",BUTTON_APPLY:"Apply",BUTTON_RESET_TO_DEFAULTS:"Reset to defaults",SAVE_SETTINGS:"Save settings"},en_US:{"major-tick-date-format-DAY":"ddd MMM D","major-tick-date-format-WEEK":"ddd MMM D","major-tick-date-format-OPEN":"ddd MMM D H:mm"},es:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"Datos indicativos",BUTTON_OK:"OK",BUTTON_CANCEL:"Cancelar",BUTTON_APPLY:"Aplicar",BUTTON_RESET_TO_DEFAULTS:"Volver a configuración por defecto",SAVE_SETTINGS:"Guardar preferencias"},fr:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"Valeur à titre indicatif",BUTTON_OK:"OK",BUTTON_CANCEL:"Annuler",BUTTON_APPLY:"Appliquer",BUTTON_RESET_TO_DEFAULTS:"Réinitialiser les valeurs par défaut",SAVE_SETTINGS:"Enregistrer les réglages"},it:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"I dati sono indicativi",BUTTON_OK:"OK",BUTTON_CANCEL:"Annulla",BUTTON_APPLY:"Seleziona",BUTTON_RESET_TO_DEFAULTS:"Ripristinare le impostazioni predefinite",SAVE_SETTINGS:"Salva impostazioni"},ja:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd MMM D","major-tick-date-format-WEEK":"ddd MMM D","major-tick-date-format-MONTH":"YYYY MMM","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd MMM D H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"チャートデータは参考レートです",BUTTON_OK:"OK",BUTTON_CANCEL:"キャンセル",BUTTON_APPLY:"選択",BUTTON_RESET_TO_DEFAULTS:"デフォルト設定／リセット",SAVE_SETTINGS:"設定を保存"},nl:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"Data is Indicatief",BUTTON_OK:"OK",BUTTON_CANCEL:"Annuleer",BUTTON_APPLY:"Toepassen",BUTTON_RESET_TO_DEFAULTS:"Herzetten naar standaardinstellingen",SAVE_SETTINGS:"Instellingen opslaan"},no:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"Data er indikative",BUTTON_OK:"OK",BUTTON_CANCEL:"Kanseller",BUTTON_APPLY:"Bruk",BUTTON_RESET_TO_DEFAULTS:"Tilbakestill til standard",SAVE_SETTINGS:"Lagre innstillinger"},pt:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss",
"minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"Os dados são indicativos",BUTTON_OK:"OK",BUTTON_CANCEL:"Cancelar",BUTTON_APPLY:"Aplicar",BUTTON_RESET_TO_DEFAULTS:"Reset",SAVE_SETTINGS:"Salvar preferências"},sv:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd MMM D","major-tick-date-format-WEEK":"ddd MMM D","major-tick-date-format-MONTH":"YYYY MMM","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd MMM D H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"Data är indikativa",BUTTON_OK:"OK",BUTTON_CANCEL:"Avbryt",BUTTON_APPLY:"Använd",BUTTON_RESET_TO_DEFAULTS:"Återställ till standard",SAVE_SETTINGS:"Spara inställningar"},zh:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd MMM D","major-tick-date-format-WEEK":"ddd MMM D","major-tick-date-format-MONTH":"YYYY MMM","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd MMM D H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"数据为指示性",BUTTON_OK:"OK",BUTTON_CANCEL:"取消",BUTTON_APPLY:"应用",BUTTON_RESET_TO_DEFAULTS:"还原为默认设置",SAVE_SETTINGS:"保存设置"},zh_TW:{"major-tick-date-format-SECOND":"H:mm:ss","major-tick-date-format-MINUTE":"H:mm","major-tick-date-format-HOUR":"H:mm","major-tick-date-format-DAY":"ddd D MMM","major-tick-date-format-WEEK":"ddd D MMM","major-tick-date-format-MONTH":"MMM YYYY","major-tick-date-format-YEAR":"YYYY","major-tick-date-format-DECADE":"YYYY","major-tick-date-format-OPEN":"ddd D MMM H:mm","minor-tick-date-format-SECOND":"H:mm:ss","minor-tick-date-format-MINUTE":"H:mm","minor-tick-date-format-HOUR":"H:mm","minor-tick-date-format-DAY":"ddd D","minor-tick-date-format-WEEK":"ddd D","minor-tick-date-format-MONTH":"MMM","minor-tick-date-format-YEAR":"YYYY","minor-tick-date-format-DECADE":"YYYY","dataIsIndicative-label":"指示性數據",BUTTON_OK:"OK",BUTTON_CANCEL:"取消",BUTTON_APPLY:"應用",BUTTON_RESET_TO_DEFAULTS:"還原為默認設置",SAVE_SETTINGS:"保存設置"}})})),define("module/annotations/js/model/layouts/globalannotationmodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i){this.annotationsSettings=Object.create(null),t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule");e("module/core/js/util/class").extend(t,n),t.SETTINGS_MODULE_NAME="globalAnnotationModule";var i=t.prototype;return i.annotationsSettings=null,i.fromJSON=function(e){this.annotationsSettings=e.annotationsSettings},i.toJSON=function(){return{annotationsSettings:this.annotationsSettings}},i.isModified=function(){return!!Object.keys(this.annotationsSettings).length},Object.seal(i),Object.seal(t)})),define("module/annotations/js/trackeractions",["require","lodash","module/core/js/tracker/enum/schema"],(function(e){"use strict";var t=e("lodash"),n=e("module/core/js/tracker/enum/schema"),i={};return i.saveAnnotationSettings=function(e,t){return{schema:n.CHECKBOX_ACTION,actionType:"UPDATE",elementId:"SAVE_SETTINGS",elementType:"CHECKBOX",elementGroup:"ANNOTATIONS",elementValue:e.toUpperCase(),isSelected:t}},i.UIAction=function(e,o,r){e=t.snakeCase(e).toUpperCase(),o&&(o=t.snakeCase(o).toUpperCase());var s={schema:n.ELEMENT_ACTION,elementId:e,elementGroup:"ANNOTATIONS",elementParentId:r,actionType:"PRESS"};return r===i.ACTION_ORIGINS.HOTKEY?s.elementType="LAYER":s.elementType="BUTTON",o&&(s.elementValue=o),s},i.ACTION_TYPES=Object.freeze({CREATE:"CREATE",COPY:"COPY",DELETE:"DELETE",DELETE_ALL:"DELETE_ALL",CUSTOMISE:"CUSTOMISE",MOVE:"MOVE",EXIT_INTERACTIVE:"EXIT_INTERACTIVE"}),i.ACTION_ORIGINS=Object.freeze({ANNOTATION_TOOLBOX:"ANNOTATION_TOOLBOX",MAIN_MENU:"MAIN_MENU",TOP_MENU:"TOP_MENU",CONTEXT_MENU:"CONTEXT_MENU",EDIT_ANNOTATION:"EDIT_ANNOTATION",HOTKEY:"HOTKEY",RIGHT_CLICK:"RIGHT_CLICK"}),Object.seal(i)})),define("module/annotations/js/view/component/dialog/savesettingsdialogcontent",["require","lodash","module/core/js/view/component/dialog/abstractdialogcontent","module/core/js/view/component/checkbox","module/core/js/util/class","module/core/js/util/functional","module/annotations/js/model/layouts/globalannotationmodule","module/core/js/i18n","module/annotations/js/trackeractions","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,r),this._annotationPresentationModel=s,this._settingsManager=o}var n=e("lodash"),i=e("module/core/js/view/component/dialog/abstractdialogcontent"),o=e("module/core/js/view/component/checkbox"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/annotations/js/model/layouts/globalannotationmodule"),l=e("module/core/js/i18n"),u=e("module/annotations/js/trackeractions"),c=e("module/core/js/enum/zindexenum");r.extend(t,i),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var d=t.prototype;return d._checkbox=null,d._settingsManager=null,d.initDom=function(e){return this._checkbox=o.create().initDom(e,"checkbox").setText(l.get("SAVE_SETTINGS")).setId("SAVE_SETTINGS_ANNOTATION_CHECKBOX").setSelected(!0).startListening(this._captureZoneManager,s.empty,c.DIALOG_CONTROLS),t.superclass.initDom.call(this,e)},d.save=function(){var e=this._annotationPresentationModel.getType(),t=this._settingsManager.getGlobalSettings(a.SETTINGS_MODULE_NAME).annotationsSettings[e],i=this._annotationPresentationModel.getGlobalAnnotationSettings();n.isEqual(i,t)||(this._checkbox.isSelected()&&this._settingsManager.changeGlobalSettings(a.SETTINGS_MODULE_NAME,(function(t){return t.annotationsSettings[e]=n.cloneDeep(i),!0}),!0),this._eventBus.publish("tracker/chart",[u.saveAnnotationSettings(e,this._checkbox.isSelected())]))},d.updateCaptureZones=function(){t.superclass.updateCaptureZones.call(this),this._checkbox.updateCaptureZone()},d.resetToDefaults=s.empty,d.revertChanges=s.empty,d.destroy=function(){this._checkbox.destroy(),t.superclass.destroy.call(this)},Object.seal(d),Object.seal(t)})),define("module/annotations/js/view/component/dialog/annotationsettingsstackcontent",["require","module/core/js/view/component/dialog/submittabledialogcontent","module/core/js/view/component/button","module/core/js/util/class","module/core/js/i18n","module/core/js/util/functional","module/annotations/js/view/component/dialog/savesettingsdialogcontent","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,r),this._annotationPresentationModel=s,this._settingsManager=o}var n=e("module/core/js/view/component/dialog/submittabledialogcontent"),i=e("module/core/js/view/component/button"),o=e("module/core/js/util/class"),r=e("module/core/js/i18n"),s=e("module/core/js/util/functional"),a=e("module/annotations/js/view/component/dialog/savesettingsdialogcontent"),l=e("module/core/js/enum/zindexenum");o.extend(t,n),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var u=t.prototype;return u._annotationPresentationModel=null,u._settingsManager=null,u._resetToDefaultsButton=null,u._annotationSettingsContents=null,u._dFullButtonContainer=null,u.initDom=function(e){var n=e.append("div").classed("content selected",!0);return t.superclass.initDom.call(this,n),this._annotationSettingsContents=this._annotationPresentationModel.getSettingsDialogContent().map(this._initContentItem.bind(this,n)),this._addResetToDefaultButton(e),this._addSaveCheckbox(e),this._initialiseActionButtons(e),this},u._initContentItem=function(e,t){return t.type.create.call(t.type,this._dialog,this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager,this._annotationPresentationModel).initDom(e)},u._addResetToDefaultButton=function(e){this._resetToDefaultsButton=i.create().initDom(e,"resetToDefault linkButton").setText(r.get("BUTTON_RESET_TO_DEFAULTS")).startListening(this._captureZoneManager,this._onResetButtonPressed.bind(this),l.DIALOG_CONTROLS)},u._addSaveCheckbox=function(e){this._annotationSettingsContents.push(this._initContentItem(e,{name:"SAVE_SETTINGS",type:a}))},u._initialiseActionButtons=function(e){this._dButtonContainer=e.append("div").classed("actions",!0).append("div").classed("actionButtons",!0),this._createDoneButton(this._onDoneButtonPressed,r.get("BUTTON_APPLY")),this._createCancelButton(this._onCancelButtonPressed)},u._onDoneButtonPressed=function(){s.invokeCall(this._annotationSettingsContents,"save")},u._onResetButtonPressed=function(){s.invokeCall(this._annotationSettingsContents,"resetToDefaults")},u._onCancelButtonPressed=function(){s.invokeCall(this._annotationSettingsContents,"revertChanges")},u.updateCaptureZones=function(){return this._resetToDefaultsButton.updateCaptureZone(),s.invokeCall(this._annotationSettingsContents,"updateCaptureZones"),t.superclass.updateCaptureZones.call(this)},u.destroy=function(){s.invokeCall(this._annotationSettingsContents,"destroy"),this._resetToDefaultsButton.destroy(),this._resetToDefaultsButton=null,this._dFullButtonContainer&&(this._dFullButtonContainer.remove(),this._dFullButtonContainer=null),t.superclass.destroy.call(this)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/component/dialog/annotationsettingsdialog",["require","module/core/js/view/component/dialog/abstractdialog","module/annotations/js/i18n","module/annotations/js/view/component/dialog/annotationsettingsstackcontent","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,r),this._settingsManager=i,this._annotation=o}var n=e("module/core/js/view/component/dialog/abstractdialog"),i=e("module/annotations/js/i18n"),o=e("module/annotations/js/view/component/dialog/annotationsettingsstackcontent");e("module/core/js/util/class").extend(t,n),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var r=t.prototype;return r._annotation=null,r._settingsManager=null,r._getDialogTitle=function(){return i.get(this._annotation.getAnnotation().getType())},r._getDialogClasses=function(){return"annotationSettings "+this._annotation.getAnnotation().getType()+" stackContent"},r._createContent=function(e){return o.create(this,this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager,this._annotation).initDom(e)},Object.seal(r),Object.seal(t)})),define("module/core/js/util/datapointsnappingutil",["require","module/core/js/util/geometry"],(function(e){"use strict";function t(e,t){this._visibleWindow=e,this._settingsManager=t}var n=e("module/core/js/util/geometry");t.create=function(e,n){return new t(e,n)};var i=t.prototype;return t.DISTANCE_TO_SNAP=10,i.snap=function(e,i){var o,r,s=this._visibleWindow.visibleDateRange.pixelsToAccTime(e),a=this._visibleWindow.visibleDateRange.getInstrumentModel().getDataPointsAtAccTime(s);return a&&a.prices?(o=this._getListOfPointsForDataPoint(a.prices),r=n.findNearestPoint(e,i,o),r.distance<=t.DISTANCE_TO_SNAP?r.point:{x:e,y:i}):{x:e,y:i}},i._getListOfPointsForDataPoint=function(e){var t,n=this._getLevelsForCurrentLineStyle(e);return t=this._visibleWindow.visibleDateRange.accTimeToPixel(e.accTime),n.map(function(e){return{x:t,y:this._visibleWindow.y(e)}}.bind(this))},i._getLevelsForCurrentLineStyle=function(e){return"MOUNTAIN"===this._settingsManager.getStyleSettings()||"LINE"===this._settingsManager.getStyleSettings()?[e.value]:[e.openPrice,e.closePrice,e.lowPrice,e.highPrice]},Object.seal(i),Object.seal(t)})),define("module/core/js/util/vectorsnappingutil",[],(function(){"use strict";function e(){}e.create=function(){return new e},e.SNAPPING_THRESHOLD=5;var t=e.prototype;return t.snap=function(t,n,i,o){var r,s,a;return r=Math.abs(i-t),s=Math.abs(o-n),a=(r+s)/2,Math.abs(r-s)<e.SNAPPING_THRESHOLD?{x:t+(i<t?-a:a),y:n+(o<n?-a:a)}:{x:i,y:o}},Object.seal(t),Object.seal(e)})),define("module/annotations/js/controller/annotationspresentationcontroller",["require","lodash","module/annotations/js/view/model/abstractannotationpresentationmodel","module/annotations/js/model/annotationcollection","module/annotations/js/annotationsevents","module/annotations/js/enum/annotationsmenuenum","module/annotations/js/view/model/annotationspresentationmodel","module/annotations/js/model/annotationtypeenum","module/core/js/view/abstractpresentationcontroller","module/annotations/js/view/factory/annotationpresentationmodelfactory","module/annotations/js/view/component/dialog/annotationsettingsdialog","module/core/js/util/class","module/core/js/util/datapointsnappingutil","module/core/js/util/functional","module/core/js/util/geometry","module/annotations/js/model/layouts/globalannotationmodule","module/core/js/enum/hotkeyenum","module/core/js/model/resolutionsenum","module/core/js/config/taskconfig","module/annotations/js/trackeractions","module/core/js/util/vectorsnappingutil","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e),this._hotkeyMap[g.ESCAPE]=this.cancelInteractiveEditMode.bind(this,M.ACTION_ORIGINS.HOTKEY),this._hotkeyMap[g.DELETE]=this._hotkeyMap[g.BACKSPACE]=this._handleHotkey.bind(this,this._handleAnnotationDelete,M.ACTION_TYPES.DELETE,null),this._hotkeyMap[g.D]=this._handleHotkey.bind(this,this._handleCopyAnnotation,M.ACTION_TYPES.COPY,null),this._hotkeyMap[g.E]=this._handleHotkey.bind(this,this.editAnnotationSettings,M.ACTION_TYPES.CUSTOMISE,null),this._hotkeyMap[g.UP]=this._handleHotkey.bind(this,this._handleKeyMovement,M.ACTION_TYPES.MOVE,"UP",{y:-1}),this._hotkeyMap[g.DOWN]=this._handleHotkey.bind(this,this._handleKeyMovement,M.ACTION_TYPES.MOVE,"DOWN",{y:1}),this._hotkeyMap[g.LEFT]=this._handleHotkey.bind(this,this._handleKeyMovement,M.ACTION_TYPES.MOVE,"LEFT",{x:-1}),this._hotkeyMap[g.RIGHT]=this._handleHotkey.bind(this,this._handleKeyMovement,M.ACTION_TYPES.MOVE,"RIGHT",{x:1})}var n=e("lodash"),i=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),o=e("module/annotations/js/model/annotationcollection"),r=e("module/annotations/js/annotationsevents"),s=e("module/annotations/js/enum/annotationsmenuenum"),a=e("module/annotations/js/view/model/annotationspresentationmodel"),l=e("module/annotations/js/model/annotationtypeenum"),u=e("module/core/js/view/abstractpresentationcontroller"),c=e("module/annotations/js/view/factory/annotationpresentationmodelfactory"),d=e("module/annotations/js/view/component/dialog/annotationsettingsdialog"),h=e("module/core/js/util/class"),p=e("module/core/js/util/datapointsnappingutil"),m=e("module/core/js/util/functional"),f=e("module/core/js/util/geometry"),_=e("module/annotations/js/model/layouts/globalannotationmodule"),g=e("module/core/js/enum/hotkeyenum"),v=e("module/core/js/model/resolutionsenum"),y=e("module/core/js/config/taskconfig"),M=e("module/annotations/js/trackeractions"),b=e("module/core/js/util/vectorsnappingutil"),A=e("module/core/js/view/visiblewindow");h.extend(t,u);var T=t.prototype;return T._annotationCollection=null,T._annotations=null,T._dialog=null,T._interactiveEditAnnotationPresentationModel=null,T._dataPointSnappingUtil=null,T._vectorSnappingUtil=null,T._handleKeyMovement=function(e){this._presentationModel.getEditModeAnnotation().moveBy(this._visibleWindow.getXScale(),this._visibleWindow.y,this._instrumentModel.getTimeline(),e)},T.withModuleLoader=function(e){return t.superclass.withModuleLoader.call(this,e),this._annotationCollection=e.getModule("annotations").getAnnotationCollection(),this._annotations=e.getModule("annotations"),this._menuApi=e.getModule("menuApi"),this},T.startListening=function(e,t){this._visibleWindow=e,this._instrumentModel=t,this._presentationModel.setInstrumentModel(t),null!==this._annotations.getAnnotationVisibility()&&this._recreateAnnotations(),this._annotations.on(r.ANNOTATIONS_CHANGED,this._recreateAnnotations,this),this._annotations.on(r.LOCK_CHANGED,this._handleLockChanged,this),"prices"===this._visibleWindow.name&&(this._dataPointSnappingUtil=p.create(this._visibleWindow,this._settingsManager)),this._vectorSnappingUtil=b.create()},T._handleEditHintsUpdated=function(){var e=this._presentationModel.getInteractiveEditMode()?this._presentationModel.getEditModeAnnotation():null;e!==this._interactiveEditAnnotationPresentationModel&&(this._interactiveEditAnnotationPresentationModel&&(this._interactiveEditAnnotationPresentationModel.un(null,this),delete this._interactiveEditAnnotationPresentationModel),e&&(this._interactiveEditAnnotationPresentationModel=e,e.on(i.CHANGED,this._handleEditHintsUpdated,this))),this._eventBus.publish("annotations/editHints/updated",[e])},T.stopListening=function(){this._annotations.un(null,this),this._stopListeningToChartUpdates(),this._annotations.areEditHintsAvailable()&&(this._interactiveEditAnnotationPresentationModel&&(this._interactiveEditAnnotationPresentationModel.un(null,this),delete this._interactiveEditAnnotationPresentationModel),this._presentationModel.un(null,this)),t.superclass.stopListening.call(this)},T.requestEditModeChange=function(e){this._presentationModel.getEditModeAnnotation()!==e&&(e?this._startEditingAnnotation(e):this._finishEditingAnnotation())},T.onAnnotationDoubleTap=function(e,t){this.requestEditModeChange(e),this._eventBus.publish("annotations/customise")},T.finishInteractiveEditMode=function(){this._presentationModel.setInteractiveEditMode(!1),this._toggleEditMenu(!0),this._triggerCreatingAnnotation()},T.cancelInteractiveEditMode=function(e){this._trackAction(M.ACTION_TYPES.EXIT_INTERACTIVE,null,e),this._taskManager.finishTask(y.EDIT_ANNOTATION.ID)},T.snapToNearestDataPoint=function(e,t){return this._dataPointSnappingUtil.snap(e,t)},T.snapToCircle=function(e,t,n,i){return this._vectorSnappingUtil.snap(e,t,n,i)},T.destroy=function(){this._dialog&&(this._dialog.destroy(),this._dialog=null),this._presentationModel.getEditModeAnnotation()&&this._taskManager.finishTask(y.EDIT_ANNOTATION.ID),this._presentationModel&&m.invokeCall(this._presentationModel.getAnnotations(),"un",null,this),t.superclass.destroy.call(this)},T._recreateAnnotations=function(){var e=this._settingsManager.getAnnotationVisibilitySettings();this._stopListeningToChartUpdates(),e&&this._startListeningToChartUpdates()},T._startListeningToChartUpdates=function(){this._visibleWindow.isReadyForRender()?this._handleReadyForRender():this._visibleWindow.on(A.READY_FOR_RENDER,this._handleReadyForRender,this,{once:!0})},T._handleReadyForRender=function(){var e=this._annotationCollection.getAll();this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._eventBus.subscribe("chart/view/visibleWindow/moved/"+this._subView.name,this._handleVisibleWindowMoved,this),this._eventBus.subscribe("chart/resolution/change",this._handleResolutionChanged,this),this._eventBus.subscribe("annotations/delete",this._handleAnnotationDelete,this),this._eventBus.subscribe("annotations/delete/all",this._handleDeleteAllAnnotations,this),this._eventBus.subscribe("annotations/create",this._handleCreateAnnotation,this),this._eventBus.subscribe("annotations/copy",this._handleCopyAnnotation,this),this._eventBus.subscribe("annotations/customise",this.editAnnotationSettings,this),this._eventBus.subscribe("menu/main/destroyed",this._finishEditingAnnotation,this),this._eventBus.subscribe("annotations/stopEditing",this._finishEditingAnnotation,this),this._annotationCollection.on(o.ANNOTATIONS_SET,this._handleAnnotationsSet,this),e&&this._handleAnnotationsSet(e),this._annotations.areEditHintsAvailable()&&this._presentationModel.on(a.INTERACTIVE_EDIT_MODE_CHANGED,this._handleEditHintsUpdated,this)},T._stopListeningToChartUpdates=function(){this._eventBus.unsubscribe("chart/view/ready",this._handleChartViewReady,this),this._eventBus.unsubscribe("chart/view/visibleWindow/moved/"+this._subView.name,this._handleVisibleWindowMoved,this),this._eventBus.unsubscribe("chart/resolution/change",this._handleResolutionChanged,this),this._eventBus.unsubscribe("annotations/delete",this._handleAnnotationDelete,this),this._eventBus.unsubscribe("annotations/create",this._handleCreateAnnotation,this),this._eventBus.unsubscribe("annotations/copy",this._handleCopyAnnotation,this),this._eventBus.unsubscribe("annotations/customise",this.editAnnotationSettings,this),this._annotationCollection.un(o.ANNOTATIONS_SET,this),this._visibleWindow&&this._visibleWindow.un(null,this),this._presentationModel&&(this._presentationModel.setAnnotations([]),this._presentationModel.un(null,this))},T._handleCreateAnnotation=function(e,t){var n,i,o,r;"prices"===this._subView.name&&(this._eventBus.publish("statistics",["ANNOTATION_ADDED",{annotation:e}]),n=this._annotationCollection.createDefaultAnnotation(e,this._instrumentModel.getActiveResolution()),this._applyGlobalAnnotationSettings(n),i=this._subView.dimensions,o=t&&f.isPointInRectangle(t.x,t.y,i.x,i.y,i.x+i.width,i.y+i.height),r=o&&e!==l.FIBONACCI?t:{x:i.x+i.width/2,y:i.y+i.height/2},this._createAndAddAnnotation(n,null,r))},T._applyGlobalAnnotationSettings=function(e){var t=this._settingsManager.getGlobalSettings(_.SETTINGS_MODULE_NAME).annotationsSettings[e.getType()];t&&(e.applyGlobalStyles(t.styles),t.attributes&&e.setAttributes(t.attributes))},T._createAndAddAnnotation=function(e,t,n){var i=this._createAnnotationPresentationModel(e);t&&i.positionInView(this._visibleWindow.getXScale(),this._visibleWindow.y,this._instrumentModel.getTimeline(),t,n),this._presentationModel.addAnnotation(i),this.requestEditModeChange(i),this._annotationCollection.addAnnotation(e,!!t),t||(this._presentationModel.setInteractiveEditMode(!0),this._toggleEditMenu(!1))},T._startEditingAnnotation=function(e){this._taskManager.isActive(y.EDIT_ANNOTATION.ID)?this._presentationModel.editModeChanged(e):this._taskManager.startTask(y.EDIT_ANNOTATION,{onActivated:this._onTaskActivated.bind(this,e),onDeactivated:this._onTaskDeactivated.bind(this),hotkeyMap:this._hotkeyMap})},T._finishEditingAnnotation=function(){this._annotations.getCurrentlyLockedAnnotation()||this._taskManager.finishTask(y.EDIT_ANNOTATION.ID)},T._onTaskActivated=function(e){this._toggleEditMenu(!0),this._presentationModel.editModeChanged(e)},T._onTaskDeactivated=function(){this._annotations.getCurrentlyLockedAnnotation()?this._annotations.lockAnnotation(null):(this._presentationModel.getInteractiveEditMode()?this._cancelInteractiveEditMode():this._presentationModel.editModeChanged(null),this._toggleEditMenu(!1))},T._cancelInteractiveEditMode=function(){this._presentationModel.setInteractiveEditMode(!1),this._deleteAnnotation(this._presentationModel.getEditModeAnnotation()),this._finishEditingAnnotation(),this._annotations.lockAnnotation(null)},T._triggerCreatingAnnotation=function(){this._annotations.getCurrentlyLockedAnnotation()&&this._handleCreateAnnotation(this._annotations.getCurrentlyLockedAnnotation(),null)},T._handleLockChanged=function(){"prices"===this._subView.name&&this._presentationModel.getInteractiveEditMode()&&(this._presentationModel.setInteractiveEditMode(!1),this._deleteAnnotation(this._presentationModel.getEditModeAnnotation()))},T._handleAnnotationDelete=function(){var e=this._presentationModel.getEditModeAnnotation();e&&(this._presentationModel.setInteractiveEditMode(!1),this._eventBus.publish("statistics",["ANNOTATION_DELETED",{annotation:e.getAnnotation().getType()}]),this._deleteAnnotation(e),this._finishEditingAnnotation(),this._triggerCreatingAnnotation())},T._handleDeleteAllAnnotations=function(){this._finishEditingAnnotation(),this._presentationModel.getAnnotations().forEach((function(e){e.un(null,this)}),this),this._presentationModel.deleteAllAnnotations()},T._deleteAnnotation=function(e){e.un(null,this),this._annotationCollection.deleteAnnotation(e.getAnnotation()),this._presentationModel.deleteAnnotation(e)},T._handleAnnotationsSet=function(e){var t,n=this._visibleWindow.getXScale(),i=this._visibleWindow.y,o=e.filter(this._belongsToSubview.bind(this));this._instrumentModel&&this._instrumentModel.getActiveResolution()&&(o=o.filter(this._isAllowedForResolution.bind(this,this._instrumentModel.getActiveResolution()))),t=o.map(this._createAnnotationPresentationModel,this),this._instrumentModel.getTimeline().hasIntervals()&&m.invokeCall(t,"setIsWithinVisibleRange",n,i,this._instrumentModel.getTimeline()),this._presentationModel.setAnnotations(t)},T._handleCopyAnnotation=function(){var e,t,n,i=this._presentationModel.getEditModeAnnotation();i&&(t=this._subView.dimensions.x+this._subView.dimensions.width/2,n=this._subView.dimensions.y+this._subView.dimensions.height/2,this._finishEditingAnnotation(),e=i.getAnnotation().copy(),this._eventBus.publish("statistics",["ANNOTATION_COPIED",{annotation:e.getType()}]),this._createAndAddAnnotation(e,i,{x:t,y:n}))},T._handleHotkey=function(e,t,i){return this._trackAction(t,i,M.ACTION_ORIGINS.HOTKEY),e.apply(this,n.slice(arguments,3))},T._trackAction=function(e,t,n){this._eventBus.publish("tracker/chart",[M.UIAction(e,t,n)])},T._handleChartViewReady=function(e,t){this._captureZoneManager=t},T.editAnnotationSettings=function(){var e=this._presentationModel.getEditModeAnnotation();e&&(this._dialog=d.create(this._eventBus,this._captureZoneManager,this._settingsManager,e,this._taskManager),this._dialog.initDom(this._containerProvider.getContainer("top-html"),!0).makeScrollable())},T._handleResolutionChanged=function(e){var t=this._annotationCollection.getAll(),n=v.valueOf(e),i=t.filter(this._belongsToSubview.bind(this)).filter(this._isAllowedForResolution.bind(this,n)),o=this._visibleWindow.getXScale(),r=this._visibleWindow.y,s=i.map(this._createAnnotationPresentationModel,this);this._instrumentModel.getTimeline().hasIntervals()&&m.invokeCall(s,"setIsWithinVisibleRange",o,r,this._instrumentModel.getTimeline()),this._presentationModel.setAnnotations(s)},T._handleVisibleWindowMoved=function(e,t){this._presentationModel.onVisibleRangeUpdate(e,t,this._visibleWindow.getXScale(),this._visibleWindow.y)},T._createAnnotationPresentationModel=function(e){var t=c.create(e,this._presentationModel);return t.setThemeSettingsMode(this._settingsManager.getThemeSettingsMode()),t.on(i.CONTEXT_MENU,this._handleContextMenu,this),t},T._toggleEditMenu=function(e){e?this._menuApi.showMenu(s.MENU_CONTAINER_ID):this._menuApi.hideMenu(s.MENU_CONTAINER_ID)},T._handleContextMenu=function(e,t){this.requestEditModeChange(e),this._eventBus.publish("annotations/edit/contextMenu",[t])},T._isAllowedForResolution=function(e,t){return!t.getResolution()||t.getResolution().period>=e.period},T._belongsToSubview=function(e){return e.getSubViewName()===this._subView.name},Object.seal(T),Object.seal(t)})),define("module/core/js/view/userinput/holdgesturerecogniser",["require","lodash","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/util/class","module/core/js/util/geometry","module/core/js/view/userinput/primarypointergesturerecogniser"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e),this._timeout=n.debounce(this._timeout,i.GESTURE_TIMEOUT)}var n=e("lodash"),i=e("module/core/js/view/userinput/abstractgesturerecogniser"),o=e("module/core/js/util/class"),r=e("module/core/js/util/geometry"),s=e("module/core/js/view/userinput/primarypointergesturerecogniser");o.extend(t,s),t.create=function(e){return new t(e)};var a=t.prototype;return a.x=null,a.y=null,a._handlePointerDown=function(e){this.reset(),this.x=e.x,this.y=e.y,this._startProcessing()},a._handlePointerMove=function(e){if(this._inProgress){r.distancePointToPoint(this.x,this.y,e.x,e.y)>i.GESTURE_PRECISION&&this._endProcessing()}},a._handlePointerUp=a._endProcessing,a.reset=function(){t.superclass.reset.call(this),this._timeout.cancel(),this.x=null,this.y=null},a._startProcessing=function(){t.superclass._startProcessing.call(this),this._timeout()},a._timeout=function(){this._inProgress&&(this._callHandler(),this._endProcessing())},Object.seal(a),Object.seal(t)})),define("module/core/js/view/userinput/contextmenurecogniser",["require","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/util/class","module/core/js/model/deviceinfo","module/core/js/view/userinput/holdgesturerecogniser"],(function(e){"use strict";function t(e){if(("undefined"!=typeof Ember||"undefined"!=typeof jQuery)&&o.isMobile())return r.create(e);t.superclass.constructor.call(this,e)}var n=e("module/core/js/view/userinput/abstractgesturerecogniser"),i=e("module/core/js/util/class"),o=e("module/core/js/model/deviceinfo"),r=e("module/core/js/view/userinput/holdgesturerecogniser");i.extend(t,n),t.create=function(e){return new t(e)};var s=t.prototype;return s.x=null,s.y=null,s._handleContextMenu=function(e,t,n){return n.preventDefault(),this.x=e.x,this.y=e.y,this._callHandler(),this.reset(),!0},s.reset=function(){t.superclass.reset.call(this),this.x=null,this.y=null},Object.seal(s),Object.seal(t)})),define("module/core/js/view/userinput/deprecatedpangesturerecogniser",["require","module/core/js/view/userinput/deprecatedgesturerecogniser","module/core/js/util/class","module/core/js/util/object"],(function(e){"use strict";function t(){this._pointersById=Object.create(null)}var n=e("module/core/js/view/userinput/deprecatedgesturerecogniser"),i=e("module/core/js/util/class"),o=e("module/core/js/util/object"),r=n.GESTURE_PRECISION*n.GESTURE_PRECISION;i.extend(t,n),t.create=function(){return new t},t.STATE_WAITING=0,t.STATE_ACTIVE=1;var s=t.prototype;return s.type="pan",s.x=null,s.y=null,s.moveX=null,s.moveY=null,s.deltaY=null,s.maxPointers=0,s._pointersById=null,s._panState=t.STATE_WAITING,s._downTimestamp=null,s._activatePan=function(e,n,i,o){this._panState=t.STATE_ACTIVE,this._startGesture()},s._handlePointerDown=function(e,t,n){this._isRecognised=!1,this._pointersById=t,this.maxPointers=Math.max(this.maxPointers,o.count(t)),this._inProgress||(this._downTimestamp=Date.now(),this.x=e.x,this.y=e.y,this.deltaX=0,this.deltaY=0,this.moveX=0,this.moveY=0,this._inProgress=!0)},s._endGesture=function(){this._panState!==t.STATE_WAITING?t.superclass._endGesture.apply(this,arguments):this._inProgress=!1,this.maxPointers=0},s._handlePointerUp=function(e,n,i){this._pointersById=n,1===o.count(n)&&(this._endGesture(),this._panState=t.STATE_WAITING)},s._handlePointerMove=function(e,t,n){if(!this._inProgress)return void(this._isRecognised=!1);o.count(t)<1||this._updateMovementState(e,t,n)},s._updateMovementState=function(e,i,s){var a,l,u=o.count(i),c=this._pointersById[e.pointerId],d=Date.now()-this._downTimestamp;this.moveX=e.x-c.x,this.moveY=e.y-c.y,this.deltaX+=this.moveX/u,this.deltaY+=this.moveY/u,this.x=e.x,this.y=e.y,this._pointersById=i,this._panState===t.STATE_WAITING&&(a=Math.pow(this.deltaX,2)+Math.pow(this.deltaY,2),(!(l=a<r)||d>n.GESTURE_TIMEOUT)&&this._activatePan(e,i,s,l)),this._panState===t.STATE_ACTIVE&&(this._isRecognised=!0,this._callHandler())},Object.seal(s),Object.seal(t)})),define("module/core/js/view/userinput/directionsenum",["require","module/core/js/util/object"],(function(e){"use strict";var t=e("module/core/js/util/object"),n={};return n.DIAGONAL=function(e){return(e=Math.abs(e))>35&&e<67.5||e>112.5&&e<145},n.HORIZONTAL=function(e){
return(e=Math.abs(e))<=35||e>=145},n.VERTICAL=function(e){return(e=Math.abs(e))>=67.5&&e<=112.5},t.recursiveFreeze(n)})),define("module/core/js/view/userinput/deprecatedmultidirectionalpangesturerecogniser",["require","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/util/class","module/core/js/view/userinput/deprecatedpangesturerecogniser","module/core/js/view/userinput/directionsenum","module/core/js/util/math","module/core/js/util/object"],(function(e){"use strict";function t(){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/userinput/abstractgesturerecogniser"),i=e("module/core/js/util/class"),o=e("module/core/js/view/userinput/deprecatedpangesturerecogniser"),r=e("module/core/js/view/userinput/directionsenum"),s=e("module/core/js/util/math"),a=e("module/core/js/util/object");i.extend(t,o),t.create=function(){return new t},t.STATE_WAITING=0,t.STATE_ACTIVE=1,t.STATE_LOCKED=2,t.MIN_EVENTS_BEFORE_LOCKING_IN_DIRECTION=4,t.ANGLE_RANGE_LIMIT=10,t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t.DIAGONAL="diagonal";var l=t.prototype;return l.direction=null,l._angles=null,l._handlePointerDown=function(e,n,i){this._inProgress||(this._angles=[],this._direction=null),t.superclass._handlePointerDown.call(this,e,n,i)},l._updateMovementState=function(e,n,i){var o=a.count(n),r=this._pointersById[e.pointerId],s=e.x-r.x,l=e.y-r.y,u=s/o,c=l/o,d=Math.abs(180*Math.atan2(c,u)/Math.PI);this.moveX=s,this.moveY=l,this.deltaX+=u,this.deltaY+=c,this._angles.push(d),this.x=e.x,this.y=e.y,this._pointersById=n,this._panState!==t.STATE_LOCKED&&this._updatePanState(d),this._panState!==t.STATE_ACTIVE&&this._panState!==t.STATE_LOCKED||this._callHandler()},l._callHandler=function(){this._handler.call(this._handlerContext,this,this._direction),this._panState===t.STATE_ACTIVE&&this.fire(n.HANDLED)},l._updatePanState=function(e){var n=this._getDirection(e),i=t.MIN_EVENTS_BEFORE_LOCKING_IN_DIRECTION,o=this._angles.slice(-i),r=t.ANGLE_RANGE_LIMIT;this._angles.length>=i&&s.range(o)<r?(this._panState=t.STATE_LOCKED,this._lockHandler.call(this._lockHandlerContext,this,n)):this._panState=t.STATE_ACTIVE,this._direction=n,this._isRecognised||this._startGesture(),this._isRecognised=!0},l._getDirection=function(e){return r.HORIZONTAL(e)?t.HORIZONTAL:r.VERTICAL(e)?t.VERTICAL:t.DIAGONAL},Object.seal(l),Object.seal(t)})),define("module/core/js/view/component/svg/abstractsvgwrapper",["require","module/core/js/view/userinput/contextmenurecogniser","module/core/js/util/css","module/core/js/view/userinput/deprecatedmultidirectionalpangesturerecogniser","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/holdgesturerecogniser","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/util/svg","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t){this._captureZoneManager=t,this._dContainer=e,this._initDom(),this._draggingCursor=i.CURSOR_TYPE.GRABBING,this._recognisers={contextMenu:n.create(),drag:o.create().withStartHandler(this._enterDragging.bind(this)).withEndHandler(this._exitDragging.bind(this)),hover:l.create(),tap:c.create(),doubleTap:c.create(2,!0),hold:a.create()},this.updateCaptureZone=s.throttledDeferred(this.updateCaptureZone)}var n=e("module/core/js/view/userinput/contextmenurecogniser"),i=e("module/core/js/util/css"),o=e("module/core/js/view/userinput/deprecatedmultidirectionalpangesturerecogniser"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/userinput/holdgesturerecogniser"),l=e("module/core/js/view/userinput/hovergesturerecogniser"),u=e("module/core/js/util/svg"),c=e("module/core/js/view/userinput/tapgesturerecogniser"),d=e("module/core/js/enum/zindexenum"),h=t.prototype;return h._captureZoneManager=null,h._captureZone=null,h._editCaptureZone=null,h._dContainer=null,h._dComponent=null,h._recognisers=null,h._draggingCursor=null,h._captureZoneConstraints=null,h._captureZonePropagation=null,h._padding=0,h.attr=s.delegate("_dComponent","attr"),h.classed=s.delegate("_dComponent","classed"),h.getElement=s.getter("_dComponent"),h.getDimensions=function(){return this._dComponent.node().getBoundingClientRect()},h.setCaptureZoneConstraints=function(e){return this._captureZone&&(this._captureZoneConstraints=e,this.updateCaptureZone()),this},h.setCaptureZonePropagation=function(e){return this._captureZonePropagation=e,this._captureZone&&this._captureZone.withEventPropagation(e),this._editCaptureZone&&this._editCaptureZone.withEventPropagation(e),this},h.withPadding=function(e){return this._padding=e,this._updateZonePadding(),this},h.withDefaultPadding=function(){return this._padding=this._captureZoneManager.getDefaultPadding(),this._updateZonePadding(),this},h._updateZonePadding=function(){this._padding&&(this._captureZone&&this._captureZone.withPadding(this._padding),this._editCaptureZone&&this._editCaptureZone.withPadding(this._padding))},h._initDom=s.empty,h._lastUsedHoverCursor=null,h.withCursorOnHover=function(e){return this._lastUsedHoverCursor=e,this._captureZone&&this._captureZone.withCursorOnHover(e,this._dComponent),this},h.withCursorOnDragging=s.setter("_draggingCursor"),h.withoutCursorOnHover=function(){return this._captureZone&&this._captureZone.withoutCursorOnHover(),this},h.onDrag=function(e,t){return this._removeThenAddGestureRecogniser(this._recognisers.drag),this._editCaptureZone.removeGestureRecogniser(this._recognisers.drag).addGestureRecogniser(this._recognisers.drag),this._recognisers.drag.withHandler((function(){e.apply(t,arguments)}),this),this},h.onDragStart=function(e,t){return this._removeThenAddGestureRecogniser(this._recognisers.drag),this._editCaptureZone.removeGestureRecogniser(this._recognisers.drag).addGestureRecogniser(this._recognisers.drag),this._recognisers.drag.withStartHandler((function(){e.apply(t,arguments),this._enterDragging()}),this),this},h.onDragEnd=function(e,t){return this._removeThenAddGestureRecogniser(this._recognisers.drag),this._editCaptureZone.removeGestureRecogniser(this._recognisers.drag).addGestureRecogniser(this._recognisers.drag),this._recognisers.drag.withEndHandler((function(){e.apply(t,arguments),this._exitDragging()}),this),this},h.onHold=function(e,t){return this._removeThenAddGestureRecogniser(this._recognisers.hold),this._editCaptureZone.removeGestureRecogniser(this._recognisers.hold).addGestureRecogniser(this._recognisers.hold),this._recognisers.hold.withHandler(e,t),this},h._enterDragging=function(){this.withoutCursorOnHover(),i.setChartCursor(this._dComponent,this._draggingCursor),this._captureZoneManager.startDragging()},h._exitDragging=function(){var e=this._lastUsedHoverCursor||i.CURSOR_TYPE.DEFAULT;this.withCursorOnHover(e),i.setChartCursor(this._dComponent,e),this._captureZoneManager.stopDragging()},h.onHover=function(e,t,n){return this._removeThenAddGestureRecogniser(this._recognisers.hover).withStartHandler(e,n).withEndHandler(t,n),this},h.onContextMenu=function(e,t){return this._removeThenAddGestureRecogniser(this._recognisers.contextMenu).withHandler(e,t),this},h.onTap=function(e,t){return this._removeThenAddGestureRecogniser(this._recognisers.tap).withHandler(e,t),this},h.onDoubleTap=function(e,t){return this._removeThenAddGestureRecogniser(this._recognisers.doubleTap).withHandler(e,t),this},h.render=function(){this.updateCaptureZone()},h._createCaptureZone=function(){return this._captureZone||(this._captureZone=this._captureZoneManager.create(this._captureZonePropagation||r.PROPAGATE_UNHANDLED,d.ANNOTATION_SELECTION)),this._editCaptureZone||(this._editCaptureZone=this._captureZoneManager.create(r.PROPAGATE_UNHANDLED,d.ANNOTATION_MOVING)),this},h.removeCaptureZone=function(){this.updateCaptureZone.abort&&this.updateCaptureZone.abort(),this._captureZone&&(this._captureZone.destroy(),this._captureZone=null),this._editCaptureZone&&(this._editCaptureZone.destroy(),this._editCaptureZone=null)},h.updateCaptureZone=function(){return this._captureZone&&this._captureZone.setDimensionsBasedOnElement(this._dComponent,this._captureZoneConstraints),this._editCaptureZone&&this._editCaptureZone.setDimensionsBasedOnElement(this._dComponent,this._captureZoneConstraints),this},h.showCaptureZone=function(){return this._captureZone&&this._captureZone.show(),this._editCaptureZone&&this._editCaptureZone.show(),this},h.hideCaptureZone=function(){return this._captureZone&&this._captureZone.hide(),this._editCaptureZone&&this._editCaptureZone.hide(),this},h.updateCaptureZoneIndex=function(e,t){return this._captureZone&&this._captureZone.zIndex!==e&&this._captureZoneManager.updateCaptureZoneZIndex(this._captureZone,e,t),this},h.setEditEnabled=function(e){return e?(this._editCaptureZone.removeGestureRecogniser(this._recognisers.drag).addGestureRecogniser(this._recognisers.drag).removeGestureRecogniser(this._recognisers.contextMenu).addGestureRecogniser(this._recognisers.contextMenu).removeGestureRecogniser(this._recognisers.hold).addGestureRecogniser(this._recognisers.hold),this._removeThenAddGestureRecogniser(this._recognisers.drag),this._removeThenAddGestureRecogniser(this._recognisers.hold)):(this._captureZone.removeGestureRecogniser(this._recognisers.drag).removeGestureRecogniser(this._recognisers.hold),this._editCaptureZone.removeGestureRecogniser(this._recognisers.drag).removeGestureRecogniser(this._recognisers.contextMenu).removeGestureRecogniser(this._recognisers.hold)),this},h._removeThenAddGestureRecogniser=function(e){return this._captureZone||(this._createCaptureZone(),this._updateZonePadding(),this.updateCaptureZone()),this._captureZone.removeGestureRecogniser(e).addGestureRecogniser(e),e},h.setXOffset=function(e){return this._dComponent.attr("transform",u.svgTranslateAttrXY(e,u.getTranslateY(this._dComponent))),this},h.setOffset=function(e){return this._dComponent.attr("transform",u.svgTranslateAttrXY(e.x,e.y)),this},h.setVisible=function(e){return this._dComponent.classed("hidden",!e),e?this.showCaptureZone():this.hideCaptureZone(),this},h.destroy=function(){var e;for(e in this._recognisers)this._recognisers[e].destroy();this._recognisers=null,this.removeCaptureZone(),delete this.updateCaptureZone,this._dComponent&&(this._dComponent.remove(),this._dComponent=null)},Object.seal(h),Object.seal(t)})),define("module/core/js/view/component/svg/editanchor",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/util/svg","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){this._size=i||t.DEFAULT_SIZE,this._captureZoneElement=o,t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/view/component/svg/abstractsvgwrapper"),i=e("module/core/js/util/class"),o=e("module/core/js/view/userinput/eventpropagation"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/svg"),a=e("module/core/js/enum/zindexenum");i.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)},t.CORNER_RADIUS=9,t.DEFAULT_SIZE=9;var l=t.prototype;return l._size=null,l._captureZoneElement=null,l.updateCaptureZone=function(){return this._captureZone&&(this._captureZone.setDimensionsBasedOnElement(this._captureZoneElement||this._dComponent,this._captureZoneConstraints),this.onHover(this.updateHovered.bind(this,!0),this.updateHovered.bind(this,!1),this)),this},l._initDom=function(){this._dComponent=this._dContainer.append("rect").attr({x:-this._size/2,y:-this._size/2,width:this._size,height:this._size,rx:t.CORNER_RADIUS,ry:t.CORNER_RADIUS}),this.classed("editAnchor",!0),this._createCaptureZone(),this.withDefaultPadding(),this.updateCaptureZoneIndex(a.ANNOTATION_ANCHORS),this.setCaptureZonePropagation(o.BLOCK_ALL)},l.setPosition=function(e,t,n){return this._dComponent.attr("transform",s.svgTranslateAttrXY(e,t)+" "+s.svgRotateAttr(n||0)),this.updateCaptureZone(),this},l.updateHovered=r.delegate("_dComponent","classed","hovered"),Object.seal(l),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/interactionhelper",["require","lodash","module/core/js/view/userinput/contextmenurecogniser","module/core/js/view/userinput/eventpropagation","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/view/userinput/infinitecapturezone","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n){this._captureZoneManager=e,this._indexOfCurrentAnchor=t.getIndexOfFirstUnsetAttribute(),null!==this._indexOfCurrentAnchor&&(this.isActive=!0,this._updateCallback=n.update,this._endCallback=n.end,this._startCallback=n.start,this._contextCallback=n.contextMenu,this._annotationPresentationModel=t,this._editLayerCaptureZone=this._captureZoneManager.createZone(s,o.PROPAGATE_UNHANDLED,l.INTERACTIVE_DRAWING),this._tapGestureRecogniser=a.create(1,!0).withHandler(this._onTap,this),this._editLayerCaptureZone.addGestureRecogniser(this._tapGestureRecogniser),this._hoverGestureRecogniser=r.create().withHandler(this._onMove,this),this._editLayerCaptureZone.addGestureRecogniser(this._hoverGestureRecogniser),this._contextGestureRecogniser=i.create().withHandler(this._onContextMenu,this),this._editLayerCaptureZone.addGestureRecogniser(this._contextGestureRecogniser),this._startCallback&&this._startCallback())}var n=e("lodash"),i=e("module/core/js/view/userinput/contextmenurecogniser"),o=e("module/core/js/view/userinput/eventpropagation"),r=e("module/core/js/view/userinput/hovergesturerecogniser"),s=e("module/core/js/view/userinput/infinitecapturezone"),a=e("module/core/js/view/userinput/tapgesturerecogniser"),l=e("module/core/js/enum/zindexenum");t.create=function(e,n,i){return new t(e,n,i)};var u=t.prototype;return u.isActive=!1,u._indexOfCurrentAnchor=null,u._updateCallback=null,u._startCallback=null,u._endCallback=null,u._endCallback=n.noop,u._annotationPresentationModel=null,u._editLayerCaptureZone=null,u._tapGestureRecogniser=null,u._contextGestureRecogniser=null,u._hoverGestureRecogniser=null,u.destroy=function(){this._tapGestureRecogniser&&this._tapGestureRecogniser.destroy(),this._hoverGestureRecogniser&&this._hoverGestureRecogniser.destroy(),this._contextGestureRecogniser&&this._contextGestureRecogniser.destroy(),this._editLayerCaptureZone&&this._editLayerCaptureZone.destroy(),this.isActive=!1},u._onMove=function(e){this._updateCallback(this._indexOfCurrentAnchor,e)},u._onTap=function(e){this._onMove(e),this._indexOfCurrentAnchor=this._annotationPresentationModel.getIndexOfFirstUnsetAttribute(),null===this._indexOfCurrentAnchor&&(this.destroy(),this._endCallback())},u._onContextMenu=function(){this._contextCallback&&this._contextCallback()},u.withCursor=function(e,t){return this._editLayerCaptureZone&&this._editLayerCaptureZone.withCursorOnHover(e,t),this},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper",["require","module/annotations/js/view/model/abstractannotationpresentationmodel","module/annotations/js/view/model/annotationspresentationmodel","module/core/js/util/css","module/core/js/view/component/svg/editanchor","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/infinitecapturezone","module/annotations/js/view/renderer/helper/interactionhelper","module/core/js/util/math","module/core/js/util/oop","module/core/js/view/userinput/tapgesturerecogniser","module/annotations/js/trackeractions","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,o,r,s,a){this._presentationModel=e,this._dContainer=t.dContainer,this._subView=t.getSubView(),this._visibleRangeX=o.getXScale(),this._visibleRangeY=o.y,this._timeline=s.getTimeline(),this._captureZoneManager=r,this._annotationsPresentationModel=s,this._annotationsPresentationController=a,this._editAnchors=[],this._presentationModel.on(n.CHANGED,this._handleAnnotationChange,this),this._presentationModel.on(n.STYLE_CHANGED,this._updateStyles,this),this._presentationModel.on(n.HOVERED,this._handleHoveredChanged,this),this._annotationsPresentationModel.on(i.EDIT_MODE_ANNOTATION_CHANGED,this._handleEditModeAnnotationChanged,this),this._initDom()}var n=e("module/annotations/js/view/model/abstractannotationpresentationmodel"),i=e("module/annotations/js/view/model/annotationspresentationmodel"),o=e("module/core/js/util/css"),r=e("module/core/js/view/component/svg/editanchor"),s=e("module/core/js/view/userinput/eventpropagation"),a=e("module/core/js/util/functional"),l=e("module/core/js/view/userinput/infinitecapturezone"),u=e("module/annotations/js/view/renderer/helper/interactionhelper"),c=e("module/core/js/util/math"),d=e("module/core/js/util/oop"),h=e("module/core/js/view/userinput/tapgesturerecogniser"),p=e("module/annotations/js/trackeractions"),m=e("module/core/js/enum/zindexenum"),f=t.prototype;return f._redraw=!1,f._annotationsPresentationModel=null,f._annotationsPresentationController=null,f._captureZoneManager=null,f._dContainer=null,f._dAnnotation=null,f._editLayerCaptureZone=null,f._editLayerGestureRecogniser=null,f._presentationModel=null,f._subView=null,f._timeline=null,f._visibleRangeX=null,f._visibleRangeY=null,f._dragCoordinates=null,f._getNumberOfEditAnchors=d.abstractMethod,f._editAnchors=null,f.getAnnotationPresentationModel=a.getter("_presentationModel"),f._draw=d.abstractMethod,f._interactiveEditModeCursor=null,f.updateAnchor=function(e,t){var n=this._getCursorPointFromRecogniser(t),i=this.snap(n.x,n.y);this._setAnchorAtIndexBasedOnPoint(i,e)},f.initialiseInteractiveEditMode=function(){this._interactionHelper=u.create(this._captureZoneManager,this._presentationModel,{start:this._startInteractiveMode.bind(this),update:this._updateCursorAndAnchor.bind(this),end:this._handleInteractiveEditModeFinished.bind(this),contextMenu:a.delegate("_annotationsPresentationController","cancelInteractiveEditMode").bind(this,p.ACTION_ORIGINS.RIGHT_CLICK)})},f._initDom=function(){this._initEditModeDom(),this._updateStyles(),this._draw(),this._registerDoubleTapHandler()},f._onAnnotationDoubleTap=a.delegate("_annotationsPresentationController","onAnnotationDoubleTap"),f._handleInteractiveEditModeFinished=a.delegate("_annotationsPresentationController","finishInteractiveEditMode"),f._registerDoubleTapHandler=function(){a.invokeCall([].concat(this._getDraggableElements()),"onDoubleTap",this._onAnnotationDoubleTap.bind(this,this._presentationModel))},f._startInteractiveMode=function(){this._disableHoverCursor(),this._updateCursor()},f._updateCursor=function(){o.setChartCursor(this._dAnnotation,this._interactiveEditModeCursor)},f._updateCursorAndAnchor=function(e,t){this._updateCursor(),this.updateAnchor(e,t)},f.finishInteractiveEditMode=function(){this._restoreCursor(),this._enableHoverCursor(),this._draw()},f._restoreCursor=function(){o.setChartCursor(this._dAnnotation,o.CURSOR_TYPE.DEFAULT)},f._enableHoverCursor=function(){this._editAnchors.forEach((function(e){e.withCursorOnHover(o.CURSOR_TYPE.CROSSHAIR),e.withCursorOnDragging(o.CURSOR_TYPE.CROSSHAIR)}),this),this._withCursorOnHover(o.CURSOR_TYPE.GRAB)},f._disableHoverCursor=function(){this._editAnchors.forEach((function(e){e.withoutCursorOnHover()}),this),this._withoutCursorOnHover()},f.destroy=function(){this._dAnnotation&&(this._dAnnotation.remove(),this._dAnnotation=null),this._removeEditLayer(),this._presentationModel.un(null,this),this._annotationsPresentationModel.un(null,this),this._interactionHelper&&(this._interactionHelper.destroy(),this._interactionHelper=null),this._removeEditAnchors(),this._editAnchors=null,this._setEditEnabled(!1)},f.render=function(){this._redraw&&(this._draw(),this._redraw=!1)},f._draw=d.abstractMethod,f._isInteractiveEditModeActive=function(){return this._interactionHelper&&this._interactionHelper.isActive},f._bringToTop=function(){this._dContainer.appendElement(this._dAnnotation.node())},f._updateStyles=d.abstractMethod,f._enterHover=function(){this._dAnnotation.classed("highlighted",!0),this._showEditAnchors(),this._draw()},f._exitHover=function(){this._dAnnotation.classed("highlighted",!1),this._removeEditAnchors(),this._setEditEnabled(!1)},f._enterEditMode=function(e){this._dAnnotation.classed("highlighted",!0),this._bringToTop(),this._editLayerGestureRecogniser=h.create(1,!1!==e).withHandler(this._onEditLayerTapGesture,this),this._editLayerCaptureZone=this._captureZoneManager.createZone(l,s.PROPAGATE_UNHANDLED,m.SHARED_DISMISSAL_CAPTURE_ZONE).addGestureRecogniser(this._editLayerGestureRecogniser),this._presentationModel.isHovered()||this._showEditAnchors()},f._exitEditMode=function(){this._dAnnotation.classed("highlighted",!1),this._removeEditLayer(),this._presentationModel.setActive(!1),this._presentationModel.isHovered()||(this._removeEditAnchors(),this._setEditEnabled(!1))},f._handleHoveredChanged=function(){this._presentationModel.isActive()||(this._presentationModel.isHovered()?this._enterHover():this._exitHover())},f._handleAnnotationChange=function(){this._redraw=!0},f._createEditAnchors=function(){for(var e=0;e<this._getNumberOfEditAnchors();e++)this._editAnchors.push(this._createEditAnchor(e))},f._showEditAnchors=function(){this._createEditAnchors(),this._setEditEnabled(!0),this._enableHoverCursor()},f._createEditAnchor=function(e){return r.create(this._dAnnotation,this._captureZoneManager).onDragStart(this._setAnnotationAsActive,this).onDrag(this.updateAnchor.bind(this,e),this).onContextMenu(this._contextMenu,this).setVisible(!1)},f._removeEditAnchors=function(){a.invokeCall(this._editAnchors,"destroy"),this._editAnchors=[]},f._handleEditModeAnnotationChanged=function(e,t){e===this._presentationModel?(this._enterEditMode(),this._draw(),this._updateSelectionCaptureZoneZIndex(m.ANNOTATION_EDIT_MODE_ACTIVE)):(t===this._presentationModel&&(this._exitEditMode(),this._draw()),null!==e?this._updateSelectionCaptureZoneZIndex(m.ANNOTATION_EDIT_MODE_SELECTION):this._updateSelectionCaptureZoneZIndex(m.ANNOTATION_SELECTION))},f._onDragPanGestureStart=function(){this._dragCoordinates=this._presentationModel.getAnchors().map(function(e){return{x:this._visibleRangeX(this._timeline.asAccTime(e.timestamp,!0)),y:this._visibleRangeY(e.level)}}.bind(this)),this._setAnnotationAsActive()},f._onDragPanGesture=function(e){var t,n;for(t=0;t<this._presentationModel.getAnchors().length;t++)n=this._getAnchorPositionWhileDragging(t,e),this._setAnchorAtIndexBasedOnPoint(n,t)},f._getAnchorPositionWhileDragging=function(e,t){var n,i;return n=this._dragCoordinates[e].x+t.deltaX,i=this._dragCoordinates[e].y+t.deltaY,{x:n,y:i}},f._updateEditAnchors=function(e){for(var t=0;t<e.length;t++)e[t]&&this._editAnchors[t]&&this._editAnchors[t].setPosition(e[t].x,e[t].y).setCaptureZoneConstraints(this._subView.dimensions).setVisible(!0)},f._getAnchorPointCoordinates=function(){for(var e=[],t=0;t<this._presentationModel.getAnchors().length;t++)e.push(c.isNumber(this._presentationModel.getAnchor(t).level)?{x:this._visibleRangeX(this._timeline.asAccTime(this._presentationModel.getAnchor(t).timestamp,!0)),y:this._visibleRangeY(this._presentationModel.getAnchor(t).level)}:null);return e},f._setAnchorAtIndexBasedOnPoint=function(e,t){this._presentationModel.setAnchor(this._timeline.asDate(this._visibleRangeX.invert(e.x)),this._visibleRangeY.invert(e.y),t)},f._getCursorPointFromRecogniser=function(e){var t=e.x-this._subView.dimensions.x,n=e.y-this._subView.dimensions.y,i=this._visibleRangeX.range()[1],o=this._visibleRangeY.range()[1];return t=Math.max(t,1),t=Math.min(t,i-1),n=Math.max(n,1),n=Math.min(n,o-1),{x:t,y:n}},f._initEditModeDom=function(){this._annotationsPresentationModel.getEditModeAnnotation()===this._presentationModel?this._enterEditMode():this._exitEditMode()},f._onEditLayerTapGesture=function(){this._annotationsPresentationController.requestEditModeChange(null)},f._removeEditLayer=function(){this._editLayerCaptureZone&&(this._editLayerCaptureZone.removeGestureRecogniser(this._editLayerGestureRecogniser),this._editLayerGestureRecogniser.destroy(),this._editLayerGestureRecogniser=null,this._editLayerCaptureZone.destroy(),this._editLayerCaptureZone=null)},f._onTap=function(){this._setAnnotationAsActive()},f._mouseIn=function(){this._annotationsPresentationModel.updateHoverSelection(this._presentationModel,!0)},f._mouseOut=function(){this._annotationsPresentationModel.updateHoverSelection(this._presentationModel,!1)},f._contextMenu=function(e){this._setAnnotationAsActive(),this._presentationModel.contextMenu(e)},f._setAnnotationAsActive=function(){this._presentationModel.isActive()||this._annotationsPresentationController.requestEditModeChange(this._presentationModel)},f.snap=function(e,t){return this._annotationsPresentationController.snapToNearestDataPoint(e,t)},f._anchorToChartPoint=function(e){return!1===e.isSet()?null:this._subView.visibleWindow.toChartPoint({timestamp:e.timestamp,level:e.level})},f._updateSelectionCaptureZoneZIndex=d.abstractMethod,f._setEditEnabled=function(e){a.invokeCall([].concat(this._getDraggableElements()),"setEditEnabled",e)},f._withCursorOnHover=function(e){a.invokeCall([].concat(this._getDraggableElements()),"withCursorOnHover",e)},f._withoutCursorOnHover=function(){a.invokeCall([].concat(this._getDraggableElements()),"withoutCursorOnHover")},f._getDraggableElements=function(){return[]},t._cssStyleClasses="annotationColourStyleDefault annotationColourStyle1 annotationColourStyle2 annotationColourStyle3 annotationColourStyle4 annotationColourStyle5 annotationColourStyle6",Object.seal(f),Object.seal(t)})),define("module/core/js/view/component/svg/arrow",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/view/component/svg/abstractsvgwrapper");e("module/core/js/util/class").extend(t,n),t.create=function(e,n){return new t(e,n)};var i=t.prototype;return i._initDom=function(){this._dComponent=this._dContainer.append("path").classed("arrowHead",!0)},i.setPath=function(e){return this._dComponent.attr("d",e),this},Object.seal(i),Object.seal(t)})),define("module/colour-customisation/js/view/customisationstyler",["require","module/colour-customisation/js/constants","module/core/js/util/math","module/core/js/settings/settingsevents"],(function(e){"use strict";function t(e,t){this._chartSelector='.htmlChart[id="'+t.getRootContainer().attr("id")+'"]',this._dStyleElement=t.getContainer("customisation-styles"),this._settingsManager=e,this._settingsManager.on(o.LAYOUT_SETTINGS_CHANGED,this.generateStyles,this)}var n=e("module/colour-customisation/js/constants"),i=e("module/core/js/util/math"),o=e("module/core/js/settings/settingsevents");t.create=function(e,n){new t(e,n)},t.CSS_WIDTH=Object.freeze({narrow:1,medium:2,thick:3}),t.CSS_STYLE=Object.freeze({solid:"none",dashed:"8,8",dotted:"1,5"}),t.strokeStyles=function(e,o){return e.isVisible?(o?"":"stroke: "+e.colour+"; ")+(e.style!==n.STYLE.SOLID?"stroke-dasharray: "+t.CSS_STYLE[e.style]+"; ":"")+(e.style===n.STYLE.DOTTED?"stroke-linecap: round; ":"")+"stroke-width: "+i.roundFloatingPointError(t.CSS_WIDTH[e.width])+"; ":"display: none; "};var r=t.prototype;return r._chartSelector=".htmlChart",r.generateStyles=function(){var e=this._settingsManager.getColourCustomisationSettings()
;this._dStyleElement.text([this._generateCandlestickStyles(e.candlestick),this._generateLineStyles(e.line),this._generateHlocStyles(e.hloc),this._generateMountainStyles(e.mountain),this._generateIndicatorStyle([this._generateLineStyle(".group-AROON",".aroonUp",e.indicators.AROON.up.line,!1),this._generateLineStyle(".group-AROON",".aroonDown",e.indicators.AROON.down.line,!1),this._generateCloudStyle(".group-AROON",".aroonCloud",e.indicators.AROON.up.cloud.colour,e.indicators.AROON.down.cloud.colour,e.indicators.AROON.up.cloud.isVisible,e.indicators.AROON.down.cloud.isVisible),this._generateTooltipStyle(".AROON",".aroonUp",e.indicators.AROON.up.line.colour,e.indicators.AROON.up.line.isVisible),this._generateTooltipStyle(".AROON",".aroonDown",e.indicators.AROON.down.line.colour,e.indicators.AROON.down.line.isVisible)]),this._generateIndicatorStyle([this._generateLineWithFillStyle(".group-ATR",".averageTrueRange",e.indicators.ATR),this._generateTooltipStyle(".ATR","",e.indicators.ATR.line.colour,e.indicators.ATR.line.isVisible)]),this._generateIndicatorStyle([this._generateBarStyle(".group-AWESOME",e.indicators.AWESOME.up.colour,e.indicators.AWESOME.up.isVisible,e.indicators.AWESOME.down.colour,e.indicators.AWESOME.down.isVisible),this._generateTooltipStyle(".AWESOME",".awesome.up",e.indicators.AWESOME.up.colour,e.indicators.AWESOME.up.isVisible),this._generateTooltipStyle(".AWESOME",".awesome.down",e.indicators.AWESOME.down.colour,e.indicators.AWESOME.down.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-BOL",".bollingerPositiveBand",e.indicators.BOL.positiveBand,!1),this._generateLineStyle(".group-BOL",".bollingerMovingAverageBand",e.indicators.BOL.movingAverageBand,!1),this._generateLineStyle(".group-BOL",".bollingerNegativeBand",e.indicators.BOL.negativeBand,!1),this._generateCloudStyle(".group-BOL",".bollingerChannel",e.indicators.BOL.fill.colour,e.indicators.BOL.fill.colour,e.indicators.BOL.fill.isVisible,e.indicators.BOL.fill.isVisible),this._generateDialogLabelStyle(".BOL",".period",e.indicators.BOL.movingAverageBand.colour),this._generateDialogLabelStyle(".BOL",".standardDeviation",e.indicators.BOL.movingAverageBand.colour),this._generateTooltipStyle(".BOL",".bollingerPositiveBand",e.indicators.BOL.positiveBand.colour,e.indicators.BOL.positiveBand.isVisible),this._generateTooltipStyle(".BOL",".bollingerMovingAverageBand",e.indicators.BOL.movingAverageBand.colour,e.indicators.BOL.movingAverageBand.isVisible),this._generateTooltipStyle(".BOL",".bollingerNegativeBand",e.indicators.BOL.negativeBand.colour,e.indicators.BOL.negativeBand.isVisible)]),this._generateIndicatorStyle([this._generateLineWithFillStyle(".group-CHAIKIN",".chaikinVolatility",e.indicators.CHAIKIN),this._generateTooltipStyle(".CHAIKIN","",e.indicators.CHAIKIN.line.colour,e.indicators.CHAIKIN.line.isVisible)]),this._generateIndicatorStyle([this._generateGradientStyle(".group-CCI",e.indicators.CCI.up,e.indicators.CCI.down),this._generateLineStyle(".group-CCI",".cci",e.indicators.CCI.line,!0),this._generateColourlessTooltipStyle(".CCI",".cci",e.indicators.CCI.line.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-DONCHIAN",".donchianUp",e.indicators.DONCHIAN.up,!1),this._generateLineStyle(".group-DONCHIAN",".donchianMiddle",e.indicators.DONCHIAN.middle,!1),this._generateLineStyle(".group-DONCHIAN",".donchianDown",e.indicators.DONCHIAN.down,!1),this._generateCloudStyle(".group-DONCHIAN",".donchianChannel",e.indicators.DONCHIAN.fill.colour,e.indicators.DONCHIAN.fill.colour,e.indicators.DONCHIAN.fill.isVisible,e.indicators.DONCHIAN.fill.isVisible),this._generateDialogLabelStyle(".DONCHIAN",".period",e.indicators.DONCHIAN.middle.colour),this._generateTooltipStyle(".DONCHIAN",".donchianUp",e.indicators.DONCHIAN.up.colour,e.indicators.DONCHIAN.up.isVisible),this._generateTooltipStyle(".DONCHIAN",".donchianMiddle",e.indicators.DONCHIAN.middle.colour,e.indicators.DONCHIAN.middle.isVisible),this._generateTooltipStyle(".DONCHIAN",".donchianDown",e.indicators.DONCHIAN.down.colour,e.indicators.DONCHIAN.down.isVisible)]),this._generateIndicatorStyle([this._generateGradientStyle(".group-DPO",e.indicators.DPO.up,e.indicators.DPO.down),this._generateLineStyle(".group-DPO",".dpo",e.indicators.DPO.line,!0),this._generateTooltipStyle(".DPO",".dpo.up",e.indicators.DPO.up.lineColour.colour,e.indicators.DPO.up.lineColour.isVisible),this._generateTooltipStyle(".DPO",".dpo.down",e.indicators.DPO.down.lineColour.colour,e.indicators.DPO.down.lineColour.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-DMI",".diPlus",e.indicators.DMI.diPlus,!1),this._generateLineStyle(".group-DMI",".diMinus",e.indicators.DMI.diMinus,!1),this._generateLineStyle(".group-DMI",".adx",e.indicators.DMI.adx,!1),this._generateBarStyle(".group-DMI",e.indicators.DMI.histogram.up.colour,e.indicators.DMI.histogram.up.isVisible,e.indicators.DMI.histogram.down.colour,e.indicators.DMI.histogram.down.isVisible),this._generateTooltipStyle(".DMI",".diPlus",e.indicators.DMI.diPlus.colour,e.indicators.DMI.diPlus.isVisible),this._generateTooltipStyle(".DMI",".diHistogram.up",e.indicators.DMI.histogram.up.colour,e.indicators.DMI.histogram.up.isVisible),this._generateTooltipStyle(".DMI",".diMinus",e.indicators.DMI.diMinus.colour,e.indicators.DMI.diMinus.isVisible),this._generateTooltipStyle(".DMI",".diHistogram.down",e.indicators.DMI.histogram.down.colour,e.indicators.DMI.histogram.down.isVisible),this._generateTooltipStyle(".DMI",".adx",e.indicators.DMI.adx.colour,e.indicators.DMI.adx.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-EMA",".exponentialMovingAverage1",e.indicators.EMA.ema1,!1),this._generateLineStyle(".group-EMA",".exponentialMovingAverage2",e.indicators.EMA.ema2,!1),this._generateLineStyle(".group-EMA",".exponentialMovingAverage3",e.indicators.EMA.ema3,!1),this._generateLineStyle(".group-EMA",".exponentialMovingAverage4",e.indicators.EMA.ema4,!1),this._generateLineStyle(".group-EMA",".exponentialMovingAverage5",e.indicators.EMA.ema5,!1),this._generateLineStyle(".group-EMA",".exponentialMovingAverage6",e.indicators.EMA.ema6,!1),this._generateLineStyle(".group-EMA",".exponentialMovingAverage7",e.indicators.EMA.ema7,!1),this._generateLineStyle(".group-EMA",".exponentialMovingAverage8",e.indicators.EMA.ema8,!1),this._generateBijectiveDialogLabelStyle(".EMA",".period1",e.indicators.EMA.ema1.colour,e.indicators.EMA.ema1.isVisible),this._generateBijectiveDialogLabelStyle(".EMA",".period2",e.indicators.EMA.ema2.colour,e.indicators.EMA.ema2.isVisible),this._generateBijectiveDialogLabelStyle(".EMA",".period3",e.indicators.EMA.ema3.colour,e.indicators.EMA.ema3.isVisible),this._generateBijectiveDialogLabelStyle(".EMA",".period4",e.indicators.EMA.ema4.colour,e.indicators.EMA.ema4.isVisible),this._generateBijectiveDialogLabelStyle(".EMA",".period5",e.indicators.EMA.ema5.colour,e.indicators.EMA.ema5.isVisible),this._generateBijectiveDialogLabelStyle(".EMA",".period6",e.indicators.EMA.ema6.colour,e.indicators.EMA.ema6.isVisible),this._generateBijectiveDialogLabelStyle(".EMA",".period7",e.indicators.EMA.ema7.colour,e.indicators.EMA.ema7.isVisible),this._generateBijectiveDialogLabelStyle(".EMA",".period8",e.indicators.EMA.ema8.colour,e.indicators.EMA.ema8.isVisible),this._generateTooltipStyle(".EMA",".exponentialMovingAverage1",e.indicators.EMA.ema1.colour,e.indicators.EMA.ema1.isVisible),this._generateTooltipStyle(".EMA",".exponentialMovingAverage2",e.indicators.EMA.ema2.colour,e.indicators.EMA.ema2.isVisible),this._generateTooltipStyle(".EMA",".exponentialMovingAverage3",e.indicators.EMA.ema3.colour,e.indicators.EMA.ema3.isVisible),this._generateTooltipStyle(".EMA",".exponentialMovingAverage4",e.indicators.EMA.ema4.colour,e.indicators.EMA.ema4.isVisible),this._generateTooltipStyle(".EMA",".exponentialMovingAverage5",e.indicators.EMA.ema5.colour,e.indicators.EMA.ema5.isVisible),this._generateTooltipStyle(".EMA",".exponentialMovingAverage6",e.indicators.EMA.ema6.colour,e.indicators.EMA.ema6.isVisible),this._generateTooltipStyle(".EMA",".exponentialMovingAverage7",e.indicators.EMA.ema7.colour,e.indicators.EMA.ema7.isVisible),this._generateTooltipStyle(".EMA",".exponentialMovingAverage8",e.indicators.EMA.ema8.colour,e.indicators.EMA.ema8.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-ICHIMOKU",".chikou",e.indicators.ICHIMOKU.chikou,!1),this._generateLineStyle(".group-ICHIMOKU",".tenkan",e.indicators.ICHIMOKU.tenkan,!1),this._generateLineStyle(".group-ICHIMOKU",".kijun",e.indicators.ICHIMOKU.kijun,!1),this._generateLineStyle(".group-ICHIMOKU",".spana",e.indicators.ICHIMOKU.spanA,!1),this._generateLineStyle(".group-ICHIMOKU",".spanb",e.indicators.ICHIMOKU.spanB,!1),this._generateCloudStyle(".group-ICHIMOKU",".kumo",e.indicators.ICHIMOKU.cloudUp.colour,e.indicators.ICHIMOKU.cloudDown.colour,e.indicators.ICHIMOKU.cloudUp.isVisible,e.indicators.ICHIMOKU.cloudDown.isVisible),this._generateTooltipStyle(".ICHIMOKU",".chikou",e.indicators.ICHIMOKU.chikou.colour,e.indicators.ICHIMOKU.chikou.isVisible),this._generateTooltipStyle(".ICHIMOKU",".tenkan",e.indicators.ICHIMOKU.tenkan.colour,e.indicators.ICHIMOKU.tenkan.isVisible),this._generateTooltipStyle(".ICHIMOKU",".kijun",e.indicators.ICHIMOKU.kijun.colour,e.indicators.ICHIMOKU.kijun.isVisible),this._generateTooltipStyle(".ICHIMOKU",".spana",e.indicators.ICHIMOKU.spanA.colour,e.indicators.ICHIMOKU.spanA.isVisible),this._generateTooltipStyle(".ICHIMOKU",".spanb",e.indicators.ICHIMOKU.spanB.colour,e.indicators.ICHIMOKU.spanB.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-KDJ",".stochasticK",e.indicators.KDJ.stochasticK,!1),this._generateLineStyle(".group-KDJ",".stochasticD",e.indicators.KDJ.stochasticD,!1),this._generateLineStyle(".group-KDJ",".stochasticJ",e.indicators.KDJ.stochasticJ,!1),this._generateTooltipStyle(".KDJ",".KDJStochasticK",e.indicators.KDJ.stochasticK.colour,e.indicators.KDJ.stochasticK.isVisible),this._generateTooltipStyle(".KDJ",".KDJStochasticD",e.indicators.KDJ.stochasticD.colour,e.indicators.KDJ.stochasticD.isVisible),this._generateTooltipStyle(".KDJ",".KDJStochasticJ",e.indicators.KDJ.stochasticJ.colour,e.indicators.KDJ.stochasticJ.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-KELTNER",".keltnerUp",e.indicators.KELTNER.up,!1),this._generateLineStyle(".group-KELTNER",".keltnerMiddle",e.indicators.KELTNER.middle,!1),this._generateLineStyle(".group-KELTNER",".keltnerDown",e.indicators.KELTNER.down,!1),this._generateCloudStyle(".group-KELTNER",".keltnerChannel",e.indicators.KELTNER.fill.colour,e.indicators.KELTNER.fill.colour,e.indicators.KELTNER.fill.isVisible,e.indicators.KELTNER.fill.isVisible),this._generateDialogLabelStyle(".KELTNER",".period",e.indicators.KELTNER.middle.colour),this._generateTooltipStyle(".KELTNER",".keltnerUp",e.indicators.KELTNER.up.colour,e.indicators.KELTNER.up.isVisible),this._generateTooltipStyle(".KELTNER",".keltnerMiddle",e.indicators.KELTNER.middle.colour,e.indicators.KELTNER.middle.isVisible),this._generateTooltipStyle(".KELTNER",".keltnerDown",e.indicators.KELTNER.down.colour,e.indicators.KELTNER.down.isVisible)]),this._generateIndicatorStyle([this._generateBarStyle(".group-MACD",e.indicators.MACD.histogram.up.colour,e.indicators.MACD.histogram.up.isVisible,e.indicators.MACD.histogram.down.colour,e.indicators.MACD.histogram.down.isVisible),this._generateLineStyle(".group-MACD",".macdLine",e.indicators.MACD.macd,!1),this._generateLineStyle(".group-MACD",".macdSignal",e.indicators.MACD.signal,!1),this._generateTooltipStyle(".MACD",".macdHistogram.up",e.indicators.MACD.histogram.up.colour,e.indicators.MACD.histogram.up.isVisible),this._generateTooltipStyle(".MACD",".macdHistogram.down",e.indicators.MACD.histogram.down.colour,e.indicators.MACD.histogram.down.isVisible),this._generateTooltipStyle(".MACD",".macd",e.indicators.MACD.macd.colour,e.indicators.MACD.macd.isVisible),this._generateTooltipStyle(".MACD",".macdSignal",e.indicators.MACD.signal.colour,e.indicators.MACD.signal.isVisible)]),this._generateIndicatorStyle([this._generateGradientStyle(".group-MOMENTUM",e.indicators.MOMENTUM.up,e.indicators.MOMENTUM.down),this._generateLineStyle(".group-MOMENTUM",".momentum",e.indicators.MOMENTUM.line,!0),this._generateTooltipStyle(".MOMENTUM",".momentum.up",e.indicators.MOMENTUM.up.lineColour.colour,e.indicators.MOMENTUM.up.lineColour.isVisible),this._generateTooltipStyle(".MOMENTUM",".momentum.down",e.indicators.MOMENTUM.down.lineColour.colour,e.indicators.MOMENTUM.down.lineColour.isVisible)]),this._generateIndicatorStyle([this._generateGradientStyle(".group-MFI",e.indicators.MFI.up,e.indicators.MFI.down),this._generateLineStyle(".group-MFI",".moneyFlowIndex",e.indicators.MFI.line,!0),this._generateColourlessTooltipStyle(".MFI",".moneyFlowIndex",e.indicators.MFI.line.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-MVAVG",".movingAverage1",e.indicators.MVAVG.movingAverage1,!1),this._generateLineStyle(".group-MVAVG",".movingAverage2",e.indicators.MVAVG.movingAverage2,!1),this._generateLineStyle(".group-MVAVG",".movingAverage3",e.indicators.MVAVG.movingAverage3,!1),this._generateLineStyle(".group-MVAVG",".movingAverage4",e.indicators.MVAVG.movingAverage4,!1),this._generateLineStyle(".group-MVAVG",".movingAverage5",e.indicators.MVAVG.movingAverage5,!1),this._generateLineStyle(".group-MVAVG",".movingAverage6",e.indicators.MVAVG.movingAverage6,!1),this._generateLineStyle(".group-MVAVG",".movingAverage7",e.indicators.MVAVG.movingAverage7,!1),this._generateLineStyle(".group-MVAVG",".movingAverage8",e.indicators.MVAVG.movingAverage8,!1),this._generateBijectiveDialogLabelStyle(".MVAVG",".period1",e.indicators.MVAVG.movingAverage1.colour,e.indicators.MVAVG.movingAverage1.isVisible),this._generateBijectiveDialogLabelStyle(".MVAVG",".period2",e.indicators.MVAVG.movingAverage2.colour,e.indicators.MVAVG.movingAverage2.isVisible),this._generateBijectiveDialogLabelStyle(".MVAVG",".period3",e.indicators.MVAVG.movingAverage3.colour,e.indicators.MVAVG.movingAverage3.isVisible),this._generateBijectiveDialogLabelStyle(".MVAVG",".period4",e.indicators.MVAVG.movingAverage4.colour,e.indicators.MVAVG.movingAverage4.isVisible),this._generateBijectiveDialogLabelStyle(".MVAVG",".period5",e.indicators.MVAVG.movingAverage5.colour,e.indicators.MVAVG.movingAverage5.isVisible),this._generateBijectiveDialogLabelStyle(".MVAVG",".period6",e.indicators.MVAVG.movingAverage6.colour,e.indicators.MVAVG.movingAverage6.isVisible),this._generateBijectiveDialogLabelStyle(".MVAVG",".period7",e.indicators.MVAVG.movingAverage7.colour,e.indicators.MVAVG.movingAverage7.isVisible),this._generateBijectiveDialogLabelStyle(".MVAVG",".period8",e.indicators.MVAVG.movingAverage8.colour,e.indicators.MVAVG.movingAverage8.isVisible),this._generateTooltipStyle(".MVAVG",".movingAverage1",e.indicators.MVAVG.movingAverage1.colour,e.indicators.MVAVG.movingAverage1.isVisible),this._generateTooltipStyle(".MVAVG",".movingAverage2",e.indicators.MVAVG.movingAverage2.colour,e.indicators.MVAVG.movingAverage2.isVisible),this._generateTooltipStyle(".MVAVG",".movingAverage3",e.indicators.MVAVG.movingAverage3.colour,e.indicators.MVAVG.movingAverage3.isVisible),this._generateTooltipStyle(".MVAVG",".movingAverage4",e.indicators.MVAVG.movingAverage4.colour,e.indicators.MVAVG.movingAverage4.isVisible),this._generateTooltipStyle(".MVAVG",".movingAverage5",e.indicators.MVAVG.movingAverage5.colour,e.indicators.MVAVG.movingAverage5.isVisible),this._generateTooltipStyle(".MVAVG",".movingAverage6",e.indicators.MVAVG.movingAverage6.colour,e.indicators.MVAVG.movingAverage6.isVisible),this._generateTooltipStyle(".MVAVG",".movingAverage7",e.indicators.MVAVG.movingAverage7.colour,e.indicators.MVAVG.movingAverage7.isVisible),this._generateTooltipStyle(".MVAVG",".movingAverage8",e.indicators.MVAVG.movingAverage8.colour,e.indicators.MVAVG.movingAverage8.isVisible)]),this._generateIndicatorStyle([this._generateDotStyle(".group-SAR",".parabolicSar",e.indicators.SAR.up.colour,e.indicators.SAR.up.isVisible,e.indicators.SAR.down.colour,e.indicators.SAR.down.isVisible),this._generateDialogLabelStyle(".SAR","",e.indicators.SAR.up.colour),this._generateTooltipStyle(".SAR",".up",e.indicators.SAR.up.colour,e.indicators.SAR.up.isVisible),this._generateTooltipStyle(".SAR",".down",e.indicators.SAR.down.colour,e.indicators.SAR.down.isVisible)]),this._generateIndicatorStyle([this._generatePathAndLabelStyle(".group-PIVOT",".pivot",".pivotLabel",e.indicators.PIVOT.pivot),this._generatePathAndLabelStyle(".group-PIVOT",".r1",".r1Label",e.indicators.PIVOT.r1),this._generatePathAndLabelStyle(".group-PIVOT",".r2",".r2Label",e.indicators.PIVOT.r2),this._generatePathAndLabelStyle(".group-PIVOT",".r3",".r3Label",e.indicators.PIVOT.r3),this._generatePathAndLabelStyle(".group-PIVOT",".s1",".s1Label",e.indicators.PIVOT.s1),this._generatePathAndLabelStyle(".group-PIVOT",".s2",".s2Label",e.indicators.PIVOT.s2),this._generatePathAndLabelStyle(".group-PIVOT",".s3",".s3Label",e.indicators.PIVOT.s3),this._generateTooltipStyle(".PIVOT",".pivot",e.indicators.PIVOT.pivot.colour,e.indicators.PIVOT.pivot.isVisible),this._generateTooltipStyle(".PIVOT",".r1",e.indicators.PIVOT.r1.colour,e.indicators.PIVOT.r1.isVisible),this._generateTooltipStyle(".PIVOT",".r2",e.indicators.PIVOT.r2.colour,e.indicators.PIVOT.r2.isVisible),this._generateTooltipStyle(".PIVOT",".r3",e.indicators.PIVOT.r3.colour,e.indicators.PIVOT.r3.isVisible),this._generateTooltipStyle(".PIVOT",".s1",e.indicators.PIVOT.s1.colour,e.indicators.PIVOT.s1.isVisible),this._generateTooltipStyle(".PIVOT",".s2",e.indicators.PIVOT.s2.colour,e.indicators.PIVOT.s2.isVisible),this._generateTooltipStyle(".PIVOT",".s3",e.indicators.PIVOT.s3.colour,e.indicators.PIVOT.s3.isVisible)]),this._generateIndicatorStyle([this._generateGradientStyle(".group-ROC",e.indicators.ROC.up,e.indicators.ROC.down),this._generateLineStyle(".group-ROC",".roc",e.indicators.ROC.line,!0),this._generateTooltipStyle(".ROC",".roc.up",e.indicators.ROC.up.lineColour.colour,e.indicators.ROC.up.lineColour.isVisible),this._generateTooltipStyle(".ROC",".roc.down",e.indicators.ROC.down.lineColour.colour,e.indicators.ROC.down.lineColour.isVisible)]),this._generateIndicatorStyle([this._generateGradientStyle(".group-RSI",e.indicators.RSI.up,e.indicators.RSI.down),this._generateLineStyle(".group-RSI",".relativeStrengthIndex",e.indicators.RSI.line,!0),this._generateColourlessTooltipStyle(".RSI",".relativeStrengthIndex",e.indicators.RSI.line.isVisible)]),this._generateIndicatorStyle([this._generateLineWithFillStyle(".group-STDEV",".standardDeviation",e.indicators.STDEV),this._generateTooltipStyle(".STDEV","",e.indicators.STDEV.line.colour,e.indicators.STDEV.line.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-STOCH",".stochasticK",e.indicators.STOCH.stochasticK,!1),this._generateLineStyle(".group-STOCH",".stochasticD",e.indicators.STOCH.stochasticD,!1),this._generateTooltipStyle(".STOCH",".stochasticD",e.indicators.STOCH.stochasticD.colour,e.indicators.STOCH.stochasticD.isVisible),this._generateTooltipStyle(".STOCH",".stochasticK",e.indicators.STOCH.stochasticK.colour,e.indicators.STOCH.stochasticK.isVisible)]),this._generateIndicatorStyle([this._generateSuperTrendStyles(e.indicators.SUPERTREND),this._generateTooltipStyle(".SUPERTREND",".superTrend",e.indicators.SUPERTREND.colour,e.indicators.SUPERTREND.isVisible)]),this._generateIndicatorStyle([this._generateBarStyle(".group-VOLUME",e.indicators.VOLUME.up.colour,e.indicators.VOLUME.up.isVisible,e.indicators.VOLUME.down.colour,e.indicators.VOLUME.down.isVisible,e.indicators.VOLUME.fill.colour,e.indicators.VOLUME.fill.isVisible),this._generateTooltipStyle(".VOLUME",".volume",e.indicators.VOLUME.fill.colour,e.indicators.VOLUME.fill.isVisible),this._generateTooltipStyle(".VOLUME",".volume.up",e.indicators.VOLUME.up.colour,e.indicators.VOLUME.up.isVisible),this._generateTooltipStyle(".VOLUME",".volume.down",e.indicators.VOLUME.down.colour,e.indicators.VOLUME.down.isVisible)]),this._generateIndicatorStyle([this._generateLineStyle(".group-WMA",".weightedMovingAverage1",e.indicators.WMA.wma1,!1),this._generateLineStyle(".group-WMA",".weightedMovingAverage2",e.indicators.WMA.wma2,!1),this._generateLineStyle(".group-WMA",".weightedMovingAverage3",e.indicators.WMA.wma3,!1),this._generateLineStyle(".group-WMA",".weightedMovingAverage4",e.indicators.WMA.wma4,!1),this._generateLineStyle(".group-WMA",".weightedMovingAverage5",e.indicators.WMA.wma5,!1),this._generateLineStyle(".group-WMA",".weightedMovingAverage6",e.indicators.WMA.wma6,!1),this._generateLineStyle(".group-WMA",".weightedMovingAverage7",e.indicators.WMA.wma7,!1),this._generateLineStyle(".group-WMA",".weightedMovingAverage8",e.indicators.WMA.wma8,!1),this._generateBijectiveDialogLabelStyle(".WMA",".period1",e.indicators.WMA.wma1.colour,e.indicators.WMA.wma1.isVisible),this._generateBijectiveDialogLabelStyle(".WMA",".period2",e.indicators.WMA.wma2.colour,e.indicators.WMA.wma2.isVisible),this._generateBijectiveDialogLabelStyle(".WMA",".period3",e.indicators.WMA.wma3.colour,e.indicators.WMA.wma3.isVisible),this._generateBijectiveDialogLabelStyle(".WMA",".period4",e.indicators.WMA.wma4.colour,e.indicators.WMA.wma4.isVisible),this._generateBijectiveDialogLabelStyle(".WMA",".period5",e.indicators.WMA.wma5.colour,e.indicators.WMA.wma5.isVisible),this._generateBijectiveDialogLabelStyle(".WMA",".period6",e.indicators.WMA.wma6.colour,e.indicators.WMA.wma6.isVisible),this._generateBijectiveDialogLabelStyle(".WMA",".period7",e.indicators.WMA.wma7.colour,e.indicators.WMA.wma7.isVisible),this._generateBijectiveDialogLabelStyle(".WMA",".period8",e.indicators.WMA.wma8.colour,e.indicators.WMA.wma8.isVisible),this._generateTooltipStyle(".WMA",".weightedMovingAverage1",e.indicators.WMA.wma1.colour,e.indicators.WMA.wma1.isVisible),this._generateTooltipStyle(".WMA",".weightedMovingAverage2",e.indicators.WMA.wma2.colour,e.indicators.WMA.wma2.isVisible),this._generateTooltipStyle(".WMA",".weightedMovingAverage3",e.indicators.WMA.wma3.colour,e.indicators.WMA.wma3.isVisible),this._generateTooltipStyle(".WMA",".weightedMovingAverage4",e.indicators.WMA.wma4.colour,e.indicators.WMA.wma4.isVisible),this._generateTooltipStyle(".WMA",".weightedMovingAverage5",e.indicators.WMA.wma5.colour,e.indicators.WMA.wma5.isVisible),this._generateTooltipStyle(".WMA",".weightedMovingAverage6",e.indicators.WMA.wma6.colour,e.indicators.WMA.wma6.isVisible),this._generateTooltipStyle(".WMA",".weightedMovingAverage7",e.indicators.WMA.wma7.colour,e.indicators.WMA.wma7.isVisible),this._generateTooltipStyle(".WMA",".weightedMovingAverage8",e.indicators.WMA.wma8.colour,e.indicators.WMA.wma8.isVisible)]),this._generateIndicatorStyle([this._generateGradientStyle(".group-WILLR",e.indicators.WILLR.up,e.indicators.WILLR.down),this._generateLineStyle(".group-WILLR",".williamsPercentR",e.indicators.WILLR.line,!0),this._generateColourlessTooltipStyle(".WILLR",".williamsPercentR",e.indicators.WILLR.line.isVisible)])].join(" "))},r.destroy=function(){this._settingsManager.un(null,this),this._dStyleElement.text("")},r._generateIndicatorStyle=function(e){return e.join("\n")},r._generateGradientStyle=function(e,t,n){function i(e){return e.isVisible?"stop-color:"+e.colour:"stop-opacity: 0"}return this._chartSelector+" "+e+" .gradientStroke .topArea {"+i(t.lineColour)+"}"+this._chartSelector+" "+e+" .gradientFill .topArea {"+i(t.fill)+"}"+this._chartSelector+" "+e+" .gradientStroke .bottomArea {"+i(n.lineColour)+"}"+this._chartSelector+" "+e+" .gradientFill .bottomArea {"+i(n.fill)+"}"},r._generateLineStyle=function(e,n,i,o){return this._chartSelector+" "+e+n+".renderer .line {"+t.strokeStyles(i,o)+"}"},r._generateLineWithFillStyle=function(e,n,i){return this._chartSelector+" .body "+e+n+" .line {"+t.strokeStyles(i.line)+"}"+this._chartSelector+" .body "+e+n+" .fill {"+(i.fill.isVisible?"fill: "+i.fill.colour+"; ":"display: none; ")+"}"},r._generateCloudStyle=function(e,t,n,i,o,r){return this._chartSelector+" "+e+t+".renderer .aIsOverB {"+(o?"fill:"+n+" !important;":"display: none; ")+"}"+this._chartSelector+" "+e+t+".renderer .bIsOverA {"+(r?"fill:"+i+" !important;":"display: none; ")+"}"},r._generatePathAndLabelStyle=function(e,t,n,i){return this._generatePathStyle(e,t,i)+"\n"+this._generateLabelStyle(e,n,i)},r._generatePathStyle=function(e,n,i){return this._chartSelector+" "+e+n+".renderer path {"+t.strokeStyles(i,!1)+"}"},r._generateLabelStyle=function(e,t,n){return this._chartSelector+" "+e+t+".renderer text {"+(n.isVisible?"fill:"+n.colour+" !important;":"display: none;")+"}"},r._generateDialogLabelStyle=function(e,t,n){return this._chartSelector+" .dialogContainer .setting"+e+t+" .settingName {color:"+n+" !important;}"+this._chartSelector+" .indicatorLabel"+e+" .setting"+t+" {fill:"+n+" !important;}"},r._generateBijectiveDialogLabelStyle=function(e,t,n,i){return this._chartSelector+" .dialogContainer .setting"+e+t+" .settingName {color:"+n+" !important;}"+this._chartSelector+" .indicatorLabel"+e+" .setting"+t+" {"+(i?"fill:"+n+" !important;":"display: none;")+"}"},r._generateTooltipStyle=function(e,t,n,i){return this._chartSelector+" .tooltipRow"+e+t+" td {"+(i?"color:"+n+" !important;":"display: none; ")+"}"},r._generateColourlessTooltipStyle=function(e,t,n){return n?"":this._chartSelector+" .tooltipRow"+e+t+" td {display: none; }"},r._generateDotStyle=function(e,t,n,i,o,r){return this._chartSelector+" "+e+t+".renderer .point.up {"+(i?"fill:"+n+" !important;":"display: none; ")+"}"+this._chartSelector+" "+e+t+".renderer .point.down {"+(r?"fill:"+o+" !important;":"display: none; ")+"}"},r._generateBarStyle=function(e,t,n,i,o,r,s){var a="";return r&&(a+=this._chartSelector+" "+e+".bars .bar:not(.up):not(.down) {"+(s?"fill: "+r+" !important;":"display: none; ")+"}"),a+=this._chartSelector+" "+e+".bars .bar.up {"+(n?"fill: "+t+" !important;":"display: none; ")+"}"+this._chartSelector+" "+e+".bars .bar.down {"+(o?"fill: "+i+" !important;":"display: none; ")+"}"},r._generateCandlestickStyles=function(e){return this._chartSelector+" .candle.up .openClose { fill: "+e.up.fill.colour+"; "+t.strokeStyles(e.up.stroke)+"} "+this._chartSelector+" .candle.noMovement .openClose { "+t.strokeStyles(e.noMovement.stroke)+"} "+this._chartSelector+" .candle.up .highLow { "+t.strokeStyles(e.up.stroke)+"} "+this._chartSelector+" .candle.noMovement .highLow { "+t.strokeStyles(e.noMovement.stroke)+"} "+this._chartSelector+" .candle.down .openClose { fill: "+e.down.fill.colour+"; "+t.strokeStyles(e.down.stroke)+"} "+this._chartSelector+" .candle.down .highLow { "+t.strokeStyles(e.down.stroke)+"}"},r._generateLineStyles=function(e){return this._chartSelector+" .body .group-PRICES.LINE .line.up {"+t.strokeStyles(e.up)+"}"+this._chartSelector+" .body .group-PRICES.LINE .line.noMovement {"+t.strokeStyles(e.noMovement)+"}"+this._chartSelector+" .body .group-PRICES.LINE .line.down {"+t.strokeStyles(e.down)+"}"},r._generateSuperTrendStyles=function(e){return this._chartSelector+" .group-SUPERTREND.superTrend .up {"+t.strokeStyles(e.up)+"}"+this._chartSelector+" .group-SUPERTREND.superTrend .down {"+t.strokeStyles(e.down)+"}"},r._generateHlocStyles=function(e){return this._chartSelector+" .body .group-PRICES.HLOC .hloc.up {"+t.strokeStyles(e.up)+"}"+this._chartSelector+" .body .group-PRICES.HLOC .hloc.up .highLow {"+t.strokeStyles(e.up)+"}"+this._chartSelector+" .body .group-PRICES.HLOC .hloc.noMovement {"+t.strokeStyles(e.noMovement)+"}"+this._chartSelector+" .body .group-PRICES.HLOC .hloc.noMovement .highLow {"+t.strokeStyles(e.noMovement)+"}"+this._chartSelector+" .body .group-PRICES.HLOC .hloc.down {"+t.strokeStyles(e.down)+"}"+this._chartSelector+" .body .group-PRICES.HLOC .hloc.down .highLow {"+t.strokeStyles(e.down)+"}"},r._generateMountainStyles=function(e){return this._generateLineWithFillStyle(".group-PRICES",".MOUNTAIN",e)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/arrowrendererhelper",["require","lodash","module/core/js/ext/d3","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/view/component/svg/arrow","module/annotations/js/view/model/arrowpresentationmodel","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/util/svg"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/core/js/ext/d3"),o=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),r=e("module/core/js/view/component/svg/arrow"),s=e("module/annotations/js/view/model/arrowpresentationmodel"),a=e("module/core/js/util/class"),l=e("module/colour-customisation/js/view/customisationstyler"),u=e("module/core/js/util/css"),c=e("module/core/js/view/userinput/eventpropagation"),d=e("module/core/js/util/functional"),h=e("module/core/js/util/svg"),p=[{x:0,y:0},{x:13,y:13},{x:13,y:6.5},{x:31.2,y:6.5},{x:31.2,y:-6.5},{x:13,y:-6.5},{x:13,y:-13},{x:0,y:0}];a.extend(t,o);var m=t.prototype;return m._interactiveEditModeCursor=u.CURSOR_TYPE.ARROW_CROSSHAIR,m._dEditAnchorLine=null,m._getNumberOfEditAnchors=n.constant(2),m._arrow=null,m.destroy=function(){t.superclass.destroy.apply(this,arguments),this._arrow&&(this._arrow.destroy(),this._arrow=null)},m._draw=function(){var e=n.compact(this._getAnchorPointCoordinates()),t=this._presentationModel.getAngle();this._presentationModel.allAttributesAreSet()?this._drawArrowAnnotation(e[0],t):this._updateEditAnchors(e)},m._drawArrowAnnotation=function(e,t){var n=this._presentationModel.getDistanceToEditAnchor();this._dAnnotation.attr("transform",h.svgTranslateAttrXY(e.x,e.y)+" "+h.svgRotateAttr(t)),this._dEditAnchorLine&&this._dEditAnchorLine.attr("x1",n-4).attr("y1",0).attr("x2",0).attr("y2",0),this._editAnchors[0]&&this._editAnchors[0].setVisible(!0).setPosition(0,0),this._editAnchors[1]&&this._editAnchors[1].setVisible(!0).setPosition(n,0,-t),this._arrow&&this._arrow.setVisible(!0).setCaptureZoneConstraints(this._subView.dimensions)},m._createEditAnchors=function(){t.superclass._createEditAnchors.call(this),this._presentationModel.setDistanceToEditAnchor(s.DEFAULT_DISTANCE_TO_EDIT_ANCHOR),this._dEditAnchorLine=this._dAnnotation.insert("line",":first-child").classed("line",!0),this._editAnchors[0].withPadding(4),this._editAnchors[0].setCaptureZonePropagation(c.BLOCK_ALL),this._editAnchors[1].setCaptureZonePropagation(c.BLOCK_ALL)},m._removeEditAnchors=function(){t.superclass._removeEditAnchors.call(this),this._dEditAnchorLine&&(this._dEditAnchorLine.remove(),this._dEditAnchorLine=null)},m._getDraggableElements=d.getter("_arrow"),m._initDom=function(){var e=i.svg.line().x(d.plucker("x")).y(d.plucker("y")).interpolate("linear");this._dAnnotation=this._dContainer.append("g").classed("arrow",!0),this._arrow=r.create(this._dAnnotation,this._captureZoneManager).setPath(e(p)).setVisible(!1).onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this),t.superclass._initDom.call(this)},m._updateStyles=function(){var e=this._presentationModel.getStyle(),t=l.CSS_WIDTH[e.width];this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour),this._arrow.getElement().attr("transform",h.svgScaleAttrXY(t,t))},m.updateAnchor=function(e,n){0===e?t.superclass.updateAnchor.call(this,e,n):this._setAngle(n)},m._setAngle=function(e){var t=this._visibleRangeX(this._timeline.asAccTime(this._presentationModel.getAnchor().timestamp,!0)),n=e.x,i=n-t,o=this._visibleRangeY(this._presentationModel.getAnchor().level),r=e.y,s=r-o,a=Math.atan2(s,i);this._presentationModel.setAngle(180*a/Math.PI),
this._presentationModel.setDistanceToEditAnchor(Math.sqrt(s*s+i*i)),this._setAnnotationAsActive()},m._updateSelectionCaptureZoneZIndex=function(e){this._arrow.updateCaptureZoneIndex(e,!0)},Object.seal(m),Object.seal(t)})),define("module/core/js/view/userinput/quadrilateralcapturezone",["require","module/core/js/view/userinput/abstractcapturezone","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/userinput/rectanglecapturezone"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/view/userinput/abstractcapturezone"),i=e("module/core/js/util/array"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/geometry"),a=e("module/core/js/view/userinput/rectanglecapturezone");o.extend(t,n),t.create=function(e,n,i){return new t(e,n,i)};var l=t.prototype;return l.coordinates=[],l.getType=r.returns("quadrilateral"),l.setCoordinates=r.setter("coordinates"),l.getCoordinates=r.getter("coordinates"),l._constraints=null,l.setConstraints=function(e){return this._constraints=e?a.normaliseDimensions(e):null,this},l.pointInCaptureZone=function(e,t){if(!this.isSet())return!1;if(this._constraints&&!a.prototype.pointInCaptureZone.call(this._constraints,e,t))return!1;for(var n=0;n<this.coordinates.length;n++){var i,o=this.coordinates[n];if(i=n===this.coordinates.length-1?this.coordinates[0]:this.coordinates[n+1],this._padding>=s.distancePointToSegment(e,t,o.x,o.y,i.x,i.y))return!0}return s.isPointInTriangle(e,t,this.coordinates[0].x,this.coordinates[0].y,this.coordinates[1].x,this.coordinates[1].y,this.coordinates[2].x,this.coordinates[2].y)||s.isPointInTriangle(e,t,this.coordinates[2].x,this.coordinates[2].y,this.coordinates[3].x,this.coordinates[3].y,this.coordinates[0].x,this.coordinates[0].y)},l.isSet=function(){return i.nonEmpty(this.coordinates)},Object.seal(l),Object.seal(t)})),define("module/core/js/view/component/svg/quadrilateral",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/view/userinput/quadrilateralcapturezone","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n),this._captureZoneCoordinates=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]}var n=e("module/core/js/view/component/svg/abstractsvgwrapper"),i=e("module/core/js/util/class"),o=e("module/core/js/view/userinput/eventpropagation"),r=e("module/core/js/view/userinput/quadrilateralcapturezone"),s=e("module/core/js/enum/zindexenum");i.extend(t,n),t.create=function(e,n){return new t(e,n)},t.getPolygonAttrString=function(e){var t,n,i="";for(t=0;t<e.length;t++)n=e[t],i+=n.x+","+n.y+" ";return i};var a=t.prototype;return a._coordinates=null,a._captureZoneCoordinates=null,a._initDom=function(){this._dComponent=this._dContainer.append("polygon").classed("quadrilateral",!0)},a._createCaptureZone=function(){return this._captureZone||(this._captureZone=this._captureZoneManager.createZone(r,o.PROPAGATE_UNHANDLED,s.ANNOTATION_SELECTION),this._editCaptureZone=this._captureZoneManager.createZone(r,o.PROPAGATE_UNHANDLED,s.ANNOTATION_MOVING)),this},a.updateCaptureZone=function(){if(this._captureZone&&this._coordinates){var e=this._dComponent.node(),t=e.ownerSVGElement,n=e.getCTM();this._coordinates.forEach(function(e,i){var o=t.createSVGPoint();o.x=e.x,o.y=e.y,o=o.matrixTransform(n),this._captureZoneCoordinates[i].x=o.x,this._captureZoneCoordinates[i].y=o.y}.bind(this)),this._captureZone.setCoordinates(this._captureZoneCoordinates),this._captureZone.setConstraints(this._captureZoneConstraints),this._editCaptureZone.setCoordinates(this._captureZoneCoordinates),this._editCaptureZone.setConstraints(this._captureZoneConstraints)}},a.setCoordinates=function(e,n){if(!e||!e.length)return this;this._coordinates=e;var i=t.getPolygonAttrString(e);return this._dComponent.attr("points",i),4===e.length&&this.setCaptureZoneConstraints(n),this},Object.seal(a),Object.seal(t)})),define("module/core/js/view/component/svg/line",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/view/userinput/eventpropagation","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/view/component/svg/abstractsvgwrapper"),i=e("module/core/js/util/class"),o=e("module/colour-customisation/js/view/customisationstyler"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("module/core/js/enum/zindexenum");i.extend(t,n),t.create=function(e,n){return new t(e,n)};var a=t.prototype;return a._x1=null,a._x2=null,a._y1=null,a._y2=null,a._initDom=function(){this._dComponent=this._dContainer.append("line").classed("line",!0)},a.setLineCoordinates=function(e,t){return isFinite(e.x1)&&this._setLineCoordinate("x1",e.x1),isFinite(e.y1)&&this._setLineCoordinate("y1",e.y1),isFinite(e.x2)&&this._setLineCoordinate("x2",e.x2),isFinite(e.y2)&&this._setLineCoordinate("y2",e.y2),this.setCaptureZoneConstraints(t),this},a._setLineCoordinate=function(e,t){var n="_"+e;return this._dComponent.attr(e,t),this[n]=t,this},a._createCaptureZone=function(){return this._captureZone||(this._captureZone=this._captureZoneManager.createLineCaptureZone(r.PROPAGATE_UNHANDLED,s.ANNOTATION_SELECTION)),this._editCaptureZone||(this._editCaptureZone=this._captureZoneManager.createLineCaptureZone(r.PROPAGATE_UNHANDLED,s.ANNOTATION_MOVING)),this},a.updateCaptureZone=function(){if(this._captureZone){var e=this._dComponent.node(),t=e.ownerSVGElement,n=t.createSVGPoint(),i=e.getCTM();this._captureZone.setConstraints(this._captureZoneConstraints),this._editCaptureZone.setConstraints(this._captureZoneConstraints),n.x=this._x1,n.y=this._y1,n=n.matrixTransform(i),this._captureZone.setLineStart(n.x,n.y),this._editCaptureZone.setLineStart(n.x,n.y),n.x=this._x2,n.y=this._y2,n=n.matrixTransform(i),this._captureZone.setLineEnd(n.x,n.y),this._editCaptureZone.setLineEnd(n.x,n.y)}},a.updateStyle=function(e){this._dComponent.attr("stroke-width",o.CSS_WIDTH[e.width]),this._dComponent.attr("stroke-dasharray",o.CSS_STYLE[e.style])},Object.seal(a),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/channelhelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/core/js/util/css","module/colour-customisation/js/view/customisationstyler","module/core/js/util/functional","module/core/js/view/component/svg/quadrilateral","module/core/js/view/component/svg/line","module/core/js/util/pointslopeline"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/core/js/util/css"),s=e("module/colour-customisation/js/view/customisationstyler"),a=e("module/core/js/util/functional"),l=e("module/core/js/view/component/svg/quadrilateral"),u=e("module/core/js/view/component/svg/line"),c=e("module/core/js/util/pointslopeline");o.extend(t,i);var d=t.prototype;return d._interactiveEditModeCursor=r.CURSOR_TYPE.CHANNEL_CROSSHAIR,d._quadrilateral=null,d._lines=null,d._getNumberOfEditAnchors=n.constant(3),d._height=null,d.destroy=function(){t.superclass.destroy.call(this),this._quadrilateral&&(this._quadrilateral.destroy(),this._quadrilateral=null),a.invokeCall(this._lines,"destroy"),this._lines=[]},d.updateAnchor=function(e,n){var i=this._getCursorPointFromRecogniser(n),o=this._getAnchorPointCoordinates();2===e?this._setAnchorAtIndexBasedOnPoint(this.getThirdAnchorPointCoordinates(i,o),e):(t.superclass.updateAnchor.call(this,e,n),this._presentationModel.allAttributesAreSet()&&this._setAnchorAtIndexBasedOnPoint(this._translateYFromMiddlePoint(this._getAnchorPointCoordinates(),this._height),2))},d._translateYFromMiddlePoint=function(e,t){return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2+t}},d.getThirdAnchorPointCoordinates=function(e,t){if(Math.abs(t[1].x-t[0].x)<.025)return t[1].y=e.y,t[1];var n,i=c.create();return i.fromPoints(t[0].x,t[0].y,t[1].x,t[1].y),n=i.calculateYFromX(e.x),this._translateYFromMiddlePoint(t,e.y-n)},d._draw=function(){var e,t,i=this._getAnchorPointCoordinates();this._updateEditAnchors(n.compact(i)),i[1]&&this._lines[0].setLineCoordinates({x1:i[0].x,y1:i[0].y,x2:i[1].x,y2:i[1].y},this._subView.dimensions),i[2]&&(this._height=i[2].y-(i[0].y+i[1].y)/2,e={x:i[0].x,y:i[0].y+this._height},t={x:i[1].x,y:i[1].y+this._height},this._lines[1].setLineCoordinates({x1:e.x,y1:e.y,x2:t.x,y2:t.y},this._subView.dimensions),this._quadrilateral.setCoordinates([i[0],i[1],t,e],this._subView.dimensions))},d._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("channel",!0),this._quadrilateral=l.create(this._dAnnotation,this._captureZoneManager),this._height=0,this._createLines(),t.superclass._initDom.call(this)},d._createLines=function(){var e,t;for(this._lines=[],t=0;t<2;t++)e=u.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this).setEditEnabled(!0),this._lines.push(e)},d._getDraggableElements=a.getter("_lines"),d._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour),this._lines.forEach((function(t){t.getElement().attr({"stroke-width":s.CSS_WIDTH[e.width],"stroke-dasharray":s.CSS_STYLE[e.style]})}))},d._updateSelectionCaptureZoneZIndex=function(e){a.invokeCall(this._lines,"updateCaptureZoneIndex",e,!0)},Object.seal(d),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/elliottwavehelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/component/svg/line"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,o,r,s)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/view/component/svg/line");o.extend(t,i);var a=t.prototype;return a._getNumberOfEditAnchors=function(){return this._presentationModel.getLabels().length+1},a._lines=null,a._dLabels=null,a.destroy=function(){t.superclass.destroy.call(this),r.invokeApply(this._lines,"destroy"),r.invokeApply(this._dLabels,"remove"),delete this._lines,delete this._dLabels},a._draw=function(){var e=n.compact(this._getAnchorPointCoordinates());this._updateEditAnchors(e);for(var t=1;t<e.length;t++)this._lines[t-1].setLineCoordinates({x1:e[t-1].x,y1:e[t-1].y,x2:e[t].x,y2:e[t].y},this._subView.dimensions),this._dLabels[t-1].attr("x",e[t].x-this._dLabels[t-1].node().getBoundingClientRect().width/2).attr("y",e[t].y-10)},a._initDom=function(){var e=this._presentationModel.getLabels();this._lines=n.times(e.length,function(){return s.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this)}.bind(this)),this._dLabels=n.map(e,function(e){return this._dAnnotation.append("svg:text").classed("text",!0).text(e)}.bind(this)),t.superclass._initDom.call(this)},a._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour),r.invokeCall(this._lines,"updateStyle",e)},a._getDraggableElements=r.getter("_lines"),a._updateSelectionCaptureZoneZIndex=function(e){r.invokeCall(this._lines,"updateCaptureZoneIndex",e,!0)},Object.seal(a),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/elliottwave12345helper",["require","module/core/js/util/class","module/core/js/util/css","module/annotations/js/view/renderer/helper/elliottwavehelper"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,o,r,s)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/css"),o=e("module/annotations/js/view/renderer/helper/elliottwavehelper");n.extend(t,o);var r=t.prototype;return r._interactiveEditModeCursor=i.CURSOR_TYPE.ELLIOTT_WAVE_CROSSHAIR,r._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("elliottWave12345",!0),t.superclass._initDom.call(this)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/elliottwaveabchelper",["require","module/core/js/util/class","module/core/js/util/css","module/annotations/js/view/renderer/helper/elliottwavehelper"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,o,r,s)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/css"),o=e("module/annotations/js/view/renderer/helper/elliottwavehelper");n.extend(t,o);var r=t.prototype;return r._interactiveEditModeCursor=i.CURSOR_TYPE.ELLIOTT_WAVE_ABC_CROSSHAIR,r._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("elliottWaveABC",!0),t.superclass._initDom.call(this)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/fibonaccihelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/annotations/js/view/model/abstractfibonaccipresentationmodel","module/core/js/util/class","module/core/js/util/css","module/colour-customisation/js/view/customisationstyler","module/core/js/view/component/svg/line","module/core/js/util/lineclipping","module/core/js/view/valueformatter"],(function(e){"use strict";function t(e,n,i,o,r,s){this._valueFormatter=(new c).withScalingFactor(e.getSubViewScalingFactor()).withDecimalPlaces(r.getInstrumentModel().getInstrumentModelInfo().decimalPlaces),t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/annotations/js/view/model/abstractfibonaccipresentationmodel"),r=e("module/core/js/util/class"),s=e("module/core/js/util/css"),a=e("module/colour-customisation/js/view/customisationstyler"),l=e("module/core/js/view/component/svg/line"),u=e("module/core/js/util/lineclipping"),c=e("module/core/js/view/valueformatter");r.extend(t,i),t.LEFT_MARGIN=5,t.BOTTOM_MARGIN="-0.3em";var d=t.prototype;return d._className="fibonacci",d._dLabels=null,d._interactiveEditModeCursor=s.CURSOR_TYPE.FIBONACCI_CROSSHAIR,d._lines=null,d._supportLines=null,d._valueFormatter=null,d._getNumberOfEditAnchors=n.constant(3),d._getNumberOfSupportLines=n.constant(1),d._initDom=function(){this._presentationModel.on(o.SETTINGS_CHANGED,this._handleSettingsChanged,this),this._dAnnotation=this._dContainer.append("g").classed(this._className,!0),this._initLinesAndLabels(),t.superclass._initDom.call(this)},d._initLinesAndLabels=function(){var e,t,n=this._presentationModel.getRatioValues().length;for(this._lines=[],this._dLabels=[],this._supportLines=[],t=0;t<n;t++)this._lines.push(l.create(this._dAnnotation,this._captureZoneManager).classed("innerLine",0!==t&&t!==n-1).withDefaultPadding().onDrag(this._onDragPanGesture,this).onDragStart(this._onDragPanGestureStart,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this).onTap(this._onTap,this)),this._dLabels.push(this._dAnnotation.append("text").classed("label",!0));for(t=0;t<this._getNumberOfSupportLines();t++)e=l.create(this._dAnnotation,this._captureZoneManager).classed("supportLine",!0).withDefaultPadding().onDrag(this._onDragPanGesture,this).onDragStart(this._onDragPanGestureStart,this).onContextMenu(this._contextMenu,this).onTap(this._onTap,this),e.getElement().attr("stroke-dasharray",a.CSS_STYLE.dashed),this._supportLines.push(e)},d._handleSettingsChanged=function(){this._removeLabelsAndLines(),this._initLinesAndLabels(),this._registerDoubleTapHandler(),this._updateStyles(),this._draw()},d._removeLabelsAndLines=function(){n.invokeMap(this._lines,"destroy"),n.invokeMap(this._supportLines,"destroy"),n.invokeMap(this._dLabels,"remove"),this._dLabels=[],this._supportLines=[],this._lines=[]},d._updateStyles=function(){var e,t=this._presentationModel.getRatioValues().length,n=this._presentationModel.getStyle();for(this._dAnnotation.attr("fill",n.colour).attr("stroke",n.colour),e=0;e<t;e++)this._lines[e].getElement().attr("stroke-width",a.CSS_WIDTH[n.width])},d._draw=function(){var e=this._presentationModel.getAnchors(),t=this._getAnchorPointCoordinates();this._updateEditAnchors(n.compact(t)),this._drawSupportLines(t),this._drawFibonacciElement(t,e)},d._drawSupportLines=function(e){for(var t=0;t<this._supportLines.length;t++)e[t]&&e[t+1]&&this._supportLines[t].setLineCoordinates({x1:e[t].x,y1:e[t].y,x2:e[t+1].x,y2:e[t+1].y},this._subView.dimensions)},d._drawFibonacciElement=function(e,t){var n,i,o,r;if(e[0]&&e[1])for(n=e[2]?e[2].x:e[1].x,o=e[0].x<e[1].x?t[1].level:t[0].level,i=e[0].x<e[1].x?t[0].level:t[1].level,r=0;r<this._presentationModel.getRatioValues().length;r++)this._drawElement(e[0].x,n,o,i,r)},d._drawElement=function(e,n,i,o,r){var s=this._presentationModel.getRatioValues(),a=Math.min(e,n),l=this._presentationModel.getLevelForRatio(i,o,s[r]),c=this._visibleRangeY(l),d=s[r],h=this._valueFormatter.scaleAndRoundPrice(l)+" ( "+d+"% )",p=this._visibleRangeX.range()[1],m=this._visibleRangeY.range()[1],f=u.clipLineToRectangle({x:e,y:c},{x:n,y:c},{x:0,y:0},{x:p,y:m});f.length?this._lines[r].setLineCoordinates({x1:f[0].x,x2:f[1].x,y1:f[0].y,y2:f[1].y}):this._lines[r].setLineCoordinates({x1:-1,x2:-1,y1:-1,y2:-1}),this._dLabels[r].attr("x",a+t.LEFT_MARGIN).attr("y",c).attr("dy",t.BOTTOM_MARGIN).text(h)},d._enterHover=function(){t.superclass._enterHover.call(this),n.invokeMap(this._supportLines,"setVisible",!0)},d._exitHover=function(){t.superclass._exitHover.call(this),n.invokeMap(this._supportLines,"setVisible",!1)},d._enterEditMode=function(e){t.superclass._enterEditMode.call(this,e),this._presentationModel.isHovered()||n.invokeMap(this._supportLines,"setVisible",!0)},d._exitEditMode=function(){t.superclass._exitEditMode.call(this),this._presentationModel.isHovered()||n.invokeMap(this._supportLines,"setVisible",!1)},d._setAnchorAtIndexBasedOnPoint=function(e,n){t.superclass._setAnchorAtIndexBasedOnPoint.call(this,e,n),this._updateExtensionAnchor(n)},d._getDraggableElements=function(){return this._lines.concat(this._supportLines)},d._getStartPointIndex=function(){return this._getNumberOfEditAnchors()-3},d._getEndPointIndex=function(){return this._getNumberOfEditAnchors()-2},d._getExtensionPointIndex=function(){return this._getNumberOfEditAnchors()-1},d._updateExtensionAnchor=function(e){var n,i,o=this._getAnchorPointCoordinates(),r=o[this._getExtensionPointIndex()],s=o[this._getEndPointIndex()],a=o[this._getStartPointIndex()];this._presentationModel.allAttributesAreSet()&&(i=s.x<=a.x&&a.x<=r.x||r.x<a.x&&a.x<s.x,i&&e!==this._getExtensionPointIndex()?(n=r.x-(e===this._getStartPointIndex()?s.x:a.x),r.x-=2*n):r.x=s.x>a.x?Math.max(r.x,s.x):Math.min(r.x,s.x),r.y=s.y,t.superclass._setAnchorAtIndexBasedOnPoint.call(this,r,this._getExtensionPointIndex()))},d.destroy=function(){t.superclass.destroy.apply(this,arguments),this._removeLabelsAndLines()},d._updateSelectionCaptureZoneZIndex=function(e){n.invokeMap(this._lines,"updateCaptureZoneIndex",e,!0),n.invokeMap(this._supportLines,"updateCaptureZoneIndex",e,!0)},Object.seal(d),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/fibonacciextensionhelper",["require","lodash","module/annotations/js/view/renderer/helper/fibonaccihelper","module/core/js/util/class","module/core/js/util/css"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/fibonaccihelper"),o=e("module/core/js/util/class"),r=e("module/core/js/util/css");o.extend(t,i);var s=t.prototype;return s._className="fibonacciExtension",s._interactiveEditModeCursor=r.CURSOR_TYPE.FIBONACCI_EXTENSION_CROSSHAIR,s._getNumberOfEditAnchors=n.constant(4),s._getNumberOfSupportLines=n.constant(2),s._drawFibonacciElement=function(e,t){var n,i,o,r;if(e[1]&&e[2]&&t[1].level!==t[2].level)for(n=e[3]?e[3].x:e[2].x,o=t[2].level,i=t[2].level+(t[1].level-t[0].level),r=0;r<this._presentationModel.getRatioValues().length;r++)this._drawElement(e[1].x,n,o,i,r)},Object.seal(s),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/gannhelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/functional","module/annotations/js/view/model/gannpresentationmodel","module/core/js/view/component/svg/line","module/core/js/util/math","module/core/js/util/svg"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/functional"),a=e("module/annotations/js/view/model/gannpresentationmodel"),l=e("module/core/js/view/component/svg/line"),u=e("module/core/js/util/math"),c=e("module/core/js/util/svg");o.extend(t,i);var d=t.prototype;return d._getNumberOfEditAnchors=n.constant(2),d._linesArray=null,d.destroy=function(){t.superclass.destroy.apply(this,arguments),s.invokeCall(this._linesArray,"destroy"),this._linesArray=null},d._draw=function(){var e,t,i,o,r;if(this._presentationModel.allAttributesAreSet()){for(t=this._presentationModel.getGannAngles(),e=this._getCoordinates(this._presentationModel.getVisibleAnchor(this._timeline)),this._dAnnotation.attr("transform",c.svgTranslateAttrXY(e.x,e.y)),i=0;i<t.length;i++)o=Math.cos(t[i]),r=Math.sin(t[i]),this._linesArray[i].setLineCoordinates({x2:o*a.GANN_LINE_SIZE,y2:-r*a.GANN_LINE_SIZE},this._subView.dimensions),this._linesArray[i].setVisible(!0),i===Math.floor(t.length/2)&&this._editAnchors[1]&&(this._editAnchors[1].setVisible(!0),this._editAnchors[1].setPosition(o*this._presentationModel.getDistanceToEditAnchor(),-r*this._presentationModel.getDistanceToEditAnchor()),this._editAnchors[1].setCaptureZoneConstraints(this._subView.dimensions));this._editAnchors[0]&&this._editAnchors[0].setVisible(!0).setPosition(0,0)}else this._updateEditAnchors(n.compact(this._getAnchorPointCoordinates()))},d._getCoordinates=function(e){var t=this._timeline.asAccTime(e.timestamp,!0);return{x:this._visibleRangeX(t),y:this._visibleRangeY(e.level)}},d._createEditAnchors=function(){t.superclass._createEditAnchors.call(this),this._presentationModel.setDistanceToEditAnchor(a.DEFAULT_DISTANCE_TO_EDIT_ANCHOR)},d._getDraggableElements=s.getter("_linesArray"),d._initDom=function(){var e;for(this._dAnnotation=this._dContainer.append("g").classed(this._presentationModel.getClassName(),!0),this._linesArray=[],e=0;e<this._presentationModel.getGannAngles().length;e++)this._linesArray.push(l.create(this._dAnnotation,this._captureZoneManager).setLineCoordinates({x1:0,y1:0,x2:a.GANN_LINE_SIZE,y2:0}).setVisible(!1).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this));t.superclass._initDom.call(this)},d._updateStyles=function(){var e,t=this._presentationModel.getStyle();for(this._dAnnotation.attr("fill",t.colour).attr("stroke",t.colour),e=0;e<this._presentationModel.getGannAngles().length;e++)this._linesArray[e].getElement().attr("stroke-width",r.CSS_WIDTH[t.width]),this._linesArray[e].getElement().attr("stroke-dasharray",r.CSS_STYLE[t.style])},d.updateAnchor=function(e,n){0===e?t.superclass.updateAnchor.call(this,e,n):this._setAngle(n)},d._setAngle=function(e){var t=this._visibleRangeX(this._timeline.asAccTime(this._presentationModel.getAnchor().timestamp,!0)),n=e.x,i=n-t,o=this._visibleRangeY(this._presentationModel.getAnchor().level),r=e.y,s=o-r,a=Math.atan2(s,i);this._presentationModel.setAngle(u.radiansToDegrees(a)),this._presentationModel.setDistanceToEditAnchor(Math.sqrt(s*s+i*i))},d._onDragPanGesture=function(e){var t=this._getAnchorPositionWhileDragging(0,e),n=this.snap(t.x,t.y);this._setAnchorAtIndexBasedOnPoint(n,0)},d._updateSelectionCaptureZoneZIndex=function(e){s.invokeCall(this._linesArray,"updateCaptureZoneIndex",e,!0)},Object.seal(d),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/gannfanhelper",["require","module/core/js/util/class","module/core/js/util/css","module/annotations/js/view/renderer/helper/gannhelper"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/css"),o=e("module/annotations/js/view/renderer/helper/gannhelper");n.extend(t,o);var r=t.prototype;return r._interactiveEditModeCursor=i.CURSOR_TYPE.GANN_FAN_CROSSHAIR,Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/gannlinehelper",["require","module/core/js/util/class","module/core/js/util/css","module/annotations/js/view/renderer/helper/gannhelper"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/css"),o=e("module/annotations/js/view/renderer/helper/gannhelper");n.extend(t,o);var r=t.prototype;return r._interactiveEditModeCursor=i.CURSOR_TYPE.GANN_LINE_CROSSHAIR,Object.seal(r),Object.seal(t)})),define("module/core/js/view/userinput/trianglecapturezone",["require","module/core/js/view/userinput/abstractcapturezone","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/userinput/rectanglecapturezone"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/view/userinput/abstractcapturezone"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/geometry"),s=e("module/core/js/view/userinput/rectanglecapturezone");i.extend(t,n),t.create=function(e,n,i){return new t(e,n,i)};var a=t.prototype;return a._constraints=null,a._x1=0,a._y1=0,a._x2=0,a._y2=0,a._x3=0,a._y3=0,a.getType=o.returns("triangle"),a.setCoordinates=function(e,t,n,i,o,r,s){return this._x1=e,this._y1=t,this._x2=n,this._y2=i,this._x3=o,this._y3=r,s?this._constraints=s:delete this._constraints,this},a.pointInCaptureZone=function(e,t){return(this._x1>0||this._x2>0||this._x3>0||this._y1>0||this._y2>0||this._y3>0)&&(!(this._constraints&&!s.prototype.pointInCaptureZone.call(this._constraints,e,t))&&(!!r.isPointInTriangle(e,t,this._x1,this._y1,this._x2,this._y2,this._x3,this._y3)||(this._padding>=r.distancePointToSegment(e,t,this._x1,this._y1,this._x2,this._y2)||(this._padding>=r.distancePointToSegment(e,t,this._x1,this._y1,this._x3,this._y3)||this._padding>=r.distancePointToSegment(e,t,this._x2,this._y2,this._x3,this._y3)))))},a.isSet=function(){return!!(this._x1||this._x2||this._x3||this._y1||this._y2||this._y3)},Object.seal(a),Object.seal(t)})),define("module/core/js/view/component/svg/triangle",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/util/svg","module/core/js/view/userinput/trianglecapturezone","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n),this._captureZoneCoordinates=[{x:0,y:0},{x:0,y:0},{x:0,y:0}]}var n=e("module/core/js/view/component/svg/abstractsvgwrapper"),i=e("module/core/js/util/class"),o=e("module/core/js/view/userinput/eventpropagation"),r=e("module/core/js/util/svg"),s=e("module/core/js/view/userinput/trianglecapturezone"),a=e("module/core/js/enum/zindexenum");i.extend(t,n),t.create=function(e,n){return new t(e,n)};var l=t.prototype;return l._coordinates=null,l._captureZoneCoordinates=null,l._initDom=function(){this._dComponent=this._dContainer.append("polygon").classed("triangle",!0)},l._createCaptureZone=function(){return this._captureZone||(this._captureZone=this._captureZoneManager.createZone(s,o.PROPAGATE_UNHANDLED,a.ANNOTATION_SELECTION)),this._editCaptureZone||(this._editCaptureZone=this._captureZoneManager.createZone(s,o.PROPAGATE_UNHANDLED,a.ANNOTATION_MOVING)),this},l.updateCaptureZone=function(){if(this._captureZone&&this._coordinates){var e=this._dComponent.node(),t=e.ownerSVGElement,n=e.getCTM();this._coordinates.forEach(function(e,i){var o=t.createSVGPoint();o.x=e.x,o.y=e.y,o=o.matrixTransform(n),this._captureZoneCoordinates[i].x=o.x,this._captureZoneCoordinates[i].y=o.y}.bind(this)),this._captureZone.setCoordinates(this._captureZoneCoordinates[0].x,this._captureZoneCoordinates[0].y,this._captureZoneCoordinates[1].x,this._captureZoneCoordinates[1].y,this._captureZoneCoordinates[2].x,this._captureZoneCoordinates[2].y,this._captureZoneConstraints),this._editCaptureZone.setCoordinates(this._captureZoneCoordinates[0].x,this._captureZoneCoordinates[0].y,this._captureZoneCoordinates[1].x,this._captureZoneCoordinates[1].y,this._captureZoneCoordinates[2].x,this._captureZoneCoordinates[2].y,this._captureZoneConstraints)}},l.setCoordinates=function(e,t){if(!e||!e.length)return this;this._coordinates=e;var n=r.getPolygonAttrString(e);return this._dComponent.attr("points",n),3===e.length&&this.setCaptureZoneConstraints(t),this},Object.seal(l),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/headandshouldershelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/core/js/util/css","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/component/svg/line","module/core/js/view/component/svg/triangle"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,o,r,s)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/core/js/util/css"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/geometry"),l=e("module/core/js/view/component/svg/line"),u=e("module/core/js/view/component/svg/triangle");o.extend(t,i);var c=t.prototype;return c._lines=null,c._headFill=null,c._leftShoulderFill=null,c._rightShoulderFill=null,c._neckLine=null,c._getNumberOfEditAnchors=n.constant(7),c._interactiveEditModeCursor=r.CURSOR_TYPE.HEAD_AND_SHOULDERS_CROSSHAIR,c._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("headAndShoulders",!0),this._lines=n.times(this._getNumberOfEditAnchors()-1,function(){return l.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this)}.bind(this)),this._neckLine=l.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this),this._headFill=u.create(this._dAnnotation,this._captureZoneManager),this._leftShoulderFill=u.create(this._dAnnotation,this._captureZoneManager),this._rightShoulderFill=u.create(this._dAnnotation,this._captureZoneManager),t.superclass._initDom.call(this)},
c._draw=function(){var e,t,i,o,r,s=n.compact(this._getAnchorPointCoordinates());this._updateEditAnchors(s),this._drawLines(s),s[2]&&s[4]&&(e=a.pointToPointLineRectangleIntersection(s[2].x,s[2].y,s[4].x,s[4].y,0,0,this._visibleRangeX.range()[1],this._visibleRangeY.range()[1]),2===e.length&&(o={x:s[2].x<s[4].x?Math.min(e[0].x,e[1].x):Math.max(e[0].x,e[1].x),y:s[2].y<s[4].y?Math.min(e[0].y,e[1].y):Math.max(e[0].y,e[1].y)},r={x:s[4].x<s[2].x?Math.min(e[0].x,e[1].x):Math.max(e[0].x,e[1].x),y:s[4].y<s[2].y?Math.min(e[0].y,e[1].y):Math.max(e[0].y,e[1].y)},t=a.lineSegmentAndLineIntersection(s[0].x,s[0].y,s[1].x,s[1].y,s[2].x,s[2].y,s[4].x,s[4].y),s[5]&&s[6]&&(i=a.lineSegmentAndLineIntersection(s[5].x,s[5].y,s[6].x,s[6].y,s[2].x,s[2].y,s[4].x,s[4].y)),this._drawNeckLine(t,i,o,r,s[2],s[4]),this._drawFills(t,i,s[1],s[2],s[3],s[4],s[5])))},c._getDraggableElements=function(){return this._lines.concat([this._neckLine])},c._updateSelectionCaptureZoneZIndex=function(e){s.invokeCall(this._getDraggableElements(),"updateCaptureZoneIndex",e,!0)},c._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour),s.invokeCall(this._lines,"updateStyle",e),this._neckLine.updateStyle(e)},c.destroy=function(){t.superclass.destroy.call(this),s.invokeApply(this._getDraggableElements(),"destroy"),this._headFill.destroy(),this._leftShoulderFill.destroy(),this._rightShoulderFill.destroy(),delete this._lines,delete this._neckLine,delete this._headFill,delete this._leftShoulderFill,delete this._rightShoulderFill},c._drawLines=function(e){for(var t=1;t<e.length;t++)this._lines[t-1].setLineCoordinates({x1:e[t-1].x,y1:e[t-1].y,x2:e[t].x,y2:e[t].y},this._subView.dimensions)},c._drawNeckLine=function(e,t,n,i,o,r){var s=n,a=[o.x],l=[o.y];e&&(a.push(e.x),l.push(e.y),t&&(a.push(t.x),l.push(t.y)),s={x:o.x<r.x?Math.min.apply(this,a):Math.max.apply(this,a),y:o.y<r.y?Math.min.apply(this,l):Math.max.apply(this,l)}),this._neckLine.setLineCoordinates({x1:s.x,y1:s.y,x2:i.x,y2:i.y},this._subView.dimensions)},c._drawFills=function(e,t,n,i,o,r,s){this._headFill.setCoordinates([i,o,r]),this._leftShoulderFill.setVisible(!!e),this._rightShoulderFill.setVisible(!!t),e&&this._leftShoulderFill.setCoordinates([e,n,i]),t&&this._rightShoulderFill.setCoordinates([r,s,t])},Object.seal(c),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/horizontallinehelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/view/component/svg/editanchor","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/component/svg/line","module/core/js/util/svg","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o,r,s){this._valueFormatter=e.getLevelValueFormatter(),t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/css"),a=e("module/core/js/view/component/svg/editanchor"),l=e("module/core/js/view/userinput/eventpropagation"),u=e("module/core/js/util/functional"),c=e("module/core/js/view/component/svg/line"),d=e("module/core/js/util/svg"),h=e("module/core/js/view/userinput/tapgesturerecogniser"),p=e("module/core/js/enum/zindexenum");o.extend(t,i),t.EDIT_ANCHOR_LEFT=100,t.PRICE_LEVEL_BOX_SIDE_PADDING=4;var m=t.prototype;return m._interactiveEditModeCursor=s.CURSOR_TYPE.HORIZONTAL_LINE_CROSSHAIR,m._dAnnotationDetails=null,m._dLabelGroup=null,m._dLabelBackground=null,m._dLabelText=null,m._priceCaptureZone=null,m._boxTapGestureRecogniser=null,m._valueFormatter=null,m._line=null,m._minLeftOffset=null,m.destroy=function(){t.superclass.destroy.apply(this,arguments),this._dLabelText=null,this._line&&(this._line.destroy(),this._line=null),this._anchor&&(this._anchor.destroy(),this._anchor=null),this._removePriceCaptureZone()},m.updateAnchor=function(e,t){this._onDrag(t)},m._draw=function(){var e,n,i=this._presentationModel.getAnchor().level,o=this._valueFormatter.scaleAndRoundPrice(i),r=this._visibleRangeX.range();this._line.setLineCoordinates({y1:this._visibleRangeY(i),x2:r[1],y2:this._visibleRangeY(i)},this._subView.dimensions),this._dLabelText.text(o),e=this._dLabelText.node().getBoundingClientRect().width,n=e+2*t.PRICE_LEVEL_BOX_SIDE_PADDING,this._dLabelBackground.attr("width",n),this._dAnnotationDetails.attr("transform",d.svgTranslateAttrY(this._visibleRangeY(i))),this._priceCaptureZone&&this._priceCaptureZone.setDimensionsBasedOnElement(this._dLabelBackground,this._subView.dimensions),this._editAnchors[0]&&(this._editAnchors[0].setVisible(!0),this._editAnchors[0].setCaptureZoneConstraints(this._subView.dimensions))},m._getNumberOfEditAnchors=n.constant(1),m._createEditAnchor=function(e){return a.create(this._dAnnotationDetails,this._captureZoneManager,null,this._line.getElement()).setPosition(t.EDIT_ANCHOR_LEFT,0).onDragStart(this._setAnnotationAsActive,this).onDrag(this._onDrag,this).onContextMenu(this._contextMenu,this).setCaptureZonePropagation(l.PROPAGATE_UNHANDLED)},m._createDialogOpenersCaptureZones=function(){this._boxTapGestureRecogniser=h.create().withHandler(this._showSettingsDialog.bind(this,this._presentationModel)),this._priceCaptureZone=this._captureZoneManager.create(l.PROPAGATE_UNHANDLED,p.ANNOTATION_EDIT_MODE_TEXT_SELECTION).addGestureRecogniser(this._boxTapGestureRecogniser)},m._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("horizontalLine",!0),this._createLine(),this._createLabel(),this._createDialogOpenersCaptureZones(),t.superclass._initDom.call(this)},m._getDraggableElements=u.getter("_line"),m._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour),this._line.getElement().attr("stroke-width",r.CSS_WIDTH[e.width]),this._line.getElement().attr("stroke-dasharray",r.CSS_STYLE[e.style])},m._createLine=function(){this._line=c.create(this._dAnnotation,this._captureZoneManager).setLineCoordinates({x1:0,y1:0,x2:this._visibleRangeX.range()[1],y2:0}).withDefaultPadding().onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this)},m._createLabel=function(){var e,n,i=this._presentationModel.getAnchor().level,o=this._valueFormatter.scaleAndRoundPrice(i);this._dAnnotationDetails=this._dAnnotation.append("g"),this._dLabelGroup=this._dAnnotationDetails.classed("label",!0).attr("x",0).attr("y",0).attr("dy","-0.3em").append("svg:g").classed("horizontalLineLabel",!0),this._dLabelBackground=this._dLabelGroup.append("svg:rect").classed("background",!0).attr({x:1,y:-8,height:16}),this._dLabelText=this._dLabelGroup.append("svg:text").attr("x",t.PRICE_LEVEL_BOX_SIDE_PADDING).attr("y",4).classed("text",!0),this._dLabelText.append("svg:tspan").classed("title",!0).text(o),e=this._dLabelText.node().getBoundingClientRect().width,n=e+2*t.PRICE_LEVEL_BOX_SIDE_PADDING,this._minLeftOffset=n+a.DEFAULT_SIZE,this._dLabelBackground.attr("width",n)},m._showSettingsDialog=u.delegate("_annotationsPresentationController","onAnnotationDoubleTap"),m._onDrag=function(e){var t,n=e.x-this._subView.dimensions.x,i=e.y-this._subView.dimensions.y,o=this._visibleRangeX.range()[1],r=this._visibleRangeY.range()[1];n=Math.max(n,1),n=Math.min(n,o-1),i=Math.max(i,1),i=Math.min(i,r-1),t=this.snap(n,i),this._presentationModel.setAnchor(null,this._visibleRangeY.invert(t.y)),this._editAnchors[0].setPosition(Math.max(t.x,this._minLeftOffset),0),this._setAnnotationAsActive()},m._removePriceCaptureZone=function(){this._priceCaptureZone&&(this._priceCaptureZone.removeGestureRecogniser(this._boxTapGestureRecogniser),this._boxTapGestureRecogniser=null,this._priceCaptureZone.destroy(),this._priceCaptureZone=null)},m._updateSelectionCaptureZoneZIndex=function(e){this._line.updateCaptureZoneIndex(e,!0)},Object.seal(m),Object.seal(t)})),define("module/core/js/view/userinput/ovalcapturezone",["require","module/core/js/view/userinput/abstractcapturezone","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/util/math","module/core/js/view/userinput/rectanglecapturezone"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/view/userinput/abstractcapturezone"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/geometry"),s=e("module/core/js/util/math"),a=e("module/core/js/view/userinput/rectanglecapturezone");i.extend(t,n),t.create=function(e,n,i){return new t(e,n,i)};var l=t.prototype;return l._constraints=null,l._cx=null,l._cy=null,l._rx=null,l._ry=null,l.getType=o.returns("oval"),l.setCoordinates=function(e,t,n,i,o){return this._cx=e,this._cy=t,this._rx=n+this._padding,this._ry=i+this._padding,o?this._constraints=o:delete this._constraints,this},l.pointInCaptureZone=function(e,t){return!!this.isSet()&&(!(this._constraints&&!a.prototype.pointInCaptureZone.call(this._constraints,e,t))&&this._pointInZone(e,t))},l._pointInZone=function(e,t){return r.pointInOval(e,t,this._cx,this._cy,this._rx,this._ry)},l.isSet=function(){return s.isNumber(this._cx)&&s.isNumber(this._cy)&&s.isNumber(this._rx)&&this._rx>0&&s.isNumber(this._ry)&&this._ry>0},Object.seal(l),Object.seal(t)})),define("module/core/js/view/component/svg/oval",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/view/userinput/ovalcapturezone","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/view/component/svg/abstractsvgwrapper"),i=e("module/core/js/util/class"),o=e("module/core/js/view/userinput/eventpropagation"),r=e("module/core/js/view/userinput/ovalcapturezone"),s=e("module/core/js/enum/zindexenum");i.extend(t,n),t.create=function(e,n){return new t(e,n)};var a=t.prototype;return a._centre=null,a._xRadius=null,a._yRadius=null,a.setCentre=function(e){this._centre=e,this.render()},a.setRadius=function(e,t){this._xRadius=e,this._yRadius=t,this.render()},a._initDom=function(){this._dComponent=this._dContainer.append("ellipse").classed("oval",!0)},a._createCaptureZone=function(){return this._captureZone||(this._captureZone=this._captureZoneManager.createZone(r,this._captureZonePropagation||o.PROPAGATE_UNHANDLED,s.ANNOTATION_SELECTION)),this._editCaptureZone||(this._editCaptureZone=this._captureZoneManager.createZone(r,o.PROPAGATE_UNHANDLED,s.ANNOTATION_MOVING)),this},a.render=function(){t.superclass.render.call(this),this._centre&&this._dComponent.attr("cx",this._centre.x).attr("cy",this._centre.y).attr("rx",this._xRadius).attr("ry",this._yRadius)},a.updateCaptureZone=function(){return this._centre&&this._xRadius&&this._yRadius?(this._captureZone&&this._captureZone.setCoordinates(this._centre.x,this._centre.y,this._xRadius,this._yRadius,this._captureZoneConstraints),this._editCaptureZone&&this._editCaptureZone.setCoordinates(this._centre.x,this._centre.y,this._xRadius,this._yRadius,this._captureZoneConstraints),this):this},Object.seal(a),Object.seal(t)})),define("module/annotations/js/view/userinput/ovalannotationcapturezone",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/userinput/ovalcapturezone"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/geometry"),r=e("module/core/js/view/userinput/ovalcapturezone");n.extend(t,r),t.create=function(e,n,i){return new t(e,n,i)};var s=t.prototype;return s._cornerX=null,s._cornerY=null,s.getType=i.returns("ovalannotation"),s.setAnnotationCoordinates=function(e,t,n,i,o){this.setCoordinates.call(this,e,t,Math.abs(n-e),Math.abs(i-t),o),this._cornerX=n,this._cornerY=i},s._pointInZone=function(e,n){return t.superclass._pointInZone.call(this,e,n)||this._pointInAdditionalArea(e,n)},s._pointInAdditionalArea=function(e,t){var n=this._getCornerBoundingRect();return o.isPointInRectangle(e,t,n.x1,n.y1,n.x2,n.y2)},s._getCornerBoundingRect=function(){return{x1:Math.min(this._cx,this._cornerX)-this._padding,y1:Math.min(this._cy,this._cornerY)-this._padding,x2:Math.max(this._cx,this._cornerX)+this._padding,y2:Math.max(this._cy,this._cornerY)+this._padding}},Object.seal(s),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/ovalhelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/view/component/svg/line","module/core/js/view/component/svg/oval","module/annotations/js/view/userinput/ovalannotationcapturezone","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/css"),a=e("module/core/js/view/userinput/eventpropagation"),l=e("module/core/js/util/functional"),u=e("module/core/js/util/geometry"),c=e("module/core/js/view/userinput/hovergesturerecogniser"),d=e("module/core/js/view/component/svg/line"),h=e("module/core/js/view/component/svg/oval"),p=e("module/annotations/js/view/userinput/ovalannotationcapturezone"),m=e("module/core/js/enum/zindexenum");o.extend(t,i);var f=t.prototype;return f._getNumberOfEditAnchors=n.constant(2),f._interactiveEditModeCursor=s.CURSOR_TYPE.OVAL_CROSSHAIR,f._oval=null,f._anchorConnectors=null,f._hoverCaptureZone=null,f.destroy=function(){t.superclass.destroy.apply(this,arguments),this._anchorConnectors&&l.invokeCall(this._anchorConnectors,"destroy"),this._oval&&this._oval.destroy(),this._hoverCaptureZone&&this._hoverCaptureZone.destroy()},f._getDraggableElements=l.getter("_oval"),f._onDragPanGesture=function(e){var t,n,i,o,r;t=this._getAnchorPositionWhileDragging(0,e),n=this._getAnchorPositionWhileDragging(1,e),i=this.snap(t.x,t.y),r=u.getVector(t,i),o=u.movePointBy(n,r),this._setAnchorAtIndexBasedOnPoint(i,0),this._setAnchorAtIndexBasedOnPoint(o,1)},f._draw=function(){var e=this._getAnchorPointCoordinates(),t=e[0],n=e[1];this._updateEditAnchors(e),t&&n&&(this._drawOval(t,n),this._drawConnectionLines(t,n))},f._drawOval=function(e,t){var n,i;n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y),this._oval.setCentre(e),this._oval.setRadius(n,i),this._oval.setCaptureZoneConstraints(this._subView.dimensions),this._hoverCaptureZone.setAnnotationCoordinates(e.x,e.y,t.x,t.y,this._subView.dimensions)},f._drawConnectionLines=function(e,t){this._anchorConnectors[0].setLineCoordinates({x1:t.x,y1:t.y,x2:e.x,y2:t.y}),this._anchorConnectors[1].setLineCoordinates({x1:t.x,y1:t.y,x2:t.x,y2:e.y}),l.invokeCall(this._anchorConnectors,"setCaptureZoneConstraints",this._subView.dimensions)},f._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("oval",!0),this._anchorConnectors=[d.create(this._dAnnotation,this._captureZoneManager).setVisible(!1),d.create(this._dAnnotation,this._captureZoneManager).setVisible(!1)],this._oval=h.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onContextMenu(this._contextMenu,this),this._createHoverZone(),t.superclass._initDom.call(this)},f._createHoverZone=function(){this._hoverCaptureZone=this._captureZoneManager.createZone(p,a.PROPAGATE_ALL,m.ANNOTATION_MOVING),this._hoverCaptureZone.withDefaultPadding(),this._hoverCaptureZone.addGestureRecogniser(c.create().withStartHandler(this._mouseIn,this).withEndHandler(this._mouseOut,this))},f._createEditAnchors=function(){t.superclass._createEditAnchors.call(this),this._editAnchors[0].onDrag(l.empty,this).setCaptureZonePropagation(a.PROPAGATE_ALL),l.invokeCall(this._anchorConnectors,"setVisible",!0)},f.updateAnchor=function(e,n){var i,o,r=this._getAnchorPointCoordinates()[0];0===e?t.superclass.updateAnchor.call(this,e,n):(i=this._getCursorPointFromRecogniser(n),o=this._annotationsPresentationController.snapToCircle(r.x,r.y,i.x,i.y),this._setAnchorAtIndexBasedOnPoint(o,e))},f._removeEditAnchors=function(){t.superclass._removeEditAnchors.call(this),l.invokeCall(this._anchorConnectors,"setVisible",!1)},f._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr({fill:e.colour,stroke:e.colour}),this._oval.getElement().attr({"stroke-width":r.CSS_WIDTH[e.width],"stroke-dasharray":r.CSS_STYLE[e.style]})},f._updateSelectionCaptureZoneZIndex=function(e){this._oval.updateCaptureZoneIndex(e,!0)},Object.seal(f),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/pointtopointhelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/util/functional","module/core/js/view/component/svg/line"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/css"),a=e("module/core/js/util/functional"),l=e("module/core/js/view/component/svg/line");o.extend(t,i);var u=t.prototype;return u._interactiveEditModeCursor=s.CURSOR_TYPE.POINT_TO_POINT_CROSSHAIR,u._line=null,u._getNumberOfEditAnchors=n.constant(2),u.destroy=function(){t.superclass.destroy.apply(this,arguments),this._line&&(this._line.destroy(),this._line=null)},u._draw=function(){var e;this._updateEditAnchors(n.compact(this._getAnchorPointCoordinates())),null===this._presentationModel.getIndexOfFirstUnsetAttribute()&&(e=this._presentationModel.getLineCoordinates(this._timeline,this._visibleRangeX,this._visibleRangeY),this._line.setLineCoordinates(e))},u._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("pointToPoint",!0),this._line=l.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this),t.superclass._initDom.call(this)},u._getDraggableElements=a.getter("_line"),u._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour),this._line.getElement().attr("stroke-width",r.CSS_WIDTH[e.width]),this._line.getElement().attr("stroke-dasharray",r.CSS_STYLE[e.style])},u._updateSelectionCaptureZoneZIndex=function(e){this._line.updateCaptureZoneIndex(e,!0)},Object.seal(u),Object.seal(t)})),define("module/core/js/view/component/svg/rect",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/view/component/svg/abstractsvgwrapper");e("module/core/js/util/class").extend(t,n),t.create=function(e,n){return new t(e,n)};var i=t.prototype;return i._initDom=function(){this._dComponent=this._dContainer.append("rect").classed("rect",!0)},i.setRectCoordinates=function(e,t){return isFinite(e.x)&&this._setRectCoordinates("x",e.x),isFinite(e.y)&&this._setRectCoordinates("y",e.y),isFinite(e.height)&&this._setRectCoordinates("height",e.height),isFinite(e.width)&&this._setRectCoordinates("width",e.width),this.setCaptureZoneConstraints(t),this},i._setRectCoordinates=function(e,t){return this._dComponent.attr(e,t),this},Object.seal(i),Object.seal(t)})),define("module/core/js/view/component/rectanglewithanchorpoints",["require","module/core/js/util/class","module/core/js/util/css","module/core/js/view/component/svg/editanchor","module/core/js/util/functional","module/core/js/view/component/svg/rect","module/core/js/event/subscribable","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n,i){this._dContainer=e,this._captureZoneManager=t,this._subView=n,this._timeline=i,this._visibleWindow=n.visibleWindow,this._visibleRangeX=this._visibleWindow.getXScale(),this._visibleRangeY=this._visibleWindow.y}var n=e("module/core/js/util/class"),i=e("module/core/js/util/css"),o=e("module/core/js/view/component/svg/editanchor"),r=e("module/core/js/util/functional"),s=e("module/core/js/view/component/svg/rect"),a=e("module/core/js/event/subscribable"),l=e("module/core/js/enum/zindexenum");n.extend(t,a),t.create=function(e,n,i,o){return new t(e,n,i,o)},t.CONTEXT_MENU="CONTEXT_MENU",t.ANCHOR_DRAG_START="ANCHOR_DRAG_START",t.ANCHOR_DRAG_END="ANCHOR_DRAG_END",t.ANCHOR1_PAN="ANCHOR1_PAN",t.ANCHOR2_PAN="ANCHOR2_PAN",t.DRAG_START="DRAG_START",t.DRAG_END="DRAG_END",t.DRAG="DRAG",t.TAP="TAP",t.MOUSE_IN="MOUSE_IN",t.MOUSE_OUT="MOUSE_OUT";var u=t.prototype;return u._rect=null,u._dRectangle=null,u._editAnchor1=null,u._editAnchor2=null,u.initDom=function(){this._dRectangle=this._dContainer.append("g").classed("rectangle",!0),this._rect=s.create(this._dRectangle,this._captureZoneManager).onDragStart(this.fire.bind(this,t.DRAG_START),this).onDrag(this.fire.bind(this,t.DRAG),this).onDragEnd(this.fire.bind(this,t.DRAG_END),this).onTap(this.fire.bind(this,t.TAP),this).onHover(this.fire.bind(this,t.MOUSE_IN),this.fire.bind(this,t.MOUSE_OUT),this).onContextMenu(this.fire.bind(this,t.CONTEXT_MENU),this)},u.onHold=r.delegate("_rect","onHold"),u.onDoubleTap=r.delegate("_rect","onDoubleTap"),u.destroy=function(){this._rect&&(this._rect.destroy(),this._rect=null),this._dRectangle&&(this._dRectangle.remove(),this._dRectangle=null),this.removeEditAnchors()},u.render=function(e,t){var n,i,o,r,s,a;n=this._renderEditAnchorAndGetPosition(e,this._editAnchor1),i=this._renderEditAnchorAndGetPosition(t,this._editAnchor2),n&&i&&(o=Math.min(n.x,i.x),r=Math.min(n.y,i.y),s=Math.max(Math.abs(i.y-n.y),1),a=Math.max(Math.abs(i.x-n.x),1),this._rect.setRectCoordinates({x:o,y:r,height:s,width:a},this._subView.dimensions))},u._renderEditAnchorAndGetPosition=function(e,t){var n,i;return e?(n=this._visibleRangeX(this._timeline.asAccTime(e.timestamp,!0)),i=this._visibleRangeY(e.level),t&&(t.setVisible(!0),t.setPosition(n,i),t.setCaptureZoneConstraints(this._subView.dimensions)),{x:n,y:i}):(t&&t.setVisible(!1),null)},u.createEditAnchors=function(e){e=e||{};var n=e.anchorZIndex||l.RECTANGLE_ANCHORS,r=e.onHoverCursorType;this._editAnchor1=o.create(this._dRectangle,this._captureZoneManager).onContextMenu(this.fire.bind(this,t.CONTEXT_MENU)).onDragStart(this.fire.bind(this,t.ANCHOR_DRAG_START)).onDrag(this.fire.bind(this,t.ANCHOR1_PAN)).onDragEnd(this.fire.bind(this,t.ANCHOR_DRAG_END)).withCursorOnDragging(i.CURSOR_TYPE.CROSSHAIR).updateCaptureZoneIndex(n).setVisible(!1),this._editAnchor2=o.create(this._dRectangle,this._captureZoneManager).onContextMenu(this.fire.bind(this,t.CONTEXT_MENU)).onDragStart(this.fire.bind(this,t.ANCHOR_DRAG_START)).onDrag(this.fire.bind(this,t.ANCHOR2_PAN)).onDragEnd(this.fire.bind(this,t.ANCHOR_DRAG_END)).withCursorOnDragging(i.CURSOR_TYPE.CROSSHAIR).updateCaptureZoneIndex(n).setVisible(!1),r&&this.withAnchorCursorOnHover(r)},u.withAnchorCursorOnHover=function(e){this._editAnchor1.withCursorOnHover(e),this._editAnchor2.withCursorOnHover(e)},u.withoutAnchorCursorOnHover=function(){this._editAnchor1.withoutCursorOnHover(),this._editAnchor2.withoutCursorOnHover()},u.removeEditAnchors=function(){this._editAnchor1&&(this._editAnchor1.destroy(),this._editAnchor1=null),this._editAnchor2&&(this._editAnchor2.destroy(),this._editAnchor2=null)},u.updateStyles=function(e){this._dRectangle.attr("fill",e.colour).attr("stroke",e.colour),this._rect.getElement().attr("stroke-width",e.width),this._rect.getElement().attr("stroke-dasharray",e.style)},u.updateSelectionCaptureZoneZIndex=function(e){this._rect.updateCaptureZoneIndex(e,!0)},u.setEditEnabled=r.delegate("_rect","setEditEnabled"),u.withCursorOnHover=r.delegate("_rect","withCursorOnHover"),u.withoutCursorOnHover=r.delegate("_rect","withoutCursorOnHover"),Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/rectanglehelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/util/functional","module/core/js/view/component/rectanglewithanchorpoints"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/css"),a=e("module/core/js/util/functional"),l=e("module/core/js/view/component/rectanglewithanchorpoints");o.extend(t,i);var u=t.prototype;return u._interactiveEditModeCursor=s.CURSOR_TYPE.RECTANGLE_CROSSHAIR,u._rectangle=null,u.destroy=function(){t.superclass.destroy.apply(this,arguments),this._rectangle.un(null,this),this._rectangle.destroy(),this._rectangle=null},u._draw=function(){var e=this._presentationModel.getAnchor(0),t=this._presentationModel.getAnchor(1);e=e.level?e:null,t=t.level?t:null,this._rectangle.render(e,t)},u._getNumberOfEditAnchors=n.constant(0),u._createEditAnchors=a.delegate("_rectangle","createEditAnchors"),u._removeEditAnchors=a.delegate("_rectangle","removeEditAnchors"),u._enableHoverCursor=function(){t.superclass._enableHoverCursor.call(this),this._rectangle.withAnchorCursorOnHover(s.CURSOR_TYPE.CROSSHAIR)},u._disableHoverCursor=function(){t.superclass._disableHoverCursor.call(this),this._rectangle.withoutAnchorCursorOnHover()},u._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("rectangle",!0),this._rectangle=l.create(this._dAnnotation,this._captureZoneManager,this._subView,this._timeline),this._rectangle.initDom(),this._rectangle.on(l.CONTEXT_MENU,this._contextMenu,this),this._rectangle.on(l.ANCHOR_DRAG_START,this._setAnnotationAsActive,this),this._rectangle.on(l.ANCHOR1_PAN,this.updateAnchor.bind(this,0),this),this._rectangle.on(l.ANCHOR2_PAN,this.updateAnchor.bind(this,1),this),this._rectangle.on(l.DRAG_START,this._onDragPanGestureStart,this),this._rectangle.on(l.DRAG,this._onDragPanGesture,this),this._rectangle.on(l.TAP,this._onTap,this),this._rectangle.on(l.MOUSE_IN,this._mouseIn,this),this._rectangle.on(l.MOUSE_OUT,this._mouseOut,this),t.superclass._initDom.call(this)},u._getDraggableElements=a.getter("_rectangle"),u._updateStyles=function(){var e=this._presentationModel.getStyle();this._rectangle.updateStyles({colour:e.colour,width:r.CSS_WIDTH[e.width],style:r.CSS_STYLE[e.style]})},u._updateSelectionCaptureZoneZIndex=function(e){this._rectangle.updateSelectionCaptureZoneZIndex(e,!0)},Object.seal(u),Object.seal(t)})),define("module/core/js/view/component/svg/text",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/colour-customisation/js/view/customisationstyler","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/view/component/svg/abstractsvgwrapper"),i=e("module/colour-customisation/js/view/customisationstyler"),o=e("module/core/js/util/class");o.extend(t,n),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return r._dText=null,r._dBackgroundRect=null,r._initDom=function(){this._dComponent=this._dContainer.append("g").classed("text",!0),this._dBackgroundRect=this._dComponent.append("rect").classed("background",!0),this._dText=this._dComponent.append("text").classed("label",!0)},r.setText=function(e,t){this._dText.selectAll("*").remove(),e.forEach(this._addTextLine,this);var n=this._dText.node().getBoundingClientRect();return this._dBackgroundRect.attr("width",n.width+6).attr("height",n.height+6),this.setCaptureZoneConstraints(t),this},r.updateBackgroundStyles=function(e){this._dBackgroundRect.attr("fill",e.isVisible?e.colour:null).attr("fill-opacity",e.isVisible?1:0)},r.updateBorderStyles=function(e){this._dBackgroundRect.attr("stroke",e.isVisible?e.colour:null).attr("stroke-width",e.isVisible?i.CSS_WIDTH[e.width]:null).attr("stroke-dasharray",e.isVisible?i.CSS_STYLE[e.style]:null)},r._addTextLine=function(e,t){this._dText.append("tspan").text(e).attr("x",3).attr("y",1.2*(t+1)+"em")},Object.seal(r),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/textrendererhelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/core/js/util/css","module/core/js/util/functional","module/core/js/util/svg","module/core/js/view/component/svg/text","module/annotations/js/view/model/textpresentationmodel","module/annotations/js/view/component/dialog/textannotationdialogcontent"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.apply(this,arguments),this._eventBus=a,this._presentationModel.on(u.TEXT_CHANGED,this._updateText,this),this._presentationModel.on(c.DONE,this._annotationsPresentationController.finishInteractiveEditMode,this._annotationsPresentationController)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/core/js/util/css"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/svg"),l=e("module/core/js/view/component/svg/text"),u=e("module/annotations/js/view/model/textpresentationmodel"),c=e("module/annotations/js/view/component/dialog/textannotationdialogcontent");o.extend(t,i),t.NEW_LINE_STRING="\n";var d=t.prototype;return d._interactiveEditModeCursor=r.CURSOR_TYPE.TEXT,d._text=null,d._eventBus=null,d._getNumberOfEditAnchors=n.constant(1),d.destroy=function(){t.superclass.destroy.apply(this,arguments),this._text&&(this._text.destroy(),this._text=null)},d._draw=function(){var e,t=this._presentationModel.getAnchor();this._dAnnotation&&t.isSet()&&(e=this._anchorToChartPoint(t),this._dAnnotation.attr("transform",a.svgTranslateAttrXY(e.x,e.y)),this._text.setCaptureZoneConstraints(this._subView.dimensions),this._editAnchors[0]&&this._editAnchors[0].setCaptureZoneConstraints(this._subView.dimensions)),this._editAnchors[0]&&this._editAnchors[0].setVisible(!0)},d._handleInteractiveEditModeFinished=function(){this._displayTextEntryDialog()},d._createEditAnchors=function(){t.superclass._createEditAnchors.call(this),null!==this._presentationModel.getAnchor().level&&this._presentationModel.getUserText().length<=0&&this._displayTextEntryDialog()},d._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("text",!0),this._text=l.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this),this._updateText(),t.superclass._initDom.call(this)},d._getDraggableElements=s.getter("_text"),d._onAnnotationDoubleTap=function(){this._displayTextEntryDialog()},d._updateStyles=function(){
var e=this._presentationModel.getStyle();this._text.updateBackgroundStyles(e.background),this._text.updateBorderStyles(e.border)},d.updateAnchor=function(e,t){this._setAnchorAtIndexBasedOnPoint(t,e)},d._displayTextEntryDialog=function(){this._restoreCursor(),this._setAnnotationAsActive(),this._annotationsPresentationController.editAnnotationSettings()},d._updateText=function(){var e=this._presentationModel.getUserText().split(t.NEW_LINE_STRING);e&&this._presentationModel.getUserText().length>0&&(this._text.setText(e,this._subView.dimensions),this._editAnchors[0]&&this._editAnchors[0].updateCaptureZone())},d._updateSelectionCaptureZoneZIndex=function(e){this._text.updateCaptureZoneIndex(e,!0)},Object.seal(d),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/trendlinehelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/component/svg/line"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/css"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/geometry"),u=e("module/core/js/view/component/svg/line");o.extend(t,i);var c=t.prototype;return c._getNumberOfEditAnchors=n.constant(2),c._interactiveEditModeCursor=s.CURSOR_TYPE.TREND_CROSSHAIR,c._line=null,c.destroy=function(){t.superclass.destroy.apply(this,arguments),this._line&&(this._line.destroy(),this._line=null)},c._getLeftAnchorCoordinates=function(){var e,t=null;return 0!==this._presentationModel.getIndexOfFirstUnsetAttribute()&&(e=this._isAnchorOneLeft()?this._presentationModel.getAnchor(0):this._presentationModel.getAnchor(1),t=this._anchorToChartPoint(e)),t},c._getRightAnchorCoordinates=function(){var e,t=null;return this._presentationModel.allAttributesAreSet()&&(e=this._isAnchorOneLeft()?this._presentationModel.getAnchor(1):this._presentationModel.getAnchor(0),t=this._anchorToChartPoint(e)),t},c._draw=function(){var e,t=this._getLeftAnchorCoordinates(),i=this._getRightAnchorCoordinates(),o=this._visibleRangeX.range()[1],r=this._visibleRangeY.range()[1],s=n.compact([t].concat(i));t&&i&&(e=l.pointToPointLineRectangleIntersection(t.x,t.y,i.x,i.y,0,0,o,r),this._drawLine(t.x,t.y,i.x,i.y,e),s=this._getRestrictedAnchorCoordinates(t.x,t.y,i.x,i.y,e)),this._updateEditAnchors(s)},c._drawLine=function(e,t,n,i,o){2===o.length&&(e=o[0].x,t=o[0].y,n=o[1].x,i=o[1].y),this._line.setLineCoordinates({x1:e,y1:t,x2:n,y2:i},this._subView.dimensions)},c._getRestrictedAnchorCoordinates=function(e,t,n,i,o){var r,s,a,l;return 2===o.length&&(o[0].x<o[1].x?(s=o[0],r=o[1]):(s=o[1],r=o[0]),n<s.x?(n=s.x,i=s.y):e>r.x?(e=r.x,t=r.y):e!==n&&(e<s.x&&(e=s.x,t=s.y),n>r.x&&(n=r.x,i=r.y))),a={x:e,y:t},l={x:n,y:i},this._isAnchorOneLeft()?[a,l]:[l,a]},c._isAnchorOneLeft=function(){var e=this._presentationModel.getAnchor(0),t=this._presentationModel.getAnchor(1);return!e.isSet()||!t.isSet()||this._presentationModel.getAnchor(0).timestamp.getTime()<=this._presentationModel.getAnchor(1).timestamp.getTime()},c._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("trendLine",!0),this._line=u.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this),t.superclass._initDom.call(this)},c._setEditEnabled=a.delegate("_line","setEditEnabled"),c._getDraggableElements=a.getter("_line"),c._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour),this._line.getElement().attr("stroke-width",r.CSS_WIDTH[e.width]),this._line.getElement().attr("stroke-dasharray",r.CSS_STYLE[e.style])},c._updateSelectionCaptureZoneZIndex=function(e){this._line.updateCaptureZoneIndex(e,!0)},Object.seal(c),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/trianglehelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/util/functional","module/core/js/view/component/svg/triangle"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,o,r,s)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/css"),a=e("module/core/js/util/functional"),l=e("module/core/js/view/component/svg/triangle");o.extend(t,i);var u=t.prototype;return u._interactiveEditModeCursor=s.CURSOR_TYPE.TRIANGLE_CROSSHAIR,u._triangle=null,u._getNumberOfEditAnchors=n.constant(3),u.destroy=function(){t.superclass.destroy.call(this),this._triangle&&(this._triangle.destroy(),this._triangle=null)},u._draw=function(){var e=n.compact(this._getAnchorPointCoordinates());this._updateEditAnchors(e),this._triangle.setCoordinates(e,this._subView.dimensions)},u._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("triangle",!0),this._triangle=l.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDragStart(this._onDragPanGestureStart,this).onDrag(this._onDragPanGesture,this).onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this),t.superclass._initDom.call(this)},u._getDraggableElements=a.getter("_triangle"),u._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr({fill:e.colour,stroke:e.colour}),this._triangle.getElement().attr({"stroke-width":r.CSS_WIDTH[e.width],"stroke-dasharray":r.CSS_STYLE[e.style]})},u._updateSelectionCaptureZoneZIndex=function(e){this._triangle.updateCaptureZoneIndex(e,!0)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/pitchforkhelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/component/svg/line","module/core/js/util/svg","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,o,r,s)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/css"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/geometry"),u=e("module/core/js/view/component/svg/line"),c=e("module/core/js/util/svg"),d=e("module/core/js/enum/zindexenum");o.extend(t,i);var h=t.prototype;return h._interactiveEditModeCursor=s.CURSOR_TYPE.PITCHFORK_CROSSHAIR,h._lines=null,h._getNumberOfEditAnchors=n.constant(4),h._length=null,h.destroy=function(){t.superclass.destroy.call(this),a.invokeCall(this._lines,"destroy"),this._lines=null},h._createEditAnchors=function(){t.superclass._createEditAnchors.call(this),this._editAnchors[0].updateCaptureZoneIndex(d.ANNOTATION_ANCHORS+1),this._editAnchors[3].updateCaptureZoneIndex(d.ANNOTATION_ANCHORS-1)},h.updateAnchor=function(e,t){var n=this._getCursorPointFromRecogniser(t),i=this._getAnchorPointCoordinates(),o=this._getMidPoint(i),r=this.snap(n.x,n.y);3===e?(r=this._snapPointToCentreLine(r,i),this._isFourthAnchorPositionValid(r,i)?this._setAnchorAtIndexBasedOnPoint(r,e):this._setAnchorAtIndexBasedOnPoint(o,e)):(this._setAnchorAtIndexBasedOnPoint(r,e),this._presentationModel.allAttributesAreSet()&&(i=this._getAnchorPointCoordinates(),this._setAnchorAtIndexBasedOnPoint(this._transformPointAlongLength(this._getMidPoint(i),i),3)))},h._snapPointToCentreLine=function(e,t){var n=this._getMidPoint(t),i={x:t[2].x+e.x-t[1].x,y:t[2].y+e.y-t[1].y};return l.lineIntersection(t[0].x,t[0].y,n.x,n.y,e.x,e.y,i.x,i.y)},h._isFourthAnchorPositionValid=function(e,t){var n,i,o;return null!==e&&(n=this._getMidPoint(t),i=t[0].x-n.x,o=e.x-n.x,i>0?o<0:o>0)},h._transformPointAlongLength=function(e,t){var n=this._getMidPoint(t),i=Math.atan2(t[0].y-n.y,n.x-t[0].x);return{x:e.x+Math.cos(i)*this._length,y:e.y-Math.sin(i)*this._length}},h._draw=function(){var e,t=this._getAnchorPointCoordinates(),n=this._getMidPoint(t)||t[1];if(this._updateLength(),this._updateEditAnchors(t),this._updateLineAtIndexWithPoints(1,t[1],t[2]),t[3]){this._updateLineAtIndexWithPoints(0,t[0],t[3]),this._updateLineAtIndexWithPoints(2,t[1],this._transformPointAlongLength(t[1],t)),this._updateLineAtIndexWithPoints(3,t[2],this._transformPointAlongLength(t[2],t)),e=l.getMidPointOfTwoPoints(n,t[1]),this._updateLineAtIndexWithPoints(4,e,this._transformPointAlongLength(e,t)),e=l.getMidPointOfTwoPoints(n,t[2]),this._updateLineAtIndexWithPoints(5,e,this._transformPointAlongLength(e,t));var i=c.getPolygonAttrString([this._transformPointAlongLength(t[2],t),this._transformPointAlongLength(t[1],t),t[1],t[2]]);this._backgroundRect.attr("points",i)}else this._updateLineAtIndexWithPoints(0,t[0],n)},h._updateLength=function(){var e=this._getAnchorPointCoordinates(),t=this._getMidPoint(e);this._presentationModel.allAttributesAreSet()&&(this._length=l.distancePointToPoint(t.x,t.y,e[3].x,e[3].y))},h._updateLineAtIndexWithPoints=function(e,t,n){t&&n&&this._lines[e].setLineCoordinates({x1:t.x,y1:t.y,x2:n.x,y2:n.y},this._subView.dimensions)},h._getMidPoint=function(e){return e[1]&&e[2]?l.getMidPointOfTwoPoints(e[1],e[2]):null},h._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("pitchfork",!0),this._backgroundRect=this._dAnnotation.append("polygon").classed("background",!0),this._lines=[];for(var e=0;e<6;e++)this._lines.push(u.create(this._dAnnotation,this._captureZoneManager).withDefaultPadding().onDrag(this._onDragPanGesture,this).onDragStart(this._onDragPanGestureStart,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this).onTap(this._onTap,this));this._lines[4].getElement().attr("stroke-dasharray",r.CSS_STYLE.dashed),this._lines[5].getElement().attr("stroke-dasharray",r.CSS_STYLE.dashed),t.superclass._initDom.call(this)},h._getDraggableElements=a.getter("_lines"),h._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour);for(var t=0;t<4;t++)this._lines[t].updateStyle(e)},h._updateSelectionCaptureZoneZIndex=function(e){a.invokeCall(this._lines,"updateCaptureZoneIndex",e,!0)},Object.seal(h),Object.seal(t)})),define("module/annotations/js/view/renderer/helper/verticallinehelper",["require","lodash","module/annotations/js/view/renderer/helper/abstractannotationrendererhelper","module/core/js/util/class","module/colour-customisation/js/view/customisationstyler","module/core/js/util/css","module/core/js/view/component/svg/editanchor","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/component/svg/line","module/core/js/util/svg"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.apply(this,arguments)}var n=e("lodash"),i=e("module/annotations/js/view/renderer/helper/abstractannotationrendererhelper"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/view/customisationstyler"),s=e("module/core/js/util/css"),a=e("module/core/js/view/component/svg/editanchor"),l=e("module/core/js/view/userinput/eventpropagation"),u=e("module/core/js/util/functional"),c=e("module/core/js/view/component/svg/line"),d=e("module/core/js/util/svg");o.extend(t,i),t.EDIT_ANCHOR_TOP=100;var h=t.prototype;return h._interactiveEditModeCursor=s.CURSOR_TYPE.VERTICAL_LINE_CROSSHAIR,h._line=null,h.destroy=function(){t.superclass.destroy.apply(this,arguments),this._line&&(this._line.destroy(),this._line=null)},h.updateAnchor=function(e,t){this._onDrag(t)},h._draw=function(){var e,t,n=this._presentationModel.getAnchor().timestamp;n&&(e=this._timeline.asAccTime(n,!0),t=this._visibleRangeX(e),this._dAnnotation.attr("transform",d.svgTranslateAttrX(t)),this._line.setLineCoordinates({y2:this._visibleRangeY.range()[1]},this._subView.dimensions),this._editAnchors[0]&&(this._editAnchors[0].setVisible(!0),this._editAnchors[0].setCaptureZoneConstraints(this._subView.dimensions)))},h._initDom=function(){this._dAnnotation=this._dContainer.append("g").classed("verticalLine",!0),this._line=c.create(this._dAnnotation,this._captureZoneManager).setLineCoordinates({x1:0,x2:0,y1:0,y2:this._visibleRangeY.range()[1]},this._subView.dimensions).withDefaultPadding().onTap(this._onTap,this).onHover(this._mouseIn,this._mouseOut,this).onContextMenu(this._contextMenu,this),t.superclass._initDom.call(this)},h._getDraggableElements=u.getter("_line"),h._updateStyles=function(){var e=this._presentationModel.getStyle();this._dAnnotation.attr("fill",e.colour).attr("stroke",e.colour),this._line.getElement().attr("stroke-width",r.CSS_WIDTH[e.width]),this._line.getElement().attr("stroke-dasharray",r.CSS_STYLE[e.style])},h._onDrag=function(e){var t=e.x-this._subView.dimensions.x,n=e.y-this._subView.dimensions.y,i=this._visibleRangeX.range()[1],o=this._visibleRangeY.range()[1];t=Math.max(t,1),t=Math.min(t,i-1),n=Math.max(n,1),n=Math.min(n,o-1),this._presentationModel.setAnchor(this._timeline.asDate(this._visibleRangeX.invert(t))),this._editAnchors[0].setPosition(0,n),this._setAnnotationAsActive()},h._getNumberOfEditAnchors=n.constant(1),h._createEditAnchor=function(e){return a.create(this._dAnnotation,this._captureZoneManager,null,this._line.getElement()).onDragStart(this._setAnnotationAsActive,this).onDrag(this._onDrag,this).onContextMenu(this._contextMenu,this).setPosition(0,t.EDIT_ANCHOR_TOP).setCaptureZonePropagation(l.PROPAGATE_UNHANDLED)},h._updateSelectionCaptureZoneZIndex=function(e){this._line.updateCaptureZoneIndex(e,!0)},Object.seal(h),Object.seal(t)})),define("module/annotations/js/view/factory/annotationhelperfactory",["require","module/annotations/js/model/annotationtypeenum","module/annotations/js/view/renderer/helper/arrowrendererhelper","module/annotations/js/view/renderer/helper/channelhelper","module/annotations/js/view/renderer/helper/elliottwave12345helper","module/annotations/js/view/renderer/helper/elliottwaveabchelper","module/annotations/js/view/renderer/helper/fibonaccihelper","module/annotations/js/view/renderer/helper/fibonacciextensionhelper","module/annotations/js/view/renderer/helper/gannfanhelper","module/annotations/js/view/renderer/helper/gannlinehelper","module/annotations/js/view/renderer/helper/headandshouldershelper","module/annotations/js/view/renderer/helper/horizontallinehelper","module/annotations/js/view/renderer/helper/ovalhelper","module/annotations/js/view/renderer/helper/pointtopointhelper","module/annotations/js/view/renderer/helper/rectanglehelper","module/annotations/js/view/renderer/helper/textrendererhelper","module/annotations/js/view/renderer/helper/trendlinehelper","module/annotations/js/view/renderer/helper/trianglehelper","module/annotations/js/view/renderer/helper/pitchforkhelper","module/annotations/js/view/renderer/helper/verticallinehelper"],(function(e){"use strict";function t(){}var n=e("module/annotations/js/model/annotationtypeenum"),i=e("module/annotations/js/view/renderer/helper/arrowrendererhelper"),o=e("module/annotations/js/view/renderer/helper/channelhelper"),r=e("module/annotations/js/view/renderer/helper/elliottwave12345helper"),s=e("module/annotations/js/view/renderer/helper/elliottwaveabchelper"),a=e("module/annotations/js/view/renderer/helper/fibonaccihelper"),l=e("module/annotations/js/view/renderer/helper/fibonacciextensionhelper"),u=e("module/annotations/js/view/renderer/helper/gannfanhelper"),c=e("module/annotations/js/view/renderer/helper/gannlinehelper"),d=e("module/annotations/js/view/renderer/helper/headandshouldershelper"),h=e("module/annotations/js/view/renderer/helper/horizontallinehelper"),p=e("module/annotations/js/view/renderer/helper/ovalhelper"),m=e("module/annotations/js/view/renderer/helper/pointtopointhelper"),f=e("module/annotations/js/view/renderer/helper/rectanglehelper"),_=e("module/annotations/js/view/renderer/helper/textrendererhelper"),g=e("module/annotations/js/view/renderer/helper/trendlinehelper"),v=e("module/annotations/js/view/renderer/helper/trianglehelper"),y=e("module/annotations/js/view/renderer/helper/pitchforkhelper"),M=e("module/annotations/js/view/renderer/helper/verticallinehelper");return t._helpersMap={},t._helpersMap[n.ARROW]=i,t._helpersMap[n.CHANNEL]=o,t._helpersMap[n.ELLIOTT_WAVE]=r,t._helpersMap[n.ELLIOTT_WAVE_ABC]=s,t._helpersMap[n.FIBONACCI]=a,t._helpersMap[n.FIBONACCI_EXTENSION]=l,t._helpersMap[n.GANN_FAN]=u,t._helpersMap[n.GANN_LINE]=c,t._helpersMap[n.HEAD_AND_SHOULDERS]=d,t._helpersMap[n.HORIZONTAL_LINE]=h,t._helpersMap[n.OVAL]=p,t._helpersMap[n.PITCHFORK]=y,t._helpersMap[n.POINT_TO_POINT]=m,t._helpersMap[n.RECTANGLE]=f,t._helpersMap[n.TEXT]=_,t._helpersMap[n.TREND_LINE]=g,t._helpersMap[n.TRIANGLE]=v,t._helpersMap[n.VERTICAL_LINE]=M,Object.seal(t._helpersMap),t.create=function(e,n,i,o,r,s,a){return new(0,t._helpersMap[e.getType()])(e,n,i,o,r,s,a)},Object.seal(t)})),define("module/annotations/js/view/renderer/annotationsrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/annotations/js/view/factory/annotationhelperfactory","module/annotations/js/view/model/annotationspresentationmodel","module/core/js/util/class","module/core/js/util/functional","module/core/js/tracker/enum/schema","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments),this._annotationHelpers=[]}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/annotations/js/view/factory/annotationhelperfactory"),o=e("module/annotations/js/view/model/annotationspresentationmodel"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/tracker/enum/schema"),l=e("module/core/js/view/visiblewindow");r.extend(t,n);var u=t.prototype;return u._annotationHelpers=null,u.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(o.DESTROYED,this._removeAnnotationHelpers,this),this._presentationModel.on(o.HIDDEN_OR_SHOWN,this._hideShowAnnotation,this),this._presentationModel.on(o.INTERACTIVE_EDIT_MODE_CHANGED,this._handleInteractiveModeChanged,this),this._presentationModel.on(o.UPDATED,this.renderOnFrameEnd,this),this._visibleWindow.isReadyForRender()?this._handleReadyForRender():this._visibleWindow.on(l.READY_FOR_RENDER,this._handleReadyForRender,this,{once:!0})},u.render=function(){s.invokeApply(this._annotationHelpers,"render")},u.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._eventBus.unsubscribeAll(this),this._removeAnnotationHelpers()},u._handleReadyForRender=function(){this._presentationModel.on(o.RESET,this._createAnnotationHelpers,this),this._removeAnnotationHelpers(),this._createAnnotationHelpers()},u._hideShowAnnotation=function(e,t){t?this._createAnnotationHelper(e):this._removeAnnotationHelper(e)},u._handleInteractiveModeChanged=function(){var e=this._annotationHelpers[this._annotationHelpers.length-1];this._presentationModel.getEditModeAnnotation()&&(this._presentationModel.getInteractiveEditMode()?e.initialiseInteractiveEditMode():e.finishInteractiveEditMode())},u._createAnnotationHelpers=function(){var e=this._presentationModel.getAnnotations();e&&(e.forEach((function(e){e.getIsWithinVisibleRange()&&this._createAnnotationHelper(e)}),this),this.renderOnFrameEnd())},u._createAnnotationHelper=function(e){var t=i.create(e,this,this._visibleWindow,this._captureZoneManager,this._presentationModel,this._presentationController,this._eventBus);e.getIsWithinVisibleRange()&&this._eventBus.publish("tracker/chart",[{schema:a.ANNOTATIONS_ACTION,elementId:"ANNOTATION_"+e.getType().toUpperCase(),elementGroup:"ANNOTATION",elementValue:e.getType().toUpperCase(),elementType:"LAYER",actionType:"SHOW",annotationAttributes:e.getTrackingAttributes()}]),this._annotationHelpers.push(t)},u._removeAnnotationHelpers=function(){this._annotationHelpers.forEach(this._destroyAnnotationHelper,this),this._annotationHelpers=[]},u._removeAnnotationHelper=function(e){var t,n;for(n=0;n<this._annotationHelpers.length;n++)if(t=this._annotationHelpers[n],e===t.getAnnotationPresentationModel()){this._destroyAnnotationHelper(t),this._annotationHelpers.splice(n,1);break}},u._destroyAnnotationHelper=function(e){var t=e.getAnnotationPresentationModel();e.destroy(),this._eventBus.publish("tracker/chart",[{schema:a.ANNOTATIONS_ACTION,elementId:"ANNOTATION_"+t.getType().toUpperCase(),elementGroup:"ANNOTATION",elementValue:t.getType().toUpperCase(),elementType:"LAYER",actionType:"HIDE",annotationAttributes:t.getTrackingAttributes()}])},Object.seal(u),Object.seal(t)})),define("module/menu-common/js/actionlistener/abstractactionlistener",["require","module/core/js/util/oop"],(function(e){"use strict";function t(e){this._eventBus=e}var n=e("module/core/js/util/oop"),i=t.prototype;return i._eventBus=null,i.handleAction=n.abstractMethod,Object.seal(i),Object.seal(t)})),define("module/menu-common/js/enum/menusourceenum",[],(function(){"use strict";return Object.freeze({ANNOTATIONS_TOOLBOX:"ANNOTATIONS_TOOLBOX",MAIN:"MAIN_MENU",TOP:"TOP_MENU"})})),define("module/menu-common/js/actionlistener/createannotationactionlistener",["require","module/menu-common/js/actionlistener/abstractactionlistener","module/core/js/util/class","module/menu-common/js/enum/menusourceenum","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/menu-common/js/actionlistener/abstractactionlistener"),i=e("module/core/js/util/class"),o=e("module/menu-common/js/enum/menusourceenum"),r=e("module/core/js/tracker/enum/schema");i.extend(t,n),t.create=function(e){return new t(e)};var s=t.prototype;return s.handleAction=function(e,t,n,i){this._eventBus.publish("tracker/chart",[{schema:r.ELEMENT_ACTION,elementId:"MENU_ANNOTATIONS_"+e.id.toUpperCase(),elementParentId:i||o.MAIN,elementGroup:"MENU_ANNOTATIONS",elementValue:e.id.toUpperCase(),elementType:"BUTTON",actionType:"PRESS"}]),this._eventBus.publish("annotations/create",[e.id,n])},Object.seal(s),Object.seal(t)})),define("module/core/js/view/component/loadingindicator",["require","modernizr"],(function(e){"use strict";function t(){}var n=e("modernizr");t.create=function(){return new t};var i=t.prototype;return i._dLoadingOverlay=null,i._preloaderInterval=null,i.initDom=function(e){var t=e.select(".loadingOverlay");t.empty()?(this._dLoadingOverlay=e.append("div"),this._dLoadingOverlay.classed("loadingOverlay",!0),this._dLoadingOverlay.append("div").classed("loadingIndicator",!0)):this._dLoadingOverlay=t,this.show()},i.show=function(){var e,t,i,o=0;e=this._dLoadingOverlay.select(".loadingIndicator"),i=function(){o=(o+30)%360,t="rotate("+o+"deg)",e.style("-webkit-transform",t).style("-moz-transform",t).style("-ms-transform",t).style("transform",t),e.node().style.msTransform=t},n.cssanimations||(this._preloaderInterval=setInterval(i,1e3/12)),this._dLoadingOverlay.classed("hidden",!1)},i.hide=function(){this._preloaderInterval&&!n.cssanimations&&(clearInterval(this._preloaderInterval),this._preloaderInterval=null),this._dLoadingOverlay.classed("hidden",!0)},i.destroy=function(){this._preloaderInterval&&(clearInterval(this._preloaderInterval),this._preloaderInterval=null),this._dLoadingOverlay.remove(),this._dLoadingOverlay=null},Object.seal(i),Object.seal(t)})),define("module/menu-mobile/js/controls/buttonbar",["require","module/core/js/util/array","module/core/js/util/defer","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/component/loadingindicator","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n){this._captureZoneManager=e,this._menuViewItems=[],this._animationPoller=t,this._menuZIndex=a.MENU,this._isVertical=!!n}var n=e("module/core/js/util/array"),i=e("module/core/js/util/defer"),o=e("module/core/js/view/userinput/eventpropagation"),r=e("module/core/js/util/functional"),s=e("module/core/js/view/component/loadingindicator"),a=e("module/core/js/enum/zindexenum");t.create=function(e,n,i){return new t(e,n,i)};var l=t.prototype;return l._animationPoller=null,l._captureZoneManager=null,l._menuZIndex=null,l._menuViewItems=null,l._dButtonBarElement=null,l._dButtonBarContainer=null,l._loadingIndicator=null,l._isVertical=null,l._zoneBlocking=null,l.initDom=function(e,t,i){var r=e.append("div").classed("hidden",i).classed("container",!0).classed(t,!0),l=this._isVertical?r.append("div").classed("verticalPortView",!0):r,u=l.append("div").classed("bar",!0),c=u.append("div").classed(this._isVertical?"verticalItems":"items",!0);this._dButtonBarElement=u,this._dButtonBarContainer=r,this._dOptionsContainer=c,this._zoneBlocking=this._captureZoneManager.create(o.BLOCK_ALL,a.MENU_BLOCK_INTERACTIONS).withAssociatedElement(this._dButtonBarContainer),n.nonEmpty(this._menuViewItems)?this._menuViewItems.forEach((function(e){e.initDom(c)}),this):(this._loadingIndicator=s.create(),this._loadingIndicator.initDom(r))},l.render=function(){n.nonEmpty(this._menuViewItems)&&this._loadingIndicator&&(this._loadingIndicator.destroy(),this._loadingIndicator=null),r.invokeCall(this._menuViewItems,"render",this._dOptionsContainer),this.updateCaptureZoneSize()},l.addMenuViewItem=function(e){e.withZIndex(this._menuZIndex),this._menuViewItems.push(e)},l.setMenuViewItems=function(e){r.invokeCall(e,"withZIndex",this._menuZIndex),r.invokeApply(this._menuViewItems,"destroy"),this._menuViewItems=e.slice()},l.isVisible=function(){return!this._dButtonBarContainer.classed("hidden")},l.show=function(){this._dButtonBarContainer.classed("hidden",!1),i.defer(this.updateCaptureZoneSize,this)},l.hide=function(){this._dButtonBarContainer.classed("hidden",!0),i.defer(this.updateCaptureZoneSize,this)},l.clear=function(){this._menuViewItems.forEach((function(e){e.destroy()}),this),this._menuViewItems=[]},l.classed=r.delegate("_dButtonBarContainer","classed"),l.updateCaptureZoneSize=function(){r.invokeCall(this._menuViewItems,"updateClientBox"),this._zoneBlocking.setDimensionsBasedOnAssociatedElement()},l.getSelectedItems=function(){return this._menuViewItems.filter((function(e){return e.isSelected}))},l.selectItem=function(e){this._menuViewItems.forEach((function(t){e(t)&&(t.isSelected=!0,t.render(this._dOptionsContainer))}),this)},l.deselectItem=function(e){this._menuViewItems.forEach((function(t){e(t)&&(t.isSelected=!1,t.render(this._dOptionsContainer))}),this)},l.destroy=function(){this.clear(),this._zoneBlocking.destroy(),this._dButtonBarContainer.remove()},l.onDimensionsChanged=r.empty,l._getButtonById=function(e){return this._dOptionsContainer.select('[data-menu-item-id="'+e+'"]')},Object.seal(l),Object.seal(t)})),define("module/menu-mobile/js/view/menuviewitem",["require","module/core/js/ext/d3","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/util/object","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t){this._captureZoneManager=e,this.isSelected=t.isSelected||!1,this.label=t.label,this._data=t.data,this._cssClass=t.cssClass||"",this.isSticky=t.isSticky||!1,this._actionListener=t.actionListener,this._tapTextOnly=t.tapTextOnly||!1,this._zIndex=t.zIndex||a.MENU}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/userinput/eventpropagation"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/object"),s=e("module/core/js/view/userinput/tapgesturerecogniser"),a=e("module/core/js/enum/zindexenum");t.create=function(e,n){return new t(e,n)};var l=t.prototype;return l.isSelected=null,l.isSticky=!1,l.label=null,l._cssClass=null,l._data=null,l._actionListener=null,l._dMenuItem=null,l._dMenuItemText=null,l._captureZone=null,l._neutralCaptureZone=null,l._captureZoneManager=null,l._tapTextOnly=!1,l._zIndex=null,l._tapRecogniser=null,l.getData=o.getter("_data"),l.withActionListener=o.setter("_actionListener"),l.withZIndex=function(e){return this._zIndex=e,this._captureZone&&this._captureZone.withZIndex(e),this._neutralCaptureZone&&this._neutralCaptureZone.withZIndex(e-1),this},l.toString=function(){return'[MenuViewItem "'+this.label+'"]'},l.copy=function(){return t.create(this._captureZoneManager,{isSelected:this.isSelected,label:this.label,data:this._data,cssClass:this._cssClass,isSticky:this.isSticky,actionListener:this._actionListener,zIndex:this._zIndex})},l.getMenuItem=function(){return this._dMenuItem?n.select(this._dMenuItem.node()):null},l.initDom=function(e){this._dMenuItem=e.append("div"),this._dMenuItem.attr("data-menu-item-id",this._data?this._data.id:"").classed("menuViewItem",!0).classed("selected",this.isSelected),this._dMenuItemText=this._dMenuItem.append("div").classed("buttonText",!0).text(this.label),this._cssClass&&this._dMenuItem.select(".buttonText").classed(this._cssClass,!0),this._dMenuItem.classed("sticky",this.isSticky),this._attachActionListener()},l.render=function(e){!this._dMenuItem&&e&&this.initDom(e),this._dMenuItem.classed("selected",this.isSelected)},l.setMinWidth=function(e){this._dMenuItem.style("min-width",e+"px")},l.updateClientBox=function(e){var t=this._tapTextOnly?this._dMenuItemText:this._dMenuItem;this._captureZone&&this._captureZone.setDimensionsBasedOnElement(t,e),this._neutralCaptureZone&&this._neutralCaptureZone.setDimensionsBasedOnElement(this._dMenuItem,e)},l.getBoundingClientRect=function(){return this._dMenuItem?r.shallowClone(this._dMenuItem.node().getBoundingClientRect()):null},l.destroy=function(){this._dMenuItem&&(this._dMenuItem.remove(),this._dMenuItem=null),this._tapRecogniser&&(this._tapRecogniser.destroy(),this._tapRecogniser=null),this._captureZone&&(this._captureZone.destroy(),this._captureZone=null),this._neutralCaptureZone&&(this._neutralCaptureZone.destroy(),this._neutralCaptureZone=null)},l._attachActionListener=function(){this._tapRecogniser=s.create().withHandler(this._handleTap.bind(this)),this._captureZone=this._captureZoneManager.create(i.BLOCK_ALL,this._zIndex).addGestureRecogniser(this._tapRecogniser),this._tapTextOnly&&(this._neutralCaptureZone=this._captureZoneManager.create(i.BLOCK_ALL,this._zIndex-1)),this.updateClientBox()},l._handleTap=function(){this._actionListener&&(this.isSelected=!this.isSelected,this._actionListener.handleAction(this._data,this.isSelected))},l.getMenuItemId=function(){return this._data.id},l.updateLabel=function(e){this.label=e,this._dMenuItemText.text(e)},Object.seal(l),Object.seal(t)})),define("module/menu-mobile/js/view/menuview",["require","module/menu-mobile/js/controls/buttonbar","module/core/js/util/class","module/core/js/util/functional","module/menu-mobile/js/view/menuviewitem","module/core/js/util/object","module/core/js/event/subscribable"],(function(e){"use strict";function t(e){return e.getData().id}function n(e,t,n){this._animationPoller=t,this._captureZoneManager=e,this._menuItems=[],this._menuViewItems=[],this._config=a.merge({buttonBar:i,menuViewItem:s,isVertical:!1,buttonBarStyles:""},n)}
var i=e("module/menu-mobile/js/controls/buttonbar"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/menu-mobile/js/view/menuviewitem"),a=e("module/core/js/util/object"),l=e("module/core/js/event/subscribable");o.extend(n,l),n.create=function(e,t,i){return new n(e,t,i)},n.VISIBILITY_CHANGED="VISIBILITY_CHANGED";var u=n.prototype;return u._animationPoller=null,u._buttonBar=null,u._captureZoneManager=null,u._menuItems=null,u._menuViewItems=null,u.initDom=function(e){return this._buttonBar&&this._buttonBar.destroy(),this._buttonBar=this._createButtonBar(this._captureZoneManager,this._animationPoller),this._buttonBar.initDom(e.getViewElement(),this._createButtonBarStyles(),!1),this.withMenuItems(this._menuItems),this},u.withMenuItems=function(e,i){var o,r;if(this._menuItems=e,this._buttonBar){for(this._menuViewItems=[],r=0;r<e.length;r++)this._menuViewItems.push(this._createMenuViewItem(e[r]));i&&(o=this._buttonBar.getSelectedItems().map(t)),this._buttonBar.setMenuViewItems(this._menuViewItems),this.render(),i&&o.forEach(n.prototype.selectItem,this)}return this},u.render=r.delegate("_buttonBar","render"),u.isVisible=r.delegate("_buttonBar","isVisible"),u.show=function(){this._buttonBar.show(),this.fire(n.VISIBILITY_CHANGED)},u.hide=function(){this._buttonBar.hide(),this.fire(n.VISIBILITY_CHANGED)},u.classed=r.delegate("_buttonBar","classed"),u.updateCaptureZoneSize=r.delegate("_buttonBar","updateCaptureZoneSize"),u.onDimensionsChanged=r.delegate("_buttonBar","onDimensionsChanged"),u.selectItem=function(e){return this._buttonBar.selectItem((function(t){return t.getData().id===e})),this},u.deselectItem=function(e){return this._buttonBar.deselectItem((function(t){return t.getData().id===e})),this},u.destroy=function(){this._buttonBar&&(this._buttonBar.destroy(),this._buttonBar=null),this._menuItems=[],this._menuViewItems=[]},u._createMenuViewItem=function(e){return this._config.menuViewItem.create(this._captureZoneManager,e)},u._createButtonBar=function(e,t){return this._config.buttonBar.create(e,t,this._config.isVertical)},u.getActiveButtonBarItems=function(){if(this._buttonBar)return{active:this._buttonBar.getSelectedItems().map((function(e){return e.getData().id}))}},u.updateViewItemLabel=function(e,t){var n;for(n=0;n<this._menuViewItems.length;n++)if(this._menuViewItems[n].getMenuItemId()==e){this._menuViewItems[n].updateLabel(t);break}},u._createButtonBarStyles=function(){return this._config.buttonBarStyles},Object.seal(u),Object.seal(n)})),define("module/annotations/js/menu/annotationsselectionmenuview",["require","lodash","module/core/js/util/class","module/menu-mobile/js/view/menuview"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("lodash"),i=e("module/core/js/util/class"),o=e("module/menu-mobile/js/view/menuview");i.extend(t,o),t.create=function(e,n,i){return new t(e,n,i)};var r=t.prototype;return r._createButtonBar=function(e,t){return new this._config.buttonBar(e,t,!0)},r._createButtonBarStyles=n.constant("hidden container annotations vertical"),Object.seal(r),Object.seal(t)})),define("module/menu-common/js/menu/menuevents",[],(function(){"use strict";return Object.freeze({MENU_READY:"menuReady",CHANGED:"changed"})})),define("module/menu-common/js/controller/menucontroller",["require","lodash","module/core/js/util/array","module/core/js/util/class","module/menu-common/js/i18n","module/menu-common/js/menu/menuevents","module/core/js/util/functional","module/menu-common/js/enum/menusourceenum","module/menu-mobile/js/view/menuview","module/core/js/util/object","module/core/js/event/subscribable"],(function(e){"use strict";function t(e,t,n,i,o){this._eventBus=e,this._settingsManager=t,this._containerProvider=n,this._hiddenMenuItems={},this._taskManager=o,i&&(this._toggleStates=i,i.on("toggled",this._switchItem,this))}var n=e("lodash"),i=e("module/core/js/util/array"),o=e("module/core/js/util/class"),r=e("module/menu-common/js/i18n"),s=e("module/menu-common/js/menu/menuevents"),a=e("module/core/js/util/functional"),l=e("module/menu-common/js/enum/menusourceenum"),u=e("module/menu-mobile/js/view/menuview"),c=e("module/core/js/util/object"),d=e("module/core/js/event/subscribable");o.extend(t,d);var h=t.prototype;return h.id=null,h.viewClass=null,h._containerProvider=null,h._eventBus=null,h._taskManager=null,h._model=null,h._settingsManager=null,h._view=null,h._hiddenMenuItems=null,h._captureZoneManager=null,h._switchItem=function(e,t){this.id!==e||t?(this._hiddenMenuItems[e]=!t,this._containsMenuItem(e)&&this.withModel(this._model,!0)):this.hide()},h.withModel=function(e,t){return this._model=e,this._updateDefaultVisibility(),this._view&&this._view.withMenuItems(this._getVisibleItems(),!!t),this.fire(s.CHANGED),this},h.getModel=a.getter("_model"),h.getMenuOptions=function(){return c.deepCopyLiteral([],this._getVisibleItems())},h.initDom=function(e,t,n){if(this._view&&this._destroyDom(),this._toggleStates)for(var i in this._toggleStates)this._toggleStates.hasOwnProperty(i)&&this._switchItem(i,this._toggleStates[i]);return this._view=this._createMenuView(t,n),this._view.on(u.VISIBILITY_CHANGED,this._handleMenuViewVisibilityChange,this),this._model&&this.withModel(this._model),this._view.initDom(e),this._whenViewIsReady(),this},h.show=a.delegate("_view","show"),h.hide=a.delegate("_view","hide"),h._sendToTracker=function(e){e&&e.hasOwnProperty("elementParentId")&&(e.elementParentId=e.elementParentId||l.MAIN),this._eventBus.publish("tracker/chart",[e])},h.onDimensionsChanged=a.delegate("_view","onDimensionsChanged"),h.updateCaptureZoneSize=a.delegate("_view","updateCaptureZoneSize"),h.getMenuTitle=function(){return r.get(this.id)},h._dialogBox=null,h._updateDefaultVisibility=function(){this._model.forEach(function(e){void 0===e.visibleByDefault||this._hiddenMenuItems.hasOwnProperty(e.data.id)||(this._hiddenMenuItems[e.data.id]=!e.visibleByDefault)}.bind(this))},h.destroy=function(){this._dialogBox&&(this._dialogBox.destroy(),this._dialogBox=null),this._toggleStates&&(this._toggleStates.un(null,this),this._toggleStates=null),this._destroyDom(),this.un(null),this._eventBus.unsubscribeAll(this),this._model=null,this._settingsManager&&(this._settingsManager.un(null,this),this._settingsManager=null),this._captureZoneManager&&(this._captureZoneManager=null)},h._createMenuView=function(e,t){return this._captureZoneManager=e,this.viewClass.create(e,t)},h._getVisibleItems=function(){var e=[];return this._model&&(e=this._model.filter((function(e){return!e.data||!this._hiddenMenuItems[e.data.id]}),this)),e},h._isItemVisible=function(e){var t=this._getVisibleItems();return n.some(t,["data.id",e])},h._containsMenuItem=function(e){return!!this._getMenuItemById(e)},h._getMenuItemById=function(e){return this._model?i.find(this._model,(function(t){return t.data&&t.data.id===e})):null},h._handleMenuViewVisibilityChange=function(){this._eventBus.publish("menu/visibility/changed")},h._updateModelSelectedState=function(e,t){var n=this._getMenuItemById(e);n&&(n.isSelected=t)},h._whenViewIsReady=a.empty,h._destroyDom=function(){this._view&&(this._eventBus.unsubscribeAll(this._view),this._view.un(null,this),this._view.destroy(),this._view=null)},h.getActiveSubItems=function(){return this._view?this._view.getActiveButtonBarItems():{}},Object.seal(h),Object.seal(t)})),define("module/core/js/view/userinput/abstractscrollablecontainer",["require","module/core/js/util/functional","module/core/js/util/oop"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/oop"),o=t.prototype;return o.destroy=n.empty,o.moveByPixels=i.abstractMethod,o.onScrollEnd=i.abstractMethod,o.distanceOverLeftBound=i.abstractMethod,o.distanceOverRightBound=i.abstractMethod,o.isOutOfBounds=i.abstractMethod,Object.seal(o),Object.seal(t)})),define("module/core/js/view/userinput/scroller",["require","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/util/animation/animationpoller","module/core/js/util/functional","module/core/js/util/numberpairs"],(function(e){"use strict";function t(e){this._animationNamespace="scroller-"+e}var n=e("module/core/js/view/userinput/abstractgesturerecogniser"),i=e("module/core/js/util/animation/animationpoller"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/numberpairs"),s=[-6.5,6.5],a=t.prototype;return t.create=function(e){return new t(e)},t.LOW_FRICTION=.001,t.HIGH_FRICTION=.005,a._velocity=0,a._animationNamespace=null,a._scrollableContainer=null,a._dragging=!1,a._elastics=null,a._forces=null,a._isAccidentalMovement=!0,a._timestampLastUserInput=null,a._timestampOfInputStart=null,a._offsetPixelsSinceInputStart=null,a._animationPoller=null,a._frictionCoefficient=null,a._lastDragOffset=null,a._recogniser=null,a.withAnimationPoller=o.setter("_animationPoller"),a.withFrictionCoefficient=o.setter("_frictionCoefficient"),a.isDragging=o.getter("_dragging"),a._kineticMovement=!1,a.setKineticMovement=o.setter("_kineticMovement"),a.startGettingInputFrom=function(e){return this._recogniser&&this._recogniser.clearHandlers(),this._recogniser=e,e.withStartHandler(this._handleDragStart,this).withHandler(this._handleDragMove,this).withEndHandler(this._handleDragEnd,this),this},a.manageMovementIn=function(e){var t=e.distanceOverLeftBound.bind(e),n=e.distanceOverRightBound.bind(e);return this._elastics={left:this._elastic.bind(this,t,-1),right:this._elastic.bind(this,n,1)},this._scrollableContainer=e,this},a.applyForces=function(){this._forces=[this._elastics.left,this._elastics.right,this._friction],this._animationPoller.newOngoingTask(this._animationNamespace,this._step.bind(this))},a.destroy=function(){this._animationPoller.killTasks(this._animationNamespace),this._recogniser&&(this._recogniser.clearHandlers(),delete this._recogniser)},a._handleDragStart=function(){this._forces=[this._elastics.left,this._elastics.right],this._dragging=!0,this._makeMovementAccidental(),this.stopMovement()},a.stopMovement=function(){var e=this._velocity>0;this._velocity=0,this._animationPoller.killTasks(this._animationNamespace),this._lastDragOffset=0,e&&this._scrollableContainer.onScrollEnd(this._animationPoller.frameRateMonitor)},a._getDelta=function(e){return e.deltaX||e.deltaY||0},a._handleDragMove=function(e){var t,o=this._getDelta(e),a=o-this._lastDragOffset,l=i.timestamp(),u=l-this._timestampLastUserInput,c=l-this._timestampOfInputStart;this._timestampLastUserInput=l,this._isUserPause(u)?this._makeMovementAccidental():(u<1&&(u=1),this._offsetPixelsSinceInputStart+=o,t=Math.abs(this._offsetPixelsSinceInputStart)>n.GESTURE_PRECISION,this._isAccidentalMovement&&t&&c>=0&&(this._isAccidentalMovement=!1),this._velocity=r.clampInRange(a/u,s),this._lastDragOffset=o,a&&this._scrollableContainer.moveByPixels(a,!0))},a._handleDragEnd=function(){var e=i.timestamp(),t=e-this._timestampLastUserInput;this._timestampLastUserInput=e,(this._isUserPause(t)||this._isAccidentalMovement)&&(this._velocity=0),this._forces=[this._elastics.left,this._elastics.right,this._friction],this._dragging=!1,this._animationPoller.newOngoingTask(this._animationNamespace,this._step.bind(this))},a._step=function(e,t,n){var i,o,r,s=this._sumForces(this._forces,this._velocity,e),a=s/1,l=this._velocity+a*e,u=l*e;return this._scrollableContainer.isOutOfBounds()&&(this._dragging?(this._velocity<=0&&l>0||this._velocity>=0&&l<0)&&(l=0,u=0):(i=this._scrollableContainer.distanceOverRightBound(),o=this._scrollableContainer.distanceOverLeftBound(),i>0&&i<u?(u=i,l=0):o>0&&o<-u&&(u=-o,l=0))),this._velocity=l,Math.abs(u)>.5&&this._scrollableContainer.moveByPixels(u,!0),r=!this._scrollableContainer.isOutOfBounds()&&this._isStatic(),r&&this._scrollableContainer.onScrollEnd(this._animationPoller.frameRateMonitor),r},a._sumForces=function(e,t,n){var i,o,r=0;for(o=0;o<e.length;o++)i=e[o],r+=i.call(this,t,n);return r},a._friction=function(e,t){var n,i,o,r=e>0;return this._isStatic()?n=0:(n=1*this._frictionCoefficient*-e,i=e+n*t,o=i>0,r!==o&&(n=-e/t)),n},a._elastic=function(e,t){var n=e();if(n<=0)return 0;var i=15e-6*Math.pow(n,1.2);return Math.max(i,5e-4)*t},a._isStatic=function(){return!this._kineticMovement||Math.abs(this._velocity)<.004},a._isUserPause=function(e){return e>200},a._makeMovementAccidental=function(e){e=e||0,this._timestampOfInputStart=i.timestamp()+e,this._offsetPixelsSinceInputStart=0,this._isAccidentalMovement=this._recogniser.maxPointers<2},Object.seal(a),Object.seal(t)})),define("module/core/js/view/userinput/scrollablecontainer",["require","module/core/js/ext/d3","module/core/js/view/userinput/abstractscrollablecontainer","module/core/js/view/chartanimationconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/interpolation","module/core/js/view/userinput/scroller","module/core/js/util/uid"],(function(e){"use strict";function t(e,n,i,o,r){this._dScrollingContainer=e,this._dButtonBarContainer=n,this._animationNamespace="scrollableContainer-"+u.getUid(),this._animationPoller=o,this._createScroller(i),this._scrollModeHelper=r?t._verticalModeHelper:t._horizontalModeHelper}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/userinput/abstractscrollablecontainer"),o=e("module/core/js/view/chartanimationconstants"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/interpolation"),l=e("module/core/js/view/userinput/scroller"),u=e("module/core/js/util/uid");r.extend(t,i),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)},t._verticalModeHelper=Object.freeze({getCurrentPosition:s.invoker("top"),getLength:s.invoker("height"),moveTo:function(e,t){e.top(t)}}),t._horizontalModeHelper=Object.freeze({getCurrentPosition:s.invoker("left"),getLength:s.invoker("width"),moveTo:function(e,t){e.left(t)}});var c=t.prototype;return c._animationPoller=null,c._scroller=null,c._scrollModeHelper=null,c._dScrollingContainer=null,c._dButtonBarContainer=null,c._onScrollCallback=s.empty,c.withScrollCallback=s.setter("_onScrollCallback"),c._createScroller=function(e){this._scroller=l.create(this._animationNamespace).withAnimationPoller(this._animationPoller).withFrictionCoefficient(l.HIGH_FRICTION).startGettingInputFrom(e).manageMovementIn(this)},c.destroy=function(){this._animationPoller.killTasks(this._animationNamespace),this._scroller.destroy()},c.moveByPixels=function(e,t){var i=this._scrollModeHelper.getCurrentPosition(this._dScrollingContainer),r=i+e;this.distanceOverLeftBound()>=0&&this.distanceOverRightBound()>=0||(t?this._step(i,r,s.identity,1):(this._animationPoller.killTasks(this._animationNamespace),this._animationPoller.newFixedTimeTask(this._animationNamespace,this._step.bind(this,i,r,n.ease(o.ANIM_EASE)),2*o.ANIM_DURATION)))},c.onScrollEnd=function(e){},c.distanceOverLeftBound=function(){return this._scrollModeHelper.getCurrentPosition(this._dScrollingContainer)},c.distanceOverRightBound=function(){var e=this._scrollModeHelper.getLength(this._dScrollingContainer);return this._scrollModeHelper.getLength(this._dButtonBarContainer)-e-this._scrollModeHelper.getCurrentPosition(this._dScrollingContainer)},c.isOutOfBounds=function(){return this.distanceOverLeftBound()>0||this.distanceOverRightBound()>0},c._step=function(e,t,n,i){var o=a.easedInterpolation(n,e,t,i);this._scrollModeHelper.moveTo(this._dScrollingContainer,o),this._onScrollCallback()},Object.seal(c),Object.seal(t)})),define("module/menu-mobile/js/controls/scrollablebuttonbar",["require","module/menu-mobile/js/controls/buttonbar","module/core/js/util/class","module/core/js/util/defer","module/core/js/view/userinput/directionalpangesturerecogniser","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/util/object","module/core/js/view/userinput/rectanglecapturezone","module/core/js/view/userinput/scrollablecontainer","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t){return!(!e||!t||e.toString()!==t.toString())}function n(e,t,i,o){n.superclass.constructor.apply(this,arguments),this.updateCaptureZoneSize=l.throttledDeferred(this.updateCaptureZoneSize),this._updateStickyItem=l.throttledDeferred(this._updateStickyItem),this._hasSticky=o}var i=e("module/menu-mobile/js/controls/buttonbar"),o=e("module/core/js/util/class"),r=e("module/core/js/util/defer"),s=e("module/core/js/view/userinput/directionalpangesturerecogniser"),a=e("module/core/js/view/userinput/eventpropagation"),l=e("module/core/js/util/functional"),u=e("module/core/js/util/object"),c=e("module/core/js/view/userinput/rectanglecapturezone"),d=e("module/core/js/view/userinput/scrollablecontainer"),h=e("module/core/js/enum/zindexenum");o.extend(n,i),n.OCCLUSION_TOLERANCE=14,n.create=function(e,t,i,o){return new n(e,t,i,o)},n._verticalModeHelper=Object.freeze({getLengthFromSelection:l.invoker("height"),getLengthFromBounds:l.plucker("height"),getStartPositionFromSelection:l.invoker("top"),getStartPositionFromBounds:l.plucker("top"),getEndPositionFromBounds:l.plucker("bottom")}),n._horizontalModeHelper=Object.freeze({getLengthFromSelection:l.invoker("width"),getLengthFromBounds:l.plucker("width"),getStartPositionFromSelection:l.invoker("left"),getStartPositionFromBounds:l.plucker("left"),getEndPositionFromBounds:l.plucker("right")});var p=n.prototype;return p._captureZone=null,p._dScrollingContainer=null,p._dStickyLabel=null,p._panGestureRecogniser=null,p._scrollableContainer=null,p._captureZoneSize=null,p._stickyItem=null,p._scrollModeHelper=null,p._leftFadeOut=null,p._rightFadeOut=null,p.withCaptureZoneSize=l.setter("_captureZoneSize"),p.initDom=function(e,t,i){n.superclass.initDom.apply(this,arguments),this._scrollModeHelper=this._isVertical?n._verticalModeHelper:n._horizontalModeHelper,this._hasSticky&&(this._dStickyLabel=this._dButtonBarContainer.append("div").classed("stickyLabel",!0).classed("hidden",!0),this._dStickyLabel.append("div").classed("stickyOverlay",!0)),this._dScrollingContainer=this._dButtonBarElement,this._leftFadeOut=this._dButtonBarContainer.append("div").classed("leftFadeOut",!0),this._rightFadeOut=this._dButtonBarContainer.append("div").classed("rightFadeOut",!0),this._activateScrolling(this._isVertical)},p.show=function(){n.superclass.show.call(this),r.defer(this._updateFadeOutVisibility,this,[]),this._updateStickyItem()},p.addMenuViewItem=function(e){var t=n.superclass.addMenuViewItem.call(this,e);return e.isSticky&&e.withZIndex(h.MENU_STICKY_SCROLLABLE),t},p.setMenuViewItems=function(e){var t=n.superclass.setMenuViewItems.call(this,e);return l.invokeCall(e.filter(l.plucker("isSticky")),"withZIndex",h.MENU_STICKY_SCROLLABLE),t},p.selectItem=function(e){n.superclass.selectItem.call(this,e),this._stickyItem&&e(this._stickyItem)&&(this._stickyItem.isSelected=!0,this._stickyItem.render(this._dStickyLabel))},p.deselectItem=function(e){n.superclass.deselectItem.call(this,e),this._stickyItem&&e(this._stickyItem)&&(this._stickyItem.isSelected=!1,this._stickyItem.render(this._dStickyLabel))},p.getBoundingClientRect=function(){return u.shallowClone(this._dButtonBarContainer.node().getBoundingClientRect())},p.updateCaptureZoneSize=function(){var e=this._captureZoneSize||this.getBoundingClientRect(),t=c.normaliseDimensions(e);t.x-=this._captureZoneManager.getOffset().left,t.y-=this._captureZoneManager.getOffset().top,l.invokeCall(this._menuViewItems,"updateClientBox",t),this._stickyItem&&this._stickyItem.updateClientBox(),this._captureZone.setDimensionsBasedOnElement(e),this._zoneBlocking.setDimensionsBasedOnAssociatedElement(),this._updateFadeOutVisibility()},p.panToCurrentSelection=function(e){var t=this.getSelectedItems();t.length>0&&this._panToButton(t[0],void 0,e)},p.panTo=function(e){this._panToButton(this._getButtonById(e).node())},p.getSelectedStickyItems=function(){return this._menuViewItems.filter((function(e){return e.isSelected&&e.isSticky}))},p.getSelectedNonStickyItems=function(){return this._menuViewItems.filter((function(e){return e.isSelected&&!e.isSticky}))},p.destroy=function(){n.superclass.destroy.apply(this,arguments),this.updateCaptureZoneSize.abort(),this._updateStickyItem.abort(),this._scrollableContainer.destroy(),this._captureZone.destroy(),this._panGestureRecogniser&&(this._panGestureRecogniser.destroy(),this._panGestureRecogniser=null),this._stickyItem&&(this._stickyItem.destroy(),this._stickyItem=null),this._dStickyLabel&&(this._dStickyLabel.remove(),this._dStickyLabel=null),this._leftFadeOut&&(this._leftFadeOut.remove(),this._leftFadeOut=null),this._rightFadeOut&&(this._rightFadeOut.remove(),this._rightFadeOut=null),r.cancel(this)},p._updateFadeOutVisibility=function(){var e=this._scrollModeHelper.getLengthFromSelection(this._dScrollingContainer),t=this._scrollModeHelper.getLengthFromSelection(this._dButtonBarContainer),i=this._scrollModeHelper.getStartPositionFromSelection(this._dScrollingContainer)<-n.OCCLUSION_TOLERANCE,o=this._scrollModeHelper.getStartPositionFromSelection(this._dScrollingContainer)>t-e+n.OCCLUSION_TOLERANCE;this._leftFadeOut.classed("hidden",!i),this._rightFadeOut.classed("hidden",!o),this._leftFadeOut.style("height",this._dButtonBarContainer.height()+"px"),this._rightFadeOut.style("height",this._dButtonBarContainer.height()+"px")},p._activateScrolling=function(e){this._panGestureRecogniser=s.create({plane:e?s.PLANES.VERTICAL:s.PLANES.HORIZONTAL}),this._scrollableContainer=d.create(this._dScrollingContainer,this._dButtonBarContainer,this._panGestureRecogniser,this._animationPoller,e).withScrollCallback(this._updateZonesAndStyles.bind(this)),this._captureZone=this._captureZoneManager.create(a.PROPAGATE_UNHANDLED,h.MENU_SCROLL).addGestureRecogniser(this._panGestureRecogniser),this._updateZonesAndStyles()},p.render=function(){n.superclass.render.call(this),this._updateStickyItem()},p.realignItems=function(e,t){var n,i,o,r,s;n=this.getBoundingClientRect().width,i=n/e,o=Math.floor(i)+t,r=i>=this._menuViewItems.length,s=r?e:Math.floor(n/o),this._menuViewItems.forEach((function(e){e.setMinWidth(s)}))},p._panToButton=function(e,t,n){var i,o,r=this._captureZoneManager.getOffset(),s=this._scrollableContainer.distanceOverLeftBound(),a=this._scrollableContainer.distanceOverRightBound(),l=e.getBoundingClientRect();i="end"===t?this._scrollModeHelper.getLengthFromSelection(this._dButtonBarContainer)-this._scrollModeHelper.getEndPositionFromBounds(l):this._scrollModeHelper.getStartPositionFromBounds(r)-this._scrollModeHelper.getStartPositionFromBounds(l),o=Math.max(a,i),o=Math.min(-s,o),this._scrollableContainer.moveByPixels(o,n)},p._updateZonesAndStyles=function(){this.updateCaptureZoneSize(),this._updateStickyItem()},p._updateStickyItem=function(){if(this._dStickyLabel){var e,n,i,o,r=this._dButtonBarContainer.node().getBoundingClientRect().top;for(o=0;o<this._menuViewItems.length;o++)(e=this._menuViewItems[o].getBoundingClientRect())&&(this._menuViewItems[o].getMenuItem().classed("visibilityHidden",!1),e.top>=r?n||(n=this._menuViewItems[o]):this._menuViewItems[o].isSticky&&(i=this._menuViewItems[o],this._menuViewItems[o].getMenuItem().classed("visibilityHidden",!0)));i?t(i,this._stickyItem)||(this._stickyItem&&this._stickyItem.destroy(),this._stickyItem=i.copy().withZIndex(h.MENU_STICKY_FIXED),this._stickyItem.initDom(this._dStickyLabel.classed("hidden",!1))):this._stickyItem&&(this._stickyItem.destroy(),this._stickyItem=null,this._dStickyLabel.classed("hidden",!0))}},p.onDimensionsChanged=function(){r.defer(this.returnToBounds,this,[])},p.returnToBounds=function(e){var t=0;this._scrollableContainer.isOutOfBounds()&&(this._scrollableContainer.distanceOverLeftBound()>0?t=this._scrollableContainer.distanceOverLeftBound():this._scrollableContainer.distanceOverRightBound()>0&&(t=this._scrollableContainer.distanceOverRightBound()),0!==t&&this._scrollableContainer.moveByPixels(t,!!e))},Object.seal(p),Object.seal(n)})),define("module/annotations/js/menu/annotationsselectionmenu",["require","lodash","module/annotations/js/i18n","module/annotations/js/model/annotationtypeenum","module/core/js/util/class","module/menu-common/js/actionlistener/createannotationactionlistener","module/annotations/js/menu/annotationsselectionmenuview","module/menu-common/js/controller/menucontroller","module/menu-mobile/js/controls/scrollablebuttonbar","module/core/js/settings/settingsevents"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._updateModel()}var n=e("lodash"),i=e("module/annotations/js/i18n"),o=e("module/annotations/js/model/annotationtypeenum"),r=e("module/core/js/util/class"),s=e("module/menu-common/js/actionlistener/createannotationactionlistener"),a=e("module/annotations/js/menu/annotationsselectionmenuview"),l=e("module/menu-common/js/controller/menucontroller"),u=e("module/menu-mobile/js/controls/scrollablebuttonbar"),c=e("module/core/js/settings/settingsevents");r.extend(t,l),t.create=function(e,n,i,o){return new t(e,n,i,o)},t.ANNOTATION_TYPES=Object.freeze(n.values(o));var d=t.prototype;return d._createMenuView=function(e,t){return a.create(e,t,{buttonBar:u})},d._whenViewIsReady=function(){this._settingsManager.on(c.LAYOUT_SETTINGS_CHANGED,this._updateModel,this),this._updateModel()},d._generateModel=function(){var e,n=[];return this._settingsManager.getAnnotationVisibilitySettings()&&(e=new s(this._eventBus),n=t.ANNOTATION_TYPES.map((function(t){return{label:i.get(t),actionListener:e,data:{id:t}}}))),n},d._updateModel=function(){this.withModel(this._generateModel())},d._destroyDom=function(){this._settingsManager.un(null,this),t.superclass._destroyDom.call(this)},Object.seal(d),Object.seal(t)})),define("module/dealing-ticket/js/view/model/dealingticketalignment",[],(function(){"use strict";return Object.freeze({NONE:"NONE",TOP:"TOP",RIGHT:"RIGHT"})})),define("module/core/js/view/model/commonuipresentationmodel",["require","module/core/js/view/presentationmodel/abstractpresentationmodel","module/core/js/util/class","module/dealing-ticket/js/view/model/dealingticketalignment","module/core/js/util/defer","module/core/js/util/functional"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/view/presentationmodel/abstractpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/dealing-ticket/js/view/model/dealingticketalignment"),r=e("module/core/js/util/defer"),s=e("module/core/js/util/functional");i.extend(t,n),t.COMMON_UI_CHANGED="commonUiChanged",t.NEUTRAL_Y_OFFSET=8,t.DOWN_SHIFTED_X_OFFSET=5,t.STATS_HEIGHT=14,t.INDICATOR_LABEL_HEIGHT=22,t._switchAndNotify=function(e){return function(t){return this[e]!==t&&(this[e]=t,this._notifyOfLayoutChange()),this}};var a=t.prototype;return a.bottomShiftThreshold=null,a.fullscreenEnabledHorizontalOffset=null,a.fullscreenEnabledVerticalOffset=null,a.dealingButtonsEnabledVerticalOffset=null,a.axisOffset=null,a.statsLineWrap=null,a._subView=null,a._notifyScheduled=!1,a._belowThreshold=!1,a._isDelayedMarket=!1,a._dealTicketAlignment=null,a._isDealingFromChartEnabled=!1,a._isFullscreenEnabled=!1,a._indicatorsVisibility=!1,a._dailyStatsVisibility=!1,a._visibleStatsVisibility=!1,a._indicatorLabelsOffset=null,a.setBelowThreshold=t._switchAndNotify("_belowThreshold"),a.setDelayedMarket=t._switchAndNotify("_isDelayedMarket"),a.setDealTicketAlignment=t._switchAndNotify("_dealTicketAlignment"),a.setDealingFromChartEnabled=t._switchAndNotify("_isDealingFromChartEnabled"),a.setFullscreenEnabled=t._switchAndNotify("_isFullscreenEnabled"),a.setIndicatorsVisibility=t._switchAndNotify("_indicatorsVisibility"),a.setDailyStatsVisibility=t._switchAndNotify("_dailyStatsVisibility"),a.setVisibleStatsVisibility=t._switchAndNotify("_visibleStatsVisibility"),a.setIndicatorLabelsOffset=t._switchAndNotify("_indicatorLabelsOffset"),a.withSubView=s.setter("_subView"),a.getOffsets=function(e){var n;switch(e){case"southWest":n={xOffset:0,yOffset:this._getBottomVerticalOffset()};break;case"marketInfo":n={xOffset:this._getHorizontalOffsetForMarketInfo(),yOffset:this._getTopVerticalOffsetForMarketInfo()};break;case"northWest":n={xOffset:this._getHorizontalOffset(),yOffset:this._getTopVerticalOffset()};break;case"northEast":n={xOffset:this._getRightMarginOffset(),yOffset:this._getTopVerticalOffset()};break;default:n={xOffset:0,yOffset:t.NEUTRAL_Y_OFFSET}}return n},a.getOffsetsForComponent=function(e){var n;switch(e){case"visiblestats":n=this.getOffsets("southWest"),n.yOffset-=this.getStatsLineWrapOffset();break;case"daystats":n=this.getOffsetsForComponent("visiblestats"),n.yOffset-=t.STATS_HEIGHT;break;case"indicatorslabels":n=this._getStatsOffset();break;case"annotationstoolbox":n=this.getOffsetsForComponent("indicatorslabels"),n.yOffset-=this._getIndicatorLabelOffset()}return n},a._getHorizontalOffset=function(){return this._isFullscreenEnabled?this.fullscreenEnabledHorizontalOffset:0},a._getRightMarginOffset=function(){return-this._subView.getChartView().rightMargin},a._getTopVerticalOffset=function(){var e=t.NEUTRAL_Y_OFFSET;return this._areDealingButtonsVisible()&&this._belowThreshold&&(e=this.dealingButtonsEnabledVerticalOffset),e},a._getHorizontalOffsetForMarketInfo=function(){return!this._isFullscreenEnabled||this._areDealingButtonsVisible()&&this._belowThreshold?0:this.fullscreenEnabledHorizontalOffset},a._getTopVerticalOffsetForMarketInfo=function(){var e=t.NEUTRAL_Y_OFFSET;return this._isFullscreenEnabled&&this._areDealingButtonsVisible()&&this._belowThreshold&&this._dealTicketAlignment!==o.TOP&&(e=this.fullscreenEnabledVerticalOffset),e},a._areDealingButtonsVisible=function(){return this._isDealingFromChartEnabled&&!this._isDelayedMarket},a._getBottomVerticalOffset=function(){var e,t,n,i=0;return this._subView&&this._subView.dimensions&&(e=this._subView.getChartView().chartHeight(),t=this._subView.dimensions.height,n=e-this.axisOffset-t,i=Math.min(i+n,0)),this._subView.isLastStudyView()&&(i-=this.dataIsIndicativeOffset),i},a._getIndicatorLabelOffset=function(){return this._indicatorLabelsOffset?this._indicatorLabelsOffset:0},a.getStatsLineWrapOffset=function(){return this._belowThreshold?this.statsLineWrap:0},a._getStatsOffset=function(){var e;return this._dailyStatsVisibility||this._visibleStatsVisibility?(e=this._dailyStatsVisibility&&this._visibleStatsVisibility?this.getOffsetsForComponent("daystats"):this.getOffsetsForComponent("visiblestats"),e.yOffset-=t.STATS_HEIGHT,e):this.getOffsets("southWest")},a._notifyOfLayoutChange=function(){this._notifyScheduled||(this._notifyScheduled=!0,r.defer(this._fireLayoutEvent,this))},a._fireLayoutEvent=function(){this.fire(t.COMMON_UI_CHANGED),this._notifyScheduled=!1},Object.seal(a),Object.seal(t)})),define("module/annotations/js/view/model/annotationstoolboxpresentationmodel",["require","module/core/js/util/class","module/core/js/view/model/commonuipresentationmodel","module/core/js/util/functional"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/model/commonuipresentationmodel"),o=e("module/core/js/util/functional");n.extend(t,i),t.SHOW_TOOLBOX="SHOW_TOOLBOX",t.HIDE_TOOLBOX="HIDE_TOOLBOX",t.ANNOTATION_LOCKED_CHANGED="ANNOTATION_LOCKED_CHANGED",t.POSITION_CHANGED="POSITION_CHANGED",t.MEASURE_TOOL_BUTTON_ID="MEASURE_TOOL",t.HOVER_STATE_CHANGED="HOVER_STATE_CHANGED";var r=t.prototype;return r._lockedAnnotation=null,r._isHovered=!1,r.setLockedAnnotation=o.observableSetter("_lockedAnnotation",t.ANNOTATION_LOCKED_CHANGED),r.setHoveredState=o.observableSetter("_isHovered",t.HOVER_STATE_CHANGED),r.getLockedAnnotation=o.getter("_lockedAnnotation"),r.isHovered=o.getter("_isHovered"),r._annotations=Object.freeze([]),r.getAnnotations=o.getter("_annotations"),r.isToolboxVisible=function(){return!!this._annotations.length},r.showToolbox=o.observableSetter("_annotations",t.SHOW_TOOLBOX),r.hideToolbox=function(){delete this._annotations,this.fire(t.HIDE_TOOLBOX)},r._fireLayoutEvent=function(){t.superclass._fireLayoutEvent.call(this),this.fire(t.POSITION_CHANGED)},r.updatePosition=o.bubbler(t.POSITION_CHANGED),
Object.seal(r),Object.seal(t)})),define("module/core/js/model/layouts/annotationsvisibilitymodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule");e("module/core/js/util/class").extend(t,n),t.SETTINGS_MODULE_NAME="annotationModule";var i=t.prototype;return i.isVisible=!0,i.isToolboxVisible=!1,i.getToolboxVisibility=function(){return this.isVisible&&this.isToolboxVisible},i.isModified=function(){return this.hasOwnProperty("isVisible")||this.hasOwnProperty("isToolboxVisible")},i.fromJSON=function(e){void 0!==e.isVisible&&(this.isVisible=!!e.isVisible),void 0!==e.isToolboxVisible&&(this.isToolboxVisible=!!e.isToolboxVisible)},i.toJSON=function(){var e={};return this.hasOwnProperty("isVisible")&&(e.isVisible=this.isVisible),this.hasOwnProperty("isToolboxVisible")&&(e.isToolboxVisible=this.isToolboxVisible),e},Object.seal(i),Object.seal(t)})),define("module/core/js/view/model/commonuipresentationcontroller",["require","module/core/js/view/abstractpresentationcontroller","module/core/js/util/array","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/settings/settingsevents","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/core/js/view/abstractpresentationcontroller"),i=e("module/core/js/util/array"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/settings/settingsevents"),l=e("module/core/js/view/visiblewindow");r.extend(t,n);var u=t.prototype;return u.startListening=function(e){this._presentationModel.withSubView(this._subView),this._visibleWindow=e,this._visibleWindow.on(l.MOVED,this._handleVisibleWindowMoved,this),this._eventBus.subscribe("module/toggle/*",this._updateVisibility,this),this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfo,this),this._eventBus.subscribe("chart/dealTicket/alignment/change",s.delegate("_presentationModel","setDealTicketAlignment"),this),this._eventBus.subscribe("commonui/offset/indicatorlabels",s.delegate("_presentationModel","setIndicatorLabelsOffset"),this),this._settingsManager.on(a.LAYOUT_SETTINGS_CHANGED,this._updateVisibility,this),this._updateVisibility()},u.stopListening=function(){this._settingsManager.un(null,this),t.superclass.stopListening.call(this)},u._updateVisibility=function(){var e=this._moduleLoader.getInitialisedModules(),t=this._moduleLoader.getModule("highLowStats"),n=i.contains(e,"highLowStats"),o=i.contains(e,"indicators"),r=i.contains(e,"indicatorLabels"),s=i.contains(e,"fullscreenButton"),a=i.contains(e,"dealingBuySellButtons");this._presentationModel&&(this._presentationModel.setDailyStatsVisibility(n&&t.areDailyStatsAvailable()&&this._settingsManager.getHighLowStatsVisibilitySettings()),this._presentationModel.setVisibleStatsVisibility(n&&t.areVisibleRangeStatsAvailable()&&this._settingsManager.getHighLowStatsVisibilitySettings()),this._presentationModel.setIndicatorsVisibility(o&&r&&this._settingsManager.getIndicatorsVisibilitySettings()),this._presentationModel.setFullscreenEnabled(s),this._presentationModel.setDealingFromChartEnabled(a))},u._handleInstrumentInfo=function(e){this._presentationModel.setDelayedMarket(e.isDelayed)},u._handleVisibleWindowMoved=function(e,t){var n=this._presentationModel.bottomShiftThreshold;e&(o.RESIZED|o.INITIALISED)&&this._presentationModel.setBelowThreshold(this._visibleWindow.width()<n)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/controller/annotationstoolboxpresentationcontroller",["require","module/annotations/js/annotationsevents","module/annotations/js/menu/annotationsselectionmenu","module/annotations/js/view/model/annotationstoolboxpresentationmodel","module/core/js/model/layouts/annotationsvisibilitymodule","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/view/model/commonuipresentationcontroller","module/menu-common/js/actionlistener/createannotationactionlistener","module/core/js/util/functional","module/menu-common/js/enum/menusourceenum","module/core/js/settings/settingsevents","module/core/js/config/taskconfig"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e),this._createAnnotationActionHandler=u.create(e)}var n=e("module/annotations/js/annotationsevents"),i=e("module/annotations/js/menu/annotationsselectionmenu"),o=e("module/annotations/js/view/model/annotationstoolboxpresentationmodel"),r=e("module/core/js/model/layouts/annotationsvisibilitymodule"),s=e("module/core/js/view/axisconstants"),a=e("module/core/js/util/class"),l=e("module/core/js/view/model/commonuipresentationcontroller"),u=e("module/menu-common/js/actionlistener/createannotationactionlistener"),c=e("module/core/js/util/functional"),d=e("module/menu-common/js/enum/menusourceenum"),h=e("module/core/js/settings/settingsevents"),p=e("module/core/js/config/taskconfig");a.extend(t,l),t.create=function(e){return new t(e)};var m=t.prototype;return m._createAnnotationActionHandler=null,m.startListening=function(e){t.superclass.startListening.call(this,e),this._settingsManager.on(h.LAYOUT_SETTINGS_CHANGED,this._handleAnnotationsVisibilityChanged,this),this._eventBus.subscribe("annotations/toolbox/toggle",this.toggleAnnotationsToolbox,this),this._annotations.on(n.LOCK_CHANGED,this._handleAnnotationLocked,this),this._presentationModel.on(o.HOVER_STATE_CHANGED,this._handleHoverStateChanged,this),this._handleAnnotationsVisibilityChanged()},m.stopListening=function(){t.superclass.stopListening.call(this),this._settingsManager.un(null,this),this._annotations.un(null,this),this._presentationModel.un(null,this)},m.withModuleLoader=function(e){return t.superclass.withModuleLoader.apply(this,arguments),this._annotations=e.getModule("annotations"),this},m.toggleAnnotationsToolbox=function(){this._settingsManager.changeTemplateSettings(r.SETTINGS_MODULE_NAME,(function(e){return e.isToolboxVisible=!e.isToolboxVisible,!0}),!0)},m.handleAnnotationButtonPressed=function(e){e===this._annotations.getCurrentlyLockedAnnotation()?(this._annotations.lockAnnotation(null),this._eventBus.publish("annotations/stopEditing")):(this._annotations.lockAnnotation(e),this._createAnnotationActionHandler.handleAction({id:e},!0,null,d.ANNOTATIONS_TOOLBOX))},m.handleMeasureToolButtonPressed=c.delegate("_eventBus","publish","measureTool/on"),m.handleCloseButtonPressed=function(){this._annotations.getCurrentlyLockedAnnotation()&&this._annotations.lockAnnotation(null),this.toggleAnnotationsToolbox()},m._handleAnnotationLocked=c.delegate("_presentationModel","setLockedAnnotation"),m._handleAnnotationsVisibilityChanged=function(){this._settingsManager.getAnnotationsToolboxVisibilitySettings()?this._presentationModel.showToolbox(i.ANNOTATION_TYPES):this._presentationModel.hideToolbox()},m._handleVisibleWindowMoved=function(e,n){t.superclass._handleVisibleWindowMoved.call(this,e,n),n&(s.RESIZED|s.INITIALISED)&&this._presentationModel.updatePosition()},m._handleHoverStateChanged=function(){this._presentationModel.isHovered()?this.getTaskManager().startTask(p.ANNOTATION_TOOLBOX):this.getTaskManager().finishTask(p.ANNOTATION_TOOLBOX.ID)},Object.seal(m),Object.seal(t)})),define("text!module/menu-desktop/svg/drawing-toolbar/arrow.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path d="M2 2l13 13M4 15h11M15 4v11" class="iconStroke"/>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/channel.svg",[],(function(){return'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <g stroke="#9696A3" fill="none" fill-rule="evenodd">\n        <path d="M2.5 10.5l8-8M5.5 13.5l8-8" class="iconStroke"/>\n    </g>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/elliott_wave_12345.svg",[],(function(){return'<svg width="16" height="10" viewBox="0 0 16 10" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0-3h16v16H0z"/>\n        <path class="iconStroke" stroke="#6C6C7A" d="M1.4 6.5l1.6 3 4.5-8 3.5 6L14.6 0"/>\n    </g>\n</svg>\n'})),define("text!module/menu-desktop/svg/drawing-toolbar/elliott_wave_abc.svg",[],(function(){return'<svg width="16" height="10" viewBox="0 0 16 10" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0-3h16v16H0z"/>\n        <path class="iconStroke" stroke="#6C6C7A" d="M1.4 1.5L6 9.25l5.5-8.5 3.1 5"/>\n    </g>\n</svg>\n'})),define("text!module/menu-desktop/svg/drawing-toolbar/fibonacci.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <g class="iconStroke">\n        <path d="M1 1h14M1 15h14"/>\n        <path d="M1 4h14M1 8h14M1 12h14" stroke-dasharray="2, 2"/>\n    </g>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/fibonacci_extension.svg",[],(function(){return'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <g class="iconStroke" fill="none" fill-rule="evenodd">\n        <path d="M1 14.9L3 10l2.4 3.2M5 1h10M5 4h2M13 4h2M5 7h2M13 7h2M5 10h2M9 4h2M9 7h2M9 10h2M13 10h2M5 13h10"/>\n    </g>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/gann_fan.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path d="M2 1v14M2 15h13M2 15l12.124-7M2 15L9 2.876" class="iconStroke"/>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/gann_line.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <g class="iconStroke">\n        <path d="M2,14 L12,1.5"/>\n        <path d="M2,14 L15,14" stroke-dasharray="1, 2"/>\n    </g>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/head_and_shoulders.svg",[],(function(){return'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h16v16H0z"/>\n        <path class="iconStroke" stroke="#6C6C7A" d="M1.5 13.102l1.699-5.909 2.216 3.693L8 3.5l2.585 7.386 2.216-3.693 1.699 5.91"/>\n    </g>\n</svg>\n'})),define("text!module/menu-desktop/svg/drawing-toolbar/horizontal.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path d="M1.5 8h13" class="iconStroke"/>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/oval.svg",[],(function(){return'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Icons" fill="none" class="iconStroke">\n        <circle cx="8" cy="8" r="7"></circle>\n    </g>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/pitchfork.svg",[],(function(){return'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <g class="iconStroke" fill-rule="evenodd">\n        <path d="M4.3 6.3l5.2 5.2M2 14L12.3 3.7M4.4 7L10 1.4M9.3 12L15 6.4"/>\n    </g>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/point_to_point.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <g class="iconStroke">\n        <circle cx="3" cy="5" r="1.5" fill="none"/>\n        <circle cx="13" cy="10" r="1.5" fill="none"/>\n        <path d="M3.67 5.34l8.66 4.32"/>\n    </g>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/rectangle.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path fill="none" d="M2 2h12v12H2z" class="iconStroke"/>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/text.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path d="M0 13h16" class="iconStroke"/>\n    <path d="M3.464 3.334h.872l2.44 5.664H5.624l-.528-1.296H2.64l-.512 1.296H1l2.464-5.664zm1.28 3.504l-.872-2.304-.888 2.304h1.76zM7.96 2.95v2.696h.024a1.41 1.41 0 0 1 .452-.392 1.698 1.698 0 0 1 .836-.208 1.8 1.8 0 0 1 1.344.584c.165.181.293.395.384.64.09.245.136.51.136.792 0 .283-.044.548-.132.796a1.952 1.952 0 0 1-.376.648 1.81 1.81 0 0 1-.592.44c-.232.11-.495.164-.788.164a1.7 1.7 0 0 1-.764-.176 1.307 1.307 0 0 1-.556-.512h-.016v.576H7V2.95h.96zm2.504 4.112c0-.15-.023-.297-.068-.444a1.24 1.24 0 0 0-.204-.396 1.024 1.024 0 0 0-.344-.284 1.045 1.045 0 0 0-.488-.108.98.98 0 0 0-.472.112 1.21 1.21 0 0 0-.58.688 1.352 1.352 0 0 0 0 .892c.05.147.125.279.224.396.099.117.217.212.356.284.139.072.296.108.472.108a1.014 1.014 0 0 0 .832-.4c.09-.117.159-.25.204-.4.045-.15.068-.299.068-.448zm3.884-.836a.846.846 0 0 0-.336-.268 1.04 1.04 0 0 0-.92 0 1.007 1.007 0 0 0-.332.284c-.088.117-.153.25-.196.396a1.582 1.582 0 0 0-.064.444c0 .15.023.297.068.444.045.147.113.279.204.396a1.003 1.003 0 0 0 .816.392c.15 0 .299-.03.448-.088a.854.854 0 0 0 .36-.256l.6.608a1.59 1.59 0 0 1-.612.396c-.248.093-.516.14-.804.14-.283 0-.55-.045-.804-.136a1.907 1.907 0 0 1-.664-.4 1.897 1.897 0 0 1-.448-.64 2.122 2.122 0 0 1-.164-.856c0-.31.055-.59.164-.84a1.926 1.926 0 0 1 1.096-1.048c.248-.096.513-.144.796-.144.283 0 .556.053.82.16.264.107.473.253.628.44l-.656.576z" class="iconFill"/>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/trend.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path d="M1.5 14.5l13-13" class="iconStroke"/>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/triangle.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path fill="none" d="M8 2l7 13H1z" class="iconStroke"/>\n</svg>'})),define("text!module/menu-desktop/svg/drawing-toolbar/vertical.svg",[],(function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n    <path d="M8 1.5v13" class="iconStroke"/>\n</svg>'})),define("text!module/menu-desktop/svg/icon_close.svg",[],(function(){return'<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path class="iconFill" fill-rule="evenodd" clip-rule="evenodd" fill="#6C6C79" d="M6.7 5L10 1.7 8.3 0 5 3.3 1.7 0 0 1.7 3.3 5 0 8.3 1.7 10 5 6.7 8.3 10 10 8.3z"/></svg>'})),define("text!module/menu-desktop/svg/drawing_tool_measure.svg",[],(function(){return'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n    <g fill-rule="evenodd" class="iconFill">\n        <path d="M4.536 13.02l8.485-8.484-2.122-2.122L2.414 10.9l2.122 2.122zM1 10.9L10.9 1l3.535 3.536-9.9 9.899L1 10.899z"\n              fill-rule="nonzero"/>\n        <path d="M2.945 8.955l.707-.707 2.121 2.121-.707.707-2.121-2.121zm1.767-1.768l.707-.707 2.122 2.121-.707.708-2.122-2.122zM6.48 5.42l.707-.707L9.31 6.834 8.6 7.54l-2.12-2.122zm1.768-1.767l.707-.707 2.121 2.12-.707.708-2.121-2.121z"/>\n    </g>\n</svg>'})),define("module/annotations/js/enum/annotationsicondataenum",["require","text!module/menu-desktop/svg/drawing-toolbar/arrow.svg","text!module/menu-desktop/svg/drawing-toolbar/channel.svg","text!module/menu-desktop/svg/drawing-toolbar/elliott_wave_12345.svg","text!module/menu-desktop/svg/drawing-toolbar/elliott_wave_abc.svg","text!module/menu-desktop/svg/drawing-toolbar/fibonacci.svg","text!module/menu-desktop/svg/drawing-toolbar/fibonacci_extension.svg","text!module/menu-desktop/svg/drawing-toolbar/gann_fan.svg","text!module/menu-desktop/svg/drawing-toolbar/gann_line.svg","text!module/menu-desktop/svg/drawing-toolbar/head_and_shoulders.svg","text!module/menu-desktop/svg/drawing-toolbar/horizontal.svg","text!module/menu-desktop/svg/drawing-toolbar/oval.svg","text!module/menu-desktop/svg/drawing-toolbar/pitchfork.svg","text!module/menu-desktop/svg/drawing-toolbar/point_to_point.svg","text!module/menu-desktop/svg/drawing-toolbar/rectangle.svg","text!module/menu-desktop/svg/drawing-toolbar/text.svg","text!module/menu-desktop/svg/drawing-toolbar/trend.svg","text!module/menu-desktop/svg/drawing-toolbar/triangle.svg","text!module/menu-desktop/svg/drawing-toolbar/vertical.svg","text!module/menu-desktop/svg/icon_close.svg","text!module/menu-desktop/svg/drawing_tool_measure.svg"],(function(e){"use strict";return Object.freeze({ARROW:e("text!module/menu-desktop/svg/drawing-toolbar/arrow.svg"),CHANNEL:e("text!module/menu-desktop/svg/drawing-toolbar/channel.svg"),ELLIOTT_WAVE:e("text!module/menu-desktop/svg/drawing-toolbar/elliott_wave_12345.svg"),ELLIOTT_WAVE_ABC:e("text!module/menu-desktop/svg/drawing-toolbar/elliott_wave_abc.svg"),FIBONACCI:e("text!module/menu-desktop/svg/drawing-toolbar/fibonacci.svg"),FIBONACCI_EXTENSION:e("text!module/menu-desktop/svg/drawing-toolbar/fibonacci_extension.svg"),GANN_FAN:e("text!module/menu-desktop/svg/drawing-toolbar/gann_fan.svg"),GANN_LINE:e("text!module/menu-desktop/svg/drawing-toolbar/gann_line.svg"),HEAD_AND_SHOULDERS:e("text!module/menu-desktop/svg/drawing-toolbar/head_and_shoulders.svg"),HORIZONTAL_LINE:e("text!module/menu-desktop/svg/drawing-toolbar/horizontal.svg"),OVAL:e("text!module/menu-desktop/svg/drawing-toolbar/oval.svg"),PITCHFORK:e("text!module/menu-desktop/svg/drawing-toolbar/pitchfork.svg"),POINT_TO_POINT:e("text!module/menu-desktop/svg/drawing-toolbar/point_to_point.svg"),RECTANGLE:e("text!module/menu-desktop/svg/drawing-toolbar/rectangle.svg"),TEXT:e("text!module/menu-desktop/svg/drawing-toolbar/text.svg"),TREND_LINE:e("text!module/menu-desktop/svg/drawing-toolbar/trend.svg"),TRIANGLE:e("text!module/menu-desktop/svg/drawing-toolbar/triangle.svg"),VERTICAL_LINE:e("text!module/menu-desktop/svg/drawing-toolbar/vertical.svg"),CLOSE_BUTTON:e("text!module/menu-desktop/svg/icon_close.svg"),MEASURE_TOOL:e("text!module/menu-desktop/svg/drawing_tool_measure.svg")})})),define("module/core/js/view/component/svg/iconbutton",["require","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/userinput/tapgesturerecogniser"],(function(e){"use strict";function t(e,n,i,o,r){this._iconSvg=o,this._className=i,this._selectedClassName=r||"selected",t.superclass.constructor.call(this,e,n),this._createCaptureZone(),this.onHover(this._enterHover,this._exitHover,this)}var n=e("module/core/js/view/component/svg/abstractsvgwrapper"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/view/userinput/tapgesturerecogniser");i.extend(t,n),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var s=t.prototype;return s._className=null,s._iconSvg=null,s._selectedClassName=null,s._hoverEnterCallback=null,s._hoverExitCallback=null,s._initDom=function(){return this._dComponent=this._dContainer.append("g").classed(this._className,!0),this.addBackground(),this._dIcon=this._dComponent.svgFromString(this._iconSvg),this},s.setDimensions=o.delegate("_dIcon","attr"),s.addBackground=o.empty,s.handleDown=function(){return this._recognisers.tap=r.create(1,!1,!0),this},s.enterSelectedState=function(){this._dComponent.classed(this._selectedClassName,!0)},s.exitSelectedState=function(){this._dComponent.classed(this._selectedClassName,!1)},s._enterHover=function(){this._dComponent.classed("hover",!0),this._hoverEnterCallback&&this._hoverEnterCallback()},s._exitHover=function(){this._dComponent.classed("hover",!1),this._hoverExitCallback&&this._hoverExitCallback()},s.setAdditionalHoverHandlers=function(e){this._hoverEnterCallback=e.onHoverEnter,this._hoverExitCallback=e.onHoverExit},s.getRect=function(){return this._dComponent.node().getBoundingClientRect()},Object.seal(s),Object.seal(t)})),define("module/core/js/view/component/svg/annotationiconbutton",["require","module/core/js/util/class","module/core/js/view/component/svg/iconbutton"],(function(e){"use strict";function t(e,n,i,r,s,a){this._annotationId=r,this._hoverDisabled=s,this._dimensions=a||{height:o,width:o,x:t.ICON_OFFSET,y:t.ICON_OFFSET},t.superclass.constructor.call(this,e,n,"buttonAnnotation",i)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/component/svg/iconbutton"),o=16;n.extend(t,i);var r=t.prototype;return r._annotationId=null,r._hoverDisabled=null,r._background=null,r._dimensions=null,t.ICON_OFFSET=4,t.BACKGROUND_RECT_DIMENSION=o+2*t.ICON_OFFSET,t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)},r._initDom=function(){return t.superclass._initDom.call(this),this._dComponent.attr("data-menu-item-id",this._annotationId),this.setDimensions(this._dimensions),this},r.addBackground=function(){this._background=this._dComponent.append("rect").classed("background",!0).attr("height",t.BACKGROUND_RECT_DIMENSION).attr("width",t.BACKGROUND_RECT_DIMENSION).attr("rx",2).attr("ry",2),this._hoverDisabled&&this._background.classed("hoverDisabled",!0)},r.getId=function(){return this._annotationId},r.destroy=function(){this._background&&(this._background.remove(),this._background=null),t.superclass.destroy.apply(this,arguments)},Object.seal(r),Object.seal(t)})),define("module/core/js/view/component/toolbar",["require","lodash","module/core/js/view/component/svg/abstractsvgwrapper","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/svg"],(function(e){"use strict";function t(e,i,o,r,s,a){this._containerClass=o,this._separatorClass=r,this._options=n.assign({leftPadding:0,rightPadding:0,topPadding:0,bottomPadding:0,containerRadius:0,buttonMargin:0,buttonSeparatorMargin:0,separatorPadding:0},a),this._buttons=[],this._separators=[],this._configGroups=s,t.superclass.constructor.call(this,e,i)}var n=e("lodash"),i=e("module/core/js/view/component/svg/abstractsvgwrapper"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/svg");o.extend(t,i),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var a=t.prototype;return a._buttons=null,a._separators=null,a._separatorClass=null,a._containerClass=null,a._options=null,a._initDom=function(){var e,t,i,o,r=0;return this._dComponent=this._dContainer.append("rect").classed(this._containerClass,!0),this._configGroups.forEach((function(t,n){e=this._createButtonGroup(this._dContainer,t,r),r=e.offset,this._buttons=this._buttons.concat(e.buttons),n!==this._configGroups.length-1&&(r+=this._options.buttonSeparatorMargin,o=this._createSeparator(this._dContainer,r),r+=this._options.buttonSeparatorMargin,this._separators.push(o))}),this),t=Math.max.apply(null,n.map(this._buttons,(function(e){return e.getDimensions().height}))),this._height=this._options.topPadding+t+this._options.bottomPadding,i=this._options.leftPadding+r+this._options.rightPadding,this._updateSeparatorsYPosition(this._height),this._dComponent.attr("height",this._height).attr("width",i).attr("rx",this._options.containerRadius).attr("ry",this._options.containerRadius),this},a._createSeparator=function(e,t){return e.append("line").classed(this._separatorClass,!0).attr("x1",this._options.leftPadding+t).attr("x2",this._options.leftPadding+t)},a._updateSeparatorsYPosition=function(e){this._separators.forEach((function(t){t.attr("y1",this._options.separatorPadding).attr("y2",e-this._options.separatorPadding)}),this)},a._createButtonGroup=function(e,t,n){var i,o=[];return t.forEach((function(r,s){i=r.init.call(this,e),i.setOffset({x:this._options.leftPadding+n,y:this._options.topPadding}),o.push(i),n+=i.getDimensions().width,s!==t.length-1&&(n+=this._options.buttonMargin)}),this),{buttons:o,offset:n}},a.getHeight=function(){return this._height?this._height:0},a.render=function(e){this._dContainer.attr("transform",s.svgTranslateAttrXY(e.xOffset,e.yOffset)),r.invokeCall(this._buttons,"render")},a.exitSelectedState=function(){r.invokeCall(this._buttons,"exitSelectedState")},a.enterSelectedState=function(e){this._buttons.forEach((function(t){t.getId()===e&&t.enterSelectedState()}))},a.destroy=function(){r.invokeCall(this._buttons,"destroy"),r.invokeCall(this._separators,"remove"),delete this._buttons,delete this._separators,t.superclass.destroy.call(this)},Object.seal(a),Object.seal(t)})),define("module/annotations/js/view/renderer/annotationstoolboxrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/annotations/js/i18n","module/annotations/js/enum/annotationsicondataenum","module/annotations/js/view/model/annotationstoolboxpresentationmodel","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/css","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/component/svg/annotationiconbutton","module/core/js/view/visiblewindow","module/core/js/enum/zindexenum","module/core/js/view/component/toolbar"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/annotations/js/i18n"),o=e("module/annotations/js/enum/annotationsicondataenum"),r=e("module/annotations/js/view/model/annotationstoolboxpresentationmodel"),s=e("module/core/js/view/axisconstants"),a=e("module/core/js/util/class"),l=e("module/core/js/util/css"),u=e("module/core/js/view/userinput/eventpropagation"),c=e("module/core/js/util/functional"),d=e("module/core/js/view/component/svg/annotationiconbutton"),h=e("module/core/js/view/visiblewindow"),p=e("module/core/js/enum/zindexenum"),m=e("module/core/js/view/component/toolbar");a.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)};var f=t.prototype;return f.withMarginBottom=c.setter("_marginBottom"),f.withMarginLeft=c.setter("_marginLeft"),f._marginBottom=null,f._marginLeft=null,f.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(r.SHOW_TOOLBOX,this._showToolbox,this),this._presentationModel.on(r.HIDE_TOOLBOX,this._hideToolbox,this),this._presentationModel.on(r.POSITION_CHANGED,this.renderOnFrameEnd,this),this._presentationModel.on(r.ANNOTATION_LOCKED_CHANGED,this._handleButtonLock,this),this._visibleWindow.on(h.MOVED,this._onVisibleWindowMoved,this)},f.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._visibleWindow.un(null,this)},f.initDom=function(){return this._presentationModel.isToolboxVisible()&&this._showToolbox(),this},f._handleButtonLock=function(){this._presentationModel.getLockedAnnotation()||this._toolbar.exitSelectedState()},f._onVisibleWindowMoved=function(e,t){this._toolbar&&(e&s.RESIZED||t&s.RESIZED)&&this._toolbar.updateCaptureZone()},f._showToolbox=function(){var e={leftPadding:4,rightPadding:4,topPadding:4,bottomPadding:4,containerRadius:2,buttonMargin:1,buttonSeparatorMargin:6,separatorPadding:2};this._toolbar||(this._toolbar=m.create(this.dContainer,this._captureZoneManager,"drawingToolboxContainer","drawingToolboxSeparator",this._createGroupedButtonFactories(),e).withDefaultPadding().onHover(this._presentationModel.setHoveredState.bind(this._presentationModel,!0),this._presentationModel.setHoveredState.bind(this._presentationModel,!1),this)),this.render()},f.destroy=function(){this._hideToolbox(),t.superclass.destroy.call(this)},f._createGroupedButtonFactories=function(){var e=[this._getMeasureToolButtonFactory()],t=[],n=[e,t];return this._presentationModel.getAnnotations().forEach(function(e){t.push(this._getAnnotationButtonFactory(e))}.bind(this)),t.push(this._getCloseButtonFactory()),n},f.render=function(){var e;this._toolbar&&(e=this._presentationModel.getOffsetsForComponent("annotationstoolbox"),e.xOffset+=this._marginLeft,e.yOffset-=this._marginBottom+this._toolbar.getHeight(),this._toolbar.render(e))},f._hideToolbox=function(){this._toolbar&&(this._toolbar.destroy(),this._toolbar=null)},f._createIconButton=function(e,t,n,i){var r=d.create(i,this._captureZoneManager,o[e],e,t,n);return r.setCaptureZonePropagation(u.PROPAGATE_ALL),r.updateCaptureZoneIndex(p.DRAWING_TOOLBOX_BUTTON),r},f._getCloseButtonFactory=function(){var e={height:8,width:8,x:8,y:8};return this._getButtonFactoryFromConfig({id:"CLOSE_BUTTON",disabledHover:!0,dimensions:e,cursor:l.CURSOR_TYPE.POINTER,handler:this._presentationController.handleCloseButtonPressed.bind(this._presentationController)})},f._getAnnotationButtonFactory=function(e){return this._getButtonFactoryFromConfig({id:e,disabledHover:!1,dimensions:void 0,cursor:l.CURSOR_TYPE.DEFAULT,handler:this._handleAnnotationButtonPressed.bind(this,e)})},f._getMeasureToolButtonFactory=function(){return this._getButtonFactoryFromConfig({id:r.MEASURE_TOOL_BUTTON_ID,disabledHover:!1,dimensions:void 0,cursor:l.CURSOR_TYPE.DEFAULT,handler:this._presentationController.handleMeasureToolButtonPressed.bind(this._presentationController)})},f._getButtonFactoryFromConfig=function(e){return{init:function(t){var n,i={x:0,y:0,width:this._subView.getChartView().chartWidth(),height:this._subView.getChartView().chartHeight()};return n=this._createIconButton(e.id,e.disabledHover,e.dimensions,t).withCursorOnHover(e.cursor).onTap(e.handler,this).setCaptureZoneConstraints(i),e.disabledHover||n.setAdditionalHoverHandlers({onHoverEnter:this._onHoverEnter.bind(this,e,n),onHoverExit:this._onHoverExit.bind(this,e)}),n}.bind(this)}},f._onHoverEnter=function(e,t){this._eventBus.publish("hint-tooltip/hover/enter",[{itemId:e.id,groupId:"ANNOTATION_TOOLBOX",message:i.get(e.id),rect:t.getRect()}])},f._onHoverExit=function(e){this._eventBus.publish("hint-tooltip/hover/exit",[e.id])},f._handleAnnotationButtonPressed=function(e){this._toolbar.exitSelectedState(),this._toolbar.enterSelectedState(e),this._presentationController.handleAnnotationButtonPressed(e)},Object.seal(f),Object.seal(t)})),define("module/core/js/view/subview",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisanimation","module/core/js/view/chartanimationconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/object","module/core/js/event/subscribable","module/core/js/util/svg"],(function(e){"use strict";function t(e,t){this._chartViewName=e,this.name=t,this.presentationControllers={},this._renderers={}}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractrenderer"),o=e("module/core/js/view/axisanimation"),r=e("module/core/js/view/chartanimationconstants"),s=e("module/core/js/util/class"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/math"),u=e("module/core/js/util/object"),c=e("module/core/js/event/subscribable"),d=e("module/core/js/util/svg"),h=a.plucker;s.extend(t,c),t.SVG_TYPE="svg",t.HTML_TYPE="html",t.DIMENSIONS_CHANGED="SubViewDimensionsChanged";var p=t.prototype;return t.naturalOrder=a.ascendingFieldComparator("relativeWeighting"),p.positions=[],p.isPersistent=!1,p.type=t.SVG_TYPE,p.positionTagName="svg:g",p.rendererTagName="svg:g",p.name=null,p._chartViewName=null,p._chartView=null,p.presentationControllers=null,p._animationPoller=null,p.dContainer=null,p.dimensions=null,p.relativeSize=0,p.relativeWeighting=0,p.domainNicing=!0,p.minHeight=0,p._renderers=null,p._captureZoneManager=null,p.visibleWindow=null,p._eventBus=null,p._rendererFactory=null,p._properties=null,p.isInChartSpace=a.returns(!1),p.withEventBus=a.setter("_eventBus"),p.withChartView=a.setter("_chartView"),p.withContainer=a.setter("dContainer"),p.withCaptureZoneManager=a.setter("_captureZoneManager"),p.getRelativeSize=a.returns(0),p.withRelativeWeighting=a.typedSetter("relativeWeighting",l.isNumber),p.withDomainNicing=a.setter("domainNicing"),p.withPersistence=a.setter("isPersistent"),p.withAnimationPoller=a.setter("_animationPoller"),p.withRendererFactory=a.setter("_rendererFactory"),p.withMinHeight=a.setter("minHeight"),p.withProperties=a.setter("_properties"),p.getChartView=a.getter("_chartView"),
p._createRendererPosition=function(e){if(e.clipPathNeeded){var t=this._positionClipPathId(e.name);return this.newDefs(this._positionClipDefsId(e.name)).append("svg:clipPath").attr("id",t).append("svg:rect"),this.dContainer.append("svg:g").attr("class",e.name+"Clipper").style("clip-path",d.localUrlRef(t)).append("svg:g").attr("class",e.name+" position")}return this.dContainer.append(this.positionTagName).attr("class",e.name+" position")},p.newDefs=function(e){return this._chartView.newDefs(e)},p.removeDefs=function(e){return this._chartView.removeDefs(e)},p.uniquelyIdentifyPosition=function(e){return this._chartViewName+"-"+this.name+"-"+e},p._positionClipPathId=function(e){return this.uniquelyIdentifyPosition(e)+"-clip"},p._positionClipDefsId=function(e){return this.uniquelyIdentifyPosition(e)+"-defs"},p._removeRendererPosition=function(e){this.dContainer.select("."+e.name+".position").remove(),e.clipPathNeeded&&(this.dContainer.select("."+e.name+"Clipper").remove(),this._chartView.removeDefs(this._positionClipDefsId(e.name)))},p.isRelativelyPositioned=function(){return this.relativeSize>0},p.initDom=function(){return this.positions.forEach(this._createRendererPosition,this),this},p.destroyDom=function(){return this.positions.forEach(this._removeRendererPosition,this),this},p.setVisibleWindow=function(e){this.visibleWindow&&(this._invokeEachRenderer("stopRedrawingBasedOnChangesInVisibleWindow"),a.invokeCall(u.values(this.presentationControllers),"stopListening"),this.visibleWindow.destroy()),this.visibleWindow=e.withY(this._createYAxis());var t=this.visibleWindow.visibleDateRange.getInstrumentModel();return this._invokeEachRenderer("setInstrumentModel",t),this._invokeEachRenderer("setVisibleWindow",this.visibleWindow),this._invokeEachRenderer("startRedrawingBasedOnChangesInVisibleWindow"),a.invokeApply(u.values(this.presentationControllers),"startListening",[e,t]),this},p.destroy=function(){this.removeRenderers(),this.destroyDom(),a.objectInvoke(this.presentationControllers,"destroy"),this.visibleWindow&&this.visibleWindow.destroy()},p._createYAxis=function(){var e=n.scale.linear();return o.wrap(e,1.5*r.ANIM_DURATION,n.ease(r.ANIM_EASE),this._chartViewName+"-"+this.name+"-subviewY").withDomainNicing(this.domainNicing).withAnimationPoller(this._animationPoller)},p._invokeEachRenderer=function(e){var t=Array.prototype.slice.call(arguments,1);for(var n in this._renderers){var i=this._renderers[n];a.invokeApply(i,e,t)}},p._rendererContainerClasses=function(e,t){var n=this._prefixedGroupName(t)+" "+e.getClassNameForContainer()+" renderer";return e.getPointType?n+" "+e.getPointType():n},p._prefixedGroupName=function(e){return"group-"+e},p._createDomForRenderer=function(e,t){if(!e.position)throw new Error("renderer "+e.name+" must have a position set");var n,o,r,s=this._getPositionDomContainer(e.position);if(s.empty())throw new Error("There is no position "+e.position+" defined in "+this.name+" view");return n=s.selectAll(".renderer").data(),n.push(e),n.sort(i.naturalOrder),o=n.indexOf(e),r=".renderer:nth-child("+(o+1)+")",s.insert(this.rendererTagName,r).data([e]).classed(this._rendererContainerClasses(e,t),!0)},p._renderersInGroup=function(e){return this._renderers[e]||(this._renderers[e]=[]),this._renderers[e]},p.addRenderer=function(e){var t=e.group;if(!t)throw new Error("renderer without a groupname");var n=this._renderersInGroup(t);return n.push(e),n.sort(i.naturalOrder),e.withSubView(this).withAnimationPoller(this._animationPoller).setContainer(this._createDomForRenderer(e,t)),this.visibleWindow&&e.setInstrumentModel(this.visibleWindow.visibleDateRange.getInstrumentModel()).setVisibleWindow(this.visibleWindow).initDom().startRedrawingBasedOnChangesInVisibleWindow(),this.dContainer.classed(this._prefixedGroupName(t),!0),this},p.addRenderers=function(e){for(var t=0;t<e.length;t++)this.addRenderer(e[t]);return this},p.addPresentationControllers=function(e){var t=this.visibleWindow,n=t?t.visibleDateRange.getInstrumentModel():null;for(var i in e)e[i].withSubView(this),t&&e[i].startListening(t,n);u.merge(this.presentationControllers,e,!0)},p.removePresentationControllers=function(e){e.forEach((function(e){var t=this.presentationControllers[e];t&&(t.stopListening(),t.destroy(),delete this.presentationControllers[e])}),this)},p.getPresentationControllerByName=function(e){return this.presentationControllers[e]},p.removeRenderers=function(){var e;for(e in this._renderers)this.removeGroupOfRenderers(e);return this},p.removeRenderer=function(e,t){var n,i=this._renderers[t]||[];for(n=0;n<i.length;n++)i[n].name===e&&(i[n].destroy(),i.splice(n,1),0===i.length&&this.dContainer.classed(this._prefixedGroupName(t),!1))},p.removeGroupOfRenderers=function(e){var t,n=this._renderers[e];if(!n)return this;for(t=0;t<n.length;t++)n[t].destroy();return delete this._renderers[e],this.dContainer.classed(this._prefixedGroupName(e),!1),this},p._getClipRectsForPosition=function(e){var t=this._positionClipPathId(e);return this._chartView.dContainer.select("#"+t).selectAll("rect")},p._getPositionDomContainer=function(e){return this.dContainer.select(".position."+e)},p.render=function(){this._invokeEachRenderer("updateRenderingSpace"),this._invokeEachRenderer("render")},p.topMargin=a.returns(0),p.bottomMargin=a.returns(0),p.rightMargin=a.returns(0),p.updateDimensions=function(e,n,i,o){var r="translate("+e.x+"px,"+e.y+"px)";this.visibleWindow&&this.visibleWindow.y.range([0,e.height]),this.type===t.SVG_TYPE?this.dContainer.attr("transform",d.svgTranslateAttrXY(e.x,e.y)):this.type===t.HTML_TYPE&&(this.dContainer.style("-webkit-transform",r).style("-moz-transform",r).style("-ms-transform",r).style("transform",r),this.dContainer.node().style.msTransform=r),this.dimensions=e,this.fire(t.DIMENSIONS_CHANGED,e)},p.isLastStudyView=function(){return this._chartView.subViewManager.isNthStudyView(this,-1)},p.getStudyViewDimensions=function(){return{top:this.dimensions.y,height:this.dimensions.height,width:this.dimensions.width}},t._applyDimensions=Object.freeze({x:h("x"),y:h("y"),width:h("width"),height:h("height")}),Object.seal(p),t})),define("module/core/js/view/xaxisview",["require","module/core/js/util/class","module/core/js/util/object","module/core/js/view/subview","module/core/js/util/svg"],(function(e){"use strict";function t(){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/object"),o=e("module/core/js/view/subview"),r=e("module/core/js/util/svg");n.extend(t,o),t.X_AXIS_HEIGHT=18;var s=t.prototype;return s.positions=i.recursiveFreeze([{name:"xAxis",clipPathNeeded:!1}]),s._menuSize=0,s._overviewSize=0,s.setMenuSize=function(e){e!==this._menuSize&&(this._menuSize=e,this.dimensions&&this.updateDimensions(this.dimensions))},s.setOverviewSize=function(e){e!==this._overviewSize&&(this._overviewSize=e,this.dimensions&&this.updateDimensions(this.dimensions))},s.setVisibleWindow=function(e){return t.superclass.setVisibleWindow.apply(this,arguments),this.visibleWindow.y.domain([0,1]),this},s.withEventBus=function(e){this._eventBus=e,e.subscribe("menu/size/changed",this.setMenuSize,this),e.subscribe("overview/size/changed",this._overviewSizeChangedHandler,this)},s.destroy=function(){t.superclass.destroy.apply(this,arguments),this._eventBus.unsubscribeAll(this)},s.updateDimensions=function(e,n,i,o){var s=Math.max(this._overviewSize,this._menuSize);t.superclass.updateDimensions.apply(this,arguments),this._getPositionDomContainer("xAxis").attr("transform",r.svgTranslateAttrY(this._chartView.chartHeight()-t.X_AXIS_HEIGHT-s-.5))},s._overviewSizeChangedHandler=function(e){this.setOverviewSize(e)},Object.seal(s),Object.seal(t)})),define("module/core/js/view/model/commonuiproperties",["require","module/core/js/view/xaxisview"],(function(e){"use strict";var t=e("module/core/js/view/xaxisview");return Object.freeze({bottomShiftThreshold:500,fullscreenEnabledHorizontalOffset:56,fullscreenEnabledVerticalOffset:56,dealingButtonsEnabledVerticalOffset:35,dataIsIndicativeOffset:16,axisOffset:t.X_AXIS_HEIGHT,statsLineWrap:12})})),define("module/annotations/js/edithintsi18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{ARROW_0:"Chart antippen, um Pfeilspitze anzusetzen",ARROW_1:"Antippen, um Richtung festzulegen",CHANNEL_0:"Chart antippen, um Kanal einzuleiten",CHANNEL_1:"Am Kanalende antippen",CHANNEL_2:"Antippen, um Kanalhöhe festzulegen",ELLIOTT_WAVE_0:"Chart antippen und Ausgangspunkt festlegen",ELLIOTT_WAVE_1:"Antippen, um Punkt 1 festzulegen",ELLIOTT_WAVE_2:"Antippen, um Punkt 2 festzulegen",ELLIOTT_WAVE_3:"Antippen, um Punkt 3 festzulegen",ELLIOTT_WAVE_4:"Antippen, um Punkt 4 festzulegen",ELLIOTT_WAVE_5:"Antippen, um Punkt 5 festzulegen",ELLIOTT_WAVE_ABC_0:"Chart antippen und Ausgangspunkt festlegen",ELLIOTT_WAVE_ABC_1:"Antippen, um Punkt 'a' festzulegen",ELLIOTT_WAVE_ABC_2:"Antippen, um Punkt 'b' festzulegen",ELLIOTT_WAVE_ABC_3:"Antippen, um Punkt 'c' festzulegen",FIBONACCI_0:"Chart antippen und Ausgangsdrehpunkt festlegen (100%)",FIBONACCI_1:"Antippen, um nächsten Drehpunkt festzulegen (0%)",FIBONACCI_2:"Antippen, um die Länge der Einzeichnung festzulegen",FIBONACCI_EXTENSION_0:"Chart antippen und Ausgangsdrehpunkt festlegen",FIBONACCI_EXTENSION_1:"Antippen, um nächsten Drehpunkt festzulegen",FIBONACCI_EXTENSION_2:"Antippen, um Retracement festzulegen",FIBONACCI_EXTENSION_3:"Antippen, um die Länge der Einzeichnung festzulegen",GANN_FAN_0:"Chart antippen und Fächer-Ausgangspunkt festlegen",GANN_FAN_1:"Antippen, um Winkel festzulegen",GANN_LINE_0:"Chart antippen und Linien-Ausgangspunkt festlegen",GANN_LINE_1:"Antippen, um Winkel festzulegen",HEAD_AND_SHOULDERS_0:"Chart antippen, um die linke Schulter einzuleiten",HEAD_AND_SHOULDERS_1:"An der linken Schulterspitze antippen",HEAD_AND_SHOULDERS_2:"An der linken Nackenlinie antippen",HEAD_AND_SHOULDERS_3:"An der Kopfspitze antippen",HEAD_AND_SHOULDERS_4:"An der rechten Nackenlinie antippen",HEAD_AND_SHOULDERS_5:"An der rechten Schulterspitze antippen",HEAD_AND_SHOULDERS_6:"Antippen, um Kopf-Schulter-Formation abzuschließen",HORIZONTAL_LINE_0:"Chart antippen, um horizontale Linie einzuzeichnen",OVAL_0:"Chart antippen, um die Mitte des Ovals festzulegen",OVAL_1:"Antippen, um Eckpunkt festzulegen",PITCHFORK_0:"Chart antippen, um den ersten Punkt zu setzen",PITCHFORK_1:"Antippen, um den zweiten Punkt zu setzen",PITCHFORK_2:"Antippen, um den dritten Punkt zu setzen",PITCHFORK_3:"Antippen, um die Pitchfork-Länge festzulegen",POINT_TO_POINT_0:"Chart antippen, um den ersten Punkt zu setzen",POINT_TO_POINT_1:"Antippen, um den zweiten Punkt zu setzen",RECTANGLE_0:"Chart antippen, um die erste Ecke festzulegen",RECTANGLE_1:"Antippen, um die gegenüber liegende Ecke festzulegen",TEXT_0:"Chart antippen, um die Platzierung Ihres Textfeldes zu markieren",TREND_LINE_0:"Chart antippen, um den ersten Punkt zu setzen",TREND_LINE_1:"Antippen, um den zweiten Punkt zu setzen",TRIANGLE_0:"Chart antippen, um die erste Ecke festzulegen",TRIANGLE_1:"Chart antippen, um die zweite Ecke festzulegen",TRIANGLE_2:"Chart antippen, um die dritte Ecke festzulegen",VERTICAL_LINE_0:"Chart antippen, um eine vertikale Linie einzuzeichnen"},en:{ARROW_0:"Tap the chart to set the tip of the arrow",ARROW_1:"Tap to set the direction",CHANNEL_0:"Tap the chart to start the channel",CHANNEL_1:"Tap at the end of the channel",CHANNEL_2:"Tap to set the channel height",ELLIOTT_WAVE_0:"Tap the chart to set the base point",ELLIOTT_WAVE_1:"Tap to set point 1",ELLIOTT_WAVE_2:"Tap to set point 2",ELLIOTT_WAVE_3:"Tap to set point 3",ELLIOTT_WAVE_4:"Tap to set point 4",ELLIOTT_WAVE_5:"Tap to set point 5",ELLIOTT_WAVE_ABC_0:"Tap the chart to set the base point",ELLIOTT_WAVE_ABC_1:"Tap to set point 'a'",ELLIOTT_WAVE_ABC_2:"Tap to set point 'b'",ELLIOTT_WAVE_ABC_3:"Tap to set point 'c'",FIBONACCI_0:"Tap the chart to set the initial swing point (100%)",FIBONACCI_1:"Tap to set the next swing point (0%)",FIBONACCI_2:"Tap to set the length of the drawing",FIBONACCI_EXTENSION_0:"Tap the chart to set the initial swing point",FIBONACCI_EXTENSION_1:"Tap to set the next swing point",FIBONACCI_EXTENSION_2:"Tap to set the retracement",FIBONACCI_EXTENSION_3:"Tap to set the length of the drawing",GANN_FAN_0:"Tap the chart to set the origin of the fan",GANN_FAN_1:"Tap to set the angle",GANN_LINE_0:"Tap the chart to set the origin of the line",GANN_LINE_1:"Tap to set the angle",HEAD_AND_SHOULDERS_0:"Tap the chart to start the left shoulder",HEAD_AND_SHOULDERS_1:"Tap at the peak of the left shoulder",HEAD_AND_SHOULDERS_2:"Tap at the left neckline",HEAD_AND_SHOULDERS_3:"Tap at the peak of the head",HEAD_AND_SHOULDERS_4:"Tap at the right neckline",HEAD_AND_SHOULDERS_5:"Tap at the peak of the right shoulder",HEAD_AND_SHOULDERS_6:"Tap to finish the head and shoulders",HORIZONTAL_LINE_0:"Tap the chart to set a horizontal line",OVAL_0:"Tap the chart to set the centre of the oval",OVAL_1:"Tap to set the corner",PITCHFORK_0:"Tap the chart to set the first point",PITCHFORK_1:"Tap to set the second point",PITCHFORK_2:"Tap to set the third point",PITCHFORK_3:"Tap to set the length of the pitchfork",POINT_TO_POINT_0:"Tap the chart to set the first point",POINT_TO_POINT_1:"Tap to set the second point",RECTANGLE_0:"Tap the chart to set the first corner",RECTANGLE_1:"Tap to set the opposite corner",TEXT_0:"Tap the chart to set the location of your text annotation",TREND_LINE_0:"Tap the chart to set the first point",TREND_LINE_1:"Tap to set the second point",TRIANGLE_0:"Tap the chart to set the first corner",TRIANGLE_1:"Tap to set the second corner",TRIANGLE_2:"Tap to set the third corner",VERTICAL_LINE_0:"Tap the chart to set a vertical line"},es:{ARROW_0:"Pulse en el gráfico para establecer la punta de la flecha",ARROW_1:"Pulse para establecer la dirección",CHANNEL_0:"Pulse en el gráfico para empezar el canal",CHANNEL_1:"Pulse al final del canal",CHANNEL_2:"Pulse para establecer la altura del canal",ELLIOTT_WAVE_0:"Pulse en el gráfico para establecer el punto base",ELLIOTT_WAVE_1:"Pulse para establecer el punto 1",ELLIOTT_WAVE_2:"Pulse para establecer el punto 2",ELLIOTT_WAVE_3:"Pulse para establecer el punto 3",ELLIOTT_WAVE_4:"Pulse para establecer el punto 4",ELLIOTT_WAVE_5:"Pulse para establecer el punto 5",ELLIOTT_WAVE_ABC_0:"Pulse en el gráfico para establecer el punto base",ELLIOTT_WAVE_ABC_1:"Pulse para establecer el punto 'a'",ELLIOTT_WAVE_ABC_2:"Pulse para establecer el punto 'b'",ELLIOTT_WAVE_ABC_3:"Pulse para establecer el punto 'c'",FIBONACCI_0:"Pulse en el gráfico para establecer el punto de giro inicial (100%)",FIBONACCI_1:"Pulse para establecer el siguiente punto de giro (0%)",FIBONACCI_2:"Pulse para establecer la longitud de la línea",FIBONACCI_EXTENSION_0:"Pulse en el gráfico para establecer el punto de giro inicial",FIBONACCI_EXTENSION_1:"Pulse para establecer el siguiente punto de giro",FIBONACCI_EXTENSION_2:"Pulse para establecer el retroceso",FIBONACCI_EXTENSION_3:"Pulse para establecer la longitud de la línea",GANN_FAN_0:"Pulse en el gráfico para establecer el origen del abanico",GANN_FAN_1:"Pulse para establecer el ángulo",GANN_LINE_0:"Pulse en el gráfico para establecer el origen de la línea",GANN_LINE_1:"Pulse para establecer el ángulo",HEAD_AND_SHOULDERS_0:"Pulse en el gráfico para empezar el 'hombro izquierdo'",HEAD_AND_SHOULDERS_1:"Pulse en el máximo del 'hombro izquierdo'",HEAD_AND_SHOULDERS_2:"Pulse a la izquierda del 'cuello'",HEAD_AND_SHOULDERS_3:"Pulse en el máximo de la 'cabeza'",HEAD_AND_SHOULDERS_4:"Pulse a la derecha del 'cuello'",HEAD_AND_SHOULDERS_5:"Pulse en el máximo del 'hombro derecho'",HEAD_AND_SHOULDERS_6:"Pulse para terminar la 'cabeza' y los 'hombros'",HORIZONTAL_LINE_0:"Pulse en el gráfico para establecer la línea horizontal",OVAL_0:"Pulse en el gráfico para establecer el centro del óvalo",OVAL_1:"Pulse para establecer el ángulo",PITCHFORK_0:"Pulse en el gráfico para establecer el primer punto",PITCHFORK_1:"Pulse para establecer el segundo punto",PITCHFORK_2:"Pulse para establecer el tercer punto",PITCHFORK_3:"Pulse para establecer la longitud del tridente",POINT_TO_POINT_0:"Pulse en el gráfico para establecer el primer punto",POINT_TO_POINT_1:"Pulse para establecer el segundo punto",RECTANGLE_0:"Pulse en el gráfico para establecer el primer ángulo",RECTANGLE_1:"Pulse para establecer el ángulo opuesto",TEXT_0:"Pulse en el gráfico para establecer el lugar de su próxima anotación",TREND_LINE_0:"Pulse en el gráfico para establecer el primer punto",TREND_LINE_1:"Pulse para establecer el segundo punto",TRIANGLE_0:"Pulse en el gráfico para establecer el primer ángulo",TRIANGLE_1:"Pulse para establecer en segundo ángulo",TRIANGLE_2:"Pulse para establecer el tercer ángulo",VERTICAL_LINE_0:"Pulse en el gráfico para establecer una línea vertical"},fr:{ARROW_0:"Touchez pour définir la pointe de la flèche",ARROW_1:"Touchez pour définir la direction",CHANNEL_0:"Touchez pour définir le début du canal",CHANNEL_1:"Touchez pour définir la fin du canal",CHANNEL_2:"Touchez pour déterminer la hauteur du canal",ELLIOTT_WAVE_0:"Touchez le graphique pour définir le point de base",ELLIOTT_WAVE_1:"Touchez pour définir le point 1",ELLIOTT_WAVE_2:"Touchez pour définir le point 2",ELLIOTT_WAVE_3:"Touchez pour définir le point 3",ELLIOTT_WAVE_4:"Touchez pour définir le point 4",ELLIOTT_WAVE_5:"Touchez pour définir le point 5",ELLIOTT_WAVE_ABC_0:"Touchez le graphique pour définir le point de base",ELLIOTT_WAVE_ABC_1:"Touchez pour définir le point 'a'",ELLIOTT_WAVE_ABC_2:"Touchez pour définir le point 'b'",ELLIOTT_WAVE_ABC_3:"Touchez pour définir le point 'c'",FIBONACCI_0:"Touchez le graphique pour définir le point de référence initial (100%)",FIBONACCI_1:"Touchez pour définir le point de référence suivant (0%)",FIBONACCI_2:"Touchez pour définir la longueur du tracé",FIBONACCI_EXTENSION_0:"Touchez le graphique pour définir le point de référence initial",FIBONACCI_EXTENSION_1:"Touchez pour définir le point de référence suivant",FIBONACCI_EXTENSION_2:"Touchez pour définir le retracement",FIBONACCI_EXTENSION_3:"Touchez pour définir la longueur du tracé",GANN_FAN_0:"Touchez pour définir l'origine de l'éventail",GANN_FAN_1:"Touchez pour définir l'angle",GANN_LINE_0:"Touchez pour définir l'origine de la ligne",GANN_LINE_1:"Touchez pour définir l'angle",HEAD_AND_SHOULDERS_0:"Touchez le graphique pour commencer à tracer l'épaule gauche",HEAD_AND_SHOULDERS_1:"Touchez pour définir le sommet de l'épaule gauche",HEAD_AND_SHOULDERS_2:"Touchez pour définir la ligne de cou gauche",HEAD_AND_SHOULDERS_3:"Touchez pour définir le sommet de la tête",HEAD_AND_SHOULDERS_4:"Touchez pour définir la ligne de cou droite",HEAD_AND_SHOULDERS_5:"Touchez pour définir le sommet de l'épaule droite",HEAD_AND_SHOULDERS_6:"Touchez une nouvelle fois pour compléter la figure tête-épaules",HORIZONTAL_LINE_0:"Touchez pour insérer une ligne horizontale",OVAL_0:"Touchez pour définir le centre de l'ovale",OVAL_1:"Touchez pour définir l'angle",PITCHFORK_0:"Touchez pour définir le premier point",PITCHFORK_1:"Touchez pour définir le deuxième point",PITCHFORK_2:"Touchez pour définir le troisième point",PITCHFORK_3:"Touchez le graphique pour définir la longueur de la fourche",POINT_TO_POINT_0:"Touchez pour définir le premier point",POINT_TO_POINT_1:"Touchez pour définir le deuxième point",RECTANGLE_0:"Touchez le graphique pour définir le premier angle",RECTANGLE_1:"Touchez le graphique pour définir l’angle opposé",TEXT_0:"Touchez le graphique pour définir la position de votre commentaire",TREND_LINE_0:"Touchez pour définir le premier point",TREND_LINE_1:"Touchez pour définir le deuxième point",TRIANGLE_0:"Touchez le graphique pour définir le premier angle",TRIANGLE_1:"Touchez le graphique pour définir le deuxième angle",TRIANGLE_2:"Touchez le graphique pour définir le troisième angle",VERTICAL_LINE_0:"Touchez le graphique pour insérer une ligne verticale"},it:{ARROW_0:"Tocca il grafico per orientare la punta della freccia",ARROW_1:"Tocca per impostare la direzione",CHANNEL_0:"Tocca il grafico per impostare l'inizio del canale",CHANNEL_1:"Tocca in corrispondenza della fine del canale",CHANNEL_2:"Tocca per impostare l'altezza del canale",ELLIOTT_WAVE_0:"Tocca il grafico per impostare il punto base",ELLIOTT_WAVE_1:"Tocca per impostare il punto 1",ELLIOTT_WAVE_2:"Tocca per impostare il punto 2",ELLIOTT_WAVE_3:"Tocca per impostare il punto 3",ELLIOTT_WAVE_4:"Tocca per impostare il punto 4",ELLIOTT_WAVE_5:"Tocca per impostare il punto 5",ELLIOTT_WAVE_ABC_0:"Tocca il grafico per impostare il punto base",ELLIOTT_WAVE_ABC_1:"Tocca per impostare un punto 'a'",ELLIOTT_WAVE_ABC_2:"Tocca per impostare un punto 'b'",ELLIOTT_WAVE_ABC_3:"Tocca per impostare un punto 'c'",FIBONACCI_0:"Tocca il grafico per impostare il punto swing iniziale (100%)",FIBONACCI_1:"Tocca per impostare il punto swing seguente (0%)",FIBONACCI_2:"Tocca per impostare la lunghezza della linea",FIBONACCI_EXTENSION_0:"Tocca il grafico per impostare il punto swing iniziale",FIBONACCI_EXTENSION_1:"Tocca per impostare il punto swing seguente",FIBONACCI_EXTENSION_2:"Tocca per impostare il ritracciamento",FIBONACCI_EXTENSION_3:"Tocca per impostare la lunghezza della linea",GANN_FAN_0:"Tocca il grafico per impostare il punto iniziale del ventaglio",GANN_FAN_1:"Tocca per impostare l'angolo",GANN_LINE_0:"Tocca il grafico per impostare l'origine della linea",GANN_LINE_1:"Tocca per impostare l'angolo",HEAD_AND_SHOULDERS_0:"Tocca il grafico per impostare l'inizio della spalla sinistra",HEAD_AND_SHOULDERS_1:"Tocca in corrispondenza del picco della spalla sinistra",HEAD_AND_SHOULDERS_2:"Tocca in corrispondenza del collo di sinistra",HEAD_AND_SHOULDERS_3:"Tocca in corrispondenza del picco della testa",HEAD_AND_SHOULDERS_4:"Tocca in corrispondenza del collo di destra",HEAD_AND_SHOULDERS_5:"Tocca in corrispondenza del picco della spalla destra",HEAD_AND_SHOULDERS_6:"Tocca per terminare la testa e le spalle",HORIZONTAL_LINE_0:"Tocca il grafico per tracciare una linea orizzontale",OVAL_0:"Tocca il grafico per impostare il centro dell'ovale",OVAL_1:"Tocca per impostare l'angolo",PITCHFORK_0:"Tocca il grafico per impostare il primo punto",PITCHFORK_1:"Tocca per impostare il secondo punto",PITCHFORK_2:"Tocca per impostare il terzo punto",PITCHFORK_3:"Tocca per impostare la lunghezza del forchetta",POINT_TO_POINT_0:"Tocca il grafico per impostare il primo punto",POINT_TO_POINT_1:"Tocca per impostare il secondo punto",RECTANGLE_0:"Tocca il grafico per impostare il primo angolo",RECTANGLE_1:"Tocca per impostare l'angolo opposto",TEXT_0:"Tocca il grafico per stabilire la posizione della nota",TREND_LINE_0:"Tocca il grafico per impostare il primo punto",TREND_LINE_1:"Tocca per impostare il secondo punto",TRIANGLE_0:"Tocca il grafico per impostare il primo angolo",TRIANGLE_1:"Tocca il grafico per impostare il secondo angolo",TRIANGLE_2:"Tocca il grafico per impostare il terzo angolo",VERTICAL_LINE_0:"Tocca il grafico per tracciare una linea verticale"},ja:{ARROW_0:"チャートをタップして矢印の先端を設定",ARROW_1:"タップして矢印の方向を設定",CHANNEL_0:"チャートをタップしてチャネルラインの起点を設定",CHANNEL_1:"タップしてチャネルラインの終点を設定",CHANNEL_2:"タップしてチャネルラインの幅を設定",ELLIOTT_WAVE_0:"チャートをタップして基準点を設定",ELLIOTT_WAVE_1:"タップして1を設定",ELLIOTT_WAVE_2:"タップして2を設定",ELLIOTT_WAVE_3:"タップして3を設定",ELLIOTT_WAVE_4:"タップして4を設定",ELLIOTT_WAVE_5:"タップして5を設定",ELLIOTT_WAVE_ABC_0:"チャートをタップして基準点を設定",ELLIOTT_WAVE_ABC_1:"タップしてaを設定",ELLIOTT_WAVE_ABC_2:"タップしてbを設定",ELLIOTT_WAVE_ABC_3:"タップしてcを設定",FIBONACCI_0:"チャートをタップして最初のスイングポイントを設定 (100%)",FIBONACCI_1:"タップして次のスイングポイントを設定 (0%)",FIBONACCI_2:"タップして長さを設定",FIBONACCI_EXTENSION_0:"チャートをタップして最初のスイングポイントを設定",FIBONACCI_EXTENSION_1:"タップして次のスイングポイントを設定",FIBONACCI_EXTENSION_2:"タップしてリトレースメントを設定",FIBONACCI_EXTENSION_3:"タップして長さを設定",GANN_FAN_0:"チャートをタップしてギャンファンの起点を設定",GANN_FAN_1:"タップして角度を設定",GANN_LINE_0:"チャートをタップしてギャンラインの起点を設定",GANN_LINE_1:"タップして角度を設定",HEAD_AND_SHOULDERS_0:"チャートをタップしてレフトショルダーをスタート",HEAD_AND_SHOULDERS_1:"レフトショルダーのトップをタップ",HEAD_AND_SHOULDERS_2:"レフトネックラインをタップ",HEAD_AND_SHOULDERS_3:"ヘッドのトップをタップ",HEAD_AND_SHOULDERS_4:"ライトネックラインをタップ",HEAD_AND_SHOULDERS_5:"ライトショルダーのトップをタップ",HEAD_AND_SHOULDERS_6:"タップしてヘッドアンドショルダーの設定を終了",HORIZONTAL_LINE_0:"チャートをタップして水平線を引く",OVAL_0:"チャートをタップして楕円の中心を設定",OVAL_1:"タップして角を設定",PITCHFORK_0:"チャートをタップして最初のポイントを設定",PITCHFORK_1:"タップして2番目のポイントを設定",PITCHFORK_2:"タップして3番目のポイントを設定",PITCHFORK_3:"タップしてピッチフォークの長さを設定",POINT_TO_POINT_0:"チャートをタップして最初のポイントを設定",POINT_TO_POINT_1:"タップして2番目のポイントを設定",RECTANGLE_0:"チャートをタップして最初の角を設定",RECTANGLE_1:"タップして対角線上の角を設定",TEXT_0:"チャートをタップして注釈をつける場所を設定",TREND_LINE_0:"チャートをタップして最初のポイントを設定",TREND_LINE_1:"タップして2番目のポイントを設定",TRIANGLE_0:"チャートをタップして最初の角を設定",TRIANGLE_1:"タップして2番目の角を設定",TRIANGLE_2:"タップして3番目の角を設定",VERTICAL_LINE_0:"チャートをタップして縦線を設定"},nl:{ARROW_0:"Tik op de grafiek om de punt van het pijltje in te stellen",ARROW_1:"Tik om de richting in te stellen",CHANNEL_0:"Tik op de grafiek om het kanaal te starten",CHANNEL_1:"Tik op het einde van het kanaal",CHANNEL_2:"Tik op het einde van de kanaalhoogte",ELLIOTT_WAVE_0:"Tik op de grafiek om het basispunt in te stellen",ELLIOTT_WAVE_1:"Tik om punt 1 in te stellen",ELLIOTT_WAVE_2:"Tik om punt 2 in te stellen",ELLIOTT_WAVE_3:"Tik om punt 3 in te stellen",ELLIOTT_WAVE_4:"Tik om punt 4 in te stellen",ELLIOTT_WAVE_5:"Tik om punt 5 in te stellen",ELLIOTT_WAVE_ABC_0:"Tik op de grafiek om het basispunt in te stellen",ELLIOTT_WAVE_ABC_1:"Tik om punt 'a' in te stellen",ELLIOTT_WAVE_ABC_2:"Tik om punt 'b' in te stellen",ELLIOTT_WAVE_ABC_3:"Tik om punt 'c' in te stellen",FIBONACCI_0:"Tik op de grafiek om het beginpunt van de swing in te stellen (100%)",FIBONACCI_1:"Tik om het volgende swing punt in te stellen (0%)",FIBONACCI_2:"Tik om de lengte van de tekening in te stellen",FIBONACCI_EXTENSION_0:"Tik op de grafiek om het beginpunt van de swing in te stellen",FIBONACCI_EXTENSION_1:"Tik om het volgende swing punt in te stellen",FIBONACCI_EXTENSION_2:"Tik om de retracement in te stellen",FIBONACCI_EXTENSION_3:"Tik om de lengte van de tekening in te stellen",GANN_FAN_0:"Tik op de grafiek om het begin van de waaier in te stellen",GANN_FAN_1:"Tik om de hoek in te stellen",GANN_LINE_0:"Tik op de grafiek om het begin van de lijn in te stellen",GANN_LINE_1:"Tik om de hoek in te stellen",HEAD_AND_SHOULDERS_0:"Tik op de grafiek om met de linkerschouder te beginnen",HEAD_AND_SHOULDERS_1:"Tik op de bovenkant van de linkerschouder",HEAD_AND_SHOULDERS_2:"Tik op de linker neklijn",HEAD_AND_SHOULDERS_3:"Tik op de bovenkant van het hoofd",HEAD_AND_SHOULDERS_4:"Tik op de rechter neklijn",HEAD_AND_SHOULDERS_5:"Tik op de bovenkant van de rechterschouder",HEAD_AND_SHOULDERS_6:"Tik om het hoofd en de schouders te voltooien",HORIZONTAL_LINE_0:"Tik op de grafiek om de horizontale lijn in te stellen",OVAL_0:"Tik op de grafiek om het centrum van het ovaal in te stellen",OVAL_1:"Tik om de hoek in te stellen",PITCHFORK_0:"Tik om de grafiek om het eerste punt in te stellen",PITCHFORK_1:"Tik om het tweede punt in te stellen",PITCHFORK_2:"Tik om het derde punt in te stellen",PITCHFORK_3:"Tik om de vorklengte in te stellen",POINT_TO_POINT_0:"Tik om de grafiek om het eerste punt in te stellen",POINT_TO_POINT_1:"Tik om het tweede punt in te stellen",RECTANGLE_0:"Tik op de grafiek om de eerste hoek in te stellen",RECTANGLE_1:"Tik om de tegengestelde hoek in te stellen",TEXT_0:"Tik op de plek in de grafiek waar u uw aantekening wilt plaatsen",TREND_LINE_0:"Tik om de grafiek om het eerste punt in te stellen",TREND_LINE_1:"Tik om het tweede punt in te stellen",TRIANGLE_0:"Tik op de grafiek om de eerste hoek in te stellen",TRIANGLE_1:"Tik om de tweede hoek in te stellen",TRIANGLE_2:"Tik om de derde hoek in te stellen",VERTICAL_LINE_0:"Tik op de grafiek om een verticale lijn in te stellen"},no:{ARROW_0:"Trykk i diagrammet for å markere pilens spiss",ARROW_1:"Trykk for å angi retning",CHANNEL_0:"Trykk i diagrammet for å starte kanalen",CHANNEL_1:"Trykk på kanalens sluttpunkt",CHANNEL_2:"Trykk for å markere kanalens høyde",ELLIOTT_WAVE_0:"Trykk i diagrammet for å sette basepunkt",ELLIOTT_WAVE_1:"Trykk for å markere punkt 1",ELLIOTT_WAVE_2:"Trykk for å markere punkt 2",ELLIOTT_WAVE_3:"Trykk for å markere punkt 3",ELLIOTT_WAVE_4:"Trykk for å markere punkt 4",ELLIOTT_WAVE_5:"Trykk for å markere punkt 5",ELLIOTT_WAVE_ABC_0:"Trykk i diagrammet for å sette basepunkt",ELLIOTT_WAVE_ABC_1:"Trykk for å markere punkt 'a'",ELLIOTT_WAVE_ABC_2:"Trykk for å markere punkt 'b'",ELLIOTT_WAVE_ABC_3:"Trykk for å markere punkt 'c'",FIBONACCI_0:"Trykk i diagrammet for å markere opprinnelig svingpunkt (100%)",FIBONACCI_1:"Trykk for å markere neste svingpunkt (0%)",FIBONACCI_2:"Trykk for å bestemme merknadens lengde",FIBONACCI_EXTENSION_0:"Trykk i diagrammet for å markere opprinnelig svingpunkt",FIBONACCI_EXTENSION_1:"Trykk for å markere neste svingpunkt",FIBONACCI_EXTENSION_2:"Trykk for å markere justering",FIBONACCI_EXTENSION_3:"Trykk for å bestemme merknadens lengde",GANN_FAN_0:"Trykk i diagrammet for å markere utgangspunktet for viften",GANN_FAN_1:"Trykk for å markere vinkel",GANN_LINE_0:"Trykk i diagrammet for å markere linjens utgangspunkt",GANN_LINE_1:"Trykk for å markere vinkel",HEAD_AND_SHOULDERS_0:"Trykk i diagrammet for å starte venstre skulder",HEAD_AND_SHOULDERS_1:"Trykk på toppen av venstre skulder",HEAD_AND_SHOULDERS_2:"Trykk på venstre neckline",HEAD_AND_SHOULDERS_3:"Trykk på toppen av hodet",HEAD_AND_SHOULDERS_4:"Trykk på høyre neckline",HEAD_AND_SHOULDERS_5:"Trykk på toppen av høyre skulder",HEAD_AND_SHOULDERS_6:"Trykk for å ferdigstille hode og skuldre",HORIZONTAL_LINE_0:"Trykk i diagrammet for å markere en horisontal linje",OVAL_0:"Trykk i diagrammet for å markere ovalens midtpunkt",OVAL_1:"Trykk for å markere hjørnet",PITCHFORK_0:"Trykk i diagrammet for å markere første punkt",PITCHFORK_1:"Trykk for å markere andre punkt",PITCHFORK_2:"Trykk for å markere tredje punkt",PITCHFORK_3:"Trykk for å bestemme lenge på Pitchfork",POINT_TO_POINT_0:"Trykk i diagrammet for å markere første punkt",POINT_TO_POINT_1:"Trykk for å markere andre punkt",RECTANGLE_0:"Trykk i diagrammet for å markere det første hjørnet",RECTANGLE_1:"Trykk for å markere det motsatte hjørnet",TEXT_0:"Trykk i diagrammet for å angi plass for tekst",TREND_LINE_0:"Trykk i diagrammet for å markere første punkt",TREND_LINE_1:"Trykk for å markere andre punkt",TRIANGLE_0:"Trykk i diagrammet for å markere det første hjørnet",TRIANGLE_1:"Trykk for å markere andre hjørne",TRIANGLE_2:"Trykk for å markere tredje hjørne",VERTICAL_LINE_0:"Trykk i diagrammet for å markere en vertikal linje"},pt:{ARROW_0:"Clique no gráfico para definir o topo da flecha",ARROW_1:"Clique para definir a direção",CHANNEL_0:"Clique no gráfico para definir o início do canal",CHANNEL_1:"Clique para definir o fim do canal",CHANNEL_2:"Clique para definir a altura do canal",ELLIOTT_WAVE_0:"Clique no gráfico para definir o base point",ELLIOTT_WAVE_1:"Clique para definir ponto 1",ELLIOTT_WAVE_2:"Clique para definir ponto 2",ELLIOTT_WAVE_3:"Clique para definir ponto 3",ELLIOTT_WAVE_4:"Clique para definir ponto 4",ELLIOTT_WAVE_5:"Clique para definir ponto 5",ELLIOTT_WAVE_ABC_0:"Clique no gráfico para definir o base point",ELLIOTT_WAVE_ABC_1:"Clique para  definir ponto 'a'",ELLIOTT_WAVE_ABC_2:"Clique para  definir ponto 'b'",ELLIOTT_WAVE_ABC_3:"Clique para  definir ponto 'c'",FIBONACCI_0:"Clique no gráfico para definir o swing point (100%)",FIBONACCI_1:"Clique para definir o próximo swing point (0%)",FIBONACCI_2:"Clique para definir o tamanho do desenho",FIBONACCI_EXTENSION_0:"Clique no gráfico para definir o swing point",FIBONACCI_EXTENSION_1:"Clique para definir o próximo swing point",FIBONACCI_EXTENSION_2:"Clique para definir a retração",FIBONACCI_EXTENSION_3:"Clique para definir o tamanho do desenho",GANN_FAN_0:"Clique no gráfico para definir a origem do fan",GANN_FAN_1:"Clique para definir o ângulo",GANN_LINE_0:"Clique no gráfico para definir a origem da linha",GANN_LINE_1:"Clique para definir o ângulo",HEAD_AND_SHOULDERS_0:"Clique no gráfico para marcar o ombro esquerdo",
HEAD_AND_SHOULDERS_1:"Clique no topo do ombro esquerdo",HEAD_AND_SHOULDERS_2:"Clique no neckline esquerdo",HEAD_AND_SHOULDERS_3:"Clique no topo da cabeça (head)",HEAD_AND_SHOULDERS_4:"Clique no neckline direito",HEAD_AND_SHOULDERS_5:"Clique no topo do ombro direito",HEAD_AND_SHOULDERS_6:"Clique para encerrar ombro-cabeça-ombro",HORIZONTAL_LINE_0:"Clique no gráfico para definir uma linha horizontal",OVAL_0:"Clique no gráfico para definir o centro do círculo",OVAL_1:"Clique para definir o canto",PITCHFORK_0:"Clique no gráfico para definir o primeiro ponto",PITCHFORK_1:"Clique para definir o segundo ponto",PITCHFORK_2:"Clique para definir o terceiro ponto",PITCHFORK_3:"Clique para definir o tamanho do pitchfork",POINT_TO_POINT_0:"Clique no gráfico para definir o primeiro ponto",POINT_TO_POINT_1:"Clique para definir o segundo ponto",RECTANGLE_0:"Clique no gráfico para definir o primeiro ângulo",RECTANGLE_1:"Clique para definir o ângulo oposto",TEXT_0:"Clique no gráfico para definir o local da sua anotação",TREND_LINE_0:"Clique no gráfico para definir o primeiro ponto",TREND_LINE_1:"Clique para definir o segundo ponto",TRIANGLE_0:"Clique no gráfico para definir o primeiro ângulo",TRIANGLE_1:"Clique para definir o segundo ângulo",TRIANGLE_2:"Clique para definir o terceiro ângulo",VERTICAL_LINE_0:"Clique no gráfico para definir uma linha vertical"},sv:{ARROW_0:"Tryck på diagrammet för att markera pilens spets",ARROW_1:"Tryck för att ange riktning",CHANNEL_0:"Tryck på diagrammet för att starta kanalen",CHANNEL_1:"Tryck på kanalens slutpunkt",CHANNEL_2:"Tryck för att ange kanalens höjd",ELLIOTT_WAVE_0:"Tryck på diagrammet för att markera baspunkten",ELLIOTT_WAVE_1:"Tryck för att markera punkt 1",ELLIOTT_WAVE_2:"Tryck för att markera punkt 2",ELLIOTT_WAVE_3:"Tryck för att markera punkt 3",ELLIOTT_WAVE_4:"Tryck för att markera punkt 4",ELLIOTT_WAVE_5:"Tryck för att markera punkt 5",ELLIOTT_WAVE_ABC_0:"Tryck på diagrammet för att markera baspunkten",ELLIOTT_WAVE_ABC_1:"Tryck för att markera punkt 'a'",ELLIOTT_WAVE_ABC_2:"Tryck för att markera punkt 'b'",ELLIOTT_WAVE_ABC_3:"Tryck för att markera punkt 'c'",FIBONACCI_0:"Tryck i diagrammet för att markera första swing point (100%)",FIBONACCI_1:"Tryck för att markera nästa swing point (0%)",FIBONACCI_2:"Tryck på diagrammet för att ange markeringens längd",FIBONACCI_EXTENSION_0:"Tryck i diagrammet för att markera första swing point",FIBONACCI_EXTENSION_1:"Tryck för att markera nästa swing point",FIBONACCI_EXTENSION_2:"Tryck för att markera retracement",FIBONACCI_EXTENSION_3:"Tryck på diagrammet för att ange markeringens längd",GANN_FAN_0:"Tryck för att markera utgångspunkt för Fan",GANN_FAN_1:"Tryck för att ange vinkel",GANN_LINE_0:"Tryck på diagrammet för att markera linjens utgångspunkt",GANN_LINE_1:"Tryck för att ange vinkel",HEAD_AND_SHOULDERS_0:"Tryck på diagrammet för att påbörja vänster skuldra",HEAD_AND_SHOULDERS_1:"Tryck på vänster skuldras topp",HEAD_AND_SHOULDERS_2:"Tryck på vänster nacklinje",HEAD_AND_SHOULDERS_3:"Tryck på huvudets topp",HEAD_AND_SHOULDERS_4:"Tryck på höger nacklinje",HEAD_AND_SHOULDERS_5:"Tryck på höger skuldras topp",HEAD_AND_SHOULDERS_6:"Tryck för att avsluta huvud och skuldror",HORIZONTAL_LINE_0:"Tryck för att rita en horisontell linje",OVAL_0:"Tryck på diagrammet för att markera ovalens mittpunkt",OVAL_1:"Tryck för att ange hörn",PITCHFORK_0:"Tryck på diagrammet för att markera den första punkten",PITCHFORK_1:"Tryck för att markera den andra punkten",PITCHFORK_2:"Tryck för att markera den tredje punkten",PITCHFORK_3:"Tryck på diagrammet för att ange längd på Pitchfork",POINT_TO_POINT_0:"Tryck på diagrammet för att markera den första punkten",POINT_TO_POINT_1:"Tryck för att markera den andra punkten",RECTANGLE_0:"Tryck på diagrammet för att markera det första hörnet",RECTANGLE_1:"Tryck för att markera motsatt hörn",TEXT_0:"Tryck på diagrammet för att ange plats för text",TREND_LINE_0:"Tryck på diagrammet för att markera den första punkten",TREND_LINE_1:"Tryck för att markera den andra punkten",TRIANGLE_0:"Tryck på diagrammet för att markera det första hörnet",TRIANGLE_1:"Tryck för att markera det andra hörnet",TRIANGLE_2:"Tryck för att markera det tredje hörnet",VERTICAL_LINE_0:"Tryck på diagrammet för att rita en vertikal linje"},zh:{ARROW_0:"轻触图表，设置箭头起点",ARROW_1:"轻触设置方向",CHANNEL_0:"轻触图表，设置通道起点",CHANNEL_1:"轻触设置通道终点",CHANNEL_2:"轻触设置通道高度",ELLIOTT_WAVE_0:"轻触图表，设置起点",ELLIOTT_WAVE_1:"轻触设置点1",ELLIOTT_WAVE_2:"轻触设置点2",ELLIOTT_WAVE_3:"轻触设置点3",ELLIOTT_WAVE_4:"轻触设置点4",ELLIOTT_WAVE_5:"轻触设置点5",ELLIOTT_WAVE_ABC_0:"轻触图表，设置起点",ELLIOTT_WAVE_ABC_1:"轻触设置点a",ELLIOTT_WAVE_ABC_2:"轻触设置点b",ELLIOTT_WAVE_ABC_3:"轻触设置点c",FIBONACCI_0:"轻触图表，设置出发点 (100%)",FIBONACCI_1:"轻触设置下一个点 (0%)",FIBONACCI_2:"轻触设置绘图长度",FIBONACCI_EXTENSION_0:"轻触图表，设置出发点",FIBONACCI_EXTENSION_1:"轻触设置下一个点",FIBONACCI_EXTENSION_2:"轻触设置回调线",FIBONACCI_EXTENSION_3:"轻触设置绘图长度",GANN_FAN_0:"轻触图表，设置江恩扇形线起点",GANN_FAN_1:"轻触设置角度",GANN_LINE_0:"轻触图表，设置起点",GANN_LINE_1:"轻触设置角度",HEAD_AND_SHOULDERS_0:"轻触图表，设置左肩",HEAD_AND_SHOULDERS_1:"轻触左肩顶",HEAD_AND_SHOULDERS_2:"轻触左颈",HEAD_AND_SHOULDERS_3:"轻触头部",HEAD_AND_SHOULDERS_4:"轻触右颈",HEAD_AND_SHOULDERS_5:"轻触右肩顶",HEAD_AND_SHOULDERS_6:"轻触完成头肩形态",HORIZONTAL_LINE_0:"轻触图表，设置一条水平线",OVAL_0:"轻触图表，设置椭圆形的中心",OVAL_1:"轻触设置边角",PITCHFORK_0:"轻触图表，设置起始点",PITCHFORK_1:"轻触设置第二个点",PITCHFORK_2:"轻触设置第三个点",PITCHFORK_3:"轻触设置叉子的长度",POINT_TO_POINT_0:"轻触图表，设置起始点",POINT_TO_POINT_1:"轻触设置第二个点",RECTANGLE_0:"轻触图表选取初始位置",RECTANGLE_1:"轻触确认另一端位置",TEXT_0:"轻触图表设置文字注释的位置",TREND_LINE_0:"轻触图表，设置起始点",TREND_LINE_1:"轻触设置第二个点",TRIANGLE_0:"轻触图表选取初始位置",TRIANGLE_1:"轻触确认第二个位置",TRIANGLE_2:"轻触确认第三个位置",VERTICAL_LINE_0:"轻触图表设置垂直线"},zh_TW:{ARROW_0:"輕觸圖表，設置箭頭起點",ARROW_1:"輕觸設置方向",CHANNEL_0:"輕觸圖表，設置通道起點",CHANNEL_1:"輕觸設置通道終點",CHANNEL_2:"輕觸設置通道高度",ELLIOTT_WAVE_0:"輕觸圖表，設置起點",ELLIOTT_WAVE_1:"輕觸設置點1",ELLIOTT_WAVE_2:"輕觸設置點2",ELLIOTT_WAVE_3:"輕觸設置點3",ELLIOTT_WAVE_4:"輕觸設置點4",ELLIOTT_WAVE_5:"輕觸設置點5",ELLIOTT_WAVE_ABC_0:"輕觸圖表，設置起點",ELLIOTT_WAVE_ABC_1:"輕觸設置點a",ELLIOTT_WAVE_ABC_2:"輕觸設置點b",ELLIOTT_WAVE_ABC_3:"輕觸設置點c",FIBONACCI_0:"輕觸圖表，設置出發點 (100%)",FIBONACCI_1:"輕觸設置下一個點 (0%)",FIBONACCI_2:"輕觸設置繪圖長度",FIBONACCI_EXTENSION_0:"輕觸圖表，設置出發點",FIBONACCI_EXTENSION_1:"輕觸設置下一個點",FIBONACCI_EXTENSION_2:"輕觸設置回調線",FIBONACCI_EXTENSION_3:"輕觸設置繪圖長度",GANN_FAN_0:"輕觸圖表，設置江恩扇形線起點",GANN_FAN_1:"輕觸設置角度",GANN_LINE_0:"輕觸圖表，設置起點",GANN_LINE_1:"輕觸設置角度",HEAD_AND_SHOULDERS_0:"輕觸圖表，設置左肩",HEAD_AND_SHOULDERS_1:"輕觸左肩頂",HEAD_AND_SHOULDERS_2:"輕觸左頸",HEAD_AND_SHOULDERS_3:"輕觸頭部",HEAD_AND_SHOULDERS_4:"輕觸右頸",HEAD_AND_SHOULDERS_5:"輕觸右肩頂",HEAD_AND_SHOULDERS_6:"輕觸完成頭肩形態",HORIZONTAL_LINE_0:"輕觸圖表，設置一條水平線",OVAL_0:"輕觸圖表，設置橢圓形的中心",OVAL_1:"輕觸設置邊角",PITCHFORK_0:"輕觸圖表，設置起始點",PITCHFORK_1:"輕觸設置第二個點",PITCHFORK_2:"輕觸設置第三個點",PITCHFORK_3:"輕觸設置叉子的長度",POINT_TO_POINT_0:"輕觸圖表，設置起始點",POINT_TO_POINT_1:"輕觸設置第二個點",RECTANGLE_0:"輕觸圖表選取初始位置",RECTANGLE_1:"輕觸確認另一端位置",TEXT_0:"輕觸圖表設置文字注釋的位置",TREND_LINE_0:"輕觸圖表，設置起始點",TREND_LINE_1:"輕觸設置第二個點",TRIANGLE_0:"輕觸圖表選取初始位置",TRIANGLE_1:"輕觸確認第二個位置",TRIANGLE_2:"輕觸確認第三個位置",VERTICAL_LINE_0:"點擊圖表設置垂直線"}})})),define("module/annotations/js/view/renderer/edithintsrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/annotations/js/edithintsi18n"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/class"),o=e("module/annotations/js/edithintsi18n");i.extend(t,n);var r=t.prototype;return r._currentAnnotationPresentationModel=null,r._currentIndex=null,r.initDom=function(){return this.dContainer.classed("hidden",!0),this},r.startRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.subscribe("annotations/editHints/updated",this._handleEditHintsUpdated,this)},r.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.unsubscribeAll(this)},r.render=function(){this._currentAnnotationPresentationModel&&null!==this._currentIndex?this.dContainer.classed("hidden",!1).text(o.get(this._currentAnnotationPresentationModel.getType()+"_"+this._currentIndex)):this.dContainer.classed("hidden",!0).text("")},r._handleEditHintsUpdated=function(e){var t,n=!1;e!==this._currentAnnotationPresentationModel&&(this._currentAnnotationPresentationModel=e,n=!0),e&&(t=e.getIndexOfFirstUnsetAttribute())!==this._currentIndex&&(this._currentIndex=t,n=!0),n&&this.renderOnFrameEnd()},Object.seal(r),Object.seal(t)})),define("module/core/js/view/renderer/basemessageboxrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/core/js/view/model/commonuipresentationmodel","module/core/js/util/css","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/view/userinput/tapgesturerecogniser"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments),this._deferredHide=a.debounce(this._hide,this._timeout),this._eventPropagation=s.BLOCK_ALL}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/view/model/commonuipresentationmodel"),r=e("module/core/js/util/css"),s=e("module/core/js/view/userinput/eventpropagation"),a=e("module/core/js/util/functional"),l=e("module/core/js/view/userinput/hovergesturerecogniser"),u=e("module/core/js/view/userinput/tapgesturerecogniser");i.extend(t,n),t.MINIMUM_VERTICAL_OFFSET_PIXELS=10;var c=t.prototype;return t._cssClass=null,c._dTextContainer=null,c._dCloseButton=null,c._deferredHide=null,c._chartView=null,c._captureZone=null,c._zIndex=null,c._eventPropagation=null,c._tapGestureRecogniser=null,c._timeout=4e3,c.destroy=function(){this._hide(),t.superclass.destroy.call(this)},c.initDom=function(){return this.dContainer.classed("messageBox",!0),this.dContainer.classed("transparent",!0),this.dContainer.append("div").classed("icon",!0),this._dTextContainer=this.dContainer.append("div").classed("text",!0),this._dCloseButton=this.dContainer.append("div"),this._dCloseButton.classed("closeIcon",!0),this},c.startRedrawingBasedOnChangesInVisibleWindow=function(){this._chartView=this._subView.getChartView(),this._eventBus.subscribe("alertbox/rightmargin",this._updateRightMargin,this),this._presentationModel&&(this._presentationModel.on(o.COMMON_UI_CHANGED,this._updateCaptureZone,this),this._updateCaptureZone())},c.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.unsubscribeAll(this),this._presentationModel&&this._presentationModel.un(null,this)},c._createCaptureZone=function(){this._captureZone=this._captureZoneManager.create(this._eventPropagation,this._zIndex),this._tapGestureRecogniser=u.create().withHandler(this._hide,this),this._captureZone.addGestureRecogniser(this._tapGestureRecogniser).addGestureRecogniser(l.create().withStartHandler(this._handleMouseOver.bind(this)).withEndHandler(this._handleMouseOut.bind(this)))},c._handleMouseOver=function(){this._deferredHide.abort(),this.dContainer.classed("hover",!0)},c._handleMouseOut=function(){this.dContainer.classed("hover",!1),this._deferredHide()},c._updateCaptureZone=function(){this._captureZone&&this._captureZone.setDimensionsBasedOnElement(this.dContainer)},c._updateRightMargin=function(e){this.dContainer.style("right",e+"px")},c._show=function(e){this.dContainer.classed("transparent",!1),this._eventBus.subscribe("chart/view/dimensions/changed",this._updateCaptureZone,this),this._captureZone||this._createCaptureZone(),this._updateCaptureZone(),this._captureZone.withCursorOnHover(r.CURSOR_TYPE.POINTER,this.dContainer),e&&this._deferredHide()},c._hide=function(){this._deferredHide.abort(),this._eventBus.unsubscribe("chart/view/dimensions/changed",this._updateCaptureZone,this),this.dContainer.classed("transparent",!0),this._captureZone&&(this._captureZone.destroy(),this._captureZone=null)},Object.seal(c),Object.seal(t)})),define("module/annotations/js/view/renderer/undodeleteallannotationsrenderer",["require","module/core/js/view/renderer/basemessageboxrenderer","module/core/js/util/class","module/core/js/util/css","module/core/js/util/functional","module/annotations/js/i18n","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._zIndex=l.UNDO_DELETE_ALL_ACTION}var n=e("module/core/js/view/renderer/basemessageboxrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/util/css"),r=e("module/core/js/util/functional"),s=e("module/annotations/js/i18n"),a=e("module/core/js/view/userinput/tapgesturerecogniser"),l=e("module/core/js/enum/zindexenum");i.extend(t,n);var u=t.prototype;return u._dUndoLink=null,u._undoCaptureZone=null,u.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._eventBus.subscribe("annotations/undo/deleteAll/available",this._updateVisibility,this)},u.initDom=function(){return t.superclass.initDom.call(this),this.dContainer.classed("ok",!0),this._dTextContainer.append("span").text(s.get("UNDO_DELETE_ALL_INFO")),this._dUndoLink=this._dTextContainer.append("span").classed("link",!0).text(s.get("UNDO_DELETE_ALL_ACTION")),this},u.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.unsubscribe("annotations/undo/deleteAll/available",this._updateVisibility,this)},u._updateVisibility=function(e){e?this._show():this._hide()},u._createCaptureZone=function(){t.superclass._createCaptureZone.call(this),this._captureZone.withDefaultPadding(),this._undoCaptureZone=this._captureZoneManager.create(this._eventPropagation,this._zIndex),this._undoCaptureZone.withCursorOnHover(o.CURSOR_TYPE.POINTER,this.dContainer).addGesture(a,1,!0).withHandler(this._undo,this)},u._updateCaptureZone=function(){this._captureZone&&this._captureZone.setDimensionsBasedOnElement(this._dCloseButton),this._undoCaptureZone&&this._undoCaptureZone.setDimensionsBasedOnElement(this._dUndoLink)},u._hide=function(){t.superclass._hide.call(this),this._undoCaptureZone&&(this._undoCaptureZone.destroy(),this._undoCaptureZone=null)},u._undo=r.delegate("_eventBus","publish","annotations/undo/deleteAll"),Object.seal(u),Object.seal(t)})),define("module/annotations/js/config/subviewsconfig",["require","lodash","module/annotations/js/controller/annotationspresentationcontroller","module/annotations/js/view/model/annotationspresentationmodel","module/annotations/js/view/renderer/annotationsrenderer","module/annotations/js/controller/annotationstoolboxpresentationcontroller","module/annotations/js/view/model/annotationstoolboxpresentationmodel","module/annotations/js/view/renderer/annotationstoolboxrenderer","module/core/js/view/model/commonuiproperties","module/annotations/js/view/renderer/edithintsrenderer","module/annotations/js/view/renderer/undodeleteallannotationsrenderer"],(function(e){"use strict";var t=e("lodash"),n=e("module/annotations/js/controller/annotationspresentationcontroller"),i=e("module/annotations/js/view/model/annotationspresentationmodel"),o=e("module/annotations/js/view/renderer/annotationsrenderer"),r=e("module/annotations/js/controller/annotationstoolboxpresentationcontroller"),s=e("module/annotations/js/view/model/annotationstoolboxpresentationmodel"),a=e("module/annotations/js/view/renderer/annotationstoolboxrenderer"),l=e("module/core/js/view/model/commonuiproperties"),u=e("module/annotations/js/view/renderer/edithintsrenderer"),c=e("module/annotations/js/view/renderer/undodeleteallannotationsrenderer");return function(e,d){var h={htmloverlay:{renderers:{undoDeleteAllDrawings:{type:c,group:"body",presentationController:"commonUi",properties:{relativeWeighting:1}}}},prices:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},aroon:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},atr:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},awesome:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},chaikin:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},cci:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},dpo:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},dmi:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},kdj:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},macd:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},momentum:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},mfi:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},roc:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},rsi:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},stdev:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},stochastic:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},volume:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}},willr:{presentationControllers:{annotation:{type:n,presentationModel:{type:i}}},renderers:{annotations:{type:o,group:"studyOverlay",position:"studyOverlay",presentationController:"annotation",properties:{relativeWeighting:1}}}}};return e&&t.merge(h,{absoluteoverlay:{renderers:{editHintsRenderer:{type:u,group:"body",properties:{relativeWeighting:1}}}}}),d&&t.merge(h,{prices:{presentationControllers:{annotationsToolbox:{type:r,presentationModel:{type:s,properties:l}}},renderers:{annotationsToolboxRenderer:{type:a,group:"studyOverlay",position:"southWest",presentationController:"annotationsToolbox",properties:{marginBottom:4,marginLeft:5}}}}}),h}})),define("module/annotations/js/annotations",["require","module/annotations/js/model/annotationcollection","module/annotations/js/controller/annotationscontroller","module/annotations/js/annotationsevents","module/annotations/js/enum/annotationsmenuenum","module/annotations/js/model/layouts/annotationsmodule","module/annotations/js/config/subviewsconfig","module/core/js/model/layouts/annotationsvisibilitymodule","module/core/js/util/class","module/core/js/util/functional","module/annotations/js/model/layouts/globalannotationmodule","module/core/js/settings/settingsevents","module/core/js/event/subscribable","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,t,n,i,o,r){this._eventBus=e,this._subViewsConfigAggregator=i,this._settingsManager=o,this._settingsManager.on(h.LAYOUT_SETTINGS_CHANGED,this._handleSettingsLoaded,this),this._eventBus.subscribe("chart/resolution/changed",this._disableEditing,this),this._moduleLoader=n,this._editHintsAvailable=!!t.editHints,this._editMenu=t.editMenu,this._toolboxAvailable=!!t.toolbox}var n=e("module/annotations/js/model/annotationcollection"),i=e("module/annotations/js/controller/annotationscontroller"),o=e("module/annotations/js/annotationsevents"),r=e("module/annotations/js/enum/annotationsmenuenum"),s=e("module/annotations/js/model/layouts/annotationsmodule"),a=e("module/annotations/js/config/subviewsconfig"),l=e("module/core/js/model/layouts/annotationsvisibilitymodule"),u=e("module/core/js/util/class"),c=e("module/core/js/util/functional"),d=e("module/annotations/js/model/layouts/globalannotationmodule"),h=e("module/core/js/settings/settingsevents"),p=e("module/core/js/event/subscribable"),m=e("module/core/js/tracker/enum/schema");u.extend(t,p),t.UNDO_DELETE_ALL_ANNOTATIONS_TIMEOUT=1e4,t.settingsParsers=Object.freeze({global:{moduleName:d.SETTINGS_MODULE_NAME,parserClass:d},epic:{moduleName:s.SETTINGS_MODULE_NAME,parserClass:s},template:{moduleName:l.SETTINGS_MODULE_NAME,parserClass:l}});var f=t.prototype;return f._eventBus=null,f._controller=null,f._subViewsConfigAggregator=null,f._editHintsAvailable=!1,f._editMenu=null,f._settingsManager=null,f._annotationsVisible=null,f._moduleLoader=null,f._menuApi=null,f._themeSettingsMode=null,f._toolboxAvailable=!1,f._currentlyLockedAnnotation=null,f._annotationsCopy=null,f._undoDeleteAllTimer=null,f.lockAnnotation=function(e){this._currentlyLockedAnnotation!==e&&(this._currentlyLockedAnnotation=e,this.fire(o.LOCK_CHANGED,this._currentlyLockedAnnotation))},f.getCurrentlyLockedAnnotation=c.getter("_currentlyLockedAnnotation"),f.getAnnotationVisibility=c.getter("_annotationsVisible"),f.getAnnotationCollection=c.delegate("_controller","getAnnotationCollection"),f.areEditHintsAvailable=c.getter("_editHintsAvailable"),f.init=function(){this._eventBus.publish("subViews/config",["annotations",a(this._editHintsAvailable,this._toolboxAvailable)]),this._eventBus.subscribe("annotations/delete/all",this._deleteAllAnnotations,this),this._controller=i.create(this._eventBus,this._subViewsConfigAggregator,this._settingsManager),this._menuApi=this._moduleLoader.getModule("menuApi"),this._menuApi.createMenuContainer(r.MENU_CONTAINER_ID,{type:this._editMenu})},f.destroy=function(){this._disallowUndo(),this._eventBus.unsubscribeAll(this),this._eventBus.publish("subViews/removeConfig",["annotations"]),this._settingsManager.un(null,this),this._controller&&this._controller.destroy(),this._menuApi.destroyMenuContainer(r.MENU_CONTAINER_ID)},f._handleSettingsLoaded=function(){var e=this._settingsManager.getAnnotationVisibilitySettings(),t=void 0===e||e,n=this._settingsManager.getThemeSettingsMode();t===this._annotationsVisible&&n===this._themeSettingsMode||(this._annotationsVisible=t,this._themeSettingsMode=n,this.fire(o.ANNOTATIONS_CHANGED))},f._disableEditing=function(){this._menuApi.hideMenu(r.MENU_CONTAINER_ID)},f._deleteAllAnnotations=function(){this._allowUndo(),this.getAnnotationCollection().deleteAllAnnotations()},f._undo=function(){this.getAnnotationCollection().setAnnotations(this._annotationsCopy),this._disallowUndo(),this._eventBus.publish("tracker/chart",[{schema:m.ELEMENT_ACTION,elementId:"UNDO_DELETE_ALL_DRAWINGS",elementGroup:"UNDO",elementValue:"DELETE_ALL_DRAWINGS",elementType:"BUTTON",actionType:"PRESS"}])},f._allowUndo=function(){this._undoDeleteAllTimer=setTimeout(this._disallowUndo.bind(this),t.UNDO_DELETE_ALL_ANNOTATIONS_TIMEOUT),this._annotationsCopy=this.getAnnotationCollection().getAll().concat(),this._eventBus.subscribe("annotations/undo/deleteAll",this._undo,this),this.getAnnotationCollection().on(n.ANNOTATION_ADDED,this._disallowUndo,this),this._eventBus.publish("annotations/undo/deleteAll/available",[!0])},f._disallowUndo=function(){clearTimeout(this._undoDeleteAllTimer),this._annotationsCopy=null,this.getAnnotationCollection().un(n.ANNOTATION_ADDED,this),this._eventBus.unsubscribe("annotations/undo/deleteAll",this._undo,this),this._eventBus.publish("annotations/undo/deleteAll/available",[!1])},Object.seal(f),Object.seal(t)})),define("module/menu-common/js/actionlistener/callbackactionlistener",["require","module/menu-common/js/actionlistener/abstractactionlistener","module/core/js/util/class"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e),this._callback=n}var n=e("module/menu-common/js/actionlistener/abstractactionlistener");e("module/core/js/util/class").extend(t,n),t.create=function(e,n){return new t(e,n)};var i=t.prototype;return i.handleAction=function(e,t,n,i){this._callback.apply(null,arguments)},Object.seal(i),Object.seal(t)})),define("module/annotations/js/menu/editannotationactionlistener",["require","module/menu-common/js/actionlistener/abstractactionlistener","module/core/js/util/class","module/annotations/js/trackeractions"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e),n&&(this.actionOrigin=n)}var n=e("module/menu-common/js/actionlistener/abstractactionlistener"),i=e("module/core/js/util/class"),o=e("module/annotations/js/trackeractions");i.extend(t,n);var r=t.prototype;return r.actionOrigin=null,r.handleAction=function(e){this._eventBus.publish("tracker/chart",[o.UIAction(e.id,null,this.actionOrigin)]),this._eventBus.publish("annotations/"+e.id)},Object.seal(r),Object.seal(t)})),define("module/annotations/js/menu/mobiledeleteallannotationsactionlistener",["require","module/core/js/util/class","module/annotations/js/menu/editannotationactionlistener","module/annotations/js/trackeractions"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e,o.ACTION_ORIGINS.MAIN_MENU)}var n=e("module/core/js/util/class"),i=e("module/annotations/js/menu/editannotationactionlistener"),o=e("module/annotations/js/trackeractions");n.extend(t,i);var r=t.prototype;return r.handleAction=function(){t.superclass.handleAction.call(this,{id:"delete/all"}),this._eventBus.publish("menu/hide")},Object.seal(r),Object.seal(t)})),define("module/annotations/js/menu/annotationsmenu",["require","module/annotations/js/i18n","module/annotations/js/menu/annotationsselectionmenu","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/menu-common/js/controller/menucontroller","module/annotations/js/menu/mobiledeleteallannotationsactionlistener","module/core/js/settings/settingsevents"],(function(e){"use strict";function t(e,n,o,r){t.superclass.constructor.call(this,e,n,o,r),this._annotationsDisabledModel=t.createDisabledModel(this._settingsManager,this._eventBus),this._annotationsSelectionMenu=i.create(this._eventBus,this._settingsManager,this._containerProvider,r),this._updateModel()}var n=e("module/annotations/js/i18n"),i=e("module/annotations/js/menu/annotationsselectionmenu"),o=e("module/menu-common/js/actionlistener/callbackactionlistener"),r=e("module/core/js/util/class"),s=e("module/menu-common/js/controller/menucontroller"),a=e("module/annotations/js/menu/mobiledeleteallannotationsactionlistener"),l=e("module/core/js/settings/settingsevents");r.extend(t,s),t.create=function(e,n,i,o){return new t(e,n,i,o)},t.createDisabledModel=function(e,t){var i=e.putAnnotationVisibilitySettings.bind(e,!0),r=new o(t,i);return[{label:n.get("DISPLAY_DRAWINGS_TEXT"),actionListener:r,data:{id:"SHOW_DRAWINGS"}}]};var u=t.prototype;return u.id="annotations",u._annotationsDisabledModel=null,u._annotationsSelectionMenu=null,u.initDom=function(e,n,i){return t.superclass.initDom.call(this,e,n,i),this._annotationsSelectionMenu.initDom(e,n,i),this},u.hide=function(){t.superclass.hide.call(this),this._annotationsSelectionMenu.hide()},u.show=function(){t.superclass.show.call(this),this._settingsManager.getAnnotationVisibilitySettings()&&this._annotationsSelectionMenu.show()},u._whenViewIsReady=function(){this._settingsManager.on(l.LAYOUT_SETTINGS_CHANGED,this._onSettingsChanged,this),this._updateModel()},u._onSettingsChanged=function(){this._settingsManager.getAnnotationVisibilitySettings()&&this._view.isVisible()&&this._annotationsSelectionMenu.show(),this._updateModel()},u._updateModel=function(){this._settingsManager.getAnnotationVisibilitySettings()?this.withModel([{actionListener:new a(this._eventBus),label:n.get("DELETE_ALL_ANNOTATIONS"),data:{id:"delete/all"}}]):this.withModel(this._annotationsDisabledModel)},u.updateCaptureZoneSize=function(){this._annotationsSelectionMenu&&this._annotationsSelectionMenu.updateCaptureZoneSize(),t.superclass.updateCaptureZoneSize.call(this)},u.destroy=function(){this._annotationsSelectionMenu&&(this._annotationsSelectionMenu.destroy(),this._annotationsSelectionMenu=null),t.superclass.destroy.call(this)},u._destroyDom=function(){this._settingsManager.un(null,this),t.superclass._destroyDom.call(this)},Object.seal(u),Object.seal(t)})),define("module/annotations/js/menu/annotationsmenuview",["require","module/menu-mobile/js/controls/buttonbar","module/core/js/util/class","module/menu-mobile/js/view/menuview"],(function(e){"use strict";function t(e,i){t.superclass.constructor.call(this,e,i,{buttonBar:n,buttonBarStyles:"hidden container showAnnotations sub"})}var n=e("module/menu-mobile/js/controls/buttonbar"),i=e("module/core/js/util/class"),o=e("module/menu-mobile/js/view/menuview");return i.extend(t,o),t.create=function(e,n){return new t(e,n)},Object.seal(t.prototype),Object.seal(t)})),define("module/menu-mobile/js/view/bottommenuviewitem",["require","module/core/js/util/class","module/core/js/util/math","module/menu-mobile/js/view/menuviewitem","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.apply(this,arguments),this._xAxisHeight=i}var n=e("module/core/js/util/class"),i=e("module/core/js/util/math"),o=e("module/menu-mobile/js/view/menuviewitem"),r=e("module/core/js/util/object");n.extend(t,o);var s=t.prototype;return s._xAxisHeight=null,s.updateClientBox=function(){this._captureZone.setDimensionsBasedOnElement(this.getBoundingClientRect())},s.getBoundingClientRect=function(){var e=r.shallowClone(t.superclass.getBoundingClientRect.call(this));return i.isNumber(e.height)&&(e.height+=this._xAxisHeight),i.isNumber(e.bottom)&&(e.bottom+=this._xAxisHeight),e},Object.seal(t.prototype),Object.seal(t)})),define("module/menu-mobile/js/controls/scrollabletogglebuttonbar",["require","module/core/js/util/class","module/menu-mobile/js/controls/scrollablebuttonbar"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/menu-mobile/js/controls/scrollablebuttonbar");n.extend(t,i),t.create=function(e,n){return new t(e,n)};var o=t.prototype;return o.selectItem=function(e){this._menuViewItems.forEach((function(t){t.isSelected=e(t),t.render(this._dOptionsContainer)}),this)},o.deselectItem=o.selectItem,Object.seal(o),Object.seal(t)})),
define("module/menu-mobile/js/view/bottommenuview",["require","module/menu-mobile/js/view/bottommenuviewitem","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/menu-mobile/js/view/menuview","module/core/js/util/object","module/menu-mobile/js/controls/scrollabletogglebuttonbar"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/menu-mobile/js/view/bottommenuviewitem"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/math"),s=e("module/menu-mobile/js/view/menuview"),a=e("module/core/js/util/object"),l=e("module/menu-mobile/js/controls/scrollabletogglebuttonbar");i.extend(t,s),t.create=function(e,n){return new t(e,n)};var u=t.prototype;return u._xAxisHeight=null,u.withXAxisHeight=o.setter("_xAxisHeight"),u.panToSelection=o.delegate("_buttonBar","panToCurrentSelection"),u.updateCaptureZoneSize=function(){if(this._buttonBar){var e=a.shallowClone(this._buttonBar.getBoundingClientRect());r.isNumber(e.height)&&(e.height+=this._xAxisHeight),r.isNumber(e.bottom)&&(e.bottom+=this._xAxisHeight),this._buttonBar.withCaptureZoneSize(e)}t.superclass.updateCaptureZoneSize.call(this)},u.onDimensionsChanged=function(){t.superclass.onDimensionsChanged.call(this),this._realignItems()},u.show=function(){t.superclass.show.call(this),this._realignItems()},u._realignItems=function(){this._buttonBar.realignItems(63,.5)},u._createMenuViewItem=function(e){return new n(this._captureZoneManager,e,this._xAxisHeight)},u._createButtonBar=function(e,t){return new l(e,t)},u._createButtonBarStyles=o.returns("container mainMenu bottom smallerText root"),Object.seal(u),Object.seal(t)})),define("module/menu-common/js/controller/bottommenu",["require","module/core/js/util/array","module/menu-mobile/js/view/bottommenuview","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/core/js/util/functional","module/menu-common/js/controller/menucontroller","module/menu-common/js/menu/menuevents","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.call(this,e,n,i,o,a),this._properties=r,this._submenus=this._createSubMenus(s,n,i,o)}var n=e("module/core/js/util/array"),i=e("module/menu-mobile/js/view/bottommenuview"),o=e("module/menu-common/js/actionlistener/callbackactionlistener"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/menu-common/js/controller/menucontroller"),l=e("module/menu-common/js/menu/menuevents"),u=e("module/core/js/tracker/enum/schema");r.extend(t,a),t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)};var c=t.prototype;return c._submenus=null,c._properties=null,c._currentMenuOptionId=null,c._handleMenuChanged=s.bubbler(l.CHANGED),c.initDom=function(e,n,i){this._createModel(),s.objectInvoke(this._submenus,"initDom",e,n,i),t.superclass.initDom.call(this,e,n,i)},c.updateCaptureZoneSize=function(){this._view&&(this._view.updateCaptureZoneSize(),s.objectInvoke(this._submenus,"updateCaptureZoneSize"))},c.getMenuOptions=function(){var e=t.superclass.getMenuOptions.call(this);return e.forEach((function(e){e.items=this._submenus[e.data.id].getMenuOptions()}),this),e},c._createSubMenus=function(e,t,n,i){var o=Object.create(null);return e.forEach((function(e){var r=e.type,s=e.view,a=r.create(this._eventBus,t,n,i,this._properties,e.subMenus,this._taskManager);o[a.id]=a,o[a.id].visibleByDefault=e.visibleByDefault,o[a.id].isDefault=!!e.isDefault,o[a.id].viewClass=s,o[a.id].group=e.group||"default",e.isDefault&&!this._currentMenuOptionId&&(this._currentMenuOptionId=a.id),o[a.id].on(l.CHANGED,this._handleMenuChanged,this)}),this),o},c._createMenuView=function(e,t){return i.create(e,t).withXAxisHeight(this._properties.xAxisHeight)},c._whenViewIsReady=function(){this._selectMenuOption(this._currentMenuOptionId),this._eventBus.subscribe("menu/submenu/toggle",this._handleMenuToggle,this),this._eventBus.subscribe("menu/submenu/updatemodel",this._updateModel,this)},c._createModel=function(){var e=new o(null,this._onMenuSelection.bind(this)),t=Object.keys(this._submenus).map((function(t){return{isDefault:this._submenus[t].isDefault,visibleByDefault:this._submenus[t].visibleByDefault,label:this._submenus[t].getMenuTitle(),group:this._submenus[t].group,actionListener:e,data:{id:t}}}),this);this.withModel(t)},c._updateModel=function(e,t){if(t.hasOwnProperty("label")){var n=t.label;this._getSubmenuItem(e).label=n,this._view.updateViewItemLabel(e,n)}else t.hasOwnProperty("isSelected")&&(this._getSubmenuItem(e).isSelected=t.isSelected);this.fire(l.CHANGED)},c._onMenuSelection=s.empty,c._track=function(e,t){this._eventBus.publish("tracker/chart",[{schema:u.ELEMENT_ACTION,elementId:"MENU_"+e.replace("-","_").toUpperCase(),elementGroup:"MENU",elementValue:e.replace("-","_").toUpperCase(),elementType:"LAYER",actionType:t}])},c.onDimensionsChanged=function(){s.objectInvoke(this._submenus,"onDimensionsChanged"),this._view&&this._view.onDimensionsChanged()},c._getSubmenuItem=function(e){return n.find(this._model,(function(t){return t.data.id===e}))},c._selectMenuOption=function(e){var t;if(this._currentMenuOptionId=e,this._view.selectItem(e),null!==e)for(t in this._submenus)e===t?this._submenus[t].show():this._submenus[t].hide()},c.destroy=function(){s.objectInvoke(this._submenus,"destroy"),this._submenus=null,t.superclass.destroy.call(this)},c._destroyDom=function(){s.objectInvoke(this._submenus,"_destroyDom"),t.superclass._destroyDom.call(this)},c._handleMenuToggle=function(e){this._selectMenuOption(e),this._view&&this._view.panToSelection(!0)},c.withModel=function(e,n){if(t.superclass.withModel.call(this,e,n),this._currentMenuOptionId&&this._hiddenMenuItems[this._currentMenuOptionId]){var i=this._getDefaultSubmenuId(this._submenus);this._selectMenuOption(i)}return this},c._getDefaultSubmenuId=function(e){var t,n,i=Object.keys(e);for(n=0;n<i.length;n++)if(t=i[n],e[t].isDefault)return t;return null},Object.seal(c),Object.seal(t)})),define("module/menu-mobile/js/controller/mobilebottommenu",["require","module/core/js/util/class","module/menu-common/js/controller/bottommenu"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.call(this,e,n,i,o,r,s,a)}var n=e("module/core/js/util/class"),i=e("module/menu-common/js/controller/bottommenu");n.extend(t,i),t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)};var o=t.prototype;return o._onMenuSelection=function(e){this._currentMenuOptionId===e.id?(this._track(e.id,"HIDE"),this._eventBus.publish("menu/toggle")):(this._track(e.id,"SHOW"),this._selectMenuOption(e.id),this._eventBus.publish("statistics",["MENU_"+e.id.replace("-","_").toUpperCase()+"_SELECT",this._submenus[e.id].getActiveSubItems()]))},Object.seal(o),Object.seal(t)})),define("module/colour-customisation/js/model/layouts/migration",["require","lodash"],(function(e){"use strict";var t=e("lodash"),n={};return n.upgrade=function(e){return e=t.cloneDeep(e),e.default||(e={default:e,dark:{}}),n._traverseTrees(e)},n._upgrade=function(e){for(var i in e)n._isUpgradedAlready(e[i])||("string"==typeof e[i]?e[i]={colour:e[i],isVisible:!0}:n._isStrokeObject(e[i])?e[i].isVisible=!0:t.isObject(e[i])&&n._upgrade(e[i]))},n._traverseTrees=function(e){var t,i;for(t in e)if(n._upgrade(e[t].candlestick),n._upgrade(e[t].hloc),n._upgrade(e[t].line),n._upgrade(e[t].mountain),e[t].indicators)for(i in e[t].indicators)n._upgrade(e[t].indicators[i]);return e},n._isUpgradedAlready=function(e){return t.isObject(e)&&e.hasOwnProperty("isVisible")},n._isStrokeObject=function(e){return t.isObject(e)&&e.hasOwnProperty("width")&&e.hasOwnProperty("style")},Object.seal(n)})),define("module/colour-customisation/js/model/layouts/sanitisation",["require","lodash"],(function(e){"use strict";var t=e("lodash"),n={};return n.sanitise=function(e,i){return i=t.cloneDeep(i),n._deleteExtraProperties(e,i),i},n._deleteExtraProperties=function(e,i){t.forOwn(i,(function(o,r){t.hasIn(e,r)?t.isPlainObject(o)&&n._deleteExtraProperties(e[r],o):delete i[r]}))},Object.seal(n)})),define("module/colour-customisation/js/model/layouts/colourmodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class","module/colour-customisation/js/model/layouts/defaults","module/colour-customisation/js/model/layouts/migration","module/colour-customisation/js/model/layouts/sanitisation","module/core/js/util/object","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e){var n;for(n in e)if("boolean"==typeof e[n].modified){if(e[n].modified)return!0}else if(l.isLiteral(e[n])&&t(e[n]))return!0;return!1}function n(e,t,i){e=e||{},n.superclass.constructor.call(this,e,t,i)}var i=e("module/core/js/model/layouts/abstractlayoutmodule"),o=e("module/core/js/util/class"),r=e("module/colour-customisation/js/model/layouts/defaults"),s=e("module/colour-customisation/js/model/layouts/migration"),a=e("module/colour-customisation/js/model/layouts/sanitisation"),l=e("module/core/js/util/object"),u=e("module/core/js/tracker/enum/schema");o.extend(n,i),n.SETTINGS_MODULE_NAME="colourCustomisationModule";var c=n.prototype;return c.styles=null,c.fromJSON=function(e){try{e=s.upgrade(e)}catch(t){this._eventBus.publish("tracker/chart",[{schema:u.ERROR,id:"charts-colourmodule-migration-failed",message:'Failed to migrate JSON. Reason: "'+t.message+'". JSON: '+JSON.stringify(e).substring(0,1e3)}]),e={}}var t=r.generateDefaults();e=a.sanitise(t,e),this.styles=l.merge(t,e,!0)},c.isModified=function(){return t(this.styles)},c.toJSON=function(){return JSON.parse(JSON.stringify(this.styles))},Object.seal(c),Object.seal(n)})),define("module/colour-customisation/js/colour-customisation",["require","module/colour-customisation/js/model/layouts/colourmodule","module/colour-customisation/js/view/customisationstyler"],(function(e){"use strict";function t(e,t,n,i,o,r){this._eventBus=e,this._options=t,this._containerProvider=r,this._settingsManager=o}var n=e("module/colour-customisation/js/model/layouts/colourmodule"),i=e("module/colour-customisation/js/view/customisationstyler");t.settingsParsers=Object.freeze({template:{moduleName:n.SETTINGS_MODULE_NAME,parserClass:n}});var o=t.prototype;return o._containerProvider=null,o._eventBus=null,o._options=null,o._settingsManager=null,o._customisationStyler=null,o.init=function(){this._customisationStyler=new i(this._settingsManager,this._containerProvider)},o.destroy=function(){this._customisationStyler&&(this._customisationStyler.destroy(),this._customisationStyler=null)},Object.seal(o),Object.seal(t)})),define("module/core/js/model/layouts/currentpricelinevisibilitymodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule");e("module/core/js/util/class").extend(t,n),t.SETTINGS_MODULE_NAME="currentPriceLineVisibilityModule";var i=t.prototype;return i.isVisible=!0,i.fromJSON=function(e){this.isVisible=!!e.isVisible},i.toJSON=function(){return{isVisible:this.isVisible}},Object.seal(i),Object.seal(t)})),define("module/current-point/js/view/renderer/currentpointlinerenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisconstants","module/core/js/view/chartanimationconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/instrumentresolutionevents","module/core/js/util/interpolation","module/core/js/util/svg","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments),this._pointType=r,this._animationNamespace="currentPoint-"+this.name+"-"+this._pointType}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractrenderer"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/view/chartanimationconstants"),s=e("module/core/js/util/class"),a=e("module/core/js/util/functional"),l=e("module/core/js/model/instrumentresolutionevents"),u=e("module/core/js/util/interpolation"),c=e("module/core/js/util/svg"),d=e("module/core/js/view/visiblewindow");s.extend(t,i);var h=t.prototype;return h._pointType=null,h._animationNamespace=null,h._currentPoint=null,h._previousPrice=null,h._dTrailingLine=null,h.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.hasTrailingLine&&(this._instrumentResolution=this._instrumentModel.getActiveInstrumentResolution(),this._currentPoint=this._instrumentResolution.getCurrentDataPoint(this._pointType),this._instrumentResolution.on(l.CURRENT_DATA_POINT_CHANGED+"-"+this._pointType,this._handleNewPoint,this),this._visibleWindow.isReadyForRender()?this._handleReadyForRender():this._visibleWindow.on(d.READY_FOR_RENDER,this._handleReadyForRender,this,{once:!0}))},h._handleReadyForRender=function(){this._redraw(),this._move(),this._visibleWindow.on(d.MOVED,this._handleVisibleWindowMoved,this)},h.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._instrumentModel.un(null,this),this._visibleWindow.un(null,this),this._instrumentResolution&&this._instrumentResolution.un(null,this)},h._handleNewPoint=function(e){this._currentPoint=e,this.renderOnFrameEnd()},h._handleVisibleWindowMoved=function(e,t){e&o.RESIZED?this._redraw():t&(o.MOVED|o.RESIZED|o.ZOOMED)&&this._move()},h.initDom=function(){return this._presentationModel.hasTrailingLine&&(this._dTrailingLine=this.dContainer.append("svg:line").attr("class","trailing")),this},h.render=function(){if(this._currentPoint){var e=this._previousPrice;this._moveFrom(e),this._previousPrice=this._currentPoint.value}},h._moveFrom=function(e){var t=this._currentPoint.value;e&&t!==e?this._animateLine(e,t):this._move()},h._move=function(){var e=this._translateYFunction(),t=this._outOfBoundsFunction();this._animationPoller.killTasks(this._animationNamespace),this._dTrailingLine.attr("transform",e(this._currentPoint.value)),this._dTrailingLine.classed("hidden",t(this._currentPoint.value))},h._redraw=function(){this._dTrailingLine.attr("x1",0).attr("x2",this._visibleWindow.getXScale().range()[1]-this._presentationModel.rightPadding).attr("y1",0).attr("y2",0)},h._translateYFunction=function(){var e=this._visibleWindow.y;return function(t){return c.svgTranslateAttrY(Math.round(t?e(t):0))}},h._outOfBoundsFunction=function(){var e=this._visibleWindow.y,t=this._visibleWindow.height();return function(n){var i=n?e(n):-1;return i<0||i>t}},h._animateLine=function(e,t){var i=n.ease(r.ANIM_EASE),o=this._dTrailingLine,s=this._translateYFunction(),l=this._outOfBoundsFunction(),c=a.partialComplete(u.easedInterpolation,i,e,t);this._animationPoller.killTasks(this._animationNamespace),this._animationPoller.newFixedTimeTask(this._animationNamespace,(function(e){var t=c(e);o.attr("transform",s(t)),o.classed("hidden",l(t))}),r.ANIM_DURATION)},Object.seal(h),t})),define("module/current-point/js/config/linesubviewsconfig",["require","module/current-point/js/view/renderer/currentpointlinerenderer","module/core/js/util/object"],(function(e){"use strict";var t=e("module/current-point/js/view/renderer/currentpointlinerenderer"),n=e("module/core/js/util/object"),i={prices:{renderers:{currentPointLine:{type:t,group:"yTicks",position:"yTicks",pointType:"prices",presentationController:"currentPoint",properties:{relativeWeighting:1}}}}};return n.recursiveFreeze(i)})),define("module/current-point/js/currentpointpresentationcontroller",["require","module/core/js/view/abstractpresentationcontroller","module/core/js/util/class","module/core/js/util/functional"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e),this._eventBus.subscribe("currentpoint/visibility",this._changeVisibility,this),this._eventBus.subscribe("currentpoint/rightmargin",this._changeRightMargin,this)}var n=e("module/core/js/view/abstractpresentationcontroller"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional");i.extend(t,n);var r=t.prototype;return r.startListening=function(e){var t=this._moduleLoader.getModule("currentPoint");this._presentationModel.pointerWidth=t.getPointerWidth(),this._presentationModel.hasScaledWidth=t.getHasScaledWidth(),this._presentationModel.rightMargin=t.getRightMargin(),this._presentationModel.rightPadding=t.getRightPadding(),this._presentationModel.hasRoundedCorners=t.hasRoundedCorners(),this._presentationModel.hasTrailingLine=t.getHasTrailingLine()},r.destroy=function(){this._eventBus.unsubscribeAll(this)},r.stopListening=o.empty,r._changeVisibility=function(e){this._presentationModel.setVisibility(e)},r._changeRightMargin=function(e){this._presentationModel.rightMargin=e},Object.seal(r),Object.seal(t)})),define("module/current-point/js/currentpointpresentationmodel",["require","module/core/js/view/presentationmodel/abstractpresentationmodel","module/core/js/util/class","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/presentationmodel/abstractpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional");i.extend(t,n),t.VISIBILITY_CHANGED="VISIBILITY_CHANGED";var r=t.prototype;return r.pointerWidth=80,r.hasScaledWidth=!0,r.rightMargin=0,r.rightPadding=0,r.hasRoundedCorners=!0,r.hasTrailingLine=!1,r._isVisible=!0,r.getVisibility=o.getter("_isVisible"),r.setVisibility=o.observableSetter("_isVisible",t.VISIBILITY_CHANGED),r.destroy=o.empty,Object.seal(r),Object.seal(t)})),define("module/core/js/view/pricerendererhelper",["require","module/core/js/ext/d3","module/core/js/util/functional","module/core/js/util/math","module/core/js/view/valueformatter"],(function(e){"use strict";function t(){}var n=e("module/core/js/ext/d3"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/math"),r=e("module/core/js/view/valueformatter");t.ORDER_OF_MAGNITUDE_TO_SUFFIX={0:"",3:"K",6:"M",9:"B",12:"T"},t.RIGHT_PADDING=10,t.calculateOrderOfMagnitude=function(e){var t=o.logWithBase(10,Math.abs(e));return t<5?0:t<6?3:t<9?6:t<12?9:12};var s=t.prototype;return s._abbreviationOrder=0,s._scalingFactor=1,s._decimalPlaces=null,s.withDecimalPlaces=i.setter("_decimalPlaces"),s.withScalingFactor=i.setter("_scalingFactor"),s.updateSuffix=function(e,n){return this._abbreviationOrder=Math.max(t.calculateOrderOfMagnitude(e/this._scalingFactor),t.calculateOrderOfMagnitude(n/this._scalingFactor)),t.ORDER_OF_MAGNITUDE_TO_SUFFIX[this._abbreviationOrder]},s.render=function(e,i){var o=n.select(e),r=this.format(i);o.selectAll("*").remove(),o.append("svg:text").attr("dx",-1*t.RIGHT_PADDING).attr("dy",4).classed("label",!0).text(r)},s.format=function(e){var n=new r,i=e/Math.pow(10,this._abbreviationOrder);return n.scaleAndRoundPrice(i,this._scalingFactor,this._decimalPlaces)+t.ORDER_OF_MAGNITUDE_TO_SUFFIX[this._abbreviationOrder]},Object.seal(s),Object.seal(t)})),define("module/core/js/view/renderer/yaxisrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/array","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/css","module/core/js/view/userinput/directionalpangesturerecogniser","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/util/numberpairs","module/core/js/view/pricerendererhelper","module/core/js/util/svg","module/core/js/view/visiblewindow","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._captureZoneManager=o,this._priceRendererHelper=new h}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/array"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/util/class"),s=e("module/core/js/util/css"),a=e("module/core/js/view/userinput/directionalpangesturerecogniser"),l=e("module/core/js/view/userinput/eventpropagation"),u=e("module/core/js/util/functional"),c=e("module/core/js/view/userinput/hovergesturerecogniser"),d=e("module/core/js/util/numberpairs"),h=e("module/core/js/view/pricerendererhelper"),p=e("module/core/js/util/svg"),m=e("module/core/js/view/visiblewindow"),f=e("module/core/js/enum/zindexenum");r.extend(t,n),t.TEXT_MARGIN=5;var _=t.prototype;return _._draggingEnabled=!1,_._currentSuffix=null,_._fixedTicks=null,_._priceRendererHelper=null,_._captureZone=null,_.withFixedTicks=u.setter("_fixedTicks"),_.withDraggingEnabled=u.setter("_draggingEnabled"),_.initDom=function(){var e=this._presentationController;return this._draggingEnabled&&(this._captureZone=this._captureZoneManager.create(l.PROPAGATE_ALL,f.Y_AXIS),this._captureZone.addGesture(a,{handleHold:!0,plane:a.PLANES.VERTICAL,onGesture:e.dragAxis,context:e,onStart:e.dragAxisStart,startContext:e}),this._captureZone.addGesture(c,{onStart:s.setChartCursor.bind(s,this.dContainer,s.CURSOR_TYPE.NS_RESIZE),onGesture:s.setChartCursor.bind(s,this.dContainer,s.CURSOR_TYPE.NS_RESIZE),onEnd:s.setChartCursor.bind(s,this.dContainer,s.CURSOR_TYPE.DEFAULT)})),this},_.startRedrawingBasedOnChangesInVisibleWindow=function(){this._subView.instrumentScaling&&this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfoLoaded,this,{once:!0}),this._visibleWindow.on(m.MOVED,this._handleVisibleWindowMoved,this)},_.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._visibleWindow.un(null,this),this._eventBus.unsubscribeAll(this)},_.ticks=function(e){if(this._fixedTicks)return this._fixedTicks;var t=d.rangeExtent(e.range()),n=Math.floor(t/this._getSpaceBetweenTicks()),i=e.ticks(Math.max(1,n)),o=this._restrictedDomain(e),r=i.length;if(i.length){for(;r--&&i[r]>=o[0];)i.pop();for(;i.length&&i[0]<=o[1];)i.shift()}return i},_.render=function(){this._visibleWindow.y.domainSet&&(this._renderTicks(),this._updateCaptureZone())},_.destroy=function(){this._captureZone&&(this._captureZone.destroy(),this._captureZone=null),t.superclass.destroy.call(this)},_._updateCaptureZone=function(){this._draggingEnabled&&this._captureZone.setDimensions({x:this._subView.visibleWindow.width()-this._subView.getChartView().rightMargin,y:0,width:this._subView.getChartView().rightMargin,height:this._subView.visibleWindow.height()})},_._createNewTicks=function(e){var t=e.append("svg:g").attr("class",this._tickClass);this._redrawTickContents(t)},_._getSpaceBetweenTicks=function(){var e=this._visibleWindow.height(),t=-6829e-8*e*e+.13675*e+7.4295;return Math.max(t,12)},_._positionTicks=function(e,t){function n(e){return p.svgTranslateAttrY(Math.round(t(e)))}e.attr("transform",n)},_._redrawTickContents=function(e){e.eachElement(this._priceRendererHelper.render.bind(this._priceRendererHelper))},_._renderTicks=function(){var e=this._visibleWindow.y,t=i.unique(this.ticks(e)),n=Math.max.apply(null,t.concat([this._visibleWindow.greatestValueShown()])),o=Math.min.apply(null,t.concat([this._visibleWindow.leastValueShown()])),r=this.dContainer.selectAll(".tick").data(t,u.identity),s=this._priceRendererHelper.updateSuffix(o,n);r.exit().remove(),s!==this._currentSuffix&&this._redrawTickContents(r),this._createNewTicks(r.enter()),this._positionTicks(r,e),this._currentSuffix=s},_._restrictedDomain=function(e){var t=e.range();return[e.invert(t[0]+5),e.invert(t[1]-5)]},_._tickClass=function(e){var t=("value-"+e).replace(".","-"),n="tick "+t;return e<0&&(n+=" negative"),n},_._handleInstrumentInfoLoaded=function(e){this._priceRendererHelper.withScalingFactor(e.scalingFactor).withDecimalPlaces(e.decimalPlaces)},_._handleVisibleWindowMoved=function(e,t){(e&o.RESIZED||t)&&this.renderOnFrameEnd()},Object.seal(_),Object.seal(t)})),define("module/current-point/js/view/renderer/currentpointrenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractrenderer","module/core/js/view/chartanimationconstants","module/core/js/util/class","module/current-point/js/currentpointpresentationmodel","module/core/js/util/functional","module/core/js/model/instrumentresolutionevents","module/core/js/util/interpolation","module/core/js/util/numberpairs","module/core/js/view/pricerendererhelper","module/core/js/util/svg","module/core/js/view/visiblewindow","module/core/js/view/renderer/yaxisrenderer"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments),this._priceRendererHelper=new d,this._pointType=r,this._animationNamespace="currentPoint-"+this.name+"-"+this._pointType}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractrenderer"),o=e("module/core/js/view/chartanimationconstants"),r=e("module/core/js/util/class"),s=e("module/current-point/js/currentpointpresentationmodel"),a=e("module/core/js/util/functional"),l=e("module/core/js/model/instrumentresolutionevents"),u=e("module/core/js/util/interpolation"),c=e("module/core/js/util/numberpairs"),d=e("module/core/js/view/pricerendererhelper"),h=e("module/core/js/util/svg"),p=e("module/core/js/view/visiblewindow"),m=e("module/core/js/view/renderer/yaxisrenderer");r.extend(t,i),t.POINTER_MIN_POSITION=9.5;var f=t.prototype;return f._priceRendererHelper=null,f._pointType=null,f._animationNamespace=null,f._currentPoint=null,f._dPointer=null,f._dShape=null,f._dRect=null,f._dPrice=null,f._widthHasBeenSet=!1,f.startRedrawingBasedOnChangesInVisibleWindow=function(){this._instrumentResolution=this._instrumentModel.getActiveInstrumentResolution(),this._currentPoint=this._instrumentResolution.getCurrentDataPoint(this._pointType),this._presentationModel.on(s.VISIBILITY_CHANGED,this._handleVisibilityChanged.bind(this)),this._subView.instrumentScaling&&this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfoLoaded,this,{once:!0}),this._instrumentResolution.on(l.CURRENT_DATA_POINT_CHANGED+"-"+this._pointType,this._handleNewPoint,this),this._visibleWindow.on(p.MOVED,this._handleVisibleWindowMoved,this)},f.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._eventBus.unsubscribeAll(this),this._instrumentModel.un(null,this),this._instrumentResolution.un(null,this),this._visibleWindow.un(null,this)},f._handleInstrumentInfoLoaded=function(e){this._priceRendererHelper.withScalingFactor(e.scalingFactor).withDecimalPlaces(e.decimalPlaces)},f._handleNewPoint=function(e){this._currentPoint=e,this.renderOnFrameEnd()},f._handleVisibilityChanged=function(){this.dContainer&&this.dContainer.classed("hidden",!this._presentationModel.getVisibility())},f._handleVisibleWindowMoved=function(e,t){t&&this._move()},f.initDom=function(){var e=this._presentationModel.hasRoundedCorners?2:0;return this._dPointer=this.dContainer.append("svg:g").attr("transform",h.svgTranslateAttrY(-19)).data([null]),this._dShape=this._dPointer.append("svg:g"),this._dRect=this._dShape.append("svg:rect").attr("class","shape").attr("height",19).attr("y",-9.5).attr("rx",e).attr("ry",e),this._dPrice=this._dPointer.append("g").attr("dy","0.4em").attr("x",m.TEXT_MARGIN),this},f.render=function(){if(this._currentPoint){var e,t=this._currentPoint.value,n=this._dPointer.datum();this._dPointer=this._dPointer.data([t]),this._priceRendererHelper.render(this._dPrice.node(),t),this._widthHasBeenSet||(e=h.getBBox(this.dContainer.select("text").node()).width+d.RIGHT_PADDING,this._dRect.attr("width",e).attr("x",-e-this._presentationModel.rightPadding),this._widthHasBeenSet=!0),this._moveFrom(n)}},f._move=function(){this._animationPoller.killTasks(this._animationNamespace),this._dPointer.attr("transform",this._translateYFunction())},f._translateYFunction=function(){var e=this._visibleWindow.y,n=t.POINTER_MIN_POSITION,i=this._visibleWindow.height()-n,o=[n,i];return function(t){var n;return n=t?c.clampInRange(e(t),o):-38,h.svgTranslateAttrXY(-this._presentationModel.rightMargin,Math.round(n))}.bind(this)},f._moveFrom=function(e){var t=this._dPointer.datum();e&&t!==e?this._animatePointer(e,t):this._move()},f._animatePointer=function(e,t){var i=n.ease(o.ANIM_EASE),r=this._dPointer,s=this._translateYFunction(),l=a.partialComplete(u.easedInterpolation,i,e,t);this._animationPoller.killTasks(this._animationNamespace),this._animationPoller.newFixedTimeTask(this._animationNamespace,(function(e){r.attr("transform",s(l(e)))}),o.ANIM_DURATION)},Object.seal(f),t})),define("module/current-point/js/config/pointsubviewsconfig",["require","module/current-point/js/currentpointpresentationcontroller","module/current-point/js/currentpointpresentationmodel","module/current-point/js/view/renderer/currentpointrenderer","module/core/js/util/object"],(function(e){"use strict";var t=e("module/current-point/js/currentpointpresentationcontroller"),n=e("module/current-point/js/currentpointpresentationmodel"),i=e("module/current-point/js/view/renderer/currentpointrenderer"),o=e("module/core/js/util/object"),r={prices:{presentationControllers:{currentPoint:{type:t,presentationModel:{type:n}}},renderers:{currentPoint:{type:i,group:"yAxis",position:"yAxis",pointType:"prices",presentationController:"currentPoint",properties:{relativeWeighting:999}}}}};return o.recursiveFreeze(r)})),define("module/current-point/js/current-point",["require","module/core/js/model/layouts/currentpricelinevisibilitymodule","module/core/js/util/functional","module/current-point/js/config/linesubviewsconfig","module/current-point/js/config/pointsubviewsconfig","module/core/js/settings/settingsevents"],(function(e){"use strict";function t(e,t,n,i,o){this._eventBus=e,this._options=t,this._settingsManager=o}var n=e("module/core/js/model/layouts/currentpricelinevisibilitymodule"),i=e("module/core/js/util/functional"),o=e("module/current-point/js/config/linesubviewsconfig"),r=e("module/current-point/js/config/pointsubviewsconfig"),s=e("module/core/js/settings/settingsevents");t.settingsParsers=Object.freeze({template:{moduleName:n.SETTINGS_MODULE_NAME,parserClass:n}});var a=t.prototype;return a._eventBus=null,a._options=null,a._currentPointLineVisible=null,a._settingsManager=null,a.getPointerWidth=function(){return this._options.pointerWidth},a.getRightMargin=function(){return this._options.rightMargin||0},a.getRightPadding=function(){return isNaN(this._options.rightPadding)?4:this._options.rightPadding},a.getHasTrailingLine=function(){return this._options.trailingLine||!1},a.getHasScaledWidth=function(){return!this._options.hasOwnProperty("hasScaledWidth")||this._options.hasScaledWidth},a.hasRoundedCorners=function(){return!1!==this._options.roundedCorners},a.init=function(){this._currentPointLineVisible=!0,this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._eventBus.publish("subViews/config",["currentLine",o]),this._eventBus.publish("subViews/config",["currentPoint",r]),this._chartView&&(this._chartView.addRenderersBySubviewConfig(o),this._chartView.addRenderersBySubviewConfig(r)),this._settingsManager.on(s.LAYOUT_SETTINGS_CHANGED,this._handleSettingsLoaded,this),this._settingsManager.hasSettings()&&this._handleSettingsLoaded()},a.destroy=function(){this._eventBus.unsubscribeAll(this),this._settingsManager.un(null,this),this._eventBus.publish("subViews/removeConfig",["currentPoint"]),this._currentPointLineVisible&&this._eventBus.publish("subViews/removeConfig",["currentLine"]),this._chartView&&(this._chartView.removeRenderersBySubviewConfig(o),this._chartView.removeRenderersBySubviewConfig(r)),this._chartView=null,this._currentPointLineVisible=null},a._handleSettingsLoaded=function(){var e=this._settingsManager.getCurrentPriceLineVisibilitySettings(),t=void 0===e||e;t!==this._currentPointLineVisible&&(this._currentPointLineVisible=t,this._currentPointLineVisible?this._showCurrentPointLine():this._hideCurrentPointLine())},a._showCurrentPointLine=function(){this._eventBus.publish("subViews/config",["currentLine",o]),this._chartView&&this._chartView.addRenderersBySubviewConfig(o)},a._hideCurrentPointLine=function(){this._eventBus.publish("subViews/removeConfig",["currentLine"]),
this._chartView&&this._chartView.removeRenderersBySubviewConfig(o)},a._handleChartViewReady=i.setter("_chartView"),Object.seal(a),Object.seal(t)})),define("module/done-button/js/done-button",["require"],(function(e){"use strict";function t(e){this._eventBus=e}var n=t.prototype;return n._eventBus=null,n.init=function(){this._eventBus.publish("api/in/chart/toggleFeature/fullscreenButton",["fullscreenButton",!0]),this._eventBus.publish("api/in/chart/fullscreen",[!0])},n.destroy=function(){this._eventBus.publish("api/in/chart/toggleFeature/fullscreenButton",["fullscreenButton",!1])},Object.seal(t.prototype),Object.seal(t)})),define("module/annotations/js/menu/editannotationsmenuview",["require","module/core/js/util/class","module/menu-mobile/js/controls/scrollablebuttonbar","module/menu-mobile/js/view/menuview"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n,{buttonBarStyles:"editAnnotationMenu bottom root",buttonBar:i})}var n=e("module/core/js/util/class"),i=e("module/menu-mobile/js/controls/scrollablebuttonbar"),o=e("module/menu-mobile/js/view/menuview");n.extend(t,o),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return Object.seal(r),Object.seal(t)})),define("module/annotations/js/menu/editannotationsmenu",["require","module/core/js/util/class","module/annotations/js/menu/editannotationactionlistener","module/annotations/js/menu/editannotationsmenuview","module/core/js/enum/hotkeyenum","module/annotations/js/i18n","module/menu-common/js/controller/menucontroller","module/annotations/js/trackeractions"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i),this.withModel(this._createModel())}var n=e("module/core/js/util/class"),i=e("module/annotations/js/menu/editannotationactionlistener"),o=e("module/annotations/js/menu/editannotationsmenuview"),r=e("module/core/js/enum/hotkeyenum"),s=e("module/annotations/js/i18n"),a=e("module/menu-common/js/controller/menucontroller"),l=e("module/annotations/js/trackeractions");n.extend(t,a),t.create=function(e,n,i){return new t(e,n,i)};var u=t.prototype;return u._menuApi=null,u._createModel=function(){var e=new i(this._eventBus,l.ACTION_ORIGINS.EDIT_ANNOTATION);return[{group:1,isSelect:!1,actionListener:e,label:s.get("ANNOTATION_CUSTOMISE"),shortcut:r.keyName(r.E),data:{id:"customise"}},{group:1,isSelect:!1,actionListener:e,label:s.get("COPY_ANNOTATION"),shortcut:r.keyName(r.D),data:{id:"copy"}},{group:1,isSelect:!1,actionListener:e,label:s.get("DELETE_ANNOTATION"),shortcut:r.keyName(r.DELETE),data:{id:"delete"}}]},u._createMenuView=function(e,t){return o.create(e,t)},Object.seal(u),Object.seal(t)})),define("module/fullscreen-button/js/view/fullscreenbuttonrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/component/button","module/core/js/util/class","module/core/js/view/model/commonuipresentationmodel","module/core/js/tracker/enum/schema","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/component/button"),o=e("module/core/js/util/class"),r=e("module/core/js/view/model/commonuipresentationmodel"),s=e("module/core/js/tracker/enum/schema"),a=e("module/core/js/enum/zindexenum");o.extend(t,n);var l=t.prototype;return l._fullscreenButton=null,l._isFullscreen=!1,l._requestedChange=!1,l.initDom=function(){return this._fullscreenButton=i.create(),this._fullscreenButton.initDom(this.dContainer),this._setFullscreenState(this._isFullscreen),this},l.startRedrawingBasedOnChangesInVisibleWindow=function(){var e=this.dContainer.select(".buttonContainer").node().getBoundingClientRect(),t=this._captureZoneManager.getOffset();this._eventBus.subscribe("fullscreen/changed",this._setFullscreenState,this),this._fullscreenButton.setCoordinates({x:0,y:0,height:e.bottom-t.top,width:e.right-t.left}),this._fullscreenButton.startListening(this._captureZoneManager,this._toggleFullscreen.bind(this),a.MENU_TOOLS_BUTTON),this._presentationModel&&(this._presentationModel.on(r.COMMON_UI_CHANGED,this._updateCaptureZone,this),this._updateCaptureZone())},l.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel&&this._presentationModel.un(null,this),this._fullscreenButton.stopListening(),this._eventBus.unsubscribeAll(this),this._subView.getChartView().un(null,this)},l.destroy=function(){t.superclass.destroy.call(this),this._fullscreenButton&&(this._fullscreenButton.destroy(),this._fullscreenButton=null)},l._setFullscreenState=function(e){this._isFullscreen=e,this._requestedChange=!1,this.dContainer.classed("shrink",e).classed("expand",!e)},l._toggleFullscreen=function(){this._requestedChange?this._trackFullScreenButton(!0):(this._requestedChange=!0,this._eventBus.publish("api/out/chart/fullscreen",[!this._isFullscreen]),!0===this._isFullscreen&&this._eventBus.publish("api/out/chart/done"),this._trackFullScreenButton(!1))},l._trackFullScreenButton=function(e){this._eventBus.publish("tracker/chart",[{schema:s.ELEMENT_ACTION,elementId:"NAVIGATION_"+(this._isFullscreen?"BACK":"FULL_SCREEN"),elementGroup:"NAVIGATION",elementValue:(this._isFullscreen?"BACK":"FULL_SCREEN")+(e?"_REPEAT":""),elementType:"BUTTON",actionType:"PRESS"}])},l._updateCaptureZone=function(){this._fullscreenButton.updateCaptureZone()},Object.seal(l),Object.seal(t)})),define("module/fullscreen-button/js/config/subviewsconfig",["require","module/fullscreen-button/js/view/fullscreenbuttonrenderer","module/core/js/util/object"],(function(e){"use strict";var t=e("module/fullscreen-button/js/view/fullscreenbuttonrenderer"),n=e("module/core/js/util/object"),i={absoluteoverlay:{renderers:{fullscreenButton:{type:t,group:"fullscreenButton",presentationController:"commonUi",properties:{relativeWeighting:2}}}}};return n.recursiveFreeze(i)})),define("module/fullscreen-button/js/fullscreen-button",["require","module/fullscreen-button/js/config/subviewsconfig","module/core/js/util/functional"],(function(e){"use strict";function t(e){this._eventBus=e}var n=e("module/fullscreen-button/js/config/subviewsconfig"),i=e("module/core/js/util/functional"),o=t.prototype;return o._chartView=null,o._eventBus=null,o._isFullscreen=null,o._requestedChange=!1,o.init=function(){this._eventBus.subscribe("api/in/chart/fullscreen",this._publishState,this),this._eventBus.subscribe("api/out/chart/fullscreen",this._handleOutgoingApi,this),this._publishState(this._isFullscreen||!1),this._eventBus.publish("subViews/config",["fullscreenButton",n]),this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._eventBus.subscribe("chart/view/dimensions/changed",i.debounce(this._handleDimensionsChanged,50),this),this._chartView&&this._chartView.addRenderersBySubviewConfig(n)},o.destroy=function(){this._eventBus.unsubscribeAll(this),this._eventBus.publish("subViews/removeConfig",["fullscreenButton"]),this._chartView&&this._chartView.removeRenderersBySubviewConfig(n)},o._publishState=function(e){this._isFullscreen=e,this._requestedChange=!1,this._eventBus.publish("fullscreen/changed",[e],{retrospective:!0})},o._handleChartViewReady=function(e){this._chartView=e},o._handleDimensionsChanged=function(){this._requestedChange&&this._publishState(this._isFullscreen)},o._handleOutgoingApi=function(e){this._isFullscreen===e?this._publishState(e):(this._requestedChange=!0,this._isFullscreen=e)},Object.seal(o),Object.seal(t)})),define("module/highlowstats/js/enum/highlowstatsenum",[],(function(){"use strict";return Object.freeze({DAILY_STATS_UPDATED:"dailyStatsUpdated",DAILY_STATS_HIDDEN:"dailyStatsHidden",SHOW_STATS:"showStats",HIDE_STATS:"hideStats",VISIBILTY_CHANGED:"visiblityChanged",VISIBLE_RANGE_STATS_UPDATED:"visibleRangeStatsUpdated",VISIBLE_RANGE_STATS_HIDDEN:"visibleRangeStatsHidden",VISIBILITY_CHANGED:"visibilityChanged"})})),define("module/core/js/model/layouts/highlowstatsvisibilitymodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule");e("module/core/js/util/class").extend(t,n),t.SETTINGS_MODULE_NAME="highLowStatsVisibilityModule";var i=t.prototype;return i.isVisible=!0,i.fromJSON=function(e){this.isVisible=!!e.isVisible},i.toJSON=function(){return{isVisible:this.isVisible}},Object.seal(i),Object.seal(t)})),define("module/highlowstats/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"Heute",high:"H ",low:"T ",percentage:"%"},en:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"Today",high:"H ",low:"L ",percentage:"%"},en_US:{"date-format-finer":"ddd MMM D YYYY H:mm:ss","date-format-fine":"ddd MMM D YYYY H:mm","date-format-coarse":"ddd MMM D YYYY","date-format-coarser":"MMM YYYY"},es:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"Hoy",high:"Máx ",low:"Mín ",percentage:"%"},fr:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"Aujourd'hui ",high:"H ",low:"B ",percentage:"%"},it:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"Oggi",high:"H ",low:"T ",percentage:"%"},ja:{"date-format-finer":"ddd YYYY MMM D H:mm:ss","date-format-fine":"ddd YYYY MMM D H:mm","date-format-coarse":"ddd YYYY MMM D","date-format-coarser":"YYYY MMM",today:"本日",high:"高値 ",low:"安値 ",percentage:"%"},nl:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"Vandaag",high:"H ",low:"T ",percentage:"%"},no:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"I dag",high:"H ",low:"T ",percentage:"%"},pt:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"Hoje",high:"A ",low:"B ",percentage:"%"},sv:{"date-format-finer":"ddd YYYY MMM D H:mm:ss","date-format-fine":"ddd YYYY MMM D H:mm","date-format-coarse":"ddd YYYY MMM D","date-format-coarser":"YYYY MMM",today:"Idag",high:"H ",low:"T ",percentage:"%"},zh:{"date-format-finer":"ddd YYYY MMM D H:mm:ss","date-format-fine":"ddd YYYY MMM D H:mm","date-format-coarse":"ddd YYYY MMM D","date-format-coarser":"YYYY MMM",today:"今日",high:"高 ",low:"低 ",percentage:"%"},zh_TW:{"date-format-finer":"ddd D MMM YYYY H:mm:ss","date-format-fine":"ddd D MMM YYYY H:mm","date-format-coarse":"ddd D MMM YYYY","date-format-coarser":"MMM YYYY",today:"今日",high:"最高價 ",low:"最低價 ",percentage:"百分比"}})})),define("module/highlowstats/js/view/renderer/abstractstatsrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/view/model/commonuipresentationmodel","module/core/js/util/functional","module/highlowstats/js/i18n","module/core/js/util/math","module/core/js/util/oop","module/core/js/util/svg","module/core/js/view/valueformatter","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._formatterPercentage=(new d).withDecimalPlaces(p),this._formatterPoint=new d,this._dimensions=Object.seal({textSpacing:0,marginBottom:0,marginLeft:0,horizontalPadding:2,verticalPadding:1}),this._layoutStats=s.throttledDeferred(this._layoutStats)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/view/model/commonuipresentationmodel"),s=e("module/core/js/util/functional"),a=e("module/highlowstats/js/i18n"),l=e("module/core/js/util/math"),u=e("module/core/js/util/oop"),c=e("module/core/js/util/svg"),d=e("module/core/js/view/valueformatter"),h=e("module/core/js/view/visiblewindow"),p=2;o.extend(t,n);var m=t.prototype;return m._dimensions=null,m._dBackground=null,m._dLabelHigh=null,m._dLabelLow=null,m._dLabelNetChange=null,m._dLabelPercentChange=null,m._dLabelTitle=null,m._dText=null,m._formatterPercentage=null,m._formatterPoint=null,m.withMarginBottom=s.setter("_dimensions.marginBottom"),m.withMarginLeft=s.setter("_dimensions.marginLeft"),m.withTextSpacing=s.setter("_dimensions.textSpacing"),m.render=function(){this._areStatsVisible()?(this._dText||this._showStats(),this._updateStats(this._getStats())):this._dText&&this._hideStats()},m.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfoLoaded,this),this._visibleWindow.on(h.MOVED,this._handleVisibleWindowMoved,this),this._presentationModel.on(r.COMMON_UI_CHANGED,this.render,this)},m.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._visibleWindow.un(null,this),this._eventBus.unsubscribeAll(this),t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this)},m.destroy=function(){this._hideStats(),t.superclass.destroy.call(this)},m._areStatsVisible=u.abstractMethod,m._getStats=u.abstractMethod,m._getStatsLabel=u.abstractMethod,m._getOffsets=u.abstractMethod,m._showStats=function(){this._dBackground=this.dContainer.append("rect").classed("labelBackground",!0),this._dText=this.dContainer.append("g").classed("label",!0),this._dLabelHigh=this._dText.append("text").classed("high",!0).classed("hidden",!0),this._dLabelLow=this._dText.append("text").classed("low",!0).classed("hidden",!0),this._dLabelNetChange=this._dText.append("text").classed("netChange",!0).classed("hidden",!0),this._dLabelPercentChange=this._dText.append("text").classed("percentChange",!0).classed("hidden",!0),this._dLabelTitle=this._dText.append("text").classed("title",!0)},m._updateStats=function(e){var t;t=e.high,l.isNumber(t)?this._dLabelHigh.classed("hidden",!1).text(a.get("high")+this._formatterPoint.scaleAndRoundPrice(t)):this._dLabelHigh.classed("hidden",!0),t=e.low,l.isNumber(t)?this._dLabelLow.classed("hidden",!1).text(a.get("low")+this._formatterPoint.scaleAndRoundPrice(t)):this._dLabelLow.classed("hidden",!0),t=e.netChange,l.isNumber(t)?this._dLabelNetChange.classed("hidden",!1).classed("increase",t>=0).classed("decrease",t<0).text(this._formatterPoint.scaleAndRoundPrice(t)):this._dLabelNetChange.classed("hidden",!0),t=e.percentChange,l.isNumber(t)?this._dLabelPercentChange.classed("hidden",!1).classed("increase",t>=0).classed("decrease",t<0).text(this._formatterPercentage.scaleAndRoundPrice(t)+a.get("percentage")):this._dLabelPercentChange.classed("hidden",!0),this._dLabelTitle.text(this._getStatsLabel()),this._layoutStats()},m._layoutStats=function(){var e,t,n=this._presentationModel.getStatsTranslations(),i=[],o=[this._dLabelNetChange,this._dLabelPercentChange,this._dLabelHigh,this._dLabelLow,this._dLabelTitle],r=0;for(t=0;t<o.length;t++)o[t].classed("hidden")?i.push(0):(r=Math.max(r,n[t]||0),i.push(r),e=o[t].attr("transform",c.svgTranslateAttrX(r)).node(),r+=c.getBBox(e).width+this._dimensions.textSpacing);this._presentationModel.addStatsTranslations(this.name,i),this._positionContainer(this._getOffsets())},m._positionContainer=function(e){this.dContainer.attr("transform",c.svgTranslateAttrXY(e.xOffset+this._dimensions.marginLeft,e.yOffset-this._dimensions.marginBottom+this._subView.dimensions.height)),this._updateBackground()},m._updateBackground=function(){var e=c.getBBox(this._dText.node());this._dBackground.attr({x:e.x-this._dimensions.horizontalPadding,y:e.y-this._dimensions.verticalPadding,width:e.width+2*this._dimensions.horizontalPadding,height:e.height+2*this._dimensions.verticalPadding})},m._hideStats=function(){this._layoutStats.abort(),this.dContainer&&this.dContainer.selectAll("*").remove(),delete this._dBackground,delete this._dText,delete this._dLabelHigh,delete this._dLabelLow,delete this._dLabelNetChange,delete this._dLabelPercentChange,delete this._dLabelTitle},m._handleVisibleWindowMoved=function(e,t){t&i.RESIZED&&this._areStatsVisible()&&this._layoutStats()},m._handleInstrumentInfoLoaded=function(e){this._formatterPoint.withScalingFactor(e.scalingFactor).withDecimalPlaces(e.decimalPlaces)},Object.seal(m),Object.seal(t)})),define("module/highlowstats/js/view/renderer/daystatsrenderer",["require","module/highlowstats/js/view/renderer/abstractstatsrenderer","module/core/js/util/class","module/core/js/util/functional","module/highlowstats/js/enum/highlowstatsenum","module/highlowstats/js/i18n"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/highlowstats/js/view/renderer/abstractstatsrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/highlowstats/js/enum/highlowstatsenum"),s=e("module/highlowstats/js/i18n");i.extend(t,n);var a=t.prototype;return a.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._presentationModel.on(r.DAILY_STATS_UPDATED,this.renderOnFrameEnd,this),this._presentationModel.on(r.DAILY_STATS_HIDDEN,this.renderOnFrameEnd,this)},a._areStatsVisible=o.delegate("_presentationModel","areDailyStatsVisible"),a._getStats=o.delegate("_presentationModel","getDailyStats"),a._getOffsets=function(){return this._presentationModel.getOffsetsForComponent("daystats")},a._getStatsLabel=function(){return s.get("today")},Object.seal(a),Object.seal(t)})),define("module/highlowstats/js/model/stats",["require","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=t.prototype;return i.high=null,i.low=null,i.netChange=null,i.percentChange=null,i.withHigh=n.setter("high"),i.withLow=n.setter("low"),i.withNet=n.setter("netChange"),i.withPercent=n.setter("percentChange"),i.hasValidData=function(){return null!==this.high||null!==this.low||null!==this.netChange||null!==this.percentChange},Object.seal(i),Object.seal(t)})),define("module/highlowstats/js/view/model/highlowpresenter",["require","module/core/js/util/array","module/core/js/view/axisconstants","module/core/js/model/blocks","module/core/js/util/class","module/core/js/view/model/commonuipresentationcontroller","module/core/js/util/functional","module/highlowstats/js/enum/highlowstatsenum","module/highlowstats/js/model/stats","module/core/js/model/visibledaterangeevents"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e),this._calculateVisibleRangeStats=a.throttle(this._calculateVisibleRangeStats,200)}var n=e("module/core/js/util/array"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/model/blocks"),r=e("module/core/js/util/class"),s=e("module/core/js/view/model/commonuipresentationcontroller"),a=e("module/core/js/util/functional"),l=e("module/highlowstats/js/enum/highlowstatsenum"),u=e("module/highlowstats/js/model/stats"),c=e("module/core/js/model/visibledaterangeevents"),d=o.getPointTypeAccessor("prices");r.extend(t,s);var h=t.prototype;return h.startListening=function(e){var n=this._moduleLoader.getModule("highLowStats");t.superclass.startListening.call(this,e),this._eventBus.subscribe("chart/instrument/destroy",this._clearStats,this),n.on(l.VISIBILITY_CHANGED,this._handleVisibilityChange,this),n.on(l.DAILY_STATS_UPDATED,a.delegate("_presentationModel","setDailyStats"),this),this._visibleWindow.visibleDateRange.on(c.VISIBLE_BLOCKS_POINTS_ADDED+"-prices",this._calculateVisibleRangeStats,this),this._handleVisibilityChange(this._settingsManager.getHighLowStatsVisibilitySettings()),this._calculateVisibleRangeStats()},h.stopListening=function(){this._clearStats(),this._visibleWindow&&this._visibleWindow.visibleDateRange.un(null,this),this._moduleLoader.getModule("highLowStats").un(null,this),this._calculateVisibleRangeStats.abort(),t.superclass.stopListening.call(this)},h._handleVisibleWindowMoved=function(e,n){t.superclass._handleVisibleWindowMoved.call(this,e,n),e&(i.MOVED|i.ZOOMED|i.INITIALISED)&&this._calculateVisibleRangeStats()},h._handleVisibilityChange=function(e){e||this._calculateVisibleRangeStats.abort(),this._presentationModel.setVisibility(e)},h._calculateVisibleRangeStats=function(){var e,t,i,o,r=this._visibleWindow.visibleDateRange,s=n.flatten(r.getVisibleBlocks().map(d)).filter((function(e){return e.accTime>=r.accStart()&&e.accTime<=r.accEnd()})),a=[],l=[];s.length&&(s.forEach((function(e){e.highPrice&&a.push(e.highPrice),e.lowPrice&&l.push(e.lowPrice)})),t=s[0].openPrice||s[0].value,i=s[s.length-1].closePrice||s[s.length-1].value,o=i-t,e=(new u).withHigh(Math.max.apply(Math,a)).withLow(Math.min.apply(Math,l)).withNet(o).withPercent(o/t*100),this._presentationModel.setVisibleRangeStats(e))},h._clearStats=function(){this._calculateVisibleRangeStats.abort(),this._presentationModel.setDailyStats(null),this._presentationModel.setVisibleRangeStats(null)},Object.seal(h),Object.seal(t)})),define("module/highlowstats/js/view/model/highlowpresentationmodel",["require","module/core/js/util/class","module/core/js/view/model/commonuipresentationmodel","module/highlowstats/js/enum/highlowstatsenum"],(function(e){"use strict";function t(){t.superclass.constructor.call(this),this._statsTranslations=Object.create(null)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/model/commonuipresentationmodel"),o=e("module/highlowstats/js/enum/highlowstatsenum");n.extend(t,i);var r=t.prototype;return r._dailyStats=null,r._visibleRangeStats=null,r._visibility=!1,r._statsTranslations=null,r.areDailyStatsVisible=function(){return!(!this._visibility||!this.getDailyStats())},r.areVisibleRangeStatsVisible=function(){return!(!this._visibility||!this.getVisibleRangeStats())},r.getDailyStats=function(){var e=this._dailyStats;return e&&e.hasValidData()?e:null},r.getVisibleRangeStats=function(){var e=this._visibleRangeStats;return e&&e.hasValidData()?e:null},r.setVisibility=function(e){return e!==this._visibility&&(this._visibility=!!e,this.getDailyStats()&&this.fire(o[e?"DAILY_STATS_UPDATED":"DAILY_STATS_HIDDEN"]),this.getVisibleRangeStats()&&this.fire(o[e?"VISIBLE_RANGE_STATS_UPDATED":"VISIBLE_RANGE_STATS_HIDDEN"])),this},r.setDailyStats=function(e){var t,n=this.getDailyStats();return this._dailyStats=e,t=this.getDailyStats(),this._visibility&&(n||t)&&this.fire(o[t?"DAILY_STATS_UPDATED":"DAILY_STATS_HIDDEN"]),this},r.setVisibleRangeStats=function(e){var t,n=this.getVisibleRangeStats();return e!==this._visibleRangeStats&&(this._visibleRangeStats=e,t=this.getVisibleRangeStats(),this._visibility&&(n||t)&&this.fire(o[t?"VISIBLE_RANGE_STATS_UPDATED":"VISIBLE_RANGE_STATS_HIDDEN"])),this},r.getStatsTranslations=function(){var e,t,n,i,o=this._statsTranslations,r=Object.keys(o),s=[];if(r.length)for(n=o[r[0]].length,e=0;e<n;e++){for(i=0,t=0;t<r.length;t++)i=Math.max(i,o[r[t]][e]||0);s[e]=i}else s=[];return s},r.addStatsTranslations=function(e,t){var n=this.getStatsTranslations().join(",");this._statsTranslations[e]=t,this.getStatsTranslations().join(",")!==n&&this._notifyOfLayoutChange()},r.destroy=function(){delete this._dailyStats,delete this._visibleRangeStats,delete this._visibility,t.superclass.destroy.call(this)},Object.seal(r),Object.seal(t)})),define("module/highlowstats/js/view/renderer/visiblerangestatsrenderer",["require","moment","module/highlowstats/js/view/renderer/abstractstatsrenderer","module/core/js/util/class","module/core/js/util/functional","module/highlowstats/js/enum/highlowstatsenum","module/highlowstats/js/i18n","module/core/js/model/resolutionsenum","module/core/js/util/svg","module/core/js/util/timeconstants"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._timeFormats={},this._timeFormats[c.Enum.MONTH]=a.get("date-format-coarser"),this._timeFormats[c.Enum.WEEK]=a.get("date-format-coarse"),this._timeFormats[c.Enum.DAY]=a.get("date-format-coarse"),this._timeFormats[c.Enum.HOUR]=a.get("date-format-fine"),this._timeFormats[c.Enum.MINUTE]=a.get("date-format-fine"),this._timeFormats[c.Enum.SECOND]=a.get("date-format-finer"),this._timeFormats[c.Enum.TICK]=a.get("date-format-finer")}var n=e("moment"),i=e("module/highlowstats/js/view/renderer/abstractstatsrenderer"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/highlowstats/js/enum/highlowstatsenum"),a=e("module/highlowstats/js/i18n"),l=e("module/core/js/model/resolutionsenum"),u=e("module/core/js/util/svg"),c=e("module/core/js/util/timeconstants");o.extend(t,i);var d=t.prototype;return d._timeFormats=null,d._userTimeZone=null,d.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._eventBus.subscribe("chart/resolution/info",this._handleTimezoneData,this),this._presentationModel.on(s.VISIBLE_RANGE_STATS_UPDATED,this.renderOnFrameEnd,this),this._presentationModel.on(s.VISIBLE_RANGE_STATS_HIDDEN,this.renderOnFrameEnd,this)},d._areStatsVisible=r.delegate("_presentationModel","areVisibleRangeStatsVisible"),d._getStats=r.delegate("_presentationModel","getVisibleRangeStats"),d._getOffsets=function(){return this._presentationModel.getOffsetsForComponent("visiblestats")},d._getStatsLabel=function(){var e=this._instrumentModel.getActiveResolution(),t=e.getPeriodIterator(),n=this._visibleWindow.visibleDateRange.startDate(),i=this._visibleWindow.visibleDateRange.endDate(),o=n,r=i;return e!==l.values.TICK&&(o=t.next(n),r=t.previous(i)),this._formatDate(o,e)+" - "+this._formatDate(r,e)},d._formatDate=function(e,t){return this._userTimeZone?n(e).tz(this._userTimeZone).format(this._timeFormats[t.periodUnit]):""},d._layoutStats=function(){t.superclass._layoutStats.call(this);var e=this._presentationModel.getStatsLineWrapOffset();e>0&&(this._dLabelTitle.attr("transform",u.svgTranslateAttrY(e)),this._updateBackground())},d._handleTimezoneData=function(e){this._userTimeZone=e.getUserTimeZone()},Object.seal(d),Object.seal(t)})),define("module/highlowstats/js/config/subviewsconfig",["require","module/core/js/view/model/commonuiproperties","module/highlowstats/js/view/renderer/daystatsrenderer","module/highlowstats/js/view/model/highlowpresenter","module/highlowstats/js/view/model/highlowpresentationmodel","module/highlowstats/js/view/renderer/visiblerangestatsrenderer"],(function(e){"use strict";function t(e){var t={prices:{presentationControllers:{highLowPresenter:{type:o,presentationModel:{type:r,properties:n}}},renderers:{dayStats:{type:i,group:"studyOverlay",position:"studyOverlay",presentationController:"highLowPresenter",properties:{relativeWeighting:500,textSpacing:10,marginBottom:6,marginLeft:5}},visibleStats:{type:s,group:"studyOverlay",position:"studyOverlay",presentationController:"highLowPresenter",properties:{relativeWeighting:500,textSpacing:10,marginBottom:6,marginLeft:5}}}}};return e.dailyStats||delete t.prices.renderers.dayStats,e.visibleStats||delete t.prices.renderers.visibleStats,t}var n=e("module/core/js/view/model/commonuiproperties"),i=e("module/highlowstats/js/view/renderer/daystatsrenderer"),o=e("module/highlowstats/js/view/model/highlowpresenter"),r=e("module/highlowstats/js/view/model/highlowpresentationmodel"),s=e("module/highlowstats/js/view/renderer/visiblerangestatsrenderer");return t})),define("module/core/js/util/lightstreamerutil",["require","module/core/js/util/math"],(function(e){"use strict";var t=e("module/core/js/util/math"),n={};return n.processUpdate=function(e,t){return t.reduce((function(t,i){return t[i]=n._parseNumberFromLightstreamerValue(e,i),t}),{})},n._parseNumberFromLightstreamerValue=function(e,n){var i=parseFloat(e.getValue(n));return t.isNumber(i)?i:null},Object.freeze(n)})),define("module/core/js/model/datapoint/tickdatapoint",["require","module/core/js/util/class","module/core/js/model/datapoint/datapoint"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i),this.lastRawPrice=o||null}var n=e("module/core/js/util/class"),i=e("module/core/js/model/datapoint/datapoint");n.extend(t,i);var o=t.prototype;return Object.seal(o),Object.seal(t)})),define("module/core/js/model/pricecalculator/abstractpricecalculator",["require","module/core/js/util/array","module/core/js/model/datapoint/hlocdatapoint","module/core/js/model/hlocprice","module/core/js/model/marketprice","module/core/js/util/math","module/core/js/util/oop","module/core/js/model/datapoint/tickdatapoint","module/core/js/model/tickprice"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/array"),i=e("module/core/js/model/datapoint/hlocdatapoint"),o=e("module/core/js/model/hlocprice"),r=e("module/core/js/model/marketprice"),s=e("module/core/js/util/math"),a=e("module/core/js/util/oop"),l=e("module/core/js/model/datapoint/tickdatapoint"),u=e("module/core/js/model/tickprice");t._getLatestPriceData=function(e){if(e.lastPrice)return e.lastPrice;for(;e&&e.loading.loaded;){if(e.lastFullPrice)return e.lastFullPrice;e=e.previous}return null},t._applyPriceMathFn=function(e){var i,o=t._applyPriceMathFnForType,s=n.toArray(arguments,1),a=new r;for(i=0;i<s.length;i++)s[i]&&(a.bid=o(e,a.bid,s[i].bid),a.ask=o(e,a.ask,s[i].ask),a.ltp=o(e,a.ltp,s[i].ltp));return a},t._applyPriceMathFnForType=function(e,t,n){return s.isNumber(n)?s.isNumber(t)?e(n,t):n:t};var c=t.prototype;return c.type=null,c.allowPartialDataPoints=!1,c.calculate=a.abstractMethod,c.isCalculable=a.abstractMethod,c.getVolume=function(e){var t=parseInt(e,10);return isNaN(t)?null:t},c.calculateDataPoint=function(e,t){var n;if(e instanceof o)n=this._calculateHlocDataPoint(e,t);else{if(!(e instanceof u))throw new Error("Unexpected price type");n=this._calculateTickDataPoint(e,t)}return n},c._fillOpenFromPreviousData=function(e,t,n){var i=n.findPointForTimestamp(e.timestamp),o=n.findPreviousPointForTimestamp(e.timestamp);i&&i.lastRawPrice&&i.lastRawPrice.open&&e.open.fillMissingPricesFrom(i.lastRawPrice.open),e.open.fillMissingPricesFrom(e.close),t&&e.open.fillMissingPricesFrom(t.close),o&&o.lastRawPrice&&e.open.fillMissingPricesFrom(o.lastRawPrice.close)},c._fillCloseFromCurrentPoint=function(e,t){var n=t.findPointForTimestamp(e.timestamp);n&&n.lastRawPrice&&n.lastRawPrice.close&&e.close.fillMissingPricesFrom(n.lastRawPrice.close),e.close.fillMissingPricesFrom(e.open)},c._fillHighFromCurrentPoint=function(e,n){var i=n.findPointForTimestamp(e.timestamp),o=t._applyPriceMathFn.bind(this,Math.max),r=o(e.high,e.low,e.open,e.close);i&&i.lastRawPrice&&(r=o(r,i.lastRawPrice.high,i.lastRawPrice.low,i.lastRawPrice.open,i.lastRawPrice.close)),e.high.fillMissingPricesFrom(r)},c._fillLowFromCurrentPoint=function(e,n){var i=n.findPointForTimestamp(e.timestamp),o=t._applyPriceMathFn.bind(this,Math.min),r=o(e.high,e.low,e.open,e.close);i&&i.lastRawPrice&&(r=o(r,i.lastRawPrice.high,i.lastRawPrice.low,i.lastRawPrice.open,i.lastRawPrice.close)),e.low.fillMissingPricesFrom(r)},c._fillVolumeFromPreviousData=function(e,t){var n=t.lastPriceWithVolume;!s.isNumber(e.volume)&&n&&n.timestamp===e.timestamp&&(e.volume=n.volume)},c._fillFromLatestPrice=function(e,t,n){var i=n.findPointForTimestamp(e.timestamp),o=n.findPreviousPointForTimestamp(e.timestamp);i&&i.lastRawPrice&&i.lastRawPrice.value&&e.value.fillMissingPricesFrom(i.lastRawPrice.value),t&&e.value.fillMissingPricesFrom(t.value),
o&&o.lastRawPrice&&e.value.fillMissingPricesFrom(o.lastRawPrice.value)},c._calculateHlocDataPoint=function(e,n){var i,o=!1;return this._fillVolumeFromPreviousData(e,n),this.isCalculable(e)||(o=!0,i=t._getLatestPriceData(n),i&&i.timestamp<e.timestamp&&this._fillNewDataPointFromLastClose(e,i),this._isPriceIncomplete("open",e)&&this._fillOpenFromPreviousData(e,i,n),this._isPriceIncomplete("close",e)&&this._fillCloseFromCurrentPoint(e,n),this._isPriceIncomplete("high",e)&&this._fillHighFromCurrentPoint(e,n),this._isPriceIncomplete("low",e)&&this._fillLowFromCurrentPoint(e,n)),n.lastPrice=e,s.isNumber(e.volume)&&(n.lastPriceWithVolume=e),!(!this.isCalculable(e)&&!this.allowPartialDataPoints)&&(n.lastFullPrice=e,this._createHlocDataPoint(e,o))},c._fillNewDataPointFromLastClose=function(e,t){this._isPriceIncomplete("open",e)&&e.open.fillMissingPricesFrom(t.close),this._isPriceIncomplete("close",e)&&e.close.fillMissingPricesFrom(e.open),this._isPriceIncomplete("high",e)&&e.high.fillMissingPricesFrom(e.open),this._isPriceIncomplete("low",e)&&e.low.fillMissingPricesFrom(e.open)},c._createHlocDataPoint=function(e,t){var n=this.calculate(e.close);return s.isNumber(n)?new i(e.timestamp,this.calculate(e.close),this.getVolume(e.volume),this.calculate(e.high),this.calculate(e.low),this.calculate(e.open),n,e,t):null},c._calculateTickDataPoint=function(e,n){var i,o;return this.isCalculable(e)||(i=t._getLatestPriceData(n),this._isPriceIncomplete("value",e)&&this._fillFromLatestPrice(e,i,n)),n.lastPrice=e,!(!this.isCalculable(e)&&!this.allowPartialDataPoints)&&(o=this.calculate(e.value),n.lastFullPrice=e,s.isNumber(o)?new l(e.timestamp,this.calculate(e.value),this.getVolume(e.volume),e):null)},c._isPriceIncomplete=function(e,t){return!(s.isNumber(t[e].bid)&&s.isNumber(t[e].ask)&&s.isNumber(t[e].ltp))},Object.seal(c),t})),define("module/core/js/model/pricecalculator/askpricecalculator",["require","module/core/js/model/pricecalculator/abstractpricecalculator","module/core/js/util/class","module/core/js/util/math","module/core/js/enum/pricetypeenum"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/model/pricecalculator/abstractpricecalculator"),i=e("module/core/js/util/class"),o=e("module/core/js/util/math"),r=e("module/core/js/enum/pricetypeenum");i.extend(t,n);var s=t.prototype;return s.type=r.ASK,s.calculate=function(e){if(!o.isNumber(e.ask))throw new Error("No ask price given");return e.ask},s.isCalculable=function(e){return e.hasPriceType("ask")},Object.seal(s),t})),define("module/core/js/model/pricecalculator/bidpricecalculator",["require","module/core/js/model/pricecalculator/abstractpricecalculator","module/core/js/util/class","module/core/js/util/math","module/core/js/enum/pricetypeenum"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/model/pricecalculator/abstractpricecalculator"),i=e("module/core/js/util/class"),o=e("module/core/js/util/math"),r=e("module/core/js/enum/pricetypeenum");i.extend(t,n);var s=t.prototype;return s.type=r.BID,s.calculate=function(e){if(!o.isNumber(e.bid))throw new Error("No bid marketPrice given");return e.bid},s.isCalculable=function(e){return e.hasPriceType("bid")},Object.seal(s),t})),define("module/core/js/model/pricecalculator/lasttradedpricecalculator",["require","module/core/js/model/pricecalculator/abstractpricecalculator","module/core/js/util/class","module/core/js/enum/pricetypeenum"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/model/pricecalculator/abstractpricecalculator"),i=e("module/core/js/util/class"),o=e("module/core/js/enum/pricetypeenum");i.extend(t,n);var r=t.prototype;return r.type=o.LTP,r.calculate=function(e){return e.ltp},r.isCalculable=function(e){return e.hasPriceType("ltp")},Object.seal(r),t})),define("module/core/js/model/pricecalculator/midpricecalculator",["require","module/core/js/model/pricecalculator/abstractpricecalculator","module/core/js/util/class","module/core/js/util/math","module/core/js/enum/pricetypeenum"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/model/pricecalculator/abstractpricecalculator"),i=e("module/core/js/util/class"),o=e("module/core/js/util/math"),r=e("module/core/js/enum/pricetypeenum"),s=o.roundFloatingPointError,a=o.isNumber;i.extend(t,n);var l=t.prototype;return l.type=r.MID,l.calculate=function(e){var t=a(e.ask),n=a(e.bid);return t&&n?s((e.bid+e.ask)/2):t?e.ask:n?e.bid:null},l.isCalculable=function(e){return e.hasPriceType("ask")&&e.hasPriceType("bid")},Object.seal(l),t})),define("module/core/js/model/pricecalculator/pricecalculatorprovider",["require","module/core/js/model/pricecalculator/askpricecalculator","module/core/js/model/pricecalculator/bidpricecalculator","module/core/js/model/pricecalculator/lasttradedpricecalculator","module/core/js/model/pricecalculator/midpricecalculator","module/core/js/enum/pricetypeenum"],(function(e){"use strict";var t=e("module/core/js/model/pricecalculator/askpricecalculator"),n=e("module/core/js/model/pricecalculator/bidpricecalculator"),i=e("module/core/js/model/pricecalculator/lasttradedpricecalculator"),o=e("module/core/js/model/pricecalculator/midpricecalculator"),r=e("module/core/js/enum/pricetypeenum");return{get:function(e){switch(e){case r.MID:return new o;case r.BID:return new n;case r.ASK:return new t;case r.LTP:return new i}}}})),define("module/highlowstats/js/serviceclient/streamingdaystatsclient",["require","module/core/js/model/instrumentmodelevents","streaming","module/core/js/enum/lightstreamerenum","module/core/js/util/lightstreamerutil","module/core/js/util/math","module/core/js/model/pricecalculator/pricecalculatorprovider","module/core/js/serviceclient/rawstreamingclient","module/core/js/model/resolutionsenum","module/core/js/model/streamingpriceadapter","module/highlowstats/js/model/stats","module/core/js/model/environmentinfo"],(function(e){"use strict";function t(e){this._eventBus=e,this._eventBus.subscribe("chart/pricetype/changed",this._handlePriceTypeChanged,this)}var n=e("module/core/js/model/instrumentmodelevents"),i=e("streaming"),o=e("module/core/js/enum/lightstreamerenum"),r=e("module/core/js/util/lightstreamerutil"),s=e("module/core/js/util/math"),a=e("module/core/js/model/pricecalculator/pricecalculatorprovider"),l=e("module/core/js/serviceclient/rawstreamingclient"),u=e("module/core/js/model/resolutionsenum"),c=e("module/core/js/model/streamingpriceadapter"),d=e("module/highlowstats/js/model/stats"),h=e("module/core/js/model/environmentinfo");t.create=function(e){return new t(e)},t.FIDS=Object.freeze([o.UTM,o.FIDS.BID.OPEN,o.FIDS.BID.CLOSE,o.FIDS.BID.HIGH,o.FIDS.BID.LOW,o.FIDS.OFFER.OPEN,o.FIDS.OFFER.CLOSE,o.FIDS.OFFER.HIGH,o.FIDS.OFFER.LOW,o.FIDS.LTP.OPEN,o.FIDS.LTP.CLOSE,o.FIDS.LTP.HIGH,o.FIDS.LTP.LOW,o.FIDS.DAY.NET_CHG_MID,o.FIDS.DAY.PERC_CHG_MID]),t.STREAMING_MAX_RATE=2;var p=t.prototype;return p._eventBus=null,p._settingsManager=null,p._lightStreamerSubscription=null,p._priceCalculator=null,p._todayHlocPrice=null,p._todayNetChange=null,p._todayPercentChange=null,p._stats=null,p._epic=null,p._instrumentResolutionInfo=null,p._instrumentInfo=null,p._successCallback=null,p._streamingPointsClient=null,p.startListening=function(e,t,n,i,o){return this._epic=e,this._instrumentResolutionInfo=t,this._instrumentInfo=n,this._successCallback=o,this._streamingPointsClient=i,this._startListening(),this},p._startListening=function(){this._resetTodayStats(),this._streamingPointsClient?this._streamingPointsClient.on(l.LS_UPDATE,this._handleUpdateFromLightstreamer.bind(this)):this._lightStreamerSubscription=i.subscribe(this._subscriptionString(this._epic,this._instrumentResolutionInfo,this._instrumentInfo),t.FIDS,"DISTINCT",this._handleUpdateFromLightstreamer.bind(this),t.STREAMING_MAX_RATE,h.getInstance().getDataAdaptor())},p.stopListening=function(){return delete this._todayHlocPrice,this._lightStreamerSubscription?(this._lightStreamerSubscription.unsubscribe(),this._lightStreamerSubscription=null):this._streamingPointsClient&&this._streamingPointsClient.un(null,this),this},p.destroy=function(){this.stopListening(),this._eventBus.unsubscribeAll(this)},p._subscriptionString=function(e,i,o){var r=o.status===n.STATUS_DELAYED?n.STATUS_DELAYED:"";return"CHARTS|"+e+"|"+u.values.DAY.periodUnit+"|"+u.values.DAY.multiple+"|"+r+"|"+i.getChartServiceTimezone()+"|"+t.FIDS.join("|")},p._handleUpdateFromLightstreamer=function(e){var n=r.processUpdate(e,t.FIDS),i=n[o.FIDS.DAY.NET_CHG_MID],s=n[o.FIDS.DAY.PERC_CHG_MID];this._priceCalculator&&(this._todayHlocPrice=c.createFromLightstreamerPoint(n),this._updateStats(i,s))},p._handlePriceTypeChanged=function(e){this._priceCalculator=a.get(e),this._updateStats()},p._updateStats=function(e,t){var n,i;this._todayHlocPrice&&(n=this._getPrice(this._todayHlocPrice.high),i=this._getPrice(this._todayHlocPrice.low),s.isNumber(e)&&(this._todayNetChange=e),s.isNumber(t)&&(this._todayPercentChange=t),s.isNumber(n)&&this._stats.withHigh(n),s.isNumber(i)&&this._stats.withLow(i),this._stats.withNet(this._todayNetChange).withPercent(this._todayPercentChange),this._stats.hasValidData()&&(this._eventBus.publish("highlowstats/update",[this._stats]),this._successCallback(this._stats)))},p._getPrice=function(e){try{return this._priceCalculator.calculate(e)}catch(e){return null}},p._resetTodayStats=function(){this._stats=new d,this._todayHlocPrice=null,this._todayNetChange=null,this._todayPercentChange=null,this._eventBus.publish("highlowstats/update",[this._stats]),this._successCallback(this._stats)},Object.seal(p),Object.seal(t)})),define("ig-trading",[],(function(){return (function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=120)})([(function(e,t,n){(function(e,i){var o;(function(){function r(e,t){return e.set(t[0],t[1]),e}function s(e,t){return e.add(t),e}function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function l(e,t,n,i){for(var o=-1,r=null==e?0:e.length;++o<r;){var s=e[o];t(i,s,n(s),e)}return i}function u(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function c(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function d(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function h(e,t){for(var n=-1,i=null==e?0:e.length,o=0,r=[];++n<i;){var s=e[n];t(s,n,e)&&(r[o++]=s)}return r}function p(e,t){return!!(null==e?0:e.length)&&E(e,t,0)>-1}function m(e,t,n){for(var i=-1,o=null==e?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}function f(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}function _(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}function g(e,t,n,i){var o=-1,r=null==e?0:e.length;for(i&&r&&(n=e[++o]);++o<r;)n=t(n,e[o],o,e);return n}function v(e,t,n,i){var o=null==e?0:e.length;for(i&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function y(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function M(e){return e.split("")}function b(e){return e.match(Bt)||[]}function A(e,t,n){var i;return n(e,(function(e,n,o){if(t(e,n,o))return i=n,!1})),i}function T(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function E(e,t,n){return t===t?J(e,t,n):T(e,O,n)}function w(e,t,n,i){for(var o=n-1,r=e.length;++o<r;)if(i(e[o],t))return o;return-1}function O(e){return e!==e}function I(e,t){var n=null==e?0:e.length;return n?R(e,t)/n:ke}function S(e){return function(t){return null==t?oe:t[e]}}function j(e){return function(t){return null==e?oe:e[t]}}function C(e,t,n,i,o){return o(e,(function(e,o,r){n=i?(i=!1,e):t(n,e,o,r)})),n}function D(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function R(e,t){for(var n,i=-1,o=e.length;++i<o;){var r=t(e[i]);r!==oe&&(n=n===oe?r:n+r)}return n}function L(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function N(e,t){return f(t,(function(t){return[t,e[t]]}))}function k(e){return function(t){return e(t)}}function P(e,t){return f(t,(function(t){return e[t]}))}function x(e,t){return e.has(t)}function V(e,t){for(var n=-1,i=e.length;++n<i&&E(t,e[n],0)>-1;);return n}function H(e,t){for(var n=e.length;n--&&E(t,e[n],0)>-1;);return n}function B(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}function W(e){return"\\"+Sn[e]}function F(e,t){return null==e?oe:e[t]}function U(e){return yn.test(e)}function G(e){return Mn.test(e)}function Y(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function q(e,t){return function(n){return e(t(n))}}function K(e,t){for(var n=-1,i=e.length,o=0,r=[];++n<i;){var s=e[n];s!==t&&s!==ce||(e[n]=ce,r[o++]=n)}return r}function Z(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function X(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function J(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}function Q(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}function $(e){return U(e)?te(e):Yn(e)}function ee(e){return U(e)?ne(e):M(e)}function te(e){for(var t=gn.lastIndex=0;gn.test(e);)++t;return t}function ne(e){return e.match(gn)||[]}function ie(e){return e.match(vn)||[]}var oe,re=200,se="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ae="Expected a function",le="__lodash_hash_undefined__",ue=500,ce="__lodash_placeholder__",de=1,he=2,pe=4,me=1,fe=2,_e=1,ge=2,ve=4,ye=8,Me=16,be=32,Ae=64,Te=128,Ee=256,we=512,Oe=30,Ie="...",Se=800,je=16,Ce=1,De=2,Re=1/0,Le=9007199254740991,Ne=1.7976931348623157e308,ke=NaN,Pe=4294967295,xe=Pe-1,Ve=Pe>>>1,He=[["ary",Te],["bind",_e],["bindKey",ge],["curry",ye],["curryRight",Me],["flip",we],["partial",be],["partialRight",Ae],["rearg",Ee]],Be="[object Arguments]",We="[object Array]",Fe="[object AsyncFunction]",Ue="[object Boolean]",Ge="[object Date]",Ye="[object DOMException]",ze="[object Error]",qe="[object Function]",Ke="[object GeneratorFunction]",Ze="[object Map]",Xe="[object Number]",Je="[object Null]",Qe="[object Object]",$e="[object Proxy]",et="[object RegExp]",tt="[object Set]",nt="[object String]",it="[object Symbol]",ot="[object Undefined]",rt="[object WeakMap]",st="[object WeakSet]",at="[object ArrayBuffer]",lt="[object DataView]",ut="[object Float32Array]",ct="[object Float64Array]",dt="[object Int8Array]",ht="[object Int16Array]",pt="[object Int32Array]",mt="[object Uint8Array]",ft="[object Uint8ClampedArray]",_t="[object Uint16Array]",gt="[object Uint32Array]",vt=/\b__p \+= '';/g,yt=/\b(__p \+=) '' \+/g,Mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,At=/[&<>"']/g,Tt=RegExp(bt.source),Et=RegExp(At.source),wt=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,It=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jt=/^\w*$/,Ct=/^\./,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(Rt.source),Nt=/^\s+|\s+$/g,kt=/^\s+/,Pt=/\s+$/,xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ht=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ut=/\w*$/,Gt=/^[-+]0x[0-9a-f]+$/i,Yt=/^0b[01]+$/i,zt=/^\[object .+?Constructor\]$/,qt=/^0o[0-7]+$/i,Kt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xt=/($^)/,Jt=/['\n\r\u2028\u2029\\]/g,Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",$t="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",en="["+$t+"]",tn="["+Qt+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",on="[^\\ud800-\\udfff"+$t+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rn="\\ud83c[\\udffb-\\udfff]",sn="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",ln="[A-Z\\xc0-\\xd6\\xd8-\\xde]",un="(?:"+nn+"|"+on+")",cn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",dn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",sn,an].join("|")+")[\\ufe0e\\ufe0f]?"+cn+")*",hn="[\\ufe0e\\ufe0f]?"+cn+dn,pn="(?:"+["[\\u2700-\\u27bf]",sn,an].join("|")+")"+hn,mn="(?:"+["[^\\ud800-\\udfff]"+tn+"?",tn,sn,an,"[\\ud800-\\udfff]"].join("|")+")",fn=RegExp("['’]","g"),_n=RegExp(tn,"g"),gn=RegExp(rn+"(?="+rn+")|"+mn+hn,"g"),vn=RegExp([ln+"?"+nn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[en,ln,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[en,ln+un,"$"].join("|")+")",ln+"?"+un+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ln+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",pn].join("|"),"g"),yn=RegExp("[\\u200d\\ud800-\\udfff"+Qt+"\\ufe0e\\ufe0f]"),Mn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],An=-1,Tn={};Tn[ut]=Tn[ct]=Tn[dt]=Tn[ht]=Tn[pt]=Tn[mt]=Tn[ft]=Tn[_t]=Tn[gt]=!0,Tn[Be]=Tn[We]=Tn[at]=Tn[Ue]=Tn[lt]=Tn[Ge]=Tn[ze]=Tn[qe]=Tn[Ze]=Tn[Xe]=Tn[Qe]=Tn[et]=Tn[tt]=Tn[nt]=Tn[rt]=!1;var En={};En[Be]=En[We]=En[at]=En[lt]=En[Ue]=En[Ge]=En[ut]=En[ct]=En[dt]=En[ht]=En[pt]=En[Ze]=En[Xe]=En[Qe]=En[et]=En[tt]=En[nt]=En[it]=En[mt]=En[ft]=En[_t]=En[gt]=!0,En[ze]=En[qe]=En[rt]=!1;var wn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},On={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},In={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Sn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jn=parseFloat,Cn=parseInt,Dn="object"==typeof e&&e&&e.Object===Object&&e,Rn="object"==typeof self&&self&&self.Object===Object&&self,Ln=Dn||Rn||Function("return this")(),Nn="object"==typeof t&&t&&!t.nodeType&&t,kn=Nn&&"object"==typeof i&&i&&!i.nodeType&&i,Pn=kn&&kn.exports===Nn,xn=Pn&&Dn.process,Vn=(function(){try{return xn&&xn.binding&&xn.binding("util")}catch(e){}})(),Hn=Vn&&Vn.isArrayBuffer,Bn=Vn&&Vn.isDate,Wn=Vn&&Vn.isMap,Fn=Vn&&Vn.isRegExp,Un=Vn&&Vn.isSet,Gn=Vn&&Vn.isTypedArray,Yn=S("length"),zn=j(wn),qn=j(On),Kn=j(In),Zn=(function e(t){function n(e){if(rl(e)&&!_h(e)&&!(e instanceof M)){if(e instanceof o)return e;if(_c.call(e,"__wrapped__"))return ns(e)}return new o(e)}function i(){}function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=oe}function M(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pe,this.__views__=[]}function j(){var e=new M(this.__wrapped__);return e.__actions__=Vo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Vo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Vo(this.__views__),e}function J(){if(this.__filtered__){var e=new M(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function te(){var e=this.__wrapped__.value(),t=this.__dir__,n=_h(e),i=t<0,o=n?e.length:0,r=Ir(0,o,this.__views__),s=r.start,a=r.end,l=a-s,u=i?a:s-1,c=this.__iteratees__,d=c.length,h=0,p=zc(l,this.__takeCount__);if(!n||!i&&o==l&&p==l)return yo(e,this.__actions__);var m=[];e:for(;l--&&h<p;){u+=t;for(var f=-1,_=e[u];++f<d;){var g=c[f],v=g.iteratee,y=g.type,M=v(_);if(y==De)_=M;else if(!M){if(y==Ce)continue e;break e}}m[h++]=_}return m}function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Bt(){this.__data__=nd?nd(null):{},this.size=0}function Qt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function $t(e){var t=this.__data__;if(nd){var n=t[e];return n===le?oe:n}return _c.call(t,e)?t[e]:oe}function en(e){var t=this.__data__;return nd?t[e]!==oe:_c.call(t,e)}function tn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nd&&t===oe?le:t,this}function nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function on(){this.__data__=[],this.size=0}function rn(e){var t=this.__data__,n=Xn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Cc.call(t,n,1),--this.size,!0)}function sn(e){var t=this.__data__,n=Xn(t,e);return n<0?oe:t[n][1]}function an(e){return Xn(this.__data__,e)>-1}function ln(e,t){var n=this.__data__,i=Xn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function cn(){this.size=0,this.__data__={hash:new ne,map:new(Qc||nn),string:new ne}}function dn(e){var t=Tr(this,e).delete(e);return this.size-=t?1:0,t}function hn(e){return Tr(this,e).get(e)}function pn(e){return Tr(this,e).has(e)}function mn(e,t){var n=Tr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function gn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new un;++t<n;)this.add(e[t])}function vn(e){return this.__data__.set(e,le),this}function yn(e){return this.__data__.has(e)}function Mn(e){var t=this.__data__=new nn(e);this.size=t.size}function wn(){this.__data__=new nn,this.size=0}function On(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function In(e){return this.__data__.get(e)}function Sn(e){return this.__data__.has(e)}function Dn(e,t){var n=this.__data__;if(n instanceof nn){var i=n.__data__;if(!Qc||i.length<re-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new un(i)}return n.set(e,t),this.size=n.size,this}function Rn(e,t){var n=_h(e),i=!n&&fh(e),o=!n&&!i&&vh(e),r=!n&&!i&&!o&&Th(e),s=n||i||o||r,a=s?L(e.length,uc):[],l=a.length;for(var u in e)!t&&!_c.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||kr(u,l))||a.push(u);return a}function Nn(e){var t=e.length;return t?e[$i(0,t-1)]:oe}function kn(e,t){return Qr(Vo(e),ni(t,0,e.length))}function xn(e){return Qr(Vo(e))}function Vn(e,t,n){(n===oe||Ya(e[t],n))&&(n!==oe||t in e)||ei(e,t,n)}function Yn(e,t,n){var i=e[t];_c.call(e,t)&&Ya(i,n)&&(n!==oe||t in e)||ei(e,t,n)}function Xn(e,t){for(var n=e.length;n--;)if(Ya(e[n][0],t))return n;return-1}function Jn(e,t,n,i){return md(e,(function(e,o,r){t(i,e,n(e),r)})),i}function Qn(e,t){return e&&Ho(t,Bl(t),e)}function $n(e,t){return e&&Ho(t,Wl(t),e)}function ei(e,t,n){"__proto__"==t&&Nc?Nc(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ti(e,t){for(var n=-1,i=t.length,o=nc(i),r=null==e;++n<i;)o[n]=r?oe:xl(e,t[n]);return o}function ni(e,t,n){return e===e&&(n!==oe&&(e=e<=n?e:n),t!==oe&&(e=e>=t?e:t)),e}function ii(e,t,n,i,o,r){var s,a=t&de,l=t&he,c=t&pe;if(n&&(s=o?n(e,i,o,r):n(e)),s!==oe)return s;if(!ol(e))return e;var d=_h(e);if(d){if(s=Cr(e),!a)return Vo(e,s)}else{var h=Od(e),p=h==qe||h==Ke;if(vh(e))return Oo(e,a);if(h==Qe||h==Be||p&&!o){if(s=l||p?{}:Dr(e),!a)return l?Wo(e,$n(s,e)):Bo(e,Qn(s,e))}else{if(!En[h])return o?e:{};s=Rr(e,h,ii,a)}}r||(r=new Mn);var m=r.get(e);if(m)return m;r.set(e,s);var f=c?l?yr:vr:l?Wl:Bl,_=d?oe:f(e);return u(_||e,(function(i,o){_&&(o=i,i=e[o]),Yn(s,o,ii(i,t,n,o,e,r))})),s}function oi(e){var t=Bl(e);return function(n){return ri(n,e,t)}}function ri(e,t,n){var i=n.length;if(null==e)return!i;for(e=ac(e);i--;){var o=n[i],r=t[o],s=e[o];if(s===oe&&!(o in e)||!r(s))return!1}return!0}function si(e,t,n){if("function"!=typeof e)throw new cc(ae);return jd((function(){e.apply(oe,n)}),t)}function ai(e,t,n,i){var o=-1,r=p,s=!0,a=e.length,l=[],u=t.length;if(!a)return l;n&&(t=f(t,k(n))),i?(r=m,s=!1):t.length>=re&&(r=x,s=!1,t=new gn(t));e:for(;++o<a;){var c=e[o],d=null==n?c:n(c);if(c=i||0!==c?c:0,s&&d===d){for(var h=u;h--;)if(t[h]===d)continue e;l.push(c)}else r(t,d,i)||l.push(c)}return l}function li(e,t){var n=!0;return md(e,(function(e,i,o){return n=!!t(e,i,o)})),n}function ui(e,t,n){for(var i=-1,o=e.length;++i<o;){var r=e[i],s=t(r);if(null!=s&&(a===oe?s===s&&!_l(s):n(s,a)))var a=s,l=r}return l}function ci(e,t,n,i){var o=e.length;for(n=Al(n),n<0&&(n=-n>o?0:o+n),i=i===oe||i>o?o:Al(i),i<0&&(i+=o),i=n>i?0:Tl(i);n<i;)e[n++]=t;return e}function di(e,t){var n=[];return md(e,(function(e,i,o){t(e,i,o)&&n.push(e)})),n}function hi(e,t,n,i,o){var r=-1,s=e.length;for(n||(n=Nr),o||(o=[]);++r<s;){var a=e[r];t>0&&n(a)?t>1?hi(a,t-1,n,i,o):_(o,a):i||(o[o.length]=a)}return o}function pi(e,t){return e&&_d(e,t,Bl)}function mi(e,t){return e&&gd(e,t,Bl)}function fi(e,t){return h(t,(function(t){return tl(e[t])}))}function _i(e,t){t=Eo(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[$r(t[n++])];return n&&n==i?e:oe}function gi(e,t,n){var i=t(e);return _h(e)?i:_(i,n(e))}function vi(e){return null==e?e===oe?ot:Je:Lc&&Lc in ac(e)?Or(e):zr(e)}function yi(e,t){return e>t}function Mi(e,t){return null!=e&&_c.call(e,t)}function bi(e,t){return null!=e&&t in ac(e)}function Ai(e,t,n){return e>=zc(t,n)&&e<Yc(t,n)}function Ti(e,t,n){for(var i=n?m:p,o=e[0].length,r=e.length,s=r,a=nc(r),l=1/0,u=[];s--;){var c=e[s];s&&t&&(c=f(c,k(t))),l=zc(c.length,l),a[s]=!n&&(t||o>=120&&c.length>=120)?new gn(s&&c):oe}c=e[0];var d=-1,h=a[0];e:for(;++d<o&&u.length<l;){var _=c[d],g=t?t(_):_;if(_=n||0!==_?_:0,!(h?x(h,g):i(u,g,n))){for(s=r;--s;){var v=a[s];if(!(v?x(v,g):i(e[s],g,n)))continue e}h&&h.push(g),u.push(_)}}return u}function Ei(e,t,n,i){return pi(e,(function(e,o,r){t(i,n(e),o,r)})),i}function wi(e,t,n){t=Eo(t,e),e=Kr(e,t);var i=null==e?e:e[$r(bs(t))];return null==i?oe:a(i,e,n)}function Oi(e){return rl(e)&&vi(e)==Be}function Ii(e){return rl(e)&&vi(e)==at}function Si(e){return rl(e)&&vi(e)==Ge}function ji(e,t,n,i,o){return e===t||(null==e||null==t||!rl(e)&&!rl(t)?e!==e&&t!==t:Ci(e,t,n,i,ji,o))}function Ci(e,t,n,i,o,r){var s=_h(e),a=_h(t),l=s?We:Od(e),u=a?We:Od(t);l=l==Be?Qe:l,u=u==Be?Qe:u;var c=l==Qe,d=u==Qe,h=l==u;if(h&&vh(e)){if(!vh(t))return!1;s=!0,c=!1}if(h&&!c)return r||(r=new Mn),s||Th(e)?mr(e,t,n,i,o,r):fr(e,t,l,n,i,o,r);if(!(n&me)){var p=c&&_c.call(e,"__wrapped__"),m=d&&_c.call(t,"__wrapped__");if(p||m){var f=p?e.value():e,_=m?t.value():t;return r||(r=new Mn),o(f,_,n,i,r)}}return!!h&&(r||(r=new Mn),_r(e,t,n,i,o,r))}function Di(e){return rl(e)&&Od(e)==Ze}function Ri(e,t,n,i){var o=n.length,r=o,s=!i;if(null==e)return!r;for(e=ac(e);o--;){var a=n[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<r;){a=n[o];var l=a[0],u=e[l],c=a[1];if(s&&a[2]){if(u===oe&&!(l in e))return!1}else{var d=new Mn;if(i)var h=i(u,c,l,e,t,d);if(!(h===oe?ji(c,u,me|fe,i,d):h))return!1}}return!0}function Li(e){return!(!ol(e)||Br(e))&&(tl(e)?Ac:zt).test(es(e))}function Ni(e){return rl(e)&&vi(e)==et}function ki(e){return rl(e)&&Od(e)==tt}function Pi(e){return rl(e)&&il(e.length)&&!!Tn[vi(e)]}function xi(e){return"function"==typeof e?e:null==e?Cu:"object"==typeof e?_h(e)?Ui(e[0],e[1]):Fi(e):Vu(e)}function Vi(e){if(!Wr(e))return Gc(e);var t=[];for(var n in ac(e))_c.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Hi(e){if(!ol(e))return Yr(e);var t=Wr(e),n=[];for(var i in e)("constructor"!=i||!t&&_c.call(e,i))&&n.push(i);return n}function Bi(e,t){return e<t}function Wi(e,t){var n=-1,i=za(e)?nc(e.length):[];return md(e,(function(e,o,r){i[++n]=t(e,o,r)})),i}function Fi(e){var t=Er(e);return 1==t.length&&t[0][2]?Ur(t[0][0],t[0][1]):function(n){return n===e||Ri(n,e,t)}}function Ui(e,t){return xr(e)&&Fr(t)?Ur($r(e),t):function(n){var i=xl(n,e);return i===oe&&i===t?Hl(n,e):ji(t,i,me|fe)}}function Gi(e,t,n,i,o){e!==t&&_d(t,(function(r,s){if(ol(r))o||(o=new Mn),Yi(e,t,s,n,Gi,i,o);else{var a=i?i(e[s],r,s+"",e,t,o):oe;a===oe&&(a=r),Vn(e,s,a)}}),Wl)}function Yi(e,t,n,i,o,r,s){var a=e[n],l=t[n],u=s.get(l);if(u)return void Vn(e,n,u);var c=r?r(a,l,n+"",e,t,s):oe,d=c===oe;if(d){var h=_h(l),p=!h&&vh(l),m=!h&&!p&&Th(l);c=l,h||p||m?_h(a)?c=a:qa(a)?c=Vo(a):p?(d=!1,c=Oo(l,!0)):m?(d=!1,c=Lo(l,!0)):c=[]:pl(l)||fh(l)?(c=a,fh(a)?c=wl(a):(!ol(a)||i&&tl(a))&&(c=Dr(l))):d=!1}d&&(s.set(l,c),o(c,l,i,r,s),s.delete(l)),Vn(e,n,c)}function zi(e,t){var n=e.length;if(n)return t+=t<0?n:0,kr(t,n)?e[t]:oe}function qi(e,t,n){var i=-1;return t=f(t.length?t:[Cu],k(Ar())),D(Wi(e,(function(e,n,o){return{criteria:f(t,(function(t){return t(e)})),index:++i,value:e}})),(function(e,t){return ko(e,t,n)}))}function Ki(e,t){return Zi(e,t,(function(t,n){return Hl(e,n)}))}function Zi(e,t,n){for(var i=-1,o=t.length,r={};++i<o;){var s=t[i],a=_i(e,s);n(a,s)&&ro(r,Eo(s,e),a)}return r}function Xi(e){return function(t){return _i(t,e)}}function Ji(e,t,n,i){var o=i?w:E,r=-1,s=t.length,a=e;for(e===t&&(t=Vo(t)),n&&(a=f(e,k(n)));++r<s;)for(var l=0,u=t[r],c=n?n(u):u;(l=o(a,c,l,i))>-1;)a!==e&&Cc.call(a,l,1),Cc.call(e,l,1);return e}function Qi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var o=t[n];if(n==i||o!==r){var r=o;kr(o)?Cc.call(e,o,1):_o(e,o)}}return e}function $i(e,t){return e+Hc(Zc()*(t-e+1))}function eo(e,t,n,i){for(var o=-1,r=Yc(Vc((t-e)/(n||1)),0),s=nc(r);r--;)s[i?r:++o]=e,e+=n;return s}function to(e,t){var n="";if(!e||t<1||t>Le)return n;do{t%2&&(n+=e),(t=Hc(t/2))&&(e+=e)}while(t);return n}function no(e,t){return Cd(qr(e,t,Cu),e+"")}function io(e){return Nn($l(e))}function oo(e,t){var n=$l(e);return Qr(n,ni(t,0,n.length))}function ro(e,t,n,i){if(!ol(e))return e;t=Eo(t,e);for(var o=-1,r=t.length,s=r-1,a=e;null!=a&&++o<r;){var l=$r(t[o]),u=n;if(o!=s){var c=a[l];u=i?i(c,l,a):oe,u===oe&&(u=ol(c)?c:kr(t[o+1])?[]:{})}Yn(a,l,u),a=a[l]}return e}function so(e){return Qr($l(e))}function ao(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0
;for(var r=nc(o);++i<o;)r[i]=e[i+t];return r}function lo(e,t){var n;return md(e,(function(e,i,o){return!(n=t(e,i,o))})),!!n}function uo(e,t,n){var i=0,o=null==e?i:e.length;if("number"==typeof t&&t===t&&o<=Ve){for(;i<o;){var r=i+o>>>1,s=e[r];null!==s&&!_l(s)&&(n?s<=t:s<t)?i=r+1:o=r}return o}return co(e,t,Cu,n)}function co(e,t,n,i){t=n(t);for(var o=0,r=null==e?0:e.length,s=t!==t,a=null===t,l=_l(t),u=t===oe;o<r;){var c=Hc((o+r)/2),d=n(e[c]),h=d!==oe,p=null===d,m=d===d,f=_l(d);if(s)var _=i||m;else _=u?m&&(i||h):a?m&&h&&(i||!p):l?m&&h&&!p&&(i||!f):!p&&!f&&(i?d<=t:d<t);_?o=c+1:r=c}return zc(r,xe)}function ho(e,t){for(var n=-1,i=e.length,o=0,r=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!Ya(a,l)){var l=a;r[o++]=0===s?0:s}}return r}function po(e){return"number"==typeof e?e:_l(e)?ke:+e}function mo(e){if("string"==typeof e)return e;if(_h(e))return f(e,mo)+"";if(_l(e))return hd?hd.call(e):"";var t=e+"";return"0"==t&&1/e==-Re?"-0":t}function fo(e,t,n){var i=-1,o=p,r=e.length,s=!0,a=[],l=a;if(n)s=!1,o=m;else if(r>=re){var u=t?null:Ad(e);if(u)return Z(u);s=!1,o=x,l=new gn}else l=t?[]:a;e:for(;++i<r;){var c=e[i],d=t?t(c):c;if(c=n||0!==c?c:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),a.push(c)}else o(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}function _o(e,t){return t=Eo(t,e),null==(e=Kr(e,t))||delete e[$r(bs(t))]}function go(e,t,n,i){return ro(e,t,n(_i(e,t)),i)}function vo(e,t,n,i){for(var o=e.length,r=i?o:-1;(i?r--:++r<o)&&t(e[r],r,e););return n?ao(e,i?0:r,i?r+1:o):ao(e,i?r+1:0,i?o:r)}function yo(e,t){var n=e;return n instanceof M&&(n=n.value()),g(t,(function(e,t){return t.func.apply(t.thisArg,_([e],t.args))}),n)}function Mo(e,t,n){var i=e.length;if(i<2)return i?fo(e[0]):[];for(var o=-1,r=nc(i);++o<i;)for(var s=e[o],a=-1;++a<i;)a!=o&&(r[o]=ai(r[o]||s,e[a],t,n));return fo(hi(r,1),t,n)}function bo(e,t,n){for(var i=-1,o=e.length,r=t.length,s={};++i<o;){var a=i<r?t[i]:oe;n(s,e[i],a)}return s}function Ao(e){return qa(e)?e:[]}function To(e){return"function"==typeof e?e:Cu}function Eo(e,t){return _h(e)?e:xr(e,t)?[e]:Dd(Il(e))}function wo(e,t,n){var i=e.length;return n=n===oe?i:n,!t&&n>=i?e:ao(e,t,n)}function Oo(e,t){if(t)return e.slice();var n=e.length,i=Oc?Oc(n):new e.constructor(n);return e.copy(i),i}function Io(e){var t=new e.constructor(e.byteLength);return new wc(t).set(new wc(e)),t}function So(e,t){var n=t?Io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function jo(e,t,n){return g(t?n(z(e),de):z(e),r,new e.constructor)}function Co(e){var t=new e.constructor(e.source,Ut.exec(e));return t.lastIndex=e.lastIndex,t}function Do(e,t,n){return g(t?n(Z(e),de):Z(e),s,new e.constructor)}function Ro(e){return dd?ac(dd.call(e)):{}}function Lo(e,t){var n=t?Io(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function No(e,t){if(e!==t){var n=e!==oe,i=null===e,o=e===e,r=_l(e),s=t!==oe,a=null===t,l=t===t,u=_l(t);if(!a&&!u&&!r&&e>t||r&&s&&l&&!a&&!u||i&&s&&l||!n&&l||!o)return 1;if(!i&&!r&&!u&&e<t||u&&n&&o&&!i&&!r||a&&n&&o||!s&&o||!l)return-1}return 0}function ko(e,t,n){for(var i=-1,o=e.criteria,r=t.criteria,s=o.length,a=n.length;++i<s;){var l=No(o[i],r[i]);if(l){if(i>=a)return l;return l*("desc"==n[i]?-1:1)}}return e.index-t.index}function Po(e,t,n,i){for(var o=-1,r=e.length,s=n.length,a=-1,l=t.length,u=Yc(r-s,0),c=nc(l+u),d=!i;++a<l;)c[a]=t[a];for(;++o<s;)(d||o<r)&&(c[n[o]]=e[o]);for(;u--;)c[a++]=e[o++];return c}function xo(e,t,n,i){for(var o=-1,r=e.length,s=-1,a=n.length,l=-1,u=t.length,c=Yc(r-a,0),d=nc(c+u),h=!i;++o<c;)d[o]=e[o];for(var p=o;++l<u;)d[p+l]=t[l];for(;++s<a;)(h||o<r)&&(d[p+n[s]]=e[o++]);return d}function Vo(e,t){var n=-1,i=e.length;for(t||(t=nc(i));++n<i;)t[n]=e[n];return t}function Ho(e,t,n,i){var o=!n;n||(n={});for(var r=-1,s=t.length;++r<s;){var a=t[r],l=i?i(n[a],e[a],a,n,e):oe;l===oe&&(l=e[a]),o?ei(n,a,l):Yn(n,a,l)}return n}function Bo(e,t){return Ho(e,Ed(e),t)}function Wo(e,t){return Ho(e,wd(e),t)}function Fo(e,t){return function(n,i){var o=_h(n)?l:Jn,r=t?t():{};return o(n,e,Ar(i,2),r)}}function Uo(e){return no((function(t,n){var i=-1,o=n.length,r=o>1?n[o-1]:oe,s=o>2?n[2]:oe;for(r=e.length>3&&"function"==typeof r?(o--,r):oe,s&&Pr(n[0],n[1],s)&&(r=o<3?oe:r,o=1),t=ac(t);++i<o;){var a=n[i];a&&e(t,a,i,r)}return t}))}function Go(e,t){return function(n,i){if(null==n)return n;if(!za(n))return e(n,i);for(var o=n.length,r=t?o:-1,s=ac(n);(t?r--:++r<o)&&!1!==i(s[r],r,s););return n}}function Yo(e){return function(t,n,i){for(var o=-1,r=ac(t),s=i(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===n(r[l],l,r))break}return t}}function zo(e,t,n){function i(){return(this&&this!==Ln&&this instanceof i?r:e).apply(o?n:this,arguments)}var o=t&_e,r=Zo(e);return i}function qo(e){return function(t){t=Il(t);var n=U(t)?ee(t):oe,i=n?n[0]:t.charAt(0),o=n?wo(n,1).join(""):t.slice(1);return i[e]()+o}}function Ko(e){return function(t){return g(wu(ru(t).replace(fn,"")),e,"")}}function Zo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=pd(e.prototype),i=e.apply(n,t);return ol(i)?i:n}}function Xo(e,t,n){function i(){for(var r=arguments.length,s=nc(r),l=r,u=br(i);l--;)s[l]=arguments[l];var c=r<3&&s[0]!==u&&s[r-1]!==u?[]:K(s,u);return(r-=c.length)<n?ar(e,t,$o,i.placeholder,oe,s,c,oe,oe,n-r):a(this&&this!==Ln&&this instanceof i?o:e,this,s)}var o=Zo(e);return i}function Jo(e){return function(t,n,i){var o=ac(t);if(!za(t)){var r=Ar(n,3);t=Bl(t),n=function(e){return r(o[e],e,o)}}var s=e(t,n,i);return s>-1?o[r?t[s]:s]:oe}}function Qo(e){return gr((function(t){var n=t.length,i=n,r=o.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if("function"!=typeof s)throw new cc(ae);if(r&&!a&&"wrapper"==Mr(s))var a=new o([],!0)}for(i=a?i:n;++i<n;){s=t[i];var l=Mr(s),u="wrapper"==l?Td(s):oe;a=u&&Hr(u[0])&&u[1]==(Te|ye|be|Ee)&&!u[4].length&&1==u[9]?a[Mr(u[0])].apply(a,u[3]):1==s.length&&Hr(s)?a[l]():a.thru(s)}return function(){var e=arguments,i=e[0];if(a&&1==e.length&&_h(i))return a.plant(i).value();for(var o=0,r=n?t[o].apply(this,e):i;++o<n;)r=t[o].call(this,r);return r}}))}function $o(e,t,n,i,o,r,s,a,l,u){function c(){for(var g=arguments.length,v=nc(g),y=g;y--;)v[y]=arguments[y];if(m)var M=br(c),b=B(v,M);if(i&&(v=Po(v,i,o,m)),r&&(v=xo(v,r,s,m)),g-=b,m&&g<u){var A=K(v,M);return ar(e,t,$o,c.placeholder,n,v,A,a,l,u-g)}var T=h?n:this,E=p?T[e]:e;return g=v.length,a?v=Zr(v,a):f&&g>1&&v.reverse(),d&&l<g&&(v.length=l),this&&this!==Ln&&this instanceof c&&(E=_||Zo(E)),E.apply(T,v)}var d=t&Te,h=t&_e,p=t&ge,m=t&(ye|Me),f=t&we,_=p?oe:Zo(e);return c}function er(e,t){return function(n,i){return Ei(n,e,t(i),{})}}function tr(e,t){return function(n,i){var o;if(n===oe&&i===oe)return t;if(n!==oe&&(o=n),i!==oe){if(o===oe)return i;"string"==typeof n||"string"==typeof i?(n=mo(n),i=mo(i)):(n=po(n),i=po(i)),o=e(n,i)}return o}}function nr(e){return gr((function(t){return t=f(t,k(Ar())),no((function(n){var i=this;return e(t,(function(e){return a(e,i,n)}))}))}))}function ir(e,t){t=t===oe?" ":mo(t);var n=t.length;if(n<2)return n?to(t,e):t;var i=to(t,Vc(e/$(t)));return U(t)?wo(ee(i),0,e).join(""):i.slice(0,e)}function or(e,t,n,i){function o(){for(var t=-1,l=arguments.length,u=-1,c=i.length,d=nc(c+l),h=this&&this!==Ln&&this instanceof o?s:e;++u<c;)d[u]=i[u];for(;l--;)d[u++]=arguments[++t];return a(h,r?n:this,d)}var r=t&_e,s=Zo(e);return o}function rr(e){return function(t,n,i){return i&&"number"!=typeof i&&Pr(t,n,i)&&(n=i=oe),t=bl(t),n===oe?(n=t,t=0):n=bl(n),i=i===oe?t<n?1:-1:bl(i),eo(t,n,i,e)}}function sr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=El(t),n=El(n)),e(t,n)}}function ar(e,t,n,i,o,r,s,a,l,u){var c=t&ye,d=c?s:oe,h=c?oe:s,p=c?r:oe,m=c?oe:r;t|=c?be:Ae,(t&=~(c?Ae:be))&ve||(t&=~(_e|ge));var f=[e,t,o,p,d,m,h,a,l,u],_=n.apply(oe,f);return Hr(e)&&Sd(_,f),_.placeholder=i,Xr(_,e,t)}function lr(e){var t=sc[e];return function(e,n){if(e=El(e),n=null==n?0:zc(Al(n),292)){var i=(Il(e)+"e").split("e");return i=(Il(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function ur(e){return function(t){var n=Od(t);return n==Ze?z(t):n==tt?X(t):N(t,e(t))}}function cr(e,t,n,i,o,r,s,a){var l=t&ge;if(!l&&"function"!=typeof e)throw new cc(ae);var u=i?i.length:0;if(u||(t&=~(be|Ae),i=o=oe),s=s===oe?s:Yc(Al(s),0),a=a===oe?a:Al(a),u-=o?o.length:0,t&Ae){var c=i,d=o;i=o=oe}var h=l?oe:Td(e),p=[e,t,n,i,o,c,d,r,s,a];if(h&&Gr(p,h),e=p[0],t=p[1],n=p[2],i=p[3],o=p[4],a=p[9]=p[9]===oe?l?0:e.length:Yc(p[9]-u,0),!a&&t&(ye|Me)&&(t&=~(ye|Me)),t&&t!=_e)m=t==ye||t==Me?Xo(e,t,a):t!=be&&t!=(_e|be)||o.length?$o.apply(oe,p):or(e,t,n,i);else var m=zo(e,t,n);return Xr((h?vd:Sd)(m,p),e,t)}function dr(e,t,n,i){return e===oe||Ya(e,pc[n])&&!_c.call(i,n)?t:e}function hr(e,t,n,i,o,r){return ol(e)&&ol(t)&&(r.set(t,e),Gi(e,t,oe,hr,r),r.delete(t)),e}function pr(e){return pl(e)?oe:e}function mr(e,t,n,i,o,r){var s=n&me,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=r.get(e);if(u&&r.get(t))return u==t;var c=-1,d=!0,h=n&fe?new gn:oe;for(r.set(e,t),r.set(t,e);++c<a;){var p=e[c],m=t[c];if(i)var f=s?i(m,p,c,t,e,r):i(p,m,c,e,t,r);if(f!==oe){if(f)continue;d=!1;break}if(h){if(!y(t,(function(e,t){if(!x(h,t)&&(p===e||o(p,e,n,i,r)))return h.push(t)}))){d=!1;break}}else if(p!==m&&!o(p,m,n,i,r)){d=!1;break}}return r.delete(e),r.delete(t),d}function fr(e,t,n,i,o,r,s){switch(n){case lt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!r(new wc(e),new wc(t)));case Ue:case Ge:case Xe:return Ya(+e,+t);case ze:return e.name==t.name&&e.message==t.message;case et:case nt:return e==t+"";case Ze:var a=z;case tt:var l=i&me;if(a||(a=Z),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;i|=fe,s.set(e,t);var c=mr(a(e),a(t),i,o,r,s);return s.delete(e),c;case it:if(dd)return dd.call(e)==dd.call(t)}return!1}function _r(e,t,n,i,o,r){var s=n&me,a=vr(e),l=a.length;if(l!=vr(t).length&&!s)return!1;for(var u=l;u--;){var c=a[u];if(!(s?c in t:_c.call(t,c)))return!1}var d=r.get(e);if(d&&r.get(t))return d==t;var h=!0;r.set(e,t),r.set(t,e);for(var p=s;++u<l;){c=a[u];var m=e[c],f=t[c];if(i)var _=s?i(f,m,c,t,e,r):i(m,f,c,e,t,r);if(!(_===oe?m===f||o(m,f,n,i,r):_)){h=!1;break}p||(p="constructor"==c)}if(h&&!p){var g=e.constructor,v=t.constructor;g!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v)&&(h=!1)}return r.delete(e),r.delete(t),h}function gr(e){return Cd(qr(e,oe,ps),e+"")}function vr(e){return gi(e,Bl,Ed)}function yr(e){return gi(e,Wl,wd)}function Mr(e){for(var t=e.name+"",n=od[t],i=_c.call(od,t)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==e)return o.name}return t}function br(e){return(_c.call(n,"placeholder")?n:e).placeholder}function Ar(){var e=n.iteratee||Du;return e=e===Du?xi:e,arguments.length?e(arguments[0],arguments[1]):e}function Tr(e,t){var n=e.__data__;return Vr(t)?n["string"==typeof t?"string":"hash"]:n.map}function Er(e){for(var t=Bl(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,Fr(o)]}return t}function wr(e,t){var n=F(e,t);return Li(n)?n:oe}function Or(e){var t=_c.call(e,Lc),n=e[Lc];try{e[Lc]=oe;var i=!0}catch(e){}var o=yc.call(e);return i&&(t?e[Lc]=n:delete e[Lc]),o}function Ir(e,t,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],s=r.size;switch(r.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=zc(t,e+s);break;case"takeRight":e=Yc(e,t-s)}}return{start:e,end:t}}function Sr(e){var t=e.match(Vt);return t?t[1].split(Ht):[]}function jr(e,t,n){t=Eo(t,e);for(var i=-1,o=t.length,r=!1;++i<o;){var s=$r(t[i]);if(!(r=null!=e&&n(e,s)))break;e=e[s]}return r||++i!=o?r:!!(o=null==e?0:e.length)&&il(o)&&kr(s,o)&&(_h(e)||fh(e))}function Cr(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&_c.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Dr(e){return"function"!=typeof e.constructor||Wr(e)?{}:pd(Ic(e))}function Rr(e,t,n,i){var o=e.constructor;switch(t){case at:return Io(e);case Ue:case Ge:return new o(+e);case lt:return So(e,i);case ut:case ct:case dt:case ht:case pt:case mt:case ft:case _t:case gt:return Lo(e,i);case Ze:return jo(e,i,n);case Xe:case nt:return new o(e);case et:return Co(e);case tt:return Do(e,i,n);case it:return Ro(e)}}function Lr(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(xt,"{\n/* [wrapped with "+t+"] */\n")}function Nr(e){return _h(e)||fh(e)||!!(Dc&&e&&e[Dc])}function kr(e,t){return!!(t=null==t?Le:t)&&("number"==typeof e||Kt.test(e))&&e>-1&&e%1==0&&e<t}function Pr(e,t,n){if(!ol(n))return!1;var i=typeof t;return!!("number"==i?za(n)&&kr(t,n.length):"string"==i&&t in n)&&Ya(n[t],e)}function xr(e,t){if(_h(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_l(e))||(jt.test(e)||!St.test(e)||null!=t&&e in ac(t))}function Vr(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Hr(e){var t=Mr(e),i=n[t];if("function"!=typeof i||!(t in M.prototype))return!1;if(e===i)return!0;var o=Td(i);return!!o&&e===o[0]}function Br(e){return!!vc&&vc in e}function Wr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||pc)}function Fr(e){return e===e&&!ol(e)}function Ur(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==oe||e in ac(n)))}}function Gr(e,t){var n=e[1],i=t[1],o=n|i,r=o<(_e|ge|Te),s=i==Te&&n==ye||i==Te&&n==Ee&&e[7].length<=t[8]||i==(Te|Ee)&&t[7].length<=t[8]&&n==ye;if(!r&&!s)return e;i&_e&&(e[2]=t[2],o|=n&_e?0:ve);var a=t[3];if(a){var l=e[3];e[3]=l?Po(l,a,t[4]):a,e[4]=l?K(e[3],ce):t[4]}return a=t[5],a&&(l=e[5],e[5]=l?xo(l,a,t[6]):a,e[6]=l?K(e[5],ce):t[6]),a=t[7],a&&(e[7]=a),i&Te&&(e[8]=null==e[8]?t[8]:zc(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function Yr(e){var t=[];if(null!=e)for(var n in ac(e))t.push(n);return t}function zr(e){return yc.call(e)}function qr(e,t,n){return t=Yc(t===oe?e.length-1:t,0),function(){for(var i=arguments,o=-1,r=Yc(i.length-t,0),s=nc(r);++o<r;)s[o]=i[t+o];o=-1;for(var l=nc(t+1);++o<t;)l[o]=i[o];return l[t]=n(s),a(e,this,l)}}function Kr(e,t){return t.length<2?e:_i(e,ao(t,0,-1))}function Zr(e,t){for(var n=e.length,i=zc(t.length,n),o=Vo(e);i--;){var r=t[i];e[i]=kr(r,n)?o[r]:oe}return e}function Xr(e,t,n){var i=t+"";return Cd(e,Lr(i,ts(Sr(i),n)))}function Jr(e){var t=0,n=0;return function(){var i=qc(),o=je-(i-n);if(n=i,o>0){if(++t>=Se)return arguments[0]}else t=0;return e.apply(oe,arguments)}}function Qr(e,t){var n=-1,i=e.length,o=i-1;for(t=t===oe?i:t;++n<t;){var r=$i(n,o),s=e[r];e[r]=e[n],e[n]=s}return e.length=t,e}function $r(e){if("string"==typeof e||_l(e))return e;var t=e+"";return"0"==t&&1/e==-Re?"-0":t}function es(e){if(null!=e){try{return fc.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ts(e,t){return u(He,(function(n){var i="_."+n[0];t&n[1]&&!p(e,i)&&e.push(i)})),e.sort()}function ns(e){if(e instanceof M)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=Vo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function is(e,t,n){t=(n?Pr(e,t,n):t===oe)?1:Yc(Al(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,r=0,s=nc(Vc(i/t));o<i;)s[r++]=ao(e,o,o+=t);return s}function os(e){for(var t=-1,n=null==e?0:e.length,i=0,o=[];++t<n;){var r=e[t];r&&(o[i++]=r)}return o}function rs(){var e=arguments.length;if(!e)return[];for(var t=nc(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return _(_h(n)?Vo(n):[n],hi(t,1))}function ss(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===oe?1:Al(t),ao(e,t<0?0:t,i)):[]}function as(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===oe?1:Al(t),t=i-t,ao(e,0,t<0?0:t)):[]}function ls(e,t){return e&&e.length?vo(e,Ar(t,3),!0,!0):[]}function us(e,t){return e&&e.length?vo(e,Ar(t,3),!0):[]}function cs(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Pr(e,t,n)&&(n=0,i=o),ci(e,t,n,i)):[]}function ds(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=null==n?0:Al(n);return o<0&&(o=Yc(i+o,0)),T(e,Ar(t,3),o)}function hs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==oe&&(o=Al(n),o=n<0?Yc(i+o,0):zc(o,i-1)),T(e,Ar(t,3),o,!0)}function ps(e){return(null==e?0:e.length)?hi(e,1):[]}function ms(e){return(null==e?0:e.length)?hi(e,Re):[]}function fs(e,t){return(null==e?0:e.length)?(t=t===oe?1:Al(t),hi(e,t)):[]}function _s(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var o=e[t];i[o[0]]=o[1]}return i}function gs(e){return e&&e.length?e[0]:oe}function vs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=null==n?0:Al(n);return o<0&&(o=Yc(i+o,0)),E(e,t,o)}function ys(e){return(null==e?0:e.length)?ao(e,0,-1):[]}function Ms(e,t){return null==e?"":Uc.call(e,t)}function bs(e){var t=null==e?0:e.length;return t?e[t-1]:oe}function As(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==oe&&(o=Al(n),o=o<0?Yc(i+o,0):zc(o,i-1)),t===t?Q(e,t,o):T(e,O,o,!0)}function Ts(e,t){return e&&e.length?zi(e,Al(t)):oe}function Es(e,t){return e&&e.length&&t&&t.length?Ji(e,t):e}function ws(e,t,n){return e&&e.length&&t&&t.length?Ji(e,t,Ar(n,2)):e}function Os(e,t,n){return e&&e.length&&t&&t.length?Ji(e,t,oe,n):e}function Is(e,t){var n=[];if(!e||!e.length)return n;var i=-1,o=[],r=e.length;for(t=Ar(t,3);++i<r;){var s=e[i];t(s,i,e)&&(n.push(s),o.push(i))}return Qi(e,o),n}function Ss(e){return null==e?e:Xc.call(e)}function js(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Pr(e,t,n)?(t=0,n=i):(t=null==t?0:Al(t),n=n===oe?i:Al(n)),ao(e,t,n)):[]}function Cs(e,t){return uo(e,t)}function Ds(e,t,n){return co(e,t,Ar(n,2))}function Rs(e,t){var n=null==e?0:e.length;if(n){var i=uo(e,t);if(i<n&&Ya(e[i],t))return i}return-1}function Ls(e,t){return uo(e,t,!0)}function Ns(e,t,n){return co(e,t,Ar(n,2),!0)}function ks(e,t){if(null==e?0:e.length){var n=uo(e,t,!0)-1;if(Ya(e[n],t))return n}return-1}function Ps(e){return e&&e.length?ho(e):[]}function xs(e,t){return e&&e.length?ho(e,Ar(t,2)):[]}function Vs(e){var t=null==e?0:e.length;return t?ao(e,1,t):[]}function Hs(e,t,n){return e&&e.length?(t=n||t===oe?1:Al(t),ao(e,0,t<0?0:t)):[]}function Bs(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===oe?1:Al(t),t=i-t,ao(e,t<0?0:t,i)):[]}function Ws(e,t){return e&&e.length?vo(e,Ar(t,3),!1,!0):[]}function Fs(e,t){return e&&e.length?vo(e,Ar(t,3)):[]}function Us(e){return e&&e.length?fo(e):[]}function Gs(e,t){return e&&e.length?fo(e,Ar(t,2)):[]}function Ys(e,t){return t="function"==typeof t?t:oe,e&&e.length?fo(e,oe,t):[]}function zs(e){if(!e||!e.length)return[];var t=0;return e=h(e,(function(e){if(qa(e))return t=Yc(e.length,t),!0})),L(t,(function(t){return f(e,S(t))}))}function qs(e,t){if(!e||!e.length)return[];var n=zs(e);return null==t?n:f(n,(function(e){return a(t,oe,e)}))}function Ks(e,t){return bo(e||[],t||[],Yn)}function Zs(e,t){return bo(e||[],t||[],ro)}function Xs(e){var t=n(e);return t.__chain__=!0,t}function Js(e,t){return t(e),e}function Qs(e,t){return t(e)}function $s(){return Xs(this)}function ea(){return new o(this.value(),this.__chain__)}function ta(){this.__values__===oe&&(this.__values__=Ml(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?oe:this.__values__[this.__index__++]}}function na(){return this}function ia(e){for(var t,n=this;n instanceof i;){var o=ns(n);o.__index__=0,o.__values__=oe,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t}function oa(){var e=this.__wrapped__;if(e instanceof M){var t=e;return this.__actions__.length&&(t=new M(this)),t=t.reverse(),t.__actions__.push({func:Qs,args:[Ss],thisArg:oe}),new o(t,this.__chain__)}return this.thru(Ss)}function ra(){return yo(this.__wrapped__,this.__actions__)}function sa(e,t,n){var i=_h(e)?d:li;return n&&Pr(e,t,n)&&(t=oe),i(e,Ar(t,3))}function aa(e,t){return(_h(e)?h:di)(e,Ar(t,3))}function la(e,t){return hi(ma(e,t),1)}function ua(e,t){return hi(ma(e,t),Re)}function ca(e,t,n){return n=n===oe?1:Al(n),hi(ma(e,t),n)}function da(e,t){return(_h(e)?u:md)(e,Ar(t,3))}function ha(e,t){return(_h(e)?c:fd)(e,Ar(t,3))}function pa(e,t,n,i){e=za(e)?e:$l(e),n=n&&!i?Al(n):0;var o=e.length;return n<0&&(n=Yc(o+n,0)),fl(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&E(e,t,n)>-1}function ma(e,t){return(_h(e)?f:Wi)(e,Ar(t,3))}function fa(e,t,n,i){return null==e?[]:(_h(t)||(t=null==t?[]:[t]),n=i?oe:n,_h(n)||(n=null==n?[]:[n]),qi(e,t,n))}function _a(e,t,n){var i=_h(e)?g:C,o=arguments.length<3;return i(e,Ar(t,4),n,o,md)}function ga(e,t,n){var i=_h(e)?v:C,o=arguments.length<3;return i(e,Ar(t,4),n,o,fd)}function va(e,t){return(_h(e)?h:di)(e,Ra(Ar(t,3)))}function ya(e){return(_h(e)?Nn:io)(e)}function Ma(e,t,n){return t=(n?Pr(e,t,n):t===oe)?1:Al(t),(_h(e)?kn:oo)(e,t)}function ba(e){return(_h(e)?xn:so)(e)}function Aa(e){if(null==e)return 0;if(za(e))return fl(e)?$(e):e.length;var t=Od(e);return t==Ze||t==tt?e.size:Vi(e).length}function Ta(e,t,n){var i=_h(e)?y:lo;return n&&Pr(e,t,n)&&(t=oe),i(e,Ar(t,3))}function Ea(e,t){if("function"!=typeof t)throw new cc(ae);return e=Al(e),function(){if(--e<1)return t.apply(this,arguments)}}function wa(e,t,n){return t=n?oe:t,t=e&&null==t?e.length:t,cr(e,Te,oe,oe,oe,oe,t)}function Oa(e,t){var n;if("function"!=typeof t)throw new cc(ae);return e=Al(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=oe),n}}function Ia(e,t,n){t=n?oe:t;var i=cr(e,ye,oe,oe,oe,oe,oe,t);return i.placeholder=Ia.placeholder,i}function Sa(e,t,n){t=n?oe:t;var i=cr(e,Me,oe,oe,oe,oe,oe,t);return i.placeholder=Sa.placeholder,i}function ja(e,t,n){function i(t){var n=h,i=p;return h=p=oe,v=t,f=e.apply(i,n)}function o(e){return v=e,_=jd(a,t),y?i(e):f}function r(e){var n=e-g,i=e-v,o=t-n;return M?zc(o,m-i):o}function s(e){var n=e-g,i=e-v;return g===oe||n>=t||n<0||M&&i>=m}function a(){var e=oh();if(s(e))return l(e);_=jd(a,r(e))}function l(e){return _=oe,b&&h?i(e):(h=p=oe,f)}function u(){_!==oe&&bd(_),v=0,h=g=p=_=oe}function c(){return _===oe?f:l(oh())}function d(){var e=oh(),n=s(e);if(h=arguments,p=this,g=e,n){if(_===oe)return o(g);if(M)return _=jd(a,t),i(g)}return _===oe&&(_=jd(a,t)),f}var h,p,m,f,_,g,v=0,y=!1,M=!1,b=!0;if("function"!=typeof e)throw new cc(ae);return t=El(t)||0,ol(n)&&(y=!!n.leading,M="maxWait"in n,m=M?Yc(El(n.maxWait)||0,t):m,b="trailing"in n?!!n.trailing:b),d.cancel=u,d.flush=c,d}function Ca(e){return cr(e,we)}function Da(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new cc(ae);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s)||r,s};return n.cache=new(Da.Cache||un),n}function Ra(e){if("function"!=typeof e)throw new cc(ae);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function La(e){return Oa(2,e)}function Na(e,t){if("function"!=typeof e)throw new cc(ae);return t=t===oe?t:Al(t),no(e,t)}function ka(e,t){if("function"!=typeof e)throw new cc(ae);return t=null==t?0:Yc(Al(t),0),no((function(n){var i=n[t],o=wo(n,0,t);return i&&_(o,i),a(e,this,o)}))}function Pa(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new cc(ae);return ol(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),ja(e,t,{leading:i,maxWait:t,trailing:o})}function xa(e){return wa(e,1)}function Va(e,t){return ch(To(t),e)}function Ha(){if(!arguments.length)return[];var e=arguments[0];return _h(e)?e:[e]}function Ba(e){return ii(e,pe)}function Wa(e,t){return t="function"==typeof t?t:oe,ii(e,pe,t)}function Fa(e){return ii(e,de|pe)}function Ua(e,t){return t="function"==typeof t?t:oe,ii(e,de|pe,t)}function Ga(e,t){return null==t||ri(e,t,Bl(t))}function Ya(e,t){return e===t||e!==e&&t!==t}function za(e){return null!=e&&il(e.length)&&!tl(e)}function qa(e){return rl(e)&&za(e)}function Ka(e){return!0===e||!1===e||rl(e)&&vi(e)==Ue}function Za(e){return rl(e)&&1===e.nodeType&&!pl(e)}function Xa(e){if(null==e)return!0;if(za(e)&&(_h(e)||"string"==typeof e||"function"==typeof e.splice||vh(e)||Th(e)||fh(e)))return!e.length;var t=Od(e);if(t==Ze||t==tt)return!e.size;if(Wr(e))return!Vi(e).length;for(var n in e)if(_c.call(e,n))return!1;return!0}function Ja(e,t){return ji(e,t)}function Qa(e,t,n){n="function"==typeof n?n:oe;var i=n?n(e,t):oe;return i===oe?ji(e,t,oe,n):!!i}function $a(e){if(!rl(e))return!1;var t=vi(e);return t==ze||t==Ye||"string"==typeof e.message&&"string"==typeof e.name&&!pl(e)}function el(e){return"number"==typeof e&&Fc(e)}function tl(e){if(!ol(e))return!1;var t=vi(e);return t==qe||t==Ke||t==Fe||t==$e}function nl(e){return"number"==typeof e&&e==Al(e)}function il(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Le}function ol(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rl(e){return null!=e&&"object"==typeof e}function sl(e,t){return e===t||Ri(e,t,Er(t))}function al(e,t,n){return n="function"==typeof n?n:oe,Ri(e,t,Er(t),n)}function ll(e){return hl(e)&&e!=+e}function ul(e){if(Id(e))throw new oc(se);return Li(e)}function cl(e){return null===e}function dl(e){return null==e}function hl(e){return"number"==typeof e||rl(e)&&vi(e)==Xe}function pl(e){if(!rl(e)||vi(e)!=Qe)return!1;var t=Ic(e);if(null===t)return!0;var n=_c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&fc.call(n)==Mc}function ml(e){return nl(e)&&e>=-Le&&e<=Le}function fl(e){return"string"==typeof e||!_h(e)&&rl(e)&&vi(e)==nt}function _l(e){return"symbol"==typeof e||rl(e)&&vi(e)==it}function gl(e){return e===oe}function vl(e){return rl(e)&&Od(e)==rt}function yl(e){return rl(e)&&vi(e)==st}function Ml(e){if(!e)return[];if(za(e))return fl(e)?ee(e):Vo(e);if(Rc&&e[Rc])return Y(e[Rc]());var t=Od(e);return(t==Ze?z:t==tt?Z:$l)(e)}function bl(e){if(!e)return 0===e?e:0;if((e=El(e))===Re||e===-Re){return(e<0?-1:1)*Ne}return e===e?e:0}function Al(e){var t=bl(e),n=t%1;return t===t?n?t-n:t:0}function Tl(e){return e?ni(Al(e),0,Pe):0}function El(e){if("number"==typeof e)return e;if(_l(e))return ke;if(ol(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ol(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Nt,"");var n=Yt.test(e);return n||qt.test(e)?Cn(e.slice(2),n?2:8):Gt.test(e)?ke:+e}function wl(e){return Ho(e,Wl(e))}function Ol(e){return e?ni(Al(e),-Le,Le):0===e?e:0}function Il(e){return null==e?"":mo(e)}function Sl(e,t){var n=pd(e);return null==t?n:Qn(n,t)}function jl(e,t){return A(e,Ar(t,3),pi)}function Cl(e,t){return A(e,Ar(t,3),mi)}function Dl(e,t){return null==e?e:_d(e,Ar(t,3),Wl)}function Rl(e,t){return null==e?e:gd(e,Ar(t,3),Wl)}function Ll(e,t){return e&&pi(e,Ar(t,3))}function Nl(e,t){return e&&mi(e,Ar(t,3))}function kl(e){return null==e?[]:fi(e,Bl(e))}function Pl(e){return null==e?[]:fi(e,Wl(e))}function xl(e,t,n){var i=null==e?oe:_i(e,t);return i===oe?n:i}function Vl(e,t){return null!=e&&jr(e,t,Mi)}function Hl(e,t){return null!=e&&jr(e,t,bi)}function Bl(e){return za(e)?Rn(e):Vi(e)}function Wl(e){return za(e)?Rn(e,!0):Hi(e)}function Fl(e,t){var n={};return t=Ar(t,3),pi(e,(function(e,i,o){ei(n,t(e,i,o),e)})),n}function Ul(e,t){var n={};return t=Ar(t,3),pi(e,(function(e,i,o){ei(n,i,t(e,i,o))})),n}function Gl(e,t){return Yl(e,Ra(Ar(t)))}function Yl(e,t){if(null==e)return{};var n=f(yr(e),(function(e){return[e]}));return t=Ar(t),Zi(e,n,(function(e,n){return t(e,n[0])}))}function zl(e,t,n){t=Eo(t,e);var i=-1,o=t.length;for(o||(o=1,e=oe);++i<o;){var r=null==e?oe:e[$r(t[i])];r===oe&&(i=o,r=n),e=tl(r)?r.call(e):r}return e}function ql(e,t,n){return null==e?e:ro(e,t,n)}function Kl(e,t,n,i){return i="function"==typeof i?i:oe,null==e?e:ro(e,t,n,i)}function Zl(e,t,n){var i=_h(e),o=i||vh(e)||Th(e);if(t=Ar(t,4),null==n){var r=e&&e.constructor;n=o?i?new r:[]:ol(e)&&tl(r)?pd(Ic(e)):{}}return(o?u:pi)(e,(function(e,i,o){return t(n,e,i,o)})),n}function Xl(e,t){return null==e||_o(e,t)}function Jl(e,t,n){return null==e?e:go(e,t,To(n))}function Ql(e,t,n,i){return i="function"==typeof i?i:oe,null==e?e:go(e,t,To(n),i)}function $l(e){return null==e?[]:P(e,Bl(e))}function eu(e){return null==e?[]:P(e,Wl(e))}function tu(e,t,n){return n===oe&&(n=t,t=oe),n!==oe&&(n=El(n),n=n===n?n:0),t!==oe&&(t=El(t),t=t===t?t:0),ni(El(e),t,n)}function nu(e,t,n){return t=bl(t),n===oe?(n=t,t=0):n=bl(n),e=El(e),Ai(e,t,n)}function iu(e,t,n){if(n&&"boolean"!=typeof n&&Pr(e,t,n)&&(t=n=oe),n===oe&&("boolean"==typeof t?(n=t,t=oe):"boolean"==typeof e&&(n=e,e=oe)),e===oe&&t===oe?(e=0,t=1):(e=bl(e),t===oe?(t=e,e=0):t=bl(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=Zc();return zc(e+o*(t-e+jn("1e-"+((o+"").length-1))),t)}return $i(e,t)}function ou(e){return Zh(Il(e).toLowerCase())}function ru(e){return(e=Il(e))&&e.replace(Zt,zn).replace(_n,"")}function su(e,t,n){e=Il(e),t=mo(t);var i=e.length;n=n===oe?i:ni(Al(n),0,i);var o=n;return(n-=t.length)>=0&&e.slice(n,o)==t}function au(e){return e=Il(e),e&&Et.test(e)?e.replace(At,qn):e}function lu(e){return e=Il(e),e&&Lt.test(e)?e.replace(Rt,"\\$&"):e}function uu(e,t,n){e=Il(e),t=Al(t);var i=t?$(e):0;if(!t||i>=t)return e;var o=(t-i)/2;return ir(Hc(o),n)+e+ir(Vc(o),n)}function cu(e,t,n){e=Il(e),t=Al(t);var i=t?$(e):0;return t&&i<t?e+ir(t-i,n):e}function du(e,t,n){e=Il(e),t=Al(t);var i=t?$(e):0;return t&&i<t?ir(t-i,n)+e:e}function hu(e,t,n){return n||null==t?t=0:t&&(t=+t),Kc(Il(e).replace(kt,""),t||0)}function pu(e,t,n){return t=(n?Pr(e,t,n):t===oe)?1:Al(t),to(Il(e),t)}function mu(){var e=arguments,t=Il(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function fu(e,t,n){return n&&"number"!=typeof n&&Pr(e,t,n)&&(t=n=oe),(n=n===oe?Pe:n>>>0)?(e=Il(e),e&&("string"==typeof t||null!=t&&!bh(t))&&!(t=mo(t))&&U(e)?wo(ee(e),0,n):e.split(t,n)):[]}function _u(e,t,n){return e=Il(e),n=null==n?0:ni(Al(n),0,e.length),t=mo(t),e.slice(n,n+t.length)==t}function gu(e,t,i){var o=n.templateSettings;i&&Pr(e,t,i)&&(t=oe),e=Il(e),t=Sh({},t,o,dr);var r,s,a=Sh({},t.imports,o.imports,dr),l=Bl(a),u=P(a,l),c=0,d=t.interpolate||Xt,h="__p += '",p=lc((t.escape||Xt).source+"|"+d.source+"|"+(d===It?Ft:Xt).source+"|"+(t.evaluate||Xt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++An+"]")+"\n";e.replace(p,(function(t,n,i,o,a,l){return i||(i=o),h+=e.slice(c,l).replace(Jt,W),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),h+="';\n";var f=t.variable;f||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(vt,""):h).replace(yt,"$1").replace(Mt,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=Xh((function(){return rc(l,m+"return "+h).apply(oe,u)}));if(_.source=h,$a(_))throw _;return _}function vu(e){return Il(e).toLowerCase()}function yu(e){return Il(e).toUpperCase()}function Mu(e,t,n){if((e=Il(e))&&(n||t===oe))return e.replace(Nt,"");if(!e||!(t=mo(t)))return e;var i=ee(e),o=ee(t);return wo(i,V(i,o),H(i,o)+1).join("")}function bu(e,t,n){if((e=Il(e))&&(n||t===oe))return e.replace(Pt,"");if(!e||!(t=mo(t)))return e;var i=ee(e);return wo(i,0,H(i,ee(t))+1).join("")}function Au(e,t,n){if((e=Il(e))&&(n||t===oe))return e.replace(kt,"");if(!e||!(t=mo(t)))return e;var i=ee(e);return wo(i,V(i,ee(t))).join("")}function Tu(e,t){var n=Oe,i=Ie;if(ol(t)){var o="separator"in t?t.separator:o;n="length"in t?Al(t.length):n,i="omission"in t?mo(t.omission):i}e=Il(e);var r=e.length;if(U(e)){var s=ee(e);r=s.length}if(n>=r)return e;var a=n-$(i);if(a<1)return i;var l=s?wo(s,0,a).join(""):e.slice(0,a);if(o===oe)return l+i;if(s&&(a+=l.length-a),bh(o)){if(e.slice(a).search(o)){var u,c=l;for(o.global||(o=lc(o.source,Il(Ut.exec(o))+"g")),o.lastIndex=0;u=o.exec(c);)var d=u.index;l=l.slice(0,d===oe?a:d)}}else if(e.indexOf(mo(o),a)!=a){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+i}function Eu(e){return e=Il(e),
e&&Tt.test(e)?e.replace(bt,Kn):e}function wu(e,t,n){return e=Il(e),t=n?oe:t,t===oe?G(e)?ie(e):b(e):e.match(t)||[]}function Ou(e){var t=null==e?0:e.length,n=Ar();return e=t?f(e,(function(e){if("function"!=typeof e[1])throw new cc(ae);return[n(e[0]),e[1]]})):[],no((function(n){for(var i=-1;++i<t;){var o=e[i];if(a(o[0],this,n))return a(o[1],this,n)}}))}function Iu(e){return oi(ii(e,de))}function Su(e){return function(){return e}}function ju(e,t){return null==e||e!==e?t:e}function Cu(e){return e}function Du(e){return xi("function"==typeof e?e:ii(e,de))}function Ru(e){return Fi(ii(e,de))}function Lu(e,t){return Ui(e,ii(t,de))}function Nu(e,t,n){var i=Bl(t),o=fi(t,i);null!=n||ol(t)&&(o.length||!i.length)||(n=t,t=e,e=this,o=fi(t,Bl(t)));var r=!(ol(n)&&"chain"in n&&!n.chain),s=tl(e);return u(o,(function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(r||t){var n=e(this.__wrapped__);return(n.__actions__=Vo(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,_([this.value()],arguments))})})),e}function ku(){return Ln._===this&&(Ln._=bc),this}function Pu(){}function xu(e){return e=Al(e),no((function(t){return zi(t,e)}))}function Vu(e){return xr(e)?S($r(e)):Xi(e)}function Hu(e){return function(t){return null==e?oe:_i(e,t)}}function Bu(){return[]}function Wu(){return!1}function Fu(){return{}}function Uu(){return""}function Gu(){return!0}function Yu(e,t){if((e=Al(e))<1||e>Le)return[];var n=Pe,i=zc(e,Pe);t=Ar(t),e-=Pe;for(var o=L(i,t);++n<e;)t(n);return o}function zu(e){return _h(e)?f(e,$r):_l(e)?[e]:Vo(Dd(Il(e)))}function qu(e){var t=++gc;return Il(e)+t}function Ku(e){return e&&e.length?ui(e,Cu,yi):oe}function Zu(e,t){return e&&e.length?ui(e,Ar(t,2),yi):oe}function Xu(e){return I(e,Cu)}function Ju(e,t){return I(e,Ar(t,2))}function Qu(e){return e&&e.length?ui(e,Cu,Bi):oe}function $u(e,t){return e&&e.length?ui(e,Ar(t,2),Bi):oe}function ec(e){return e&&e.length?R(e,Cu):0}function tc(e,t){return e&&e.length?R(e,Ar(t,2)):0}t=null==t?Ln:Zn.defaults(Ln.Object(),t,Zn.pick(Ln,bn));var nc=t.Array,ic=t.Date,oc=t.Error,rc=t.Function,sc=t.Math,ac=t.Object,lc=t.RegExp,uc=t.String,cc=t.TypeError,dc=nc.prototype,hc=rc.prototype,pc=ac.prototype,mc=t["__core-js_shared__"],fc=hc.toString,_c=pc.hasOwnProperty,gc=0,vc=(function(){var e=/[^.]+$/.exec(mc&&mc.keys&&mc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),yc=pc.toString,Mc=fc.call(ac),bc=Ln._,Ac=lc("^"+fc.call(_c).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tc=Pn?t.Buffer:oe,Ec=t.Symbol,wc=t.Uint8Array,Oc=Tc?Tc.allocUnsafe:oe,Ic=q(ac.getPrototypeOf,ac),Sc=ac.create,jc=pc.propertyIsEnumerable,Cc=dc.splice,Dc=Ec?Ec.isConcatSpreadable:oe,Rc=Ec?Ec.iterator:oe,Lc=Ec?Ec.toStringTag:oe,Nc=(function(){try{var e=wr(ac,"defineProperty");return e({},"",{}),e}catch(e){}})(),kc=t.clearTimeout!==Ln.clearTimeout&&t.clearTimeout,Pc=ic&&ic.now!==Ln.Date.now&&ic.now,xc=t.setTimeout!==Ln.setTimeout&&t.setTimeout,Vc=sc.ceil,Hc=sc.floor,Bc=ac.getOwnPropertySymbols,Wc=Tc?Tc.isBuffer:oe,Fc=t.isFinite,Uc=dc.join,Gc=q(ac.keys,ac),Yc=sc.max,zc=sc.min,qc=ic.now,Kc=t.parseInt,Zc=sc.random,Xc=dc.reverse,Jc=wr(t,"DataView"),Qc=wr(t,"Map"),$c=wr(t,"Promise"),ed=wr(t,"Set"),td=wr(t,"WeakMap"),nd=wr(ac,"create"),id=td&&new td,od={},rd=es(Jc),sd=es(Qc),ad=es($c),ld=es(ed),ud=es(td),cd=Ec?Ec.prototype:oe,dd=cd?cd.valueOf:oe,hd=cd?cd.toString:oe,pd=(function(){function e(){}return function(t){if(!ol(t))return{};if(Sc)return Sc(t);e.prototype=t;var n=new e;return e.prototype=oe,n}})();n.templateSettings={escape:wt,evaluate:Ot,interpolate:It,variable:"",imports:{_:n}},n.prototype=i.prototype,n.prototype.constructor=n,o.prototype=pd(i.prototype),o.prototype.constructor=o,M.prototype=pd(i.prototype),M.prototype.constructor=M,ne.prototype.clear=Bt,ne.prototype.delete=Qt,ne.prototype.get=$t,ne.prototype.has=en,ne.prototype.set=tn,nn.prototype.clear=on,nn.prototype.delete=rn,nn.prototype.get=sn,nn.prototype.has=an,nn.prototype.set=ln,un.prototype.clear=cn,un.prototype.delete=dn,un.prototype.get=hn,un.prototype.has=pn,un.prototype.set=mn,gn.prototype.add=gn.prototype.push=vn,gn.prototype.has=yn,Mn.prototype.clear=wn,Mn.prototype.delete=On,Mn.prototype.get=In,Mn.prototype.has=Sn,Mn.prototype.set=Dn;var md=Go(pi),fd=Go(mi,!0),_d=Yo(),gd=Yo(!0),vd=id?function(e,t){return id.set(e,t),e}:Cu,yd=Nc?function(e,t){return Nc(e,"toString",{configurable:!0,enumerable:!1,value:Su(t),writable:!0})}:Cu,Md=no,bd=kc||function(e){return Ln.clearTimeout(e)},Ad=ed&&1/Z(new ed([,-0]))[1]==Re?function(e){return new ed(e)}:Pu,Td=id?function(e){return id.get(e)}:Pu,Ed=Bc?function(e){return null==e?[]:(e=ac(e),h(Bc(e),(function(t){return jc.call(e,t)})))}:Bu,wd=Bc?function(e){for(var t=[];e;)_(t,Ed(e)),e=Ic(e);return t}:Bu,Od=vi;(Jc&&Od(new Jc(new ArrayBuffer(1)))!=lt||Qc&&Od(new Qc)!=Ze||$c&&"[object Promise]"!=Od($c.resolve())||ed&&Od(new ed)!=tt||td&&Od(new td)!=rt)&&(Od=function(e){var t=vi(e),n=t==Qe?e.constructor:oe,i=n?es(n):"";if(i)switch(i){case rd:return lt;case sd:return Ze;case ad:return"[object Promise]";case ld:return tt;case ud:return rt}return t});var Id=mc?tl:Wu,Sd=Jr(vd),jd=xc||function(e,t){return Ln.setTimeout(e,t)},Cd=Jr(yd),Dd=(function(e){var t=Da(e,(function(e){return n.size===ue&&n.clear(),e})),n=t.cache;return t})((function(e){var t=[];return Ct.test(e)&&t.push(""),e.replace(Dt,(function(e,n,i,o){t.push(i?o.replace(Wt,"$1"):n||e)})),t})),Rd=no((function(e,t){return qa(e)?ai(e,hi(t,1,qa,!0)):[]})),Ld=no((function(e,t){var n=bs(t);return qa(n)&&(n=oe),qa(e)?ai(e,hi(t,1,qa,!0),Ar(n,2)):[]})),Nd=no((function(e,t){var n=bs(t);return qa(n)&&(n=oe),qa(e)?ai(e,hi(t,1,qa,!0),oe,n):[]})),kd=no((function(e){var t=f(e,Ao);return t.length&&t[0]===e[0]?Ti(t):[]})),Pd=no((function(e){var t=bs(e),n=f(e,Ao);return t===bs(n)?t=oe:n.pop(),n.length&&n[0]===e[0]?Ti(n,Ar(t,2)):[]})),xd=no((function(e){var t=bs(e),n=f(e,Ao);return t="function"==typeof t?t:oe,t&&n.pop(),n.length&&n[0]===e[0]?Ti(n,oe,t):[]})),Vd=no(Es),Hd=gr((function(e,t){var n=null==e?0:e.length,i=ti(e,t);return Qi(e,f(t,(function(e){return kr(e,n)?+e:e})).sort(No)),i})),Bd=no((function(e){return fo(hi(e,1,qa,!0))})),Wd=no((function(e){var t=bs(e);return qa(t)&&(t=oe),fo(hi(e,1,qa,!0),Ar(t,2))})),Fd=no((function(e){var t=bs(e);return t="function"==typeof t?t:oe,fo(hi(e,1,qa,!0),oe,t)})),Ud=no((function(e,t){return qa(e)?ai(e,t):[]})),Gd=no((function(e){return Mo(h(e,qa))})),Yd=no((function(e){var t=bs(e);return qa(t)&&(t=oe),Mo(h(e,qa),Ar(t,2))})),zd=no((function(e){var t=bs(e);return t="function"==typeof t?t:oe,Mo(h(e,qa),oe,t)})),qd=no(zs),Kd=no((function(e){var t=e.length,n=t>1?e[t-1]:oe;return n="function"==typeof n?(e.pop(),n):oe,qs(e,n)})),Zd=gr((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return ti(t,e)};return!(t>1||this.__actions__.length)&&i instanceof M&&kr(n)?(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:Qs,args:[r],thisArg:oe}),new o(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(oe),e}))):this.thru(r)})),Xd=Fo((function(e,t,n){_c.call(e,n)?++e[n]:ei(e,n,1)})),Jd=Jo(ds),Qd=Jo(hs),$d=Fo((function(e,t,n){_c.call(e,n)?e[n].push(t):ei(e,n,[t])})),eh=no((function(e,t,n){var i=-1,o="function"==typeof t,r=za(e)?nc(e.length):[];return md(e,(function(e){r[++i]=o?a(t,e,n):wi(e,t,n)})),r})),th=Fo((function(e,t,n){ei(e,n,t)})),nh=Fo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ih=no((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Pr(e,t[0],t[1])?t=[]:n>2&&Pr(t[0],t[1],t[2])&&(t=[t[0]]),qi(e,hi(t,1),[])})),oh=Pc||function(){return Ln.Date.now()},rh=no((function(e,t,n){var i=_e;if(n.length){var o=K(n,br(rh));i|=be}return cr(e,i,t,n,o)})),sh=no((function(e,t,n){var i=_e|ge;if(n.length){var o=K(n,br(sh));i|=be}return cr(t,i,e,n,o)})),ah=no((function(e,t){return si(e,1,t)})),lh=no((function(e,t,n){return si(e,El(t)||0,n)}));Da.Cache=un;var uh=Md((function(e,t){t=1==t.length&&_h(t[0])?f(t[0],k(Ar())):f(hi(t,1),k(Ar()));var n=t.length;return no((function(i){for(var o=-1,r=zc(i.length,n);++o<r;)i[o]=t[o].call(this,i[o]);return a(e,this,i)}))})),ch=no((function(e,t){var n=K(t,br(ch));return cr(e,be,oe,t,n)})),dh=no((function(e,t){var n=K(t,br(dh));return cr(e,Ae,oe,t,n)})),hh=gr((function(e,t){return cr(e,Ee,oe,oe,oe,t)})),ph=sr(yi),mh=sr((function(e,t){return e>=t})),fh=Oi(function(){return arguments}())?Oi:function(e){return rl(e)&&_c.call(e,"callee")&&!jc.call(e,"callee")},_h=nc.isArray,gh=Hn?k(Hn):Ii,vh=Wc||Wu,yh=Bn?k(Bn):Si,Mh=Wn?k(Wn):Di,bh=Fn?k(Fn):Ni,Ah=Un?k(Un):ki,Th=Gn?k(Gn):Pi,Eh=sr(Bi),wh=sr((function(e,t){return e<=t})),Oh=Uo((function(e,t){if(Wr(t)||za(t))return void Ho(t,Bl(t),e);for(var n in t)_c.call(t,n)&&Yn(e,n,t[n])})),Ih=Uo((function(e,t){Ho(t,Wl(t),e)})),Sh=Uo((function(e,t,n,i){Ho(t,Wl(t),e,i)})),jh=Uo((function(e,t,n,i){Ho(t,Bl(t),e,i)})),Ch=gr(ti),Dh=no((function(e){return e.push(oe,dr),a(Sh,oe,e)})),Rh=no((function(e){return e.push(oe,hr),a(xh,oe,e)})),Lh=er((function(e,t,n){e[t]=n}),Su(Cu)),Nh=er((function(e,t,n){_c.call(e,t)?e[t].push(n):e[t]=[n]}),Ar),kh=no(wi),Ph=Uo((function(e,t,n){Gi(e,t,n)})),xh=Uo((function(e,t,n,i){Gi(e,t,n,i)})),Vh=gr((function(e,t){var n={};if(null==e)return n;var i=!1;t=f(t,(function(t){return t=Eo(t,e),i||(i=t.length>1),t})),Ho(e,yr(e),n),i&&(n=ii(n,de|he|pe,pr));for(var o=t.length;o--;)_o(n,t[o]);return n})),Hh=gr((function(e,t){return null==e?{}:Ki(e,t)})),Bh=ur(Bl),Wh=ur(Wl),Fh=Ko((function(e,t,n){return t=t.toLowerCase(),e+(n?ou(t):t)})),Uh=Ko((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Gh=Ko((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Yh=qo("toLowerCase"),zh=Ko((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),qh=Ko((function(e,t,n){return e+(n?" ":"")+Zh(t)})),Kh=Ko((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zh=qo("toUpperCase"),Xh=no((function(e,t){try{return a(e,oe,t)}catch(e){return $a(e)?e:new oc(e)}})),Jh=gr((function(e,t){return u(t,(function(t){t=$r(t),ei(e,t,rh(e[t],e))})),e})),Qh=Qo(),$h=Qo(!0),ep=no((function(e,t){return function(n){return wi(n,e,t)}})),tp=no((function(e,t){return function(n){return wi(e,n,t)}})),np=nr(f),ip=nr(d),op=nr(y),rp=rr(),sp=rr(!0),ap=tr((function(e,t){return e+t}),0),lp=lr("ceil"),up=tr((function(e,t){return e/t}),1),cp=lr("floor"),dp=tr((function(e,t){return e*t}),1),hp=lr("round"),pp=tr((function(e,t){return e-t}),0);return n.after=Ea,n.ary=wa,n.assign=Oh,n.assignIn=Ih,n.assignInWith=Sh,n.assignWith=jh,n.at=Ch,n.before=Oa,n.bind=rh,n.bindAll=Jh,n.bindKey=sh,n.castArray=Ha,n.chain=Xs,n.chunk=is,n.compact=os,n.concat=rs,n.cond=Ou,n.conforms=Iu,n.constant=Su,n.countBy=Xd,n.create=Sl,n.curry=Ia,n.curryRight=Sa,n.debounce=ja,n.defaults=Dh,n.defaultsDeep=Rh,n.defer=ah,n.delay=lh,n.difference=Rd,n.differenceBy=Ld,n.differenceWith=Nd,n.drop=ss,n.dropRight=as,n.dropRightWhile=ls,n.dropWhile=us,n.fill=cs,n.filter=aa,n.flatMap=la,n.flatMapDeep=ua,n.flatMapDepth=ca,n.flatten=ps,n.flattenDeep=ms,n.flattenDepth=fs,n.flip=Ca,n.flow=Qh,n.flowRight=$h,n.fromPairs=_s,n.functions=kl,n.functionsIn=Pl,n.groupBy=$d,n.initial=ys,n.intersection=kd,n.intersectionBy=Pd,n.intersectionWith=xd,n.invert=Lh,n.invertBy=Nh,n.invokeMap=eh,n.iteratee=Du,n.keyBy=th,n.keys=Bl,n.keysIn=Wl,n.map=ma,n.mapKeys=Fl,n.mapValues=Ul,n.matches=Ru,n.matchesProperty=Lu,n.memoize=Da,n.merge=Ph,n.mergeWith=xh,n.method=ep,n.methodOf=tp,n.mixin=Nu,n.negate=Ra,n.nthArg=xu,n.omit=Vh,n.omitBy=Gl,n.once=La,n.orderBy=fa,n.over=np,n.overArgs=uh,n.overEvery=ip,n.overSome=op,n.partial=ch,n.partialRight=dh,n.partition=nh,n.pick=Hh,n.pickBy=Yl,n.property=Vu,n.propertyOf=Hu,n.pull=Vd,n.pullAll=Es,n.pullAllBy=ws,n.pullAllWith=Os,n.pullAt=Hd,n.range=rp,n.rangeRight=sp,n.rearg=hh,n.reject=va,n.remove=Is,n.rest=Na,n.reverse=Ss,n.sampleSize=Ma,n.set=ql,n.setWith=Kl,n.shuffle=ba,n.slice=js,n.sortBy=ih,n.sortedUniq=Ps,n.sortedUniqBy=xs,n.split=fu,n.spread=ka,n.tail=Vs,n.take=Hs,n.takeRight=Bs,n.takeRightWhile=Ws,n.takeWhile=Fs,n.tap=Js,n.throttle=Pa,n.thru=Qs,n.toArray=Ml,n.toPairs=Bh,n.toPairsIn=Wh,n.toPath=zu,n.toPlainObject=wl,n.transform=Zl,n.unary=xa,n.union=Bd,n.unionBy=Wd,n.unionWith=Fd,n.uniq=Us,n.uniqBy=Gs,n.uniqWith=Ys,n.unset=Xl,n.unzip=zs,n.unzipWith=qs,n.update=Jl,n.updateWith=Ql,n.values=$l,n.valuesIn=eu,n.without=Ud,n.words=wu,n.wrap=Va,n.xor=Gd,n.xorBy=Yd,n.xorWith=zd,n.zip=qd,n.zipObject=Ks,n.zipObjectDeep=Zs,n.zipWith=Kd,n.entries=Bh,n.entriesIn=Wh,n.extend=Ih,n.extendWith=Sh,Nu(n,n),n.add=ap,n.attempt=Xh,n.camelCase=Fh,n.capitalize=ou,n.ceil=lp,n.clamp=tu,n.clone=Ba,n.cloneDeep=Fa,n.cloneDeepWith=Ua,n.cloneWith=Wa,n.conformsTo=Ga,n.deburr=ru,n.defaultTo=ju,n.divide=up,n.endsWith=su,n.eq=Ya,n.escape=au,n.escapeRegExp=lu,n.every=sa,n.find=Jd,n.findIndex=ds,n.findKey=jl,n.findLast=Qd,n.findLastIndex=hs,n.findLastKey=Cl,n.floor=cp,n.forEach=da,n.forEachRight=ha,n.forIn=Dl,n.forInRight=Rl,n.forOwn=Ll,n.forOwnRight=Nl,n.get=xl,n.gt=ph,n.gte=mh,n.has=Vl,n.hasIn=Hl,n.head=gs,n.identity=Cu,n.includes=pa,n.indexOf=vs,n.inRange=nu,n.invoke=kh,n.isArguments=fh,n.isArray=_h,n.isArrayBuffer=gh,n.isArrayLike=za,n.isArrayLikeObject=qa,n.isBoolean=Ka,n.isBuffer=vh,n.isDate=yh,n.isElement=Za,n.isEmpty=Xa,n.isEqual=Ja,n.isEqualWith=Qa,n.isError=$a,n.isFinite=el,n.isFunction=tl,n.isInteger=nl,n.isLength=il,n.isMap=Mh,n.isMatch=sl,n.isMatchWith=al,n.isNaN=ll,n.isNative=ul,n.isNil=dl,n.isNull=cl,n.isNumber=hl,n.isObject=ol,n.isObjectLike=rl,n.isPlainObject=pl,n.isRegExp=bh,n.isSafeInteger=ml,n.isSet=Ah,n.isString=fl,n.isSymbol=_l,n.isTypedArray=Th,n.isUndefined=gl,n.isWeakMap=vl,n.isWeakSet=yl,n.join=Ms,n.kebabCase=Uh,n.last=bs,n.lastIndexOf=As,n.lowerCase=Gh,n.lowerFirst=Yh,n.lt=Eh,n.lte=wh,n.max=Ku,n.maxBy=Zu,n.mean=Xu,n.meanBy=Ju,n.min=Qu,n.minBy=$u,n.stubArray=Bu,n.stubFalse=Wu,n.stubObject=Fu,n.stubString=Uu,n.stubTrue=Gu,n.multiply=dp,n.nth=Ts,n.noConflict=ku,n.noop=Pu,n.now=oh,n.pad=uu,n.padEnd=cu,n.padStart=du,n.parseInt=hu,n.random=iu,n.reduce=_a,n.reduceRight=ga,n.repeat=pu,n.replace=mu,n.result=zl,n.round=hp,n.runInContext=e,n.sample=ya,n.size=Aa,n.snakeCase=zh,n.some=Ta,n.sortedIndex=Cs,n.sortedIndexBy=Ds,n.sortedIndexOf=Rs,n.sortedLastIndex=Ls,n.sortedLastIndexBy=Ns,n.sortedLastIndexOf=ks,n.startCase=qh,n.startsWith=_u,n.subtract=pp,n.sum=ec,n.sumBy=tc,n.template=gu,n.times=Yu,n.toFinite=bl,n.toInteger=Al,n.toLength=Tl,n.toLower=vu,n.toNumber=El,n.toSafeInteger=Ol,n.toString=Il,n.toUpper=yu,n.trim=Mu,n.trimEnd=bu,n.trimStart=Au,n.truncate=Tu,n.unescape=Eu,n.uniqueId=qu,n.upperCase=Kh,n.upperFirst=Zh,n.each=da,n.eachRight=ha,n.first=gs,Nu(n,(function(){var e={};return pi(n,(function(t,i){_c.call(n.prototype,i)||(e[i]=t)})),e})(),{chain:!1}),n.VERSION="4.17.4",u(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){n[e].placeholder=n})),u(["drop","take"],(function(e,t){M.prototype[e]=function(n){n=n===oe?1:Yc(Al(n),0);var i=this.__filtered__&&!t?new M(this):this.clone();return i.__filtered__?i.__takeCount__=zc(n,i.__takeCount__):i.__views__.push({size:zc(n,Pe),type:e+(i.__dir__<0?"Right":"")}),i},M.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),u(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=n==Ce||3==n;M.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ar(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),u(["head","last"],(function(e,t){var n="take"+(t?"Right":"");M.prototype[e]=function(){return this[n](1).value()[0]}})),u(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");M.prototype[e]=function(){return this.__filtered__?new M(this):this[n](1)}})),M.prototype.compact=function(){return this.filter(Cu)},M.prototype.find=function(e){return this.filter(e).head()},M.prototype.findLast=function(e){return this.reverse().find(e)},M.prototype.invokeMap=no((function(e,t){return"function"==typeof e?new M(this):this.map((function(n){return wi(n,e,t)}))})),M.prototype.reject=function(e){return this.filter(Ra(Ar(e)))},M.prototype.slice=function(e,t){e=Al(e);var n=this;return n.__filtered__&&(e>0||t<0)?new M(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==oe&&(t=Al(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},M.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},M.prototype.toArray=function(){return this.take(Pe)},pi(M.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=n[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);s&&(n.prototype[t]=function(){var t=this.__wrapped__,l=r?[1]:arguments,u=t instanceof M,c=l[0],d=u||_h(t),h=function(e){var t=s.apply(n,_([e],l));return r&&p?t[0]:t};d&&i&&"function"==typeof c&&1!=c.length&&(u=d=!1);var p=this.__chain__,m=!!this.__actions__.length,f=a&&!p,g=u&&!m;if(!a&&d){t=g?t:new M(this);var v=e.apply(t,l);return v.__actions__.push({func:Qs,args:[h],thisArg:oe}),new o(v,p)}return f&&g?e.apply(this,l):(v=this.thru(h),f?r?v.value()[0]:v.value():v)})})),u(["pop","push","shift","sort","splice","unshift"],(function(e){var t=dc[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var n=this.value();return t.apply(_h(n)?n:[],e)}return this[i]((function(n){return t.apply(_h(n)?n:[],e)}))}})),pi(M.prototype,(function(e,t){var i=n[t];if(i){var o=i.name+"";(od[o]||(od[o]=[])).push({name:t,func:i})}})),od[$o(oe,ge).name]=[{name:"wrapper",func:oe}],M.prototype.clone=j,M.prototype.reverse=J,M.prototype.value=te,n.prototype.at=Zd,n.prototype.chain=$s,n.prototype.commit=ea,n.prototype.next=ta,n.prototype.plant=ia,n.prototype.reverse=oa,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ra,n.prototype.first=n.prototype.head,Rc&&(n.prototype[Rc]=na),n})();Ln._=Zn,(o=function(){return Zn}.call(t,n,t,i))!==oe&&(i.exports=o)}).call(this)}).call(t,n(33),n(118)(e))}),(function(e,t,n){var i,o;i=[t,n(6),n(115),n(77)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return new h.default(function(t,n){e.success=t,e.error=n,e.preventCaching&&(e.url=s(e.url)),(0,p.default)(e)})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";t=encodeURI(t);var n=+new Date;return e+=-1===e.indexOf("?")?"?":"&",e+=t+"="+n}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){var n=e.headers=e.headers||{};n["IG-ACCOUNT-ID"]=t.user.accountId,n["x-device-user-agent"]=n["x-device-user-agent"]||(0,m.default)(t.environment),n["X-SECURITY-TOKEN"]=t.user.ssoToken,t.user.cstToken&&(n.CST=t.user.cstToken)}return r(e)}function l(e,t){return a({url:t.environment.origin+e,type:"json",preventCaching:!0},t)}function u(e,t,n){return a({url:t.environment.origin+e,type:"json",method:"post",contentType:"application/json",data:JSON.stringify(n)},t)}function c(e,t,n){return a({url:t.environment.origin+e,type:"json",method:"put",contentType:"application/json",data:JSON.stringify(n)},t)}function d(e,t,n){var i=t.environment.origin+e,o={url:i,type:"json",method:"DELETE",contentType:"application/json"};return n&&(o.data=JSON.stringify(n),o.method="PUT",o.url+=(i.indexOf("?")>-1?"&":"?")+"_method=DELETE"),a(o,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.send=a,e.get=l,e.post=u,e.put=c,e.del=d;var h=o(t),p=o(n),m=o(i)}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(4),n(6),n(0),n(112)],void 0!==(o=function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var d=r(t),h=r(n),p=r(i),m=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(o),f=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),_=function(e,t){return e!==t&&!(Number.isNaN(e)&&Number.isNaN(t))},g=(function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._properties=Object.create(null),n._relationships=[],n._computed=Object.create(null),n.setProperties(e),n}return c(t,e),f(t,[{key:"_computeProperty",value:function(e){var t="_get"+p.default.upperFirst(e),n=this[t];if("function"!=typeof n)throw new Error("type "+t+'" should be "function"');return n.call(this)}},{key:"_computeProperties",value:function(e){var t=this,n=[],i=e.reduce((function(e,i){return e[i]=t._computeProperty(i),t._computed[i]&&(n=n.concat(t._computed[i])),e}),{});return this.setProperties(i,!0),n.length&&(i=p.default.assign(i,this._computeProperties(n))),i}},{key:"_attachListener",value:function(e,t){var n=this,i=t.split(/\s+/).reduce((function(t,i){return i.indexOf(".")>-1?t.push(i):n._computed[i]=[].concat(a(n._computed[i]||[]),[e]),t}),[]),o=i.length;o&&this.listenTo(this,"change",(function(t){for(var r=!1,s=0;s<o;s++)if(Object.prototype.hasOwnProperty.call(t,i[s])){r=!0;break}r&&n.set(e,n._computeProperty(e))}))}},{key:"_propagateChanges",value:function(e,t){var n=Object.create(null);for(var i in t)n[e+"."+i]=t[i];this._notifyChanges(n)}},{key:"attachListeners",value:function(e){for(var t in e)this._attachListener(t,e[t]);this._computeProperties(Object.keys(e))}},{key:"alias",value:function(e,t){var n=this;t.forEach((function(t){n["_get"+p.default.upperFirst(t)]=function(){return n.get(e+"."+t)}})),this.attachListeners(t.reduce((function(t,n){return t[n]=e+"."+n,t}),{}))}},{key:"_createChildChangeMap",value:function(e,n){var i=e.length;if(i<2)return null;for(;i--;){var o=e.slice(0,i).join("."),r=e.slice(i).join("."),a=this.get(o);if(t.isModel(a))return s({},o,s({},r,n))}return null}},{key:"setProperties",value:function(e,t){var n=this,i={},o={},r={},s=[];for(var a in e){var l=e[a],u=this._createChildChangeMap(a.split("."),l);if(u)o=(m.default||m)(o,u);else{var c=this.get(a);this.set(a,l,!0),_(c,l)&&(i[a]=l,this._computed[a]&&s.push(this._computed[a]))}}for(var d in o){var h=this.get(d),f=o[d];h.setProperties(f,t)}p.default.uniq(s).forEach((function(e){r=p.default.assign(r,n._computeProperties(e))})),t||this._notifyChanges(p.default.assign(i,r))}},{key:"_notifyChanges",value:function(e){var t=!1;for(var n in e)t=!0,this.trigger(n,e[n]);t&&this.trigger("change",e)}},{key:"get",value:function(e){if(e.indexOf(".")>-1){for(var n=this,i=e.split("."),o=0,r=i.length;o<r;o++)n=t.isModel(n)?n._properties&&n._properties[i[o]]:n&&n[i[o]];return n}return this._properties&&this._properties[e]}},{key:"set",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.get(e),r=Object.create(null);if(r[e]=n,e.indexOf(".")>-1){var s=e.split("."),a=this._createChildChangeMap(s,n);if(a){var l=Object.keys(a)[0];this.get(l).setProperties(a[l],i)}else{var u=s.pop(),c=this.get(s.join("."));if(!c)throw new Error('Property "'+s.pop()+'" does not exist.');var d=_(c[u],n);c[u]=n,!i&&d&&this._notifyChanges(r)}}else{var h=_(this._properties[e],n);if(this._properties[e]=n,!i&&h){if(this._computed[e]){var m=this._computeProperties(this._computed[e]);r=p.default.assign(r,m)}this._notifyChanges(r)}}if(t.isModel(n)){var f=this._propagateChanges.bind(this,e);this.listenTo(n,"change",f),f(n.snapshot()),this._relationships.push(n)}t.isModel(o)&&(this.stopListening(o),this._relationships=p.default.without(this._relationships,o))}},{key:"value",value:function(e){var t=this;return new h.default(function(n){var i=t.get(e);void 0!==i?n(i):t.once(e,(function(e){void 0!==e&&n(e)}))})}},{key:"snapshot",value:function(){var e=Object.create(null);for(var t in this._properties)e[t]=this._properties[t];return e}},{key:"destroy",value:function(){var e=this;this.trigger("destroyed"),this._properties=null,this._computed=null,this._relationships.forEach((function(t){e.stopListening(t)})),this.off()}}],[{key:"isModel",value:function(e){return e instanceof t}}]),t})(d.default);e.default=g}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(56)],void 0!==(o=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(function(e){return e&&e.__esModule?e:{default:e}})(t),i={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE"},o=function(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return"number"!=typeof e?null:t===i.ABSOLUTE?(0,n.default)(o-e,r):e},r=function(e,t){return e*t},s=function(e,t){return e/t};e.default={distanceFrom:o,distanceInCurrencyFromPoints:r,distanceInPointsFromCurrency:s,Type:i}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(99)],void 0!==(o=function(e,t){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),(function(e){return e&&e.__esModule?e:{default:e}})(t).default.mixin(n.prototype),e.default=n}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(12),n(3),n(18),n(56),n(19),n(31)],void 0!==(o=function(e,t,n,i,o,r,s,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var u=l(t),c=l(n),d=l(i),h=l(o),p=l(r),m=l(a),f=function(e,t,n,i,o,r,s,a,l,f,_,g){var v=arguments.length>12&&void 0!==arguments[12]&&arguments[12],y=arguments.length>13&&void 0!==arguments[13]&&arguments[13],b=!(arguments.length>14&&void 0!==arguments[14])||arguments[14],A=arguments.length>15&&void 0!==arguments[15]?arguments[15]:null,T=n===d.default.Type.ABSOLUTE,E=t===m.default.TRAILING,w=d.default.distanceFrom(e,n,l,a),O=u.default.get(M(n,i,l,s,A),"value",0),I=(0,h.default)(r,l,n,s);if(isNaN(e))return{isValid:!1,error:{key:c.default.Reason.INVALID_LEVEL}};if(E&&_&&!u.default.isNumber(e)){return{isValid:!1,error:{key:n===d.default.Type.RELATIVE?c.default.Reason.STOP_REQUIRES_DISTANCE:c.default.Reason.STOP_REQUIRES_LEVEL}}}if(E&&w&&(_||0)<o.value)return{isValid:!1,error:{key:c.default.Reason.TRAILING_STEP_BELOW_MIN,min:o.value}};if(v&&E&&null!=O&&w){if((g||0)<O)return{isValid:!1,error:{key:c.default.Reason.TRAILING_DISTANCE_BELOW_MIN,min:O}};var S=g+_;if(w>=S)return{isValid:!1,error:{key:c.default.Reason.STOP_LEVEL_BELOW_TRAILING,min:l-S}}}if(y&&b&&(!u.default.isNumber(e)||0===e)){return{isValid:!1,error:{key:n===d.default.Type.RELATIVE?c.default.Reason.STOP_REQUIRES_DISTANCE:c.default.Reason.STOP_REQUIRES_LEVEL}}}if(e&&T&&(f&&e>l||!f&&e<l))return{isValid:!1,error:{key:c.default.Reason.STOP_WRONG_SIDE}};if(u.default.isNumber(O)&&u.default.isNumber(w)&&w<O){var j=(0,p.default)(O,a);return{isValid:!1,error:{key:c.default.Reason.STOP_TOO_CLOSE,data:{min:j}}}}return u.default.isNumber(I)&&u.default.isNumber(w)&&w>I?{isValid:!1,error:{key:c.default.Reason.STOP_TOO_FAR}}:{isValid:!0}},_=function(e,t,n,i){return parseFloat(t)?2==e?m.default.GUARANTEED:n>0&&i>0?m.default.TRAILING:m.default.NON_GUARANTEED:null},g=function(e,t,n){return u.default.values(m.default).map((function(i){var o=!e;return i===m.default.GUARANTEED?o=t:i===m.default.TRAILING&&(o=!e&&n),{valid:o,value:i}}))},v=function(e){var t=u.default.find(e,(function(e){return e.valid}));return t?t.value:m.default.NON_GUARANTEED},y=function(e,t){if(!t)return v(e);var n=u.default.find(e,(function(e){return e.value===t}));return n&&n.valid?t:v(e)},M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=(0,h.default)(t,n,e,i);return o&&(r=(0,s.getMinimumDistanceValueForExistingPosition)(o,r)),{unit:"pts",value:r}};e.default={isValid:f,getType:_,getStopTypes:g,getFirstValidStopType:v,getValidStopType:y,getMinimumDistanceRuleInPoints:M,Type:m.default}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(100)],void 0!==(o=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(function(e){return e&&e.__esModule?e:{default:e}})(t);n.default.config({cancellation:!0,longStackTraces:!1,warnings:!1,monitoring:!1}),e.default=n.default}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(59),n(84),n(9),n(83),n(29),n(26)],void 0!==(o=function(e,t,n,i,o,r,s,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e){return null==e}function p(e){return Number.isFinite(e)?e:0}function m(e){var t=parseFloat(e);return f.default.isNaN(t)?null:t}Object.defineProperty(e,"__esModule",{value:!0}),e.UNITS=e.FID_SCHEMA=void 0;var f=l(t),_=l(n),g=l(i),v=l(o),y=l(r),M=(function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),b=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),A=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},T=e.FID_SCHEMA={BID:"displayBid",BID_QUOTE:"bidQuoteId",CHANGE:"netChange",CHANGE_PCT:"percentageChange",HIGH:"high",LOW:"low",MARKET_NAME:"instrumentName",MARKET_STATUS:"rawMarketStatus",OFFER:"displayOffer",OFFER_QUOTE:"offerQuoteId",UPDATE_TIME:"updateTime"},E=/^(.+?)@t\[(.+?)@t\]/,w=e.UNITS={AMOUNT:"A",CONTRACTS:"C",SHARES:"S"},O=(function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.boundOnStreamedV2Update=n.onStreamedV2Update.bind(n),n.boundOnStreamedV4Update=n.onStreamedV4Update.bind(n),n.attachListeners({bid:"displayBid",offer:"displayOffer",spread:"bid offer scalingFactor",percentSpread:"spread midPrice",ticketDefaultCurrency:"currencies",isBinary:"instrumentType",isDelayed:"delayTime",isContract:"unit",isShare:"unit",isFx:"instrumentType",isFree:"viewPermission isDelayed hasCompleteMarketData",marketStatus:"rawMarketStatus",range:"high low decimalPlacesFactor",midPrice:"bid offer decimalPlacesFactor",percentRange:"range midPrice decimalPlacesFactor",valueOfOnePoint:"unit valueOfOnePip scalingFactor",sanitisedBidQuoteId:"bidQuoteId",sanitisedOfferQuoteId:"offerQuoteId"}),n}return d(t,e),b(t,[{key:"populateWith",value:function(e){return e.displayBid=e.bid||e.displayBid,e.displayOffer=e.offer||e.displayOffer,e.bid=m(e.displayBid),e.offer=m(e.displayOffer),e.marketStatus=v.default.resolve(e.ncrMarketStatus,e.instrumentType),e.bidQuoteId="-"===e.bidQuoteId?null:e.bidQuoteId,e.offerQuoteId="-"===e.offerQuoteId?null:e.offerQuoteId,
A(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"populateWith",this).call(this,e)}},{key:"onStreamedV2Update",value:function(e){var t={};e.forEachChangedField((function(e,n,i){var r=a.FID_MAPPING[e],s="UBS"===e?o.MARKET_STATUS_NUMBER_MAP[+i]:i;t[T[r]]=s})),t.instrumentName&&(t.instrumentName=this._toAccountTimeInBinaryName(t.instrumentName)),this.setProperties(t)}},{key:"onStreamedV4Update",value:function(e){var t={};e.forEachChangedField((function(e,n,i){return t[T[e]]=i})),t.instrumentName&&(t.instrumentName=this._toAccountTimeInBinaryName(t.instrumentName)),this.setProperties(t)}},{key:"updateCurrencyExchangeRate",value:function(e,t){var n=this.get("currencies"),i=f.default.find(n,(function(t){return t.get("name")===e}));i&&i.set("exchangeRate",t)}},{key:"_toAccountTimeInBinaryName",value:function(e){var t=e.match(E);if(!t)return e;var n=M(t,3),i=n[1],o=n[2];return""+i+(0,s.toAccountTimeFromLondonTime)(o,this.get("timezoneOffset"))}},{key:"getSubscriptionModifiers",value:function(){var e=[];return this.get("scaled")&&e.push("SCALED"),e}},{key:"_getSanitisedBidQuoteId",value:function(){var e=this.get("bidQuoteId");return f.default.isString(e)?e:null}},{key:"_getSanitisedOfferQuoteId",value:function(){var e=this.get("offerQuoteId");return f.default.isString(e)?e:null}},{key:"_getBid",value:function(){return m(this.get("displayBid"))}},{key:"_getMidPrice",value:function(){var e=this.get("bid"),t=this.get("offer");return[t,e].some(h)?null:+((e+t)/2).toFixed(this.get("decimalPlacesFactor"))}},{key:"_getValueOfOnePoint",value:function(){var e=this.get("unit"),t=this.get("lotSize");return e===w.CONTRACTS&&t?t:e===w.SHARES?this.get("scalingFactor")/100:null}},{key:"_getSpread",value:function(){var e=this.get("offer"),t=this.get("bid"),n=this.get("scalingFactor");return[e,t].some(h)?null:+((e-t)*n).toFixed(this.get("decimalPlacesFactor"))}},{key:"_getPercentSpread",value:function(){var e=this.get("midPrice"),t=this.get("spread");return[t,e].some(h)?null:+p(t/e*100).toFixed(Math.min(this.get("decimalPlacesFactor")+2,6))}},{key:"_getRange",value:function(){var e=m(this.get("high")),t=m(this.get("low"));return[e,t].some(h)?null:+(e-t).toFixed(this.get("decimalPlacesFactor"))}},{key:"_getPercentRange",value:function(){var e=this.get("midPrice"),t=this.get("range");return[t,e].some(h)?null:+p(t/e*100).toFixed(Math.min(this.get("decimalPlacesFactor")+2,6))}},{key:"_getOffer",value:function(){return m(this.get("displayOffer"))}},{key:"_getTicketDefaultCurrency",value:function(){var e=f.default.find(this.get("currencies"),(function(e){return e.get("ticketDefault")}));return e||(this.get("currencies")&&1===this.get("currencies").length?this.get("currencies")[0]:null)}},{key:"_getIsDelayed",value:function(){return 0!==this.get("delayTime")}},{key:"_getIsBinary",value:function(){return"BINARY"===this.get("instrumentType")}},{key:"_getIsContract",value:function(){return this.get("unit")===w.CONTRACTS}},{key:"_getIsShare",value:function(){return this.get("unit")===w.SHARES}},{key:"_getIsFx",value:function(){return"CURRENCIES"===this.get("instrumentType")}},{key:"_getMarketStatus",value:function(){return v.default.resolve(this.get("rawMarketStatus"),this.get("instrumentType"))}},{key:"_getIsFree",value:function(){var e=(this.get("viewPermission")||"").toUpperCase();return this.get("hasCompleteMarketData")&&!("L1"===e||"L2"===e)&&!this.get("isDelayed")}}],[{key:"populateFromPositionResponse",value:function(e){var n=e.openPosition.openPositionData||e.openPosition,i=e.marketDetails||e.market;return i?(i.instrumentData.displayPrompt=i.instrumentData.displayPrompt||n.displayPeriod,t.populateWithMarketData(i)):i}},{key:"populateWithMarketData",value:function(e){var n=e.instrumentData;if(_.default.isUnpriced(n.epic))return g.default.populateWithMarketData(e);var i=e.marketSnapshotData,r=e.dealingRulesData,s=e.metaData||{},a=e.dealSettings||{},l=new t(n.epic);return l.populateWith({chartEpic:n.chartEpic||n.epic,controlledRisk:!!s.controlledRisk,dealingRules:r,guaranteedStopsAllowed:!1!==r.guaranteedStopsAllowed,trailingStopsAllowedPreference:"HIDE"!==r.trailingStopPreference,instrumentName:n.marketName,marketId:n.marketId,exchangeId:n.exchangeId,expiryDetails:n.expiryDetails,displayPeriod:n.displayPrompt,isin:n.isin,editable:n.editable,mtfAvailable:n.mtfAvailable,otcTradeable:n.otcTradeable,instrumentDmaL1Tradeable:"???",dmaTradeable:n.dmaTradeable,dmaL1Tradeable:n.dmaL1Tradeable,dxdTradeable:"???",instrumentType:n.instrumentType,stopsLimitsAllowed:n.stopsLimitsAllowed,unit:n.unit,ncrMarketStatus:o.MARKET_STATUS_NUMBER_MAP[i.marketStatus],high:i.highFormatted,low:i.lowFormatted,percentageChange:i.percentageChange,netChange:i.netChange,bid:i.bidFormatted,offer:i.offerFormatted,bidQuoteId:i.bidQuoteId,offerQuoteId:i.offerQuoteId,bestBid:i.bestBidFormatted,bestOffer:i.bestOfferFormatted,scalingFactor:i.scalingFactor,decimalPlacesFactor:i.decimalPlacesFactor,updateTime:i.updateTime,viewPermission:n.viewPermission,delayTime:i.delayTime,scaled:i.scaled,userDmaEnabled:"???",newsAccessible:n.newsAccessible,marketAnalysisAvailable:n.marketAnalysisAvailable,dynamicHierarchyEpic:e.dynamicHierarchyEpic,alertsAllowed:n.alertsAllowed,instrumentVersion:i.instrumentVersion,countryCode:n.countryCode,newsSymbol:n.newsCode,sortablePeriod:"???",collateralHaircut:"???",currency:n.currency,currencies:n.currencies.map(y.default.populateWithJson)||[],minDealSize:r.minDealSize,lastSelectedEpic:e.lastSelectedEpic,lastTradedPointsThroughCurrent:a.lastTradedPointsThroughCurrent,lastTradedSize:+a.lastTradedDealSize||void 0,lastTradedCurrency:a.lastTradedDealCurrency,lastTradedLimitDistance:+a.lastTradedLimitDistance||void 0,lastTradedStopDistance:+a.lastTradedStopDistance||void 0,lastTradedStopType:a.lastTradedStopType,lastTradedTrailingStopIncrement:+a.lastTradedTrailingStopIncrement||void 0,lotSize:n.lotSize,prompt:n.prompt,utcClientTimestamp:s.utcClientTimestamp,currentlyBST:s.currentlyBST,timezoneOffset:s.timezoneOffset,hasCompleteMarketData:!0,limitedRiskPremium:n.limitedRiskPremium,valueOfOnePip:n.valueOfOnePip,contractSize:n.contractSize}),l}},{key:"populateWithMarketLiteData",value:function(e){var n=e.marketSnapshotData,i=new t(e.epic);return i.populateWith({instrumentName:e.instrumentName,controlledSpread:n.controlledSpread,ncrMarketStatus:o.MARKET_STATUS_NUMBER_MAP[n.marketStatus],high:n.highFormatted,low:n.lowFormatted,percentageChange:n.percentageChange,netChange:n.netChange,bid:n.bidFormatted,offer:n.offerFormatted,bestBid:n.bestBidFormatted,bestOffer:n.bestOfferFormatted,scalingFactor:n.scalingFactor,decimalPlacesFactor:n.decimalPlacesFactor,updateTime:n.updateTime,delayTime:n.delayTime,scaled:n.scaled,instrumentVersion:n.instrumentVersion,hasCompleteMarketData:!1,underlyingName:e.underlyingName,underlyingId:e.underlyingId,id:e.id,lastSelectedEpic:e.lastSelectedEpic}),i}}]),t})(_.default);e.default=O}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ADDED:"ADDED",REMOVED:"REMOVED",UPDATED:"UPDATED"}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o={AUCTION:"AUCTION",AUCTION_NO_EDIT:"AUCTION_NO_EDIT",OFFLINE:"OFFLINE",CLOSED:"CLOSED",EDIT:"EDIT",SUSPENDED:"SUSPENDED",TRADEABLE:"TRADEABLE"},r=e.MARKET_STATUS_NUMBER_MAP={0:o.CLOSED,1:o.OFFLINE,2:o.TRADEABLE,3:o.EDIT,7:o.AUCTION,8:o.AUCTION_NO_EDIT,9:o.SUSPENDED},s=i({},o,{AUCTION:"CLOSED",AUCTION_NO_EDIT:"CLOSED",EDIT:"CLOSED"}),a=(function(){function e(){t(this,e),i(this,o,r)}return n(e,[{key:"resolve",value:function(e,t){return(/BINARY/.test(t)?s:o)[e]||o.CLOSED}}]),e})();e.default=new a}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(12),n(5),n(3),n(9),n(79),n(19)],void 0!==(o=function(e,t,n,i,o,r,s,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return{field:"direction",valid:!!e.get("direction"),error:{key:O.default.Reason.DIRECTION_NOT_SET}}}function c(e){var t=e.get("limitLevel"),n=e.get("limitType"),i=w.default.isNumber(t)?(0,C.default)(t,n,e.get("market.dealingRules.maxStopOrLimitDistance"),e.get("scalingFactor"),e.get("decimalPlacesFactor"),e.get("triggerLevel")||e.get("position.latest")||e.get("currentMarketLevel"),e.get("isBuy")):{isValid:!0};return{field:"limit",valid:i.isValid,error:i.error}}function d(e){var t=e.get("stopType"),n=void 0,i=void 0;if(e.allowsForStopType(t)){var o=I.default.isValid(e.get("stopLevel"),e.get("stopType"),e.get("stopLevelType"),(0,a.getMinimumDistanceFromMarket)(t,e.get("market")),e.get("minStepDistance"),e.get("market.dealingRules.maxStopOrLimitDistance"),e.get("scalingFactor"),e.get("decimalPlacesFactor"),e.get("triggerLevel")||e.get("position.latest")||e.get("currentMarketLevel"),e.get("isBuy"),e.get("stopStep"),e.get("stopTrailingDistance"),e.get("canEditTrailingDistance"),e.get("controlledRisk"),e.get("stopsLimitsAllowed"),e.get("position"));n=o.isValid,i=o.error}else n=!1,i={key:O.default.Reason.INVALID_STOP_TYPE};return{field:"stop",valid:n,error:i}}function h(e){var t=!0,n={},i=e.get("stopLevel"),o=e.get("controlledRisk"),r=!w.default.isNumber(i)||0===i;return o&&r&&(t=!1,n={key:O.default.Reason.STOP_GUARANTEED_CAN_NOT_BE_REMOVED}),{field:"stop",valid:t,error:n}}function p(e){var t=!0,n={},i=e.get("stopLevel");return e.get("stopType")!==I.default.Type.GUARANTEED||w.default.isNumber(i)&&0!==i||(t=!1,n={key:O.default.Reason.STOP_GUARANTEED_CAN_NOT_BE_REMOVED}),{field:"stop",valid:t,error:n}}function m(e){var t=e.get("market.marketStatus"),n=e.get("stopType")===I.default.Type.GUARANTEED,i=!0;if(n&&(t===j.default.EDIT||t===j.default.AUCTION)){var o=e.get("triggerLevel")||e.get("currentMarketLevel"),r=(e.get("scalingFactor"),e.get("decimalPlacesFactor")),s=e.get("position")||e.get("order");if(s){var a=S.default.distanceFrom(s.get("stopLevel"),s.get("stopLevelType"),o,r);i=S.default.distanceFrom(e.get("stopLevel"),e.get("stopLevelType"),o,r)>=a}else i=!1}return{field:"stop",valid:i,error:{key:i?null:O.default.Reason.STOP_GUARANTEED_MOVE_AWAY}}}function f(e){return{field:"marketDealable",valid:e.get("isMarketDealable"),error:{key:O.default.Reason.MARKET_NOT_DEALABLE}}}function _(e){var t=+e.get("heartbeat.timestamp"),n=e.get("expiryTime");return{field:"expiryTime",valid:!n||+n>=t,error:{key:O.default.Reason.DATE_BELOW_MIN,data:{minDate:t}}}}function g(e){return{field:"size",valid:+e.get("size")<=(+e.get("maxSize")||1/0),error:{key:O.default.Reason.SIZE_ABOVE_MAX}}}function v(e){var t=+e.get("minDealSize.value");return{field:"size",valid:+e.get("size")>=t,error:{key:O.default.Reason.SIZE_BELOW_MIN,data:{min:t}}}}function y(e){return{field:"size",valid:+e.get("size")>0,error:{key:O.default.Reason.SIZE_NOT_ABOVE_ZERO}}}function M(e){return{field:"triggerLevel",valid:+e.get("triggerLevel")>0,error:{key:O.default.Reason.TRIGGER_LEVEL_REQUIRED}}}function b(e){var t=!1,n=void 0,i=e.get("currentMarketLevel"),o=e.get("triggerLevel");return e.get("order.level")<i?(t=o<i,n=t?null:{key:O.default.Reason.TRIGGER_LEVEL_TOO_HIGH}):(t=o>i,n=t?null:{key:O.default.Reason.TRIGGER_LEVEL_TOO_LOW}),{field:"triggerLevel",valid:t,error:n}}function A(e){var t=e.get("currentMarketLevel"),n=e.get("triggerLevel"),i=e.get("maxOrderDistance");return{field:"triggerLevel",valid:i&&n>=t-i.value&&n<=t+i.value,error:{key:O.default.Reason.TRIGGER_LEVEL_TOO_FAR}}}function T(e){var t=e.get("stopType"),n=e.get("position")?e.get("position"):e.get("order");return{field:"stop",valid:!(n&&t!==n.get("stopType")&&(n.get("stopType")===I.default.Type.GUARANTEED||t===I.default.Type.GUARANTEED)),error:{key:O.default.Reason.STOP_TYPE_CHANGE_INVALID}}}function E(e){return{field:"marketDealable",valid:/^(OPTION|BINARY)/.test(e.get("market.instrumentType"))||!(e.get("controlledRisk")&&!e.get("market.guaranteedStopsAllowed")),error:{key:O.default.Reason.CONTROLLED_RISK_TRADING_UNAVAILABLE}}}Object.defineProperty(e,"__esModule",{value:!0}),e.direction=u,e.limit=c,e.stop=d,e.controlledRiskUser=h,e.guaranteedStopIsEmptyValidator=p,e.stopSizeChangeAllowed=m,e.marketDealable=f,e.dateBelowMin=_,e.sizeBelowMax=g,e.sizeAboveMin=v,e.sizeAboveZero=y,e.triggerLevelAboveZero=M,e.triggerLevelValidForOrderType=b,e.triggerLevelWithinValidDistance=A,e.stopTypeChangeAllowed=T,e.controlledRiskTradingAvailable=E;var w=l(t),O=l(n),I=l(i),S=l(o),j=l(r),C=l(s)}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(86),n(2),n(24),n(16),n(0)],void 0!==(o=function(e,t,n,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var c=s(t),d=s(n),h=s(o),p=s(r),m=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),f=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},_=(function(e){function t(e,n,o){a(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{inProgress:!1,isComplete:!1,isConfirmed:!1,isRejected:!1}));return r._data=e,r._session=n,r._confirmationStreamingClient=o,r._setState(i.NOT_STARTED,null),r}return u(t,e),m(t,[{key:"start",value:function(){var e=this;this._setState(i.STARTED,null),this._requestPromise=this._doRequest().then(this._handleDealPlaced.bind(this)).catch((function(t){e._setState(i.FAILED,t.statusText),e.destroy()}))}},{key:"_doRequest",value:function(){throw new Error("Not implemented.")}},{key:"abort",value:function(){this._setState(i.ABORTED,null),this.destroy()}},{key:"_setState",value:function(e,t){this.setProperties({state:e,details:t,isConfirmed:e===i.CONFIRMED,isRejected:e===i.REJECTED,inProgress:p.default.includes(i.IN_PROGRESS_STATES,e),isComplete:p.default.includes(i.COMPLETED_STATES,e)})}},{key:"destroy",value:function(){delete this._data,this._requestPromise&&(this._requestPromise.cancel(),delete this._requestPromise),this._confirmationPoller&&(this._confirmationPoller.destroy(),this._confirmationPoller=null),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_handleDealPlaced",value:function(e){var t=this;this.trigger(h.default.INITIAL_DEAL_RESPONSE),this._confirmationStreamingClient.waitForConfirm(e.dealReference).then(this._createResolved.bind(this),this._createRejected.bind(this)),this._confirmationPoller=new c.default(this._session,e.dealReference),this.listenToOnce(this._confirmationPoller,h.default.FIRST_POLL,(function(){return t.trigger(h.default.FIRST_POLL)})),this._confirmationPoller.pollForConfirm().then(this._createResolved.bind(this),this._createRejected.bind(this)),this._setState(i.PENDING,e)}},{key:"_createResolved",value:function(e){this._setState(i.CONFIRMED,e),this.destroy()}},{key:"_createRejected",value:function(e){"RETRY_COUNT_EXCEEDED"===e?this._setState(i.UNVERIFIED,null):this._setState(i.REJECTED,e),this.destroy()}}]),t})(d.default);e.default=_}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(2)],void 0!==(o=function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(t),l=i(n),u=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),c=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},d=(function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a.default.merge({direction:null,expiryTime:null,marketStatus:null,size:null,stop:null,triggerLevel:null},e)))}return s(t,e),u(t,[{key:"hasErrors",value:function(){return a.default.values(this._properties).some(a.default.identity)}},{key:"setProperties",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setProperties",this).call(this,a.default.merge(a.default.mapValues(this._properties,(function(){return null})),e))}}]),t})(l.default);d.Reason={CONTROLLED_RISK_TRADING_UNAVAILABLE:"CONTROLLED_RISK_TRADING_UNAVAILABLE",DATE_BELOW_MIN:"DATE_BELOW_MIN",DIRECTION_NOT_SET:"DIRECTION_NOT_SET",INVALID_STOP_TYPE:"INVALID_STOP_TYPE",INVALID_LEVEL:"INVALID_LEVEL",LIMIT_BELOW_MIN_DISTANCE:"LIMIT_BELOW_MIN_DISTANCE",LIMIT_TOO_CLOSE:"LIMIT_TOO_CLOSE",LIMIT_TOO_FAR:"LIMIT_TOO_FAR",LIMIT_WRONG_SIDE:"LIMIT_WRONG_SIDE",LIMIT_SAME_AS_CURRENT_LEVEL:"LIMIT_SAME_AS_CURRENT_LEVEL",MARKET_NOT_DEALABLE:"MARKET_NOT_DEALABLE",SIZE_ABOVE_MAX:"SIZE_ABOVE_MAX",SIZE_BELOW_MIN:"SIZE_BELOW_MIN",SIZE_NOT_ABOVE_ZERO:"SIZE_NOT_ABOVE_ZERO",STOP_GUARANTEED_MOVE_AWAY:"STOP_GUARANTEED_MOVE_AWAY",STOP_GUARANTEED_CAN_NOT_BE_REMOVED:"STOP_GUARANTEED_CAN_NOT_BE_REMOVED",STOP_LEVEL_BELOW_TRAILING:"STOP_LEVEL_BELOW_TRAILING",STOP_REQUIRES_LEVEL:"STOP_REQUIRES_LEVEL",STOP_REQUIRES_DISTANCE:"STOP_REQUIRES_DISTANCE",STOP_TOO_CLOSE:"STOP_TOO_CLOSE",STOP_TOO_FAR:"STOP_TOO_FAR",STOP_TYPE_CHANGE_INVALID:"STOP_TYPE_CHANGE_INVALID",STOP_WRONG_SIDE:"STOP_WRONG_SIDE",TRAILING_DISTANCE_BELOW_MIN:"TRAILING_DISTANCE_BELOW_MIN",TRAILING_STEP_BELOW_MIN:"TRAILING_STEP_BELOW_MIN",TRIGGER_LEVEL_REQUIRED:"TRIGGER_LEVEL_REQUIRED",TRIGGER_LEVEL_TOO_FAR:"TRIGGER_LEVEL_TOO_FAR",TRIGGER_LEVEL_TOO_HIGH:"TRIGGER_LEVEL_TOO_HIGH",TRIGGER_LEVEL_TOO_LOW:"TRIGGER_LEVEL_TOO_LOW"},e.default=d}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(60),n(2),n(3),n(5),n(0),n(22),n(55),n(58),n(30)],void 0!==(o=function(e,t,n,i,o,r,s,a,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FID_SCHEMA=void 0;var m=c(t),f=(c(n),c(i)),_=c(o),g=c(r),v=c(s),y=c(a),M=c(l),b=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(u),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},T=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),E=e.FID_SCHEMA={OPU_FMT_LIMIT_LEVEL:"limitLevel",OPU_SIZE:"dealSize",OPU_OPEN_LEVEL:"openLevel",OPU_FMT_STOP_LEVEL:"stopLevel",OPU_STOP_TYPE:"stopType",OPU_TRAILING_STOP_DISTANCE:"trailingStopDistance",OPU_TRAILING_STEP:"trailingStep"},w=g.default.invert(E),O=(function(e){function t(e){d(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,A({},e,{sterlingToAccountCurrencyRate:1})));return n.boundOnSterlingToAccountRateStreamedUpdate=n.onSterlingToAccountRateStreamedUpdate.bind(n),n.boundOnPositionRateStreamedUpdate=n.onPositionRateStreamedUpdate.bind(n),n.attachListeners({currency:"market.currencies",profitLoss:"dealSize latest",pointsMoved:"openLevel latest",profitLossInBaseCurrency:"profitLoss currency.exchangeRate sterlingToAccountCurrencyRate"}),n}return p(t,e),T(t,[{key:"canEdit",value:function(){return b.canEditPosition(this)}},{key:"canClose",value:function(){return b.canClosePosition(this)}},{key:"_getCurrency",value:function(){var e=this.get("market.currencies"),t=this.get("currencyCodeISO");return g.default.find(e,(function(e){return e.get("name")===t}))}},{key:"_getProfitLoss",value:function(){return(0,v.default)(this.get("latest"),this.get("openLevel"),this.get("contractSize"),this.get("dealSize"),this.isShort(),this.isPriceTypeBackOnly())}},{key:"_getProfitLossInBaseCurrency",value:function(){return 1===this.get("currency.baseExchangeRate")?this.get("profitLoss"):(0,y.default)(this.get("sterlingToAccountCurrencyRate")/this.get("currency.exchangeRate"),this.get("profitLoss"))}},{key:"_getPointsMoved",value:function(){return t.getPointsMoved(this)}},{key:"_getLatest",value:function(){var e=parseFloat(this.isShort()?this.get("market.offer"):this.get("market.bid"));return!isNaN(e)&&e}},{key:"onStreamedUpdate",value:function(e){var t=function(t){return e.getValue(w[t])},n=(0,M.default)(t("stopLevel")||-1),i=(0,M.default)(t("limitLevel")||-1),o=(0,M.default)(t("trailingStopDistance")),r=(0,M.default)(t("trailingStep")),s=(0,M.default)(t("stopType"));this.setProperties({dealSize:+t("dealSize"),limitLevel:i,openLevel:(0,M.default)(t("openLevel")),stopTrailingDistance:o,stopLevel:n,stopStep:r,stopType:_.default.getType(s,n,o,r)})}},{key:"onSterlingToAccountRateStreamedUpdate",value:function(e){this.set("sterlingToAccountCurrencyRate",1/+e.getValue("OFR"))}},{key:"onPositionRateStreamedUpdate",value:function(e){var t=+e.getValue("OFR");this.get("market").updateCurrencyExchangeRate(this.get("currencyCodeISO"),1/t)}}],[{key:"fromOPU",value:function(e){var n=e.epic,i=e.openPosition;return i.contractSize=(n.lotSize||1)*n.scalingFactor,i.createdDate=i.createdUTCDate,t.fromDealingRestPosition(e)}},{key:"fromDealingRestPosition",value:function(e){var n=e.openPosition.openPositionData||e.openPosition,i=n.epic;if(i&&!t.isValidEpic(i))return null;n.stopType||(n.stopType=_.default.getType(n.riskType,n.stopLevel,n.trailingStopDistance,n.trailingStep));var o=n.trailingStep||-1,r=o>-1,s={epic:i,exchangeRateFid:n.exchangeRateFid,contractSize:n.contractSize,currencyCodeISO:n.currencyCodeISO,currencySymbol:n.currencySymbol,createdDate:new Date(n.createdDate),dealId:n.dealId,dealSize:n.dealSize,direction:n.direction,isDMA:n.isDMA,limitLevel:(0,M.default)(n.limitLevel),limitType:f.default.Type.ABSOLUTE,openLevel:n.openLevel,priceType:n.priceType,riskType:n.riskType,stopLevel:(0,M.default)(n.stopLevel),stopType:n.stopType};return r&&(s.stopStep=o,s.stopTrailingDistance=n.trailingStopDistance),new t(s)}},{key:"isValidEpic",value:function(e){return"string"==typeof e&&!e.match(/^FM\./)}},{key:"getPointsMoved",value:function(e){var t=(e.get("latest")-e.get("openLevel"))*e.get("market.scalingFactor");return e.isShort()&&(t*=-1),isNaN(t)&&(t=0),t}}]),t})(m.default);e.default=O}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(96)],void 0!==(o=function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=i(t),s=i(n),a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),l=(function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MERGE",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o(this,e),this.lightstreamerService=t,this._subscriptionStr=n,this._subscribeMode=i,this._tickRate=r,this._fakeSnapshot=s,this._handlers={},this._handlerCounters={},this._subscriptions={},this._snapshots={}}return a(e,[{key:"add",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=void 0,r=t.slice().sort(),a=i.length?":"+i.slice().sort().join(","):"",l=e+":"+r.join(",")+a,u=this._subscriptions[l];if(this._subscriptions[l])o=this._handlers[l].indexOf(n),-1===o?(this._handlers[l].push(n),this._handlerCounters[l].push(1)):this._handlerCounters[l][o]++;else{var c=this._subscriptionStr.replace("{id}",e).replace("{fids}",r).replace("{modifiers}",a);this._subscriptions[l]=this.lightstreamerService.subscribe(c,r,this._subscribeMode,this.onUpdate.bind(this,l),this._tickRate),this._handlers[l]=[n],this._handlerCounters[l]=[1],this._fakeSnapshot&&(this._snapshots[l]=new s.default(!0))}if(this._fakeSnapshot&&u){var d=this._snapshots[l];d.hasData()&&n(d)}}},{key:"remove",value:function(e){var t=this._handlers,n=this._snapshots,i=this._handlerCounters,o=this._subscriptions;Object.keys(o).some((function(r){var s=t[r].indexOf(e);if(s>-1)return--i[r][s]||(t[r].splice(s,1),i[r].splice(s,1),t[r].length||(o[r].unsubscribe(),delete o[r],delete t[r],delete n[r],delete i[r])),!0}))}},{key:"onUpdate",value:function(e,t){var n=this;(this._handlers[e]||[]).forEach((function(e){return e(t)})),this._fakeSnapshot&&t.forEachChangedField((function(t,i,o){n._snapshots[e].setField(t,o)}))}},{key:"removeAll",value:function(){r.default.invokeMap(this._subscriptions,"unsubscribe"),this._subscriptions={},this._handlerCounters={},this._handlers={}}},{key:"destroy",value:function(){this._subscriptions=null,this._handlerCounters=null,this._handlers=null}}]),e})();e.default=l}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={POSITION:"POSITION",ORDER:"ORDER",TICKET:"TICKET"}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={DEAL_SUBMIT:"DEAL_SUBMIT",FIRST_POLL:"FIRST_POLL",FINAL_DEAL_RESPONSE:"FINAL_DEAL_RESPONSE",INITIAL_DEAL_RESPONSE:"INITIAL_DEAL_RESPONSE"}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(60),n(3),n(5),n(0),n(58),n(30),n(29)],void 0!==(o=function(e,t,n,i,o,r,s,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FID_SCHEMA=void 0;var h=l(t),p=l(n),m=l(i),f=l(o),_=l(r),g=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(s),v=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),y=e.FID_SCHEMA={WO_LEVEL:"level",WO_CONTRACT_SIZE:"size",WO_RESERVED_CASH:"reservedCash",WO_STOP:"contingentStop",WO_STOP_TYPE:"stopType",WO_TRAILING_STOP_DISTANCE:"trailingStopDistance",WO_TRAILING_STOP_INCREMENT:"trailingStopIncrement",WO_LIMIT:"contingentLimit",WO_TRAILING_TRIGGER_DISTANCE:"trailingTriggerDistance",WO_TRAILING_TRIGGER_INCREMENT:"trailingTriggerIncrement",WO_GOOD_TILL:"goodTill",WO_REQUEST_TYPE:"requestType"},M=f.default.invert(y),b=(function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),v(t,[{key:"canEdit",value:function(){return g.canEditOrder(this)}},{key:"canClose",value:function(){return g.canDeleteOrder(this)}},{key:"_getLatest",value:function(){var e=parseFloat(this.isShort()?this.get("market.bid"):this.get("market.offer"));return!isNaN(e)&&e}},{key:"onStreamedUpdate",value:function(e){var t=function(t){return e.getValue(M[t])},n=(0,_.default)(t("contingentStop")||-1),i=(0,_.default)(t("trailingStopDistance")),o=(0,_.default)(t("trailingStopIncrement")),r=t("goodTill"),s=(0,_.default)(t("stopType"));this.setProperties({dealSize:parseFloat(t("size")),goodTill:r,goodTillUTCMillis:(0,a.toUTCMillisFromLondonDate)(r),openLevel:parseFloat(t("level")),orderType:t("requestType"),limitLevel:(0,_.default)(t("contingentLimit")),stopTrailingDistance:i,stopLevel:n,stopStep:o,stopType:m.default.getType(s,n,i,o)||m.default.Type.NON_GUARANTEED})}}],[{key:"fromWOU",value:function(e){return e.createdDate=e.createdUTCDate,e.goodTillUTCMillis=(0,a.toUTCMillisFromLondonDate)(e.goodTill),t.fromDealingRestOrder({workingOrder:{workingOrderData:e}})}},{key:"fromDealingRestOrder",value:function(e){var n=e.workingOrder.workingOrderData,i=n.epic,o=n.trailingStopIncrement||-1,r=o>-1;n.stopType||(n.stopType=m.default.getType(n.riskType,n.contingentStop,n.trailingStopDistance,o));var s={epic:i,currencyCodeISO:n.currencyCodeISO,currencySymbol:n.currency,createdDate:new Date(n.createdDate),dealId:n.dealId,dealSize:parseFloat(n.size),direction:n.direction,isDMA:n.isDMA,limitType:p.default.Type.RELATIVE,limitLevel:(0,_.default)(n.contingentLimit),openLevel:parseFloat(n.level),orderType:n.requestType,goodTill:n.goodTill,goodTillUTCMillis:n.goodTillUTCMillis,level:parseFloat(n.level),stopLevel:(0,_.default)(n.contingentStop),stopLevelType:p.default.Type.RELATIVE,stopType:n.stopType||m.default.Type.NON_GUARANTEED};return r&&(s.stopStep=o,s.stopTrailingDistance=n.trailingStopDistance),new t(s)}}]),t})(h.default);e.default=b}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(3),n(0)],void 0!==(o=function(e,t,n){"use strict";function i(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=i===o.default.Type.ABSOLUTE;return(0,n.isEmpty)(e)?null:"pts"===e.unit?s?e.value/r:e.value:"pct"===e.unit&&t?(s||(t*=r),t*e.value/100):null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=(function(e){
return e&&e.__esModule?e:{default:e}})(t)}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(31),n(3),n(0)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return u.default.isEmpty(e)||u.default.isEmpty(t)||u.default.isEmpty("market.dealingRules")?null:e===a.default.GUARANTEED?t.get("dealingRules.minControlledRiskStopDistance"):t.get("dealingRules.minNormalStopOrLimitDistance")}function s(e,t){if(e.get("stopLevelType")!==l.default.Type.ABSOLUTE||u.default.isNil(t)||u.default.isNil(e.get("stopLevel")))return t;var n="-"===e.get("direction")?1:-1,i=n*(e.get("stopLevel")-e.get("latest"));return Math.min(Math.max(0,i),t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getMinimumDistanceFromMarket=r,e.getMinimumDistanceValueForExistingPosition=s;var a=o(t),l=o(n),u=o(i)}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(4)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),a=(function(e){function t(e,o,r){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._subscriptionString=e,a._messageKey=o,a._lightstreamerService=r,a._isJson=s,a}return o(t,e),s(t,[{key:"_handleMessage",value:function(e){var n=this._messageKey,i=n.length,o=e.getValue(n);if(o.substring(0,i)===n&&(o=o.substring(i+1)),this._isJson)try{this.trigger(t.Events.UPDATED,JSON.parse(o))}catch(e){}else this.trigger(t.Events.UPDATED,o)}},{key:"startListening",value:function(e){if(!this._subscription){var t=this._subscriptionString.replace("{identifier}",e);this._subscription=this._lightstreamerService.subscribe(t,[this._messageKey],"RAW",this._handleMessage.bind(this))}return this}},{key:"stopListening",value:function(){return this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this}},{key:"destroy",value:function(){this.stopListening(),this.off()}}]),t})(r.default);a.Events={UPDATED:"UPDATED"},e.default=a}.apply(t,i))&&(e.exports=o)}),(function(e,t){function n(e){return o(e)&&m.call(e,"callee")&&(!_.call(e,"callee")||f.call(e)==c)}function i(e){return null!=e&&s(e.length)&&!r(e)}function o(e){return l(e)&&i(e)}function r(e){var t=a(e)?f.call(e):"";return t==d||t==h}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var u=9007199254740991,c="[object Arguments]",d="[object Function]",h="[object GeneratorFunction]",p=Object.prototype,m=p.hasOwnProperty,f=p.toString,_=p.propertyIsEnumerable;e.exports=n}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=0;return!1===e?s:(s=(e-t)*i*(n||1),o&&(s*=-1),r&&(s+=parseFloat(i)),Math.round(1e4*s)/1e4)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=e.Condition={HIGHER:"HIGHER",LOWER:"LOWER"},n=e.PriceType={SELL_PRICE:"BID_PRICE",BUY_PRICE:"OFFER_PRICE"},i=e.ChangeType={PERCENT:"PERCENT",POINTS:"POINTS"},o=e.TimePeriod={FIVE_MINUTES:"FIVE_MINUTES",ONE_HOUR:"ONE_HOUR",ONE_DAY:"ONE_DAY"},r=e.Type={PRICE_CHANGE_ALERT:"PRICE_CHANGE_ALERT",PRICE_LEVEL_ALERT:"PRICE_ALERT",INDICATOR_ALERT:"INDICATOR_ALERT",ECON_ALERT:"ECON_ALERT",ECON_NEWSLETTER:"ECON_NEWSLETTER"},s=e.Status={TRIGGERED:"TRIGGERED",WAITING:"WAITING"};e.default={Type:r,PriceType:n,ChangeType:i,Condition:t,Status:s,TimePeriod:o}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=["ABORTED","CONFIRMED","FAILED","REJECTED","UNVERIFIED"],n=["STARTED","PENDING"];e.NOT_STARTED="NOT_STARTED",e.STARTED="STARTED",e.PENDING="PENDING",e.CONFIRMED="CONFIRMED",e.REJECTED="REJECTED",e.UNVERIFIED="UNVERIFIED",e.FAILED="FAILED",e.ABORTED="ABORTED",e.IN_PROGRESS_STATES=n,e.COMPLETED_STATES=t}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(13),n(14)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(n),a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),l=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},u=Object.keys(t.FID_SCHEMA),c=(function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"V2-M-{fids}{modifiers}|{id}","MERGE",n))}return r(t,e),a(t,[{key:"add",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e.get("dealId"),this.getFids(),e.boundOnStreamedUpdate)}},{key:"remove",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,e.boundOnStreamedUpdate)}},{key:"getFids",value:function(){return u}}]),t})(s.default);e.default=c}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(14),n(0)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BINARY_FIDS=e.FIDS=e.FID_MAPPING=void 0;var s=(function(e){return e&&e.__esModule?e:{default:e}})(t),a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),l=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},u=e.FID_MAPPING={BID:"BID",BID_QUOTE_ID:"BID_QUOTE",CPT:"CHANGE",CPC:"CHANGE_PCT",HIG:"HIGH",LOW:"LOW",MKT:"MARKET_NAME",OFR:"OFFER",OFR_QUOTE_ID:"OFFER_QUOTE",UBS:"MARKET_STATUS",UTM:"UPDATE_TIME"},c=e.FIDS=(0,n.reject)((0,n.keys)(u),(0,n.curry)(n.eq)("MKT")),d=e.BINARY_FIDS=(0,n.keys)(u),h=/(?:\.FREE)*$/,p=(function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"V2-F-{fids}{modifiers}|{id}","MERGE",n))}return r(t,e),a(t,[{key:"add",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.get("isUnpriced")||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,this._getEpicForStreaming(e),e.get("isBinary")?d:c,e.boundOnStreamedV2Update,n.concat(e.getSubscriptionModifiers()))}},{key:"remove",value:function(e){e.get("isUnpriced")||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,e.boundOnStreamedV2Update)}},{key:"_getEpicForStreaming",value:function(e){var t=e.get("epic");return e.get("isFree")?t.replace(h,".FREE"):t}}]),t})(s.default);p.FID_MAPPING=u,e.default=p}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(18),n(9),n(3),n(61),n(10)],void 0!==(o=function(e,t,n,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var c=s(t),d=s(n),h=s(i),p=s(o),m=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(r),f=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),_=(function(e){function t(e,n,i,o,r){var s;a(this,t);var u=l(this,(s=t.__proto__||Object.getPrototypeOf(t)).call.apply(s,[this,{expiryTime:null,triggerLevel:null}].concat(Array.prototype.slice.call(arguments))));return u.attachListeners({isSubmittable:"triggerLevel maxOrderDistance",maxOrderDistance:"direction stopType market.bid market.offer\n                            market.dealingRules market.dealingRules.maxStopOrLimitDistance",maxStopOrLimitDistance:"direction stopType triggerLevel",minStopDistance:"direction stopType triggerLevel",orderLevel:"triggerLevel",orderType:"market.bid market.offer direction triggerLevel"}),o.applyLastTradedStop(u),o.applyLastTradedLimit(u),o.applyLastTradedSizeAndCurrency(u),o.applyDefaultLevel(u),u}return u(t,e),f(t,[{key:"_getIsMarketDealable",value:function(){return this._market.get("marketStatus")===d.default.TRADEABLE||this._market.get("marketStatus")===d.default.AUCTION||this._market.get("marketStatus")===d.default.EDIT}},{key:"_getMaxOrderDistance",value:function(){return this.get("direction")&&null!==this.get("market.dealingRules")?{unit:"pts",value:(0,c.default)(this.get("market.dealingRules.maxStopOrLimitDistance"),this._getCurrentMarketLevel(),h.default.Type.ABSOLUTE,this.get("scalingFactor"))}:null}},{key:"_getOrderLevel",value:function(){return this.get("triggerLevel")}},{key:"_getOrderType",value:function(){var e=this.get("currentMarketLevel"),t=this.get("triggerLevel");return this.get("direction")&&t?this._getIsBuy()&&t>e||this._getIsSell()&&t<e?"STOP":"LIMIT":null}},{key:"_calculateDistance",value:function(e,t){return h.default.distanceFrom(e,t,this.get("triggerLevel"),this.get("decimalPlacesFactor"))}},{key:"_getValidators",value:function(){return[m.controlledRiskTradingAvailable,m.dateBelowMin,m.direction,m.limit,m.marketDealable,m.triggerLevelWithinValidDistance,m.triggerLevelAboveZero,m.sizeAboveMin,m.stop]}},{key:"toJSON",value:function(){var e=this.get("direction"),t=this.get("expiryTime"),n=this._hasTrailingStop(),i=this.get("market");return{currencyCode:this.get("currency.name"),dealReference:this.get("dealReference"),direction:e?e.toUpperCase():null,epic:i.get("epic"),expiry:i.get("prompt"),forceOpen:this.get("forceOpen"),goodTillDate:t,guaranteedStop:this._hasGuaranteedStop(),level:this.get("triggerLevel"),limitDistance:this._getLimitDistance(),size:this.get("size"),stopDistance:this._getStopDistance(),submittedTimestamp:this.get("heartbeat").get("timestamp"),timeInForce:t?"GOOD_TILL_DATE":"GOOD_TILL_CANCELLED",type:this.get("orderType"),trailingStop:n,trailingStopIncrement:n?this.get("stopStep"):null,quoteId:this.get("quoteId")}}}]),t})(p.default);e.default=_}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(62),n(10)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),u=(function(e){function t(e,n,r,s,a){var l;i(this,t);var u=o(this,(l=t.__proto__||Object.getPrototypeOf(t)).call.apply(l,[this,{}].concat(Array.prototype.slice.call(arguments))));return s.applyLastTradedStop(u),s.applyLastTradedLimit(u),s.applyLastTradedSizeAndCurrency(u),s.applyLastTradedPointsThroughCurrent(u),s.applyDefaultLevel(u),u}return r(t,e),l(t,[{key:"_getValidators",value:function(){var e=[a.direction,a.marketDealable,a.sizeAboveMin,a.controlledRiskTradingAvailable];return this.get("market.instrumentType").match(/^OPT|BINARY/gi)||(e=e.concat([a.stop,a.limit])),e}},{key:"toJSON",value:function(){var e=this.get("market"),t=this.get("settings"),n=this._hasTrailingStop(),i=this.get("direction"),o=t.get("showPartialFill")?this.get("partialFill"):t.get("partialFill"),r=this.get("pointsThroughCurrent"),s={currencyCode:this.get("currency.name"),dealReference:this.get("dealReference"),direction:i?i.toUpperCase():null,guaranteedStop:this._hasGuaranteedStop(),level:this._getOrderLevel(),epic:e.get("epic"),forceOpen:this.get("forceOpen"),limitDistance:this._getLimitDistance(),orderType:this.get("orderType"),size:this.get("size"),stopDistance:this._getStopDistance(),submittedTimestamp:+this._getSubmittedTimestamp(),timeInForce:o?"EXECUTE_AND_ELIMINATE":"FILL_OR_KILL",trailingStop:n,trailingStopIncrement:n?this.get("stopStep"):null,expiry:e.get("prompt"),quoteId:this.get("quoteId")};return(0===r||r>0)&&(s.pointsThroughCurrent=r),s}}]),t})(s.default);e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=(function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),n=/(\d{2})\/(\d{2})\/(\d{2}) (\d{2}):(\d{2})/,i=/0?(\d\d?):?(\d\d)?(am)?/,o=(e.toUTCMillisFromLondonDate=function(e){var i=e&&e.match(n);if(!i)return null;var r=t(i,6),s=r[1],a=r[2],l=r[3],u=r[4],c=r[5];return l=20+l,o(l,a,s,u,c)&&u--,Date.UTC(l,a-1,s,u,c)},e.toAccountTimeFromLondonTime=function(e,n){var o=e.match(i);if(!o)return null;var r=t(o,4),s=r[1],a=r[2],l=r[3],u=(+s+!l*(s%12&&12)+n+24)%24,c=0===u?0:u%12||12;return a?c+":"+a+(u<12?"am":"pm"):c+(u<12?"am":"pm")},function(e,t,n,i,o){var r=new Date(e,t-1,n,i,o),s=new Date(e,2,24),a=new Date(e,9,24);return s.setDate(31-s.getDay()),s.setHours(1),a.setDate(31-a.getDay()),a.setHours(2),r>=s&&r<a})}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(9)],void 0!==(o=function(e,t){"use strict";function n(e){return e.isAvailableForOnlineTrading()&&l(e.get("marketStatus"),u.default.TRADEABLE)&&e.canTradeOTC()}function i(e){var t=e.get("market");return!e.get("isDMA")&&t.isAvailableForOnlineTrading()&&t.areEditsAndOrdersAllowed()&&l(t.get("marketStatus"),u.default.TRADEABLE,u.default.EDIT,u.default.AUCTION)&&t.canTradeOTC()}function o(e){var t=e.get("market");return!e.get("isDMA")&&t.isAvailableForOnlineTrading()&&l(t.get("marketStatus"),u.default.TRADEABLE)&&t.canTradeOTC()}function r(e){return e.isAvailableForOnlineTrading()&&e.areEditsAndOrdersAllowed()&&l(e.get("marketStatus"),u.default.TRADEABLE,u.default.EDIT,u.default.AUCTION)&&e.canTradeOTC()}function s(e){var t=e.get("market");return!e.get("isDMA")&&t.isAvailableForOnlineTrading()&&t.areEditsAndOrdersAllowed()&&l(t.get("marketStatus"),u.default.TRADEABLE,u.default.EDIT,u.default.AUCTION)&&t.canTradeOTC()}function a(e){var t=e.get("market");return!e.get("isDMA")&&t.isAvailableForOnlineTrading()&&t.areEditsAndOrdersAllowed()&&l(t.get("marketStatus"),u.default.TRADEABLE,u.default.EDIT,u.default.AUCTION)&&t.canTradeOTC()}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.indexOf(e)>-1}Object.defineProperty(e,"__esModule",{value:!0}),e.canOpenPosition=n,e.canEditPosition=i,e.canClosePosition=o,e.canCreateOrder=r,e.canEditOrder=s,e.canDeleteOrder=a;var u=(function(e){return e&&e.__esModule?e:{default:e}})(t)}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={NON_GUARANTEED:"NON_GUARANTEED",GUARANTEED:"GUARANTEED",TRAILING:"TRAILING"};e.default=t}.apply(t,i))&&(e.exports=o)}),(function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function o(e){return r(e)&&h.call(e)==a}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?p.test(c.call(e)):n(e)&&l.test(e))}var a="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=(function(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0})(Array,"isArray"),f=9007199254740991,_=m||function(e){return n(e)&&i(e.length)&&"[object Array]"==h.call(e)};e.exports=_}),(function(e,t){var n;n=(function(){return this})();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),i="0123456789ABCDEFGHJKMNPQRSTVWXYZ",o=(function(){function e(n){t(this,e),this._accountId=n}return n(e,[{key:"generateDealReference",value:function(e){return this._toAlphaNumeric(this._convertAccountIdToNumber(this._accountId))+this._toAlphaNumeric(e||Date.now())}},{key:"_convertAccountIdToNumber",value:function(e){return parseInt(e.toUpperCase().replace(/[A-Z]/g,(function(e){var t=e.charCodeAt(0)-64;return(t<10?"0":"")+t})),10)}},{key:"_toAlphaNumeric",value:function(e){for(var t=i.length,n=[],o=15,r=e,s=void 0;--o>=0;)s=r&t-1,n[o]=i[s],r=Math.floor(r/t);return this._removePadding(n.join(""))}},{key:"_removePadding",value:function(e){return e.replace(/^0+/,"")}}]),e})();e.default=o}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},l=(function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{timestamp:void 0}))}return o(t,e),s(t,[{key:"isValid",value:function(){return Math.abs(parseInt(this.get("timestamp"),10)-(new Date).getTime())<31536e6}},{key:"_startStreaming",value:function(e){var t=this;return this._subscription=e.subscribe("V2-M-HEARTBEAT|HB.U.HEARTBEAT.IP",["MSG_UPDATE"],"MERGE",(function(e){var n=e.getValue("MSG_UPDATE");t._hearbeatIsInSeconds(n)?t.set("timestamp",n+"000"):(t.set("timestamp",n+""),t.trigger("sanitised",n))})),this}},{key:"_hearbeatIsInSeconds",value:function(e){return 1e3*parseInt(e,10)<1e13}},{key:"prepare",value:function(e){var t=this;return this._startStreaming(e).value("timestamp").then((function(){return t}))}},{key:"destroy",value:function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t})(r.default);e.default=l}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(53),n(5),n(3),n(0)],void 0!==(o=function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=r(t),c=r(n),d=r(i),h=r(o),p=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),m=(function(e){function t(e){return s(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.default.merge({defaultLevelType:d.default.Type.RELATIVE,forceOpen:!1,marketOrder:!1,partialFill:!1,rememberLastTradedLimitDistance:!1,rememberLastTradedSize:!1,rememberLastTradedStopTypeAndDistance:!1,rememberLastTradedPointsThroughCurrent:!1,showForceOpen:!1,showMarketOrder:!1,showPartialFill:!1,showPointsThroughCurrent:!1},e)))}return l(t,e),p(t,[{key:"applyLastTradedSizeAndCurrency",value:function(e){if(this.get("rememberLastTradedSize")){var t=h.default.find(e.get("currencies"),(function(t){return t.get("name")===e.get("market.lastTradedCurrency")}));e.set("currency",t||e.get("currency")),e.set("size",e.get("market.lastTradedSize"))}}},{key:"applyLastTradedStop",value:function(e){if(this.get("rememberLastTradedStopTypeAndDistance")){var t=this.get("defaultLevelType");e.set("stopType",c.default.getValidStopType(e.get("stopTypes"),e.get("market.lastTradedStopType")||c.default.Type.NON_GUARANTEED));var n=null;t===d.default.Type.RELATIVE&&(n=e.get("market.lastTradedStopDistance")||null),e.setProperties({stopStep:e.get("market.lastTradedTrailingStopIncrement"),stopLevel:n,stopLevelType:t})}}},{key:"applyLastTradedLimit",value:function(e){if(this.get("rememberLastTradedLimitDistance")){var t=this.get("defaultLevelType"),n=void 0;n=t===d.default.Type.RELATIVE?e.get("market.lastTradedLimitDistance"):null,e.setProperties({limitLevel:n,limitType:t})}}},{key:"applyLastTradedPointsThroughCurrent",value:function(e){this.get("rememberLastTradedPointsThroughCurrent")&&e.set("pointsThroughCurrent",e.get("market.lastTradedPointsThroughCurrent"))}},{key:"applyDefaultLevel",value:function(e){var t=this.get("defaultLevelType");e.setProperties({stopLevelType:t,limitType:t})}}]),t})(u.default);e.default=m}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(8),n(1),n(23),n(82),n(7),n(4),n(44),n(0)],void 0!==(o=function(e,t,n,i,o,r,s,a,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0});var m,f=u(t),_=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),g=u(i),v=u(o),y=u(r),M=u(s),b=u(a),A=u(l),T=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),E="/signals-gateway/alerts/",w=(m={},p(m,g.default.Type.PRICE_LEVEL_ALERT,E+"price/"),p(m,g.default.Type.PRICE_CHANGE_ALERT,E+"price/change/"),m),O=(function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.default.Type.PRICE_LEVEL_ALERT;c(this,t);var i=d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return i._session=e,i._alertType=n,i}return h(t,e),T(t,[{key:"getAll",value:function(){var e=this;return _.get(this.getUrl(),this._session).then((function(e){return t.enrichMarkets(e)})).then((function(n){var i=n.priceAlerts,o=n.markets;return i.map((function(n){return t.createAlertObjectFromMarkets(n,o,e._alertType)}))}))}},{key:"delete",value:function(e){return _.del(""+this.getUrl()+e,this._session).then((function(){return{id:e}}))}},{key:"create",value:function(e){var n=this,i=this._alertType;return _.post(this.getUrl(),this._session,t.createPostData(e,i)).then((function(e){var o=y.default.populateWithMarketData(e.market),r=t.createAlertObject(e.priceAlert,o,i);return n.trigger(f.default.ADDED,r),r}))}},{key:"update",value:function(e){var t=A.default.omit(e,["id"]);return _.put(""+this.getUrl()+e.id,this._session,t)}},{key:"getUrl",value:function(){return w[this._alertType]}}],[{key:"createPostData",value:function(e,t){return t!==g.default.Type.PRICE_LEVEL_ALERT?e:{message:e.message,level:e.level,marketAttribute:e.priceType,epic:e.epic,notifications:[]}}},{key:"createAlertObjectFromMarkets",value:function(e,n,i){var o=n[e.epic];return t.createAlertObject(e,o,i)}},{key:"createAlertObject",value:function(e,n,i){return i&&i!==g.default.Type.PRICE_LEVEL_ALERT?t.createPriceChangeDealingRestAlert(e,n):t.createPriceLevelDealingRestAlert(e,n)}},{key:"enrichMarkets",value:function(e){var t=e.priceAlerts,n=e.markets;return{priceAlerts:t,markets:Object.keys(n).reduce((function(e,t){return e[t]=y.default.populateWithMarketData(n[t]),e}),{})}}},{key:"getStreamingClient",value:function(e){return new b.default(e)}},{key:"createPriceLevelDealingRestAlert",value:function(e,t){return v.default.fromDealingRestAlert({id:e.id,message:e.message,status:e.status,timestamp:e.timestamp,epic:e.epic,condition:e.condition,marketAttribute:e.marketAttribute,level:e.level,market:t})}},{key:"createPriceChangeDealingRestAlert",value:function(e,t){return v.default.fromDealingRestAlert({id:e.id,message:e.message,epic:e.epic,priceChange:e.priceChange,timePeriod:e.timePeriod,changeType:e.changeType,creationTime:e.creationTime,triggeredTime:e.triggeredTime,market:t})}}]),t})(M.default);e.default=O}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(1)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(t),o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),r=(function(){function e(t){n(this,e),this._session=t}return o(e,[{key:"getPositionMargin",value:function(e){return i.post("/"+this._session.environment.path+"/v3/margin/positions/otc",this._session,e)}},{key:"getClosePositionMargin",value:function(e){return i.del("/"+this._session.environment.path+"/v3/margin/positions/otc",this._session,e)}},{key:"getOrderMargin",value:function(e){return i.post("/"+this._session.environment.path+"/v3/margin/workingorders/otc",this._session,e)}}]),e})();e.default=r}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(7),n(1),n(6)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=o(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=o(i),u=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n]
;i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),c=(function(){function e(t){r(this,e),this._session=t}return u(e,[{key:"findByEpic",value:function(e){var t=this._session,n="/"+t.environment.path+"/v2/markets/details/"+e;return a.get(n,t).then(s.default.populateWithMarketData)}},{key:"findByEpics",value:function(e){var t=this;return l.default.all(e.map((function(e){return t.findByEpic(e)})))}},{key:"getMarketInfo",value:function(e){var t=this._session,n="/"+t.environment.path+"/markets/summary/"+e;return a.get(n,t)}},{key:"getByWatchlist",value:function(e){var t="/"+this._session.environment.path+"/v1/markets/watchlists/"+e;return a.get(t,this._session).then((function(e){return e.map((function(e){return e.marketDataResponse.dynamicHierarchyEpic=e.instrument.dynamicHierarchyEpic,e.marketDataResponse}))})).then((function(e){return e.map(s.default.populateWithMarketData)}))}}]),e})();e.default=c}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(17),n(7),n(87),n(88),n(89),n(47),n(1),n(0)],void 0!==(o=function(e,t,n,i,o,r,s,a,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var d=u(t),h=u(n),p=u(i),m=u(o),f=u(r),_=u(s),g=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(a),v=u(l),y=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),M=(function(){function e(t,n,i){c(this,e),this._session=t,this._confirmationStreamingClient=n,this._dealReferenceGenerator=i}return y(e,[{key:"create",value:function(e){return new p.default(e,this._session,this._confirmationStreamingClient)}},{key:"delete",value:function(e){return new m.default(e,this._session,this._confirmationStreamingClient)}},{key:"getAll",value:function(){var t="/"+this._session.environment.path+"/v1/orders/workingorders";return this._requestPromise=g.get(t,this._session).then((function(t){var n=e.parseMarkets(t);return{orders:t.map((function(e){return e.marketDataResponse?d.default.fromDealingRestOrder(e):null})).filter(v.default.identity),markets:n}})),this._requestPromise}},{key:"edit",value:function(e){return new f.default(e,this._session,this._confirmationStreamingClient)}},{key:"destroy",value:function(){this._requestPromise&&(this._requestPromise.cancel(),delete this._requestPromise),this._session=null,this._dealReferenceGenerator=null}}],[{key:"getStreamingClient",value:function(e){return new _.default(e)}},{key:"parseMarkets",value:function(e){return v.default.chain(e).uniqBy("workingOrder.workingOrderData.epic").map("marketDataResponse").map(h.default.populateWithMarketData).compact().keyBy(v.default.method("get","epic")).value()}}]),e})();e.default=M}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(13),n(7),n(91),n(90),n(92),n(48),n(1),n(0)],void 0!==(o=function(e,t,n,i,o,r,s,a,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var d=u(t),h=u(n),p=u(i),m=u(o),f=u(r),_=u(s),g=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(a),v=u(l),y=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),M=(function(){function e(t,n,i){c(this,e),this._session=t,this._confirmationStreamingClient=n,this._dealReferenceGenerator=i}return y(e,[{key:"getAll",value:function(){var t="/"+this._session.environment.path+"/v1/orders/positions";return this._requestPromise=g.get(t,this._session).then((function(t){var n=e.parseMarkets(t);return{positions:t.map((function(e){return e.marketDetails||e.market?(e.marketDetails=e.marketDetails||e.market,d.default.fromDealingRestPosition(e)):null})).filter(v.default.identity),markets:n}})),this._requestPromise}},{key:"create",value:function(e){return new p.default(e,this._session,this._confirmationStreamingClient)}},{key:"delete",value:function(e){return new m.default(e,this._session,this._confirmationStreamingClient)}},{key:"edit",value:function(e){return new f.default(e,this._session,this._confirmationStreamingClient)}},{key:"destroy",value:function(){this._requestPromise&&(this._requestPromise.cancel(),delete this._requestPromise),this._session=null,this._dealReferenceGenerator=null}}],[{key:"getStreamingClient",value:function(e){return new _.default(e)}},{key:"parseMarkets",value:function(e){return v.default.chain(e).uniqBy("openPosition.openPositionData.epic").map(h.default.populateFromPositionResponse).compact().keyBy(v.default.method("get","epic")).value()}}]),e})();e.default=M}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(36),n(6),n(43)],void 0!==(o=function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=r(t),l=r(n),u=r(i),c=(r(o),(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})()),d=(function(){function e(t,n,i){s(this,e),this._defaultSettings=n,this._session=t,this._userPreferencesService=i,this._settings=null}return c(e,[{key:"_getSettings",value:function(e){if(this._settings)return this._settings;var t=void 0;return t=a.default.isEmpty(e)&&this._defaultSettings?this._defaultSettings.snapshot():e,this._settings=new l.default(t),this._settings}},{key:"getSettings",value:function(){var e=this;return this._userPreferencesService?this._userPreferencesService.getPreferences().then((function(t){return e._getSettings(t)})):u.default.resolve(this._getSettings())}},{key:"saveSettings",value:function(e){return this._userPreferencesService.setPreferences(e.snapshot())}},{key:"destroy",value:function(){this._settings.destroy(),this._settings=null}}]),e})();e.default=d}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(1),n(6)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=o(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=(o(i),(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})()),u=(function(){function e(t){r(this,e),this._session=t,this._settings={}}return l(e,[{key:"getPreferences",value:function(){var e=this;return a.get("/usermanagement/preferences/DEAL",this._session).then((function(t){return e._settings=s.default.cloneDeep(t),t}))}},{key:"getModifiedProperties",value:function(e){var t=this;return s.default.pickBy(e,(function(n,i){return t._settings[i]!==e[i]}))}},{key:"setPreferences",value:function(e){var t=this,n=this.getModifiedProperties(e);return a.put("/usermanagement/preferences/DEAL",this._session,n).then((function(){s.default.assign(t._settings,n)}))}}]),e})();e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(8),n(20),n(4)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=o(t),u=o(n),c=o(i),d=(function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),h=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),p=(function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._lightstreamerService=e,n}return a(t,e),h(t,[{key:"startListening",value:function(e){return this._subscription=new u.default("V2-M-MESSAGE_EVENT_HANDLER|{identifier}-ACTION","ALU",this._lightstreamerService,!1).startListening(e),this._subscription.on(u.default.Events.UPDATED,this._handleStreamingUpdate.bind(this)),this}},{key:"_handleStreamingUpdate",value:function(e){var t=e.split("|"),n=t.reduce((function(e,t){var n=t.split("="),i=d(n,2),o=i[0],r=i[1];return e[o]=r,e}),{});this.trigger(l.default.UPDATED,n)}},{key:"stopListening",value:function(){this._subscription&&(this._subscription.destroy(),this._subscription=null),this.off()}},{key:"destroy",value:function(){this.stopListening(),this._lightstreamerService=null}}]),t})(c.default);e.default=p}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(6)],void 0!==(o=function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=i(t),s=i(n),a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),l=(function(){function e(t,n){o(this,e),this._lightstreamerService=t,this._accountId=n,this._listeners=[],this._updates=[],this._startListening()}return a(e,[{key:"waitForConfirm",value:function(e){var t=this;return new s.default(function(n,i){t._listeners.push({dealReference:e,resolve:n,reject:i}),t._tryResolveOrReject()})}},{key:"destroy",value:function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._updates=null}},{key:"_startListening",value:function(){var e=this._accountId;this._subscription=this._lightstreamerService.subscribe("V2-M-MESSAGE_EVENT_HANDLER|"+e+"-ERS",["update"],"RAW",this._handleUpdateFromLightstreamer.bind(this),2)}},{key:"_tryResolveOrReject",value:function(){var e=this,t=r.default.map(this._updates,"content.dealReference"),n=r.default.map(this._listeners,"dealReference"),i=r.default.intersection(t,n);r.default.filter(this._updates,(function(e){return r.default.includes(i,e.content.dealReference)})).forEach((function(t){var n=r.default.filter(e._listeners,(function(e){return e.dealReference===t.content.dealReference}));"OTC"===t.category?n.forEach((function(e){return e.resolve(t)})):"OTC_REJECTED"===t.category&&n.forEach((function(e){return e.reject(t)})),e._listeners=r.default.difference(e._listeners,n)})),this._updates=r.default.takeRight(this._updates,500)}},{key:"_handleUpdateFromLightstreamer",value:function(e){var t=e.getValue("update");if("INV"!==t){var n=JSON.parse(t);n.category&&(this._updates.push(n),this._tryResolveOrReject())}}}]),e})();e.default=l}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(17),n(25)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(n),a=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),l=Object.keys(t.FID_SCHEMA),u=(function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"getFids",value:function(){return l}}]),t})(s.default);e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(8),n(20),n(4),n(17)],void 0!==(o=function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=r(t),c=r(n),d=r(i),h=r(o),p=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),m=(function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._lightstreamerService=e,n}return l(t,e),p(t,[{key:"startListening",value:function(e){return this._subscription=new c.default("V2-M-MESSAGE_EVENT_HANDLER|{identifier}-WO-JSON","WOU",this._lightstreamerService).startListening(e),this._subscription.on(c.default.Events.UPDATED,this._handleStreamingUpdate.bind(this)),this}},{key:"_handleStreamingUpdate",value:function(e){var t=e.header.contentType,n=e.body;if(t.match(/Add$/)){var i=h.default.fromWOU(n.workingOrder);this.trigger(u.default.ADDED,i)}else t.match(/Delete$/)&&this.trigger(u.default.REMOVED,n.workingOrder.dealId)}},{key:"stopListening",value:function(){this._subscription&&(this._subscription.destroy(),this._subscription=null),this.off()}},{key:"destroy",value:function(){this.stopListening(),this._lightstreamerService=null}}]),t})(d.default);e.default=m}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(8),n(20),n(4),n(13)],void 0!==(o=function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=r(t),c=r(n),d=r(i),h=r(o),p=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),m=(function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._lightstreamerService=e,n}return l(t,e),p(t,[{key:"startListening",value:function(e){return this._subscription=new c.default("V2-M-MESSAGE_EVENT_HANDLER|{identifier}-OP-JSON","OPU",this._lightstreamerService).startListening(e),this._subscription.on(c.default.Events.UPDATED,this._handleStreamingUpdate.bind(this)),this}},{key:"_handleStreamingUpdate",value:function(e){var t=e.header.contentType,n=e.body;if(t.match(/Add$/)){var i=n.openPosition.epic;if(h.default.isValidEpic(i)){var o=h.default.fromOPU(n);this.trigger(u.default.ADDED,o)}}else t.match(/Delete$/)&&this.trigger(u.default.REMOVED,n.openPosition.dealId)}},{key:"stopListening",value:function(){this._subscription&&(this._subscription.destroy(),this._subscription=null),this.off()}},{key:"destroy",value:function(){this.stopListening(),this._lightstreamerService=null}}]),t})(d.default);e.default=m}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(28),n(10)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=o(t),u=o(n),c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(i),d=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),h=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},p=(function(e){function t(e,n){var i;r(this,t);for(var o=arguments.length,a=Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];var u=s(this,(i=t.__proto__||Object.getPrototypeOf(t)).call.apply(i,[this,e,n.get("market")].concat(a)));return u.set("position",n),u.set("profitLoss",n.get("profitLoss")),u.set("size",n.get("dealSize")),u.set("maxSize",n.get("dealSize")),u.set("direction","+"===n.get("direction")?"sell":"buy"),u.set("sizeMaxDecimalPlaces","S"===n.get("market.unit")?0:2),u.attachListeners({profitLoss:"size position.profitLoss"}),u}return a(t,e),d(t,[{key:"_getValidators",value:function(){return[c.direction,c.marketDealable,c.sizeBelowMax,c.sizeAboveZero]}},{key:"_getMargin",value:function(){return this.get("marginService").getClosePositionMargin(this)}},{key:"_submitDeal",value:function(){return this._positionService.delete(this)}},{key:"_updatePerMarketSettings",value:function(){}},{key:"toJSON",value:function(){var e=this.get("position"),n=!!e.get("positions");return l.default.assign(l.default.pick(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this),["dealReference","submittedTimestamp","size","direction","orderType","timeInForce","quoteId"]),{expiry:e.get("market.displayPeriod"),level:e.get("latest"),currencyCodeISO:e.get("currencyCodeISO"),guaranteed:2===e.get("riskType")},n?{epic:e.get("market.epic")}:{dealId:e.get("dealId")})}},{key:"_getProfitLoss",value:function(){var e=this.get("position.dealSize");return e?this.get("position.profitLoss")/e*this.get("size"):0}}]),t})(u.default);e.default=p}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(61),n(10)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=(o(t),o(n)),u=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(i),c=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),d=(function(e){function t(e,n){var i;r(this,t);for(var o=arguments.length,a=Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];var u=s(this,(i=t.__proto__||Object.getPrototypeOf(t)).call.apply(i,[this,{},e,n.get("market")].concat(a)));return u.set("order",n),u.set("dealId",n.get("dealId")),u.set("isMarketDealable",u._getIsMarketDealable()),u.attachListeners({isSubmittable:"market.marketStatus"}),u}return a(t,e),c(t,[{key:"_getIsMarketDealable",value:function(){var e=this.get("order");return e&&e.canClose()}},{key:"_getValidators",value:function(){return[u.marketDealable]}},{key:"_submitDeal",value:function(){return this._positionService.delete(this)}},{key:"toJSON",value:function(){return{timeStamp:this.get("heartbeat").get("timestamp"),dealReference:this.get("dealReference")}}}]),t})(l.default);e.default=d}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(27),n(3),n(5),n(29),n(10),n(57)],void 0!==(o=function(e,t,n,i,o,r,s,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var h=l(t),p=l(n),m=(l(i),l(o)),f=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(s),_=(l(a),(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})()),g=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},v=(function(e){function t(e,n){var i;u(this,t);for(var o=arguments.length,r=Array(o>2?o-2:0),s=2;s<o;s++)r[s-2]=arguments[s];var a=c(this,(i=t.__proto__||Object.getPrototypeOf(t)).call.apply(i,[this,e,n.get("market")].concat(r)));return a.setProperties({expiryTime:n.get("goodTillUTCMillis"),isEditTicket:!0,order:n,direction:"+"===n.get("direction")?"buy":"sell",limitLevel:n.get("limitLevel"),limitType:n.get("limitType"),size:n.get("dealSize"),triggerLevel:n.get("openLevel"),stopStep:n.get("stopStep"),stopTrailingDistance:n.get("stopTrailingDistance"),stopLevel:n.get("stopLevel"),stopLevelType:n.get("stopLevelType"),stopType:n.get("stopType")}),a.set("isMarketDealable",a._getIsMarketDealable()),a.attachListeners({stopTypes:"order.stopType",isSubmittable:"order"}),a.listenTo(n,"goodTillUTCMillis",(function(e){return a.set("expiryTime",e)})),a.listenTo(n,"stopLevel",(function(e){return a.set("stopLevel",e)})),a.listenTo(n,"limitLevel",(function(e){return a.set("limitLevel",e)})),a}return d(t,e),_(t,[{key:"_getStopTypes",value:function(){return m.default.getStopTypes(this.get("market.controlledRisk"),this.get("market.guaranteedStopsAllowed"),this.get("market.trailingStopsAllowedPreference")).filter((function(e){return 1==e.valid&&e.value!==m.default.Type.TRAILING}))}},{key:"_getIsMarketDealable",value:function(){var e=this.get("order");return e&&e.canEdit()}},{key:"_getValidators",value:function(){return[f.dateBelowMin,f.direction,f.limit,f.marketDealable,f.triggerLevelWithinValidDistance,f.triggerLevelValidForOrderType,f.triggerLevelAboveZero,f.stop,f.stopSizeChangeAllowed,f.controlledRiskUser]}},{key:"_submitDeal",value:function(){return this._positionService.edit(this)}},{key:"toJSON",value:function(){return h.default.pick(g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this),["dealReference","goodTillDate","guaranteedStop","level","limitDistance","stopDistance","submittedTimestamp","timeInForce","trailingStop","trailingStopIncrement","type","quoteId"])}}]),t})(p.default);e.default=v}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(62),n(5),n(10),n(57),n(19)],void 0!==(o=function(e,t,n,i,o,r,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var d=a(t),h=a(n),p=a(i),m=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(o),f=a(r),_=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),g=(function(e){function t(e,n){var i;l(this,t);for(var o=arguments.length,r=Array(o>2?o-2:0),s=2;s<o;s++)r[s-2]=arguments[s];var a=u(this,(i=t.__proto__||Object.getPrototypeOf(t)).call.apply(i,[this,{isEditTicket:!0,currency:n.get("currency"),direction:"+"===n.get("direction")?"buy":"sell",limitLevel:n.get("limitLevel"),limitType:n.get("limitType"),position:n,stopType:n.get("stopType")||p.default.Type.NON_GUARANTEED,stopStep:n.get("stopStep"),stopLevel:n.get("stopLevel"),stopLevelType:n.get("stopLevelType"),stopTrailingDistance:n.get("stopTrailingDistance"),canEditTrailingDistance:!0},e,n.get("market")].concat(r)));return a.attachListeners({stopTypes:"position.stopType"}),a.listenTo(n,"stopLevel",(function(e){return a.set("stopLevel",e)})),a.listenTo(n,"limitLevel",(function(e){return a.set("limitLevel",e)})),a.listenTo(n,"stopType",(function(e){return a.set("stopType",e||a.get("defaultStopType"))})),a}return c(t,e),_(t,[{key:"_getIsMarketDealable",value:function(){return this.get("position").canEdit()}},{key:"_getStopTypes",value:function(){var e=(0,f.default)(this.get("position.stopType"),this.get("market.controlledRisk"),this.get("market.guaranteedStopsAllowed"),this.get("market.trailingStopsAllowedPreference"));return this.get("position.positions")?e.filter((function(e){return e.value!=p.default.Type.TRAILING})):e}},{key:"_getOrderLevel",value:function(){return this.get("position.latest")}},{key:"_getValidators",value:function(){return[m.direction,m.marketDealable,m.stop,m.stopSizeChangeAllowed,m.stopTypeChangeAllowed,m.limit,m.guaranteedStopIsEmptyValidator]}},{key:"_submitDeal",value:function(){return this._positionService.edit(this)}},{key:"_getMinStopDistance",value:function(){if(!this.get("market.dealingRules"))return null;var e=this.get("stopType");return p.default.getMinimumDistanceRuleInPoints(this.get("stopLevelType"),(0,s.getMinimumDistanceFromMarket)(e,this.get("market")),this._getOrderLevel(),this.get("scalingFactor"),this.get("position"))}},{key:"toJSON",value:function(){return this.get("position.positions")?this._toAggregatePositionJson():this._toSinglePositionJson()}},{key:"_toSinglePositionJson",value:function(){var e=this.get("position"),t=this.get("stopLevel"),n=this.get("stopTrailingDistance"),i=this.get("stopStep"),o=!!(t&&n&&i),r={limitLevel:this.get("limitLevel"),stopLevel:t,trailingStop:o&&this.get("stopType")===p.default.Type.TRAILING,trailingStopDistance:n,trailingStopIncrement:i};return d.default.assign({dealReference:this.get("dealReference"),guaranteedStop:this._hasGuaranteedStop(),limitLevel:e.get("limitLevel"),stopLevel:e.get("stopLevel"),trailingStop:this._hasTrailingStop(),trailingStopDistance:e.get("stopTrailingDistance"),trailingStopIncrement:e.get("stopStep"),submittedTimestamp:this._getSubmittedTimestamp(),quoteId:this.get("quoteId")},r)}},{key:"_toAggregatePositionJson",value:function(){var e=this.get("position"),t=this.get("stopLevel"),n=this.get("limitLevel")||"",i=!(!e.get("limitLevel")||n),o=!(!e.get("stopLevel")||t);return{token2:"",tokenVO:"",dealLevelBid:""+e.get("market.bid"),dealLevelOffer:""+e.get("market.offer"),limitLevel:""+n,lsServerName:"",stopLevel:""+(t||""),timeStamp:this.get("heartbeat.timestamp"),trailingStopDistance:null,trailingStopIncrement:null,dealIds:e.get("positions").map((function(e){return e.get("dealId")})),removeLimits:i,removeStop:o,quoteId:this.get("quoteId")}}}]),t})(h.default);e.default=g}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.supportsTwoWayBinding=!0,o}return o(t,e),t})(r.default);e.default=s
}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={RECONNECTED:"RECONNECTED"}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=void 0;return isNaN(e)||isNaN(t)||0===e||(i=t/e),isNaN(i)||parseInt(i,10)===i||(i=+i.toFixed(n)),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("number"!=typeof e)return null;var n=Math.pow(10,t);return Math.ceil(Math.abs(e)*n)/n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(5)],void 0!==(o=function(e,t){"use strict";function n(e,t,n,r){var s=i.default.getStopTypes(t,n,r);return o(e)?s.filter((function(e){return o(e.value)})):s.filter((function(e){return!o(e.value)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=(function(e){return e&&e.__esModule?e:{default:e}})(t),o=function(e){return e===i.default.Type.GUARANTEED}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0)],void 0!==(o=function(e,t){"use strict";function n(e){return e&&(e=parseFloat(e)),i.default.isFinite(e)&&e>0?e:null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=(function(e){return e&&e.__esModule?e:{default:e}})(t)}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2),n(9),n(30)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=o(t),u=o(n),c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(i),d=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),h=(function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{epic:e,bid:null,offer:null,currencies:[]}));return n.attachListeners({isUnpriced:"epic"}),n}return a(t,e),d(t,[{key:"populateWith",value:function(e){return this.setProperties(e),this}},{key:"isAvailableForOnlineTrading",value:function(){var e=this.get("marketStatus");return e!==u.default.CLOSED&&(e!==u.default.OFFLINE&&e!==u.default.SUSPENDED)}},{key:"areEditsAndOrdersAllowed",value:function(){return!!this.get("stopsLimitsAllowed")}},{key:"canTradeOTC",value:function(){var e="CURRENCIES"===(this.get("instrumentType")||"").toUpperCase();return!(!this.get("otcTradeable")||this.canTradeDMA()&&e)}},{key:"canTradeDMA",value:function(){var e=(this.get("viewPermission")||"").toUpperCase();return!!this.get("dmaTradeable")&&"L2"===e}},{key:"canOpenPosition",value:function(){return c.canOpenPosition(this)}},{key:"canCreateOrder",value:function(){return c.canCreateOrder(this)}},{key:"_getIsUnpriced",value:function(){return t.isUnpriced(this.get("epic"))}}],[{key:"isUnpriced",value:function(e){return e===t.unpricedEpic}},{key:"unpricedEpic",get:function(){return"ZZ.Z.UNPRICED.DEAL.IP"}}]),t})(l.default);e.default=h}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),a=(function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.attachListeners({latest:"market.bid market.offer"}),o.boundOnStreamedUpdate=o.onStreamedUpdate.bind(o),o}return o(t,e),s(t,[{key:"isShort",value:function(){return"-"===this.get("direction")}},{key:"isPriceTypeBackOnly",value:function(){return"B"===this.get("priceType")}},{key:"_getLatest",value:function(){}},{key:"onStreamedUpdate",value:function(e){}}]),t})(r.default);e.default=a}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(5),n(63),n(15),n(10),n(0)],void 0!==(o=function(e,t,n,i,o,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var c=s(t),d=s(n),h=s(i),p=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(o),s(r),(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})()),m=(function(e){function t(e,n,i,o,r,s){a(this,t);var u=i.get("controlledRisk"),d=i.get("guaranteedStopsAllowed"),h=i.get("trailingStopsAllowedPreference");e.stopTypes=c.default.getStopTypes(u,d,h).filter((function(e){return e.value!==c.default.Type.TRAILING}));var p=l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return p.listenTo(p,"triggerLevel",p._updateMargin),p}return u(t,e),p(t,[{key:"toString",value:function(){return h.default.ORDER}}]),t})(d.default);e.default=m}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(5),n(63),n(15),n(0)],void 0!==(o=function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=r(t),c=r(n),d=r(i),h=r(o),p=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),m=(function(e){function t(e,n,i,o,r,l){s(this,t);var c="HIDE"!==i.get("dealingRules.marketOrderPreference"),d=r.get("showPointsThroughCurrent")&&r.get("rememberLastTradedPointsThroughCurrent"),p=i.get("controlledRisk"),m=i.get("guaranteedStopsAllowed"),f=i.get("trailingStopsAllowedPreference");h.default.merge(e,{marketOrder:c&&r.get("marketOrder"),maxOffer:null,minBid:null,orderType:"QUOTE",partialFill:r.get("partialFill"),pointsThroughCurrent:d?i.get("lastTradedPointsThroughCurrent"):null,showMarketOrder:c&&r.get("showMarketOrder"),showPartialFill:r.get("showPartialFill"),showPointsThroughCurrent:r.get("showPointsThroughCurrent"),stopTypes:u.default.getStopTypes(p,m,f)});var _=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return _.attachListeners({marketOrder:"settings.marketOrder market.dealingRules market.dealingRules.marketOrderPreference",maxOffer:"pointsThroughCurrent market.offer",minBid:"pointsThroughCurrent market.bid",orderType:"marketOrder pointsThroughCurrent",showMarketOrder:"settings.showMarketOrder market.dealingRules market.dealingRules.marketOrderPreference"}),_.listenTo(_,"marketOrder",(function(){return _.set("pointsThroughCurrent",void 0)})),_.alias("settings",["partialFill","showPartialFill","showPointsThroughCurrent"]),_}return l(t,e),p(t,[{key:"toString",value:function(){return d.default.POSITION}},{key:"_getMarketOrder",value:function(){return"HIDE"!==this.get("market.dealingRules.marketOrderPreference")&&this.get("settings.marketOrder")}},{key:"_getMinBid",value:function(){var e=+this.get("pointsThroughCurrent");return e>0?Math.max(this.get("market.bid")-e,0).toFixed(this.get("market.decimalPlacesFactor")):null}},{key:"_getMaxOffer",value:function(){var e=+this.get("pointsThroughCurrent"),t=+this.get("market.offer"),n="Binary"==this.get("market.instrumentType")?Math.min(t+e,100):t+e;return e>0?n.toFixed(this.get("market.decimalPlacesFactor")):null}},{key:"_getOrderType",value:function(){return this.get("marketOrder")?"MARKET":this.get("pointsThroughCurrent")?"LIMIT":"QUOTE"}},{key:"_getShowMarketOrder",value:function(){return"HIDE"!==this.get("market.dealingRules.marketOrderPreference")&&this.get("settings.showMarketOrder")}},{key:"_getSubmittedTimestamp",value:function(){var e=(new Date).getTime().toString();return this.get("heartbeat").isValid()?this.get("heartbeat.timestamp"):(this.trigger("invalidHeartbeat",{heartbeat:this.get("heartbeat.timestamp"),submittedTimestamp:e}),e)}}]),t})(c.default);e.default=m}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2),n(3),n(12),n(9),n(5),n(10),n(18),n(80),n(19),n(16),n(15),n(24),n(81),n(78),n(0)],void 0!==(o=function(e,t,n,i,o,r,s,a,l,u,c,d,h,p,m,f){"use strict";function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var b=_(t),A=_(n),T=_(i),E=_(o),w=_(r),O=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(s),_(a)),I=_(l),S=_(c),j=_(d),C=_(p),D=_(m),R=_(f),L=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),N=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},k=(function(e){function t(e,n,i,o,r,s){v(this,t);var a=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,R.default.merge({dealReference:s.generateDealReference(),defaultStopType:w.default.Type.NON_GUARANTEED,defaultLevelType:r.get("defaultLevelType"),dealSizeDecimalPlaces:"S"===i.get("unit")?0:2,direction:null,errors:new T.default,forceOpen:r.get("forceOpen"),isBuy:null,isEditTicket:!1,isSubmittable:!1,isSell:null,isMarketDealable:!1,margin:null,quoteId:null,limitType:A.default.Type.ABSOLUTE,limitLevel:null,marginService:null,market:i,minDealSize:null,minDealSizePts:i.get("minDealSize.value"),minStepDistance:i.get("dealingRules.minStepDistance"),notionalValue:null,orderLevel:null,heartbeat:o,currency:i.get("ticketDefaultCurrency"),currencies:i.get("currencies"),controlledRisk:i.get("controlledRisk"),settings:r,scalingFactor:i.get("scalingFactor"),decimalPlacesFactor:i.get("decimalPlacesFactor"),size:null,showForceOpen:r.get("showForceOpen"),pointsThroughCurrentSelected:r.get("rememberLastTradedPointsThroughCurrent"),stopType:w.default.getValidStopType(e.stopTypes),stopStep:null,stopTrailingDistance:null,stopLevel:null,stopLevelType:A.default.Type.ABSOLUTE,stopsLimitsAllowed:i.get("stopsLimitsAllowed"),shouldUpdateFieldsOnSettingsChange:!1,canEditTrailingDistance:!1},e)));return a._dealReferenceGenerator=s,a._positionService=n,a._market=i,a._validators=a._getValidators(),a.attachListeners({forceOpen:"settings.forceOpen",isMarketDealable:"market.marketStatus",isSell:"direction",isBuy:"direction",isSubmittable:"direction size market.marketStatus\n                         limitType limitLevel\n                         stopStep stopTrailingDistance stopType stopLevel\n                         maxStopOrLimitDistance minStopDistance minDealSize",showForceOpen:"settings.showForceOpen",pointsThroughCurrentSelected:"settings.rememberLastTradedPointsThroughCurrent",defaultLevelType:"settings.defaultLevelType",minDealSize:"currency currency.exchangeRate",minStepDistance:"market.bid market.offer market.dealingRules market.dealingRules.minStepDistance",minStopDistance:"direction stopType market.bid market.offer market.dealingRules\n                          market.dealingRules.minControlledRiskStopDistance\n                          market.dealingRules.minNormalStopOrLimitDistance\n                          stopLevelType",maxStopOrLimitDistance:"direction stopType market.bid market.offer market.dealingRules\n                                  market.dealingRules.maxStopOrLimitDistance",notionalValue:"size direction market.offer market.bid",currentMarketLevel:"direction market.bid market.offer",quoteId:"direction market.sanitisedBidQuoteId market.sanitisedOfferQuoteId",orderLevel:"direction market.bid market.offer",profitLossPerPoint:"size market.valueOfOnePoint"}),a._throttledGetMargin=R.default.throttle(a._getMarginHelper.bind(a),2e3),a.listenTo(a,"stopType",a._clearStepOnTypeChange.bind(a)),a.listenTo(a,"direction size currency marginService\n                           forceOpen showForceOpen\n                           stopType stopLevel stopLevelType stopStep\n                           limitLevel limitType",a._updateMargin),a.listenTo(a,"shouldUpdateFieldsOnSettingsChange",a._updateSettingsListeners),a._updateSettingsListeners(),a}return M(t,e),L(t,[{key:"_clearStepOnTypeChange",value:function(){this.get("stopType")!==w.default.Type.TRAILING&&(this.set("stopStep",null),this.set("stopTrailingDistance",null))}},{key:"_getValidators",value:function(){return[]}},{key:"_updateSettingsListeners",value:function(){var e=this;this.get("shouldUpdateFieldsOnSettingsChange")?this._listenToAllSettings():(R.default.each(this._settingsListeners,(function(t,n){return e.stopListening(e,n,t)})),this._settingsListeners=null)}},{key:"_listenToAllSettings",value:function(){var e=this.get("settings");this._listenToSettings("settings.rememberLastTradedSize",["market.lastTradedSize","market.lastTradedCurrency"],e.applyLastTradedSizeAndCurrency.bind(e,this),this.resetSizeAndCurrency.bind(this)),this._listenToSettings("settings.rememberLastTradedStopTypeAndDistance",["market.lastTradedStopDistance","market.lastTradedStopType","market.lastTradedTrailingStopIncrement"],e.applyLastTradedStop.bind(e,this),this.resetStop.bind(this)),this._listenToSettings("settings.rememberLastTradedLimitDistance",["market.lastTradedLimitDistance"],e.applyLastTradedLimit.bind(e,this),this.resetLimit.bind(this)),this._listenToSettings("settings.rememberLastTradedPointsThroughCurrent",["market.lastTradedPointsThroughCurrent"],e.applyLastTradedPointsThroughCurrent.bind(e,this),this.resetPointsThroughCurrent.bind(this))}},{key:"_listenToSettings",value:function(e,t,n,i){var o,r=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;this._settingsListeners||(this._settingsListeners={});var a=(o={},g(o,e,(function(e){e?n():i()})),g(o,t.join(" "),s),o);R.default.each(a,(function(e,t){return r.listenTo(r,t,e)})),R.default.assign(this._settingsListeners,a)}},{key:"resetSizeAndCurrency",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.get("settings");e&&t.get("rememberLastTradedSize")?t.applyLastTradedSizeAndCurrency(this):this.setProperties({size:null,currency:this.get("market.ticketDefaultCurrency")})}},{key:"resetStop",value:function(){this.setProperties({levelType:this.get("defaultLevelType"),stopType:w.default.getValidStopType(this.get("stopTypes")),stopLevel:null,stopLevelType:A.default.Type.ABSOLUTE,stopStep:null,stopTrailingDistance:null})}},{key:"resetLimit",value:function(){this.setProperties({limitLevel:null,limitType:this.get("defaultLevelType")})}},{key:"resetPointsThroughCurrent",value:function(){this.set("pointsThroughCurrent",null)}},{key:"_updateMargin",value:function(){var e=this.get("triggerLevel")||this.get("orderLevel");if(this._abortMarginRequest(),!(this.get("marginService")&&this.get("size")&&this.get("direction")&&e))return void this.set("margin",null);this._throttledGetMargin()}},{key:"_getMarginHelper",value:function(){var e=this,t=this._getMargin();this.set("marginRequest",t),t.then((function(t){e.setProperties({marginRequest:null,margin:t})}))}},{key:"_getMargin",value:function(){return this.get("triggerLevel")?this.get("marginService").getOrderMargin(this):this.get("marginService").getPositionMargin(this)}},{key:"_submitDeal",value:function(){return this._positionService.create(this)}},{key:"submit",value:function(){var e=this;return this.trigger(S.default.DEAL_SUBMIT),this._ticketTransaction=this._submitDeal(),this.listenTo(this._ticketTransaction,"state",this._onTransactionChange),[S.default.FIRST_POLL,S.default.INITIAL_DEAL_RESPONSE].forEach((function(t){e.listenToOnce(e._ticketTransaction,t,(function(){return e.trigger(t)}))})),this._ticketTransaction}},{key:"_onTransactionChange",value:function(){var e=this._ticketTransaction;e.get("state")===h.PENDING&&this._updatePerMarketSettings(),e.get("isComplete")&&(this.trigger(S.default.FINAL_DEAL_RESPONSE),this.stopListening(e),this.set("dealReference",this._dealReferenceGenerator.generateDealReference()))}},{key:"_updatePerMarketSettings",value:function(){var e=(0,C.default)(this.get("settings"),this.toJSON());this.get("market").setProperties(e)}},{key:"_hasGuaranteedStop",value:function(){return this.get("stopType")===w.default.Type.GUARANTEED}},{key:"_hasTrailingStop",value:function(){return this.get("stopType")===w.default.Type.TRAILING}},{key:"_getForceOpen",value:function(){return this.get("settings.forceOpen")}},{key:"_getDefaultLevelType",value:function(){return this.get("settings.defaultLevelType")}},{key:"_getIsBuy",value:function(){return"buy"===this.get("direction")}},{key:"_getIsSell",value:function(){return"sell"===this.get("direction")}},{key:"_getQuoteId",value:function(){return"buy"===this.get("direction")?this.get("market.sanitisedOfferQuoteId"):this.get("market.sanitisedBidQuoteId")}},{key:"_getMinDealSize",value:function(){var e=(0,I.default)(this.get("minDealSizePts"),this.get("currency.exchangeRate"),this.get("market.unit"));return{unit:"pts",value:Math.round(100*e)/100}}},{key:"_getOrderLevel",value:function(){return this._calculateMarketLevel()}},{key:"_getNotionalValue",value:function(){var e=void 0;if(this._getIsBuy())e=this.get("market.offer");else{if(!this._getIsSell())return null;e=this.get("market.bid")}return(0,D.default)(this.get("market.unit"),this.get("market.instrumentType"),e,this.get("size"),this.get("market.scalingFactor"),this.get("market.contractSize"))}},{key:"_getProfitLossPerPoint",value:function(){return this.get("market.valueOfOnePoint")*this.get("size")}},{key:"_getCurrentMarketLevel",value:function(){return this._calculateMarketLevel()}},{key:"_calculateMarketLevel",value:function(){var e=this.get("market");return this._getIsSell()?e.get("bid"):e.get("offer")}},{key:"_getShowForceOpen",value:function(){return this.get("settings.showForceOpen")}},{key:"_getPointsThroughCurrentSelected",value:function(){return this.get("settings.rememberLastTradedPointsThroughCurrent")}},{key:"_getStopDistance",value:function(){return this._calculateDistance(this.get("stopLevel"),this.get("stopLevelType"))}},{key:"_getMinStepDistance",value:function(){if(null===this.get("market.dealingRules"))return null;var e=this.get("market.dealingRules.minStepDistance"),t=(0,O.default)(e,this._getOrderLevel(),this.get("stopLevelType"),this.get("scalingFactor"));return{unit:"pts",value:e&&"pct"===e.unit?Math.ceil(t):t}}},{key:"_getMinStopDistance",value:function(){return this.get("market.dealingRules")?w.default.getMinimumDistanceRuleInPoints(this.get("stopLevelType"),(0,u.getMinimumDistanceFromMarket)(this.get("stopType"),this.get("market")),this._getOrderLevel(),this.get("scalingFactor")):null}},{key:"_getMaxStopOrLimitDistance",value:function(){return this.get("direction")&&this.get("market.dealingRules")?{unit:"pts",value:(0,O.default)(this.get("market.dealingRules.maxStopOrLimitDistance"),this._getOrderLevel(),this.get("stopLevelType"),this.get("scalingFactor"))}:null}},{key:"_getLimitDistance",value:function(){return this._calculateDistance(this.get("limitLevel"),this.get("limitType"))}},{key:"_calculateDistance",value:function(e,t){return A.default.distanceFrom(e,t,this._getOrderLevel(),this.get("decimalPlacesFactor"))}},{key:"allowsForStopType",value:function(e){return!!R.default.find(this.get("stopTypes"),(function(t){return t.value===e&&t.valid}))}},{key:"_getIsSubmittable",value:function(){var e=this,t=this._validators.reduce((function(t,n){var i=n(e);return i.valid||(t[i.field]=i.error),t}),{});return this.get("errors").setProperties(t),!Object.keys(t).length}},{key:"_getIsMarketDealable",value:function(){return this._market.get("marketStatus")===E.default.TRADEABLE}},{key:"getTransactionState",value:function(){return this._ticketTransaction&&this._ticketTransaction.get("state")}},{key:"toString",value:function(){return j.default.TICKET}},{key:"_abortMarginRequest",value:function(){var e=this.get("marginRequest");e&&e.cancel()}},{key:"destroy",value:function(){this.stopListening(),this._settingsListeners=null,this._throttledGetMargin.cancel(),this._ticketTransaction&&(this._ticketTransaction.destroy(),this._ticketTransaction=null),this._abortMarginRequest(),N(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t})(b.default);e.default=k}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){function i(e,t){return e="number"==typeof e||u.test(e)?+e:-1,t=null==t?h:t,e>-1&&e%1==0&&e<t}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){if(null==e)return[];r(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(l(e)||a(e))&&t||0;for(var n=e.constructor,s=-1,u="function"==typeof n&&n.prototype===e,c=Array(t),h=t>0;++s<t;)c[s]=s+"";for(var p in e)h&&i(p,t)||"constructor"==p&&(u||!d.call(e,p))||c.push(p);return c}var a=n(21),l=n(32),u=/^\d+$/,c=Object.prototype,d=c.hasOwnProperty,h=9007199254740991;e.exports=s}),(function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){f&&p&&(f=!1,p.length?m=p.concat(m):_=-1,m.length&&a())}function a(){if(!f){var e=o(s);f=!0;for(var t=m.length;t;){for(p=m,m=[];++_<t;)p&&p[_].run();_=-1,t=m.length}p=null,f=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,h=e.exports={};!(function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}})();var p,m=[],f=!1,_=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||f||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}}),(function(e,t,n){var i,o;i=[t,n(6),n(0),n(2),n(23),n(35),n(42),n(38),n(41),n(93),n(40),n(39),n(37),n(26),n(46),n(25),n(28),n(27),n(52),n(49),n(51),n(50),n(15),n(34),n(45)],void 0!==(o=function(e,t,n,i,o,r,s,a,l,u,c,d,h,p,m,f,_,g,v,y,M,b,A,T,E){"use strict";function w(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var I=w(t),S=w(n),j=w(i),C=w(o),D=w(r),R=w(s),L=w(a),N=w(l),k=w(u),P=w(c),x=w(d),V=w(h),H=w(p),B=w(m),W=w(f),F=w(_),U=w(g),G=w(v),Y=w(y),z=w(M),q=w(b),K=w(A),Z=w(T),X=w(E),J=(function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),Q=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),$=(function(){function e(t,n,i,o){O(this,e),this._session=t,this._lightstreamerService=n,this._dealReferenceGenerator=new Z.default(t.user.accountId),this._marketService=new x.default(t),this._marginService=new L.default(this._session),this._alertPriceLevelService=new V.default(t,C.default.Type.PRICE_LEVEL_ALERT),this._alertPriceChangeService=new V.default(t,C.default.Type.PRICE_CHANGE_ALERT),this._alertService=new V.default(t),this._confirmationStreamingClient=new X.default(this._lightstreamerService,this._session.user.accountId),this._heartbeat=new D.default,this._instrumentGroupSubscription=new H.default(n,5),this._orderGroupSubscription=new B.default(n,1),this._positionGroupSubscription=new W.default(n,1),this._settingsService=new R.default(t,i,o),this._positionService=new N.default(t,this._confirmationStreamingClient,this._dealReferenceGenerator),this._orderService=new P.default(t,this._confirmationStreamingClient,this._dealReferenceGenerator),this._dependenciesPromise=I.default.join(this._settingsService.getSettings(),this._heartbeat.prepare(n),(function(e,t){return[e,t]}))}return Q(e,[{key:"getMarketService",value:function(){return this._marketService}},{key:"getAlertService",value:function(){return this._alertService}},{key:"getAlertPriceLevelService",value:function(){return this._alertPriceLevelService}},{key:"getAlertPriceChangeService",value:function(){return this._alertPriceChangeService}},{key:"getMarginService",value:function(){return this._marginService}},{key:"getPositionService",value:function(){return this._positionService}},{key:"getOrderService",value:function(){return this._orderService}},{key:"getSettingsService",value:function(){return this._settingsService}},{key:"getHeartbeat",value:function(){return this._heartbeat}},{key:"getInstrumentGroupSubscription",value:function(){return this._instrumentGroupSubscription}},{key:"getOrderGroupSubscription",value:function(){return this._orderGroupSubscription}},{key:"getPositionGroupSubscription",value:function(){return this._positionGroupSubscription}},{key:"getPositionStore",value:function(){var e=N.default.getStreamingClient(this._lightstreamerService);return new k.default(this._session,this._positionService,this._marketService,this._lightstreamerService,e)}},{key:"getOrderStore",value:function(){var e=P.default.getStreamingClient(this._lightstreamerService);return new k.default(this._session,this._orderService,this._marketService,this._lightstreamerService,e)}},{key:"createOpenPositionTickets",value:function(e){return this._createOpenTickets(F.default,e)}},{key:"createOpenPositionTicket",value:function(e){return this.createOpenPositionTickets([e]).then(S.default.head)}},{key:"createOpenOrderTickets",value:function(e){return this._createOpenTickets(U.default,e)}},{key:"createOpenOrderTicket",value:function(e){return this.createOpenOrderTickets([e]).then(S.default.head)}},{key:"createEditPositionTickets",value:function(e){var t=this;return this._dependenciesPromise.spread((function(n,i){return e.map((function(e){return new G.default(t._positionService,e,i,n,t._dealReferenceGenerator)}))}))}},{key:"createEditPositionTicket",value:function(e){return this.createEditPositionTickets([e]).then(S.default.head)}},{key:"createClosePositionTickets",value:function(e){var t=this;return this._dependenciesPromise.spread((function(n,i){return e.map((function(e){return new Y.default(t._positionService,e,i,n,t._dealReferenceGenerator)}))}))}},{key:"createClosePositionTicket",value:function(e){return this.createClosePositionTickets([e]).then(S.default.head)}},{key:"createEditOrderTickets",value:function(e){var t=this;return this._dependenciesPromise.spread((function(n,i){return e.map((function(e){return new z.default(t._orderService,e,i,n,t._dealReferenceGenerator)}))}))}},{key:"createDeleteOrderTicket",value:function(e){return this.createDeleteOrderTickets([e]).then(S.default.head)}},{key:"createDeleteOrderTickets",value:function(e){var t=this;return this._dependenciesPromise.spread((function(n,i){return e.map((function(e){return new q.default(t._orderService,e,i,n,t._dealReferenceGenerator)}))}))}},{key:"createEditOrderTicket",value:function(e){return this.createEditOrderTickets([e]).then(S.default.head)}},{key:"switchTicket",value:function(e,t){var n=e.get("market"),i=e.toString(),o=void 0;if(i===t)return I.default.resolve(e);switch(t){case K.default.ORDER:o=this.createOpenOrderTicket(n);break;case K.default.POSITION:
o=this.createOpenPositionTicket(n);break;default:o=i===K.default.POSITION?this.createOpenOrderTicket(n):this.createOpenPositionTicket(n)}return o.then((function(t){return t.allowsForStopType(e.get("stopType"))&&t.setProperties({stopLevel:e.get("stopLevel"),stopLevelType:e.get("stopLevelType"),stopType:e.get("stopType"),stopStep:e.get("stopStep")}),t.setProperties({currency:e.get("currency"),direction:e.get("direction"),forceOpen:e.get("forceOpen"),limitLevel:e.get("limitLevel"),limitType:e.get("limitType"),size:e.get("size"),shouldUpdateFieldsOnSettingsChange:e.get("shouldUpdateFieldsOnSettingsChange")}),e.stopListening(),t}))}},{key:"_createOpenTickets",value:function(e,t){var n=this;return I.default.all([j.default.isModel(t[0])?I.default.resolve(t):this._marketService.findByEpics(t),this._dependenciesPromise]).spread((function(t,i){var o=J(i,2),r=o[0],s=o[1],a=e===U.default?n._orderService:n._positionService;return t.map((function(t){return new e(a,t,s,r,n._dealReferenceGenerator)}))}))}},{key:"destroy",value:function(){var e=this;this._dependenciesPromise.spread((function(t,n){n.destroy(),e._positionService.destroy(),e._orderService.destroy(),e._settingsService.destroy(),e._confirmationStreamingClient.destroy(),e._confirmationStreamingClient=null,e._instrumentGroupSubscription.destroy(),e._instrumentGroupSubscription=null,e._orderGroupSubscription.destroy(),e._orderGroupSubscription=null,e._positionGroupSubscription.destroy(),e._positionGroupSubscription=null}))}}]),e})();e.default=$}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2),n(13),n(5),n(3),n(0),n(22),n(55)],void 0!==(o=function(e,t,n,i,o,r,s,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e){if(!e.length)return!1;var t=e[0];return!!t&&e.every((function(e){return e===t}))}function p(e){if(!e.length)return!1;var t=b(e,1),n=t[0],i=n.level,o=n.type;return!(!i||o===_.default.Type.TRAILING)&&e.every((function(e){return e.level===i&&e.type===o}))}Object.defineProperty(e,"__esModule",{value:!0});var m=l(t),f=l(n),_=l(i),g=l(o),v=l(r),y=l(s),M=(l(a),(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})()),b=(function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),A=(function(e){function t(e){u(this,t);var n=e[0],i=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{epic:n.get("epic"),contractSize:n.get("contractSize"),currency:n.get("currency"),currencyCodeISO:n.get("currencyCodeISO"),id:t.generateAggregateId(n),dealSize:null,direction:n.get("direction"),isShort:null,isPriceTypeBackOnly:null,latest:null,market:n.get("market"),openLevel:null,positions:[],profitLoss:null,profitLossInBaseCurrency:null,riskType:n.get("riskType"),limitLevel:null,limitType:g.default.Type.ABSOLUTE,stopLevel:null,stopType:_.default.Type.NON_GUARANTEED}));return i.attachListeners({openLevel:"dealSize",profitLoss:"openLevel dealSize latest",pointsMoved:"latest openLevel"}),e.forEach(i.addPosition,i),i}return d(t,e),M(t,[{key:"addPosition",value:function(e){var t=this,n=this.get("positions");n.length||this._subscribeToFirstPosition(e),n.push(e),e.on("dealSize",(function(){return t._updateDealSize()}),this),e.on("limitLevel",(function(){return t._updateLimit()}),this),e.on("stopLevel",(function(){return t._updateStop()}),this),e.on("stopType",(function(){return t._updateStop()}),this),e.on("profitLossInBaseCurrency",(function(){return t._updateProfitLossInBaseCurrency()}),this),this._updateLimit(),this._updateDealSize(),this._updateStop(),this._updateProfitLossInBaseCurrency()}},{key:"removePosition",value:function(e){var t=this.get("positions");if(t.length){var n=t.indexOf(e);-1!=n&&(e.off(null,null,this),t.splice(n,1),0===n&&t[0]&&this._subscribeToFirstPosition(t[0])),this._updateDealSize(),this._updateLimit(),this._updateStop(),t.length||this.set("latest",null)}}},{key:"_subscribeToFirstPosition",value:function(e){var t=this;this.setProperties({isPriceTypeBackOnly:e.isPriceTypeBackOnly(),isShort:e.isShort(),latest:e.get("latest")}),e.on("latest",(function(e){t.set("latest",e)}),this)}},{key:"canEdit",value:function(){return this.get("positions").every((function(e){return e.canEdit()}))}},{key:"isShort",value:function(){return"-"===this.get("direction")}},{key:"_getOpenLevel",value:function(){if(this.get("positions").length){return v.default.sumBy(this.get("positions"),(function(e){return e.get("openLevel")*e.get("dealSize")}))/this._sumOfPositions("dealSize")}}},{key:"_getPointsMoved",value:function(){return f.default.getPointsMoved(this)}},{key:"_getProfitLoss",value:function(){if(this.get("positions").length)return(0,y.default)(this.get("latest"),this.get("openLevel"),this.get("contractSize"),this.get("dealSize"),this.get("isShort"),this.get("isPriceTypeBackOnly"))}},{key:"_updateLimit",value:function(){var e=this.get("positions").map((function(e){return e.get("limitLevel")}));h(e)?this.set("limitLevel",e[0]):this.set("limitLevel",null)}},{key:"_updateStop",value:function(){var e=this.get("positions").map((function(e){return{level:e.get("stopLevel"),type:e.get("stopType")}}));p(e)?this.set("stopLevel",e[0].level):this.set("stopLevel",null);var t=e.length&&e[0].type===_.default.Type.GUARANTEED;this.set("stopType",t?_.default.Type.GUARANTEED:_.default.Type.NON_GUARANTEED)}},{key:"_updateDealSize",value:function(){this.set("dealSize",this._sumOfPositions("dealSize"))}},{key:"_updateProfitLossInBaseCurrency",value:function(){this.set("profitLossInBaseCurrency",this._sumOfPositions("profitLossInBaseCurrency"))}},{key:"_sumOfPositions",value:function(e){var t=this.get("positions");return t.length?Math.round(1e4*v.default.sumBy(t,(function(t){return+t.get(e)||0})))/1e4:0}},{key:"destroy",value:function(){var e=this;this.get("positions").forEach((function(t){t.off(null,null,e)}))}}],[{key:"generateAggregateId",value:function(e){return e.get("epic")+"-"+e.get("direction")+"-"+e.get("currencyCodeISO")+"-"+e.get("riskType")}}]),t})(m.default);e.default=A}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function e(n,i,o,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"deal";t(this,e),this.origin=n||"",this.path=l,this.applicationType=i,this.deviceType=s,this.platform=o,this.view=a,this.version=r,Object.freeze(this)};e.default=n}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function e(n,i){t(this,e),this.environment=n,this.user=i,Object.freeze(this)};e.default=n}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function e(n,i,o,r){t(this,e),this.accountId=n,this.ssoToken=i,this.cstToken=o,this.locale=r,Object.freeze(this)};e.default=n}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(4),n(95),n(0)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=o(t),u=o(n),c=o(i),d=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),h=(function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15e3;r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return i.debounceTime=n,i.lightstreamerService=e,i.subscriptions={},i}return a(t,e),d(t,[{key:"_handleMarketUpdate",value:function(e){this.trigger(e)}},{key:"add",value:function(e){var n=e.get("id");if(!this.subscriptions[n]){var i=t.generateEventName(n),o=new u.default(this.lightstreamerService),r=e.get("markets").map((function(e){return e.get("dynamicHierarchyEpic")}));r.length&&(r.forEach((function(e){return o.add(e)})),this.subscriptions[n]=o,o.on(u.default.UPDATE_EVENT,c.default.debounce(this._handleMarketUpdate.bind(this,i),this.debounceTime),this))}}},{key:"remove",value:function(e){this.subscriptions[e]&&(this.subscriptions[e].destroy(),this.subscriptions[e]=null)}},{key:"destroy",value:function(){var e=this;Object.keys(this.subscriptions).forEach((function(t){e.remove(t)})),this.off()}}],[{key:"generateEventName",value:function(e){return"watchlist-change-"+c.default.kebabCase(e)}}]),t})(l.default);e.default=h}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(7),n(1),n(6),n(0)],void 0!==(o=function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=r(t),l=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),u=(r(i),r(o),(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})()),c=(function(){function e(t){s(this,e),this._session=t}return u(e,[{key:"getDerivativesForUnderlying",value:function(e){var t=this;return l.get("/findergateway/derivatives?q="+encodeURIComponent(e),this._session).then((function(e){return t.enrichSearchMarkets(e)}))}},{key:"getDerivativesForMarket",value:function(e){var t=this;return l.get("/findergateway/derivatives/contract?q="+encodeURIComponent(e),this._session).then((function(e){return t.enrichSearchMarkets(e)}))}},{key:"getUnderlyingsByAssetType",value:function(e,t){var n=this;return l.get("/findergateway/browse/instruments/"+encodeURIComponent(e)+this.createUrlParams(t),this._session).then((function(e){return n.enrichSearchMarkets(e)}))}},{key:"search",value:function(e,t){var n=this;return t=t||{},t.q=encodeURIComponent(e),l.get("/findergateway/search/global"+this.createUrlParams(t),this._session).then((function(e){return n.enrichSearchMarkets(e)}))}},{key:"inlineSearch",value:function(e){return l.get("/findergateway/inline?q="+encodeURIComponent(e),this._session)}},{key:"getBinariesForUnderlying",value:function(e){return l.get("/findergateway/binaries?q="+encodeURIComponent(e),this._session)}},{key:"enrichSearchMarkets",value:function(e){var t=e.markets||e.results.markets;return t=t.map((function(e){var t=e.market;return t.epic=e.epic,t.lastSelectedEpic=e.lastSelectedEpic,t.instrumentName=e.instrumentName,t.underlyingName=e.underlyingName,t.underlyingId=e.underlyingId,t.id=e.id,t=t.instrumentData?a.default.populateWithMarketData(t):a.default.populateWithMarketLiteData(t)}),this),e.markets?e.markets=t:e.results.markets=t,e}},{key:"createUrlParams",value:function(e){return e?"?"+Object.keys(e).map((function(t){return t+"="+e[t]})).join("&"):""}}]),e})();e.default=c}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(85),n(1),n(6)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=o(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=o(i),u=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),c=(function(){function e(t){r(this,e),this._session=t}return u(e,[{key:"createWatchlist",value:function(e){var t="/"+this._session.environment.path+"/markets/watchlists";return a.post(t,this._session,{name:e}).then((function(t){var n=t.watchlistId;if("SUCCESS_CREATED"!==t.status)throw new Error("Watchlist creating was unsuccessful");return s.default.fromDealingRestWatchlist({id:n,name:e,count:0,editable:!0,deleteable:!0})}))}},{key:"deleteWatchlist",value:function(e){if(!e.get("deleteable"))return l.default.reject(new Error("Cannot remove non-deleteable watchlist"));var t="/"+this._session.environment.path+"/markets/watchlists/"+e.get("id");return a.del(t,this._session)}},{key:"renameWatchlist",value:function(e,t){return e.get("editable")?a.put("/"+this._session.environment.path+"/markets/watchlists/"+e.get("id"),this._session,{name:t}):l.default.reject(new Error("Cannot rename non-editable watchlist"))}},{key:"getWatchlists",value:function(){var e="/"+this._session.environment.path+"/markets/watchlists";return a.get(e,this._session).then((function(e){return e.map(s.default.fromDealingRestWatchlist)}))}},{key:"addMarketToWatchlist",value:function(e,t){if(!e.get("editable"))return l.default.reject(new Error("Cannot add to non-editable watchlist"));var n="/"+this._session.environment.path+"/markets/watchlists/"+e.get("id");return a.post(n,this._session,{epicId:t})}},{key:"removeMarketFromWatchlist",value:function(e,t){if(!e.get("editable"))return l.default.reject(new Error("Cannot remove from non-editable watchlist"));var n="/"+this._session.environment.path+"/markets/watchlists/"+e.get("id")+"/"+t;return a.del(n,this._session)}},{key:"persistMarketOrder",value:function(e){var t=e.get("markets"),n="/"+this._session.environment.path+"/markets/watchlists/"+e.get("id");return a.put(n,this._session,{epics:t.map((function(e){return e.get("epic")}))})}}]),e})();e.default=c}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(14)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},l=(function(e){function t(e,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"V2-F-{fids}{modifiers}|{id}","MERGE",r));return s._currentAccountCurrencyFid=o,s}return o(t,e),s(t,[{key:"add",value:function(e,n,i){"CI.U.GBPGBP.IP"!==e&&a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,["OFR"],n),"CI.U.GBPGBP.IP"!==this._currentAccountCurrencyFid&&a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,this._currentAccountCurrencyFid,["OFR"],i)}},{key:"remove",value:function(e,n){var i=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,n),o=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,e);return i&&o}}]),t})(r.default);e.default=l}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(8),n(20),n(4)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=o(t),u=o(n),c=o(i),d=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),h=(function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._lightstreamerService=e,n}return a(t,e),d(t,[{key:"startListening",value:function(e){return this._subscription=new u.default("V2-M-MESSAGE_EVENT_HANDLER|SIGNAL_CENTRE_{identifier}","MSG",this._lightstreamerService).startListening(e),this._subscription.on(u.default.Events.UPDATED,this._handleStreamingUpdate.bind(this)),this}},{key:"_handleStreamingUpdate",value:function(e){var t=e.status;"REMOVE"===t?this.trigger(l.default.REMOVED,e.signalId):"NEW"===t&&this.trigger(l.default.UPDATED,e)}},{key:"stopListening",value:function(){this._subscription&&(this._subscription.destroy(),this._subscription=null),this.off()}},{key:"destroy",value:function(){this.stopListening(),this._lightstreamerService=null}}]),t})(c.default);e.default=h}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(7),n(14),n(0)],void 0!==(o=function(e,t,n,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.BINARY_FIDS=e.FIDS=void 0;var a=(function(e){return e&&e.__esModule?e:{default:e}})(n),l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),u=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},c=e.FIDS=(0,i.reject)((0,i.keys)(t.FID_SCHEMA),(0,i.curry)(i.eq)("MARKET_NAME")),d=e.BINARY_FIDS=(0,i.keys)(t.FID_SCHEMA),h=(function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments[2];return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"MARKET_V4:"+i+":{id}{modifiers}","MERGE",n))}return s(t,e),l(t,[{key:"add",value:function(e,n){e.get("isUnpriced")||u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e.get("epic"),e.get("isBinary")?d:c,e.boundOnStreamedV4Update,n)}},{key:"remove",value:function(e){e.get("isUnpriced")||u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,e.boundOnStreamedV4Update)}}]),t})(a.default);e.default=h}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t],void 0!==(o=function(e){"use strict";function t(e){var t=[];return t.push(["vendor","IG Group"]),t.push(["applicationType",e.applicationType||"ig"]),t.push(["platform",e.platform]),e.deviceType&&t.push(["deviceType",e.deviceType]),e.view&&t.push(["view",e.view]),t.push(["version",e.version]),t.filter((function(e){return e[1]})).map((function(e){return e[0]+"="+e[1].toString()})).join(" | ")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(7)],void 0!==(o=function(e,t){"use strict";function n(e,n,i,o,r,s){if(o&&i){if(e===t.UNITS.SHARES)return i*o*(r/100);if(e===t.UNITS.CONTRACTS)return o*s*i}return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(12),n(3),n(18)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,o,r,u){var c=t===a.default.Type.ABSOLUTE,d=a.default.distanceFrom(e,t,r,o),h=(0,l.default)(n,r,t,i);return isNaN(e)?{isValid:!1,error:{key:s.default.Reason.INVALID_LEVEL}}:c&&(u&&e<r||!u&&e>r)?{isValid:!1,error:{key:s.default.Reason.LIMIT_WRONG_SIDE}}:d<0||!c&&0===d?{isValid:!1,error:{key:s.default.Reason.LIMIT_TOO_CLOSE}}:c&&0===d?{isValid:!1,error:{key:s.default.Reason.LIMIT_SAME_AS_CURRENT_LEVEL}}:null!==h&&d>h?{isValid:!1,error:{key:s.default.Reason.LIMIT_TOO_FAR}}:{isValid:!0}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var s=o(t),a=o(n),l=o(i)}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(7)],void 0!==(o=function(e,t){"use strict";function n(e,n,i){return i!==t.UNITS.AMOUNT&&(n=1),e/n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(31)],void 0!==(o=function(e,t){"use strict";function n(e,t){var n={},o=i.default.GUARANTEED,r=i.default.NON_GUARANTEED,s=i.default.TRAILING;return e.get("rememberLastTradedSize")&&(t.hasOwnProperty("displayOrderSize")||t.hasOwnProperty("size"))&&(n.lastTradedSize=t.displayOrderSize||t.size,n.lastTradedCurrency=t.currencyCode),e.get("rememberLastTradedStopTypeAndDistance")&&t.hasOwnProperty("stopDistance")&&(n.lastTradedStopDistance=t.stopDistance,t.trailingStop?(n.lastTradedStopType=s,n.lastTradedTrailingStopIncrement=t.trailingStopIncrement):t.guaranteedStop?(n.lastTradedStopType=o,n.lastTradedTrailingStopIncrement=null):(n.lastTradedStopType=r,n.lastTradedTrailingStopIncrement=null)),e.get("rememberLastTradedLimitDistance")&&t.hasOwnProperty("limitDistance")&&(n.lastTradedLimitDistance=t.limitDistance),e.get("rememberLastTradedPointsThroughCurrent")&&t.hasOwnProperty("pointsThroughCurrent")&&(n.lastTradedPointsThroughCurrent=t.pointsThroughCurrent),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=(function(e){return e&&e.__esModule?e:{default:e}})(t)}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),a=(function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"fromDealingRestAlert",value:function(e){return new t(e)}}]),t})(r.default);e.default=a}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),a=(function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:e.name,code:e.code,symbol:e.symbol,ticketDefault:e.ticketDefault,exchangeRate:e.exchangeRate,baseExchangeRate:e.baseExchangeRate,isDefault:e.isDefault}))}return o(t,e),s(t,null,[{key:"populateWithJson",value:function(e){return new t(e)}}]),t})(r.default);e.default=a}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(59),n(9)],void 0!==(o=function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(t),l=i(n),u=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),c=(function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a.default.unpricedEpic))}return s(t,e),u(t,null,[{key:"populateWithMarketData",value:function(e){var n=e.instrumentData,i=new t,o=e.dealSettings||{};return i.populateWith({controlledRisk:!1,controlledSpread:!1,dealingRules:null,guaranteedStopsAllowed:!1,trailingStopsAllowedPreference:!0,instrumentName:n.marketName,marketId:n.marketId,exchangeId:n.exchangeId,expiryDetails:n.expiryDetails,displayPeriod:n.displayPrompt,isin:n.isin,editable:n.editable,mtfAvailable:n.mtfAvailable,otcTradeable:n.otcTradeable,instrumentDmaL1Tradeable:"???",dmaTradeable:n.dmaTradeable,dmaL1Tradeable:n.dmaL1Tradeable,dxdTradeable:"???",instrumentType:n.instrumentType||"UNKNOWN",stopsLimitsAllowed:!1,unit:n.unit,marketStatus:l.default.resolve(0),high:null,low:null,percentageChange:null,netChange:null,bid:null,offer:null,bestBid:null,bestOffer:null,scalingFactor:null,decimalPlacesFactor:null,updateTime:null,viewPermission:n.viewPermission,delayTime:null,scaled:null,userDmaEnabled:"???",newsAccessible:n.newsAccessible,marketAnalysisAvailable:n.marketAnalysisAvailable,dynamicHierarchyEpic:"???",alertsAllowed:n.alertsAllowed,instrumentVersion:null,countryCode:n.countryCode,newsSymbol:n.newsCode,sortablePeriod:"???",collateralHaircut:"???",currency:n.currency,currencies:[],minDealSize:0,lastTradedPointsThroughCurrent:o.lastTradedPointsThroughCurrent||null,lastTradedSize:o.lastTradedDealSize||null,lastTradedCurrency:o.lastTradedDealCurrency||null,lastTradedLimitDistance:o.lastTradedLimitDistance||null,lastTradedStopDistance:o.lastTradedStopDistance||null,lastTradedStopType:o.lastTradedStopType||null,lastTradedTrailingStopIncrement:o.lastTradedTrailingStopIncrement||null,lotSize:n.lotSize,prompt:n.prompt,utcClientTimestamp:null,hasCompleteMarketData:!1}),i}}]),t})(a.default);e.default=c}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(2)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),a=(function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,null,[{key:"fromDealingRestWatchlist",value:function(e){return new t(e)}}]),t})(r.default);e.default=a}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(6),n(1),n(16),n(4)],void 0!==(o=function(e,t,n,i,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var u=r(t),c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),d=r(i),h=r(o),p=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),m=(function(e){function t(e,n){s(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i._session=e,i._dealReference=n,i._requestPromise=null,i._pollTimeoutId=null,i}return l(t,e),p(t,[{key:"pollForConfirm",value:function(){var e=this;return new u.default(function(n,i){e._schedulePoll(n,i,0,t.BASE_TIMEOUT)})}},{key:"destroy",value:function(){this.off(),this._pollTimeoutId&&(clearTimeout(this._pollTimeoutId),this._pollTimeoutId=null),this._requestPromise&&(this._requestPromise.cancel(),delete this._requestPromise)}},{key:"_schedulePoll",value:function(e,t,n,i){var o=this;this._pollTimeoutId=setTimeout((function(){o._pollTimeoutId=null,o._poll(e,t,n)}),i)}},{key:"_poll",value:function(e,n,i){var o=this,r="/"+this._session.environment.path+"/executionreport/"+this._dealReference;0===i&&this.trigger(d.default.FIRST_POLL),this._requestPromise=c.get(r,this._session).then((function(t){o._requestPromise=null,t.content.reportData.rejectionMessage?n(t):e(t)}),(function(){var r=void 0,s=void 0;o._requestPromise=null,i++,i>=7?n("RETRY_COUNT_EXCEEDED"):(r=t.BASE_TIMEOUT*Math.pow(1.3,i),s=.4*r,r=r+Math.random()*s-.5*s,o._schedulePoll(e,n,i,r))}))}}]),t})(h.default);e.default=m;m.BASE_TIMEOUT=1e4,m.restore=function(){return m.BASE_TIMEOUT=1e4}}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(11),n(1)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),u=(function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"_doRequest",value:function(){var e="/"+this._session.environment.path+"/v3/orders/workingorders/otc";return a.post(e,this._session,this._data)}}]),t})(s.default);e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(11),n(1)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),u=(function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"_doRequest",value:function(){var e=this._data.get("order.dealId"),t="/"+this._session.environment.path+"/v3/orders/workingorders/otc/"+e;return a.del(t,this._session,this._data)}}]),t})(s.default);e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(11),n(1)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),u=(function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"_doRequest",value:function(){var e=this._data.get("order.dealId"),t="/"+this._session.environment.path+"/v3/orders/workingorders/otc/"+e;return a.put(t,this._session,this._data)}}]),t})(s.default);e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(11),n(1)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),u=(function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"_doRequest",value:function(){var e="/"+this._session.environment.path+"/v3/orders/positions/otc";return a.del(e,this._session,this._data)}}]),t})(s.default);e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(11),n(1)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),u=(function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"_doRequest",value:function(){var e="/"+this._session.environment.path+"/v3/orders/positions/otc";return a.post(e,this._session,this._data)}}]),t})(s.default);e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(11),n(1)],void 0!==(o=function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=(function(e){return e&&e.__esModule?e:{default:e}})(t),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n),l=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),u=(function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),l(t,[{key:"_doRequest",value:function(){var e=this._data.get("position.dealId");return!this._data.get("position.positions")?a.put("/"+this._session.environment.path+"/v3/orders/positions/otc/"+e,this._session,this._data):a.post("/"+this._session.environment.path+"/v2/orders/positions/otc/agg",this._session,this._data)}}]),t})(s.default);e.default=u}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(4),n(6),n(97),n(8),n(54),n(94)],void 0!==(o=function(e,t,n,i,o,r,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){return function(n){e.trigger(t,n)}}Object.defineProperty(e,"__esModule",{value:!0});var p=a(t),m=a(n),f=a(i),_=a(o),g=a(r),v=a(s),y=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),M=(function(e){function t(e,n,i,o,r){u(this,t);var s=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s._session=e,s._tradeService=n,s._marketService=i,s._lightstreamerService=o,s._tradeStreamingClient=r,s}return d(t,e),y(t,[{key:"getTrades",value:function(){var e=this;return this._reconnectionMonitor||(this._reconnectionMonitor=new f.default(this._lightstreamerService),this._reconnectionMonitor.on(g.default.RECONNECTED,this._getNewTrades,this)),this._getTradesPromise().then((function(){if(!e._trades)throw new Error("Resolving trades request after trades have been cleared out");return e._trades}))}},{key:"_getTradesPromise",value:function(){var e=this;return(!this._tradesPromise||this._tradesPromise.isCancelled()||this._tradesPromise.isRejected())&&(this._tradesPromise=new m.default(function(t,n,i){i((function(){e._requestPromise&&(e._requestPromise.cancel(),delete e._requestPromise)})),e._promiseResolvers=[t,n]}),this._getNewTrades()),this._tradesPromise}},{key:"_getNewTrades",value:function(){var e,t=this;if(!this._tradesPromise.isPending())return delete this._tradesPromise,void this._getTradesPromise();this._store&&this._store.destroy(),this._store=new v.default(this._session,this._tradeService,this._marketService,this._tradeStreamingClient),this._store.on(_.default.ADDED,h(this,_.default.ADDED)),this._store.on(_.default.REMOVED,h(this,_.default.REMOVED)),this._requestPromise=(e=this._store.getTrades().then((function(e){t._trades=e}))).then.apply(e,l(this._promiseResolvers))}},{key:"destroy",value:function(){this._tradesPromise&&(this._tradesPromise.cancel(),delete this._tradesPromise),this._reconnectionMonitor&&(this._reconnectionMonitor.destroy(),delete this._reconnectionMonitor),this._requestPromise&&(this._requestPromise.cancel(),delete this._requestPromise),this._store&&(this._store.destroy(),delete this._store),delete this._marketService,delete this._session,delete this._tradeService,delete this._lightstreamerService,delete this._tradeStreamingClient,delete this._trades}}]),t})(p.default);e.default=M}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0),n(4),n(8)],void 0!==(o=function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=o(t),u=o(n),c=o(i),d=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),h=(function(e){function t(e,n,i,o){r(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._tradeService=n,a._tradeStreamingClient=o,a._marketService=i,a._session=e,a._trades=[],a}return a(t,e),d(t,[{key:"getTrades",value:function(){var e=this;return this._tradeStreamingClient.startListening(this._session.user.accountId),this.listenTo(this._tradeStreamingClient,c.default.ADDED,this._handleTradeAdded,this),this.listenTo(this._tradeStreamingClient,c.default.REMOVED,this._handleTradeRemoved,this),this._tradesPromise=this._tradeService.getAll().then((function(t){var n=t.markets,i=t.positions||t.orders,o=l.default.invokeMap(e._trades,"get","dealId"),r=i.filter((function(e){return!l.default.includes(o,e.get("dealId"))||(e.destroy(),!1)}));return r.length&&(r.forEach((function(t){var i=t.get("epic");t.set("market",n[i]),e._trades.push(t)})),e.trigger(c.default.ADDED,r)),e._trades})),this._tradesPromise}},{key:"_handleTradeAdded",value:function(e){var t=this;this._marketService.findByEpic(e.get("epic")).then((function(n){e.set("market",n),t._trades.push(e),t.trigger(c.default.ADDED,[e])}))}},{key:"_handleTradeRemoved",value:function(e){var t=l.default.find(this._trades,(function(t){return t.get("dealId")===e}));t&&(l.default.pull(this._trades,t),this.trigger(c.default.REMOVED,[t]),t.destroy())}},{key:"destroy",value:function(){var e=this._trades;e.length&&(this._trades=[],this.trigger(c.default.REMOVED,e),l.default.invokeMap(e,"destroy")),this._tradesPromise&&(this._tradesPromise.cancel(),delete this._tradesPromise),this.off(),this._tradeStreamingClient&&(this._tradeStreamingClient.stopListening(),this._tradeStreamingClient=null,this._tradeService=null),this._marketService=null,this._session=null}}]),t})(u.default);e.default=h}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(4)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(e){return e&&e.__esModule?e:{default:e}})(t),s=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),a="V2-F-MKT|{epic}",l=(function(e){function t(e){n(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return o.lightstreamerService=e,o.subscriptions={},o}return o(t,e),s(t,[{key:"add",value:function(e){var t=a.replace("{epic}",e);this.subscriptions[e]||(this.subscriptions[e]=this.lightstreamerService.subscribe(t,["MKT"],"MERGE",this._onUpdate.bind(this,e),1))}},{key:"remove",value:function(e){this.subscriptions[e]&&(this.subscriptions[e].unsubscribe(),this.subscriptions[e]=null)}},{key:"_onUpdate",value:function(e,n){n.isSnapshot()||this.trigger(t.UPDATE_EVENT,e)}},{key:"destroy",value:function(){Object.keys(this.subscriptions).forEach(this.remove,this),this.subscriptions=null,this.off()}}],[{key:"UPDATE_EVENT",get:function(){return"UPDATED"}}]),t})(r.default);e.default=l}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(0)],void 0!==(o=function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=(function(e){return e&&e.__esModule?e:{default:e}})(t),o=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),r=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments[1];n(this,e),this._isSnapshot=t,this._fields=o?i.default.clone(o):{}}return o(e,[{key:"setField",value:function(e,t){this._fields[e]=t}},{key:"isValueChanged",value:function(e){return this._fields.hasOwnProperty(e)}},{key:"isSnapshot",value:function(){return this._isSnapshot}},{key:"getValue",value:function(e){return this._fields[e]}},{key:"forEachChangedField",value:function(e){var t=this;i.default.forEach(this._fields,(function(n,i){e(i,0,n,t)}))}},{key:"hasData",value:function(){return i.default.size(this._fields)}}]),e})();e.default=r}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){var i,o;i=[t,n(4),n(54)],void 0!==(o=function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return"STREAMING"===e||"POLLING"===e||"CONNECTED"===e.substr(0,9)&&"CONNECTED:STREAM-SENSING"!==e}Object.defineProperty(e,"__esModule",{value:!0});var l=i(t),u=i(n),c=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})(),d=(function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._lightstreamerService=e,n._lightstreamerService.on(e.STATUS_CHANGE_EVENT,n._updateStreamingStatus,n),n._isStreaming=a(n._lightstreamerService.getStatus()),n}return s(t,e),c(t,[{key:"destroy",value:function(){this._lightstreamerService.un(null,this),this._lightstreamerService=null}},{key:"_updateStreamingStatus",value:function(e){var t=this._isStreaming;(this._isStreaming=a(e))&&!t&&this.trigger(u.default.RECONNECTED)}}]),t})(l.default);e.default=d}.apply(t,i))&&(e.exports=o)}),(function(e,t,n){!(function(){var n,i=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,r=Array.prototype.slice,s=0,a=(function(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++s+"";return e?e+t:t},has:function(e,t){return o.call(e,t)},each:function(e,t,n){if(null!=e)if(i&&e.forEach===i)e.forEach(t,n);else if(e.length===+e.length)for(var o=0,r=e.length;o<r;o++)t.call(n,e[o],o,e);else for(var s in e)this.has(e,s)&&t.call(n,e[s],s,e)},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}})();n={on:function(e,t,n){return u(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var i=this,o=a.once((function(){i.off(e,o),t.apply(this,arguments)}));return o._callback=t,this.on(e,o,n)},off:function(e,t,n){var i,o,r,s,l,c,d,h;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:a.keys(this._events),l=0,c=s.length;l<c;l++)if(e=s[l],r=this._events[e]){if(this._events[e]=i=[],t||n)for(d=0,h=r.length;d<h;d++)o=r[d],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&c(n,t),i&&c(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var o=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var r in i)i[r].off(t,n,this),o&&delete this._listeners[r];return this}};var l=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),s=0,a=r.length;s<a;s++)e[t].apply(e,[r[s]].concat(i));return!1}return!0},c=function(e,t){var n,i=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,(function(e,t){n[t]=function(t,n,i){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=a.uniqueId("l"))]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}})),n.bind=n.on,n.unbind=n.off,n.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return a.each(t,(function(t){e[t]=this[t]}),this),e},void 0!==e&&e.exports&&(t=e.exports=n),t.BackboneEvents=n})()}),(function(e,t,n){e.exports=n(98)}),(function(e,t,n){(function(t,n,i){!(function(t){e.exports=t()})((function(){var e,o,r;return (function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof _dereq_&&_dereq_;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){var n=t[s][1][e];return o(n||e)}),c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof _dereq_&&_dereq_,s=0;s<i.length;s++)o(i[s]);return o})({1:[(function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),i=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),i}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}}),{}],2:[(function(e,n,i){"use strict";function o(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=u}function r(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function s(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}var l;try{throw new Error}catch(e){l=e}var u=e("./schedule"),c=e("./queue"),d=e("./util");o.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},o.prototype.hasCustomScheduler=function(){return this._customScheduler},o.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},o.prototype.disableTrampolineIfNecessary=function(){d.hasDevTools&&(this._trampolineEnabled=!1)},o.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},o.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},o.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},d.hasDevTools?(o.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?r.call(this,e,t,n):this._schedule((function(){setTimeout((function(){e.call(t,n)}),100)}))},o.prototype.invoke=function(e,t,n){this._trampolineEnabled?s.call(this,e,t,n):this._schedule((function(){e.call(t,n)}))},o.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule((function(){e._settlePromises()}))}):(o.prototype.invokeLater=r,o.prototype.invoke=s,o.prototype.settlePromises=a),o.prototype.invokeFirst=function(e,t,n){this._normalQueue.unshift(e,t,n),this._queueTick()},o.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),i=e.shift();t.call(n,i)}else t._settlePromises()}},o.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},o.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},o.prototype._reset=function(){this._isTickUsed=!1},n.exports=o,n.exports.firstLineError=l}),{"./queue":26,"./schedule":29,"./util":36}],3:[(function(e,t,n){"use strict";t.exports=function(e,t,n,i){var o=!1,r=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(r,r,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(r){o||(o=!0,e.prototype._propagateFrom=i.propagateFromFunction(),e.prototype._boundValue=i.boundValueFunction());var u=n(r),c=new e(t);c._propagateFrom(this,1);var d=this._target();if(c._setBoundTo(u),u instanceof e){var h={promiseRejectionQueued:!1,promise:c,target:d,bindingPromise:u};d._then(t,s,void 0,c,h),u._then(a,l,void 0,c,h),c._setOnCancel(u)}else c._resolveCallback(d);return c},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}}),{}],4:[(function(e,t,n){"use strict";function i(){try{Promise===r&&(Promise=o)}catch(e){}return r}var o;"undefined"!=typeof Promise&&(o=Promise);var r=e("./promise")();r.noConflict=i,t.exports=r}),{"./promise":22}],5:[(function(e,t,n){"use strict";var i=Object.create;if(i){var o=i(null),r=i(null);o[" size"]=r[" size"]=0}t.exports=function(t){function n(e,n){var i;if(null!=e&&(i=e[n]),"function"!=typeof i){var o="Object "+a.classString(e)+" has no method '"+a.toString(n)+"'";throw new t.TypeError(o)}return i}function i(e){return n(e,this.pop()).apply(e,this)}function o(e){return e[this]}function r(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var s,a=e("./util"),l=a.canEvaluate;a.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=r;else if(l){var i=s(e);t=null!==i?i:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}}),{"./util":36}],6:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o){var r=e("./util"),s=r.tryCatch,a=r.errorObj,l=t._async;t.prototype.break=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){
return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(r.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var i=s(e).call(this._boundValue());i===a&&(this._attachExtraTrace(i.e),l.throwLater(i.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}}),{"./util":36}],7:[(function(e,t,n){"use strict";t.exports=function(t){function n(e,n,a){return function(l){var u=a._boundValue();e:for(var c=0;c<e.length;++c){var d=e[c];if(d===Error||null!=d&&d.prototype instanceof Error){if(l instanceof d)return r(n).call(u,l)}else if("function"==typeof d){var h=r(d).call(u,l);if(h===s)return h;if(h)return r(n).call(u,l)}else if(i.isObject(l)){for(var p=o(d),m=0;m<p.length;++m){var f=p[m];if(d[f]!=l[f])continue e}return r(n).call(u,l)}}return t}}var i=e("./util"),o=e("./es5").keys,r=i.tryCatch,s=i.errorObj;return n}}),{"./es5":13,"./util":36}],8:[(function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(i())}function n(){if(o)return new t}function i(){var e=r.length-1;if(e>=0)return r[e]}var o=!1,r=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,r=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,l=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=r,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=l,o=!1},o=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}}),{}],9:[(function(e,n,i){"use strict";n.exports=function(n,i){function o(e,t){return{promise:t}}function r(){return!1}function s(e,t,n){var i=this;try{e(t,n,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+H.toString(e));i._attachCancellationCallback(e)}))}catch(e){return e}}function a(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?H.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function l(){return this._onCancelField}function u(e){this._onCancelField=e}function c(){this._cancellationParent=void 0,this._onCancelField=void 0}function d(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function m(){this._trace=new R(this._peekContext())}function f(e,t){if(B(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var i=E(e);H.notEnumerableProp(e,"stack",i.message+"\n"+i.stack.join("\n")),H.notEnumerableProp(e,"__stackCleaned__",!0)}}}function _(e,t,n,i,o){if(void 0===e&&null!==t&&X){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&i._bitField))return;n&&(n+=" ");var r="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),l=A(a),u=l.length-1;u>=0;--u){var c=l[u];if(!F.test(c)){var d=c.match(U);d&&(r="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(l.length>0)for(var h=l[0],u=0;u<a.length;++u)if(a[u]===h){u>0&&(s="\n"+a[u-1]);break}}var p="a promise was created in a "+n+"handler "+r+"but was not returned from it, see http://goo.gl/rRqMUw"+s;i._warn(p,!0,t)}}function g(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),v(n)}function v(e,t,i){if(se.warnings){var o,r=new V(e);if(t)i._attachExtraTrace(r);else if(se.longStackTraces&&(o=n._peekContext()))o.attachExtraTrace(r);else{var s=E(r);r.stack=s.message+"\n"+s.stack.join("\n")}te("warning",r)||w(r,"",!0)}}function y(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function M(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function b(e){for(var t=e[0],n=1;n<e.length;++n){for(var i=e[n],o=t.length-1,r=t[o],s=-1,a=i.length-1;a>=0;--a)if(i[a]===r){s=a;break}for(var a=s;a>=0;--a){var l=i[a];if(t[o]!==l)break;t.pop(),o--}t=i}}function A(e){for(var t=[],n=0;n<e.length;++n){var i=e[n],o="    (No stack trace)"===i||G.test(i),r=o&&ie(i);o&&!r&&(z&&" "!==i.charAt(0)&&(i="    "+i),t.push(i))}return t}function T(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var i=t[n];if("    (No stack trace)"===i||G.test(i))break}return n>0&&(t=t.slice(n)),t}function E(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?T(e):["    (No stack trace)"],{message:n,stack:A(t)}}function w(e,t,n){if("undefined"!=typeof console){var i;if(H.isObject(e)){var o=e.stack;i=t+Y(o,e)}else i=t+String(e);"function"==typeof k?k(i,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(i)}}function O(e,t,n,i){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(i):t(n,i))}catch(e){x.throwLater(e)}"unhandledRejection"===e?te(e,n,i)||o||w(n,"Unhandled rejection "):te(e,i)}function I(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():H.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+S(t)+">, no stack trace)"}function S(e){return e.length<41?e:e.substr(0,38)+"..."}function j(){return"function"==typeof re}function C(e){var t=e.match(oe);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function D(e,t){if(j()){for(var n,i,o=e.stack.split("\n"),r=t.stack.split("\n"),s=-1,a=-1,l=0;l<o.length;++l){var u=C(o[l]);if(u){n=u.fileName,s=u.line;break}}for(var l=0;l<r.length;++l){var u=C(r[l]);if(u){i=u.fileName,a=u.line;break}}s<0||a<0||!n||!i||n!==i||s>=a||(ie=function(e){if(W.test(e))return!0;var t=C(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}}function R(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);re(this,R),t>32&&this.uncycle()}var L,N,k,P=n._getDomain,x=n._async,V=e("./errors").Warning,H=e("./util"),B=H.canAttachTrace,W=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,F=/\((?:timers\.js):\d+:\d+\)/,U=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,G=null,Y=null,z=!1,q=!(0==H.env("BLUEBIRD_DEBUG")),K=!(0==H.env("BLUEBIRD_WARNINGS")||!q&&!H.env("BLUEBIRD_WARNINGS")),Z=!(0==H.env("BLUEBIRD_LONG_STACK_TRACES")||!q&&!H.env("BLUEBIRD_LONG_STACK_TRACES")),X=0!=H.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(K||!!H.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),x.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){O("rejectionHandled",L,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),O("unhandledRejection",N,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return v(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=P();N="function"==typeof e?null===t?e:H.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=P();L="function"==typeof e?null===t?e:H.domainBind(t,e):void 0};var J=function(){};n.longStackTraces=function(){if(x.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!se.longStackTraces&&j()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;se.longStackTraces=!0,J=function(){if(x.haveItemsQueued()&&!se.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,i.deactivateLongStackTraces(),x.enableTrampoline(),se.longStackTraces=!1},n.prototype._captureStackTrace=m,n.prototype._attachExtraTrace=f,i.activateLongStackTraces(),x.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return se.longStackTraces&&j()};var Q=(function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return H.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!H.global.dispatchEvent(n)}}if("function"==typeof Event){var e=new Event("CustomEvent");return H.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!H.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),H.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!H.global.dispatchEvent(n)}}catch(e){}return function(){return!1}})(),$=(function(){return H.isNode?function(){return t.emit.apply(t,arguments)}:H.global?function(e){var t="on"+e.toLowerCase(),n=H.global[t];return!!n&&(n.apply(H.global,[].slice.call(arguments,1)),!0)}:function(){return!1}})(),ee={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:o},te=function(e){var t=!1;try{t=$.apply(null,arguments)}catch(e){x.throwLater(e),t=!0}var n=!1;try{n=Q(e,ee[e].apply(null,arguments))}catch(e){x.throwLater(e),n=!0}return n||t};n.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&J()),"warnings"in e){var t=e.warnings;se.warnings=!!t,X=se.warnings,H.isObject(t)&&"wForgottenReturn"in t&&(X=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!se.cancellation){if(x.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=c,n.prototype._propagateFrom=d,n.prototype._onCancel=l,n.prototype._setOnCancel=u,n.prototype._attachCancellationCallback=a,n.prototype._execute=s,ne=d,se.cancellation=!0}"monitoring"in e&&(e.monitoring&&!se.monitoring?(se.monitoring=!0,n.prototype._fireEvent=te):!e.monitoring&&se.monitoring&&(se.monitoring=!1,n.prototype._fireEvent=r))},n.prototype._fireEvent=r,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var ne=h,ie=function(){return!1},oe=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;H.inherits(R,Error),i.CapturedTrace=R,R.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},i=0,o=this;void 0!==o;++i)t.push(o),o=o._parent;e=this._length=i;for(var i=e-1;i>=0;--i){var r=t[i].stack;void 0===n[r]&&(n[r]=i)}for(var i=0;i<e;++i){var s=t[i].stack,a=n[s];if(void 0!==a&&a!==i){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[i]._parent=void 0,t[i]._length=1;var l=i>0?t[i-1]:this;a<e-1?(l._parent=t[a+1],l._parent.uncycle(),l._length=l._parent._length+1):(l._parent=void 0,l._length=1);for(var u=l._length+1,c=i-2;c>=0;--c)t[c]._length=u,u++;return}}}},R.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=E(e),n=t.message,i=[t.stack],o=this;void 0!==o;)i.push(A(o.stack.split("\n"))),o=o._parent;b(i),M(i),H.notEnumerableProp(e,"stack",y(n,i)),H.notEnumerableProp(e,"__stackCleaned__",!0)}};var re=(function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():I(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,G=e,Y=t;var n=Error.captureStackTrace;return ie=function(e){return W.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return G=/@/,Y=t,z=!0,function(e){e.stack=(new Error).stack};var o;try{throw new Error}catch(e){o="stack"in e}return"stack"in i||!o||"number"!=typeof Error.stackTraceLimit?(Y=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?I(t):t.toString()},null):(G=e,Y=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})})();"undefined"!=typeof console&&void 0!==console.warn&&(k=function(e){console.warn(e)},H.isNode&&t.stderr.isTTY?k=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:H.isNode||"string"!=typeof(new Error).stack||(k=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var se={warnings:K,longStackTraces:!1,cancellation:!1,monitoring:!1};return Z&&n.longStackTraces(),{longStackTraces:function(){return se.longStackTraces},warnings:function(){return se.warnings},cancellation:function(){return se.cancellation},monitoring:function(){return se.monitoring},propagateFromFunction:function(){return ne},boundValueFunction:function(){return p},checkForgottenReturns:_,setBounds:D,warn:v,deprecated:g,CapturedTrace:R,fireDomEvent:Q,fireGlobalEvent:$}}}),{"./errors":12,"./util":36}],10:[(function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],i=function(){throw t};return this.caught(e,i)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var i=arguments[1];i instanceof e&&i.suppressUnhandledRejections();var o=function(){return i};return this.caught(n,o)}}}),{}],11:[(function(e,t,n){"use strict";t.exports=function(e,t){function n(){return r(this)}function i(e,n){return o(e,n,t,t)}var o=e.reduce,r=e.all;e.prototype.each=function(e){return o(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return o(this,e,t,t)},e.each=function(e,i){return o(e,i,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=i}}),{}],12:[(function(e,t,n){"use strict";function i(e,t){function n(i){if(!(this instanceof n))return new n(i);d(this,"message","string"==typeof i?i:t),d(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}function o(e){if(!(this instanceof o))return new o(e);d(this,"name","OperationalError"),d(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(d(this,"message",e.message),d(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var r,s,a=e("./es5"),l=a.freeze,u=e("./util"),c=u.inherits,d=u.notEnumerableProp,h=i("Warning","warning"),p=i("CancellationError","cancellation error"),m=i("TimeoutError","timeout error"),f=i("AggregateError","aggregate error");try{r=TypeError,s=RangeError}catch(e){r=i("TypeError","type error"),s=i("RangeError","range error")}for(var _="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<_.length;++g)"function"==typeof Array.prototype[_[g]]&&(f.prototype[_[g]]=Array.prototype[_[g]]);a.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var v=0;f.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",o=i.split("\n"),r=0;r<o.length;++r)o[r]=e+o[r];i=o.join("\n"),t+=i+"\n"}return v--,t},c(o,Error);var y=Error.__BluebirdErrorTypes__;y||(y=l({CancellationError:p,TimeoutError:m,OperationalError:o,RejectionError:o,AggregateError:f}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:s,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:h}}),{"./es5":13,"./util":36}],13:[(function(e,t,n){var i=(function(){"use strict";return void 0===this})();if(i)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var o={}.hasOwnProperty,r={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t},l=function(e,t){return{value:e[t]}},u=function(e,t,n){return e[t]=n.value,e},c=function(e){return e},d=function(e){try{return Object(e).constructor.prototype}catch(e){return s}},h=function(e){try{return"[object Array]"===r.call(e)}catch(e){return!1}};t.exports={isArray:h,keys:a,names:a,defineProperty:u,getDescriptor:l,freeze:c,getPrototypeOf:d,isES5:i,propertyIsWritable:function(){return!0}}}}),{}],14:[(function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,i){return n(this,e,i,t)},e.filter=function(e,i,o){return n(e,i,o,t)}}}),{}],15:[(function(e,t,n){"use strict";t.exports=function(t,n){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function r(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function s(){return l.call(this,this.promise._target()._settledValue())}function a(e){if(!r(this,e))return d.e=e,d}function l(e){var i=this.promise,l=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?l.call(i._boundValue()):l.call(i._boundValue(),e);if(void 0!==u){i._setReturnedNonUndefined();var h=n(u,i);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var p=new c("late cancellation observer");return i._attachExtraTrace(p),d.e=p,d}h.isPending()&&h._attachCancellationCallback(new o(this))}return h._then(s,a,void 0,this,void 0)}}}return i.isRejected()?(r(this),d.e=e,d):(r(this),e)}var u=e("./util"),c=t.CancellationError,d=u.errorObj;return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){r(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,o){return"function"!=typeof e?this.then():this._then(n,o,void 0,new i(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,l,l)},t.prototype.tap=function(e){return this._passThrough(e,1,l)},i}}),{"./util":36}],16:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o,r,s){function a(e,n,i){for(var r=0;r<n.length;++r){i._pushContext();var s=p(n[r])(e);if(i._popContext(),s===h){i._pushContext();var a=t.reject(h.e);return i._popContext(),a}var l=o(s,i);if(l instanceof t)return l}return null}function l(e,n,o,r){if(s.cancellation()){var a=new t(i),l=this._finallyPromise=new t(i);this._promise=a.lastly((function(){return l})),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new t(i))._captureStackTrace()}this._stack=r,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(m):m,this._yieldedPromise=null,this._cancellationPhase=!1}var u=e("./errors"),c=u.TypeError,d=e("./util"),h=d.errorObj,p=d.tryCatch,m=[];d.inherits(l,r),l.prototype._isResolved=function(){return null===this._promise},l.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},l.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var i=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=i,this._promise._attachExtraTrace(i),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,i),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},l.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},l.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},l.prototype._continue=function(e){var n=this._promise;if(e===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var i=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(i);var r=o(i,this._promise);if(!(r instanceof t)&&null===(r=a(r,this._yieldHandlers,this._promise)))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",i)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));r=r._target();var s=r._bitField;0==(50397184&s)?(this._yieldedPromise=r,r._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,r._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,r._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,i=l,o=(new Error).stack;return function(){var t=e.apply(this,arguments),r=new i(void 0,void 0,n,o),s=r.promise();return r._generator=t,r._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+d.classString(e));m.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=new l(e,this),o=i.promise();return i._run(t.spawn),o}}}),{"./errors":12,"./util":36}],17:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o,r,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var i}var o=[].slice.call(arguments);e&&o.pop();var i=new n(o).promise();return void 0!==e?i.spread(e):i}}}),{"./util":36}],18:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o,r,s){function a(e,t,n,i){this.constructor$(e),this._promise._captureStackTrace();var o=u();this._callback=null===o?t:c.domainBind(o,t),this._preservedValues=i===r?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0)}function l(e,n,o,r){if("function"!=typeof n)return i("expecting a function but got "+c.classString(n));var s=0;if(void 0!==o){if("object"!=typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(o.concurrency)));s=o.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(e,n,s,r).promise()}var u=t._getDomain,c=e("./util"),d=c.tryCatch,h=c.errorObj,p=t._async;c.inherits(a,n),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,n){var i=this._values,r=this.length(),a=this._preservedValues,l=this._limit;if(n<0){if(n=-1*n-1,i[n]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return i[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var u=this._promise,c=this._callback,p=u._boundValue();u._pushContext();var m=d(c).call(p,e,n,r),f=u._popContext();if(s.checkForgottenReturns(m,f,null!==a?"Promise.filter":"Promise.map",u),m===h)return this._reject(m.e),!0;var _=o(m,this._promise);if(_ instanceof t){_=_._target();var g=_._bitField;if(0==(50397184&g))return l>=1&&this._inFlight++,i[n]=_,_._proxy(this,-1*(n+1)),!1;if(0==(33554432&g))return 0!=(16777216&g)?(this._reject(_._reason()),!0):(this._cancel(),!0);m=_._value()}i[n]=m}return++this._totalResolved>=r&&(null!==a?this._filter(i,a):this._resolve(i),!0)},a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var i=e.pop();this._promiseFulfilled(n[i],i)}},a.prototype._filter=function(e,t){for(var n=t.length,i=new Array(n),o=0,r=0;r<n;++r)e[r]&&(i[o++]=t[r]);i.length=o,this._resolve(i)},a.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return l(this,e,t,null)},t.map=function(e,t,n,i){return l(e,t,n,i)}}}),{"./util":36}],19:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o,r){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var i=new t(n);i._captureStackTrace(),i._pushContext();var o=a(e).apply(this,arguments),s=i._popContext();return r.checkForgottenReturns(o,s,"Promise.method",i),i._resolveFromSyncValue(o),i}},t.attempt=t.try=function(e){if("function"!=typeof e)return o("expecting a function but got "+s.classString(e));var i=new t(n);i._captureStackTrace(),i._pushContext();var l;if(arguments.length>1){r.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],c=arguments[2];l=s.isArray(u)?a(e).apply(c,u):a(e).call(c,u)}else l=a(e)();var d=i._popContext();return r.checkForgottenReturns(l,d,"Promise.try",i),i._resolveFromSyncValue(l),i},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}}),{"./util":36}],20:[(function(e,t,n){"use strict";function i(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}function o(e){var t;if(i(e)){t=new u(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=c.keys(e),o=0;o<n.length;++o){var r=n[o];d.test(r)||(t[r]=e[r])}return t}return s.markAsOriginatingFromRejection(e),e}function r(e,t){return function(n,i){if(null!==e){if(n){var r=o(a(n));e._attachExtraTrace(r),e._reject(r)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(i);e=null}}}var s=e("./util"),a=s.maybeWrapAsError,l=e("./errors"),u=l.OperationalError,c=e("./es5"),d=/^(?:name|message|stack|cause)$/;t.exports=r}),{"./errors":12,"./es5":13,"./util":36}],21:[(function(e,t,n){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!r.isArray(e))return i.call(n,e,t);var o=a(t).apply(n._boundValue(),[null].concat(e));o===l&&s.throwLater(o.e)}function i(e,t){var n=this,i=n._boundValue(),o=void 0===e?a(t).call(i,null):a(t).call(i,null,e);o===l&&s.throwLater(o.e)}function o(e,t){var n=this;if(!e){var i=new Error(e+"");i.cause=e,e=i}var o=a(t).call(n._boundValue(),e);o===l&&s.throwLater(o.e)}var r=e("./util"),s=t._async,a=r.tryCatch,l=r.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=i;void 0!==t&&Object(t).spread&&(r=n),this._then(r,o,void 0,this,e)}return this}}}),{"./util":36}],22:[(function(e,n,i){"use strict";n.exports=function(){function i(){}function o(e,t){if("function"!=typeof t)throw new y("expecting a function but got "+m.classString(t));if(e.constructor!==r)throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function r(e){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,e!==b&&(o(this,e),this._resolveFromExecutor(e)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function s(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function l(e){var t=new r(b);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var u,c=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},d=function(){return new r.PromiseInspection(this._target())},h=function(e){return r.reject(new y(e))},p={},m=e("./util");u=m.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},m.notEnumerableProp(r,"_getDomain",u);var f=e("./es5"),_=e("./async"),g=new _;f.defineProperty(r,"_async",{value:g});var v=e("./errors"),y=r.TypeError=v.TypeError;r.RangeError=v.RangeError;var M=r.CancellationError=v.CancellationError;r.TimeoutError=v.TimeoutError,r.OperationalError=v.OperationalError,r.RejectionError=v.OperationalError,r.AggregateError=v.AggregateError
;var b=function(){},A={},T={},E=e("./thenables")(r,b),w=e("./promise_array")(r,b,E,h,i),O=e("./context")(r),I=O.create,S=e("./debuggability")(r,O),j=(S.CapturedTrace,e("./finally")(r,E)),C=e("./catch_filter")(T),D=e("./nodeback"),R=m.errorObj,L=m.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,i=new Array(t-1),o=0;for(n=0;n<t-1;++n){var r=arguments[n];if(!m.isObject(r))return h("expecting an object but got A catch statement predicate "+m.classString(r));i[o++]=r}return i.length=o,e=arguments[n],this.then(void 0,C(i,e,this))}return this.then(void 0,e)},r.prototype.reflect=function(){return this._then(d,d,void 0,this,void 0)},r.prototype.then=function(e,t){if(S.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+m.classString(e);arguments.length>1&&(n+=", "+m.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},r.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},r.prototype.spread=function(e){return"function"!=typeof e?h("expecting a function but got "+m.classString(e)):this.all()._then(e,void 0,void 0,A,void 0)},r.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},r.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new w(this).promise()},r.prototype.error=function(e){return this.caught(m.originatesFromRejection,e)},r.getNewLibraryCopy=n.exports,r.is=function(e){return e instanceof r},r.fromNode=r.fromCallback=function(e){var t=new r(b);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=L(e)(D(t,n));return i===R&&t._rejectCallback(i.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},r.all=function(e){return new w(e).promise()},r.cast=function(e){var t=E(e);return t instanceof r||(t=new r(b),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(e){var t=new r(b);return t._captureStackTrace(),t._rejectCallback(e,!0),t},r.setScheduler=function(e){if("function"!=typeof e)throw new y("expecting a function but got "+m.classString(e));return g.setScheduler(e)},r.prototype._then=function(e,t,n,i,o){var s=void 0!==o,a=s?o:new r(b),l=this._target(),c=l._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===i&&0!=(2097152&this._bitField)&&(i=0!=(50397184&c)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var d=u();if(0!=(50397184&c)){var h,p,f=l._settlePromiseCtx;0!=(33554432&c)?(p=l._rejectionHandler0,h=e):0!=(16777216&c)?(p=l._fulfillmentHandler0,h=t,l._unsetRejectionIsUnhandled()):(f=l._settlePromiseLateCancellationObserver,p=new M("late cancellation observer"),l._attachExtraTrace(p),h=t),g.invoke(f,l,{handler:null===d?h:"function"==typeof h&&m.domainBind(d,h),promise:a,receiver:i,value:p})}else l._addCallbacks(e,t,a,i,d);return a},r.prototype._length=function(){return 65535&this._bitField},r.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},r.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},r.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},r.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},r.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},r.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},r.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},r.prototype._isFinal=function(){return(4194304&this._bitField)>0},r.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},r.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},r.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},r.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},r.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==p)return void 0===t&&this._isBound()?this._boundValue():t},r.prototype._promiseAt=function(e){return this[4*e-4+2]},r.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},r.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},r.prototype._boundValue=function(){},r.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,i=e._promise0,o=e._receiverAt(0);void 0===o&&(o=p),this._addCallbacks(t,n,i,o,null)},r.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),i=e._rejectionHandlerAt(t),o=e._promiseAt(t),r=e._receiverAt(t);void 0===r&&(r=p),this._addCallbacks(n,i,o,r,null)},r.prototype._addCallbacks=function(e,t,n,i,o){var r=this._length();if(r>=65531&&(r=0,this._setLength(0)),0===r)this._promise0=n,this._receiver0=i,"function"==typeof e&&(this._fulfillmentHandler0=null===o?e:m.domainBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=null===o?t:m.domainBind(o,t));else{var s=4*r-4;this[s+2]=n,this[s+3]=i,"function"==typeof e&&(this[s+0]=null===o?e:m.domainBind(o,e)),"function"==typeof t&&(this[s+1]=null===o?t:m.domainBind(o,t))}return this._setLength(r+1),r},r.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},r.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var n=E(e,this);if(!(n instanceof r))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i===this)return void this._reject(c());var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var l=new M("late cancellation observer");i._attachExtraTrace(l),this._reject(l)}}},r.prototype._rejectCallback=function(e,t,n){var i=m.ensureErrorObject(e),o=i===e;if(!o&&!n&&S.warnings()){var r="a promise was rejected with a non-error: "+m.classString(e);this._warn(r,!0)}this._attachExtraTrace(i,!!t&&o),this._reject(e)},r.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,i=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,n)}));n=!1,this._popContext(),void 0!==i&&t._rejectCallback(i,!0)},r.prototype._settlePromiseFromHandler=function(e,t,n,i){var o=i._bitField;if(0==(65536&o)){i._pushContext();var r;t===A?n&&"number"==typeof n.length?r=L(e).apply(this._boundValue(),n):(r=R,r.e=new y("cannot .spread() a non-array: "+m.classString(n))):r=L(e).call(t,n);var s=i._popContext();o=i._bitField,0==(65536&o)&&(r===T?i._reject(n):r===R?i._rejectCallback(r.e,!1):(S.checkForgottenReturns(r,s,"",i,this),i._resolveCallback(r)))}},r.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(e){this._rejectionHandler0=e},r.prototype._settlePromise=function(e,t,n,o){var s=e instanceof r,a=this._bitField,l=0!=(134217728&a);0!=(65536&a)?(s&&e._invokeInternalOnCancel(),n instanceof j&&n.isFinallyHandler()?(n.cancelPromise=e,L(t).call(n,o)===R&&e._reject(R.e)):t===d?e._fulfill(d.call(n)):n instanceof i?n._promiseCancelled(e):s||e instanceof w?e._cancel():n.cancel()):"function"==typeof t?s?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,o,e)):t.call(n,o,e):n instanceof i?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(o,e):n._promiseRejected(o,e)):s&&(l&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(o):e._reject(o))},r.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,i=e.receiver,o=e.value;"function"==typeof t?n instanceof r?this._settlePromiseFromHandler(t,i,o,n):t.call(i,o,n):n instanceof r&&n._reject(o)},r.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},r.prototype._settlePromise0=function(e,t,n){var i=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,e,o,t)},r.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},r.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():g.settlePromises(this))}},r.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return g.fatalError(e,m.isNode);(65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},r.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var i=this._fulfillmentHandlerAt(n),o=this._promiseAt(n),r=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,i,r,t)}},r.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var i=this._rejectionHandlerAt(n),o=this._promiseAt(n),r=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,i,r,t)}},r.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,e),this._fulfillPromises(t,i)}this._setLength(0)}this._clearCancellationData()},r.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},r.defer=r.pending=function(){return S.deprecated("Promise.defer","new Promise"),{promise:new r(b),resolve:s,reject:a}},m.notEnumerableProp(r,"_makeSelfResolutionError",c),e("./method")(r,b,E,h,S),e("./bind")(r,b,E,S),e("./cancel")(r,w,h,S),e("./direct_resolve")(r),e("./synchronous_inspection")(r),e("./join")(r,w,E,b,g,u),r.Promise=r,r.version="3.4.6",e("./map.js")(r,w,h,E,b,S),e("./call_get.js")(r),e("./using.js")(r,h,E,I,b,S),e("./timers.js")(r,b,S),e("./generators.js")(r,h,b,E,i,S),e("./nodeify.js")(r),e("./promisify.js")(r,b),e("./props.js")(r,w,E,h),e("./race.js")(r,b,E,h),e("./reduce.js")(r,w,h,E,b,S),e("./settle.js")(r,w,S),e("./some.js")(r,w,h),e("./filter.js")(r,b),e("./each.js")(r,b),e("./any.js")(r),m.toFastProperties(r),m.toFastProperties(r.prototype),l({a:1}),l({b:2}),l({c:3}),l(1),l((function(){})),l(void 0),l(!1),l(new r(b)),S.setBounds(_.firstLineError,m.lastLineError),r}}),{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o,r){function s(e){switch(e){case-2:return[];case-3:return{}}}function a(e){var i=this._promise=new t(n);e instanceof t&&i._propagateFrom(e,3),i._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var l=e("./util");l.isArray;return l.inherits(a,r),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,r){var a=i(this._values,this._promise);if(a instanceof t){a=a._target();var u=a._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,r);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null===(a=l.asArray(a))){var c=o("expecting an array or an iterable object but got "+l.classString(a)).reason();return void this._promise._rejectCallback(c,!1)}if(0===a.length)return void(-5===r?this._resolveEmptyArray():this._resolve(s(r)));this._iterate(a)},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var o=this._promise,r=!1,s=null,a=0;a<n;++a){var l=i(e[a],o);l instanceof t?(l=l._target(),s=l._bitField):s=null,r?null!==s&&l.suppressUnhandledRejections():null!==s?0==(50397184&s)?(l._proxy(this,a),this._values[a]=l):r=0!=(33554432&s)?this._promiseFulfilled(l._value(),a):0!=(16777216&s)?this._promiseRejected(l._reason(),a):this._promiseCancelled(a):r=this._promiseFulfilled(l,a)}r||o._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}}),{"./util":36}],24:[(function(e,t,n){"use strict";t.exports=function(t,n){function i(e){return!b.test(e)}function o(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function r(e,t,n){var i=p.getDataPropertyOrDefault(e,t+n,y);return!!i&&o(i)}function s(e,t,n){for(var i=0;i<e.length;i+=2){var o=e[i];if(n.test(o))for(var r=o.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===r)throw new v("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function a(e,t,n,i){for(var a=p.inheritedDataKeys(e),l=[],u=0;u<a.length;++u){var c=a[u],d=e[c],h=i===A||A(c,d,e);"function"!=typeof d||o(d)||r(e,c,t)||!i(c,d,e,h)||l.push(c,d)}return s(l,t,n),l}function l(e,i,o,r,s,a){function l(){var o=i;i===h&&(o=this);var r=new t(n);r._captureStackTrace();var s="string"==typeof c&&this!==u?this[c]:e,l=m(r,a);try{s.apply(o,f(arguments,l))}catch(e){r._rejectCallback(_(e),!0,!0)}return r._isFateSealed()||r._setAsyncGuaranteed(),r}var u=(function(){return this})(),c=e;return"string"==typeof c&&(e=r),p.notEnumerableProp(l,"__isPromisified__",!0),l}function u(e,t,n,i,o){for(var r=new RegExp(T(t)+"$"),s=a(e,t,r,n),l=0,u=s.length;l<u;l+=2){var c=s[l],d=s[l+1],m=c+t;if(i===E)e[m]=E(c,h,c,d,t,o);else{var f=i(d,(function(){return E(c,h,c,d,t,o)}));p.notEnumerableProp(f,"__isPromisified__",!0),e[m]=f}}return p.toFastProperties(e),e}function c(e,t,n){return E(e,t,void 0,e,null,n)}var d,h={},p=e("./util"),m=e("./nodeback"),f=p.withAppended,_=p.maybeWrapAsError,g=p.canEvaluate,v=e("./errors").TypeError,y={__isPromisified__:!0},M=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],b=new RegExp("^(?:"+M.join("|")+")$"),A=function(e){return p.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},T=function(e){return e.replace(/([$])/,"\\$")},E=g?d:l;t.promisify=function(e,t){if("function"!=typeof e)throw new v("expecting a function but got "+p.classString(e));if(o(e))return e;t=Object(t);var n=void 0===t.context?h:t.context,r=!!t.multiArgs,s=c(e,n,r);return p.copyDescriptors(e,s,i),s},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new v("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,i=t.suffix;"string"!=typeof i&&(i="Async");var o=t.filter;"function"!=typeof o&&(o=A);var r=t.promisifier;if("function"!=typeof r&&(r=E),!p.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=p.inheritedDataKeys(e),a=0;a<s.length;++a){var l=e[s[a]];"constructor"!==s[a]&&p.isClass(l)&&(u(l.prototype,i,o,r,n),u(l,i,o,r,n))}return u(e,i,o,r,n)}}}),{"./errors":12,"./nodeback":20,"./util":36}],25:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o){function r(e){var t,n=!1;if(void 0!==a&&e instanceof a)t=d(e),n=!0;else{var i=c.keys(e),o=i.length;t=new Array(2*o);for(var r=0;r<o;++r){var s=i[r];t[r]=e[s],t[r+o]=s}}this.constructor$(t),this._isMap=n,this._init$(void 0,-3)}function s(e){var n,s=i(e);return u(s)?(n=s instanceof t?s._then(t.props,void 0,void 0,void 0,void 0):new r(s).promise(),s instanceof t&&n._propagateFrom(s,2),n):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,l=e("./util"),u=l.isObject,c=e("./es5");"function"==typeof Map&&(a=Map);var d=(function(){function e(e,i){this[t]=e,this[t+n]=i,t++}var t=0,n=0;return function(i){n=i.size,t=0;var o=new Array(2*i.size);return i.forEach(e,o),o}})(),h=function(e){for(var t=new a,n=e.length/2|0,i=0;i<n;++i){var o=e[n+i],r=e[i];t.set(o,r)}return t};l.inherits(r,n),r.prototype._init=function(){},r.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=h(this._values);else{n={};for(var i=this.length(),o=0,r=this.length();o<r;++o)n[this._values[o+i]]=this._values[o]}return this._resolve(n),!0}return!1},r.prototype.shouldCopyValues=function(){return!1},r.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return s(this)},t.props=function(e){return s(e)}}}),{"./es5":13,"./util":36}],26:[(function(e,t,n){"use strict";function i(e,t,n,i,o){for(var r=0;r<o;++r)n[r+i]=e[r+t],e[r+t]=void 0}function o(e){this._capacity=e,this._length=0,this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},o.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,i=(n-1&t-1^t)-t;this[i]=e,this._front=i,this._length=this.length()+1},o.prototype.unshift=function(e,t,n){this._unshiftOne(n),this._unshiftOne(t),this._unshiftOne(e)},o.prototype.push=function(e,t,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var o=this._front+i-3;this._checkCapacity(i);var r=this._capacity-1;this[o+0&r]=e,this[o+1&r]=t,this[o+2&r]=n,this._length=i},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,i(this,0,this,t,this._front+this._length&t-1)},t.exports=o}),{}],27:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o){function r(e,r){var l=i(e);if(l instanceof t)return a(l);if(null===(e=s.asArray(e)))return o("expecting an array or an iterable object but got "+s.classString(e));var u=new t(n);void 0!==r&&u._propagateFrom(r,3);for(var c=u._fulfill,d=u._reject,h=0,p=e.length;h<p;++h){var m=e[h];(void 0!==m||h in e)&&t.cast(m)._then(c,d,void 0,u,null)}return u}var s=e("./util"),a=function(e){return e.then((function(t){return r(t,e)}))};t.race=function(e){return r(e,void 0)},t.prototype.race=function(){return r(this,void 0)}}}),{"./util":36}],28:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o,r,s){function a(e,n,i,o){this.constructor$(e);var s=h();this._fn=null===s?n:p.domainBind(s,n),void 0!==i&&(i=t.resolve(i),i._attachCancellationCallback(this)),this._initialValue=i,this._currentCancellable=null,this._eachValues=o===r?Array(this._length):0===o?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function u(e,t,n,o){return"function"!=typeof t?i("expecting a function but got "+p.classString(t)):new a(e,t,n,o).promise()}function c(e){this.accum=e,this.array._gotAccum(e);var n=o(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(e){var n=this.array,i=n._promise,o=m(n._fn);i._pushContext();var r;(r=void 0!==n._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var a=i._popContext();return s.checkForgottenReturns(r,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),r}var h=t._getDomain,p=e("./util"),m=p.tryCatch;p.inherits(a,n),a.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==r&&this._eachValues.push(e)},a.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},a.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},a.prototype._iterate=function(e){this._values=e;var n,i,o=e.length;if(void 0!==this._initialValue?(n=this._initialValue,i=0):(n=t.resolve(e[0]),i=1),this._currentCancellable=n,!n.isRejected())for(;i<o;++i){var r={accum:null,value:e[i],index:i,length:o,array:this};n=n._then(c,void 0,void 0,r,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(l,l,void 0,n,this)},t.prototype.reduce=function(e,t){return u(this,e,t,null)},t.reduce=function(e,t,n,i){return u(e,t,n,i)}}}),{"./util":36}],29:[(function(e,o,r){"use strict";var s,a=e("./util"),l=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},u=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,d=t.nextTick;s=a.isRecentNode?function(e){c.call(n,e)}:function(e){d.call(t,e)}}else if("function"==typeof u&&"function"==typeof u.resolve){var h=u.resolve();s=function(e){h.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:l:(function(){var e=document.createElement("div"),t={attributes:!0},n=!1,i=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),n=!1}).observe(i,t);var o=function(){n||(n=!0,i.classList.toggle("foo"))};return function(n){var i=new MutationObserver(function(){i.disconnect(),n()});i.observe(e,t),o()}})();o.exports=s}),{"./util":36}],30:[(function(e,t,n){"use strict";t.exports=function(t,n,i){function o(e){this.constructor$(e)}var r=t.PromiseInspection;e("./util").inherits(o,n),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new r;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new r;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return i.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}}),{"./util":36}],31:[(function(e,t,n){"use strict";t.exports=function(t,n,i){function o(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function r(e,t){if((0|t)!==t||t<0)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new o(e),r=n.promise();return n.setHowMany(t),n.init(),r}var s=e("./util"),a=e("./errors").RangeError,l=e("./errors").AggregateError,u=s.isArray,c={};s.inherits(o,n),o.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=u(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},o.prototype.init=function(){this._initialized=!0,this._init()},o.prototype.setUnwrap=function(){this._unwrap=!0},o.prototype.howMany=function(){return this._howMany},o.prototype.setHowMany=function(e){this._howMany=e},o.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},o.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},o.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},o.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new l,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},o.prototype._fulfilled=function(){return this._totalResolved},o.prototype._rejected=function(){return this._values.length-this.length()},o.prototype._addRejected=function(e){this._values.push(e)},o.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},o.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},o.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)},o.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return r(e,t)},t.prototype.some=function(e){return r(this,e)},t._SomePromiseArray=o}}),{"./errors":12,"./util":36}],32:[(function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},r=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return r.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),i.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}}),{}],33:[(function(e,t,n){"use strict";t.exports=function(t,n){function i(e,i){if(c(e)){if(e instanceof t)return e;var o=r(e);if(o===u){i&&i._pushContext();var l=t.reject(o.e);return i&&i._popContext(),l}if("function"==typeof o){if(s(e)){var l=new t(n);return e._then(l._fulfill,l._reject,void 0,l,null),l}return a(e,o,i)}}return e}function o(e){return e.then}function r(e){try{return o(e)}catch(e){return u.e=e,u}}function s(e){try{return d.call(e,"_promise0")}catch(e){return!1}}function a(e,i,o){function r(e){a&&(a._resolveCallback(e),a=null)}function s(e){a&&(a._rejectCallback(e,d,!0),a=null)}var a=new t(n),c=a;o&&o._pushContext(),a._captureStackTrace(),o&&o._popContext();var d=!0,h=l.tryCatch(i).call(e,r,s);return d=!1,a&&h===u&&(a._rejectCallback(h.e,!0,!0),a=null),c}var l=e("./util"),u=l.errorObj,c=l.isObject,d={}.hasOwnProperty;return i}}),{"./util":36}],34:[(function(e,t,n){"use strict";t.exports=function(t,n,i){function o(e){this.handle=e}function r(e){return clearTimeout(this.handle),e}function s(e){throw clearTimeout(this.handle),e}var a=e("./util"),l=t.TimeoutError;o.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,r){var s,a;return void 0!==r?(s=t.resolve(r)._then(u,null,null,e,void 0),i.cancellation()&&r instanceof t&&s._setOnCancel(r)):(s=new t(n),a=setTimeout((function(){s._fulfill()}),+e),i.cancellation()&&s._setOnCancel(new o(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};t.prototype.delay=function(e){return c(e,this)};var d=function(e,t,n){var i;i="string"!=typeof t?t instanceof Error?t:new l("operation timed out"):new l(t),a.markAsOriginatingFromRejection(i),e._attachExtraTrace(i),e._reject(i),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,a,l=new o(setTimeout((function(){n.isPending()&&d(n,t,a)}),e));return i.cancellation()?(a=this.then(),n=a._then(r,s,void 0,l,void 0),n._setOnCancel(l)):n=this._then(r,s,void 0,l,void 0),n}}}),{"./util":36}],35:[(function(e,t,n){"use strict";t.exports=function(t,n,i,o,r,s){function a(e){setTimeout((function(){throw e}),0)}function l(e){var t=i(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function u(e,n){function o(){if(s>=u)return c._fulfill();var r=l(e[s++]);if(r instanceof t&&r._isDisposable()){try{r=i(r._getDisposer().tryDispose(n),e.promise)}catch(e){return a(e)}if(r instanceof t)return r._then(o,a,null,null,null)}o()}var s=0,u=e.length,c=new t(r);return o(),c}function c(e,t,n){this._data=e,this._promise=t,this._context=n}function d(e,t,n){this.constructor$(e,t,n)}function h(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function p(e){this.length=e,this.promise=null,this[e-1]=null}var m=e("./util"),f=e("./errors").TypeError,_=e("./util").inherits,g=m.errorObj,v=m.tryCatch,y={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},
c.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=t!==y?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,i},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},_(d,c),d.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},p.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var i=this[n];i instanceof t&&i.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var o=arguments[e-1];if("function"!=typeof o)return n("expecting a function but got "+m.classString(o));var r,a=!0;2===e&&Array.isArray(arguments[0])?(r=arguments[0],e=r.length,a=!1):(r=arguments,e--);for(var l=new p(e),d=0;d<e;++d){var f=r[d];if(c.isDisposer(f)){var _=f;f=f.promise(),f._setDisposable(_)}else{var y=i(f);y instanceof t&&(f=y._then(h,null,null,{resources:l,index:d},void 0))}l[d]=f}for(var M=new Array(l.length),d=0;d<M.length;++d)M[d]=t.resolve(l[d]).reflect();var b=t.all(M).then((function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return g.e=n.error(),g;if(!n.isFulfilled())return void b.cancel();e[t]=n.value()}A._pushContext(),o=v(o);var i=a?o.apply(void 0,e):o(e),r=A._popContext();return s.checkForgottenReturns(i,r,"Promise.using",A),i})),A=b.lastly((function(){var e=new t.PromiseInspection(b);return u(l,e)}));return l.promise=A,A._setOnCancel(l),A},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new d(e,this,o());throw new f}}}),{"./errors":12,"./util":36}],36:[(function(e,i,o){"use strict";function r(){try{var e=D;return D=null,e.apply(this,arguments)}catch(e){return C.e=e,C}}function s(e){return D=e,r}function a(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function l(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return a(e)?new Error(v(e)):e}function c(e,t){var n,i=e.length,o=new Array(i+1);for(n=0;n<i;++n)o[n]=e[n];return o[n]=t,o}function d(e,t,n){if(!S.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var i=Object.getOwnPropertyDescriptor(e,t);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function h(e,t,n){if(a(e))return e;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return S.defineProperty(e,t,i),e}function p(e){throw e}function m(e){try{if("function"==typeof e){var t=S.names(e.prototype),n=S.isES5&&t.length>1,i=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=k.test(e+"")&&S.names(e).length>0;if(n||i||o)return!0}return!1}catch(e){return!1}}function f(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function _(e){return P.test(e)}function g(e,t,n){for(var i=new Array(e),o=0;o<e;++o)i[o]=t+o+n;return i}function v(e){try{return e+""}catch(e){return"[no string representation]"}}function y(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function M(e){try{h(e,"isOperational",!0)}catch(e){}}function b(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function A(e){return y(e)&&S.propertyIsWritable(e,"stack")}function T(e){return{}.toString.call(e)}function E(e,t,n){for(var i=S.names(e),o=0;o<i.length;++o){var r=i[o];if(n(r))try{S.defineProperty(t,r,S.getDescriptor(e,r))}catch(e){}}}function w(e,n){return B?t.env[e]:n}function O(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function I(e,t){return e.bind(t)}var S=e("./es5"),j="undefined"==typeof navigator,C={e:{}},D,R="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null,L=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)i.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var i={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},N=(function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(S.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var i=[],o=Object.create(null);null!=e&&!t(e);){var r;try{r=n(e)}catch(e){return i}for(var s=0;s<r.length;++s){var a=r[s];if(!o[a]){o[a]=!0;var l=Object.getOwnPropertyDescriptor(e,a);null!=l&&null==l.get&&null==l.set&&i.push(a)}}e=S.getPrototypeOf(e)}return i}}var i={}.hasOwnProperty;return function(n){if(t(n))return[];var o=[];e:for(var r in n)if(i.call(n,r))o.push(r);else{for(var s=0;s<e.length;++s)if(i.call(e[s],r))continue e;o.push(r)}return o}})(),k=/this\s*\.\s*\S+\s*=/,P=/^[a-z$_][a-z$_0-9]*$/i,x=(function(){return"stack"in new Error?function(e){return A(e)?e:new Error(v(e))}:function(e){if(A(e))return e;try{throw new Error(v(e))}catch(e){return e}}})(),V=function(e){return S.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var H="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],i=e[Symbol.iterator]();!(t=i.next()).done;)n.push(t.value);return n};V=function(e){return S.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?H(e):null}}var B=void 0!==t&&"[object process]"===T(t).toLowerCase(),W={isClass:m,isIdentifier:_,inheritedDataKeys:N,getDataPropertyOrDefault:d,thrower:p,isArray:S.isArray,asArray:V,notEnumerableProp:h,isPrimitive:a,isObject:l,isError:y,canEvaluate:j,errorObj:C,tryCatch:s,inherits:L,withAppended:c,maybeWrapAsError:u,toFastProperties:f,filledRange:g,toString:v,canAttachTrace:A,ensureErrorObject:x,originatesFromRejection:b,markAsOriginatingFromRejection:M,classString:T,copyDescriptors:E,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:B,env:w,global:R,getNativePromise:O,domainBind:I};W.isRecentNode=W.isNode&&(function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0})(),W.isNode&&W.toFastProperties(t);try{throw new Error}catch(e){W.lastLineError=e}i.exports=W}),{"./es5":13}]},{},[4])(4)})),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(t,n(65),n(33),n(117).setImmediate)}),(function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}e.exports=n}),(function(e,t){function n(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}e.exports=n}),(function(e,t){function n(e,t,n){n||(n={});for(var i=-1,o=t.length;++i<o;){var r=t[i];n[r]=e[r]}return n}e.exports=n}),(function(e,t){var n=(function(e){return function(t,n,i){for(var o=-1,r=Object(t),s=i(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===n(r[l],l,r))break}return t}})();e.exports=n}),(function(e,t){function n(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)};case 5:return function(n,i,o,r,s){return e.call(t,n,i,o,r,s)}}return function(){return e.apply(t,arguments)}}function i(e){return e}e.exports=n}),(function(e,t,n){function i(e){return s((function(t,n){var i=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,l=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=o(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),l&&r(n[0],n[1],l)&&(a=s<3?void 0:a,s=1);++i<s;){var c=n[i];c&&e(t,c,a)}return t}))}var o=n(105),r=n(108),s=n(113);e.exports=i}),(function(e,t){function n(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function o(e){return r(e)&&h.call(e)==a}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?p.test(c.call(e)):n(e)&&l.test(e))}var a="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=u.toString,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i}),(function(e,t){function n(e){return null!=e&&r(u(e))}function i(e,t){return e="number"==typeof e||a.test(e)?+e:-1,t=null==t?l:t,e>-1&&e%1==0&&e<t}function o(e,t,o){if(!s(o))return!1;var r=typeof t;if("number"==r?n(o)&&i(t,o.length):"string"==r&&t in o){var a=o[t];return e===e?e===a:a!==a}return!1}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var a=/^\d+$/,l=9007199254740991,u=(function(e){return function(t){return null==t?void 0:t[e]}})("length");e.exports=o}),(function(e,t,n){function i(e){return!!e&&"object"==typeof e}function o(e,t){return s(e,t,l)}function r(e){var t;if(!i(e)||h.call(e)!=u||a(e)||!d.call(e,"constructor")&&"function"==typeof(t=e.constructor)&&!(t instanceof t))return!1;var n;return o(e,(function(e,t){n=t})),void 0===n||d.call(e,n)}var s=n(104),a=n(21),l=n(64),u="[object Object]",c=Object.prototype,d=c.hasOwnProperty,h=c.toString;e.exports=r}),(function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function i(e){return!!e&&"object"==typeof e}function o(e){return i(e)&&n(e.length)&&!!s[l.call(e)]}var r=9007199254740991,s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var a=Object.prototype,l=a.toString;e.exports=o}),(function(e,t,n){function i(e){return null!=e&&r(g(e))}function o(e,t){return e="number"==typeof e||h.test(e)?+e:-1,t=null==t?_:t,e>-1&&e%1==0&&e<t}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=_}function s(e){for(var t=l(e),n=t.length,i=n&&e.length,s=!!i&&r(i)&&(d(e)||c(e)),a=-1,u=[];++a<n;){var h=t[a];(s&&o(h,i)||m.call(e,h))&&u.push(h)}return u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){if(null==e)return[];a(e)||(e=Object(e));var t=e.length;t=t&&r(t)&&(d(e)||c(e))&&t||0;for(var n=e.constructor,i=-1,s="function"==typeof n&&n.prototype===e,l=Array(t),u=t>0;++i<t;)l[i]=i+"";for(var h in e)u&&o(h,t)||"constructor"==h&&(s||!m.call(e,h))||l.push(h);return l}var u=n(107),c=n(21),d=n(32),h=/^\d+$/,p=Object.prototype,m=p.hasOwnProperty,f=u(Object,"keys"),_=9007199254740991,g=(function(e){return function(t){return null==t?void 0:t[e]}})("length"),v=f?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?s(e):a(e)?f(e):[]}:s;e.exports=v}),(function(e,t,n){function i(e){return!!e&&"object"==typeof e}function o(e,t,n,a,u){if(!l(e))return e;var d=s(t)&&(p(t)||f(t)),h=d?void 0:_(t);return c(h||t,(function(s,l){if(h&&(l=s,s=t[l]),i(s))a||(a=[]),u||(u=[]),r(e,t,l,o,n,a,u);else{var c=e[l],p=n?n(c,s,l,e,t):void 0,m=void 0===p;m&&(p=s),void 0===p&&(!d||l in e)||!m&&(p===p?p===c:c!==c)||(e[l]=p)}})),e}function r(e,t,n,i,o,r,a){for(var l=r.length,c=t[n];l--;)if(r[l]==c)return void(e[n]=a[l]);var d=e[n],_=o?o(d,c,n,e,t):void 0,v=void 0===_;v&&(_=c,s(c)&&(p(c)||f(c))?_=p(d)?d:s(d)?u(d):[]:m(c)||h(c)?_=h(d)?g(d):m(d)?d:{}:v=!1),r.push(c),a.push(_),v?e[n]=i(_,c,o,r,a):(_===_?_!==d:d===d)&&(e[n]=_)}function s(e){return null!=e&&a(y(e))}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=n(101),c=n(102),d=n(106),h=n(21),p=n(32),m=n(109),f=n(110),_=n(111),g=n(114),v=9007199254740991,y=(function(e){return function(t){return null==t?void 0:t[e]}})("length"),M=d(o);e.exports=M}),(function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,r=o(n.length-t,0),s=Array(r);++i<r;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=s,e.apply(this,a)}}var i="Expected a function",o=Math.max;e.exports=n}),(function(e,t,n){function i(e){return o(e,r(e))}var o=n(103),r=n(64);e.exports=i}),(function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!(function(e,t,n){void 0!==module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})(0,0,(function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,i=t.headers||{};i.Accept=i.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="undefined"!=typeof FormData&&t.data instanceof FormData;t.crossOrigin||i[requestedWith]||(i[requestedWith]=defaultHeaders.requestedWith),i[contentType]||o||(i[contentType]=t.contentType||defaultHeaders.contentType);for(n in i)i.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,i[n])}function setCredentials(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,i){var o=uniqid++,r=e.jsonpCallback||"callback",s=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),a=new RegExp("((^|\\?|&)"+r+")=([^&]+)"),l=i.match(a),u=doc.createElement("script"),c=0,d=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?i=i.replace(a,"$1="+s):s=l[3]:i=urlappend(i,r+"="+s),context[s]=generalCallback,u.type="text/javascript",u.src=i,u.async=!0,void 0===u.onreadystatechange||d||(u.htmlFor=u.id="_reqwest_"+o),u.onload=u.onreadystatechange=function(){if(u[readyState]&&"complete"!==u[readyState]&&"loaded"!==u[readyState]||c)return!1;u.onload=u.onreadystatechange=null,u.onclick&&u.onclick(),t(lastValue),lastValue=void 0,head.removeChild(u),c=1},head.appendChild(u),{abort:function(){u.onload=u.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(u),c=1}}}function getRequest(e,t){var n,i=this.o,o=(i.method||"GET").toUpperCase(),r="string"==typeof i?i:i.url,s=!1!==i.processData&&i.data&&"string"!=typeof i.data?reqwest.toQueryString(i.data):i.data||null,a=!1;return"jsonp"!=i.type&&"GET"!=o||!s||(r=urlappend(r,s),s=null),"jsonp"==i.type?handleJsonp(i,e,t,r):(n=i.xhr&&i.xhr(i)||xhr(i),n.open(o,r,!1!==i.async),setHeaders(n,i),setCredentials(n,i),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,e,t),i.before&&i.before(n),a?setTimeout((function(){n.send(s)}),200):n.send(s),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout((function(){timedOut()}),o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push((function(){o.error.apply(o,arguments)})),o.complete&&this._completeHandlers.push((function(){o.complete.apply(o,arguments)})),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,i,o,r,s=e.name,a=e.tagName.toLowerCase(),l=function(e){e&&!e.disabled&&t(s,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),i=/radio/i.test(e.type),o=e.value,(!(n||i)||e.checked)&&t(s,normalize(n&&""===o?"on":o)));break;case"textarea":t(s,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())l(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(r=0;e.length&&r<e.length;r++)e.options[r].selected&&l(e.options[r])}}function eachFormElement(){var e,t,n=this;for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),(function(e,t){var i,o,r;for(i=0;i<t.length;i++)for(r=e[byTag](t[i]),o=0;o<r.length;o++)serial(r[o],n)})(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply((function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n}),arguments),e}function buildParams(e,t,n,i){var o,r,s,a=/\[\]$/;if(isArray(t))for(r=0;t&&r<t.length;r++)s=t[r],n||a.test(e)?i(e,s):buildParams(e+"["+("object"==typeof s?r:"")+"]",s,n,i);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],n,i);else i(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=__webpack_require__(119)}catch(e){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(!0===e.crossOrigin){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply((function(t,n){e.push({name:t,value:n})}),arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,i,o=t||!1,r=[],s=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,r[r.length]=s(e)+"="+s(t)};if(isArray(e))for(i=0;e&&i<e.length;i++)a(e[i].name,e[i].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],o,a);return r.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest}))}),(function(e,t,n){(function(e,t){!(function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[l]=i,a(l),l++}function o(e){delete u[e]}function r(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function s(e){if(c)setTimeout(s,0,e);else{var t=u[e];if(t){c=!0;try{r(t)}finally{o(e),c=!1}}}}if(!e.setImmediate){var a,l=1,u={},c=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?(function(){a=function(e){t.nextTick((function(){s(e)}))}})():(function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}})()?(function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}})():e.MessageChannel?(function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},a=function(t){e.port2.postMessage(t)}})():d&&"onreadystatechange"in d.createElement("script")?(function(){var e=d.documentElement;a=function(t){var n=d.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}})():(function(){a=function(e){setTimeout(s,0,e)}})(),h.setImmediate=i,h.clearImmediate=o}})("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(33),n(65))}),(function(e,t,n){function i(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new i(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(116),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate}),(function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}),(function(e,t){}),(function(e,t,n){var i,o;i=[t,n(24),n(67),n(23),n(37),n(44),n(49),n(45),n(34),n(16),n(50),n(71),n(51),n(52),n(68),n(12),n(66),n(74),n(14),n(35),n(7),n(3),n(38),n(39),n(9),n(2),n(27),n(28),n(17),n(46),n(40),n(47),n(13),n(25),n(41),n(48),n(6),n(72),n(8),n(69),n(36),n(42),n(75),n(5),n(15),n(53),n(70),n(43),n(26),n(76),n(73),n(22)],void 0!==(o=function(e,t,n,i,o,r,s,a,l,u,c,d,h,p,m,f,_,g,v,y,M,b,A,T,E,w,O,I,S,j,C,D,R,L,N,k,P,x,V,H,B,W,F,U,G,Y,z,q,K,Z,X,J){"use strict";function Q(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.calculateProfitAndLoss=e.WatchlistService=e.V4InstrumentGroupSubscription=e.V2InstrumentGroupSubscription=e.Util=e.UserPreferencesService=e.User=e.TwoWayBoundModel=e.TransactionState=e.TicketTypes=e.Stop=e.SignalsStreamingClient=e.SettingsService=e.Settings=e.Session=e.ServiceEvents=e.SearchService=e.PositionStreamingClient=e.PositionService=e.PositionGroupSubscription=e.Position=e.OrderStreamingClient=e.OrderService=e.OrderGroupSubscription=e.Order=e.OpenPositionTicket=e.OpenOrderTicket=e.Model=e.MarketStatus=e.MarketService=e.MarginService=e.Level=e.Instrument=e.Heartbeat=e.GroupSubscription=e.ForeignExchangeGroupSubscription=e.Factory=e.Errors=e.Environment=e.EditPositionTicket=e.EditOrderTicket=e.DynamicWatchlistService=e.DeleteOrderTicket=e.DealingEvents=e.DealReferenceGenerator=e.ConfirmationStreamingClient=e.ClosePositionTicket=e.AlertsStreamingClient=e.AlertService=e.AlertEnums=e.AggregatePosition=void 0;var $=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(t),ee=Q(n),te=Q(i),ne=Q(o),ie=Q(r),oe=Q(s),re=Q(a),se=Q(l),ae=Q(u),le=Q(c),ue=Q(d),ce=Q(h),de=Q(p),he=Q(m),pe=Q(f),me=Q(_),fe=Q(g),_e=Q(v),ge=Q(y),ve=Q(M),ye=Q(b),Me=Q(A),be=Q(T),Ae=Q(E),Te=Q(w),Ee=Q(O),we=Q(I),Oe=Q(S),Ie=Q(j),Se=Q(C),je=Q(D),Ce=Q(R),De=Q(L),Re=Q(N),Le=Q(k),Ne=Q(P),ke=Q(x),Pe=Q(V),xe=Q(H),Ve=Q(B),He=Q(W),Be=Q(F),We=Q(U),Fe=Q(G),Ue=Q(Y),Ge=Q(z),Ye=Q(q),ze=Q(K),qe=Q(Z),Ke=Q(X),Ze=Q(J),Xe=Object.freeze({Promise:Ne.default});e.AggregatePosition=ee.default,e.AlertEnums=te.default,e.AlertService=ne.default,e.AlertsStreamingClient=ie.default,e.ClosePositionTicket=oe.default,e.ConfirmationStreamingClient=re.default,e.DealReferenceGenerator=se.default,e.DealingEvents=ae.default,e.DeleteOrderTicket=le.default,e.DynamicWatchlistService=ue.default,e.EditOrderTicket=ce.default,e.EditPositionTicket=de.default,e.Environment=he.default,e.Errors=pe.default,e.Factory=me.default,e.ForeignExchangeGroupSubscription=fe.default,e.GroupSubscription=_e.default,e.Heartbeat=ge.default,e.Instrument=ve.default,e.Level=ye.default,e.MarginService=Me.default,e.MarketService=be.default,e.MarketStatus=Ae.default,e.Model=Te.default,e.OpenOrderTicket=Ee.default,e.OpenPositionTicket=we.default,e.Order=Oe.default,e.OrderGroupSubscription=Ie.default,e.OrderService=Se.default,e.OrderStreamingClient=je.default,e.Position=Ce.default,e.PositionGroupSubscription=De.default,e.PositionService=Re.default,e.PositionStreamingClient=Le.default,e.SearchService=ke.default,e.ServiceEvents=Pe.default,e.Session=xe.default,e.Settings=Ve.default,e.SettingsService=He.default,e.SignalsStreamingClient=Be.default,e.Stop=We.default,e.TicketTypes=Fe.default,e.TransactionState=$,e.TwoWayBoundModel=Ue.default,e.User=Ge.default,e.UserPreferencesService=Ye.default,e.Util=Xe,e.V2InstrumentGroupSubscription=ze.default,e.V4InstrumentGroupSubscription=qe.default,e.WatchlistService=Ke.default,e.calculateProfitAndLoss=Ze.default}.apply(t,i))&&(e.exports=o)})])})),define("module/dealing-positions-and-orders/js/i18n",["require","ig-trading","module/core/js/i18nloader","module/core/js/util/object"],(function(e){"use strict";var t=e("ig-trading"),n=e("module/core/js/i18nloader"),i=e("module/core/js/util/object"),o={de:{cancel:"Abbrechen",closeButton:"Schließen",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Kauf",closeConfirmationSellButton:"Verkauf",deleteButton:"Löschen",enable:"Handel aktivieren",enableDealingDialogTitle:"Handel aus dem Chart",enableDealing:'<p>Handel über Charts aktivieren?</p><p>Wenn die Handelsfunktion aktiviert ist, können Sie folgende Aktionen direkt über die Charts ausführen:</p><ul class="bullet-list"><li>Positionen öffnen oder schließen</li><li>Hinterlegte Orders bearbeiten oder löschen</li><li>Stops und Limits hinzufügen oder bearbeiten</li></ul><p>Sie können den Handel über Charts jederzeit deaktivieren.</p><p>Bevor Sie diesen Dienst aktivieren, navigieren Sie zu den AGB auf der Website und lesen Sie den Differenzhandelsvertrag, insbesondere den Teil &quot;Elektronische Transaktionen&quot;, gründlich durch.</p>',noThanks:"Nein danke",settingsDialogTitle:"Einstellungen",tradeConfirmsLabel:"Jeden Trade vor Übermittlung bestätigen",tradeConfirmsWarningContent:'<p>Handelsbestätigungen deaktivieren?</p><p>Folgende Handelsaktionen werden umgehend übermittelt:</p><ul class="bullet-list"><li>Positionen öffnen oder schließen</li><li>Hinterlegte Orders bearbeiten oder löschen</li><li>Stops und Limits hinzufügen oder bearbeiten</li></ul><p>Es wird nicht möglich sein, Handelsaktionen vorher abzubrechen.</p>',tradeConfirmsWarningConfirm:"Deaktivieren",unableToProcessDeal:"Entschuldigung, wir konnten Ihren Trade nicht durchführen.",stopLevelInitial:"S",abbrStopLevelTrailing:"T Stop",abbrStopLevelGuaranteed:"G Stop",limitLevelInitial:"L",menuPositions:"Offene Positionen",menuWorkingOrders:"Zu eröffnende Order",ticketCancel:"Abbrechen",ticketSubmit:"Abschicken",positionTicketSubmit:"Trade platzieren",limitOrderTicketSubmit:"Limit Order platzieren",stopOrderTicketSubmit:"Stop Order platzieren",openPositionDialogTitle:"Offene Position",workingOrderDialogTitle:"Zu eröffnende Order",labelOrderLevel:"Order-Level",limitInvalid:"Bitte geben Sie ein Limit Level größer als 0 ein.",limitTooFar:"Der von Ihnen erwünschte Limit-Abstand befindet sich zu weit vom aktuellen Marktlevel.",limitWrongSide:"Das Limit Level befindet sich auf der falschen Seite des aktuellen Marktpreises.",stopInvalid:"Bitte geben Sie ein Stop-Wert höher als 0 ein.",stopRequired:"Geben Sie einen Stop-Abstand ein",stopTooClose:"Bitte geben Sie eine Stop-Abstand größer als {min} ein",stopTooFar:"Der von Ihnen erwünschte Stop-Abstand befindet sich zu weit vom aktuellen Marktlevel.",stopWrongSide:"Das Stop Level befindet sich auf der falschen Seite des aktuellen Marktpreises.",
guaranteedStopMoveAway:"Der von Ihnen gewünschte Stopp Level liegt näher am Markt. Wenn der Markt geschlossen ist, können Sie den Auftrag nur weiter weg von dem gegenwärtigen Marktlevel setzen.",trailingStopTooFar:"Dieser Stop-Level kann mit diesem Trailing Stop nicht eingeben werden. Ihr Stop-Level sollte näher am aktuellen Kurs liegen als (Stop-Abstand + Schritt).",openPositionRemoved:"Diese Position ist bereits geschlossen und kann nicht mehr bearbeitet werden.",workingOrderMissingLevel:"Geben Sie bitte ein Level an.",workingOrderRemoved:"Diese Order wurde bereits ausgefüllt oder gelöscht und kann nicht mehr bearbeitet werden.",workingOrderWrongDirection:"Die von Ihnen ausgewählte Orderart ist in Verbindung mit der erwünschten Richtung und dem Order Level nicht gültig.",workingOrderTooFar:"Das erwünschte Order-Level ist zu weit vom aktuellen Level entfernt.",riskRewardRatio:"Risiko/Chance-Verhältnis",abbrRiskRewardRatio:"R/C"},en:{cancel:"Cancel",closeButton:"Close",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Buy",closeConfirmationSellButton:"Sell",deleteButton:"Delete",enable:"Activate dealing",enableDealingDialogTitle:"Dealing on charts",enableDealing:'<p>Activate dealing on charts?</p><p>With dealing on charts activated, you can do all of the following straight from a chart:</p><ul class="bullet-list"><li>Open or close a position</li><li>Edit or delete a working order</li><li>Add or edit stops and limits</li></ul><p>You can disable dealing on charts at any time.</p><p>Before activating this service, please read our Customer Agreement, in the &quot;Terms and Agreements&quot; area of our website, paying particular attention to the &quot;Electronic Transactions&quot; section.</p>',noThanks:"No thanks",settingsDialogTitle:"Settings",tradeConfirmsLabel:"Confirm each trade before submitting",tradeConfirmsWarningContent:'<p>Turn confirms off?</p><p>We’ll execute your request immediately when you:</p><ul class="bullet-list"><li>Open or close a position</li><li>Edit or delete a working order</li><li>Add/edit stops and limits</li></ul><p>You won’t get the chance to cancel.</p>',tradeConfirmsWarningConfirm:"Turn off",unableToProcessDeal:"Sorry, we were unable to process your deal.",stopLevelInitial:"S",abbrStopLevelTrailing:"T Stop",abbrStopLevelGuaranteed:"G Stop",limitLevelInitial:"L",menuPositions:"Open Positions",menuWorkingOrders:"Working Orders",ticketCancel:"Cancel",ticketSubmit:"Submit",positionTicketSubmit:"Place deal",limitOrderTicketSubmit:"Place limit order",stopOrderTicketSubmit:"Place stop order",openPositionDialogTitle:"Open Position",workingOrderDialogTitle:"Working Order",labelOrderLevel:"Order Level",limitInvalid:"Please enter a limit level greater than zero.",limitTooFar:"The limit distance you have requested is too far from the current market level.",limitWrongSide:"Limit level is on the wrong side of the current market price.",stopInvalid:"Please enter a stop value greater than zero.",stopRequired:"Please enter a stop distance",stopTooClose:"Please enter a stop distance greater than {min}",stopTooFar:"The stop distance you have requested is too far from the current market level.",stopWrongSide:"Stop level is on the wrong side of the current market price.",guaranteedStopMoveAway:"The stop level you have requested is closer to the market. When the market is closed you can only move the order further away from the current market level.",trailingStopTooFar:"You cannot enter this Stop Level with this Trailing Stop. Your Stop Level should be closer to the Current Level than (Stop Distance + Step).",openPositionRemoved:"This position has already been closed and can no longer be amended.",workingOrderMissingLevel:"Please enter a Level.",workingOrderRemoved:"This order has already been filled or deleted and can no longer be amended.",workingOrderWrongDirection:"The order type you have chosen is invalid in relation to the requested Direction and Order Level.",workingOrderTooFar:"The requested order level is too far from the current level.",riskRewardRatio:"Risk/reward ratio",abbrRiskRewardRatio:"R/R"},es:{cancel:"Cancelar",closeButton:"Cerrar",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Comprar",closeConfirmationSellButton:"Vender",deleteButton:"Eliminar",enable:"Activar función",enableDealingDialogTitle:"Operar desde gráficos",enableDealing:'<p>¿Activar &quot;operar desde los gráficos&quot;?</p><p>Al activar esta opción, podrá realizar las siguientes acciones directamente desde un gráfico:</p><ul class="bullet-list"><li>Abrir o cerrar una posición</li><li>Editar or eliminar una orden en ejecución</li><li>Añadir o editar stops y límites</li></ul><p>Puede desactivar &quot;operar desde los gráficos&quot; en cualquier momento. </p><p>Antes de activar este servicio, por favor lea nuestro Contrato con el Cliente, en el apartado &quot;Términos y Condiciones&quot; de nuestra página web, prestando particular atención a la sección &quot;Transacciones electrónicas&quot;.</p>',noThanks:"No, gracias",settingsDialogTitle:"Preferencias",tradeConfirmsLabel:"Confirmar cada operación antes de enviar",tradeConfirmsWarningContent:'<p>¿Desactivar confirmaciones?</p><p>Ejecutaremos su solicitud inmediatamente al:</p><ul class="bullet-list"><li>Abrir o cerrar una posición</li><li>Editar o eliminar una orden en ejecución</li><li>Añadir/editar stops y límites</li></ul><p>No podrá cancelar la solicitud.</p>',tradeConfirmsWarningConfirm:"Desactivar",unableToProcessDeal:"Disculpe, no ha sido posible procesar su operación.",stopLevelInitial:"S",abbrStopLevelTrailing:"S Dinámico",abbrStopLevelGuaranteed:"S Garantizado",limitLevelInitial:"L",menuPositions:"Posiciones abiertas",menuWorkingOrders:"Órdenes de apertura",ticketCancel:"Cancelar",ticketSubmit:"Enviar",positionTicketSubmit:"Realizar operación",limitOrderTicketSubmit:"Establecer orden límite",stopOrderTicketSubmit:"Establecer orden de stop",openPositionDialogTitle:"Posición abierta",workingOrderDialogTitle:"Orden en proceso",labelOrderLevel:"Nivel",limitInvalid:"Introduzca un nivel de límite mayor que cero.",limitTooFar:"El nivel de límite que ha solicitado está demasiado lejos del nivel actual del mercado.",limitWrongSide:"El nivel del límite está en la posición contraria al precio actual de mercado.",stopTooClose:"Por favor, introduzca una distancia para el stop mayor que {min}",stopInvalid:"Introduzca un nivel de stop mayor que cero.",stopRequired:"Por favor, introduzca una distancia para el stop",stopTooFar:"El nivel de stop que ha solicitado está demasiado lejos del nivel actual del mercado.",stopWrongSide:"El nivel del stop está en la posición contraria al precio actual de mercado.",guaranteedStopMoveAway:"El nivel de Stop solicitado está acercándose al nivel del mercado. Cuando el mercado está cerrado, usted sólo puede mover la orden más lejos.",trailingStopTooFar:"No puede poner este nivel de Stop con este Stop Dinámico. Su nivel de Stop debería estar más cerca del nivel actual que la (Distancia de Stop + nivel de oscilación).",openPositionRemoved:"Esta posición ha sido cerrada y ya no puede cambiarse.",workingOrderMissingLevel:"Por favor, introduzca un nivel.",workingOrderRemoved:"Esta orden ya ha sido cubierta o eliminada y no puede ser cambiada.",workingOrderWrongDirection:"El tipo de orden que ha elegido no es válida por la dirección y el nivel de la misma.",workingOrderTooFar:"El nivel seleccionado está muy lejos del nivel actual.",riskRewardRatio:"Ratio beneficio / riesgo",abbrRiskRewardRatio:"R/RB"},fr:{cancel:"Annuler",closeButton:"Fermer",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Acheter",closeConfirmationSellButton:"Vendre",deleteButton:"Supprimer",enable:"Activer",enableDealingDialogTitle:"Passage d'ordre sur graphiques",enableDealing:"<p>Activer le passage d'ordre sur graphiques?</p><p>Si vous activez le passage d'ordre sur graphiques, vous pourrez effectuer les opérations suivantes directement depuis les graphiques:</p><ul class=\"bullet-list\"><li>Ouvrir ou fermer une position</li><li>Modifier ou supprimer un ordre limité</li><li>Ajouter ou modifier des ordres stops et limites</li></ul><p>Vous pourrez désactiver le passage d'ordre sur graphiques à tout moment.</p><p>Avant d'activer cette fonctionnalité, veuillez lire attentivement nos Conditions Générales, notamment la section &quot;Transactions électroniques&quot;, disponibles dans la rubrique &quot;Conditions&quot; de notre site internet.</p>",noThanks:"Non merci",settingsDialogTitle:"Réglages",tradeConfirmsLabel:"Confirmer chaque ordre avant envoi",tradeConfirmsWarningContent:'<p>Désactiver les confirmations?</p><p>Vos ordres seront exécutés immédiatement pour:</p><ul class="bullet-list"><li>Ouvrir ou fermer une position</li><li>Modifier ou supprimer un ordre limité</li><li>Ajouter ou modifier des ordres stops et limites</li></ul><p>Ces derniers ne pourront pas être annulés.</p>',tradeConfirmsWarningConfirm:"Désactiver",unableToProcessDeal:"Désolé, nous n'avons pas pu traiter votre ordre.",stopLevelInitial:"S",abbrStopLevelTrailing:"Stop S",abbrStopLevelGuaranteed:"Stop G",limitLevelInitial:"L",menuPositions:"Positions ouvertes",menuWorkingOrders:"Ordres limités",ticketCancel:"Annuler",ticketSubmit:"Valider",positionTicketSubmit:"Placer un ordre",limitOrderTicketSubmit:"Placer un ordre limite",stopOrderTicketSubmit:"Placer un ordre stop",openPositionDialogTitle:"Position ouverte",workingOrderDialogTitle:"Ordre Limité",labelOrderLevel:"Cours",limitInvalid:"Veuillez renseigner un niveau de limite supérieur à zéro.",limitTooFar:"La Limite requise est trop éloignée du niveau actuel de marché.",limitWrongSide:"Le niveau de la limite n'est pas placé correctement par rapport au cours actuel du marché",stopInvalid:"Veuillez renseigner un niveau de stop supérieur à zéro.",stopRequired:"Veuillez entrer la distance au stop",stopTooClose:"Veuillez entrer une distance au stop supérieure à {min}",stopTooFar:"Le stop requis est trop éloigné du niveau actuel de marché.",stopWrongSide:"Le niveau de stop n'est pas placé correctement par rapport au cours actuel du marché",guaranteedStopMoveAway:"Le niveau de stop requis est plus près du marché. Lorsque le marché est fermé, vous pouvez uniquement éloigner l'ordre du niveau actuel du marché.",trailingStopTooFar:"Ce niveau de Stop n’est pas cohérent avec le Stop Suiveur. Le niveau de votre Stop doit être plus près du cours actuel que (distance de Stop + Pas).",openPositionRemoved:"Cette position a été clôturée et ne peut plus être modifiée.",workingOrderMissingLevel:"Veuillez saisir un niveau.",workingOrderRemoved:"Cet ordre a déjà été rempli ou supprimé et ne peut plus être modifié.",workingOrderWrongDirection:"Le type d'ordre que vous avez sélectionné est invalide en raison du sens et du niveau de cours.",workingOrderTooFar:"Le cours requis pour cet ordre est trop éloigné du niveau actuel du marché.",riskRewardRatio:"Ratio risque/rendement",abbrRiskRewardRatio:"R/R"},it:{cancel:"Annulla",closeButton:"Chiudi",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Compra",closeConfirmationSellButton:"Vendi",deleteButton:"Elimina",enable:"Attiva",enableDealingDialogTitle:"Trading dai grafici",enableDealing:'<p>Vuoi attivare la funzione trading dai grafici?</p><p>Attivando la funzione puoi fare le seguenti operazioni direttamente dai grafici:</p><ul class="bullet-list"><li>Aprire o chiudere una posizione</li><li>Modificare o cancellare un ordine in lavorazione</li><li>Aggiungere o modificare stop e limiti</li></ul><p>Puoi disabilitare la funzione trading dai grafici quando vuoi.</p><p>Prima di attivare questa funzione, ti invitiamo a leggere le &quot;Clausole e Condizioni del servizio di negoziazione di IG&quot; sul nostro sito web, in particolare la sezione &quot;Operazioni Elettroniche&quot;.</p>',noThanks:"No, grazie",settingsDialogTitle:"Impostazioni",tradeConfirmsLabel:"Conferma ogni ordine prima di processare la richiesta",tradeConfirmsWarningContent:'<p>Vuoi disattivare le conferme?</p><p>Eseguiremo immediatamente la tua richiesta quando:</p><ul class="bullet-list"><li>Apri o chiudi una posizione</li><li>Modifichi o cancelli un ordine in lavorazione</li><li>Aggiungi/modifichi stop e limiti</li></ul><p>Non avrai la possibilità di annullare l\'operazione.</p>',tradeConfirmsWarningConfirm:"Disattiva",unableToProcessDeal:"Siamo spiacenti, non è stato possibile eseguire il tuo ordine.",stopLevelInitial:"S",abbrStopLevelTrailing:"Trailing",abbrStopLevelGuaranteed:"Stop G",limitLevelInitial:"L",menuPositions:"Posizioni aperte",menuWorkingOrders:"Ordini di apertura",ticketCancel:"Annulla",ticketSubmit:"Conferma",positionTicketSubmit:"Inserisci ordine",limitOrderTicketSubmit:"Inserisci ordine limite",stopOrderTicketSubmit:"Inserisci ordine stop",openPositionDialogTitle:"Posizione aperta",workingOrderDialogTitle:"Ordine d'apertura",labelOrderLevel:"Prezzo",limitInvalid:"Inserire un livello limite maggiore di 0.",limitTooFar:"La distanza limite richiesta è troppo distante dall'attuale livello di mercato.",limitWrongSide:"Il limite inserito non è corretto",stopInvalid:"Inserire un valore dello stop maggiore di 0.",stopRequired:"Inserire una distanza stop",stopTooClose:"Inserire una distanza stop maggiore di {min}",stopTooFar:"La distanza stop richiesta è troppo distante dall'attuale livello di mercato.",stopWrongSide:"Lo stop inserito non è corretto",guaranteedStopMoveAway:"Il livello stop che hai richiesto e' vicino al livello di mercato. Quando il mercato e' chiuso ci si puo' solo allontanare dal livello di mercato attuale.",trailingStopTooFar:"Non si può inserire questo Livello Stop con un Trailing Stop. Il vostro Livello Stop deve essere più prossimo al Livello Corrente rispetto al (Stop Distance + Step).",openPositionRemoved:"Questa posizione è stata chiusa oppure non può essere modificata.",workingOrderMissingLevel:"Inserire un Livello.",workingOrderRemoved:"Questo ordine è già stato completato o cancellato e non può essere modificato.",workingOrderWrongDirection:"Il tipo di ordine scelto non e' valido in relazione alla direzione richiesta e al livello dell'ordine.",workingOrderTooFar:"Il livello dell'ordine richiesto è troppo distante dal livello corrente.",riskRewardRatio:"Relazione rischio-rendimento",abbrRiskRewardRatio:"R/R"},ja:{cancel:"キャンセル",closeButton:"閉じる",closeConfirmationButton:"OK",closeConfirmationBuyButton:"買い",closeConfirmationSellButton:"売り",deleteButton:"削除",enable:"有効化する",enableDealingDialogTitle:"チャート直接取引",enableDealing:'<p>チャート直接取引を有効にしますか？</p><p>チャート直接取引を有効にした場合、以下の取引を直接チャート上でおこなうことができます：</p><ul class="bullet-list"><li>ポジションの保有 / 清算</li><li>リーブオーダー（指値注文）の変更 / 削除</li><li>保有ポジションへのリミット注文 / ストップ注文の付加</li></ul><p>本サービスの設定はいつでも無効にすることができます。</p><p>本サービスをご利用される前に、オンライン取引約款－特に第8条の「電磁的取引」の条項を必ずお読みください。</p>',noThanks:"いいえ",settingsDialogTitle:"設定",tradeConfirmsLabel:"注文送信前に確認する",tradeConfirmsWarningContent:'<p>チャート直接取引を無効にしますか？</p><p>チャート直接取引を利用すれば、以下の取引をチャート上で素早く実行できます：</p><ul class="bullet-list"><li>ポジションの保有 / 清算</li><li>リーブオーダー（指値注文）の変更 / 削除</li><li>保有ポジションへのリミット注文 / ストップ注文の付加</li></ul><p>キャンセルすることができなくなります。</p>',tradeConfirmsWarningConfirm:"無効にする",unableToProcessDeal:"申し訳ございません。お客様の詳細情報を処理することができませんでした",stopLevelInitial:"S",abbrStopLevelTrailing:"T ストップ",abbrStopLevelGuaranteed:"G ストップ",limitLevelInitial:"L",menuPositions:"ポジション一覧",menuWorkingOrders:"未決オーダー",ticketCancel:"キャンセル",ticketSubmit:"送信",positionTicketSubmit:"注文送信",limitOrderTicketSubmit:"リミット注文送信",stopOrderTicketSubmit:"ストップ注文送信",openPositionDialogTitle:"ポジション一覧",workingOrderDialogTitle:"未決オーダー",labelOrderLevel:"注文水準",limitInvalid:"リミット水準は0よりも大きい必要があります。",limitTooFar:"お客様が選択したリミット値幅は現在のマーケット・レートから離れすぎています。",limitWrongSide:"注文タイプ（リミット※指値）が注文水準に対して有効ではありません。",stopInvalid:"ストップ水準は0よりも大きい必要があります。",stopRequired:"ストップ値幅をご入力ください",stopTooClose:"{min}ポイント以上のストップ値幅をご入力ください",stopTooFar:"お客様が選択したストップ値幅は現在のマーケット・レートから離れすぎています。",stopWrongSide:"注文タイプ（ストップ※逆指値）が注文水準に対して有効ではありません。",guaranteedStopMoveAway:"ご入力のストップレートはマーケットレートに近くなっております。該当する取引ペア・銘柄の取引終了後に注文レートを変更する場合、現在のマーケットレートから離れたレートへのみ変更可能です。",trailingStopTooFar:"このストップ水準では、トレーリングストップはご利用になれません。ストップ水準は現在のプライスから（ストップ値幅＋ステップ値）以内に設定して下さい。",openPositionRemoved:"注文タイプ（ストップ※逆指値）が注文水準に対して有効ではありません。",workingOrderMissingLevel:"アラート水準を入力して下さい。",workingOrderRemoved:"この注文は既に成立したか、削除されているため、変更できません。",workingOrderWrongDirection:"お客様の選択した売買の別・注文水準では、この注文タイプは選択できません。",workingOrderTooFar:"入力した注文レートは現在のレートから乖離し過ぎています。",riskRewardRatio:"リスクリワードレシオ",abbrRiskRewardRatio:"R/R"},nl:{cancel:"Annuleer",closeButton:"Sluit",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Koop",closeConfirmationSellButton:"Verkoop",deleteButton:"Verwijderen",enable:"Activeer handelen via grafieken",enableDealingDialogTitle:"Handelen via grafieken",enableDealing:'<p>Wilt u handelen met grafieken activeren?</p><p>Wanneer uw handelen met grafieken activeert, dan kunt u het onderstaande direct vanuit de grafiek doen:</p><ul class="bullet-list"><li>een positie openen of sluiten</li><li>een werkend order aanpassen of verwijderen</li><li>Stop en limieten toevoegen of aanpassen</li></ul><p>U kunt handelen vanuit de grafiek op elk gewenst moment uitschakelen.</p><p>Alvorens u deze dienst activeert lees dan onze klantenovereenkomst goed door. U kunt deze vinden bij de algemene voorwaarden op onze site. Let u hierbij vooral op de sectie &quot;Electronic Trading Services&quot;.</p>',noThanks:"Nee dank u",settingsDialogTitle:"Instellingen",tradeConfirmsLabel:"Iedere transactie bevestigen voordat deze wordt ingevoerd",tradeConfirmsWarningContent:'<p>Afsluiten bevestigen?</p><p>Wij behandelen uw verzoek meteen wanneer u:</p><ul class="bullet-list"><li>een positie wil openen of sluiten</li><li>een werkend order wilt aanpassen of verwijderen</li><li>een stop en limieten wilt toevoegen/ aanpassen</li></ul><p>U krijgt geen kans om  te annuleren</p>',tradeConfirmsWarningConfirm:"Afsluiten",unableToProcessDeal:"Het spijt ons, wij konden deze transactie niet uitvoeren.",stopLevelInitial:"S",abbrStopLevelTrailing:"T Stop",abbrStopLevelGuaranteed:"G Stop",limitLevelInitial:"L",menuPositions:"Open posities",menuWorkingOrders:"Werkende orders",ticketCancel:"Cancel",ticketSubmit:"Valideren",positionTicketSubmit:"Order plaatsen",limitOrderTicketSubmit:"Limiet order plaatsen",stopOrderTicketSubmit:"Stop order plaatsen",openPositionDialogTitle:"Open positie",workingOrderDialogTitle:"Werkend order",labelOrderLevel:"Orderniveau",limitInvalid:"Gelieve een limietniveau in te vullen van meer dan 0.",limitTooFar:"De limietafstand die u verzoekt ligt te ver van het huidig marktniveau.",limitWrongSide:"Het limietniveau staat aan de verkeerde kant van de huidige marktprijs.",stopInvalid:"Gelieve een stopwaarde in te vullen van meer dan 0.",stopRequired:"Vul een stopafstand in",stopTooClose:"Voer een stop afstand in groter dan {min}",stopTooFar:"De stopafstand die u verzoekt ligt te ver van het huidig marktniveau.",stopWrongSide:"Het stopniveau staat aan de verkeerde kant van de huidige marktprijs.",guaranteedStopMoveAway:"Het gekozen stopniveau ligt te dicht bij de markt. Wanneer de markt wordt gesloten dient u het order verder van het huidige marktniveau te bewegen.",trailingStopTooFar:"U kunt geen Stop Niveau invoeren met deze Trailing Stop. Uw Stop Niveau moet dichter bij het huidige niveau dan (Stop Afstand + Stap).",openPositionRemoved:"Deze positie is reeds gesloten en kan niet worden gewijzigd.",workingOrderMissingLevel:"Gelieve een niveau te kiezen.",workingOrderRemoved:"Deze order is al gevuld en kan niet meer gewijzigd of verwijderd worden.",workingOrderWrongDirection:"Het ordertype dat u koos is ongeldig in verhouding tot de verzochte richting en het orderniveau.",workingOrderTooFar:"De verzochte koers ligt te ver van de huidige koers.",riskRewardRatio:"Risk/Reward Ratio",abbrRiskRewardRatio:"R/R"},no:{cancel:"Kanseller",closeButton:"Steng",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Kjøp",closeConfirmationSellButton:"Selg",deleteButton:"Slett",enable:"Aktiver Trading",enableDealingDialogTitle:"Trading gjennom diagrammer",enableDealing:'<p>Aktivere handel gjennom diagrammer?</p><p>Med handel gjennom diagrammer aktivert, kan du gjøre følgende rett fra et diagram:</p><ul class="bullet-list"><li>Åpne eller lukke en posisjon</li><li>Endre eller slette en betingede ordre</li><li>Legge til/endre stops og limits</li></ul><p>Du kan deaktivere handel gjennom diagrammer når som helst.</p><p>Før du aktiverer denne tjenesten, vennligst les vår Kundeavtale, med særlig vekt på &quot;Elektroniske Transaksjoner&quot;. Den finner du under &quot;Vilkår og betingelser&quot; på vår hjemmeside.</p>',noThanks:"Nei takk",settingsDialogTitle:"Innstillinger",tradeConfirmsLabel:"Bekreft hver trade før du sender den inn",tradeConfirmsWarningContent:'<p>Slå av bekrefter?</p><p>Vi vil utføre din forespørsel umiddelbart når du:</p><ul class="bullet-list"><li>Åpner eller lukker en posisjon</li><li>Endrer eller sletter en betingede ordre</li><li>Legger til/endrer stops og limits</li></ul><p>Du vil ikke ha mulighet til å avbryte.</p>',tradeConfirmsWarningConfirm:"Slå av",unableToProcessDeal:"Beklager, men vi kunne ikke gjennomføre din handel.",stopLevelInitial:"S",abbrStopLevelTrailing:"T stop",abbrStopLevelGuaranteed:"G stop",limitLevelInitial:"L",menuPositions:"Åpne posisjoner",menuWorkingOrders:"Betingede ordre",ticketCancel:"Avbryt",ticketSubmit:"Send",positionTicketSubmit:"Plasser ordre",limitOrderTicketSubmit:"Plasser limit-ordre",stopOrderTicketSubmit:"Plasser stop-ordre",openPositionDialogTitle:"Åpen posisjon",workingOrderDialogTitle:"Betingede ordre",labelOrderLevel:"Ordrenivå",limitInvalid:"Vennligst fyll inn et limitnivå større enn null.",limitTooFar:"Limit-avstanden du har valgt er for langt fra gjeldende markedsnivå.",limitWrongSide:"Limitnivået er på feil side av den aktuelle markedskursen.",stopInvalid:"Vennligst velg en stop-verdi større enn null.",stopRequired:"Vennligst legg inn en stop-avstand",stopTooClose:"Vennligst legg inn en stop-avstand større enn {min}",stopTooFar:"Stop-avstanden du har valgt er for langt fra gjeldende markedsnivå.",stopWrongSide:"Stoppnivået er på feil side av den aktuelle markedskursen.",guaranteedStopMoveAway:"Stop-nivået du har forespurt er nærmere sist handlede kurs. Når markedet er stengt, kan du kun flytte orderen lenger bort fra sist handlede kurs.",trailingStopTooFar:"Du kan ikke velge dette stop nivået med trailing stop.",openPositionRemoved:"Denne posisjonen er allerede lukket og kan ikke endres.",workingOrderMissingLevel:"Vennligst velg et nivå.",workingOrderRemoved:"Denne ordren er allerede fyllt eller slettet og kan ikke lenger endres.",workingOrderWrongDirection:"Ordretypen du har valgt er ugyldig i forhold til valgt retning og ordrenivå.",workingOrderTooFar:"Valgt ordrenivå er for langt fra gjeldende nivå.",riskRewardRatio:"Risk/reward forhold",abbrRiskRewardRatio:"R/R"},pt:{cancel:"Cancelar",closeButton:"Fechar",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Comprar",closeConfirmationSellButton:"Vender",deleteButton:"Apagar",enable:"Ativar a negociação",enableDealingDialogTitle:"Negociar nos gráficos",enableDealing:'<p>Ativar a negociação através dos gráficos?</p><p>Com a negociação através dos gráficos ativada, pode realizar as seguintes ações diretamente a partir dos gráficos:</p><ul class="bullet-list"><li>Abrir e fechar uma posição</li><li>Editar ou eliminar uma ordem em execução</li><li>Adicionar ou editar stops e limits</li></ul><p>Pode desativar esta função a qualquer momento.</p><p>Antes de ativar este serviço, por favor, leia o nosso Contrato com Cliente, na página de Termos e Contratos no nosso site. Veja com especial atenção à seção de &quot;Transações eletrónicas&quot;. </p>',noThanks:"Não, obrigado(a)",settingsDialogTitle:"Preferências",tradeConfirmsLabel:"Confirmar antes de solicitar",tradeConfirmsWarningContent:'<p>Desativar as confirmações?</p><p>Sua solicitação será executada imediatamente ao:</p><ul class="bullet-list"><li>Abrir ou fechar uma posição</li><li>Editar ou eliminar uma ordem em execução</li><li>Adicionar/editar stops e limits</li></ul><p>Não será possível cancelar.</p>',tradeConfirmsWarningConfirm:"Desativar",unableToProcessDeal:"Desculpe, não foi possível processar a sua operação.",stopLevelInitial:"S",abbrStopLevelTrailing:"S Dinâmico",abbrStopLevelGuaranteed:"S Garantido",limitLevelInitial:"L",menuPositions:"Posições Abertas",menuWorkingOrders:"Ordens de Abertura",ticketCancel:"Cancelar",ticketSubmit:"Aceitar",positionTicketSubmit:"Realizar a operação",limitOrderTicketSubmit:"Colocar ordem limit",stopOrderTicketSubmit:"Colocar ordem stop",openPositionDialogTitle:"Posição Aberta",workingOrderDialogTitle:"Ordem de abertura",labelOrderLevel:"Nível de Ordem",limitInvalid:"O nível do limit introduzido deverá ser superior a zero.",limitTooFar:"A distância do limit que escolheu está demasiado afastada do nível actual do mercado.",limitWrongSide:"O nível de limite está na posição contraria ao preço atual de mercado.",stopInvalid:"O valor do stop deverá ser superior a zero.",stopRequired:"Introduza uma distância para o stop",stopTooClose:"Por favor, introduza uma distância para o stop superior a {min}",stopTooFar:"A distância do stop que escolheu está demasiado afastado do nível actual do mercado.",stopWrongSide:"O nível de stop está na posição contraria ao preço atual de mercado.",guaranteedStopMoveAway:"O stop que solicitou está mais perto do preço de Mercado. Quando o mercado está fechado só o poderá mover para mais longe e não mais perto do nível actual do mercado.",trailingStopTooFar:"Não poderá introduzir este nível de Stop para este nível de Stop Dinâmico. O seu Nível de Stop deverá ser mais próximo do nível actual que é (Distância ao Stop + Step).",openPositionRemoved:"Esta posição foi fechada e já não pode mudar.",workingOrderMissingLevel:"Escolha um Nível.",workingOrderRemoved:"Esta ordem já foi executada ou apagada e já não pode ser editada.",workingOrderWrongDirection:"O tipo de ordem escolhido é inválido, tendo em conta a Direcção e o Nível solicitados anteriormente.",workingOrderTooFar:"O nível de ordem solicitado está demasiado afastado do nível actual do mercado.",riskRewardRatio:"Rácio risco/retorno",abbrRiskRewardRatio:"R/R"},sv:{cancel:"Avbryt",closeButton:"Stäng",closeConfirmationButton:"OK",closeConfirmationBuyButton:"Köpa",closeConfirmationSellButton:"Sälja",deleteButton:"Radera",enable:"Aktivera handel",enableDealingDialogTitle:"Handel via diagram",enableDealing:'<p>Aktivera handel via diagram?</p><p>Om handel via diagram är aktiverad kan du göra allt av följande direkt från ett diagram:</p><ul class="bullet-list"><li>Öppna eller stänga en position</li><li>Redigera eller ta bort en order att öppna</li><li>Lägga till eller redigera stops och limits</li></ul><p>Du kan inaktivera handel via diagram när som helst.</p><p>Innan du aktiverar denna tjänst, vänligen läs igenom vårt Kundavtal som du hittar på vår webbplats under &quot;Avtal och Villkor&quot;. Titta särskilt på avsnittet &quot;Elektroniska Transaktioner&quot;.</p>',noThanks:"Nej tack",settingsDialogTitle:"Inställningar",tradeConfirmsLabel:"Bekräfta order innan positionen öppnas",tradeConfirmsWarningContent:'<p>Slå av bekräftelser?</p><p>Vi kommer att exekvera din begäran omedelbart om du:</p><ul class="bullet-list"><li>Öppnar eller stänger en position</li><li>Redigerar eller tar bort en order att öppna</li><li>Lägger till/redigerar stops och limits</li></ul><p>Du kommer inte att kunna avbryta din begäran.</p>',tradeConfirmsWarningConfirm:"Slå av",unableToProcessDeal:"Tyvärr kunde vi inte slutföra din transaktion.",stopLevelInitial:"S",abbrStopLevelTrailing:"D stopp",abbrStopLevelGuaranteed:"G stopp",limitLevelInitial:"L",menuPositions:"Öppna positioner",menuWorkingOrders:"Order att öppna",ticketCancel:"Avbryt",ticketSubmit:"Sänd",positionTicketSubmit:"Lägg order",limitOrderTicketSubmit:"Placera limit",stopOrderTicketSubmit:"Placera stopp",openPositionDialogTitle:"Öppen position",workingOrderDialogTitle:"Order att öppna",labelOrderLevel:"Ordernivå",limitInvalid:"Fyll i en storlek som är större än noll.",limitTooFar:"Limitdistansen du begärt är för långt ifrån den rådande marknadsnivån.",limitWrongSide:"Limitnivån är på fel sida av det aktuella marknadspriset.",stopInvalid:"Fyll i ett stoppvärde som är större än noll.",stopRequired:"Fyll i en stoppdistans",stopTooClose:"Vänligen fyll i en stoppdistans större än {min}",stopTooFar:"Stoppdistansen du begärt är för långt ifrån den rådande marknadsnivån.",stopWrongSide:"Stoppnivån är på fel sida av det aktuella marknadspriset.",guaranteedStopMoveAway:"Stoppnivån du har begärt är närmare marknaden. När marknaden är stängd kan du endast flytta ordern längre iväg från den rådande marknadsnivån.",trailingStopTooFar:"Du kan inte fylla i den här stoppnivån med det här dynamiska stoppet. Din stoppnivå måste vara närmare den rådande nivån än (stoppnivå + steg).",openPositionRemoved:"Den här positionen har redan stängts och kan inte ändras.",workingOrderMissingLevel:"Fyll i en nivå.",workingOrderRemoved:"Den här ordern har redan fyllts eller raderats och kan inte längre ändras.",workingOrderWrongDirection:"Ordertypen du valt är inte giltig för den begärda riktningen och ordernivån.",workingOrderTooFar:"Ordernivån du begärt är för långt ifrån den rådande nivån.",riskRewardRatio:"Risk/reward-relation",abbrRiskRewardRatio:"R/R"},zh:{cancel:"取消",closeButton:"关闭",closeConfirmationButton:"OK",closeConfirmationBuyButton:"买入",closeConfirmationSellButton:"卖出",deleteButton:"删除",enable:"激活交易",enableDealingDialogTitle:"图表交易",enableDealing:'<p>激活图表交易？</p><p>一旦激活图表交易，您将能够在图表上直接进行下列操作：</p><ul class="bullet-list"><li>开仓或平仓</li><li>编辑或删除未执行定单</li><li>添加/编辑止损及限价</li></ul><p>您可以随时关闭该功能。</p><p>在激活此功能前，请仔细阅读我们的《客户协议》（网站上“条款及细则”部分），需特别注意“电子交易”部分。</p>',noThanks:"取消",settingsDialogTitle:"设置",tradeConfirmsLabel:"请在提交前确认交易详情",tradeConfirmsWarningContent:'<p>关闭确认提示？</p><p>当您进行下列操作时：</p><ul class="bullet-list"><li>开仓或平仓</li><li>编辑或删除未执行定单</li><li>添加/编辑止损及限价</li></ul><p>我们将立即执行您的请求，您将没有机会取消操作。</p>',tradeConfirmsWarningConfirm:"关闭",unableToProcessDeal:"很抱歉，我们无法处理您的交易请求",stopLevelInitial:"S",abbrStopLevelTrailing:"追踪止损",abbrStopLevelGuaranteed:"保证止损",limitLevelInitial:"L",menuPositions:"已开启仓位",menuWorkingOrders:"开仓指令",ticketCancel:"取消",ticketSubmit:"提交",positionTicketSubmit:"下单交易",limitOrderTicketSubmit:"设置限价单",stopOrderTicketSubmit:"设置止损单",openPositionDialogTitle:"已开启仓位",workingOrderDialogTitle:"开仓指令",labelOrderLevel:"开仓价位",limitInvalid:"请输入一个大于零的限价水平。",limitTooFar:"您所要求的限价距离与当前的市场价格相距太远。",limitWrongSide:"限价价位与当前市价相悖。",stopInvalid:"请输入一个大于零的止损数值。",stopRequired:"请输入一个止损距离",stopTooClose:"请输入一个大于 {min} 的止损距离",stopTooFar:"您所要求的止损距离与当前的市场价格相距太远。",stopWrongSide:"止损价位与当前市价相悖。",guaranteedStopMoveAway:"您的限价委托订单价位与市场价位之距离正在缩小。在市场交易时间以外，您只能把该价位移开使远离市场价位。",trailingStopTooFar:"该跟踪停损不符合该停损价位水平",openPositionRemoved:"该仓位已平仓，无法修改。",workingOrderMissingLevel:"请输入一个水平。",workingOrderRemoved:"该定单已经被执行或删除，所以无法更改。",workingOrderWrongDirection:"鉴于您所要求的交易方向和定单价格，您所选择的指令类型无效。",workingOrderTooFar:"您所要求的指令价格距离当前价格太远。",riskRewardRatio:"风险回报率",abbrRiskRewardRatio:"风险回报率"},zh_TW:{cancel:"取消",closeButton:"关闭",closeConfirmationButton:"OK",closeConfirmationBuyButton:"买入",closeConfirmationSellButton:"卖出",deleteButton:"删除",enable:"啟動交易",enableDealingDialogTitle:"圖表交易",enableDealing:'<p>激活圖表交易？</p><p>一旦激活圖表交易，您將能夠在圖表上直接進行下列操作：</p><ul class="bullet-list"><li>開倉或平倉</li><li>編輯或刪除未執行定單</li><li>添加/編輯止損及限價</li></ul><p>您可以隨時關閉該功能。</p><p>在激活此功能前，請仔細閱讀我們的《客戶協議》（網站上“條款及細則”部分），需特別注意“電子交易”部分。</p>',noThanks:"取消",settingsDialogTitle:"設定",tradeConfirmsLabel:"請在提交前確認交易詳情",tradeConfirmsWarningContent:'<p>關閉確認提示？</p><p>當您進行下列操作時：</p><ul class="bullet-list"><li>開倉或平倉</li><li>編輯或刪除未執行定單</li><li>添加/編輯止損及限價</li></ul><p>我們將立即執行您的請求，您將沒有機會取消操作。</p>',tradeConfirmsWarningConfirm:"關閉",unableToProcessDeal:"很抱歉，我們無法處理您的交易請求",stopLevelInitial:"S",abbrStopLevelTrailing:"追蹤止損",abbrStopLevelGuaranteed:"保證止損",limitLevelInitial:"L",menuPositions:"已開啟倉位",
menuWorkingOrders:"開倉指令",ticketCancel:"取消",ticketSubmit:"提交",positionTicketSubmit:"下單交易",limitOrderTicketSubmit:"設置限價單",stopOrderTicketSubmit:"設置止損單",openPositionDialogTitle:"已開啟倉位",workingOrderDialogTitle:"开仓指令",labelOrderLevel:"開倉价位",limitInvalid:"請輸入一個大於零的限價水平。",limitTooFar:"您所要求的限價距離與當前的市場價格相距太遠。",limitWrongSide:"限價價位與當前市價相悖。",stopInvalid:"請輸入一個大於零的止損數值。",stopRequired:"請輸入一個止損距離",stopTooClose:"請輸入一個大於 {min} 的止損距離",stopTooFar:"您所要求的止損距離與當前的市場價格相距太遠。",stopWrongSide:"止損價位與當前市價相悖。",guaranteedStopMoveAway:"您的限價委託訂單價位與市場價位之距離正在縮小。在市場交易時間以外﹐您只能把該價位移開使遠離市場價位。",trailingStopTooFar:"該跟蹤止損不符合該止損价位水平",openPositionRemoved:"該倉位已平倉，無法修改。",workingOrderMissingLevel:"請輸入一個水平。",workingOrderRemoved:"該訂單已經被執行或刪除，所以無法更改。",workingOrderWrongDirection:"鑒於您所要求的交易方向和訂單價格，您所選擇的指令類型無效。",workingOrderTooFar:"您所要求的指令價格距離當前價格太遠。",riskRewardRatio:"風險回報率",abbrRiskRewardRatio:"風險回報率"}};return i.values(o).forEach((function(e){Object.keys(t.Errors.Reason).forEach((function(n){switch(n){case t.Errors.Reason.INVALID_LEVEL:e[n+"_LIMIT"]=e.limitInvalid,e[n+"_STOP"]=e.stopInvalid;break;case t.Errors.Reason.LIMIT_TOO_FAR:e[n]=e.limitTooFar;break;case t.Errors.Reason.LIMIT_WRONG_SIDE:e[n]=e.limitWrongSide;break;case t.Errors.Reason.STOP_REQUIRED:case t.Errors.Reason.STOP_REQUIRES_DISTANCE:case t.Errors.Reason.STOP_GUARANTEED_CAN_NOT_BE_REMOVED:e[n]=e.stopRequired;break;case t.Errors.Reason.STOP_TOO_CLOSE:e[n]=e.stopTooClose;break;case t.Errors.Reason.STOP_TOO_FAR:e[n]=e.stopTooFar;break;case t.Errors.Reason.STOP_WRONG_SIDE:e[n]=e.stopWrongSide;break;case t.Errors.Reason.STOP_LEVEL_BELOW_TRAILING:case t.Errors.Reason.TRAILING_STOP_TOO_FAR:e[n]=e.trailingStopTooFar;break;case t.Errors.Reason.STOP_GUARANTEED_MOVE_AWAY:e[n]=e.guaranteedStopMoveAway;break;case t.Errors.Reason.TRIGGER_LEVEL_REQUIRED:e[n]=e.workingOrderMissingLevel;break;case t.Errors.Reason.TRIGGER_LEVEL_TOO_HIGH:case t.Errors.Reason.TRIGGER_LEVEL_TOO_LOW:e[n]=e.workingOrderWrongDirection;break;case t.Errors.Reason.TRIGGER_LEVEL_TOO_FAR:e[n]=e.workingOrderTooFar;break;default:e[n]=e.unableToProcessDeal}}))})),new n(o)})),define("module/dealing-common/js/model/layouts/dealingdevicespecific",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class","module/core/js/serviceclient/settingsclient","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i){this.deviceId=o.getServerDeviceId(),t.superclass.constructor.call(this,e,n,i),null===this.dealingEnabled&&this._options.isDealingActivatedByDefault&&(this.dealingEnabled=!0),null===this.tradeConfirms&&(this.tradeConfirms=void 0===this._options.isTradeConfirmsOnByDefault||this._options.isTradeConfirmsOnByDefault)}var n=e("module/core/js/model/layouts/abstractlayoutmodule"),i=e("module/core/js/util/class"),o=e("module/core/js/serviceclient/settingsclient"),r=e("module/core/js/util/object"),s=Object.freeze(["dealingEnabled","tradeConfirms"]);i.extend(t,n);var a=t.prototype;return a.deviceId=null,a.dealingEnabled=null,a.tradeConfirms=null,a.fromJSON=function(e){"string"==typeof e.deviceId&&(this.deviceId=e.deviceId),void 0!==e.dealingEnabled&&void 0===e.tradeConfirms&&(e.tradeConfirms=!0),s.forEach((function(t){r.isDefined(e[t])&&(this[t]=!!e[t])}),this)},a.toJSON=function(){var e={deviceId:this.deviceId};return s.forEach((function(t){this[t]!==a[t]&&(e[t]=this[t])}),this),e},Object.seal(a),Object.seal(t)})),define("module/dealing-common/js/model/layouts/dealinglayoutmodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/array","module/core/js/util/class","module/dealing-common/js/model/layouts/dealingdevicespecific","module/core/js/util/functional","module/core/js/serviceclient/settingsclient","module/core/js/util/object"],(function(e){"use strict";function t(e,t,n){return new a(n,e,t)}function n(e){return!!(e in i.PROPERTY_MAP)}function i(e,t,n){this._deviceSpecific=[],i.superclass.constructor.call(this,e,t,n)}var o=e("module/core/js/model/layouts/abstractlayoutmodule"),r=e("module/core/js/util/array"),s=e("module/core/js/util/class"),a=e("module/dealing-common/js/model/layouts/dealingdevicespecific"),l=e("module/core/js/util/functional"),u=e("module/core/js/serviceclient/settingsclient"),c=e("module/core/js/util/object");s.extend(i,o),i.SETTINGS_MODULE_NAME="tradingModule",i.MAX_DEVICE_SPECIFIC_SETTINGS=100,i.PROPERTY_MAP=Object.freeze({openPositionsVisible:"isOpenPositionEnabled",workingOrdersVisible:"isWorkingOrdersEnabled",confirmationEnabled:"isConfirmationOn",validationEnabled:"isValidationOn"});var d=i.prototype;return d.confirmationEnabled=!0,d.openPositionsVisible=!0,d.workingOrdersVisible=!0,d.validationEnabled=!1,d._deviceSpecific=null,d._currentDeviceSettings=null,d.getDeviceSpecificSettings=function(){if(this._currentDeviceSettings)return this._currentDeviceSettings;var e=u.getServerDeviceId(),t=r.find(this._deviceSpecific,(function(t){return t.deviceId===e}));return t||(t=new a(void 0,this._eventBus,this._options)),this._currentDeviceSettings=t,t},d.setDeviceSpecificSettings=function(e){e instanceof a||(e=new a(e)),this._deviceSpecific=this._deviceSpecific.filter((function(t){return t.deviceId!==e.deviceId})),this._currentDeviceSettings=e,this._deviceSpecific.push(e),this._deviceSpecific.splice(0,this._deviceSpecific.length-i.MAX_DEVICE_SPECIFIC_SETTINGS)},d.fromJSON=function(e){var n,o=i.PROPERTY_MAP;for(n in o)c.isDefined(e[o[n]])&&(this[n]=!!e[o[n]]);c.isDefined(e.deviceSpecific)&&(this._deviceSpecific=e.deviceSpecific.map(t.bind(null,this._eventBus,this._options)))},d.toJSON=function(){var e,t=this._deviceSpecific.filter(l.invoker("isModified")),n=i.PROPERTY_MAP,o={};for(e in n)o[n[e]]=this[e];return t.length&&(o.deviceSpecific=t),o},d.isModified=function(){return Object.keys(this).some(n)||this._deviceSpecific.some(l.invoker("isModified"))},Object.seal(d),Object.seal(i)})),define("module/dealing-preview/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{menuOption:"Positionvorschau"},en:{menuOption:"Position Preview"},es:{menuOption:"Vista previa de posición"},fr:{menuOption:"Aperçu de la position"},it:{menuOption:"Anteprima della posizione"},ja:{menuOption:"取引内容のプレビュー"},nl:{menuOption:"Positie voorbeeldweergave"},no:{menuOption:"Forhåndsvisning av posisjon"},pt:{menuOption:"Visualização da posição"},sv:{menuOption:"Översikt av position"},zh:{menuOption:"仓位预览"},zh_TW:{menuOption:"倉位預覽"}})})),define("module/dealing-preview/js/model/layouts/positionpreviewmodule",["require","lodash","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("lodash"),i=e("module/core/js/model/layouts/abstractlayoutmodule");e("module/core/js/util/class").extend(t,i),t.SETTINGS_MODULE_NAME="positionPreviewModule";var o=t.prototype;return o.isVisible=!0,o.fromJSON=function(e){n.has(e,"isVisible")&&(this.isVisible=e.isVisible)},o.toJSON=function(){return n.has(this,"isVisible")?{isVisible:this.isVisible}:{}},o.isModified=function(){return n.has(this,"isVisible")},Object.seal(o),Object.seal(t)})),define("module/core/js/tracker/charttracker",["require","module/core/js/util/functional","module/core/js/util/object","module/core/js/tracker/enum/schema","module/core/js/tracker/tracker"],(function(e){"use strict";function t(e){this._eventBus=e,this._chartAttributes={schema:o.CHART_ATTRIBUTES},this._eventBus.subscribe("tracker/chartAttributes",this._handleChartAttributes,this),this._eventBus.subscribe("tracker/chart",this._handleChartEvent,this),this._eventBus.subscribe("tracker/dealing",this._handleDealEvent,this),this._eventBus.subscribe("tracker/dealing/confirmOrReject",r.trackEvent,r),this._eventBus.subscribe("tracker/latency",r.trackEvent,r)}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/object"),o=e("module/core/js/tracker/enum/schema"),r=e("module/core/js/tracker/tracker");t.SOURCES={HOTKEY:"HOTKEY"};var s=t.prototype;return s._eventBus=null,s._referrer="CHART",s._chartAttributes=null,s.setReferrer=n.setter("_referrer"),s.destroy=function(){this._eventBus.unsubscribeAll(this)},s._handleChartAttributes=function(e){var t,n;for(t in e)n=e[t],void 0!==n?this._chartAttributes[t]=n:delete this._chartAttributes[t]},s._handleDealEvent=function(e){var t=i.deepCopyLiteral({},e);t.attributes.referrer=this._referrer,r.trackEvent(t)},s._handleChartEvent=function(e){var t={};t.chartAttributes=i.deepCopyLiteral({},this._chartAttributes),i.applyTo(t,e),r.trackEvent(t)},Object.seal(s),Object.seal(t)})),define("module/menu-common/js/trackeractions",["require","module/core/js/tracker/charttracker","module/core/js/tracker/enum/schema"],(function(e){"use strict";var t=e("module/core/js/tracker/charttracker"),n=e("module/core/js/tracker/enum/schema"),i={};return i.toggleVisibility=function(e,t,i){return{schema:n.CHECKBOX_ACTION,elementId:"MENU_VISIBILITY_"+e.id.toUpperCase().replace("_VISIBILITY",""),elementParentId:i,elementGroup:"MENU_VISIBILITY",elementValue:e.id.toUpperCase().replace("_VISIBILITY",""),elementType:"BUTTON",actionType:"PRESS",isSelected:t}},i.ACTION_ORIGINS=Object.freeze({HOTKEY:t.SOURCES.HOTKEY}),Object.seal(i)})),define("module/menu-common/js/controller/visibilitymenu",["require","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/dealing-positions-and-orders/js/i18n","module/dealing-common/js/model/layouts/dealinglayoutmodule","module/dealing-preview/js/i18n","module/core/js/enum/hotkeyenum","module/menu-common/js/controller/menucontroller","module/menu-common/js/menu/menuevents","module/menu-common/js/i18n","module/overview/js/model/layouts/overviewvisibilitymodule","module/dealing-preview/js/model/layouts/positionpreviewmodule","module/core/js/settings/settingsevents","module/menu-common/js/trackeractions"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.call(this,e,n,i,o,a),this.withModel(this._generateModel(!0))}var n=e("module/menu-common/js/actionlistener/callbackactionlistener"),i=e("module/core/js/util/class"),o=e("module/dealing-positions-and-orders/js/i18n"),r=e("module/dealing-common/js/model/layouts/dealinglayoutmodule"),s=e("module/dealing-preview/js/i18n"),a=e("module/core/js/enum/hotkeyenum"),l=e("module/menu-common/js/controller/menucontroller"),u=e("module/menu-common/js/menu/menuevents"),c=e("module/menu-common/js/i18n"),d=e("module/overview/js/model/layouts/overviewvisibilitymodule"),h=e("module/dealing-preview/js/model/layouts/positionpreviewmodule"),p=e("module/core/js/settings/settingsevents"),m=e("module/menu-common/js/trackeractions");i.extend(t,l),t.POSITIONS="POSITIONS_VISIBILITY",t.WORKING_ORDERS="WORKING_ORDERS_VISIBILITY",t.POSITION_PREVIEW="POSITION_PREVIEW_VISIBILITY",t.ANNOTATIONS="ANNOTATIONS_VISIBILITY",t.OVERVIEW="OVERVIEW_VISIBILITY",t.INDICATORS="INDICATORS_VISIBILITY",t.HIGHLOW_STATS="HIGHLOW_STATS_VISIBILITY",t.CURRENT_PRICE_LINE="CURRENT_PRICE_LINE_VISIBILITY",t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)};var f=t.prototype;return f.id="visibility",f._whenViewIsReady=function(){this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfo,this),this._settingsManager.on(p.LAYOUT_SETTINGS_CHANGED,this._handleSettingsChanged,this),this._settingsManager.on(p.GLOBAL_SETTINGS_CHANGED,this._handleGlobalSettingsChanged,this),this._handleSettingsChanged(),this._handleGlobalSettingsChanged()},f._destroyDom=function(){t.superclass._destroyDom.call(this),this._eventBus.unsubscribeAll(this),this._settingsManager.un(null,this)},f._generateModel=function(e){var i=new n(this._eventBus,this._toggleVisibility.bind(this)),r=[{actionListener:i,data:{id:t.ANNOTATIONS},label:c.get("annotations"),isSelected:this._settingsManager.getAnnotationVisibilitySettings(),isPersistent:!0},{actionListener:i,data:{id:t.INDICATORS},label:c.get("indicators"),isSelected:this._settingsManager.getIndicatorsVisibilitySettings(),isPersistent:!0}];return!e&&this._dealingSettingsAvailable()&&r.push({actionListener:i,data:{id:t.POSITIONS},isSelected:this._settingsManager.getDealingOpenPositionsVisibility(),label:o.get("menuPositions"),shortcut:a.keyName(a.P),isPersistent:!0},{actionListener:i,data:{id:t.WORKING_ORDERS},isSelected:this._settingsManager.getDealingWorkingOrdersVisibility(),label:o.get("menuWorkingOrders"),shortcut:a.keyName(a.O),isPersistent:!0}),this._settingsManager.getGlobalSettings(h.SETTINGS_MODULE_NAME)&&r.push({actionListener:i,data:{id:t.POSITION_PREVIEW},isSelected:this._settingsManager.getPositionPreviewVisibilitySettings(),label:s.get("menuOption"),isPersistent:!0}),this._settingsManager.getTemplateSettings(d.SETTINGS_MODULE_NAME)&&r.push({actionListener:i,data:{id:t.OVERVIEW},label:c.get("overview"),shortcut:a.keyName(a.T),isSelected:this._settingsManager.getOverviewVisibilitySettings(),isPersistent:!0,visibleByDefault:!1}),r.push({actionListener:i,data:{id:t.HIGHLOW_STATS},label:c.get("highlowstats"),isSelected:this._settingsManager.getHighLowStatsVisibilitySettings(),isPersistent:!0}),r.push({actionListener:i,data:{id:t.CURRENT_PRICE_LINE},label:c.get("priceline"),isSelected:this._settingsManager.getCurrentPriceLineVisibilitySettings(),isPersistent:!0}),r},f._updateVisibilitySettings=function(e,n){e.id===t.POSITIONS?this._settingsManager.putDealingOpenPositionsVisibility(n,!0):e.id===t.WORKING_ORDERS?this._settingsManager.putDealingWorkingOrdersVisibility(n,!0):e.id===t.ANNOTATIONS?this._settingsManager.putAnnotationVisibilitySettings(n,!0):e.id===t.INDICATORS?this._settingsManager.putIndicatorsVisibilitySettings(n,!0):e.id===t.OVERVIEW?this._settingsManager.putOverviewVisibilitySettings(n,!0):e.id===t.HIGHLOW_STATS?this._settingsManager.putHighLowStatsVisibilitySettings(n,!0):e.id===t.CURRENT_PRICE_LINE?this._settingsManager.putCurrentPriceLineVisibilitySettings(n,!0):e.id===t.POSITION_PREVIEW&&this._settingsManager.putPositionPreviewVisibilitySettings(n,!0)},f._toggleVisibility=function(e,t,n,i){this._sendToTracker(m.toggleVisibility(e,t,i)),this._updateVisibilitySettings(e,t),this._updateModelSelectedState(e.id,t)},f._handleInstrumentInfo=function(e){this.withModel(this._generateModel(e.isDelayed))},f._dealingSettingsAvailable=function(){return!!this._settingsManager.getGlobalSettings(r.SETTINGS_MODULE_NAME)},f._handleGlobalSettingsChanged=function(){var e;this._dealingSettingsAvailable()&&(this._handleVisibilityToggle(t.POSITIONS,this._settingsManager.getDealingOpenPositionsVisibility()),this._handleVisibilityToggle(t.WORKING_ORDERS,this._settingsManager.getDealingWorkingOrdersVisibility())),e=this._settingsManager.getGlobalSettings(h.SETTINGS_MODULE_NAME),e&&this._handleVisibilityToggle(t.POSITION_PREVIEW,e.isVisible),this.fire(u.CHANGED)},f._handleSettingsChanged=function(){this._handleVisibilityToggle(t.ANNOTATIONS,this._settingsManager.getAnnotationVisibilitySettings()),this._handleVisibilityToggle(t.INDICATORS,this._settingsManager.getIndicatorsVisibilitySettings()),this._handleVisibilityToggle(t.HIGHLOW_STATS,this._settingsManager.getHighLowStatsVisibilitySettings()),this._handleVisibilityToggle(t.CURRENT_PRICE_LINE,this._settingsManager.getCurrentPriceLineVisibilitySettings()),this._settingsManager.getTemplateSettings("overviewChartModule")&&this._handleVisibilityToggle(t.OVERVIEW,this._settingsManager.getOverviewVisibilitySettings()),this.fire(u.CHANGED)},f._handleVisibilityToggle=function(e,t){t?this._view.selectItem(e):this._view.deselectItem(e),this._updateModelSelectedState(e,t)},Object.seal(f),Object.seal(t)})),define("module/highlowstats/js/highlowstats",["require","module/core/js/util/class","module/core/js/util/functional","module/highlowstats/js/enum/highlowstatsenum","module/core/js/model/layouts/highlowstatsvisibilitymodule","module/core/js/model/resolutionsenum","module/core/js/settings/settingsevents","module/highlowstats/js/config/subviewsconfig","module/highlowstats/js/serviceclient/streamingdaystatsclient","module/core/js/event/subscribable","module/menu-common/js/controller/visibilitymenu"],(function(e){"use strict";function t(e,t,n,i,o){this._eventBus=e,this._options=t,this._settingsManager=o}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/highlowstats/js/enum/highlowstatsenum"),r=e("module/core/js/model/layouts/highlowstatsvisibilitymodule"),s=e("module/core/js/model/resolutionsenum"),a=e("module/core/js/settings/settingsevents"),l=e("module/highlowstats/js/config/subviewsconfig"),u=e("module/highlowstats/js/serviceclient/streamingdaystatsclient"),c=e("module/core/js/event/subscribable"),d=e("module/menu-common/js/controller/visibilitymenu");n.extend(t,c),t.settingsParsers=Object.freeze({template:{moduleName:r.SETTINGS_MODULE_NAME,parserClass:r}});var h=t.prototype;return h._chartView=null,h._eventBus=null,h._options=null,h._streamingDayStatsClient=null,h._instrumentResolutionInfo=null,h._instrumentInfo=null,h._currentEpic=null,h._isVisible=!1,h._instrumentModel=null,h.areDailyStatsAvailable=i.getter("_options","dailyStats"),h.areVisibleRangeStatsAvailable=i.getter("_options","visibleStats"),h.init=function(){this._settingsManager.on(a.LAYOUT_SETTINGS_CHANGED,this._handleSettingsLoaded,this),this._options.dailyStats?(this._streamingDayStatsClient=u.create(this._eventBus),this._eventBus.subscribe("chart/resolution/changed",this._handleResolutionChanged,this),this._eventBus.subscribe("chart/resolution/info",this._handleResolutionInfoChanged,this),this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfo,this),this._eventBus.subscribe("chart/instrument/destroy",this._handleStreamingStop,this)):this._eventBus.subscribe("chart/resolution/changed",this._handleResolutionChanged,this),this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._eventBus.publish("subViews/config",["highLowStats",l(this._options)]),this._chartView&&(this._chartView.addRenderersBySubviewConfig(l(this._options)),this._setMenuItemVisibility(!0)),this._handleSettingsLoaded()},h.destroy=function(){this._eventBus.publish("subViews/removeConfig",["highLowStats"]),this._chartView&&this._chartView.removeRenderersBySubviewConfig(l(this._options)),this._setVisibility(!1),this._setMenuItemVisibility(!1),this._streamingDayStatsClient&&this._streamingDayStatsClient.destroy(),this._instrumentInfo=this._currentEpic=this._instrumentResolutionInfo=this._instrumentModel=null,this._settingsManager.un(a.LAYOUT_SETTINGS_CHANGED,this),this._eventBus.unsubscribeAll(this)},h._handleChartViewReady=function(e){this._chartView=e,this._setMenuItemVisibility(!0)},h._handleResolutionChanged=function(e){var t=e.instrumentModel;this._instrumentModel!==t&&(this._eventBus.publish("chart/pricetype/changed",[t.getPriceType(),t.isLtpAvailable()]),this._instrumentModel=t)},h._handleResolutionInfoChanged=function(e){this._instrumentResolutionInfo=e,this._startStreamer()},h._handleInstrumentInfo=function(e){this._currentEpic=e.epic,this._instrumentInfo=e,this._startStreamer()},h._handleStreamingStop=function(){this._streamingDayStatsClient.stopListening(),this._instrumentInfo=this._currentEpic=this._instrumentResolutionInfo=null},h._startStreamer=function(){var e;this._currentEpic&&this._instrumentResolutionInfo&&this._instrumentInfo&&(this._streamingDayStatsClient.stopListening(),e=this._instrumentModel.getActiveInstrumentResolution().resolution.id===s.values.DAY.id?this._instrumentModel.getActiveInstrumentResolution().streamingClient:null,this._streamingDayStatsClient.startListening(this._currentEpic,this._instrumentResolutionInfo,this._instrumentInfo,e,this._handleNewStats.bind(this)))},h._handleSettingsLoaded=function(){this._setVisibility(this._settingsManager.getHighLowStatsVisibilitySettings())},h._setMenuItemVisibility=function(e){this._eventBus.publish("menu/item/switch",[d.HIGHLOW_STATS,e])},h._setVisibility=function(e){this._isVisible!==e&&(this._isVisible=e,this.fire(o.VISIBILITY_CHANGED,e),this._options.dailyStats&&(e?this._startStreamer():this._streamingDayStatsClient.stopListening()))},h._handleNewStats=i.bubbler(o.DAILY_STATS_UPDATED),Object.seal(t.prototype),Object.seal(t)})),define("module/core/js/indicator/baseindicator",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/event/subscribable"],(function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/event/subscribable");n.extend(t,o);var r=t.prototype;return r._stylesMapping=null,r.withStylesMapping=i.setter("_stylesMapping"),r.getStylesMapping=i.getter("_stylesMapping"),r.withVisibilitySettings=i.setter("_visibilitySettings"),r.getVisibilitySettings=i.getter("_visibilitySettings"),Object.seal(r),Object.seal(t)})),define("module/core/js/indicator/indicator",["require","module/core/js/indicator/baseindicator","module/core/js/indicator/rendererchooser/abstractrendererchooser","module/indicators/js/availability/baseindicatoravailability","module/core/js/util/class","module/core/js/util/functional","module/core/js/indicator/input/indicatorinput","module/core/js/model/instrumentresolutionevents","module/core/js/util/object","module/core/js/model/visibledaterangeevents"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this),this.name=e,this.outputPointTypes=[],this.studyName=n,this._calculatorArguments=[]}var n=e("module/core/js/indicator/baseindicator"),i=e("module/core/js/indicator/rendererchooser/abstractrendererchooser"),o=e("module/indicators/js/availability/baseindicatoravailability"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/indicator/input/indicatorinput"),l=e("module/core/js/model/instrumentresolutionevents"),u=e("module/core/js/util/object"),c=e("module/core/js/model/visibledaterangeevents");r.extend(t,n),t.getModifiableSettings=function(e){var t=u.deepCopyLiteral({},e);return u.deleteProperties(t,["preferredHeight"])};var d=t.prototype;return t.create=function(e,n){return new t(e,n)},t.AVAILABILITY_CHANGED="availabilityChanged",t.RENDERERS_CHANGED="renderersChanged",t.LABEL_CHANGED="labelChanged",t.DEFAULT_SHORT_LABEL="short",d.name=null,d.shortLabelType=t.DEFAULT_SHORT_LABEL,d.nameLabelType=null,d._labelTypes=null,d.epic=null,d.resolution=null,d._indicatorAvailability=null,d._resolutionChooser=null,d.studyName=null,d._input=null,d._visibleDateRange=null,d._calculator=null,d._calculatorArguments=null,d._settings=null,d._rendererChooser=null,d._shownOnTooltip=!0,d._tooltipSettings=null,d._initialOutput=!0,d.outputPointType=null,d.outputPointTypes=null,d._settingsConstraints=null,d._instrumentResolution=null,d._chartModel=null,d.withIndicatorAvailability=s.setter("_indicatorAvailability"),d.isAvailable=s.delegate("_indicatorAvailability","isAvailable"),d.getUnavailabilityReason=s.delegate("_indicatorAvailability","getUnavailabilityReason"),d.activateAvailability=function(){this._indicatorAvailability.initialiseIfNeeded(),this._indicatorAvailability.on(o.CHANGED,this._handleAvailabilityChanged,this)},d._handleAvailabilityChanged=function(){this.fire(t.AVAILABILITY_CHANGED,this),this.isAvailable()&&this.fireRenderersChanged()},d.deactivateAvailability=function(){this._indicatorAvailability.un(null,this),this._indicatorAvailability.destroy()},d.withOutputPointType=function(e){return this.outputPointTypes=[e],this.outputPointType=e,this},d.getInputs=function(){return[this._input]},d.withInput=s.setter("_input"),d.withCalculator=s.setter("_calculator"),d.withCalculatorArguments=s.setter("_calculatorArguments"),d.getCalculatorArguments=s.getter("_calculatorArguments"),d.withResolutionChooser=s.setter("_resolutionChooser"),d.withSettings=s.setter("_settings"),d.getSettings=function(){return u.deepCopyLiteral({},this._settings)},d.withTooltipSettings=s.setter("_tooltipSettings"),d.getTooltipSettings=s.getter("_tooltipSettings"),d.withSettingsConstraints=s.setter("_settingsConstraints"),d.getSettingsConstraints=s.getter("_settingsConstraints"),d.withRendererChooser=s.setter("_rendererChooser"),d.withShownOnTooltip=s.setter("_shownOnTooltip"),d.isOutputShownOnTooltip=s.getter("_shownOnTooltip"),d.hasPreferredHeight=function(){return!(!this._settings||!this._settings.preferredHeight)},d.getPreferredHeight=function(){return this.hasPreferredHeight()?this._settings.preferredHeight:0},d.setPreferredHeight=function(e){return this._settings.preferredHeight=e,this},d.getCurrentRendererNames=function(){return this._rendererChooser.getCurrentRendererNames()},d.setEpic=s.setter("epic"),d.setResolution=function(e){this._indicatorAvailability.withResolution(e),this.resolution=this._resolutionChooser.chooseResolution(this._settings,e)},d.startCalculating=function(e,t,n){this._startNotifyingRendererChanges(e),this._startRequestingPoints(t),this._startCalculatingPointsForVisibleBlocks(n)},d.stopCalculating=function(){this._stopCalculatingPointsForVisibleBlocks(),this._stopRequestingPoints(),this._stopNotifyingRendererChanges()},d.withLabelTypes=s.setter("_labelTypes"),d._startRequestingPoints=function(e){this.shortLabelType=t.DEFAULT_SHORT_LABEL,this.nameLabelType=null,this._instrumentResolution=e,this._input.startRequestingPointsVia(this._instrumentResolution),this._input.on(a.INDICATOR_INPUT,this._handleNewInput,this),this._instrumentResolution.info?this._handleInstrumentInfo():this._instrumentResolution.on(l.INFO_LOADED,this._handleInstrumentInfo,this,{once:!0})},d._stopRequestingPoints=function(){this._input.un(null,this),this._instrumentResolution&&(this._input.stopRequestingPointsVia(this._instrumentResolution),this._instrumentResolution.un(null,this),this._instrumentResolution.hasBlocksLoaded()&&this._instrumentResolution.removeIndicatorPoints(this))},d._handleInstrumentInfo=function(){var e=this._instrumentResolution.instrumentModel.info.instrumentType;this._labelTypes&&this._labelTypes[e]&&(this.shortLabelType=this._labelTypes[e],this.nameLabelType=this._labelTypes[e],this.fire(t.LABEL_CHANGED)),this._calculator.isDisplaced&&(this._calculator.withDisplacementIterator(this._instrumentResolution.resolution.getTimezoneOffsetIterator()),this._calculator.withConsolidationTimezoneOffset(this._instrumentResolution.info.getConsolidationTimezoneOffset()))},d._startCalculatingPointsForVisibleBlocks=function(e){this._visibleDateRange=e,this._input.collatePointsForBlocks(this._visibleDateRange.getVisibleBlocks(this.epic,this.resolution)),e.on(c.VISIBLE_BLOCKS_CHANGED,this._handleVisibleBlocksChanged,this)},d._stopCalculatingPointsForVisibleBlocks=function(){this._visibleDateRange&&this._visibleDateRange.un(null,this)},d._startNotifyingRendererChanges=function(e){this._chartModel=e,this._rendererChooser.on(i.CHOICE_CHANGED,this.fireRenderersChanged,this),this._rendererChooser.startNotifyingRendererChanges(this._chartModel)},d._stopNotifyingRendererChanges=function(){this._rendererChooser.stopNotifyingRendererChanges(this._chartModel),this._rendererChooser.un(null,this)},d._handleVisibleBlocksChanged=function(){var e=this._visibleDateRange.getVisibleBlocks(this.epic,this.resolution);this._input.collatePointsForBlocks(e)},d._handleNewInput=function(e,t){var n=this._instrumentResolution.blocks[0],i=!(!e[0]||!e[0].date)&&(e[0].accTime>=n.accStart&&e[0].accTime<=n.accEnd),o=this._calculator.calculatePoints(e,this._calculatorArguments,t,i);this._instrumentResolution.addIndicatorPoints(this.outputPointType,o,t,this._calculator.isDisplaced,this._initialOutput),this._initialOutput=!1},d.fireRenderersChanged=s.bubbler(t.RENDERERS_CHANGED),Object.seal(d),Object.seal(t)})),define("module/indicator-labels/js/view/indicatorlabelrendererhelper",["require","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/indicator/indicator","module/indicators/js/i18n","module/core/js/util/svg","module/core/js/enum/zindexenum","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/util/css","text!module/core/svg/icon-close.svg"],(function(e){"use strict";function t(e,t,n){this.name=e.name,this._eventBus=t,this._captureZoneManager=n,this.withIndicator(e)}function n(e,t,n){e.append("svg:tspan").text(n).classed("setting",!0).classed(t,!0)}var i=e("module/core/js/view/userinput/eventpropagation"),o=e("module/core/js/util/functional"),r=e("module/core/js/indicator/indicator"),s=e("module/indicators/js/i18n"),a=e("module/core/js/util/svg"),l=e("module/core/js/enum/zindexenum"),u=e("module/core/js/view/userinput/hovergesturerecogniser"),c=e("module/core/js/util/css"),d=e("text!module/core/svg/icon-close.svg");t.create=function(e,n,i){return new t(e,n,i)};var h=t.prototype;return h.name=null,h._captureZoneManager=null,h._dCloseIcon=null,h._dContainer=null,h._dLabelBackground=null,h._dLabelGroup=null,h._dLabelText=null,h._eventBus=null,h._indicator=null,h._position=Object.freeze({x:0,y:0}),h._removeCaptureZone=null,h._settingsCaptureZone=null,h._size=Object.freeze({width:0,height:0}),h._visible=!0,h.getPosition=o.getter("_position"),h.getSize=o.getter("_size"),h.withContainer=o.setter("_dContainer"),h.withIndicator=function(e){return this._indicator!==e&&(this._indicator&&this._indicator.un(null,this),this._indicator=e,this._indicator.on(r.LABEL_CHANGED,this._handleLabelChanged,this),this._indicator.on(r.AVAILABILITY_CHANGED,this._handleAvailabilityChanged,this)),this},h._handleAvailabilityChanged=function(){this.updateSettings(),this.resizeLabel(),this.updateCaptureZone()},h.isVisible=o.getter("_visible"),h.destroy=function(){this._settingsCaptureZone.destroy(),this._removeCaptureZone.destroy(),this._dLabelGroup.remove(),this._dLabelBackground=null,this._dLabelGroup=null,this._dLabelText=null,this._indicator&&(this._indicator.un(null,this),this._indicator=null)},h.initDom=function(){return this._dLabelGroup=this._dContainer.append("svg:g").classed("indicatorLabel",!0).classed(this.name,!0),this._dLabelBackground=this._dLabelGroup.append("svg:rect").classed("background",!0).attr("rx",2).attr("ry",2),this._createTextElements(),this._dCloseIcon=this._dLabelGroup.svgFromString(d).classed("closeIcon",!0).attr({width:8,height:8}),this._initCaptureZones(),this},h.positionLabel=function(e,t){return this._position=Object.freeze({x:e,y:t}),this._dLabelGroup.attr("transform",a.svgTranslateAttrXY(e,t)),this},h.resizeLabel=function(){var e=this._resizeTextElements(),t=e.width+64,n=e.height+7;return this._dLabelBackground.attr({x:4,y:5,width:t,height:n}),this._dCloseIcon.attr({x:4+t-8-8,y:5+(n-8)/2}),this._size=Object.freeze({width:t,height:n}),this},h.updateCaptureZone=function(){return this._settingsCaptureZone.setDimensionsBasedOnElement(this._dLabelBackground),this._removeCaptureZone.setDimensionsBasedOnElement(this._dCloseIcon),this},h.updateSettings=function(){var e,t=this._indicator.isAvailable(),i=this._indicator.getSettings(),o=this._indicator.getSettingsConstraints();if(this._dLabelText.selectAll(".setting").remove(),null===t)return this;if(t)for(e in r.getModifiableSettings(i))this._shouldDisplayLabel(i,e)&&n(this._dLabelText,e,o[e].getTextForValue(i[e]));else n(this._dLabelText,"unavailable",this._indicator.getUnavailabilityReason());return this},h._shouldDisplayLabel=function(e,t){return!isNaN(e[t])&&this._isLabelVisible(t)},h._isLabelVisible=function(e){var t=this._indicator.getStylesMapping();return!t||Object.keys(t).some((function(n){if(t[n]===e)return this._indicator.getVisibilitySettings()[n].isVisible}),this)},h.hide=function(){this._dLabelGroup.style("visibility","hidden"),this._settingsCaptureZone.hide(),this._removeCaptureZone.hide(),this._visible=!1},h.show=function(){this._dLabelGroup.style("visibility","visible"),this._settingsCaptureZone.show(),this._removeCaptureZone.show(),this._visible=!0},h._initCaptureZones=function(){var e=u.create().withStartHandler((function(){this._hoverLabelHandler(!0)}),this).withEndHandler((function(){this._hoverLabelHandler(!1)}),this),t=u.create().withStartHandler((function(){
this._hoverRemoveButtonHandler(!0)}),this).withEndHandler((function(){this._hoverRemoveButtonHandler(!1)}),this);this._settingsCaptureZone=this._captureZoneManager.createTapZone(this._handleSettingsTap.bind(this),l.INDICATOR_LABELS_SETTINGS,0,i.BLOCK_ALL).addGestureRecogniser(e).withCursorOnHover(c.CURSOR_TYPE.POINTER,this._dLabelGroup),this._removeCaptureZone=this._captureZoneManager.createTapZone(this._handleRemovalTap.bind(this),l.INDICATOR_LABELS_CLOSE,null,i.BLOCK_ALL).withDefaultPadding().addGestureRecogniser(t).withCursorOnHover(c.CURSOR_TYPE.POINTER,this._dLabelGroup)},h._hoverLabelHandler=function(e){this._dLabelGroup.classed("hover",e)},h._hoverRemoveButtonHandler=function(e){this._dLabelGroup.classed("hoverButton",e)},h._handleLabelChanged=function(){this._dLabelText&&(this._dLabelText.selectAll(".title").text(s.get(this.name+"-"+this._indicator.shortLabelType)),this.resizeLabel())},h._createTextElements=function(){return this._dLabelText=this._dLabelGroup.append("svg:text").classed("text",!0),this._dLabelText.append("svg:tspan").classed("title",!0).text(s.get(this.name+"-"+this._indicator.shortLabelType)),this.updateSettings()},h._resizeTextElements=function(){var e=a.getBBox(this._dLabelText.node()),t=this._dLabelText.selectAll(".setting"),n=t.size(),i=e.width;return t.node()&&null===t.attr("dx")&&(i+=n*Math.round(7)),this._dLabelText.attr({x:Math.round(10),y:Math.round(19)}),t.attr("dx",Math.round(7)),{width:i-36,height:e.height}},h._handleSettingsTap=function(){this._indicator.isAvailable()&&this._eventBus.publish("chart/indicator/show-settings",[this._indicator])},h._handleRemovalTap=function(){this._eventBus.publish("chart/indicator/remove",[this._indicator.name,!0])},Object.seal(h),Object.seal(t)})),define("module/indicator-labels/js/view/indicatorlabelrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/defer","module/core/js/util/functional","module/indicator-labels/js/view/indicatorlabelrendererhelper","module/core/js/view/studyviewconstants","module/core/js/view/subview","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/util/defer"),s=e("module/core/js/util/functional"),a=e("module/indicator-labels/js/view/indicatorlabelrendererhelper"),l=e("module/core/js/view/studyviewconstants"),u=e("module/core/js/view/subview"),c=e("module/core/js/view/visiblewindow");o.extend(t,n);var d=t.prototype;return d._indicatorId=null,d._indicatorLabel=null,d._requestedResizing=!1,d._requestedZoneUpdate=!1,d.withIndicatorId=s.setter("_indicatorId"),d.destroy=function(){this._handleIndicatorRemoved(),t.superclass.destroy.call(this)},d.startRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.subscribe("chart/indicator/added/"+this._indicatorId,this._handleIndicatorAdded,this),this._eventBus.subscribe("chart/indicator/removed/"+this._indicatorId,this._handleIndicatorRemoved,this),this._eventBus.subscribe("chart/indicator/updated/"+this._indicatorId,this._handleIndicatorUpdated,this),this._eventBus.subscribe("chart/indicator/added/*",this.updateCaptureZone,this),this._eventBus.subscribe("chart/indicator/removed/*",this.updateCaptureZone,this),this._subView.on(u.DIMENSIONS_CHANGED,this._handleSubViewDimensionsChanged,this),this._visibleWindow.on(c.MOVED,this._handleVisibleWindowMoved,this)},d.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.unsubscribeAll(this),this._subView.un(null,this),this._subView.getChartView().un(null,this),this._visibleWindow.un(null,this)},d.updateCaptureZone=function(){this._requestedZoneUpdate||(this._requestedZoneUpdate=!0,r.defer(this._updateLabelZone,this))},d.updateDimensions=function(){this._requestedResizing||(this._requestedResizing=!0,r.defer(this._updateLabelSize,this))},d._handleSubViewDimensionsChanged=function(e){var t,n=l.MIN_LABEL_HEIGHT;this._indicatorLabel&&(t=n<e.height,t&&!this._indicatorLabel.isVisible()?this._indicatorLabel.show():!t&&this._indicatorLabel.isVisible()&&this._indicatorLabel.hide(),this.updateCaptureZone())},d._updateLabelSize=function(){this._indicatorLabel&&(this._indicatorLabel.resizeLabel(),this._requestedResizing=!1,this.updateCaptureZone())},d._updateLabelZone=function(){this._indicatorLabel&&(this._indicatorLabel.updateCaptureZone(),this._requestedZoneUpdate=!1)},d._handleIndicatorAdded=function(e){this._indicatorLabel=a.create(e,this._eventBus,this._captureZoneManager).withContainer(this.dContainer).initDom(),this.updateDimensions()},d._handleIndicatorRemoved=function(){this._indicatorLabel&&(this._indicatorLabel.destroy(),this._indicatorLabel=null)},d._handleIndicatorUpdated=function(e){this._indicatorLabel&&(this._indicatorLabel.withIndicator(e).updateSettings(),this.updateDimensions())},d._handleVisibleWindowMoved=function(e,t){t&(i.INITIALISED|i.RESIZED)&&this.updateCaptureZone()},Object.seal(d),Object.seal(t)})),define("module/core/js/model/collection",["require","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/core/js/event/subscribable"],(function(e){"use strict";function t(e){this._items=e?n.shallowCopy(e):[]}var n=e("module/core/js/util/array"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/event/subscribable");i.extend(t,r),t.create=function(e){return new t(e)},t.ADD="ADD",t.REMOVE="REMOVE";var s=t.prototype;return s._items=null,s.add=function(e,n){return n?this._items.splice(this.locationOf(e,n),0,e):this._items.push(e),this.fire(t.ADD,e),this},s.addAll=function(e,t){return e.forEach(function(e){this.add(e,t)}.bind(this)),this},s.remove=function(e){var i=n.find(this._items,e);i&&(n.remove(this._items,i),this.fire(t.REMOVE,i))},s.get=function(e){return e>=this._items.length?null:this._items[e]},s.getAll=function(){return this._items.slice(0)},s.getBy=function(e,t){return n.find(this._items,o.propertyComparator(e,t))},s.clear=function(){for(var e;this._items.length;)e=this._items.shift(),this.fire(t.REMOVE,e);return this},s.shallowCopy=function(){return new t(n.shallowCopy(this._items))},s.filter=o.delegate("_items","filter"),s.forEach=o.delegate("_items","forEach"),s.map=o.delegate("_items","map"),s.sort=function(e){return this._items.sort(e),this},s.find=function(e){return n.find(this._items,e)},s.invokeApply=function(e,t){o.invokeApply(this._items,e,t)},s.asArray=function(){return n.shallowCopy(this._items)},s.length=o.getter("_items","length"),s.locationOf=function(e,t){for(var n,i,o=0,r=this._items.length-1;o<=r;)if(n=(o+r)/2|0,(i=t(e,this._items[n]))>0)o=n+1;else{if(!(i<0))return n;r=n-1}return r<0?0:o},Object.seal(s),Object.seal(t)})),define("module/indicator-labels/js/view/pricesindicatorlabelrenderer",["require","module/core/js/model/collection","module/core/js/view/renderer/abstractrenderer","module/core/js/util/array","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/view/model/commonuipresentationmodel","module/core/js/util/defer","module/core/js/util/functional","module/indicator-labels/js/view/indicatorlabelrendererhelper","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,o,r){t.superclass.constructor.apply(this,arguments),this._dirtyIndicators=Object.create(null),this._indicatorLabels=new i,this.positionLabels=c.throttledDeferred(this.positionLabels)}var n,i=e("module/core/js/model/collection"),o=e("module/core/js/view/renderer/abstractrenderer"),r=e("module/core/js/util/array"),s=e("module/core/js/view/axisconstants"),a=e("module/core/js/util/class"),l=e("module/core/js/view/model/commonuipresentationmodel"),u=e("module/core/js/util/defer"),c=e("module/core/js/util/functional"),d=e("module/indicator-labels/js/view/indicatorlabelrendererhelper"),h=e("module/core/js/view/visiblewindow");a.extend(t,o),n=t,t.DIRTY_RESIZE=1;var p=t.prototype;return p._dirtyIndicators=null,p._indicatorIds=null,p._indicatorLabels=null,p._requestedResizing=!1,p.withIndicatorIds=c.setter("_indicatorIds"),p.withMarginBottom=c.setter("_marginBottom"),p.destroy=function(){this._indicatorLabels.forEach(c.invoker("destroy"),this),this._indicatorLabels.clear(),this.positionLabels.abort(),t.superclass.destroy.call(this)},p.positionLabels=function(){var e=this._subView.dimensions.width,t=this._presentationModel.getOffsetsForComponent("indicatorslabels"),n=t.xOffset,i=t.yOffset-this._marginBottom,o=0;this._indicatorLabels.forEach((function(t,r){var s=t.getSize(),a=s.width+4;n>0&&n+a>e&&(n=0,i-=s.height+4,o++),t.positionLabel(n,i-s.height),n+=a}),this),this._eventBus.publish("commonui/offset/indicatorlabels",[this._calculateLabelOffset(this._indicatorLabels,o)])},p._calculateLabelOffset=function(e,t){var n,i=t+1;return e.length()>0?(n=e.get(0).getSize().height,i*(n+4)):0},p.resizeLabels=function(){this._requestedResizing||(this._requestedResizing=!0,u.defer(this._resizeModifiedLabels,this))},p.updateCaptureZones=function(){u.defer(this._updateModifiedCaptureZones,this)},p.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._eventBus.subscribe("chart/indicator/added/*",this._handleIndicatorAdded,this),this._eventBus.subscribe("chart/indicator/removed/*",this._handleIndicatorRemoved,this),this._eventBus.subscribe("chart/indicator/updated/*",this._handleIndicatorUpdated,this),this._visibleWindow.on(h.MOVED,this._handleVisibleWindowMoved,this),this._presentationModel.on(l.COMMON_UI_CHANGED,this._handleCommonUIChange,this)},p.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._visibleWindow.un(null,this),this._eventBus.unsubscribeAll(this),t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this)},p._resizeModifiedLabels=function(){var e=this._dirtyIndicators;this._indicatorLabels.forEach((function(t){e[t.name]&n.DIRTY_RESIZE&&(t.resizeLabel(),e[t.name]&=~n.DIRTY_RESIZE)}),this),this._requestedResizing=!1},p._updateModifiedCaptureZones=function(){c.invokeCall(this._indicatorLabels.getAll(),"updateCaptureZone")},p._handleCommonUIChange=function(){this.positionLabels(),this.updateCaptureZones()},p._handleIndicatorAdded=function(e){var t,i=e.name;"PRICES"!==i&&r.contains(this._indicatorIds,i)&&(t=d.create(e,this._eventBus,this._captureZoneManager).withContainer(this.dContainer).initDom(),this._indicatorLabels.add(t),this._dirtyIndicators[i]|=n.DIRTY_RESIZE),this.resizeLabels(),this.positionLabels(),this.updateCaptureZones()},p._handleIndicatorRemoved=function(e){var t=e.name,n=this._indicatorLabels,i=n.getBy("name",t);i&&(i.destroy(),n.remove(i),delete this._dirtyIndicators[t]),this.positionLabels(),this.updateCaptureZones()},p._handleIndicatorUpdated=function(e){var t=e.name,i=this._indicatorLabels.getBy("name",t);i&&(i.withIndicator(e).updateSettings(),this._dirtyIndicators[t]|=n.DIRTY_RESIZE,this.resizeLabels(),this.positionLabels(),this.updateCaptureZones())},p._handleVisibleWindowMoved=function(e,t){e&(s.RESIZED|s.INITIALISED)&&(this.positionLabels(),this.updateCaptureZones()),t&(s.RESIZED|s.INITIALISED)&&this.updateCaptureZones()},Object.seal(p),Object.seal(t)})),define("module/indicator-labels/js/config/subviewsconfig",["require","module/indicator-labels/js/view/indicatorlabelrenderer","module/core/js/util/object","module/indicator-labels/js/view/pricesindicatorlabelrenderer"],(function(e){"use strict";var t=e("module/indicator-labels/js/view/indicatorlabelrenderer"),n=e("module/core/js/util/object"),i=e("module/indicator-labels/js/view/pricesindicatorlabelrenderer"),o={prices:{renderers:{indicatorLabel:{type:i,group:"body",position:"southWest",presentationController:"commonUi",properties:{marginBottom:10,indicatorIds:["BOL","DONCHIAN","EMA","ICHIMOKU","KELTNER","MVAVG","SAR","PIVOT","SUPERTREND","WMA"]}}}},aroon:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"AROON"}}}},atr:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"ATR"}}}},awesome:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"AWESOME"}}}},chaikin:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"CHAIKIN"}}}},cci:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"CCI"}}}},dpo:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"DPO"}}}},dmi:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"DMI"}}}},kdj:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"KDJ"}}}},macd:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"MACD"}}}},momentum:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"MOMENTUM"}}}},mfi:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"MFI"}}}},roc:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"ROC"}}}},rsi:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"RSI"}}}},stdev:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"STDEV"}}}},stochastic:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"STOCH"}}}},volume:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"VOLUME"}}}},willr:{renderers:{indicatorLabel:{type:t,group:"body",position:"northWest",properties:{indicatorId:"WILLR"}}}}};return n.recursiveFreeze(o)})),define("module/core/js/view/component/dialog/control/togglebaritem",["require","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/event/subscribable","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n,i){this._label=n,this.value=i,this._dContainer=e,this._initDom(t)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/userinput/eventpropagation"),o=e("module/core/js/util/functional"),r=e("module/core/js/event/subscribable"),s=e("module/core/js/view/userinput/tapgesturerecogniser"),a=e("module/core/js/enum/zindexenum");n.extend(t,r),t.create=function(e,n,i,o){return new t(e,n,i,o)},t.HIT_PADDING=0,t.ITEM_TOGGLED="ITEM_TOGGLED";var l=t.prototype;return l._label=null,l.value=null,l._dButton=null,l._captureZone=null,l._tapRecogniser=null,l._initDom=function(e){this._dButton=this._dContainer.append("span").text(this._label),this._dButton.attr("data-toggle-bar-item-value",this.value),this._tapRecogniser=s.create().withHandler(this._handleTap.bind(this)),this._captureZone=e.create(i.BLOCK_ALL,a.DIALOG_CONTROLS).withPadding(t.HIT_PADDING).addGestureRecogniser(this._tapRecogniser),this.updateCaptureZone()},l._handleTap=function(){this.fire(t.ITEM_TOGGLED,this)},l.destroy=function(){this._captureZone.destroy(),this._tapRecogniser.destroy(),this._dButton.remove()},l.enable=o.delegate("_captureZone","show"),l.disable=o.delegate("_captureZone","hide"),l.show=function(){return this._dButton.classed("hidden",!1),this.enable()},l.hide=function(){return this._dButton.classed("hidden",!0),this.disable()},l.updateCaptureZone=function(){return this._captureZone.setDimensionsBasedOnElement(this._dButton),this},l.setSelectionState=function(e){this._dButton.classed("selected",e)},Object.seal(t),Object.seal(t)})),define("module/core/js/view/component/dialog/control/togglebar",["require","module/core/js/util/array","module/core/js/util/class","module/core/js/view/component/dialog/dialogevents","module/core/js/util/functional","module/core/js/event/subscribable","module/core/js/view/component/dialog/control/togglebaritem"],(function(e){"use strict";function t(e,t,n,i,o){this._i18n=e,this._setting=n,this._constraints=i,this._currentValue=o,this._commitValue=o}var n=e("module/core/js/util/array"),i=e("module/core/js/util/class"),o=e("module/core/js/view/component/dialog/dialogevents"),r=e("module/core/js/util/functional"),s=e("module/core/js/event/subscribable"),a=e("module/core/js/view/component/dialog/control/togglebaritem");i.extend(t,s),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)},t._itemValueComparer=function(e){return function(t){return t.value===e}};var l=t.prototype;return l._captureZoneManager=null,l._toggleBarItems=null,l._dToggleBar=null,l._constraints=null,l._currentValue=null,l._commitValue=null,l._i18n=null,l._setting=null,l.withCaptureZoneManager=r.setter("_captureZoneManager"),l.initDom=function(e,t){return t=t?t.split(/\s+/):["toggleBar"],this._dToggleBar=e.append("div"),t.forEach((function(e){this._dToggleBar.classed(e,!0)}),this),this._toggleBarItems=this._constraints.options.map(this._createToggleBarItem.bind(this)),this._updateSelection(),this},l.commitSetting=function(){this._commitValue!=this._currentValue&&(this._currentValue=this._commitValue,this._updateSelection(),this.fire(o.VALUE_CHANGED,this._setting,this._currentValue))},l.enable=function(){return r.invokeApply(this._toggleBarItems,"enable"),this},l.disable=function(){return r.invokeApply(this._toggleBarItems,"disable"),this},l.show=function(){return this._dToggleBar.classed("hidden",!1),this.enable()},l.hide=function(){return this._dToggleBar.classed("hidden",!0),this.disable()},l.updateCaptureZones=function(){return r.invokeCall(this._toggleBarItems,"updateCaptureZone"),this},l.reset=function(){this._commitValue=this._constraints.defaultValue,this.commitSetting()},l.destroy=function(){r.invokeApply(this._toggleBarItems,"un",[null,this]),r.invokeCall(this._toggleBarItems,"destroy"),this._toggleBarItems=null},l._createToggleBarItem=function(e){var t=a.create(this._dToggleBar,this._captureZoneManager,this._i18n.get(e.localisationKey),e.value);return t.on(a.ITEM_TOGGLED,this._handleItemToggled.bind(this)),t},l._updateSelection=function(){var e;r.invokeApply(this._toggleBarItems,"setSelectionState",[!1]),e=n.find(this._toggleBarItems,t._itemValueComparer(this._currentValue)),e.setSelectionState(!0)},l._handleItemToggled=function(e){this._commitValue=e.value,this.commitSetting()},Object.seal(l),Object.seal(t)})),define("module/indicator-labels/js/view/component/dialog/indicatorconfigdialogcontent",["require","module/core/js/view/component/dialog/abstractdialogcontent","module/core/js/util/class","module/core/js/view/component/dialog/dialogevents","module/core/js/util/functional","module/core/js/indicator/indicator","module/indicators/js/i18n","module/core/js/view/component/dialog/control/numericsettingcontrol","module/core/js/view/component/dialog/control/togglebar"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,r),this._indicator=s,this._settings=s.getSettings(),this._settingsConstraints=s.getSettingsConstraints()}var n=e("module/core/js/view/component/dialog/abstractdialogcontent"),i=e("module/core/js/util/class"),o=e("module/core/js/view/component/dialog/dialogevents"),r=e("module/core/js/util/functional"),s=e("module/core/js/indicator/indicator"),a=e("module/indicators/js/i18n"),l=e("module/core/js/view/component/dialog/control/numericsettingcontrol"),u=e("module/core/js/view/component/dialog/control/togglebar");i.extend(t,n),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)},t.VIEW_TYPE_MAP=Object.freeze({NUMERIC:l,TOGGLE:u});var c=t.prototype;return c._controls=null,c._indicator=null,c._settings=null,c._settingsConstraints=null,c._initialValues=null,c.initDom=function(e){return t.superclass.initDom.call(this,e),this._createSettingsControls(e),this},c._createSettingsControls=function(e){var t,n;this._controls=Object.create(null),this._initialValues=Object.create(null);for(t in s.getModifiableSettings(this._settings))n=e.append("div").attr("class","setting-row"),this._createSettingRow(n,t,this._settingsConstraints[t])},c._createSettingRow=function(e,n,i){var r=this._settings[n],s=t.VIEW_TYPE_MAP[i.viewType],l=s.create(a,this._indicator.name,n,i,r).withCaptureZoneManager(this._captureZoneManager).initDom(e);l.on(o.VALUE_CHANGED,this._handleSettingUpdated,this),this._initialValues[n]=r,this._controls[n]=l},c.enable=function(){return r.objectInvoke(this._controls,"enable"),t.superclass.enable.call(this)},c.disable=function(){return r.objectInvoke(this._controls,"disable"),t.superclass.disable.call(this)},c.updateCaptureZones=function(){return r.objectInvoke(this._controls,"updateCaptureZones"),t.superclass.updateCaptureZones.call(this)},c.destroy=function(){this._controls&&(r.objectInvoke(this._controls,"un",null,this),r.objectInvoke(this._controls,"destroy"),this._controls=null),t.superclass.destroy.call(this)},c.resetToDefaults=function(){r.objectInvoke(this._controls,"reset")},c.revertChanges=function(){Object.keys(this._initialValues).forEach((function(e){this._settings[e]=this._initialValues[e]}),this),this._eventBus.publish("chart/indicator/update",[this._indicator.name,this._settings,!0])},c.save=function(){r.objectInvoke(this._controls,"commitSetting")},c._handleSettingUpdated=function(e,t){this._settings[e]=t,this._eventBus.publish("chart/indicator/update",[this._indicator.name,this._settings,!0])},Object.seal(c),Object.seal(t)})),define("module/indicator-labels/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{CONFIG:"Parameter",STYLE:"Stil","AROON-up-line":"Hoch","AROON-up-cloud":"Füllfarbe","AROON-down-line":"Runter","AROON-down-cloud":"Füllfarbe","ATR-line":"Linie","ATR-fill":"Füllfarbe","AWESOME-up":"Höher","AWESOME-down":"Tiefer","BOL-positiveBand":"Obere","BOL-movingAverageBand":"MA","BOL-negativeBand":"Untere","BOL-fill":"Füllfarbe","CHAIKIN-line":"Linie","CHAIKIN-fill":"Füllfarbe","CCI-line":"Linie","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Füllfarbe","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Füllfarbe","DONCHIAN-up":"Obere","DONCHIAN-middle":"Mittere","DONCHIAN-down":"Untere","DONCHIAN-fill":"Füllfarbe","DPO-line":"Linie","DPO-up-lineColour":"Hoch","DPO-up-fill":"Füllfarbe","DPO-down-lineColour":"Runter","DPO-down-fill":"Füllfarbe","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"Histogramm +","DMI-histogram-down":"Histogramm -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Wolke","ICHIMOKU-cloudDown":"Wolke","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Obere","KELTNER-middle":"MA","KELTNER-down":"Untere","KELTNER-fill":"Füllfarbe","MACD-macd":"MACD","MACD-signal":"Signallinie","MACD-histogram-up":"Histogramm +","MACD-histogram-down":"Histogramm -","MOMENTUM-line":"Linie","MOMENTUM-up-lineColour":"Hoch","MOMENTUM-up-fill":"Füllfarbe","MOMENTUM-down-lineColour":"Runter","MOMENTUM-down-fill":"Füllfarbe","MFI-line":"Linie","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"Füllfarbe","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"Füllfarbe","MVAVG-movingAverage1":"MA {period1}","MVAVG-movingAverage2":"MA {period2}","MVAVG-movingAverage3":"MA {period3}","MVAVG-movingAverage4":"MA {period4}","MVAVG-movingAverage5":"MA {period5}","MVAVG-movingAverage6":"MA {period6}","MVAVG-movingAverage7":"MA {period7}","MVAVG-movingAverage8":"MA {period8}","SAR-up":"Hoch","SAR-down":"Runter","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Linie","ROC-up-lineColour":"Hoch","ROC-up-fill":"Füllfarbe","ROC-down-lineColour":"Runter","ROC-down-fill":"Füllfarbe","RSI-line":"Linie","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Füllfarbe","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Füllfarbe","STDEV-line":"Linie","STDEV-fill":"Füllfarbe","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Hoch","SUPERTREND-down":"Runter","VOLUME-up":"Steigend","VOLUME-fill":"Unverändert","VOLUME-down":"Fallend","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"Linie","WILLR-up-lineColour":"0 bis -20","WILLR-up-fill":"Füllfarbe","WILLR-down-lineColour":"-80 bis -100","WILLR-down-fill":"Füllfarbe"},en:{CONFIG:"Parameters",STYLE:"Style","AROON-up-line":"Up","AROON-up-cloud":"Fill","AROON-down-line":"Down","AROON-down-cloud":"Fill","ATR-line":"Line","ATR-fill":"Fill","AWESOME-up":"Higher","AWESOME-down":"Lower","BOL-positiveBand":"Upper","BOL-movingAverageBand":"MA","BOL-negativeBand":"Lower","BOL-fill":"Fill","CHAIKIN-line":"Line","CHAIKIN-fill":"Fill","CCI-line":"Line","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Fill","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Fill","DONCHIAN-up":"Upper","DONCHIAN-middle":"Middle","DONCHIAN-down":"Lower","DONCHIAN-fill":"Fill","DPO-line":"Line","DPO-up-lineColour":"Up","DPO-up-fill":"Fill","DPO-down-lineColour":"Down","DPO-down-fill":"Fill","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"Histogram +","DMI-histogram-down":"Histogram -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Cloud","ICHIMOKU-cloudDown":"Cloud","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Upper","KELTNER-middle":"MA","KELTNER-down":"Lower","KELTNER-fill":"Fill","MACD-macd":"MACD","MACD-signal":"Signal Line","MACD-histogram-up":"Histogram +","MACD-histogram-down":"Histogram -","MOMENTUM-line":"Line","MOMENTUM-up-lineColour":"Up","MOMENTUM-up-fill":"Fill","MOMENTUM-down-lineColour":"Down","MOMENTUM-down-fill":"Fill","MFI-line":"Line","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"Fill","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"Fill","MVAVG-movingAverage1":"MA {period1}","MVAVG-movingAverage2":"MA {period2}","MVAVG-movingAverage3":"MA {period3}","MVAVG-movingAverage4":"MA {period4}","MVAVG-movingAverage5":"MA {period5}","MVAVG-movingAverage6":"MA {period6}","MVAVG-movingAverage7":"MA {period7}","MVAVG-movingAverage8":"MA {period8}","SAR-up":"Up","SAR-down":"Down","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Line","ROC-up-lineColour":"Up","ROC-up-fill":"Fill","ROC-down-lineColour":"Down","ROC-down-fill":"Fill","RSI-line":"Line","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Fill","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Fill","STDEV-line":"Line","STDEV-fill":"Fill","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Up","SUPERTREND-down":"Down","VOLUME-up":"Rising","VOLUME-fill":"Unchanged","VOLUME-down":"Falling","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"Line","WILLR-up-lineColour":"0 to -20","WILLR-up-fill":"Fill","WILLR-down-lineColour":"-80 to -100","WILLR-down-fill":"Fill"},es:{CONFIG:"Parámetros",STYLE:"Estilo","AROON-up-line":"Alcista","AROON-up-cloud":"Relleno","AROON-down-line":"Bajista","AROON-down-cloud":"Relleno","ATR-line":"Línea","ATR-fill":"Relleno","AWESOME-up":"Más alto","AWESOME-down":"Más bajo","BOL-positiveBand":"Superior","BOL-movingAverageBand":"MM","BOL-negativeBand":"Inferior","BOL-fill":"Relleno","CHAIKIN-line":"Línea","CHAIKIN-fill":"Relleno","CCI-line":"Línea","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Relleno","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Relleno","DONCHIAN-up":"Superior","DONCHIAN-middle":"Media","DONCHIAN-down":"Inferior","DONCHIAN-fill":"Relleno","DPO-line":"Línea","DPO-up-lineColour":"Alcista","DPO-up-fill":"Relleno","DPO-down-lineColour":"Bajista","DPO-down-fill":"Relleno","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"Histograma +","DMI-histogram-down":"Histograma -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Nube","ICHIMOKU-cloudDown":"Nube","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Superior","KELTNER-middle":"MA","KELTNER-down":"Inferior","KELTNER-fill":"Relleno","MACD-macd":"MACD","MACD-signal":"Línea de Señal","MACD-histogram-up":"Histograma +","MACD-histogram-down":"Histograma -","MOMENTUM-line":"Línea","MOMENTUM-up-lineColour":"Alcista","MOMENTUM-up-fill":"Relleno","MOMENTUM-down-lineColour":"Bajista","MOMENTUM-down-fill":"Relleno","MFI-line":"Línea","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"Relleno","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"Relleno","MVAVG-movingAverage1":"SMA {period1}","MVAVG-movingAverage2":"SMA {period2}","MVAVG-movingAverage3":"SMA {period3}","MVAVG-movingAverage4":"SMA {period4}","MVAVG-movingAverage5":"SMA {period5}","MVAVG-movingAverage6":"SMA {period6}","MVAVG-movingAverage7":"SMA {period7}","MVAVG-movingAverage8":"SMA {period8}","SAR-up":"Alcista","SAR-down":"Bajista","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Línea","ROC-up-lineColour":"Alcista","ROC-up-fill":"Relleno","ROC-down-lineColour":"Bajista","ROC-down-fill":"Relleno","RSI-line":"Línea","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Relleno","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Relleno","STDEV-line":"Línea","STDEV-fill":"Relleno","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Alcista","SUPERTREND-down":"Bajista","VOLUME-up":"Ascendente","VOLUME-fill":"Sin variación","VOLUME-down":"Descendente","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"Línea","WILLR-up-lineColour":"0 a -20","WILLR-up-fill":"Relleno","WILLR-down-lineColour":"-80 a -100","WILLR-down-fill":"Relleno"},fr:{CONFIG:"Paramètres",STYLE:"Style","AROON-up-line":"Hausse","AROON-up-cloud":"Remplissage","AROON-down-line":"Baisse","AROON-down-cloud":"Remplissage","ATR-line":"Ligne","ATR-fill":"Remplissage","AWESOME-up":"Haussier","AWESOME-down":"Baissier","BOL-positiveBand":"Bande haute","BOL-movingAverageBand":"MM","BOL-negativeBand":"Bande basse","BOL-fill":"Remplissage","CHAIKIN-line":"Ligne","CHAIKIN-fill":"Remplissage","CCI-line":"Ligne","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Remplissage","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Remplissage","DONCHIAN-up":"Bande haute","DONCHIAN-middle":"Bande neutre","DONCHIAN-down":"Bande basse","DONCHIAN-fill":"Remplissage","DPO-line":"Ligne","DPO-up-lineColour":"Hausse","DPO-up-fill":"Remplissage","DPO-down-lineColour":"Baisse","DPO-down-fill":"Remplissage","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX",
"DMI-histogram-up":"Histogramme +","DMI-histogram-down":"Histogramme -","EMA-ema1":"MME {period1}","EMA-ema2":"MME {period2}","EMA-ema3":"MME {period3}","EMA-ema4":"MME {period4}","EMA-ema5":"MME {period5}","EMA-ema6":"MME {period6}","EMA-ema7":"MME {period7}","EMA-ema8":"MME {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Nuage","ICHIMOKU-cloudDown":"Nuage","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Bande haute","KELTNER-middle":"MM","KELTNER-down":"Bande basse","KELTNER-fill":"Remplissage","MACD-macd":"MACD","MACD-signal":"Ligne de signal","MACD-histogram-up":"Histogramme +","MACD-histogram-down":"Histogramme -","MOMENTUM-line":"Ligne","MOMENTUM-up-lineColour":"Hausse","MOMENTUM-up-fill":"Remplissage","MOMENTUM-down-lineColour":"Baisse","MOMENTUM-down-fill":"Remplissage","MFI-line":"Ligne","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"Remplissage","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"Remplissage","MVAVG-movingAverage1":"MM {period1}","MVAVG-movingAverage2":"MM {period2}","MVAVG-movingAverage3":"MM {period3}","MVAVG-movingAverage4":"MM {period4}","MVAVG-movingAverage5":"MM {period5}","MVAVG-movingAverage6":"MM {period6}","MVAVG-movingAverage7":"MM {period7}","MVAVG-movingAverage8":"MM {period8}","SAR-up":"Hausse","SAR-down":"Baisse","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Ligne","ROC-up-lineColour":"Hausse","ROC-up-fill":"Remplissage","ROC-down-lineColour":"Baisse","ROC-down-fill":"Remplissage","RSI-line":"Ligne","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Remplissage","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Remplissage","STDEV-line":"Ligne","STDEV-fill":"Remplissage","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Hausse","SUPERTREND-down":"Baisse","VOLUME-up":"Haussier","VOLUME-fill":"Inchangé","VOLUME-down":"Baissier","WMA-wma1":"MMP {period1}","WMA-wma2":"MMP {period2}","WMA-wma3":"MMP {period3}","WMA-wma4":"MMP {period4}","WMA-wma5":"MMP {period5}","WMA-wma6":"MMP {period6}","WMA-wma7":"MMP {period7}","WMA-wma8":"MMP {period8}","WILLR-line":"Ligne","WILLR-up-lineColour":"0 à -20","WILLR-up-fill":"Remplissage","WILLR-down-lineColour":"-80 à -100","WILLR-down-fill":"Remplissage"},it:{CONFIG:"Parametri",STYLE:"Stile","AROON-up-line":"Sopra","AROON-up-cloud":"Riempimento","AROON-down-line":"Sotto","AROON-down-cloud":"Riempimento","ATR-line":"Linea","ATR-fill":"Riempimento","AWESOME-up":"Massimo","AWESOME-down":"Minimo","BOL-positiveBand":"Superiore","BOL-movingAverageBand":"MA","BOL-negativeBand":"Inferiore","BOL-fill":"Riempimento","CHAIKIN-line":"Linea","CHAIKIN-fill":"Riempimento","CCI-line":"Linea","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Riempimento","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Riempimento","DONCHIAN-up":"Superiore","DONCHIAN-middle":"Medio","DONCHIAN-down":"Inferiore","DONCHIAN-fill":"Riempimento","DPO-line":"Linea","DPO-up-lineColour":"Sopra","DPO-up-fill":"Riempimento","DPO-down-lineColour":"Sotto","DPO-down-fill":"Riempimento","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"Istogramma +","DMI-histogram-down":"Istogramma -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Nuvola","ICHIMOKU-cloudDown":"Nuvola","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Superiore","KELTNER-middle":"MA","KELTNER-down":"Inferiore","KELTNER-fill":"Riempimento","MACD-macd":"MACD","MACD-signal":"Linea di segnale","MACD-histogram-up":"Istogramma +","MACD-histogram-down":"Istogramma -","MOMENTUM-line":"Linea","MOMENTUM-up-lineColour":"Sopra","MOMENTUM-up-fill":"Riempimento","MOMENTUM-down-lineColour":"Sotto","MOMENTUM-down-fill":"Riempimento","MFI-line":"Linea","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"Riempimento","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"Riempimento","MVAVG-movingAverage1":"MA {period1}","MVAVG-movingAverage2":"MA {period2}","MVAVG-movingAverage3":"MA {period3}","MVAVG-movingAverage4":"MA {period4}","MVAVG-movingAverage5":"MA {period5}","MVAVG-movingAverage6":"MA {period6}","MVAVG-movingAverage7":"MA {period7}","MVAVG-movingAverage8":"MA {period8}","SAR-up":"Sopra","SAR-down":"Sotto","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Linea","ROC-up-lineColour":"Sopra","ROC-up-fill":"Riempimento","ROC-down-lineColour":"Sotto","ROC-down-fill":"Riempimento","RSI-line":"Linea","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Riempimento","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Riempimento","STDEV-line":"Linea","STDEV-fill":"Riempimento","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Sopra","SUPERTREND-down":"Sotto","VOLUME-up":"Rialzista","VOLUME-fill":"Invariato","VOLUME-down":"Ribassista","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"Linea","WILLR-up-lineColour":"0 a -20","WILLR-up-fill":"Riempimento","WILLR-down-lineColour":"-80 a -100","WILLR-down-fill":"Riempimento"},ja:{CONFIG:"パレメーター",STYLE:"チャート種類","AROON-up-line":"上昇","AROON-up-cloud":"塗りつぶし","AROON-down-line":"下落","AROON-down-cloud":"塗りつぶし","ATR-line":"ライン","ATR-fill":"塗りつぶし","AWESOME-up":"上昇","AWESOME-down":"下落","BOL-positiveBand":"上限","BOL-movingAverageBand":"移動平均","BOL-negativeBand":"下限","BOL-fill":"塗りつぶし","CHAIKIN-line":"ライン","CHAIKIN-fill":"塗りつぶし","CCI-line":"ライン","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"塗りつぶし","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"塗りつぶし","DONCHIAN-up":"上限","DONCHIAN-middle":"中間線","DONCHIAN-down":"下限","DONCHIAN-fill":"塗りつぶし","DPO-line":"ライン","DPO-up-lineColour":"上昇","DPO-up-fill":"塗りつぶし","DPO-down-lineColour":"下落","DPO-down-fill":"塗りつぶし","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"ヒストグラム +","DMI-histogram-down":"ヒストグラム -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"遅行線","ICHIMOKU-kijun":"基準線","ICHIMOKU-tenkan":"転換線","ICHIMOKU-spanA":"スパンA","ICHIMOKU-spanB":"スパンB","ICHIMOKU-cloudUp":"雲","ICHIMOKU-cloudDown":"雲","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"上限","KELTNER-middle":"移動平均","KELTNER-down":"下限","KELTNER-fill":"塗りつぶし","MACD-macd":"MACD","MACD-signal":"シグナルライン","MACD-histogram-up":"ヒストグラム +","MACD-histogram-down":"ヒストグラム -","MOMENTUM-line":"ライン","MOMENTUM-up-lineColour":"上昇","MOMENTUM-up-fill":"塗りつぶし","MOMENTUM-down-lineColour":"下落","MOMENTUM-down-fill":"塗りつぶし","MFI-line":"ライン","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"塗りつぶし","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"塗りつぶし","MVAVG-movingAverage1":"移動平均 {period1}","MVAVG-movingAverage2":"移動平均 {period2}","MVAVG-movingAverage3":"移動平均 {period3}","MVAVG-movingAverage4":"移動平均 {period4}","MVAVG-movingAverage5":"移動平均 {period5}","MVAVG-movingAverage6":"移動平均 {period6}","MVAVG-movingAverage7":"移動平均 {period7}","MVAVG-movingAverage8":"移動平均 {period8}","SAR-up":"上昇","SAR-down":"下落","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"ピボット","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"ライン","ROC-up-lineColour":"上昇","ROC-up-fill":"塗りつぶし","ROC-down-lineColour":"下落","ROC-down-fill":"塗りつぶし","RSI-line":"ライン","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"塗りつぶし","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"塗りつぶし","STDEV-line":"ライン","STDEV-fill":"塗りつぶし","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"上昇","SUPERTREND-down":"下落","VOLUME-up":"上昇","VOLUME-fill":"変更なし","VOLUME-down":"下落","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"ライン","WILLR-up-lineColour":"0 ~ -20","WILLR-up-fill":"塗りつぶし","WILLR-down-lineColour":"-80 ~ -100","WILLR-down-fill":"塗りつぶし"},nl:{CONFIG:"Parameters",STYLE:"Stijl","AROON-up-line":"Naar boven","AROON-up-cloud":"Vullen","AROON-down-line":"Naar beneden","AROON-down-cloud":"Vullen","ATR-line":"Lijn","ATR-fill":"Vullen","AWESOME-up":"Hoger","AWESOME-down":"Lager","BOL-positiveBand":"Bovenste","BOL-movingAverageBand":"MA","BOL-negativeBand":"Laagste","BOL-fill":"Vullen","CHAIKIN-line":"Lijn","CHAIKIN-fill":"Vullen","CCI-line":"Lijn","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Vullen","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Vullen","DONCHIAN-up":"Bovenste","DONCHIAN-middle":"Midden","DONCHIAN-down":"Laagste","DONCHIAN-fill":"Vullen","DPO-line":"Lijn","DPO-up-lineColour":"Naar boven","DPO-up-fill":"Vullen","DPO-down-lineColour":"Naar beneden","DPO-down-fill":"Vullen","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"Histogram +","DMI-histogram-down":"Histogram -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Wolk","ICHIMOKU-cloudDown":"Wolk","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Bovenste","KELTNER-middle":"MA","KELTNER-down":"Laagste","KELTNER-fill":"Vullen","MACD-macd":"MACD","MACD-signal":"Signaallijn","MACD-histogram-up":"Histogram +","MACD-histogram-down":"Histogram -","MOMENTUM-line":"Lijn","MOMENTUM-up-lineColour":"Naar boven","MOMENTUM-up-fill":"Vullen","MOMENTUM-down-lineColour":"Naar beneden","MOMENTUM-down-fill":"Vullen","MFI-line":"Lijn","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"Vullen","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"Vullen","MVAVG-movingAverage1":"MA {period1}","MVAVG-movingAverage2":"MA {period2}","MVAVG-movingAverage3":"MA {period3}","MVAVG-movingAverage4":"MA {period4}","MVAVG-movingAverage5":"MA {period5}","MVAVG-movingAverage6":"MA {period6}","MVAVG-movingAverage7":"MA {period7}","MVAVG-movingAverage8":"MA {period8}","SAR-up":"Naar boven","SAR-down":"Naar beneden","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Lijn","ROC-up-lineColour":"Naar boven","ROC-up-fill":"Vullen","ROC-down-lineColour":"Naar beneden","ROC-down-fill":"Vullen","RSI-line":"Lijn","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Vullen","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Vullen","STDEV-line":"Lijn","STDEV-fill":"Vullen","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Naar boven","SUPERTREND-down":"Naar beneden","VOLUME-up":"Stijgend","VOLUME-fill":"Unchanged","VOLUME-down":"Dalend","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"Lijn","WILLR-up-lineColour":"0 tot -20","WILLR-up-fill":"Vullen","WILLR-down-lineColour":"-80 tot -100","WILLR-down-fill":"Vullen"},no:{CONFIG:"Parametere",STYLE:"Stil","AROON-up-line":"Opp","AROON-up-cloud":"Fyll","AROON-down-line":"Ned","AROON-down-cloud":"Fyll","ATR-line":"Linje","ATR-fill":"Fyll","AWESOME-up":"Høyere","AWESOME-down":"Lavere","BOL-positiveBand":"Øvre","BOL-movingAverageBand":"GG","BOL-negativeBand":"Nedre","BOL-fill":"Fyll","CHAIKIN-line":"Linje","CHAIKIN-fill":"Fyll","CCI-line":"Linje","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Fyll","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Fyll","DONCHIAN-up":"Øvre","DONCHIAN-middle":"Midten","DONCHIAN-down":"Nedre","DONCHIAN-fill":"Fyll","DPO-line":"Linje","DPO-up-lineColour":"Opp","DPO-up-fill":"Fyll","DPO-down-lineColour":"Ned","DPO-down-fill":"Fyll","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"Histogram +","DMI-histogram-down":"Histogram -","EMA-ema1":"EGG {period1}","EMA-ema2":"EGG {period2}","EMA-ema3":"EGG {period3}","EMA-ema4":"EGG {period4}","EMA-ema5":"EGG {period5}","EMA-ema6":"EGG {period6}","EMA-ema7":"EGG {period7}","EMA-ema8":"EGG {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Cloud","ICHIMOKU-cloudDown":"Cloud","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Øvre","KELTNER-middle":"GG","KELTNER-down":"Nedre","KELTNER-fill":"Fyll","MACD-macd":"MACD","MACD-signal":"Signal Line","MACD-histogram-up":"Histogram +","MACD-histogram-down":"Histogram -","MOMENTUM-line":"Linje","MOMENTUM-up-lineColour":"Opp","MOMENTUM-up-fill":"Fyll","MOMENTUM-down-lineColour":"Ned","MOMENTUM-down-fill":"Fyll","MFI-line":"Linje","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"Fyll","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"Fyll","MVAVG-movingAverage1":"GG {period1}","MVAVG-movingAverage2":"GG {period2}","MVAVG-movingAverage3":"GG {period3}","MVAVG-movingAverage4":"GG {period4}","MVAVG-movingAverage5":"GG {period5}","MVAVG-movingAverage6":"GG {period6}","MVAVG-movingAverage7":"GG {period7}","MVAVG-movingAverage8":"GG {period8}","SAR-up":"Opp","SAR-down":"Ned","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Linje","ROC-up-lineColour":"Opp","ROC-up-fill":"Fyll","ROC-down-lineColour":"Ned","ROC-down-fill":"Fyll","RSI-line":"Linje","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Fyll","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Fyll","STDEV-line":"Linje","STDEV-fill":"Fyll","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Opp","SUPERTREND-down":"Ned","VOLUME-up":"Stigende","VOLUME-fill":"Uforandret","VOLUME-down":"Fallende","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"Linje","WILLR-up-lineColour":"0 til -20","WILLR-up-fill":"Fyll","WILLR-down-lineColour":"-80 til -100","WILLR-down-fill":"Fyll"},pt:{CONFIG:"Parâmetros",STYLE:"Estilo","AROON-up-line":"Altista","AROON-up-cloud":"Preenchimento","AROON-down-line":"Baixista","AROON-down-cloud":"Preenchimento","ATR-line":"Linha","ATR-fill":"Preenchimento","AWESOME-up":"Mais alto","AWESOME-down":"Mais baixo","BOL-positiveBand":"Superior","BOL-movingAverageBand":"MM","BOL-negativeBand":"Inferior","BOL-fill":"Preenchimento","CHAIKIN-line":"Linha","CHAIKIN-fill":"Preenchimento","CCI-line":"Linha","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Preenchimento","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Preenchimento","DONCHIAN-up":"Superior","DONCHIAN-middle":"Meio","DONCHIAN-down":"Inferior","DONCHIAN-fill":"Preenchimento","DPO-line":"Linha","DPO-up-lineColour":"Altista","DPO-up-fill":"Preenchimento","DPO-down-lineColour":"Baixista","DPO-down-fill":"Preenchimento","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"Histograma +","DMI-histogram-down":"Histograma -","EMA-ema1":"MME {period1}","EMA-ema2":"MME {period2}","EMA-ema3":"MME {period3}","EMA-ema4":"MME {period4}","EMA-ema5":"MME {period5}","EMA-ema6":"MME {period6}","EMA-ema7":"MME {period7}","EMA-ema8":"MME {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Nuvem","ICHIMOKU-cloudDown":"Nuvem","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Superior","KELTNER-middle":"MM","KELTNER-down":"Inferior","KELTNER-fill":"Preenchimento","MACD-macd":"MACD","MACD-signal":"Linha de sinal","MACD-histogram-up":"Histograma +","MACD-histogram-down":"Histograma -","MOMENTUM-line":"Linha","MOMENTUM-up-lineColour":"Altista","MOMENTUM-up-fill":"Preenchimento","MOMENTUM-down-lineColour":"Baixista","MOMENTUM-down-fill":"Preenchimento","MFI-line":"Linha","MFI-up-lineColour":"IMF > 80","MFI-up-fill":"Preenchimento","MFI-down-lineColour":"IMF < 20","MFI-down-fill":"Preenchimento","MVAVG-movingAverage1":"MM {period1}","MVAVG-movingAverage2":"MM {period2}","MVAVG-movingAverage3":"MM {period3}","MVAVG-movingAverage4":"MM {period4}","MVAVG-movingAverage5":"MM {period5}","MVAVG-movingAverage6":"MM {period6}","MVAVG-movingAverage7":"MM {period7}","MVAVG-movingAverage8":"MM {period8}","SAR-up":"Altista","SAR-down":"Baixista","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Linha","ROC-up-lineColour":"Altista","ROC-up-fill":"Preenchimento","ROC-down-lineColour":"Baixista","ROC-down-fill":"Preenchimento","RSI-line":"Linha","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Preenchimento","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Preenchimento","STDEV-line":"Linha","STDEV-fill":"Preenchimento","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Altista","SUPERTREND-down":"Baixista","VOLUME-up":"Ascendente","VOLUME-fill":"Sem alterações","VOLUME-down":"Descendente","WMA-wma1":"MMP {period1}","WMA-wma2":"MMP {period2}","WMA-wma3":"MMP {period3}","WMA-wma4":"MMP {period4}","WMA-wma5":"MMP {period5}","WMA-wma6":"MMP {period6}","WMA-wma7":"MMP {period7}","WMA-wma8":"MMP {period8}","WILLR-line":"Linha","WILLR-up-lineColour":"0 a -20","WILLR-up-fill":"Preenchimento","WILLR-down-lineColour":"-80 a -100","WILLR-down-fill":"Preenchimento"},sv:{CONFIG:"Parametrar",STYLE:"Stil","AROON-up-line":"Upp","AROON-up-cloud":"Ifyllnad","AROON-down-line":"Ner","AROON-down-cloud":"Ifyllnad","ATR-line":"Linje","ATR-fill":"Ifyllnad","AWESOME-up":"Högre","AWESOME-down":"Lägre","BOL-positiveBand":"Övre","BOL-movingAverageBand":"MA","BOL-negativeBand":"Nedre","BOL-fill":"Ifyllnad","CHAIKIN-line":"Linje","CHAIKIN-fill":"Ifyllnad","CCI-line":"Linje","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"Ifyllnad","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"Ifyllnad","DONCHIAN-up":"Övre","DONCHIAN-middle":"Middle","DONCHIAN-down":"Nedre","DONCHIAN-fill":"Ifyllnad","DPO-line":"Linje","DPO-up-lineColour":"Upp","DPO-up-fill":"Ifyllnad","DPO-down-lineColour":"Ner","DPO-down-fill":"Ifyllnad","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"Histogram +","DMI-histogram-down":"Histogram -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"Chikou","ICHIMOKU-kijun":"Kijun","ICHIMOKU-tenkan":"Tenkan","ICHIMOKU-spanA":"Span A","ICHIMOKU-spanB":"Span B","ICHIMOKU-cloudUp":"Moln","ICHIMOKU-cloudDown":"Moln","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"Övre","KELTNER-middle":"MA","KELTNER-down":"Nedre","KELTNER-fill":"Ifyllnad","MACD-macd":"MACD","MACD-signal":"Signallinje","MACD-histogram-up":"Histogram +","MACD-histogram-down":"Histogram -","MOMENTUM-line":"Linje","MOMENTUM-up-lineColour":"Upp","MOMENTUM-up-fill":"Ifyllnad","MOMENTUM-down-lineColour":"Ner","MOMENTUM-down-fill":"Ifyllnad","MFI-line":"Linje","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"Ifyllnad","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"Ifyllnad","MVAVG-movingAverage1":"MA {period1}","MVAVG-movingAverage2":"MA {period2}","MVAVG-movingAverage3":"MA {period3}","MVAVG-movingAverage4":"MA {period4}","MVAVG-movingAverage5":"MA {period5}","MVAVG-movingAverage6":"MA {period6}","MVAVG-movingAverage7":"MA {period7}","MVAVG-movingAverage8":"MA {period8}","SAR-up":"Upp","SAR-down":"Ner","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"Pivot","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"Linje","ROC-up-lineColour":"Upp","ROC-up-fill":"Ifyllnad","ROC-down-lineColour":"Ner","ROC-down-fill":"Ifyllnad","RSI-line":"Linje","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"Ifyllnad","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"Ifyllnad","STDEV-line":"Linje","STDEV-fill":"Ifyllnad","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"Upp","SUPERTREND-down":"Ner","VOLUME-up":"Stigande","VOLUME-fill":"Oförändrad","VOLUME-down":"Fallande","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"Linje","WILLR-up-lineColour":"0 - -20","WILLR-up-fill":"Ifyllnad","WILLR-down-lineColour":"-80 - -100","WILLR-down-fill":"Ifyllnad"},zh:{CONFIG:"参数",STYLE:"风格","AROON-up-line":"上升","AROON-up-cloud":"填充","AROON-down-line":"下跌","AROON-down-cloud":"填充","ATR-line":"线","ATR-fill":"填充","AWESOME-up":"上升","AWESOME-down":"下跌","BOL-positiveBand":"上限","BOL-movingAverageBand":"MA","BOL-negativeBand":"下限","BOL-fill":"填充","CHAIKIN-line":"线","CHAIKIN-fill":"填充","CCI-line":"线","CCI-up-lineColour":"CCI > 100","CCI-up-fill":"填充","CCI-down-lineColour":"CCI < -100","CCI-down-fill":"填充","DONCHIAN-up":"上限","DONCHIAN-middle":"中间线","DONCHIAN-down":"下限","DONCHIAN-fill":"填充","DPO-line":"线","DPO-up-lineColour":"上升","DPO-up-fill":"填充","DPO-down-lineColour":"下跌","DPO-down-fill":"填充","DMI-diPlus":"DI+","DMI-diMinus":"DI-","DMI-adx":"ADX","DMI-histogram-up":"直方图 +","DMI-histogram-down":"直方图 -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"延迟线","ICHIMOKU-kijun":"基准线","ICHIMOKU-tenkan":"转折线","ICHIMOKU-spanA":"先行上线","ICHIMOKU-spanB":"先行下线","ICHIMOKU-cloudUp":"云","ICHIMOKU-cloudDown":"云","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"上限","KELTNER-middle":"MA","KELTNER-down":"下限","KELTNER-fill":"填充","MACD-macd":"MACD","MACD-signal":"信号线","MACD-histogram-up":"直方图 +","MACD-histogram-down":"直方图 -","MOMENTUM-line":"线","MOMENTUM-up-lineColour":"上升","MOMENTUM-up-fill":"填充","MOMENTUM-down-lineColour":"下跌","MOMENTUM-down-fill":"填充","MFI-line":"线","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"填充","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"填充","MVAVG-movingAverage1":"MA {period1}","MVAVG-movingAverage2":"MA {period2}","MVAVG-movingAverage3":"MA {period3}","MVAVG-movingAverage4":"MA {period4}","MVAVG-movingAverage5":"MA {period5}","MVAVG-movingAverage6":"MA {period6}","MVAVG-movingAverage7":"MA {period7}","MVAVG-movingAverage8":"MA {period8}","SAR-up":"上升","SAR-down":"下跌","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"基准","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"线","ROC-up-lineColour":"上升","ROC-up-fill":"填充","ROC-down-lineColour":"下跌","ROC-down-fill":"填充","RSI-line":"线","RSI-up-lineColour":"强弱 > 70","RSI-up-fill":"填充","RSI-down-lineColour":"强弱 < 30","RSI-down-fill":"填充","STDEV-line":"线","STDEV-fill":"填充","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"上升","SUPERTREND-down":"下跌","VOLUME-up":"上升","VOLUME-fill":"不变","VOLUME-down":"下降","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"线","WILLR-up-lineColour":"0至-20","WILLR-up-fill":"填充","WILLR-down-lineColour":"-80至-100","WILLR-down-fill":"填充"},zh_TW:{CONFIG:"參數",STYLE:"風格","AROON-up-line":"上升","AROON-up-cloud":"填充","AROON-down-line":"下跌","AROON-down-cloud":"填充","ATR-line":"線","ATR-fill":"填充","AWESOME-up":"上升","AWESOME-down":"下跌","BOL-positiveBand":"上限","BOL-movingAverageBand":"移動平均值","BOL-negativeBand":"下限","BOL-fill":"填充","CHAIKIN-line":"線","CHAIKIN-fill":"填充","CCI-line":"線","CCI-up-lineColour":"商品通道 > 100","CCI-up-fill":"填充","CCI-down-lineColour":"商品通道 < -100","CCI-down-fill":"填充","DONCHIAN-up":"上限","DONCHIAN-middle":"中間線","DONCHIAN-down":"下限","DONCHIAN-fill":"填充","DPO-line":"線","DPO-up-lineColour":"上升","DPO-up-fill":"填充","DPO-down-lineColour":"下跌","DPO-down-fill":"填充","DMI-diPlus":"動向指標+","DMI-diMinus":"動向指標-","DMI-adx":"平均動向指標","DMI-histogram-up":"柱狀圖 +","DMI-histogram-down":"柱狀圖 -","EMA-ema1":"EMA {period1}","EMA-ema2":"EMA {period2}","EMA-ema3":"EMA {period3}","EMA-ema4":"EMA {period4}","EMA-ema5":"EMA {period5}","EMA-ema6":"EMA {period6}","EMA-ema7":"EMA {period7}","EMA-ema8":"EMA {period8}","ICHIMOKU-chikou":"延遲線","ICHIMOKU-kijun":"基準線","ICHIMOKU-tenkan":"轉折線","ICHIMOKU-spanA":"先行上線","ICHIMOKU-spanB":"先行下線","ICHIMOKU-cloudUp":"雲","ICHIMOKU-cloudDown":"雲","KDJ-stochasticK":"%K","KDJ-stochasticD":"%D","KDJ-stochasticJ":"%J","KELTNER-up":"上限","KELTNER-middle":"移動平均值","KELTNER-down":"下限","KELTNER-fill":"填充","MACD-macd":"MACD","MACD-signal":"信號線","MACD-histogram-up":"柱狀圖 +","MACD-histogram-down":"柱狀圖 -","MOMENTUM-line":"線","MOMENTUM-up-lineColour":"上升","MOMENTUM-up-fill":"填充","MOMENTUM-down-lineColour":"下跌","MOMENTUM-down-fill":"填充","MFI-line":"線","MFI-up-lineColour":"MFI > 80","MFI-up-fill":"填充","MFI-down-lineColour":"MFI < 20","MFI-down-fill":"填充","MVAVG-movingAverage1":"MA {period1}","MVAVG-movingAverage2":"MA {period2}","MVAVG-movingAverage3":"MA {period3}","MVAVG-movingAverage4":"MA {period4}","MVAVG-movingAverage5":"MA {period5}","MVAVG-movingAverage6":"MA {period6}","MVAVG-movingAverage7":"MA {period7}","MVAVG-movingAverage8":"MA {period8}","SAR-up":"上升","SAR-down":"下跌","PIVOT-r3":"R3","PIVOT-r2":"R2","PIVOT-r1":"R1","PIVOT-pivot":"樞軸","PIVOT-s1":"S1","PIVOT-s2":"S2","PIVOT-s3":"S3","ROC-line":"線","ROC-up-lineColour":"上升","ROC-up-fill":"填充","ROC-down-lineColour":"下跌","ROC-down-fill":"填充","RSI-line":"線","RSI-up-lineColour":"RSI > 70","RSI-up-fill":"填充","RSI-down-lineColour":"RSI < 30","RSI-down-fill":"填充","STDEV-line":"線","STDEV-fill":"填充","STOCH-stochasticK":"%K","STOCH-stochasticD":"%D","SUPERTREND-up":"上升","SUPERTREND-down":"下跌","VOLUME-up":"上升","VOLUME-fill":"不變","VOLUME-down":"下降","WMA-wma1":"WMA {period1}","WMA-wma2":"WMA {period2}","WMA-wma3":"WMA {period3}","WMA-wma4":"WMA {period4}","WMA-wma5":"WMA {period5}","WMA-wma6":"WMA {period6}","WMA-wma7":"WMA {period7}","WMA-wma8":"WMA {period8}","WILLR-line":"線","WILLR-up-lineColour":"0至-20","WILLR-up-fill":"填充","WILLR-down-lineColour":"-80至-100","WILLR-down-fill":"填充"}})})),define("module/core/js/indicator/calculator/calculatoroutputfilterwrapper",["require","module/core/js/util/array","module/core/js/util/dateutils","module/core/js/util/functional","module/core/js/util/object"],(function(e){"use strict";function t(e){this._delegate=e}var n=e("module/core/js/util/array"),i=e("module/core/js/util/dateutils"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/object"),s=n.firstOf,a=n.lastOf;t.filterCalculatorOutput=function(e,n){return n||e.isDisplaced?new t(e):e};var l=t.prototype;return l._delegate=null,r.defineProperty(l,"isDisplaced",{get:function(){return!!this._delegate.isDisplaced},set:o.throwError("attempt to modify immutable property")}),l.withDisplacementIterator=function(e){return this._delegate.withDisplacementIterator(e),this},l.withConsolidationTimezoneOffset=function(e){return this._delegate.withConsolidationTimezoneOffset(e),this},l.calculatePoints=function(e,t,i,o){var r,s=n.inPlaceConcat([e],t),a=this.isDisplaced?this._displacedPointsInBlocksRange.bind(this):this._pointsInBlocksRange.bind(this);return this.isDisplaced&&s.push(i),s.push(o),r=this._delegate.calculatePoints.apply(this._delegate,s),a(r,i)},l._pointsInBlocksRange=function(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[s(t).start,a(t).end];return e.filter((function(e){return i.inRange(n,e.date)}))},l._displacedPointsInBlocksRange=function(e,t){if(!e||!e.length)return[];var n;return n=a(t).isLastOfInstrument()?[s(t),{end:new Date(a(e).date.getTime()+1)}]:t,this._pointsInBlocksRange(e,n)},Object.seal(l),t})),define("module/core/js/indicator/compositeindicator",["require","module/core/js/indicator/baseindicator","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/core/js/indicator/indicator","module/core/js/util/object"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this),this.name=e,this.outputPointTypes=i.map(s.plucker("outputPointType")),this.studyName=n,this.indicators=i}function n(e){u[e]=function(){return s.invokeApply(this.indicators,e,arguments),this}}var i=e("module/core/js/indicator/baseindicator"),o=e("module/core/js/util/array"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/core/js/indicator/indicator"),l=e("module/core/js/util/object");r.extend(t,i),t.create=function(e,n,i){return new t(e,n,i)};var u=t.prototype;return u.name=null,u.shortLabelType=a.DEFAULT_SHORT_LABEL,u.epic=null,u.resolution=null,u._indicatorAvailability=null,u._resolutionChooser=null,u.outputPointTypes=null,u.studyName=null,u.indicators=null,u._settings=null,u._tooltipSettings=null,u._settingsConstraints=null,u.withIndicatorAvailability=s.setter("_indicatorAvailability"),u.isAvailable=s.delegate("_indicatorAvailability","isAvailable"),u.getUnavailabilityReason=s.delegate("_indicatorAvailability","getUnavailabilityReason"),u.activateAvailability=function(){this._indicatorAvailability.initialiseIfNeeded(),s.invokeCall(this.indicators,"activateAvailability")},u.deactivateAvailability=function(){this._indicatorAvailability.destroy(),s.invokeCall(this.indicators,"deactivateAvailability")},u.withResolutionChooser=s.setter("_resolutionChooser"),u.withSettings=s.setter("_settings"),u.getSettings=function(){return l.deepCopyLiteral({},this._settings)},u.withTooltipSettings=s.setter("_tooltipSettings"),u.getTooltipSettings=s.getter("_tooltipSettings"),u.withSettingsConstraints=s.setter("_settingsConstraints"),u.getSettingsConstraints=s.getter("_settingsConstraints"),u.hasPreferredHeight=function(){return!(!this._settings||!this._settings.preferredHeight)},u.getPreferredHeight=function(){return this.hasPreferredHeight()?this._settings.preferredHeight:0},u.setPreferredHeight=function(e){return this._settings.preferredHeight=e,this},u.getInputs=function(){var e,t=[];for(e=0;e<this.indicators.length;e++)t=t.concat(this.indicators[e].getInputs());return t},u.getCurrentRendererNames=function(){var e,t=[];for(e=0;e<this.indicators.length;e++)o.inPlaceConcat(t,this.indicators[e].getCurrentRendererNames());return t},u.isOutputShownOnTooltip=function(e){for(var t=0;t<this.indicators.length;t++)if(this.indicators[t].outputPointType===e)return this.indicators[t].isOutputShownOnTooltip();return!1},u.setEpic=function(e){this.epic=e,s.invokeApply(this.indicators,"setEpic",[e])},u.setResolution=function(e){this._indicatorAvailability.withResolution(e),this.resolution=this._resolutionChooser.chooseResolution(this._settings,e),s.invokeCall(this.indicators,"setResolution",this.resolution)},n("startCalculating"),n("stopCalculating"),n("on"),n("un"),Object.seal(u),Object.seal(t)})),define("module/core/js/view/component/dialog/constraint/enumeratedsettingconstraints",["require","module/core/js/util/array","module/core/js/util/functional"],(function(e){"use strict";function t(e,t,n){this.options=e,this.defaultValue=t,this._i18n=n}var n=e("module/core/js/util/array"),i=e("module/core/js/util/functional");t.createFrom=function(e){
return new t(e.options,e.defaultValue,e.i18n)};var o=t.prototype;return o.viewType="TOGGLE",o.options=null,o.defaultValue=0,o._i18n=null,o.getTextForValue=function(e){var t=n.find(this.options,i.propertyComparator("value",e));return this._i18n.get(t.localisationKey)},Object.seal(t.prototype),Object.seal(t)})),define("module/core/js/indicator/calculator/identitycalculator",["require","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=t.prototype;return i.calculatePoints=n.identity,Object.seal(i),Object.seal(t)})),define("module/core/js/indicator/input/indicatorinputexpansiondecorator",["require","module/core/js/indicator/rendererchooser/abstractrendererchooser","module/core/js/util/array","module/core/js/util/functional","module/core/js/model/openperiod"],(function(e){"use strict";function t(e,t){this._delegate=e,this._rendererChooser=t}var n=e("module/core/js/indicator/rendererchooser/abstractrendererchooser"),i=e("module/core/js/util/array"),o=e("module/core/js/util/functional"),r=e("module/core/js/model/openperiod"),s=i.unique,a=i.inPlaceConcat,l=i.shallowCopy,u=t.prototype;return u._delegate=null,u._rendererChooser=null,u._expansionFns=[],u._expand=function(e){var t=e?l(e):[],n=this._delegate.getInputPointType();return this._expansionFns.forEach((function(i){a(t,i(e,n))})),s(t).sort(r.naturalOrder)},u.startRequestingPointsVia=function(e){this._updateExpansionFns(),this._rendererChooser.on(n.CHOICE_CHANGED,this._updateExpansionFns,this),this._delegate.startRequestingPointsVia.apply(this._delegate,arguments)},u._updateExpansionFns=function(){this._expansionFns=this._rendererChooser.getCurrentExpansionFunctions()},u.stopRequestingPointsVia=function(e){this._rendererChooser.un(null,this),this._delegate.stopRequestingPointsVia.apply(this._delegate,arguments)},u.collatePointsForBlocks=function(e){this._delegate.collatePointsForBlocks(this._expand(e))},u.on=o.delegate("_delegate","on"),u.un=o.delegate("_delegate","un"),Object.seal(u),t})),define("module/core/js/indicator/rendererchooser/staticrendererchooser",["require","module/core/js/indicator/rendererchooser/abstractrendererchooser","module/core/js/util/class","module/core/js/util/functional"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/indicator/rendererchooser/abstractrendererchooser"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional");i.extend(t,n);var r=t.prototype;return r.startNotifyingRendererChanges=o.emptyChainable,r.stopNotifyingRendererChanges=o.emptyChainable,Object.seal(r),t})),define("module/core/js/indicator/indicatorfactory",["require","module/core/js/indicator/rendererchooser/abstractrendererchooser","module/indicators/js/availability/baseindicatoravailability","module/core/js/indicator/calculator/calculatoroutputfilterwrapper","module/core/js/indicator/compositeindicator","module/core/js/view/component/dialog/constraint/enumeratedsettingconstraints","module/core/js/indicator/calculator/identitycalculator","module/core/js/indicator/indicator","module/core/js/indicator/input/indicatorinputexpansiondecorator","module/core/js/view/component/dialog/constraint/numericsettingconstraints","module/core/js/util/object","module/indicators/js/resolutionchooser/resolutionchooser","module/core/js/indicator/rendererchooser/staticrendererchooser"],(function(e){"use strict";function t(e,t){this._eventBus=e,this._indicatorsConfigAggregator=t}var n=e("module/core/js/indicator/rendererchooser/abstractrendererchooser"),i=e("module/indicators/js/availability/baseindicatoravailability"),o=e("module/core/js/indicator/calculator/calculatoroutputfilterwrapper"),r=e("module/core/js/indicator/compositeindicator"),s=e("module/core/js/view/component/dialog/constraint/enumeratedsettingconstraints"),a=e("module/core/js/indicator/calculator/identitycalculator"),l=e("module/core/js/indicator/indicator"),u=e("module/core/js/indicator/input/indicatorinputexpansiondecorator"),c=e("module/core/js/view/component/dialog/constraint/numericsettingconstraints"),d=e("module/core/js/util/object"),h=e("module/indicators/js/resolutionchooser/resolutionchooser"),p=e("module/core/js/indicator/rendererchooser/staticrendererchooser");t.create=function(e,n){return new t(e,n)},t.CONSTRAINT_TYPES={number:c,enum:s};var m=t.prototype;return m._eventBus=null,m._indicatorsConfigAggregator=null,m.getNames=function(){return this._indicatorsConfigAggregator.getNames()},m.createIndicator=function(e,t,n){var i=this._indicatorsConfigAggregator.getConfig(e);return i?(t=t||{},t=this._convertNumericStringInSettingsToNumber(t),i.subIndicators?this._createCompositeIndicator(e,i,t,n):this._createSingleIndicator(e,i,t,n)):null},m.updateIndicator=function(e,t,n){var i=this._indicatorsConfigAggregator.getConfig(e.name);return i?(t=t||{},t=this._convertNumericStringInSettingsToNumber(t),i.subIndicators?(e.indicators=this._createComponentIndicators(i.subIndicators,t,n),e.withSettings(t),e.withVisibilitySettings(n)):this._configureSingleIndicator(e,i,t,n),e):null},m._convertNumericStringInSettingsToNumber=function(e){for(var t in e)e[t]=parseFloat(e[t]);return e},m._createCompositeIndicator=function(e,t,n,o){var s,a,l=this._createComponentIndicators(t.subIndicators,n,o),u=t.resolutionChooser||h;if(0!==l.length)return a=r.create(e,t.study,l).withStylesMapping(t.stylesMapping).withResolutionChooser(u.create()).withSettings(n).withVisibilitySettings(o).withSettingsConstraints(this._createSettingsConstraints(t)),s=(t.availability||i).create(a,this._eventBus),a.withIndicatorAvailability(s.initialise()),t.tooltipSettings&&a.withTooltipSettings(t.tooltipSettings),a},m._createComponentIndicators=function(e,t,n){var i,o,r,s=[];for(i in e)o=e[i],(r=this._createSingleIndicator(i,o,t,n))&&s.push(r);return s},m._createSingleIndicator=function(e,t,n,i){return this._configureSingleIndicator(l.create(e,t.study),t,n,i)},m._configureSingleIndicator=function(e,t,n,o){var r,s,a,l,u=!1,c=t.calculator,d=c?c.properties:null,p=c?c.arguments:null,m=t.resolutionChooser;if((t.onByDefault||!d&&!p)&&(u=!0),d&&(d=this._createOrdinalFromExpressionsUsingSettings(d,n),u=!0),p&&(p=this._createOrdinalFromExpressionsUsingSettings(p,n),u=!0),u)return s=this._numberOfTrailingPoints(t,n),l=this._createRendererChooser(t),a=this._createSettingsConstraints(t),e.withStylesMapping(t.stylesMapping).withResolutionChooser((m||h).create()).withSettings(n).withVisibilitySettings(o).withSettingsConstraints(a).withOutputPointType(t.outputPointType).withInput(this._createInput(t,t.outputPointType,s,l)).withCalculator(this._createCalculator(t,d,s)).withCalculatorArguments(p).withRendererChooser(l).withShownOnTooltip(void 0===t.showOnTooltip||!!t.showOnTooltip),r=(t.availability||i).create(e,this._eventBus),e.withIndicatorAvailability(r.initialise()),t.tooltipSettings&&e.withTooltipSettings(t.tooltipSettings),t.labelTypes&&e.withLabelTypes(t.labelTypes),e},m._createSettingsConstraints=function(e){var n,i,o,r={};if(e.settings)for(n in l.getModifiableSettings(e.settings))i=e.settings[n],o=t.CONSTRAINT_TYPES[i.type],r[n]=o.createFrom(i);return r},m._numberOfTrailingPoints=function(e,t){var n=e.numberOfTrailingPoints;return n?Math.round(this._createOrdinalFromExpressionUsingSettings(n,t)):0},m._createRendererChooser=function(e){var t,i,o,r=Object.keys(e.renderers),s={},a={initial:r},l=e.rendererChooser,u=l?l.type:p;for(l&&l.choices&&d.applyTo(a,l.choices,!1),o=0;o<r.length;o++)i=r[o],t=e.renderers[i].type,t.getBlocksNeededToRender&&(s[i]=t.getBlocksNeededToRender);return new u(s,this._eventBus).addChoices(a).setChoice(n.INITIAL_CHOICE)},m._createOrdinalFromExpressionsUsingSettings=function(e,t){var n=e instanceof Array?[]:{};return Object.keys(e).forEach((function(i){n[i]=this._createOrdinalFromExpressionUsingSettings(e[i],t)}),this),n},m._createOrdinalFromExpressionUsingSettings=function(e,t){return new Function("settings","return "+e+";")(t)},m._createInput=function(e,t,n,i){var o=e.input,r=o.type,s=new r("prices",t,n);return i.couldProvideExpansionFns()?new u(s,i):s},m._createCalculator=function(e,t,n){var i,r=e.calculator,s=r?r.type:a,l=new s;for(i in t)l[i]=t[i];return o.filterCalculatorOutput(l,n)},Object.seal(m),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/simplecolourcustomisationdialogcontent",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/oop","module/core/js/settings/settingsevents","module/core/js/view/component/dialog/submittabledialogcontent"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,r),this._settingsManager=o}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/oop"),r=e("module/core/js/settings/settingsevents"),s=e("module/core/js/view/component/dialog/submittabledialogcontent");n.extend(t,s),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var a=t.prototype;return a._settingsManager=null,a._styles=null,a._widgets=null,a.initDom=function(e){return t.superclass.initDom.call(this,e),this._styles=this._settingsManager.getColourCustomisationSettings(),this._widgets=this._createStylingWidgets(e.append("div").classed("widgets",!0)),this._settingsManager.on(r.THEME_CHANGED,i.delegate("_dialog","close"),this),this},a._createStylingWidgets=o.abstractMethod,a.setStyle=function(e){this._settingsManager.putColourCustomisationSettings(e,!0),this.destroy(),this.initDom(this.dContainer)},a.resetToDefaults=function(){this._settingsManager.putColourCustomisationSettings(this._styles,!0),this.destroy(),this.initDom(this.dContainer)},a.enable=function(){return i.invokeApply(this._widgets,"enable"),t.superclass.enable.call(this)},a.disable=function(){return i.invokeApply(this._widgets,"disable"),t.superclass.disable.call(this)},a.updateCaptureZones=function(){return i.invokeApply(this._widgets,"updateCaptureZones"),t.superclass.updateCaptureZones.call(this)},a.destroy=function(){this._settingsManager.un(null,this),this._widgets&&(i.invokeApply(this._widgets,"destroy"),this.dContainer.select(".widgets").remove(),this._widgets=null,this._styles=null),t.superclass.destroy.call(this)},Object.seal(a),Object.seal(t)})),define("module/indicator-labels/js/view/component/dialog/indicatorstyledialogcontent",["require","lodash","module/core/js/util/class","module/colour-customisation/js/model/layouts/defaults","module/core/js/view/component/dialog/dialogevents","module/core/js/util/functional","module/indicator-labels/js/i18n","module/core/js/indicator/indicatorfactory","module/core/js/util/math","module/core/js/view/component/dialog/control/numericsettingcontrol","module/core/js/util/object","module/colour-customisation/js/view/component/dialog/simplecolourcustomisationdialogcontent","module/core/js/util/string","module/colour-customisation/js/view/component/stylingwidget"],(function(e){"use strict";function t(e,i,o,r,s,a){t.superclass.constructor.call(this,e,i,o,r,s),this._indicator=a,this._settings=a.getSettings(),this._inlineInputs=[],this._initialValues=n.cloneDeep(this._settings),this._initialStyles=n.cloneDeep(this._settingsManager.getColourCustomisationSettings().indicators[this._indicator.name]||{})}var n=e("lodash"),i=e("module/core/js/util/class"),o=e("module/colour-customisation/js/model/layouts/defaults"),r=e("module/core/js/view/component/dialog/dialogevents"),s=e("module/core/js/util/functional"),a=e("module/indicator-labels/js/i18n"),l=e("module/core/js/indicator/indicatorfactory"),u=e("module/core/js/util/math"),c=e("module/core/js/view/component/dialog/control/numericsettingcontrol"),d=e("module/core/js/util/object"),h=e("module/colour-customisation/js/view/component/dialog/simplecolourcustomisationdialogcontent"),p=e("module/core/js/util/string"),m=e("module/colour-customisation/js/view/component/stylingwidget");i.extend(t,h),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)};var f=t.prototype;return f._enabled=!0,f._initialStyles=null,f._initialValues=null,f._inlineInputs=null,f._createStylingWidgets=function(e){var t=this._styles.indicators[this._indicator.name]||{};return this._generateWidgets(t,this._indicator.name,e,[],this._indicator)},f._getPrintableSettings=function(){var e,t=d.shallowClone(this._indicator.getSettings());for(e in t)u.isNumber(t[e])||(t[e]="");return t},f._inlineInputCallback=function(e,t){this._settings[e]=t,this._eventBus.publish("chart/indicator/update",[this._indicator.name,this._settings,!0])},f._createStylingWidget=function(e,t,n,i,o){var r,s,l,u,c=this._getPrintableSettings(),d=e.getSettingsConstraints(),h=e.getStylesMapping(),f=t.join("-");return l=m.create(n,this._handleNewStyle.bind(this,n),this._taskManager).setCheckboxAvailable(!0),h&&h[f]?(s=h[f],u=this._getComponentForConstraints(d[s],s,c[s],this._inlineInputCallback,l,!0),this._inlineInputs.push(u),l.setInlineComponent(u),r=null):r=p.merge(a.get(o),c),l.initDom(i,this._eventBus,this._captureZoneManager,this._dialog,r,t,n.isVisible,p.merge(a.get(o),c)),l},f._generateWidgets=function(e,t,n,i,o){var r,s=Object.keys(e),a=[];return e.hasOwnProperty("isVisible")?(r=this._createStylingWidget(o,i,e,n,t),a.push(r),a):(s.forEach((function(r){d.isLiteral(e[r])&&a.push.apply(a,this._generateWidgets(e[r],t+"-"+r,n,i.concat(r),o))}),this),a)},f._getComponentForConstraints=function(e,t,n,i,o,s){var a;if(e instanceof l.CONSTRAINT_TYPES.number)return a=c.create(null,this._indicator.name,t,e,n,s),a.withCaptureZoneManager(this._captureZoneManager),a.on(r.VALUE_CHANGED,i,this),a.on(r.VALUE_ADDED,o.changeCheckboxStateAndVisibility.bind(o,!0)),a},f.resetToDefaults=function(){o.resetToDefaults(this._styles.indicators[this._indicator.name],["indicators",this._indicator.name],this._styles.themeSettingsMode),s.invokeApply(this._inlineInputs,"reset"),t.superclass.resetToDefaults.call(this)},f.enable=function(){return this._enabled=!0,t.superclass.enable.call(this)},f.disable=function(){return this._enabled=!1,t.superclass.disable.call(this)},f.destroy=function(){s.invokeApply(this._inlineInputs,"un",[null,this]),s.invokeApply(this._inlineInputs,"destroy"),this._eventBus.unsubscribeAll(this),t.superclass.destroy.call(this)},f.revertChanges=function(){this._styles.indicators[this._indicator.name]=this._initialStyles,this._settingsManager.putColourCustomisationSettings(this._styles,!0),Object.keys(this._initialValues).forEach((function(e){this._settings[e]=this._initialValues[e]}),this),this._eventBus.publish("chart/indicator/update",[this._indicator.name,this._settings,!0])},f.save=s.emptyChainable,f._handleNewStyle=function(e,t,n){e[t]=n,this._settingsManager.putColourCustomisationSettings(this._styles,!0)},Object.seal(f),Object.seal(t)})),define("module/indicator-labels/js/view/component/dialog/indicatorsettingsstackcontent",["require","module/core/js/view/component/button","module/core/js/util/class","module/core/js/util/functional","module/core/js/i18n","module/indicator-labels/js/view/component/dialog/indicatorconfigdialogcontent","module/indicator-labels/js/view/component/dialog/indicatorstyledialogcontent","module/core/js/view/component/dialog/submittabledialogcontent","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o,r,s){t.superclass.constructor.call(this,e,n,i,r),this._indicator=s,this._settingsManager=o}var n=e("module/core/js/view/component/button"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/i18n"),s=e("module/indicator-labels/js/view/component/dialog/indicatorconfigdialogcontent"),a=e("module/indicator-labels/js/view/component/dialog/indicatorstyledialogcontent"),l=e("module/core/js/view/component/dialog/submittabledialogcontent"),u=e("module/core/js/enum/zindexenum");i.extend(t,l),t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)},t.getSettingsDialogContent=function(e){return e.getStylesMapping()?[{name:"STYLE",type:a}]:[{name:"CONFIG",type:s},{name:"STYLE",type:a}]};var c=t.prototype;return c._indicator=null,c._indicatorSettingsContents=null,c.initDom=function(e){var n=e.append("div").classed("content selected",!0);return t.superclass.initDom.call(this,n),this._indicatorSettingsContents=t.getSettingsDialogContent(this._indicator).map(this._initContentItem.bind(this,n)),this._addResetToDefaultButton(e),this._initialiseActionButtons(e),this},c._initContentItem=function(e,t){return t.type.create.call(t.type,this._dialog,this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager,this._indicator).initDom(e)},c._initialiseActionButtons=function(e){this._dButtonContainer=e.append("div").classed("actions",!0).append("div").classed("actionButtons",!0),this._createDoneButton(this._onDoneButtonPressed,r.get("BUTTON_APPLY")),this._createCancelButton(this._onCancelButtonPressed)},c._addResetToDefaultButton=function(e){this._resetToDefaultsButton=n.create().initDom(e,"resetToDefault linkButton").setText(r.get("BUTTON_RESET_TO_DEFAULTS")).startListening(this._captureZoneManager,this._onResetButtonPressed.bind(this),u.DIALOG_CONTROLS)},c._onDoneButtonPressed=function(){o.invokeCall(this._indicatorSettingsContents,"save")},c._onResetButtonPressed=function(){o.invokeCall(this._indicatorSettingsContents,"resetToDefaults")},c._onCancelButtonPressed=function(){o.invokeCall(this._indicatorSettingsContents,"revertChanges")},c.updateCaptureZones=function(){return this._resetToDefaultsButton.updateCaptureZone(),o.invokeCall(this._indicatorSettingsContents,"updateCaptureZones"),t.superclass.updateCaptureZones.call(this)},c.destroy=function(){o.invokeCall(this._indicatorSettingsContents,"destroy"),this._resetToDefaultsButton.destroy(),this._resetToDefaultsButton=null,this._dFullButtonContainer&&(this._dFullButtonContainer.remove(),this._dFullButtonContainer=null),t.superclass.destroy.call(this)},Object.seal(c),Object.seal(t)})),define("module/indicator-labels/js/view/component/dialog/indicatorsettingsdialog",["require","module/core/js/view/component/dialog/abstractdialog","module/core/js/util/class","module/indicator-labels/js/view/component/dialog/indicatorsettingsstackcontent","module/indicators/js/i18n","module/core/js/config/taskconfig"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,o),this._settingsManager=i,this._indicator=r}var n=e("module/core/js/view/component/dialog/abstractdialog"),i=e("module/core/js/util/class"),o=e("module/indicator-labels/js/view/component/dialog/indicatorsettingsstackcontent"),r=e("module/indicators/js/i18n"),s=e("module/core/js/config/taskconfig");i.extend(t,n),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var a=t.prototype;return a._indicator=null,a._settingsManager=null,a._getDialogTitle=function(){return r.get(this._indicator.name)},a._getDialogClasses=function(){return"indicatorSettings "+this._indicator.name},a._createContent=function(e){return o.create(this,this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager,this._indicator).initDom(e)},a._getTaskConfig=function(){return s.NON_CONCURRENT_DIALOG},Object.seal(a),Object.seal(t)})),define("module/indicator-labels/js/indicator-labels",["require","module/core/js/view/component/dialog/abstractdialog","module/indicator-labels/js/config/subviewsconfig","module/indicator-labels/js/view/component/dialog/indicatorsettingsdialog"],(function(e){"use strict";function t(e,t,n,i,o,r,s,a){this._eventBus=e,this._moduleLoader=n,this._settingsManager=o,this._containerProvider=r,this._taskManager=a}var n=e("module/core/js/view/component/dialog/abstractdialog"),i=e("module/indicator-labels/js/config/subviewsconfig"),o=e("module/indicator-labels/js/view/component/dialog/indicatorsettingsdialog"),r=t.prototype;return r._moduleLoader=null,r._chartView=null,r._dialog=null,r._eventBus=null,r._captureZoneManager=null,r._settingsManager=null,r._containerProvider=null,r._taskManager=null,r._showIndicatorSettings=function(e){this._dialog=o.create(this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager,e),this._dialog.initDom(this._containerProvider.getContainer("top-html")).makeScrollable(),this._dialog.on(n.CLOSE,this._onDialogClose,this)},r._handleChartViewReady=function(e,t,n){this._captureZoneManager=t,this._chartView=e},r.init=function(){this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._eventBus.subscribe("chart/indicator/show-settings",this._showIndicatorSettings,this),this._eventBus.publish("subViews/config",["indicatorLabels",i]),this._chartView&&this._chartView.addRenderersBySubviewConfig(i),this._moduleLoader.getModule("indicators").setTitlesVisibility(!1)},r.destroy=function(){this._eventBus.unsubscribeAll(this),this._eventBus.publish("subViews/removeConfig",["indicatorLabels"]),this._chartView&&this._chartView.removeRenderersBySubviewConfig(i),this._dialog&&(this._dialog.destroy(),this._dialog=null),this._moduleLoader.getModule("indicators").setTitlesVisibility(!0)},r._onDialogClose=function(){this._dialog.un(null,this)},Object.seal(t.prototype),Object.seal(t)})),define("module/core/js/view/yfitter/abstractdatafitter",["require","module/core/js/util/array","module/core/js/model/block","module/core/js/util/numberpairs","module/core/js/util/object","module/core/js/util/oop","module/core/js/model/visibledaterangeevents","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/array"),i=e("module/core/js/model/block"),o=e("module/core/js/util/numberpairs"),r=e("module/core/js/util/object"),s=e("module/core/js/util/oop"),a=e("module/core/js/model/visibledaterangeevents"),l=e("module/core/js/view/visiblewindow");t.PRICE_EXPAND_AMOUNT=.2,t.MINIMUM_PRICE_RANGE=1e-5;var u=t.prototype;return u._visibleWindow=null,u._instantAnimation=!1,u._ignoreDomainNicing=!1,u.startProvidingFitForVisibleWindow=function(e){this._visibleWindow=e,this._subscribeToVisibleBlockEvents(),e.on(l.POINT_TYPES_CHANGED,(function(){this._subscribeToVisibleBlockEvents(),this.fit()}),this)},u.stopProvidingFitForVisibleWindow=function(){this._visibleWindow.visibleDateRange.un(null,this),this._visibleWindow.un(null,this)},u._subscribeToVisibleBlockEvents=function(){var e,t=this._visibleWindow.getPointTypes(),i=n.flatten(r.values(t));for(this._visibleWindow.visibleDateRange.un(null,this),this._visibleWindow.visibleDateRange.on(a.MOVED,this.fit,this),this._visibleWindow.visibleDateRange.on(a.MOVED_INTO_BOUNDS,this.fit,this),e=0;e<i.length;e++)this._visibleWindow.visibleDateRange.on(a.VISIBLE_BLOCKS_POINTS_ADDED+"-"+i[e],this.fit,this)},u.fit=function(){var e,t,n=this._getVisibleBlocksValueRange();this.isCapableOfFittingForRange(n)&&(e=this.expandPriceRange(n),t=o.reverseRange(e),this._visibleWindow.y.domain(t,this._instantAnimation,this._ignoreDomainNicing))},u._getVisibleBlocksValueRange=function(){var e,t,n=this._visibleWindow.visibleDateRange.getAllVisibleBlockRanges(),i=[],o=function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]};for(t in n)e=this._getValueDomain(t,n[t]),i.push(e);var r=i.reduce(o,[1/0,-1/0]);return isFinite(r[0])&&isFinite(r[1])&&"number"==typeof r[0]&&"number"==typeof r[1]?r:null},u._getValueDomain=function(e,t){var n,o=this._visibleWindow.getPointTypes();return o[e]&&(n=o[e].filter(this._excludePointTypes,this)),i.blocksYDomainForAccRange(t,n,[this._visibleWindow.visibleDateRange.accStart(),this._visibleWindow.visibleDateRange.accEnd()])},u._excludePointTypes=function(e){return"prices"!==this._visibleWindow.name||"prices"===e},u.isCapableOfFittingForRange=s.abstractMethod,u.expandPriceRange=s.abstractMethod,Object.seal(u),t})),define("module/core/js/view/yfitter/alwaysincluderangefitter",["require","module/core/js/view/yfitter/abstractdatafitter","module/core/js/util/class","module/core/js/util/numberpairs"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/yfitter/abstractdatafitter"),i=e("module/core/js/util/class"),o=e("module/core/js/util/numberpairs");i.extend(t,n);var r=t.prototype;return r.min=0,r.max=0,r.expandPriceRange=function(e){var t,i=e[0],r=e[1];return i=Math.min(i,this.min),r=Math.max(r,this.max),t=o.expandProportionally(n.PRICE_EXPAND_AMOUNT,[i,r]),o.minimumExtent(n.MINIMUM_PRICE_RANGE,t)},r.isCapableOfFittingForRange=function(e){return!!e&&!this._visibleWindow.visibleDateRange.isOutOfBounds()},Object.seal(r),t})),define("module/core/js/view/yfitter/fixablefollowdatafitter",["require","module/core/js/view/yfitter/abstractdatafitter","module/core/js/util/class","module/core/js/util/math","module/core/js/util/numberpairs"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/yfitter/abstractdatafitter"),i=e("module/core/js/util/class"),o=e("module/core/js/util/math"),r=e("module/core/js/util/numberpairs");i.extend(t,n);var s=t.prototype;return s.min=null,s.max=null,s.extendBottom=!1,s.extendTop=!1,s.expandPriceRange=function(e){var t,i,s=o.isNumber(this.min),a=o.isNumber(this.max),l=[];return l[0]=s?this.min:e[0],l[1]=a?this.max:e[1],t=r.rangeExtent(l),i=t*n.PRICE_EXPAND_AMOUNT*.5,l[0]-=this.extendBottom?i:0,l[1]+=this.extendTop?i:0,this._ensureMinimumExtent(l,s,a)},s._ensureMinimumExtent=function(e,t,i){var o=n.MINIMUM_PRICE_RANGE;if(Math.abs(r.rangeExtent(e))<o){var s=r.midPoint(e);t?e[1]=s+o:i&&(e[0]=s-o)}return e},s.isCapableOfFittingForRange=function(e){return!!e&&!this._visibleWindow.visibleDateRange.isOutOfBounds()},Object.seal(s),Object.seal(t)})),define("module/core/js/view/yfitter/fixedfitter",["require","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=t.prototype;return i.min=null,i.max=null,i.startProvidingFitForVisibleWindow=function(e){e.y.domain([this.max,this.min])},i.stopProvidingFitForVisibleWindow=n.empty,Object.seal(i),t})),define("module/core/js/view/yfitter/followdatafitter",["require","module/core/js/ext/d3","module/core/js/view/yfitter/abstractdatafitter","module/core/js/util/class","module/core/js/util/numberpairs"],(function(e){"use strict";function t(){}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/yfitter/abstractdatafitter"),o=e("module/core/js/util/class"),r=e("module/core/js/util/numberpairs");o.extend(t,i);var s=t.prototype;return s.verticalPadding=null,s.expandPriceRange=function(e){var t,o,s,a;return null!==this.verticalPadding&&void 0!==this.verticalPadding?(o=this._calculateExpandAmount(),s=this._visibleWindow.y.range(),a=n.scale.linear().domain(e).range([s[0]+o,s[1]-o]),t=[a.invert(s[0]),a.invert(s[1])]):t=r.expandProportionally(i.PRICE_EXPAND_AMOUNT,e),r.minimumExtent(i.MINIMUM_PRICE_RANGE,t)},s._calculateExpandAmount=function(){return Math.min(this.verticalPadding/2,this._visibleWindow.height()/4)},s.isCapableOfFittingForRange=function(e){return!!e&&!this._visibleWindow.visibleDateRange.isOutOfBounds()},Object.seal(s),t})),define("text!module/core/svg/resize_icon.svg",[],(function(){return'<svg width="24" height="9" viewBox="0 0 24 9" xmlns="http://www.w3.org/2000/svg"\n     xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <rect id="a" width="24" height="9" rx="2"/>\n        <mask id="b" x="0" y="0" width="24" height="9" fill="#fff">\n            <use xlink:href="#a"/>\n        </mask>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <use class="outerBox" stroke="#9696A2" mask="url(#b)" stroke-width="2" xlink:href="#a"/>\n        <rect class="handleBar" fill="#9696A2" x="6" y="3" width="12" height="1" rx=".5"/>\n        <rect class="handleBar" fill="#9696A2" x="6" y="5" width="12" height="1" rx=".5"/>\n    </g>\n</svg>'})),define("module/core/js/view/studyview",["require","module/core/js/util/array","module/core/js/util/class","module/core/js/util/error","module/core/js/util/functional","module/core/js/indicator/indicator","module/core/js/util/log","module/core/js/util/math","module/core/js/util/object","module/core/js/view/subview","module/core/js/util/svg"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments),this._indicators=[]}var n=e("module/core/js/util/array"),i=e("module/core/js/util/class"),o=e("module/core/js/util/error"),r=e("module/core/js/util/functional"),s=e("module/core/js/indicator/indicator"),a=e("module/core/js/util/log"),l=e("module/core/js/util/math"),u=e("module/core/js/util/object"),c=e("module/core/js/view/subview"),d=e("module/core/js/util/svg");i.extend(t,c),t.INDICATOR_ADDED="indicatorAdded",t.INDICATOR_REMOVED="indicatorRemoved";var h=t.prototype;return h.instrumentScaling=!1,h.positions=u.recursiveFreeze([{name:"yTicks",clipPathNeeded:!1},{name:"body",clipPathNeeded:!0},{name:"studyOverlay",clipPathNeeded:!0},{name:"centre",clipPathNeeded:!1},{name:"northWest",clipPathNeeded:!1},{name:"northEast",clipPathNeeded:!1},{name:"southWest",clipPathNeeded:!1},{name:"yAxis",clipPathNeeded:!1}]),h.relativeSize=1,h._dDivider=null,h._isZooming=!1,h._yFitter=null,h._zoomEnabled=!1,h._mainIndicator=null,h._indicators=null,h.withInstrumentScaling=r.setter("instrumentScaling"),h.withYFitter=r.setter("_yFitter"),h.withZoom=r.setter("_zoomEnabled"),h.getMainIndicator=r.getter("_mainIndicator"),h.getRelativeSize=function(){var e;return n.nonEmpty(this._indicators)&&(e=this._mainIndicator.getPreferredHeight()),l.isNumber(e)?e:this.relativeSize},h.isInChartSpace=r.returns(!0),h.withRelativeSize=function(e){return this._mainIndicator&&this._mainIndicator.getSettings()?this._mainIndicator.setPreferredHeight(e):this.relativeSize=e,this},h.isRelativelyPositioned=r.returns(!0),h.setVisibleWindow=function(e){var n=this.visibleWindow;return t.superclass.setVisibleWindow.apply(this,arguments),n&&this._yFitter.stopProvidingFitForVisibleWindow(),this._yFitter.startProvidingFitForVisibleWindow(e),this._zoomEnabled&&(this._isZooming=!1,this._eventBus.unsubscribeAll(this),this._eventBus.subscribe("chart/pan/change/vertical",this._handleVerticalPan,this),this._eventBus.subscribe("chart/pan/change/horizontal",this._handleHorizontalPan,this),this._eventBus.subscribe("chart/zoom/change/vertical",this._handleVerticalZoom,this),this._eventBus.subscribe("chart/zoom/drag/vertical",this._handleDragZoom,this),this._eventBus.subscribe("chart/zoom/wheel/vertical",this._handleVerticalWheelZoom,this),this._eventBus.subscribe("chart/yfitting/reset",this._handleYFittingReset,this)),this},h.addIndicator=function(e){try{e.isAvailable()&&(this.visibleWindow.addPointTypes(e.epic,e.resolution,e.outputPointTypes),this.addRenderers(this._rendererFactory.makeRenderersForIndicator(e))),this._indicators.push(e),null===this._mainIndicator&&(this._mainIndicator=e),e.on(s.RENDERERS_CHANGED,this._recreateIndicator.bind(this,e),this),this.fire(t.INDICATOR_ADDED,e)}catch(e){if(a.error("Exception caught: ",e.message),o.isInDebug())throw e}},h.removeIndicator=function(e){e.un(null,this),n.remove(this._indicators,e),e.isAvailable()&&(this.visibleWindow&&this.visibleWindow.removePointTypes(e.epic,e.resolution,e.outputPointTypes),this.removeGroupOfRenderers(e.name)),this.fire(t.INDICATOR_REMOVED,e)},h.updateRelativeSize=function(e){var t=this.getRelativeSize(),n=this.getRelativeSize()+e;return e<0?(this.withRelativeSize(Math.max(n,this.minHeight)),e+=t-this.getRelativeSize()):(this.withRelativeSize(Math.min(n,1)),e-=this.getRelativeSize()-t),e},h.initDom=function(){var e=t.superclass.initDom.call(this);return this._dDivider=this.dContainer.append("svg:line").classed("innerBorder",!0).attr({x1:0,x2:0,y1:0,y2:0}),e},h.destroyDom=function(){var e=t.superclass.destroyDom.call(this);return this._dDivider&&(this._dDivider.remove(),delete this._dDivider),e},h.updateDimensions=function(e,n,i,o){t.superclass.updateDimensions.apply(this,arguments),this._updateClipRectDimensions(e),this._getPositionDomContainer("yAxis").attr("transform",d.svgTranslateAttrX(i)),this._getPositionDomContainer("centre").attr("transform",d.svgTranslateAttrXY(e.width/2,e.height/2)),this._getPositionDomContainer("northEast").attr("transform",d.svgTranslateAttrX(e.width-this._chartView.rightMargin)),
this._getPositionDomContainer("southWest").attr("transform",d.svgTranslateAttrY(e.height)),this._dDivider.attr("x2",this._chartView.subViewManager.isNthStudyView(this,0)?0:e.width)},h.destroy=function(){r.invokeCall(this._indicators,"un",null,this),this._indicators=[],this.visibleWindow&&this._yFitter.stopProvidingFitForVisibleWindow(),this._eventBus.unsubscribeAll(this),t.superclass.destroy.apply(this,arguments)},h._recreateIndicator=function(e){this.removeIndicator(e),this.addIndicator(e),this.render()},h._handleVerticalPan=function(e){this._isZooming||this._turnOnZoomFitting(),this.visibleWindow.verticalPan(e)},h._handleHorizontalPan=function(e){this.visibleWindow.visibleDateRange.moveByPixels(e,!0)},h._handleVerticalZoom=function(e,t,n,i){this._isZooming||this._turnOnZoomFitting(),this.visibleWindow.zoom(e,t,n,i)},h._handleDragZoom=function(e){this._isZooming||this._turnOnZoomFitting(),this.visibleWindow.expandBy(e)},h._handleVerticalWheelZoom=function(e){this._isZooming||this._turnOnZoomFitting(),this.visibleWindow.zoomByMultiple(e)},h._turnOnZoomFitting=function(){this._yFitter.stopProvidingFitForVisibleWindow(),this._isZooming=!0},h._handleYFittingReset=function(){this._isZooming&&(this._yFitter.startProvidingFitForVisibleWindow(this.visibleWindow),this._yFitter.fit(),this._isZooming=!1)},h._updateClipRectDimensions=function(e){var t,n;for(n=0;n<this.positions.length;n++)t=this.positions[n],!0===t.clipPathNeeded&&this._getClipRectsForPosition(t.name).attr({x:0,y:0,width:e.width,height:e.height})},Object.seal(h),t})),define("module/core/js/view/resizablestudyview",["require","module/core/js/util/class","module/core/js/util/css","module/core/js/view/userinput/deprecatedmultidirectionalpangesturerecogniser","module/core/js/view/userinput/eventpropagation","text!module/core/svg/resize_icon.svg","module/core/js/view/component/svg/iconbutton","module/core/js/util/functional","module/core/js/view/studyview","module/core/js/util/svg","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/css"),o=e("module/core/js/view/userinput/deprecatedmultidirectionalpangesturerecogniser"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("text!module/core/svg/resize_icon.svg"),a=e("module/core/js/view/component/svg/iconbutton"),l=e("module/core/js/util/functional"),u=e("module/core/js/view/studyview"),c=e("module/core/js/util/svg"),d=e("module/core/js/enum/zindexenum");n.extend(t,u),t.ENTER_RESIZE="SubviewEnterResize",t.EXIT_RESIZE="SubviewExitResize",t.RESIZE="SubviewResize",t.RESIZE_END="SubviewResizeEnd";var h=t.prototype;return h._resizeHandleIcon=null,h._blockPanCaptureZone=null,h._panGestureRecogniser=null,h._isHovered=!1,h.initDom=function(e){return t.superclass.initDom.call(this,e),e&&this._createHandleIcon(),this},h.updateDimensions=function(e,n,i,o){if(t.superclass.updateDimensions.apply(this,arguments),this._resizeHandleIcon){var r=this._getHandleDimensions(),s=e.x+e.width/2-12;this._resizeHandleIcon.setDimensions(r),this._resizeHandleIcon.attr("transform",c.svgTranslateAttrXY(s,-4.5)),this._resizeHandleIcon.render(),this._blockPanCaptureZone.setDimensionsBasedOnAssociatedElement()}},h._getHandleDimensions=function(){return{height:9,width:24,x:0,y:0}},h.destroyDom=function(){return this._destroyHandleIcon(),t.superclass.destroyDom.apply(this,arguments)},h._onResizePanGesture=function(e){this._isHovered||this._resizeHandleIcon.enterSelectedState(),this.fire(t.RESIZE,this,e)},h._onEndPanGesture=function(e){this._isHovered||this._resizeHandleIcon.exitSelectedState(),this.fire(t.RESIZE_END,this,e,this.getMainIndicator())},h.toggleResizeStatus=function(e){e?this._createHandleIcon():this._destroyHandleIcon()},h._destroyHandleIcon=function(){this._resizeHandleIcon&&(this._resizeHandleIcon.destroy(),this._resizeHandleIcon=null,this._blockPanCaptureZone.removeGestureRecogniser(this._panGestureRecogniser),this._panGestureRecogniser.destroy(),this._panGestureRecogniser=null,this._blockPanCaptureZone.destroy(),this._blockPanCaptureZone=null)},h._createHandleIcon=function(){this._resizeHandleIcon=a.create(this.dContainer,this._captureZoneManager,"resizeHandleIcon",s).handleDown().withDefaultPadding(),this._panGestureRecogniser=o.create().withHandler(l.empty),this._blockPanCaptureZone=this._captureZoneManager.create(r.PROPAGATE_UNHANDLED,d.BLOCK_CHART_PAN).addGestureRecogniser(this._panGestureRecogniser).withAssociatedElement(this._resizeHandleIcon.getElement()),this._resizeHandleIcon.updateCaptureZoneIndex(d.OVERVIEW_HANDLE),this._resizeHandleIcon.onDrag(this._onResizePanGesture,this).onDragEnd(this._onEndPanGesture,this).onTap(l.empty,this).withCursorOnHover(i.CURSOR_TYPE.NS_RESIZE),this._resizeHandleIcon.onHover(this._enterHover.bind(this),this._exitHover.bind(this),this)},h._enterHover=function(){this._isHovered=!0,this._resizeHandleIcon.enterSelectedState()},h._exitHover=function(){this._isHovered=!1,this._resizeHandleIcon.exitSelectedState()},Object.seal(h),Object.seal(t)})),define("module/core/js/view/renderer/yticksrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/numberpairs","module/core/js/util/svg","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/util/math"),a=e("module/core/js/util/numberpairs"),l=e("module/core/js/util/svg"),u=e("module/core/js/view/visiblewindow");o.extend(t,n);var c=t.prototype;return c._fixedTicks=null,c.withFixedTicks=r.setter("_fixedTicks"),c.startRedrawingBasedOnChangesInVisibleWindow=function(){this._visibleWindow.on(u.MOVED,this._handleVisibleWindowMoved,this)},c.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._instrumentModel.un(null,this),this._visibleWindow.un(null,this)},c._handleVisibleWindowMoved=function(e,t){t&&this.renderOnFrameEnd(),e&i.RESIZED&&this.dContainer.selectAll(".tick .line").attr("x2",this._getTickWidth())},c.ticks=function(e){if(this._fixedTicks)return this._fixedTicks;var t=a.rangeExtent(e.range()),n=Math.floor(t/this._getSpaceBetweenTicks()),i=e.ticks(Math.max(1,n)),o=this._restrictedDomain(e),r=i.length;if(i.length){for(;r--&&i[r]>=o[0];)i.pop();for(;i.length&&i[0]<=o[1];)i.shift();for(var l=0;l<i.length;l++)i[l]=s.roundToDecimalPlaces(i[l],6)}return i},c._getSpaceBetweenTicks=function(){var e=this._visibleWindow.height(),t=-6829e-8*e*e+.13675*e+7.4295;return Math.max(t,12)},c._getTickWidth=function(){return this._visibleWindow.width()},c._restrictedDomain=function(e){var t=e.range();return[e.invert(t[0]+5),e.invert(t[1]-5)]},c.render=function(){this._visibleWindow.y.domainSet&&this._renderTicks()},c._renderTicks=function(){var e=this._visibleWindow.y,t=this.ticks(e).map(String),n=this.dContainer.selectAll(".tick").data(t,r.identity);this._createNewTicksInDom(n.enter()),n.attr("transform",(function(t){return l.svgTranslateAttrY(Math.round(e(t)))})),n.exit().remove()},c._createNewTicksInDom=function(e){var t=e.append("svg:g");t.empty()||t.attr("class",this._tickClass).append("svg:line").attr("class","line").attr("x1",0).attr("x2",this._getTickWidth())},c._tickClass=function(e){var t=("value-"+e).replace(".","-"),n="tick "+t;return e<0&&(n+=" negative"),n},Object.seal(c),Object.seal(t)})),define("module/indicators/js/config/subviewsconfig",["require","module/core/js/view/yfitter/alwaysincluderangefitter","module/core/js/view/yfitter/fixablefollowdatafitter","module/core/js/view/yfitter/fixedfitter","module/core/js/view/yfitter/followdatafitter","module/core/js/util/functional","module/core/js/util/object","module/core/js/view/resizablestudyview","module/core/js/view/studyviewconstants","module/core/js/view/renderer/yaxisrenderer","module/core/js/view/renderer/yticksrenderer"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/yfitter/alwaysincluderangefitter"),i=e("module/core/js/view/yfitter/fixablefollowdatafitter"),o=e("module/core/js/view/yfitter/fixedfitter"),r=e("module/core/js/view/yfitter/followdatafitter"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/object"),l=e("module/core/js/view/resizablestudyview"),u=e("module/core/js/view/studyviewconstants"),c=e("module/core/js/view/renderer/yaxisrenderer"),d=e("module/core/js/view/renderer/yticksrenderer"),h={aroon:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:1,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:o,properties:{min:-5,max:105}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks",properties:{fixedTicks:[0,30,70,100]}},yAxis:{type:c,group:"yAxis",position:"yAxis",properties:{fixedTicks:[0,30,70,100]}}}},atr:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:2,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!0,yFitter:{type:i,properties:{extendBottom:!1,extendTop:!0}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},awesome:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:3,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,instrumentScaling:!0,yFitter:{type:n},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},chaikin:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:4,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,instrumentScaling:!1,isPersistent:!1,domainNicing:!1,yFitter:{type:i,properties:{extendBottom:!1,extendTop:!0}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},cci:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:5,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:n,properties:{max:100,min:-100}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks",properties:{fixedTicks:[-100,0,100]}},yAxis:{type:c,group:"yAxis",position:"yAxis",properties:{fixedTicks:[-100,0,100]}}}},dpo:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:6,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!0,yFitter:{type:n},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},dmi:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:7,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:r},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},kdj:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:8,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:n,properties:{max:100,min:0}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks",properties:{fixedTicks:[0,20,50,80,100]}},yAxis:{type:c,group:"yAxis",position:"yAxis",properties:{fixedTicks:[0,20,50,80,100]}}}},macd:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:9,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!0,yFitter:{type:n},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},momentum:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:10,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!0,yFitter:{type:r},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},mfi:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:11,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:o,properties:{min:-5,max:105}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks",properties:{fixedTicks:[0,20,50,80,100]}},yAxis:{type:c,group:"yAxis",position:"yAxis",properties:{fixedTicks:[0,20,50,80,100]}}}},roc:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:10,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!0,yFitter:{type:r},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},rsi:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:12,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:o,properties:{min:-5,max:105}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks",properties:{fixedTicks:[0,30,70,100]}},yAxis:{type:c,group:"yAxis",position:"yAxis",properties:{fixedTicks:[0,30,70,100]}}}},stdev:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:13,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,instrumentScaling:!0,isPersistent:!1,yFitter:{type:i,properties:{extendBottom:!1,extendTop:!0}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},stochastic:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:14,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:o,properties:{min:-5,max:105}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks",properties:{fixedTicks:[0,20,50,80,100]}},yAxis:{type:c,group:"yAxis",position:"yAxis",properties:{fixedTicks:[0,20,50,80,100]}}}},volume:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:15,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:i,properties:{min:0,extendTop:!0}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks"},yAxis:{type:c,group:"yAxis",position:"yAxis"}}},willr:{type:l,relativeSize:u.DEFAULT_RELATIVE_HEIGHT,relativeWeighting:16,minHeight:u.MIN_RESIZABLE_RELATIVE_HEIGHT,isPersistent:!1,instrumentScaling:!1,yFitter:{type:o,properties:{min:-105,max:5}},renderers:{yTicks:{type:d,group:"yTicks",position:"yTicks",properties:{fixedTicks:[-100,-80,-50,-20,0]}},yAxis:{type:c,group:"yAxis",position:"yAxis",properties:{fixedTicks:[-100,-80,-50,-20,0]}}}}};return t.get=s.returns(h),a.recursiveFreeze(h),Object.seal(t)})),define("module/core/js/model/layouts/indicatorsvisibilitymodule",["require","module/core/js/model/layouts/abstractlayoutmodule","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/model/layouts/abstractlayoutmodule");e("module/core/js/util/class").extend(t,n),t.SETTINGS_MODULE_NAME="indicatorsVisibilityModule";var i=t.prototype;return i.isVisible=!0,i.fromJSON=function(e){this.isVisible=!!e.isVisible},i.toJSON=function(){return{isVisible:this.isVisible}},Object.seal(i),Object.seal(t)})),define("module/core/js/view/renderer/abstracttextrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/view/model/commonuipresentationmodel","module/core/js/util/functional","module/core/js/util/oop","module/core/js/util/svg","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/view/model/commonuipresentationmodel"),s=e("module/core/js/util/functional"),a=e("module/core/js/util/oop"),l=e("module/core/js/util/svg"),u=e("module/core/js/view/visiblewindow");o.extend(t,n);var c=t.prototype;return c._visible=!0,c._marginTop=null,c._marginBottom=null,c._marginLeft=null,c._marginRight=null,c._verticalPadding=1,c._horizontalPadding=2,c._showBackground=!0,c.withMarginTop=s.setter("_marginTop"),c.withMarginBottom=s.setter("_marginBottom"),c.withMarginLeft=s.setter("_marginLeft"),c.withMarginRight=s.setter("_marginRight"),c.withShowBackground=s.setter("_showBackground"),c._text=a.abstractMethod,c._dRect=null,c._dText=null,c._bBox=null,c._showText=function(){this._dText.text(this._text()),this._updateBoundingBox(),this._showBackground&&this._updateBackgroundRectSize()},c._updateBoundingBox=function(){this._bBox=this._dText.node().getBBox()},c._updateBackgroundRectSize=function(){this._dRect.attr({x:this._bBox.x-this._horizontalPadding,y:this._bBox.y-this._verticalPadding,width:this._bBox.width+2*this._horizontalPadding,height:this._bBox.height+2*this._verticalPadding})},c.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._presentationModel&&this._presentationModel.getOffsets&&(this._visibleWindow.on(u.MOVED,this._handleVisibleWindowMoved,this),this._presentationModel.on(r.COMMON_UI_CHANGED,this._updateTextPosition,this),this._updateTextPosition())},c._handleVisibleWindowMoved=function(e,t){t&i.RESIZED&&this._updateTextPosition()},c.stopRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this),this._presentationModel&&this._presentationModel.un(null,this)},c._updateTextPosition=function(){var e=this._presentationModel.getOffsets(this.position);this.dContainer.attr("transform",l.svgTranslateAttrXY(e.xOffset,e.yOffset))},c.initDom=function(){var e;return this._showBackground&&(this._dRect=this.dContainer.append("svg:rect").attr("class","labelBackground")),this._dText=e=this.dContainer.append("svg:text").attr("class","label"),null!==this._marginTop&&e.attr("y",this._marginTop).attr("dy","1em"),null!==this._marginBottom&&e.attr("y",-this._marginBottom),null===this._marginTop&&null===this._marginBottom&&e.attr("dy","0.5em"),null!==this._marginLeft&&e.attr("x",this._marginLeft),null!==this._marginRight&&e.attr("x",-this._marginRight),this._showText(),this},c.show=function(){this._toggle(!0)},c.hide=function(){this._toggle(!1)},c._toggle=function(e){var t=e?"visible":"hidden";this._dText.style("visibility",t),this._showBackground&&this._dRect.style("visibility",t),this._visible=e},Object.seal(c),Object.seal(t)})),define("module/core/js/view/renderer/i18nrenderer",["require","module/core/js/view/renderer/abstracttextrenderer","module/core/js/util/class","module/core/js/util/functional","module/core/js/i18n"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstracttextrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/i18n");i.extend(t,n);var s=t.prototype;return s._i18n=null,s._textKey=null,s.withI18n=o.setter("_i18n"),s.withTextKey=o.setter("_textKey"),s._text=function(){return this._i18n?this._i18n.get(this._textKey):r.get(this._textKey)},Object.seal(s),Object.seal(t)})),define("module/indicators/js/view/renderer/indicatortitlerenderer",["require","module/core/js/util/class","module/core/js/indicator/indicator","module/core/js/view/renderer/i18nrenderer","module/indicators/js/i18n","module/core/js/view/studyviewconstants","module/core/js/view/studyview","module/core/js/view/subview"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/core/js/indicator/indicator"),o=e("module/core/js/view/renderer/i18nrenderer"),r=e("module/indicators/js/i18n"),s=e("module/core/js/view/studyviewconstants"),a=e("module/core/js/view/studyview"),l=e("module/core/js/view/subview");n.extend(t,o);var u=t.prototype;return u.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.apply(this,arguments),this._subView.on(l.DIMENSIONS_CHANGED,this._handleSubViewDimensionsChanged,this),this._subView.on(a.INDICATOR_ADDED,this._onIndicatorAdded,this),this._subView.on(a.INDICATOR_REMOVED,this._onIndicatorRemoved,this)},u.stopRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.apply(this,arguments),this._subView.un(null,this)},u.destroy=function(){var e=this._subView.getMainIndicator();e&&e.un(null,this),t.superclass.destroy.call(this)},u._onIndicatorAdded=function(){var e=this._subView.getMainIndicator();e.on(i.LABEL_CHANGED,this._showText,this),e.on(i.AVAILABILITY_CHANGED,this._showText,this),this._showText()},u._onIndicatorRemoved=function(){this._subView.getMainIndicator().un(null,this),this._showText()},u._showText=function(){this._buildIndicatorTitle(),this._updateBoundingBox(),this._showBackground&&this._updateBackgroundRectSize()},u._buildIndicatorTitle=function(){var e=this._subView.getMainIndicator();this._dText.selectAll(".setting").remove(),e&&(this._dText.append("svg:tspan").classed("setting",!0).text(r.get(e.name+"-"+e.shortLabelType)),!1===e.isAvailable()&&this._dText.append("svg:tspan").classed("setting",!0).classed("unavailable",!0).attr("dx",10).text(e.getUnavailabilityReason()))},u._handleSubViewDimensionsChanged=function(e){var t=s.MIN_LABEL_HEIGHT,n=t<e.height;n&&!this._visible?this.show():!n&&this._visible&&this.hide()},Object.seal(u),Object.seal(t)})),define("module/indicators/js/config/titlessubviewsconfig",["require","module/core/js/util/functional","module/indicators/js/view/renderer/indicatortitlerenderer","module/core/js/util/object"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("module/indicators/js/view/renderer/indicatortitlerenderer"),o=e("module/core/js/util/object"),r={};return["aroon","atr","awesome","chaikin","cci","dpo","dmi","kdj","macd","momentum","mfi","roc","rsi","stdev","stochastic","volume","willr"].forEach((function(e){r[e]={renderers:{studyTitle:{type:i,group:"body",position:"northWest",properties:{marginTop:3,marginLeft:5}}}}})),t.get=n.returns(r),o.recursiveFreeze(r),Object.seal(t)})),define("module/indicators/js/indicators",["require","module/core/js/util/array","module/core/js/util/functional","module/indicators/js/i18n","module/indicators/js/config/indicatorsconfig","module/indicators/js/config/subviewsconfig","module/core/js/model/layouts/indicatorsvisibilitymodule","module/core/js/util/object","module/core/js/settings/settingsevents","module/indicators/js/config/titlessubviewsconfig"],(function(e){"use strict";function t(e,t,n,i,o,r){this._eventBus=e,this._exclude=t&&t.exclude?t.exclude:[],this._settingsManager=o,this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._settingsManager.on(u.LAYOUT_SETTINGS_CHANGED,this._handleIndicatorsVisibilityChanged,this)}var n=e("module/core/js/util/array"),i=e("module/core/js/util/functional"),o=e("module/indicators/js/i18n"),r=e("module/indicators/js/config/indicatorsconfig"),s=e("module/indicators/js/config/subviewsconfig"),a=e("module/core/js/model/layouts/indicatorsvisibilitymodule"),l=e("module/core/js/util/object"),u=e("module/core/js/settings/settingsevents"),c=e("module/indicators/js/config/titlessubviewsconfig");t.settingsParsers=Object.freeze({template:{moduleName:a.SETTINGS_MODULE_NAME,parserClass:a}});var d=t.prototype;return d._eventBus=null,d._chartView=null,d._exclude=null,d._indicatorsVisible=!0,d._titlesVisibility=!0,d._settingsManager=null,d._initialised=!1,d.init=function(){var e=r.get(),t=l.recursiveFreeze(this._generateCapabilities(e));this._eventBus.publish("capabilities/indicators",["indicators",t],{retrospective:!0}),this._eventBus.publish("indicators/config",[e],{retrospective:!0}),this._eventBus.publish("subViews/config",["indicators",s.get()]),this._titlesVisibility&&this._enableTitles(),this._initialised=!0},d.destroy=function(){this._eventBus.publish("subViews/removeConfig",["indicators"]),this._titlesVisibility&&this._disableTitles(),this._chartView&&(this._chartView=null),this._eventBus=null,this._initialised=!1},d.setTitlesVisibility=function(e){this._titlesVisibility!==e&&(this._titlesVisibility=e,this._initialised&&(this._titlesVisibility?this._enableTitles():this._disableTitles()))},d._handleIndicatorsVisibilityChanged=function(){var e=this._settingsManager.getIndicatorsVisibilitySettings(),t=this._indicatorsVisible;this._indicatorsVisible=e,e&&!t?this._handleIndicatorsShown():!e&&t&&this._handleIndicatorsHidden()},d._handleIndicatorsShown=function(){this._settingsManager.resetTemplateSettings("indicatorModule")},d._handleIndicatorsHidden=function(){this._settingsManager.changeTemplateSettings("indicatorModule",(function(e){return e.indicators=[],!0}),!1)},d._enableTitles=function(){this._eventBus.publish("subViews/config",["indicatorsTitles",c.get()]),this._chartView&&this._chartView.addRenderersBySubviewConfig(c.get())},d._disableTitles=function(){this._eventBus.publish("subViews/removeConfig",["indicatorsTitles"]),this._chartView&&this._chartView.removeRenderersBySubviewConfig(c.get())},d._generateCapabilities=function(e){var t,i=[];for(t in e)e[t].onByDefault||n.contains(this._exclude,t)||i.push(this._capabilitiesForIndicator(t,e[t]));return i},d._capabilitiesForIndicator=function(e,t){return{id:e,arguments:this._capabilitiesForIndicatorArguments(e,t),label:o.get(e),json:{type:"indicator",value:{id:e,settings:this._capabilitiesForIndicatorSettingsPlaceHolder(e,t.settings)}}}},d._capabilitiesForIndicatorArguments=function(e,t){var n,i,o,r=t.settings,s=[];for(n in r){if(i=r[n],"preferredHeight"===n)o={id:this._settingId("preferredHeight"),defaultValue:i.defaultValue};else if("number"===i.type)o=this._numericArgumentSettingConfig(e,i,n);else{if("enum"!==i.type)throw new Error("setting "+n+" has an unsupported type: "+i.type);o=this._enumArgumentSettingConfig(e,i,n)}i.color&&(o.color=i.color),s.push(o)}return s},d._numericArgumentSettingConfig=function(e,t,n){return{id:this._settingId(n),label:o.get(e+"-"+n),defaultValue:t.defaultValue.toFixed(t.decimalPoints),range:t.range}},d._enumArgumentSettingConfig=function(e,t,n){return{id:this._settingId(n),label:o.get(e+"-"+n),defaultValue:String(t.defaultValue),range:{min:0,max:t.options.length-1,step:1}}},d._capabilitiesForIndicatorSettingsPlaceHolder=function(e,t){var n,i={};for(n in t)i[n]=this._settingId(n);return i},d._settingId=function(e){return"$"+e},d._handleChartViewReady=i.setter("_chartView"),Object.seal(t.prototype),Object.seal(t)})),define("module/menu-mobile/js/controls/indexbuttonbar",["require","module/core/js/util/array","module/menu-mobile/js/controls/buttonbar","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/component/loadingindicator","module/menu-mobile/js/controls/scrollablebuttonbar","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t){this._captureZoneManager=e,this._menuViewItems=[],this._animationPoller=t,this._menuZIndex=l.MENU}var n=e("module/core/js/util/array"),i=e("module/menu-mobile/js/controls/buttonbar"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/view/component/loadingindicator"),a=e("module/menu-mobile/js/controls/scrollablebuttonbar"),l=e("module/core/js/enum/zindexenum");o.extend(t,i),t.create=function(e,n){return new t(e,n)};var u=t.prototype;return u._dMenuContainer=null,u._indexBar=null,u._optionsButtonBar=null,u.initDom=function(e,t,o){this._dMenuContainer=e.append("div").classed("indexMenu",!0).classed(t,!0),this._indexBar=i.create(this._captureZoneManager,this._animationPoller,!0),this._indexBar.initDom(this._dMenuContainer,"indexButtonBar",o),this._optionsButtonBar=a.create(this._captureZoneManager,this._animationPoller,!0,!0),this._optionsButtonBar.initDom(this._dMenuContainer,"optionsButtonBar",o),n.nonEmpty(this._menuViewItems)&&(this._loadingIndicator=s.create(),this._loadingIndicator.initDom(this._dMenuContainer))},u.render=function(){n.nonEmpty(this._menuViewItems)&&this._loadingIndicator&&(this._loadingIndicator.destroy(),this._loadingIndicator=null),this._indexBar&&(this._indexBar.render(),this._optionsButtonBar.render())},u.addMenuViewItem=function(e){var t=e.getIndexViewItem();t.withActionListener(this._createIndexActionListener()),this._indexBar.addMenuViewItem(t),e.getOptionsViewItems().forEach(this._optionsButtonBar.addMenuViewItem,this._optionsButtonBar)},u.setMenuViewItems=function(e){var t=e.map(r.invoker("getIndexViewItem")),n=e.reduce((function(e,t){return e.concat(t.getOptionsViewItems())}),[]),i=this._createIndexActionListener();r.invokeCall(t,"withActionListener",i),this._indexBar&&(this._indexBar.setMenuViewItems(t),this._optionsButtonBar.setMenuViewItems(n))},u.isVisible=r.delegate("_indexBar","isVisible"),u.show=function(){this._indexBar&&(this._dMenuContainer.classed("hidden",!1),this._indexBar.show(),this._optionsButtonBar.show())},u.hide=function(){this._indexBar&&(this._dMenuContainer.classed("hidden",!0),this._indexBar.hide(),this._optionsButtonBar.hide())},u.clear=function(){this._indexBar&&(this._indexBar.clear(),this._optionsButtonBar.clear())},u.updateCaptureZoneSize=function(){this._indexBar&&(this._indexBar.updateCaptureZoneSize(),this._optionsButtonBar.updateCaptureZoneSize())},u.getSelectedItems=r.delegate("_optionsButtonBar","getSelectedItems",this),u.getSelectedStickyItems=r.delegate("_optionsButtonBar","getSelectedStickyItems",this),u.getSelectedNonStickyItems=r.delegate("_optionsButtonBar","getSelectedNonStickyItems",this),u.selectItem=r.delegate("_optionsButtonBar","selectItem"),u.deselectItem=r.delegate("_optionsButtonBar","deselectItem"),u.destroy=function(){this._dMenuContainer&&(this._dMenuContainer.remove(),this._dMenuContainer=null,this._indexBar.destroy(),this._optionsButtonBar.destroy())},u.onDimensionsChanged=function(){this._indexBar&&(this._indexBar.onDimensionsChanged(),this._optionsButtonBar.onDimensionsChanged())},u._createIndexActionListener=function(){return{handleAction:this._onIndexItemSelected.bind(this)}},u._onIndexItemSelected=function(e){this._optionsButtonBar.panTo(e.id)},Object.seal(u),Object.seal(t)})),define("module/menu-mobile/js/view/indexmenuviewitem",["require","module/core/js/util/functional","module/menu-mobile/js/view/menuviewitem"],(function(e){"use strict";function t(e,t){this._captureZoneManager=e,this._indexViewItem=this._createIndexMenuViewItem(e,t),this._optionsViewItems=this._createOptionsMenuViewItems(e,t)}var n=e("module/core/js/util/functional"),i=e("module/menu-mobile/js/view/menuviewitem");t.create=function(e,n){return new t(e,n)},t._createOptionMenuViewItem=function(e,t,n){return i.create(e,{label:n.label,data:n.data,isSelected:n.isSelected,actionListener:n.actionListener,cssClass:"option",isSticky:t})};var o=t.prototype;return o._indexViewItem=null,o._optionsViewItems=null,o.getIndexViewItem=n.getter("_indexViewItem"),o.getOptionsViewItems=n.getter("_optionsViewItems"),o.withZIndex=function(e){this._indexViewItem.withZIndex(e),n.invokeCall(this._optionsViewItems,"withZIndex",e)},o.updateClientBox=function(){this._indexViewItem.updateClientBox(),n.invokeCall(this._optionsViewItems,"updateClientBox")},o.destroy=function(){this._indexViewItem.destroy(),n.invokeCall(this._optionsViewItems,"destroy")},o._createIndexMenuViewItem=function(e,t){return i.create(e,{label:t.indexLabel,data:{id:t.id},actionListener:n.empty})},o._createOptionsMenuViewItems=function(e,n){var i=n.options.map(t._createOptionMenuViewItem.bind(this,e,!1));return i.splice(0,0,t._createOptionMenuViewItem(e,!0,n)),i},Object.seal(o),Object.seal(t)})),define("module/indicators/js/menu/indicatorsselectionmenuview",["require","module/core/js/util/class","module/core/js/util/functional","module/menu-mobile/js/view/menuview"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/menu-mobile/js/view/menuview");n.extend(t,o),t.create=function(e,n,i){return new t(e,n,i)};var r=t.prototype;return r._createButtonBar=function(e,t){return new this._config.buttonBar(e,t,!0)},
r._createButtonBarStyles=i.returns("hidden container indicators vertical"),Object.seal(r),Object.seal(t)})),define("module/indicators/js/menu/indicatorsselectionmenu",["require","module/core/js/util/array","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/core/js/util/functional","module/menu-mobile/js/controls/indexbuttonbar","module/menu-mobile/js/view/indexmenuviewitem","module/indicators/js/menu/indicatorsselectionmenuview","module/core/js/util/math","module/menu-common/js/controller/menucontroller","module/core/js/util/object","module/menu-mobile/js/controls/scrollablebuttonbar","module/core/js/settings/settingsevents","module/core/js/util/string","module/core/js/tracker/enum/schema","module/core/js/model/userinfo"],(function(e){"use strict";function t(e,t){return e.label>t.label?1:-1}function n(e,t){t.isSelected=r.contains(e,t.data.id)}function i(e,t,n){n.data.id===e.name&&(n.isSelected=t)}function o(e,t,n,i){o.superclass.constructor.call(this,e,t,n,i),this._indicatorMenuItems=[],this._isLatinLang=y.getInstance().isLatinLang(),this._eventBus.subscribe("capabilities/indicators",this._handleIndicatorsCapabilities,this)}var r=e("module/core/js/util/array"),s=e("module/menu-common/js/actionlistener/callbackactionlistener"),a=e("module/core/js/util/class"),l=e("module/core/js/util/functional"),u=e("module/menu-mobile/js/controls/indexbuttonbar"),c=e("module/menu-mobile/js/view/indexmenuviewitem"),d=e("module/indicators/js/menu/indicatorsselectionmenuview"),h=e("module/core/js/util/math"),p=e("module/menu-common/js/controller/menucontroller"),m=e("module/core/js/util/object"),f=e("module/menu-mobile/js/controls/scrollablebuttonbar"),_=e("module/core/js/settings/settingsevents"),g=e("module/core/js/util/string"),v=e("module/core/js/tracker/enum/schema"),y=e("module/core/js/model/userinfo");a.extend(o,p),o.INDEX={AC:{label:"A-C",start:"A",end:"C"},DG:{label:"D-G",start:"D",end:"G"},HK:{label:"H-K",start:"H",end:"K"},LP:{label:"L-P",start:"L",end:"P"},QT:{label:"Q-T",start:"Q",end:"T"},UZ:{label:"U-Z",start:"U",end:"Z"}},o.create=function(e,t,n,i){return new o(e,t,n,i)};var M=o.prototype;return M._indicatorMenuItems=null,M._isLatinLang=!0,M._createMenuView=function(e,t){var n={};return this._isLatinLang?(n.menuViewItem=c,n.buttonBar=u):n.buttonBar=f,d.create(e,t,n)},M._whenViewIsReady=function(){this._settingsManager.on(_.LAYOUT_SETTINGS_CHANGED,this._refreshState,this),this._eventBus.subscribe("chart/indicator/added/*",this._handleSelected,this),this._eventBus.subscribe("chart/indicator/removed/*",this._handleDeselected,this),this._refreshState()},M._refreshState=function(){var e=this._settingsManager.getIndicatorSettings().map(l.plucker("id"));this._indicatorMenuItems.forEach((function(t){t.options?t.options.forEach(n.bind(null,e)):n(e,t)})),this.withModel(this._indicatorMenuItems)},M._handleSelected=function(e){this._view.selectItem(e),this._indicatorMenuItems.forEach((function(t){t.options?t.options.forEach(i.bind(null,e,!0)):i(e,!0,t)}))},M._handleDeselected=function(e){this._view.deselectItem(e),this._indicatorMenuItems.forEach((function(t){t.options?t.options.forEach(i.bind(null,e,!1)):i(e,!1,t)}))},M._handleIndicatorChanged=function(e,t,n,i){this._sendToTracker({schema:v.CHECKBOX_ACTION,elementId:"MENU_INDICATORS_"+e.id.toUpperCase(),elementParentId:i,elementGroup:"MENU_INDICATORS",elementValue:e.id.toUpperCase(),elementType:"CHECKBOX",actionType:"PRESS",isSelected:t}),t?this._eventBus.publish("chart/indicator/add",[e.id,this._initialiseDefaultValues(e.value,e.arguments),!0]):this._eventBus.publish("chart/indicator/remove",[e.id,!0])},M._initialiseDefaultValues=function(e,t){return m.values(e).some(h.isNumber)?e:this._extractDefaults(t)},M._extractDefaults=function(e){var t,n,i={};for(n=0;n<e.length;n++)t=e[n].id.replace("$",""),i[t]=e[n].defaultValue;return i},M._handleIndicatorsCapabilities=function(e,n){var i=new s(this._eventBus,this._handleIndicatorChanged.bind(this)),r=[];this._isLatinLang?Object.keys(o.INDEX).forEach((function(e){var s=o.INDEX[e],a=n.filter((function(e){var t=g.removeAccents(e.label[0]).toUpperCase();return s.start<=t&&s.end>=t}));a.length>0&&r.push({id:e,data:{id:e},indexLabel:s.label,label:s.label,isSelected:!1,options:a.sort(t).map(this._getModelForIndicatorCapability.bind(this,i)),actionListener:null})}),this):r=n.map(this._getModelForIndicatorCapability.bind(this,i)),this._indicatorMenuItems=r,this._refreshState()},M._getModelForIndicatorCapability=function(e,t){var n=JSON.parse(JSON.stringify(t.arguments));return n.forEach((function(e){var t=parseFloat(e.defaultValue);h.isNumber(t)&&(e.defaultValue=t)})),{label:t.label,actionListener:e,data:{id:t.id,value:t.json.value.settings,arguments:n}}},M._destroyDom=function(){this._settingsManager.un(null,this),o.superclass._destroyDom.call(this)},Object.seal(M),Object.seal(o)})),define("module/indicators/js/menu/indicatorsmenu",["require","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/indicators/js/i18n","module/menu-common/js/controller/menucontroller","module/indicators/js/menu/indicatorsselectionmenu","module/core/js/settings/settingsevents","module/core/js/model/userinfo"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._isLatinLang=l.getInstance().isLatinLang(),this._indicatorsDisabledModel=t.createIndicatorsDisabledModel(this._settingsManager,this._eventBus),this._indicatorsSelectionMenu=s.create(this._eventBus,this._settingsManager,this._containerProvider,o),this._updateModel()}var n=e("module/menu-common/js/actionlistener/callbackactionlistener"),i=e("module/core/js/util/class"),o=e("module/indicators/js/i18n"),r=e("module/menu-common/js/controller/menucontroller"),s=e("module/indicators/js/menu/indicatorsselectionmenu"),a=e("module/core/js/settings/settingsevents"),l=e("module/core/js/model/userinfo");i.extend(t,r),t.create=function(e,n,i,o){return new t(e,n,i,o)},t.createIndicatorsDisabledModel=function(e,t){var i=e.putIndicatorsVisibilitySettings.bind(e,!0),r=new n(t,i);return[{label:o.get("indicatorsDisabled"),actionListener:r,data:{id:"SHOW_INDICATORS"}}]};var u=t.prototype;return u.id="indicators",u._indicatorsDisabledModel=null,u._isLatinLang=!0,u._indicatorsSelectionMenu=null,u.initDom=function(e,n,i){return t.superclass.initDom.call(this,e,n,i),this._indicatorsSelectionMenu.initDom(e,n,i),this},u.hide=function(){this._view.hide(),this._indicatorsSelectionMenu.hide()},u.show=function(){this._view.show(),this._settingsManager.getIndicatorsVisibilitySettings()&&this._indicatorsSelectionMenu.show()},u._whenViewIsReady=function(){this._settingsManager.on(a.LAYOUT_SETTINGS_CHANGED,this._settingsChanged,this),this._updateModel()},u._settingsChanged=function(){this._settingsManager.getIndicatorsVisibilitySettings()&&this._view.isVisible()&&this._indicatorsSelectionMenu.show(),this._updateModel()},u._updateModel=function(){this._settingsManager.getIndicatorsVisibilitySettings()?this.withModel([{}]):this.withModel(this._indicatorsDisabledModel)},u.updateCaptureZoneSize=function(){return this._indicatorsSelectionMenu&&this._indicatorsSelectionMenu.updateCaptureZoneSize(),t.superclass.updateCaptureZoneSize.call(this)},u.destroy=function(){this._indicatorsSelectionMenu&&(this._indicatorsSelectionMenu.destroy(),this._indicatorsSelectionMenu=null),t.superclass.destroy.call(this)},u._destroyDom=function(){this._settingsManager.un(null,this),t.superclass._destroyDom.call(this)},Object.seal(u),Object.seal(t)})),define("module/indicators/js/menu/indicatorsmenuview",["require","module/menu-mobile/js/controls/buttonbar","module/core/js/util/class","module/menu-mobile/js/view/menuview"],(function(e){"use strict";function t(e,i){t.superclass.constructor.call(this,e,i,{buttonBarStyles:"hidden container showIndicatorsMenu sub",buttonBar:n})}var n=e("module/menu-mobile/js/controls/buttonbar"),i=e("module/core/js/util/class"),o=e("module/menu-mobile/js/view/menuview");return i.extend(t,o),t.create=function(e,n){return new t(e,n)},Object.seal(t.prototype),Object.seal(t)})),define("module/menu-common/js/view/component/dialog/layoutdeletedialogcontent",["require","module/core/js/view/component/dialog/submittabledialogcontent","module/core/js/view/component/checkboxlist","module/core/js/util/class","module/menu-common/js/i18n","module/core/js/model/layouts/layout","module/core/js/util/object","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i),this._settingsManager=o}var n=e("module/core/js/view/component/dialog/submittabledialogcontent"),i=e("module/core/js/view/component/checkboxlist"),o=e("module/core/js/util/class"),r=e("module/menu-common/js/i18n"),s=e("module/core/js/model/layouts/layout"),a=e("module/core/js/util/object"),l=e("module/core/js/enum/zindexenum");o.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)};var u=t.prototype;return u._checkboxList=null,u._settingsManager=null,u.initDom=function(e,n){t.superclass.initDom.call(this,e);var o=e.append("div").classed("content",!0),a=[];return n.forEach((function(e){e.type!==s.TYPES.SYSTEM&&a.push({title:e.label,value:String(e.id)+"-"+e.type,selected:!1})}),this),this._checkboxList=i.create().initDom(o).setData(a).startListening(this._captureZoneManager,this._templatesValueChanged.bind(this),l.DIALOG_CONTROLS),this._createDoneButton(this._deleteLayouts,r.get("delete")),this._doneButton.disable(),this._createCancelButton(),this},u.enable=function(){return this._checkboxList.enableAll(),this},u._templatesValueChanged=function(){this._checkboxList.getValues().length?this._doneButton.enable():this._doneButton.disable()},u.disable=function(){return this._checkboxList.disableAll(),this},u.updateCaptureZones=function(){return this._checkboxList.updateCaptureZones(),t.superclass.updateCaptureZones.call(this)},u.destroy=function(){t.superclass.destroy.call(this),this._checkboxList.destroy(),this._checkboxList=null},u._deleteLayouts=function(){a.values(this._checkboxList.getValues()).forEach((function(e){var t=e.split("-");this._settingsManager.deleteTemplate(t[0],t[1])}),this)},Object.seal(u),Object.seal(t)})),define("module/menu-common/js/view/component/dialog/layoutdeletedialog",["require","module/core/js/view/component/dialog/abstractdialog","module/core/js/util/class","module/core/js/util/functional","module/menu-common/js/i18n","module/menu-common/js/view/component/dialog/layoutdeletedialogcontent"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,o),this._settingsManager=i}var n=e("module/core/js/view/component/dialog/abstractdialog"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/menu-common/js/i18n"),s=e("module/menu-common/js/view/component/dialog/layoutdeletedialogcontent");i.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)};var a=t.prototype;return a._settingsManager=null,a._getDialogTitle=function(){return r.get("delete_layout")},a._getDialogClasses=o.returns("deleteLayout layoutDialog"),a._createContent=function(e,t){return s.create(this,this._eventBus,this._captureZoneManager,this._settingsManager).initDom(e,t)},Object.seal(a),Object.seal(t)})),define("module/menu-common/js/view/component/dialog/layoutsavedialogcontent",["require","lodash","module/core/js/view/component/dialog/submittabledialogcontent","module/core/js/util/class","module/menu-common/js/i18n","module/core/js/util/touch"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i),this._settingsManager=o}var n=e("lodash"),i=e("module/core/js/view/component/dialog/submittabledialogcontent"),o=e("module/core/js/util/class"),r=e("module/menu-common/js/i18n"),s=e("module/core/js/util/touch");o.extend(t,i),t.create=function(e,n,i,o){return new t(e,n,i,o)};var a=t.prototype;return a._dButtonContainer=null,a._dNameInput=null,a._dNameLabel=null,a._settingsManager=null,a._templates=null,a.initDom=function(e,n){t.superclass.initDom.call(this,e);var i;return this._templates=n,this._dErrorMessage=e.append("span"),i=e.append("div").classed("content",!0),this._dNameLabel=i.append("label").classed("labelText",!0).attr("for","save-inputfield").text(r.get("layout_name")),this._dNameInput=i.append("input").classed("inputBox",!0).property({id:"save-inputfield",type:"text",value:""}).on("input",this._onInputValueChanged.bind(this)),s.enableDefault(e.node()),this._dButtonContainer=e.append("div").classed("actions",!0),this._createDoneButton(this._saveLayout,r.get("save")),this._doneButton.disable(),this._createCancelButton(),this},a.enable=function(){return this._dNameInput.node().disabled=!1,this},a.disable=function(){return this._dNameInput.node().disabled=!0,this},a.updateCaptureZones=function(){return t.superclass.updateCaptureZones.call(this)},a.destroy=function(){this._doneButton&&(s.cancelScrolling(this.dContainer.node()),this._dErrorMessage.remove(),this._dErrorMessage=null,this._dNameInput.remove(),this._dNameInput=null,this._dNameLabel.remove(),this._dNameLabel=null),t.superclass.destroy.call(this)},a._onInputValueChanged=function(){this._dNameInput.property("value").trim().length?this._doneButton.enable():this._doneButton.disable()},a._saveLayout=function(){var e=this._dNameInput.property("value").trim(),t=n.find(this._templates,{label:e});e.length?(this._doneButton.setEnabled(!1),this._settingsManager.exportLayout(e,this._saveCallback.bind(this,!0,t),this._saveCallback.bind(this,!1))):this._doneButton.disable()},a._saveCallback=function(e,t){t&&this._settingsManager.deleteTemplate(t.id),e?this._dialog.destroy():this._doneButton&&(this._doneButton.setEnabled(!0),this._doneButton.disable())},Object.seal(a),Object.seal(t)})),define("module/menu-common/js/view/component/dialog/layoutsavedialog",["require","module/core/js/view/component/dialog/abstractdialog","module/core/js/util/class","module/core/js/util/functional","module/menu-common/js/i18n","module/menu-common/js/view/component/dialog/layoutsavedialogcontent"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,o),this._settingsManager=i}var n=e("module/core/js/view/component/dialog/abstractdialog"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/menu-common/js/i18n"),s=e("module/menu-common/js/view/component/dialog/layoutsavedialogcontent");i.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)};var a=t.prototype;return a._settingsManager=null,a.done=function(){this.fire(n.DONE)},a._getDialogTitle=function(){return r.get("save_layout")},a._getDialogClasses=o.returns("saveLayout layoutDialog"),a._createContent=function(e,t){return s.create(this,this._eventBus,this._captureZoneManager,this._settingsManager).initDom(e,t)},Object.seal(a),Object.seal(t)})),define("module/core/js/view/component/radiobuttongroup",["require","module/core/js/util/array","module/core/js/util/functional","module/core/js/view/component/abstractbuttonlist","module/core/js/util/class"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/array"),i=e("module/core/js/util/functional"),o=e("module/core/js/view/component/abstractbuttonlist"),r=e("module/core/js/util/class");t.create=function(){return new t},r.extend(t,o);var s=t.prototype;return s._getButtonClass=i.returns("radioButton"),s._getListClass=i.returns("radioButtonGroup"),s.getValue=function(){return this._currentValues.length?n.lastOf(this._currentValues):null},s._onButtonClick=function(e){var t=e.getId();this.getValue()!==t&&(this._currentValues=[t],this._buttons.forEach((function(e){e.setSelected(e.getId()===t)}),this))},Object.seal(s),Object.seal(t)})),define("module/menu-common/js/view/component/dialog/layoutapplydialogcontent",["require","module/core/js/view/component/dialog/submittabledialogcontent","module/core/js/view/component/radiobuttongroup","module/core/js/util/class","module/core/js/util/defer","module/core/js/util/functional","module/core/js/model/layouts/layout","module/menu-common/js/i18n","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i),this._settingsManager=o}var n=e("module/core/js/view/component/dialog/submittabledialogcontent"),i=e("module/core/js/view/component/radiobuttongroup"),o=e("module/core/js/util/class"),r=e("module/core/js/util/defer"),s=e("module/core/js/util/functional"),a=e("module/core/js/model/layouts/layout"),l=e("module/menu-common/js/i18n"),u=e("module/core/js/enum/zindexenum");o.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)};var c=t.prototype;return c._dErrorMessage=null,c._settingsManager=null,c._radioButtonGroup=null,c.initDom=function(e,n){t.superclass.initDom.call(this,e);var o,r=e.append("div").classed("content",!0);return a.sortLayouts(n),o=n.map((function(e){return{title:e.label,value:String(e.id)+"-"+e.type,selected:!1}})),this._radioButtonGroup=i.create().initDom(r).setData(o).startListening(this._captureZoneManager,this._onTemplateSelected.bind(this),u.DIALOG_CONTROLS),this._createDoneButton(this._importLayout,l.get("apply")),this._doneButton.disable(),this._createCancelButton(),this},c._importLayout=function(){var e=this._radioButtonGroup.getValue().split("-"),t=e[0],n=e[1];t&&r.defer(this._settingsManager.importTemplate,this._settingsManager,[t,n,this._onImportLayoutSuccess.bind(this,t),this._onImportLayoutError.bind(this,t)])},c._onTemplateSelected=s.delegate("_doneButton","enable"),c._onImportLayoutSuccess=function(e){this._dialog.destroy()},c._onImportLayoutError=function(e){},c.updateCaptureZones=function(){return this._radioButtonGroup.updateCaptureZones(),t.superclass.updateCaptureZones.call(this)},c.destroy=function(){t.superclass.destroy.call(this),this._radioButtonGroup.destroy()},Object.seal(c),Object.seal(t)})),define("module/menu-common/js/view/component/dialog/layoutapplydialog",["require","module/core/js/view/component/dialog/abstractdialog","module/core/js/util/class","module/core/js/util/functional","module/menu-common/js/i18n","module/menu-common/js/view/component/dialog/layoutapplydialogcontent"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,o),this._settingsManager=i}var n=e("module/core/js/view/component/dialog/abstractdialog"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/menu-common/js/i18n"),s=e("module/menu-common/js/view/component/dialog/layoutapplydialogcontent");i.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)};var a=t.prototype;return a.done=function(){this.fire(n.DONE)},a._settingsManager=null,a._getDialogTitle=function(){return r.get("apply_layout")},a._getDialogClasses=o.returns("applyLayout layoutDialog"),a._createContent=function(e,t){return s.create(this,this._eventBus,this._captureZoneManager,this._settingsManager).initDom(e,t)},Object.seal(a),Object.seal(t)})),define("module/menu-common/js/controller/layoutsmenu",["require","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/core/js/util/functional","module/menu-common/js/view/component/dialog/layoutdeletedialog","module/menu-common/js/view/component/dialog/layoutsavedialog","module/menu-common/js/view/component/dialog/layoutapplydialog","module/menu-common/js/controller/menucontroller","module/menu-common/js/i18n","module/core/js/model/userinfo","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.call(this,e,n,i,o,a),this._createModel()}var n=e("module/menu-common/js/actionlistener/callbackactionlistener"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/menu-common/js/view/component/dialog/layoutdeletedialog"),s=e("module/menu-common/js/view/component/dialog/layoutsavedialog"),a=e("module/menu-common/js/view/component/dialog/layoutapplydialog"),l=e("module/menu-common/js/controller/menucontroller"),u=e("module/menu-common/js/i18n"),c=e("module/core/js/model/userinfo"),d=e("module/core/js/tracker/enum/schema");i.extend(t,l),t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)};var h=t.prototype;return h.id="layouts",h.destroy=function(){this._view&&this._settingsManager.un(null,this._view),t.superclass.destroy.apply(this,arguments)},h._getTemplateList=o.delegate("_settingsManager","getTemplateList"),h._applyLayoutAction=function(e,t,n,i){this._track("APPLY",i),this._getTemplateList(this._applyLayout.bind(this))},h._applyLayout=function(e){this._dialogBox=a.create(this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager).initDom(this._containerProvider.getContainer("top-html"),e).makeScrollable()},h._saveLayoutAsAction=function(e,t,n,i){this._track("SAVE_AS",i),this._getTemplateList(this._saveLayoutAs.bind(this))},h._saveLayoutAs=function(e){this._dialogBox=s.create(this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager).initDom(this._containerProvider.getContainer("top-html"),e)},h._deleteLayoutAction=function(e,t,n,i){this._track("DELETE",i),this._getTemplateList(this._deleteLayout.bind(this))},h._deleteLayout=function(e){this._dialogBox=r.create(this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager).initDom(this._containerProvider.getContainer("top-html"),e).makeScrollable()},h._track=function(e,t){this._sendToTracker({schema:d.ELEMENT_ACTION,elementId:"MENU_LAYOUTS_"+e,elementParentId:t,elementGroup:"MENU_LAYOUTS",elementValue:e,elementType:"BUTTON",actionType:"PRESS"})},h._createModel=function(){var e=new n(this._eventBus,this._deleteLayoutAction.bind(this)),t=new n(this._eventBus,this._saveLayoutAsAction.bind(this)),i=new n(this._eventBus,this._applyLayoutAction.bind(this)),o=[];c.getInstance().isAnonymous()||o.push({label:u.get("save_as"),actionListener:t,data:{id:"save_layout_as"}}),o.push({label:u.get("apply"),actionListener:i,data:{id:"apply_layout"}}),c.getInstance().isAnonymous()||o.push({label:u.get("delete"),actionListener:e,data:{id:"delete_layout"}}),this.withModel(o)},Object.seal(h),Object.seal(t)})),define("module/menu-mobile/js/view/layoutsmenuview",["require","module/core/js/util/class","module/menu-mobile/js/view/menuview","module/menu-mobile/js/controls/scrollablebuttonbar"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n,{buttonBarStyles:"hidden container layouts sub",buttonBar:o})}var n=e("module/core/js/util/class"),i=e("module/menu-mobile/js/view/menuview"),o=e("module/menu-mobile/js/controls/scrollablebuttonbar");n.extend(t,i),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return Object.seal(r),Object.seal(t)})),define("module/market-name-label/js/view/renderer/instrumentnamerenderer",["require","module/core/js/view/renderer/abstracttextrenderer","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/instrumentmodelevents","module/core/js/util/svg"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstracttextrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/model/instrumentmodelevents"),s=e("module/core/js/util/svg");i.extend(t,n);var a=t.prototype;return a._showPrompt=!1,a.withShowPrompt=o.setter("_showPrompt"),a.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._instrumentModel.getInstrumentModelInfo()?this._showText():this._instrumentModel.on(r.INFO_LOADED,this._showText,this)},a.stopRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this),this._instrumentModel.un(null,this)},a._updateTextPosition=function(){var e=this._presentationModel.getOffsets("marketInfo");this.dContainer.attr("transform",s.svgTranslateAttrXY(e.xOffset,e.yOffset))},a._text=function(){var e="";return this._instrumentModel.getInstrumentModelInfo()&&(e=this._instrumentModel.getInstrumentModelInfo().name,this._showPrompt&&(e+=" ("+this._instrumentModel.getInstrumentModelInfo().prompt+")")),e},Object.seal(a),Object.seal(t)})),define("module/market-name-label/js/market-name-label",["require","module/market-name-label/js/view/renderer/instrumentnamerenderer","module/core/js/util/object"],(function(e){"use strict";function t(e,t,n,i,o,r,s){this._eventBus=e,this._options=t||{}}var n=e("module/market-name-label/js/view/renderer/instrumentnamerenderer"),i=e("module/core/js/util/object"),o=i.recursiveFreeze({studyTitle:{type:n,group:"body",position:"northWest",presentationController:"commonUi",properties:{showPrompt:!0,marginTop:5,marginLeft:5}}}),r=t.prototype;return r._eventBus=null,r._options=null,r._chartView=null,r._config=null,r.init=function(){this._config=this._getConfig(),this._eventBus.publish("subViews/config",["marketNameLabel",this._config]),this._chartView?this._chartView.addRenderersBySubviewConfig(this._config):this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this)},r._getConfig=function(){var e,t={};return e={renderers:i.deepCopyLiteral({},o)},this._options.hasOwnProperty("group")&&(e.renderers.studyTitle.group=this._options.group),this._options.hasOwnProperty("position")&&(e.renderers.studyTitle.position=this._options.position),this._options.hasOwnProperty("presentationController")&&(e.renderers.studyTitle.presentationController=this._options.presentationController),this._options.hasOwnProperty("properties")&&(e.renderers.studyTitle.properties=this._options.properties),t[this._options.view||"prices"]=e,t},r._handleChartViewReady=function(e){this._chartView=e},r.destroy=function(){this._eventBus.unsubscribeAll(this),this._eventBus.publish("subViews/removeConfig",["marketNameLabel"]),this._chartView&&this._chartView.removeRenderersBySubviewConfig(this._config)},Object.seal(r),Object.seal(t)})),define("module/menu-mobile/js/view/menucontainerview",[],(function(){"use strict";function e(e){this._dContainer=e}e.create=function(t){return new e(t)};var t=e.prototype;return t._dContainer=null,t._dMenuContainer=null,t._dMenu=null,t.initDom=function(){this._dMenuContainer=this._dContainer.append("div").attr("class","menuContainer"),this._dMenu=this._dMenuContainer.append("div").attr("class","menu hidden")},t.getViewElement=function(){return this._dMenu},t.toggle=function(e){this._dMenu.classed("hidden",!e)},t.destroy=function(){this._dMenuContainer&&(this._dMenuContainer.remove(),this._dMenuContainer=null,this._dMenu=null)},Object.seal(t),Object.seal(e)})),define("module/menu-common/js/menu/menucontainer",["require","module/core/js/util/class","module/core/js/util/functional","module/menu-mobile/js/view/menucontainerview","module/menu-common/js/menu/menuevents","module/core/js/event/subscribable"],(function(e){"use strict";function t(e,t,n,o,r,s){this._handleMenuChanged=i.debounce(this._handleMenuChanged,50),this._taskManager=s,this._eventBus=e,this._eventBus.subscribe("chart/view/dimensions/changed",this._handleDimensionsChanged,this),this._menu=this._createMenu(t,n,o,r)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/menu-mobile/js/view/menucontainerview"),r=e("module/menu-common/js/menu/menuevents"),s=e("module/core/js/event/subscribable");n.extend(t,s),t.MENU_OPTIONS_CHANGED="MENU_OPTIONS_CHANGED";var a=t.prototype;return t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)},a._menuContainerView=null,a._menu=null,a._eventBus=null,a._taskManager=null,a.init=function(e,t,n){this._menuContainerView=o.create(n),this._menuContainerView.initDom(),this._menu.initDom(this._menuContainerView,t,e)},a.updateMenuVisibility=function(e,t){this._menuContainerView.toggle(e),e?this._menu.show(t):this._menu.hide(),this._updateCaptureZones()},a.getMenuOptions=i.delegate("_menu","getMenuOptions"),a.destroy=function(){this._handleMenuChanged.abort(),this._eventBus.unsubscribeAll(this),this._menu.un(null,this),this._menu.destroy(),this._menuContainerView&&(this._menuContainerView.destroy(),this._menuContainerView=null)},a._createMenu=function(e,t,n,i){var o,s=e.type,a=e.subMenus||[],l=e.properties||{};return o=s.create(this._eventBus,t,n,i,l,a,this._taskManager),o.on(r.CHANGED,this._handleMenuChanged,this),o},a._updateCaptureZones=i.delegate("_menu","updateCaptureZoneSize"),a._handleDimensionsChanged=function(){this._menu.onDimensionsChanged(),this._updateCaptureZones()},a._handleMenuChanged=function(){this.fire(t.MENU_OPTIONS_CHANGED,this.getMenuOptions())},Object.seal(t.prototype),Object.seal(t)})),define("module/menu-common/js/menu-common",["require","module/menu-common/js/menu/menucontainer","module/core/js/util/oop","module/core/js/util/functional"],(function(e){"use strict";function t(e,t,n,i,o,r,s,a){this._eventBus=e,this._options=t||{},this._settingsManager=o,this._containerProvider=r,this._menuContainers={},this._taskManager=a,this._eventBus.subscribe("menu/visibility/changed",this._recalculateMenuSize,this)}var n=e("module/menu-common/js/menu/menucontainer"),i=e("module/core/js/util/oop"),o=e("module/core/js/util/functional");t.getMenuSize=function(e){var t,n=e.select(".menu:not(.hidden) .bottom:not(.hidden) .menuViewItem"),i=e.select(".menu:not(.hidden) .sub:not(.hidden) .menuViewItem");return t=n.node()?n.height():0,t+=i.node()?i.height():0};var r=t.prototype;return r._chartView=null,r._settingsManager=null,r._captureZoneManager=null,r._eventBus=null,r._options=null,r._taskManager=null,r._containerProvider=null,r._menuContainers=null,r._dContainer=null,r.getSelectedResolutionLabel=i.abstractMethod,r.createMenuContainer=function(e,t,i){var o=n.create(this._eventBus,t,this._settingsManager,this._containerProvider,i,this._taskManager);return this._menuContainers[e]=o,this._chartView&&o.init(this._chartView.animationPoller,this._captureZoneManager,this._dContainer),o},r.showMenu=function(e,t){this._chartView&&(o.objectInvoke(this._menuContainers,"updateMenuVisibility",!1),this._menuContainers[e].updateMenuVisibility(!0,t))},r.hideMenu=function(e){this._chartView&&this._menuContainers[e]&&this._menuContainers[e].updateMenuVisibility(!1)},r.destroyMenuContainer=function(e){this._menuContainers&&this._menuContainers[e]&&(this._menuContainers[e].destroy(),delete this._menuContainers[e])},r.init=function(){this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this)},r.destroy=function(){o.objectInvoke(this._menuContainers,"destroy"),this._menuContainers={},this._eventBus.unsubscribeAll(this),this._chartView=null},r._recalculateMenuSize=function(){this._eventBus.publish("menu/size/changed",[this._getMenuSize()])},r._getMenuSize=function(){return null===this._chartView?0:t.getMenuSize(this._chartView.dContainer)},r._handleChartViewReady=function(e,t,n){this._chartView=e,this._dContainer=n,this._captureZoneManager=t,this._initMenuContainers()},r._initMenuContainers=function(){for(var e in this._menuContainers)this._menuContainers.hasOwnProperty(e)&&this._menuContainers[e].init(this._chartView.animationPoller,this._captureZoneManager,this._dContainer)},Object.seal(t.prototype),Object.seal(t)})),define("module/menu-mobile/js/menu-mobile",["require","module/menu-common/js/menu-common","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o,r,s,a,l){t.superclass.constructor.call(this,e,n,i,o,r,s,a,l)}var n=e("module/menu-common/js/menu-common");e("module/core/js/util/class").extend(t,n);var i=t.prototype;return i.showMenu=function(e){t.superclass.showMenu.call(this,e),this._chartView&&this._eventBus.publish("api/out/menu/displayed",[!0])},i.hideMenu=function(e){this._chartView&&this._eventBus.publish("api/out/menu/displayed",[!1]),t.superclass.hideMenu.call(this,e)},i.destroy=function(){t.superclass.destroy.call(this),this._recalculateMenuSize()},Object.seal(t.prototype),Object.seal(t)})),
define("module/main-menu/js/main-menu",["require","module/core/js/event/subscribable","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/config/taskconfig"],(function(e){"use strict";function t(e,t,i,o,r,s,a,l){this._eventBus=e,this._options=t||{},this._toggleStates=new n,this._moduleLoader=i,this._taskManager=l,this._eventBus.subscribe("menu/item/switch",this._handleMenuItemSwitch,this)}var n=e("module/core/js/event/subscribable"),i=e("module/core/js/view/userinput/tapgesturerecogniser"),o=e("module/core/js/config/taskconfig");t.MAIN_MENU_ID="MAIN_MENU_ID";var r=t.prototype;return r._toggleStates=null,r._menuApi=null,r._moduleLoader=null,r._eventBus=null,r._isToggled=!1,r._taskManager=null,r._chartTapRecogniser=null,r._captureZoneManager=null,r._chartView=null,r.init=function(){this._menuApi=this._moduleLoader.getModule("menuApi"),this._options.menu&&this._menuApi.createMenuContainer(t.MAIN_MENU_ID,this._options.menu,this._toggleStates),this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._eventBus.subscribe("menu/toggle",this.toggleMainMenu,this),this._eventBus.subscribe("menu/hide",this._hide,this),this._isToggled=!1},r.destroy=function(){this._eventBus.publish("menu/main/destroyed"),this._taskManager.finishTask(o.MAIN_MENU.ID),this._menuApi.destroyMenuContainer(t.MAIN_MENU_ID),this._eventBus.publish("menu/visibility/changed"),this._chartView&&(this._chartView.globalCaptureZone&&this._chartTapRecogniser&&this._chartView.globalCaptureZone.removeGestureRecogniser(this._chartTapRecogniser),this._chartTapRecogniser&&this._chartTapRecogniser.destroy(),this._chartTapRecogniser=null),this._eventBus.unsubscribe("menu/toggle",this.toggleMainMenu,this),this._eventBus.unsubscribe("chart/view/ready",this._handleChartViewReady,this),this._eventBus.unsubscribe("menu/hide",this._hide,this)},r.toggleMainMenu=function(){this._isToggled?this._taskManager.finishTask(o.MAIN_MENU.ID):this._taskManager.startTask(o.MAIN_MENU,{onActivated:this._showMenu.bind(this),onDeactivated:this._hideMenu.bind(this)}),this._eventBus.publish("menu/toggled",[this._isToggled])},r._hideMenu=function(){this._isToggled=!1,this._menuApi.hideMenu(t.MAIN_MENU_ID)},r._showMenu=function(){this._isToggled=!0,this._menuApi.showMenu(t.MAIN_MENU_ID)},r._handleChartViewReady=function(e,t,n){this._chartView=e,this._captureZoneManager=t,this._chartTapRecogniser=i.create(1,!1).withHandler(this.toggleMainMenu,this),this._chartView.globalCaptureZone.addGestureRecogniser(this._chartTapRecogniser)},r._hide=function(){this._isToggled&&this._hideMenu()},r._handleMenuItemSwitch=function(e,t){t!==this._toggleStates[e]&&(this._toggleStates[e]=t,this._toggleStates.fire("toggled",e,t))},Object.seal(t.prototype),Object.seal(t)})),define("module/overview/js/model/overviewdatamodel",["require","module/core/js/ext/d3","module/core/js/util/array","module/core/js/util/functional"],(function(e){"use strict";function t(e,t,i){this.dataPoints=e,this.startDate=t,this.endDate=i,this._scale=n.scale.linear().domain(e.map((function(e){return e.date.valueOf()}))).range(e.map(o.plucker("accTime")))}var n=e("module/core/js/ext/d3"),i=e("module/core/js/util/array"),o=e("module/core/js/util/functional"),r=t.prototype;return r.dataPoints=null,r.startDate=null,r.endDate=null,r._scale=null,r.getValues=function(){return this.dataPoints.map(o.plucker("value"))},r.getMinValue=function(){return Math.min.apply(Math,this.getValues())},r.getMaxValue=function(){return Math.max.apply(Math,this.getValues())},r.getFirstAccTime=function(){return i.firstOf(this.dataPoints).accTime},r.getLastAccTime=function(){return i.lastOf(this.dataPoints).accTime},r.toAccTime=function(e){return this._scale(e.valueOf())},r.toDate=function(e){return new Date(this._scale.invert(e))},r.destroy=function(){},Object.seal(r),Object.seal(t)})),define("module/overview/js/enum/overviewresolutionsenum",["require","module/core/js/model/resolutionsenum"],(function(e){"use strict";var t=e("module/core/js/model/resolutionsenum"),n={};return n._mapToOverviewResolution={},n._mapToOverviewResolution[t.values.TICK.id]=t.values.FIVE_MINUTES,n._mapToOverviewResolution[t.values.SECOND.id]=t.values.FIVE_MINUTES,n._mapToOverviewResolution[t.values.MINUTE.id]=t.values.HOUR,n._mapToOverviewResolution[t.values.TWO_MINUTES.id]=t.values.HOUR,n._mapToOverviewResolution[t.values.THREE_MINUTES.id]=t.values.HOUR,n._mapToOverviewResolution[t.values.FIVE_MINUTES.id]=t.values.HOUR,n._mapToOverviewResolution[t.values.TEN_MINUTES.id]=t.values.HOUR,n._mapToOverviewResolution[t.values.FIFTEEN_MINUTES.id]=t.values.HOUR,n._mapToOverviewResolution[t.values.THIRTY_MINUTES.id]=t.values.HOUR,n._mapToOverviewResolution[t.values.HOUR.id]=t.values.FOUR_HOURS,n._mapToOverviewResolution[t.values.TWO_HOURS.id]=t.values.FOUR_HOURS,n._mapToOverviewResolution[t.values.THREE_HOURS.id]=t.values.FOUR_HOURS,n._mapToOverviewResolution[t.values.FOUR_HOURS.id]=t.values.FOUR_HOURS,n._mapToOverviewResolution[t.values.DAY.id]=t.values.DAY,n._mapToOverviewResolution[t.values.WEEK.id]=t.values.WEEK,n._mapToOverviewResolution[t.values.MONTH.id]=t.values.MONTH,Object.freeze(n._mapToOverviewResolution),n.toOverviewResolution=function(e){return n._mapToOverviewResolution[e.id]},Object.seal(n)})),define("module/overview/js/serviceclient/overviewdataclient",["require","module/core/js/serviceclient/batchdataclient","module/core/js/model/datapoint/datapoint","module/core/js/util/functional","module/core/js/model/historicalpriceadapter","module/core/js/model/instrumentresolutionevents","module/core/js/util/math","module/core/js/model/pricecalculator/midpricecalculator","module/core/js/util/object","module/overview/js/model/overviewdatamodel","module/overview/js/enum/overviewresolutionsenum","module/core/js/util/price"],(function(e){"use strict";function t(e){this._eventBus=e,this._priceCalculator=new l}var n=e("module/core/js/serviceclient/batchdataclient"),i=e("module/core/js/model/datapoint/datapoint"),o=e("module/core/js/util/functional"),r=e("module/core/js/model/historicalpriceadapter"),s=e("module/core/js/model/instrumentresolutionevents"),a=e("module/core/js/util/math"),l=e("module/core/js/model/pricecalculator/midpricecalculator"),u=e("module/core/js/util/object"),c=e("module/overview/js/model/overviewdatamodel"),d=e("module/overview/js/enum/overviewresolutionsenum"),h=e("module/core/js/util/price");t.create=function(e){return new t(e)};var p=t.prototype;return p._batchDataClient=null,p._eventBus=null,p._instrumentResolution=null,p._priceCalculator=null,u.defineProperty(p,"_instrumentModel",{configurable:!1,enumerable:!0,get:function(){var e=this._instrumentResolution;return e&&e.instrumentModel?e.instrumentModel:null},set:o.throwError("Instrument model is read-only property")}),p.withInstrumentResolution=function(e){return this._clearInstrument(),this._instrumentResolution=e,this._batchDataClient=n.create(this._instrumentModel.epic,this.getOverviewResolution(),this._eventBus,e.instrumentResolutionGuid),this},p.getOverviewResolution=function(){return d.toOverviewResolution(this._instrumentResolution.resolution)},p.loadOverviewData=function(e,t){var n=this._instrumentResolution;n.info?this._makeDataRequest(e,t):(n.un(null,this),n.on(s.INFO_LOADED,this._makeDataRequest.bind(this,e,t),this,{once:!0}))},p.destroy=function(){this._eventBus.unsubscribeAll(this),delete this._eventBus,delete this._priceCalculator,this._clearInstrument()},p._makeDataRequest=function(e,t){var n=this._instrumentModel.getTimeline(),i=n.startDate(),o=n.endDate();this._batchDataClient.withVersion(this._instrumentModel.instrumentVersion).getDataFromDateRange(i,o,this._handleOverviewDataLoaded.bind(this,i,o,e,t),this._handleOverviewDataFailed.bind(this,t))},p._parseOverviewData=function(e){return e?h.flattenHcdJson(e).map((function(e,t){var n,o=r.createFromHcdPoint(e),s=this._priceCalculator.calculate(o.close);return a.isNumber(s)?(n=new i(e.timestamp,s,e.lastTradedVolume),n.accTime=t,n):null}),this).filter(o.defined):null},p._clearInstrument=function(){this._instrumentResolution&&(this._instrumentResolution.un(null,this),delete this._instrumentResolution),this._batchDataClient&&(this._batchDataClient.destroy(),delete this._batchDataClient)},p._handleOverviewDataLoaded=function(e,t,n,i,o,r,s){try{var a=this._parseOverviewData(r);n(new c(a,e,t))}catch(e){this._handleOverviewDataFailed(i,o,e,s)}},p._handleOverviewDataFailed=function(e,t,n,i){e(t,n,i)},Object.seal(p),Object.seal(t)})),define("module/overview/js/serviceclient/overviewdatapoller",["require","module/core/js/util/log","module/overview/js/serviceclient/overviewdataclient","module/core/js/model/resolutionsenum"],(function(e){"use strict";function t(e){this._eventBus=e}var n=e("module/core/js/util/log"),i=e("module/overview/js/serviceclient/overviewdataclient"),o=e("module/core/js/model/resolutionsenum"),r=o.values.WEEK.period;t.create=function(e){return new t(e)},t._getDataClientHandler=function(e,t,n){return function(){this._isPolling&&(n.apply(null,arguments),this._pollForOverviewData(e,t))}};var s=t.prototype;return s._isPolling=!1,s._timeoutId=null,s._overviewDataClient=null,s.destroy=function(){delete this._eventBus,this._destroyOverviewDataClientAndStopPolling()},s.startPollingForOverviewData=function(e,t){if(!this._overviewDataClient)return void n.warn("Retrieving overview data without base instrument resolution");this._isPolling=!0,this._loadOverviewData(e,t)},s.stopPollingForOverviewData=function(){this._isPolling=!1,this._timeoutId&&(clearTimeout(this._timeoutId),delete this._timeoutId)},s.withInstrumentResolution=function(e){this._destroyOverviewDataClientAndStopPolling(),this._overviewDataClient=i.create(this._eventBus).withInstrumentResolution(e)},s._destroyOverviewDataClientAndStopPolling=function(){this.stopPollingForOverviewData(),this._overviewDataClient&&(this._overviewDataClient.destroy(),delete this._overviewDataClient)},s._loadOverviewData=function(e,n){this._timeoutId&&(clearTimeout(this._timeoutId),delete this._timeoutId),this._overviewDataClient.loadOverviewData(t._getDataClientHandler(e,n,e).bind(this),t._getDataClientHandler(e,n,n).bind(this))},s._pollForOverviewData=function(e,t){var i=Math.min(r,Math.max(this._overviewDataClient.getOverviewResolution().period,o.values.FIVE_MINUTES.period));if(!isFinite(i))return void n.warn("Overview polling must be a finite amount of ms");this._timeoutId=setTimeout(this._loadOverviewData.bind(this,e,t),i)},Object.seal(t.prototype),Object.seal(t)})),define("module/overview/js/overviewevents",["require","module/core/js/util/object"],(function(e){"use strict";var t=e("module/core/js/util/object"),n={};return n.VISIBILITY_CHANGED="VISIBILITY_CHANGED",n.DATA_LOADED="OVERVIEW_DATA_LOADED",n.AVAILABILITY_CHANGED="AVAILABILITY_CHANGED",t.recursiveFreeze(n),n})),define("module/overview/js/enum/overviewunavailabilityreasonenum",[],(function(){"use strict";return Object.freeze({NO_RESOLUTION:"NO_RESOLUTION",TICK_RESOLUTION:"TICK_RESOLUTION",NO_DATA:"NO_DATA"})})),define("module/overview/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{TICK_RESOLUTION:"Entschuldigung, die Zeitleiste ist in der Tick-Ansicht nicht verfügbar",NO_DATA:"Entschuldigung, die Zeitleiste ist derzeit nicht verfügbar"},en:{TICK_RESOLUTION:"Sorry, the timeline is not available for tick interval",NO_DATA:"Sorry, the timeline is unavailable at present"},es:{TICK_RESOLUTION:"Lo sentimos, la línea de tiempo no está disponible para el intervalo 'Tick'",NO_DATA:"Lo sentimos, en este momento la línea de tiempo no está disponible"},fr:{TICK_RESOLUTION:"Désolé, la chronologie n'est pas disponible pour l'échelle de temps 'Tick'",NO_DATA:"Désolé, la chronologie n'est pas disponible pour le moment"},it:{TICK_RESOLUTION:"Siamo spiacenti, la timeline non è disponibile per l'intervallo 'tick'",NO_DATA:"La timeline non è al momento disponibile"},ja:{TICK_RESOLUTION:"申し訳ございません。期間設定はティックではご利用いただけません。",NO_DATA:"申し訳ございません。期間設定は現在ご利用いただけません。"},nl:{TICK_RESOLUTION:"Het spijt ons, u kunt deze tijdlijn niet per tick bekijken",NO_DATA:"Sorry, de tijdlijn is momenteel niet beschikbaar"},no:{TICK_RESOLUTION:"Beklager, tidslinjen er ikke tilgjengelig for tick-intervaller",NO_DATA:"Beklager, tidslinjen er ikke tilgjengelig for øyeblikket"},pt:{TICK_RESOLUTION:"Pedimos desculpa, esta linha do tempo não está disponível para a resolução tick",NO_DATA:"Pedimos desculpa, esta linha do tempo não está disponível no momento."},sv:{TICK_RESOLUTION:"Tyvärr, tidslinjen är inte tillgänglig i tick-grafer",NO_DATA:"Tidslinjen är tyvärr inte tillgänglig just nu"},zh:{TICK_RESOLUTION:"抱歉，Tick间隔无时间轴",NO_DATA:"抱歉，目前无法查看时间轴"},zh_TW:{TICK_RESOLUTION:"抱歉，Tick間隔無時間軸",NO_DATA:"抱歉，目前無法查看時間軸"}})})),define("module/overview/js/enum/overviewpresentationstates",[],(function(){"use strict";return Object.freeze({DATA_POINTS:"DATA_POINTS",AVAILABLE_DATE_RANGE:"AVAILABLE_DATE_RANGE",VISIBLE_DATE_RANGE:"VISIBLE_DATE_RANGE",SCREEN_DIMENSIONS:"SCREEN_DIMENSIONS"})})),define("module/core/js/util/timeticks",["require","module/core/js/util/array","module/core/js/util/functional","module/core/js/util/math","module/core/js/util/timeconstants","module/core/js/util/timeiterator"],(function(e){"use strict";var t=e("module/core/js/util/array"),n=e("module/core/js/util/functional"),i=e("module/core/js/util/math"),o=e("module/core/js/util/timeconstants"),r=e("module/core/js/util/timeiterator"),s=o.Enum,a={DAY:{period:s.DAY,multiple:1},MONTH:{period:s.MONTH,multiple:1},YEAR:{period:s.YEAR,multiple:1},FIVE_YEARS:{period:s.YEAR,multiple:5}},l=[{range:a.DAY,individual:{period:s.SECOND,multiple:1}},{range:a.DAY,individual:{period:s.SECOND,multiple:2}},{range:a.DAY,individual:{period:s.SECOND,multiple:5}},{range:a.DAY,individual:{period:s.SECOND,multiple:10}},{range:a.DAY,individual:{period:s.SECOND,multiple:30}},{range:a.DAY,individual:{period:s.MINUTE,multiple:1}},{range:a.DAY,individual:{period:s.MINUTE,multiple:2}},{range:a.DAY,individual:{period:s.MINUTE,multiple:3}},{range:a.DAY,individual:{period:s.MINUTE,multiple:5}},{range:a.DAY,individual:{period:s.MINUTE,multiple:10}},{range:a.DAY,individual:{period:s.MINUTE,multiple:15}},{range:a.DAY,individual:{period:s.MINUTE,multiple:30}},{range:a.DAY,individual:{period:s.HOUR,multiple:1}},{range:a.DAY,individual:{period:s.HOUR,multiple:2}},{range:a.DAY,individual:{period:s.HOUR,multiple:3}},{range:a.DAY,individual:{period:s.HOUR,multiple:4}},{range:a.DAY,individual:{period:s.HOUR,multiple:6}},{range:a.MONTH,individual:a.DAY},{range:a.MONTH,individual:{period:s.WEEK,multiple:1}},{range:a.YEAR,individual:a.MONTH},{range:a.YEAR,individual:{period:s.MONTH,multiple:3}},{range:a.FIVE_YEARS,individual:a.YEAR},{range:a.FIVE_YEARS,individual:{period:s.YEAR,multiple:2}},{range:a.FIVE_YEARS,individual:a.FIVE_YEARS}],u={};return u.INDIVIDUAL_TICK_TYPE="individual",u.RANGE_TICK_TYPE="range",u.OPEN_TICK_TYPE="open",u._getTickIteratorIndex=function(e,t,n){var i,r;for(r=0;r<e.length;r++)if((i=o.Periods[e[r].individual.period]*e[r].individual.multiple)>=t&&(i%n==0||i>=o.Periods.DAY))return r;return e.length-1},u.getTickIterator=function(e,t,n,i,o){var s=Math.max(i,t*n),a=u._getTickIteratorIndex(l,s,i),c=l[a][e];return r.getIterator(c.period,c.multiple,o)},u._addUniqueTick=function(e,n,o,r,s,a,l){var c=s.asAccTime(l),d=t.lastOf(e),h={date:l,type:o,accTime:c,unit:r},p=i.isNumber(h.accTime);if(d&&c===d.accTime)o===u.OPEN_TICK_TYPE&&(e[e.length-1]=h);else{if(d&&c-d.accTime<n)return;p&&e.push(h)}},u.extendDateRangeForOffscreenTicks=function(e,t){var n,i,o;return n=t.previous(e[0]),i=new Date(n.getTime()-1),n=t.next(e[1]),o=new Date(n.getTime()+1),[i,o]},u.getInstanceTicks=function(e,t,i,o,r,s){var a=[],l=i.closestIntervalForDate(e[0]),c=u._addUniqueTick.bind(null,a,r,u.INDIVIDUAL_TICK_TYPE,t.unit,i),d=u._addUniqueTick.bind(null,a,r,u.OPEN_TICK_TYPE,t.unit,i);return t.iterateBetween(e,(function(e){for(;e>=l.end;){if(!(l=l.next))return!1;o&&d(l,l.start)}if(e<l.start)return(o||u._isNextIterationOutsideInterval(l,t)||u._isTickDistanceBigEnough(l,t))&&c(l,l.start),l.start;e<l.end&&c(l,e)})),a.map(n.setAttr("tickType",s))},u._isNextIterationOutsideInterval=function(e,t){return t.next(e.start)>e.end},u._isTickDistanceBigEnough=function(e,t){return t.next(e.start)-e.start>=t.period},Object.seal(u)})),define("module/overview/js/view/model/overviewpresentationmodel",["require","module/core/js/ext/d3","module/core/js/view/presentationmodel/abstractpresentationmodel","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object","module/overview/js/i18n","module/overview/js/enum/overviewpresentationstates","module/overview/js/enum/overviewresolutionsenum","module/core/js/util/timeticks","module/core/js/model/visibledaterange"],(function(e){"use strict";function t(e,t){return{configurable:!0,enumerable:!0,get:t,set:a.throwError(e+" is read-only")}}function n(e,t){return{asAccTime:function(e){return Math.max(this._xScale(this._dataModel.toAccTime(e)),0)}.bind(e),closestIntervalForDate:function(){return{start:t[0],end:t[1]}}}}function i(){i.superclass.constructor.call(this),this._xScale=o.scale.linear()}var o=e("module/core/js/ext/d3"),r=e("module/core/js/view/presentationmodel/abstractpresentationmodel"),s=e("module/core/js/util/class"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/object"),u=e("module/overview/js/i18n"),c=e("module/overview/js/enum/overviewpresentationstates"),d=e("module/overview/js/enum/overviewresolutionsenum"),h=e("module/core/js/util/timeticks"),p=e("module/core/js/model/visibledaterange");s.extend(i,r),i.UPDATED="UPDATED",i.OVERVIEW_CREATE="OVERVIEW_CREATE",i.OVERVIEW_REMOVE="OVERVIEW_REMOVE",i.HANDLE_POSITION_CHANGED="HANDLE_POSITION_CHANGED";var m=i.prototype;return l.defineProperties(m,{width:t("Width",(function(){var e=this._xScale.range();return e[1]-e[0]})),height:t("Height",(function(){var e=this._yScale&&this._yScale.range();return e?e[1]-e[0]:null})),availableAccRange:t("Available overview range",(function(){var e=this._dataModel;return e&&e.dataPoints?[e.getFirstAccTime(),e.getLastAccTime()]:null})),visibleAccRange:t("Visible overview range",(function(){var e=this._dateRange,t=this._dataModel;return t&&e?e.map(t.toAccTime,t):null})),maxAccRange:t("Maximum available date range",(function(){var e,t,n=this._baseInstrumentResolution,i=n?d.toOverviewResolution(n.resolution):null,o=this._xScale&&this._xScale.range();if(n&&i&&o)switch(n.instrumentModel.chartModel.restrictDuration){case p.RESTRICT_DURATION.SCREEN:return t=(o[1]-o[0])/p.PIXELS_PER_CANDLE,n.resolution.period/i.period*t;case p.RESTRICT_DURATION.DATA:return e=this.availableAccRange,e[1]-e[0]}return null}))}),m.blockIncoming=!1,m.marginLeft=0,m.marginRight=0,m.showCloseIcon=!1,m._baseInstrumentResolution=null,m._dataModel=null,m._dateRange=null,m._overviewVisible=!1,m._unavailabilityReason=null,m._xScale=null,m._yScale=null,m.getXScale=a.getter("_xScale"),m.getYScale=a.getter("_yScale"),m.isVisible=a.getter("_overviewVisible"),m.isAvailable=function(){return!this._unavailabilityReason},m.setUnavailabilityReason=function(e){return e!==this._unavailabilityReason&&(this._unavailabilityReason=e,this.fire(i.UPDATED)),this},m.getUnavailabilityLabel=function(){return this._unavailabilityReason?u.get(this._unavailabilityReason):null},m.isReady=function(){return this._overviewVisible&&this._dataModel&&!!this._baseInstrumentResolution&&this.width>0},m.isInitialDataLoaded=function(){return!!this._dataModel},m.setYScale=a.setter("_yScale"),m.updateWidth=function(e){return this._xScale.range([this.marginLeft,e-this.marginRight]),this._notifyOfUpdate(c.SCREEN_DIMENSIONS),this},m.updateHeight=function(){return this._notifyOfUpdate(c.SCREEN_DIMENSIONS),this},m.setDateRange=function(e){return this.blockIncoming||(this._dateRange=e,this._notifyOfUpdate(c.VISIBLE_DATE_RANGE)),this},m.setModel=function(e){return this._dataModel=e,this._xScale.domain([e.getFirstAccTime(),e.getLastAccTime()]),this._notifyOfUpdate(c.DATA_POINTS),this._notifyOfUpdate(c.AVAILABLE_DATE_RANGE),this},m.getLinePoints=function(){if(!this._dataModel)return[];var e=this._yScale.range()[1],t=this._dataModel,n=t.dataPoints.map((function(e){return{x:this._xScale(e.accTime),y:this._yScale(e.value)}}),this);return n.push({x:this._xScale(t.getLastAccTime()),y:e}),n.push({x:this._xScale(t.getFirstAccTime()),y:e}),n},m.setVisibility=function(e){var t=this._overviewVisible;this._overviewVisible=e,!t&&e?this.fire(i.OVERVIEW_CREATE):t&&!e&&this.fire(i.OVERVIEW_REMOVE)},m.clearOverview=function(e){delete this._baseInstrumentResolution,delete this._dataModel,delete this._dateRange,e&&(this._baseInstrumentResolution=e),this.fire(i.UPDATED,c.DATA_POINTS)},m.getXTicks=function(){var e,t=this._getXTicks(h.INDIVIDUAL_TICK_TYPE),n=this._getXTicks(h.RANGE_TICK_TYPE);return t.length&&n.length&&t[0].unit!==n[0].unit&&(e=n.map((function(e){return{tickMajor:e,laterTicksMinor:t.filter((function(t){return t.date>=e.date}))}})).filter(a.plucker("laterTicksMinor.length")),e.length>.5*t.length?t=n:e.forEach((function(e){var t=e.laterTicksMinor[0].accTime;l.merge(e.laterTicksMinor[0],e.tickMajor,!0),e.laterTicksMinor[0].accTime=t}))),t},m.getUserTimeZone=function(){return this._baseInstrumentResolution?this._baseInstrumentResolution.info.getUserTimeZone():null},m._doesTickFitAtRightEdge=function(e){return e.accTime+50<this.width},m._getXTicks=function(e){if(!this._dataModel||!this._baseInstrumentResolution)return[];var t=this._getIterator(e),i=h.extendDateRangeForOffscreenTicks(this._getDateRange(),t);return h.getInstanceTicks(i,t,n(this,i),!1,75,e===h.RANGE_TICK_TYPE?"major":"minor").filter(this._doesTickFitAtRightEdge,this)},m._getDateRange=function(){return[this._dataModel.startDate,this._dataModel.endDate]},m._getIterator=function(e){var t=this._getDateRange(),n=(t[1].valueOf()-t[0].valueOf())/this.width;return h.getTickIterator(e,n,30,this._baseInstrumentResolution.period,this.getUserTimeZone())},m._notifyOfUpdate=function(e){this._dataModel&&this.fire(i.UPDATED,e)},m.convertAcc=function(e){return this._baseInstrumentResolution.instrumentModel.getTimeline().asAccTime(this._dataModel.toDate(e))},m.isAccAtOverviewEnd=function(e){return e>=this._dataModel.getLastAccTime()},Object.seal(m),Object.seal(i)})),define("module/overview/js/view/renderer/overviewcloseiconrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/core/js/view/component/closeicon","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/hovergesturerecogniser","module/overview/js/view/model/overviewpresentationmodel","module/core/js/view/subview","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/view/component/closeicon"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/userinput/hovergesturerecogniser"),l=e("module/overview/js/view/model/overviewpresentationmodel"),u=e("module/core/js/view/subview"),c=e("module/core/js/enum/zindexenum");i.extend(t,n);var d=t.prototype;return d._captureZone=null,d._closeIcon=null,d._closeIconPosition=0,d._hoverMode=!1,d._hovered=!1,d._overlapped=!1,d.withHoverMode=s.setter("_hoverMode"),d.initDom=function(){return t.superclass.initDom.call(this),this._createCloseIcon(),this._createCaptureZone(),this},d.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.apply(this,arguments),this._subView.on(u.DIMENSIONS_CHANGED,this._handleSubViewDimensionsChanged,this),this._presentationModel.on(l.HANDLE_POSITION_CHANGED,this._handleHandlePosition,this)},d.stopRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.apply(this,arguments),this._subView.un(null,this),this._presentationModel.un(null,this)},d.destroy=function(){t.superclass.destroy.call(this),this._captureZone&&(this._captureZone.destroy(),this._captureZone=null),this._closeIcon&&(this._closeIcon.destroy(),this._closeIcon=null)},d._createCaptureZone=function(){this._captureZone=this._captureZoneManager.create(r.PROPAGATE_ALL,c.MAX),this._hoverMode?this._captureZone.addGesture(a,{onStart:this._onEnter.bind(this),onEnd:this._onExit.bind(this)}):this._onEnter()},d._createCloseIcon=function(){this._closeIcon=o.create(this.dContainer,this._captureZoneManager,c.OVERVIEW_CLOSE_ICON,this._presentationController.hideOverview.bind(this._presentationController)),this._closeIcon.hide()},d._handleHandlePosition=function(e,t){if(this._hovered){var n=t>this._closeIconPosition&&e<this._closeIconPosition+o.DEFAULT_CLOSE_ICON_SIZE;this._overlapped!==n&&(n?this._closeIcon.hide():this._closeIcon.show(),this._overlapped=n)}},d._handleSubViewDimensionsChanged=function(e){this._positionCloseIcon({containerWidth:e.width,containerHeight:this._presentationModel.height,marginRight:this._presentationModel.marginRight}),this._captureZone.setDimensions({x:e.x,y:e.y,width:e.width,height:this._presentationModel.height})},d._onEnter=function(){this._overlapped||this._closeIcon.show(),this._hovered=!0},d._onExit=function(){this._closeIcon.hide(),this._hovered=!1},d._positionCloseIcon=function(e){var t=(e.containerHeight-o.DEFAULT_CLOSE_ICON_SIZE)/2,n=Math.min((e.marginRight+o.DEFAULT_CLOSE_ICON_SIZE)/2,t+o.DEFAULT_CLOSE_ICON_SIZE);this._closeIconPosition=e.containerWidth-n,this._closeIcon.setPosition(this._closeIconPosition,t)},Object.seal(d),Object.seal(t)})),define("module/latest-candle-button/js/trackeractions",["require","lodash","module/core/js/tracker/enum/schema"],(function(e){"use strict";var t=e("lodash"),n=e("module/core/js/tracker/enum/schema"),i={};return i.latestCandle=function(e){return{schema:n.ELEMENT_ACTION,elementId:"LATEST_CANDLE",elementGroup:"GLOBAL",elementValue:"LATEST_CANDLE",elementParentId:e,elementType:e===i.latestCandle.OVERVIEW?"LAYER":"BUTTON",actionType:e===i.latestCandle.OVERVIEW?"DOUBLE_PRESS":"PRESS"}},Object.freeze(t.assign(i.latestCandle,{TOP_MENU:"TOP_MENU",OVERVIEW:"OVERVIEW",HOTKEY:"HOTKEY"})),Object.seal(i)})),define("module/overview/js/view/model/overviewpresentationcontroller",["require","module/core/js/view/abstractpresentationcontroller","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/overview/js/overviewevents","module/latest-candle-button/js/trackeractions","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/core/js/view/abstractpresentationcontroller"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/overview/js/overviewevents"),a=e("module/latest-candle-button/js/trackeractions"),l=e("module/core/js/view/visiblewindow");o.extend(t,n);var u=t.prototype;return u._visibleWindow=null,u.startListening=function(e){var t=this._getOverviewModule();this._visibleWindow=e,this._presentationModel.setYScale(e.y).setUnavailabilityReason(t.getUnavailabilityReason()),t.on(s.DATA_LOADED,this._handleDataLoaded,this),t.on(s.AVAILABILITY_CHANGED,this._handleAvailabilityChanged,this),this._presentationModel.setVisibility(t.getOverviewVisibility()),t.on(s.VISIBILITY_CHANGED,r.delegate("_presentationModel","setVisibility"),this),this._eventBus.subscribe("chart/resolution/changed",r.delegate("_presentationModel","clearOverview"),this),e.isReadyForRender()?this._handleReadyForRender():e.on(l.READY_FOR_RENDER,this._handleReadyForRender,this)},u.stopListening=function(){this._getOverviewModule().un(null,this),t.superclass.stopListening.call(this)},u._getOverviewModule=r.delegate("_moduleLoader","getModule","overview"),u._handleDataLoaded=function(e){this._visibleWindow.y.domain([e.getMaxValue(),e.getMinValue()]),e.dataPoints.length&&this._presentationModel.setModel(e)},u._handleAvailabilityChanged=function(){this._presentationModel.setUnavailabilityReason(this._getOverviewModule().getUnavailabilityReason())},u._handleReadyForRender=function(){this._handleVisibleWindowMoved(i.INITIALISED,i.INITIALISED),this._visibleWindow.on(l.MOVED,this._handleVisibleWindowMoved,this)},u._handleVisibleWindowMoved=function(e,t){e&(i.MOVED|i.ZOOMED|i.INITIALISED)&&this._updateOverviewToCurrentDateRange(),e&(i.RESIZED|i.INITIALISED)&&this._presentationModel.updateWidth(this._visibleWindow.width()),t&(i.RESIZED|i.INITIALISED)&&this._presentationModel.updateHeight()},u.updateVDR=function(e,t){var n=this._visibleWindow.visibleDateRange,i=Math.max(this._presentationModel.convertAcc(e)-n.pointAccDuration(),n.getInstrumentModel().getTimeline().startAccTime()),o=!n.allowScrollingIntoFuture()&&this._presentationModel.isAccAtOverviewEnd(t)?n.getInstrumentModel().getActiveInstrumentResolution().getLastPoint().accTime:this._presentationModel.convertAcc(t),r=o+n.marginAccDuration()+n.pointAccDuration();r&&this._subView.getChartView().moveTo(r,r-i,!0)},u.hideOverview=function(){this._getOverviewModule().hideOverview()},u.blockIncoming=function(){this._presentationModel.blockIncoming=!0},u.allowIncoming=function(){this._presentationModel.blockIncoming=!1,this._updateOverviewToCurrentDateRange()},u.resetToDefault=function(){this._visibleWindow.visibleDateRange.setToLastPoint(),this._eventBus.publish("tracker/chart",[a.latestCandle(a.latestCandle.OVERVIEW)])},u._updateOverviewToCurrentDateRange=function(){var e=this._visibleWindow.visibleDateRange,t=e.getInstrumentModel().getTimeline(),n=e.accStart()+e.pointAccDuration(),i=e.accEnd()-e.marginAccDuration()-e.pointAccDuration();this._presentationModel.setDateRange([t.asDate(n),t.asDate(i)])},Object.seal(u),Object.seal(t)})),define("module/core/js/view/renderer/abstractmappedrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._renderMap=Object.create(null)}var n=e("module/core/js/view/renderer/abstractrenderer");e("module/core/js/util/class").extend(t,n);var i=t.prototype;return i._renderMap=null,i.isMarkedForUpdate=function(e){return!1!==this._renderMap[e]},i.markForUpdate=function(e){this._renderMap[e]=!0,this.renderOnFrameEnd()},i.renderMarkedForUpdate=function(e,t){var n;!this._renderMap[e]&&e in this._renderMap||(n=t.call(this),this._renderMap[e]=void 0!==n&&!n)},i.markAllForUpdate=function(){for(var e in this._renderMap)delete this._renderMap[e];this.renderOnFrameEnd()},i.destroy=function(){t.superclass.destroy.call(this),delete this._renderMap},Object.seal(i),Object.seal(t)})),define("text!module/core/svg/loadingspinner.svg",[],(function(){
return'<svg width=\'30\' height=\'30\' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="loadingSpinner">\n\t<g>\n\t\t<path opacity="0.4" fill="#38383D" d="M50.6,28.5h-1.3c-1.9,0-3.4-1.5-3.4-3.4V7.9c0-1.9,1.5-3.4,3.4-3.4h1.3\n\t\tc1.9,0,3.4,1.5,3.4,3.4v17.3C54,27,52.5,28.5,50.6,28.5z"/>\n\t\t<path opacity="0.48" fill="#38383D" d="M39.8,31.1l-1.1,0.6c-1.6,0.9-3.7,0.4-4.6-1.2l-8.6-14.9c-0.9-1.6-0.4-3.7,1.2-4.6l1.1-0.6\n\t\tc1.6-0.9,3.7-0.4,4.6,1.2L41,26.5C42,28.1,41.4,30.2,39.8,31.1z"/>\n\t\t<path opacity="0.56" fill="#38383D" d="M31.7,38.7l-0.6,1.1c-0.9,1.6-3,2.2-4.6,1.2l-14.9-8.6c-1.6-0.9-2.2-3-1.2-4.6l0.6-1.1\n\t\tc0.9-1.6,3-2.2,4.6-1.2l14.9,8.6C32.1,35,32.7,37.1,31.7,38.7z"/>\n\t\t<path opacity="0.64" fill="#38383D" d="M28.5,49.4v1.3c0,1.9-1.5,3.4-3.4,3.4H7.9c-1.9,0-3.4-1.5-3.4-3.4v-1.3\n\t\tc0-1.9,1.5-3.4,3.4-3.4h17.3C27,46,28.5,47.5,28.5,49.4z"/>\n\t\t<path opacity="0.72" fill="#38383D" d="M31.1,60.2l0.6,1.1c0.9,1.6,0.4,3.7-1.2,4.6l-14.9,8.6c-1.6,0.9-3.7,0.4-4.6-1.2l-0.6-1.1\n\t\tc-0.9-1.6-0.4-3.7,1.2-4.6L26.5,59C28.1,58,30.2,58.6,31.1,60.2z"/>\n\t\t<path opacity="0.8" fill="#38383D" d="M38.7,68.3l1.1,0.6c1.6,0.9,2.2,3,1.2,4.6l-8.6,14.9c-0.9,1.6-3,2.2-4.6,1.2l-1.1-0.6\n\t\tc-1.6-0.9-2.2-3-1.2-4.6l8.6-14.9C35,67.9,37.1,67.3,38.7,68.3z"/>\n\t\t<path opacity="0.88" fill="#38383D" d="M49.4,71.5h1.3c1.9,0,3.4,1.5,3.4,3.4v17.3c0,1.9-1.5,3.4-3.4,3.4h-1.3\n\t\tc-1.9,0-3.4-1.5-3.4-3.4V74.8C46,73,47.5,71.5,49.4,71.5z"/>\n\t\t<path opacity="0.92" fill="#38383D" d="M60.2,68.9l1.1-0.6c1.6-0.9,3.7-0.4,4.6,1.2l8.6,14.9c0.9,1.6,0.4,3.7-1.2,4.6l-1.1,0.6\n\t\tc-1.6,0.9-3.7,0.4-4.6-1.2L59,73.5C58,71.9,58.6,69.8,60.2,68.9z"/>\n\t\t<path opacity="8.000000e-02" fill="#38383D" d="M68.3,61.3l0.6-1.1c0.9-1.6,3-2.2,4.6-1.2l14.9,8.6c1.6,0.9,2.2,3,1.2,4.6l-0.6,1.1\n\t\tc-0.9,1.6-3,2.2-4.6,1.2l-14.9-8.6C67.9,65,67.3,62.9,68.3,61.3z"/>\n\t\t<path opacity="0.16" fill="#38383D" d="M71.5,50.6v-1.3c0-1.9,1.5-3.4,3.4-3.4h17.3c1.9,0,3.4,1.5,3.4,3.4v1.3\n\t\tc0,1.9-1.5,3.4-3.4,3.4H74.8C73,54,71.5,52.5,71.5,50.6z"/>\n\t\t<path opacity="0.24" fill="#38383D" d="M68.9,39.8l-0.6-1.1c-0.9-1.6-0.4-3.7,1.2-4.6l14.9-8.6c1.6-0.9,3.7-0.4,4.6,1.2l0.6,1.1\n\t\tc0.9,1.6,0.4,3.7-1.2,4.6L73.5,41C71.9,42,69.8,41.4,68.9,39.8z"/>\n\t\t<path opacity="0.32" fill="#38383D" d="M61.3,31.7l-1.1-0.6c-1.6-0.9-2.2-3-1.2-4.6l8.6-14.9c0.9-1.6,3-2.2,4.6-1.2l1.1,0.6\n\t\tc1.6,0.9,2.2,3,1.2,4.6l-8.6,14.9C65,32.1,62.9,32.7,61.3,31.7z"/>\n\t</g>\n</svg>'})),define("module/core/js/view/component/loadingspinner",["require","module/core/js/util/functional","text!module/core/svg/loadingspinner.svg"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("text!module/core/svg/loadingspinner.svg");t.create=function(){return new t};var o=t.prototype;return o._dSpinner=null,o.destroy=n.delegate("_dSpinner","remove"),o.initDom=function(e){var t=document.createElement("div");return t.innerHTML=i,this._dSpinner=e.appendElement(t.querySelector(".loadingSpinner")),this},o.classed=n.delegate("_dSpinner","classed"),o.attr=n.delegate("_dSpinner","attr"),o.show=function(){this._dSpinner.style("display",null)},o.hide=function(){this._dSpinner.style("display","none")},Object.seal(o),Object.seal(t)})),define("text!module/overview/svg/handle.svg",[],(function(){return'<svg width="12px" height="16px" viewBox="0 0 12 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path class="svgIcon" d="M0,12 L0,2.0085302 L0,2.0085302 C0,0.899249601 0.894513756,1.77635684e-15 1.99406028,1.77635684e-15 L14.0059397,1.77635684e-15 C15.1072288,1.77635684e-15 16,0.901950359 16,2.0085302 L16,12" id="path-1"></path>\n        <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="16" height="12" fill="white">\n            <use xlink:href="#path-1"></use>\n        </mask>\n        <path class="svgIcon" d="M0,12 L0,2.0085302 L0,2.0085302 C0,0.899249601 0.894513756,0 1.99406028,0 L14.0059397,0 C15.1072288,0 16,0.901950359 16,2.0085302 L16,12" id="path-2"></path>\n        <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="16" height="12" fill="white">\n            <use xlink:href="#path-2"></use>\n        </mask>\n    </defs>\n    <g class="leftPath" id="Specs" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Handles-icons" transform="translate(-8.000000, -28.000000)">\n            <g id="handle-left" transform="translate(14.000000, 36.000000) rotate(-90.000000) translate(-14.000000, -36.000000) translate(6.000000, 30.000000)">\n                <use class="background" id="Rectangle-352" mask="url(#mask-2)" stroke-width="2" fill-opacity="0.9"  xlink:href="#path-1"></use>\n                <polygon class="arrow" id="Triangle-1" points="8 4 12 8 4 8"></polygon>\n            </g>\n        </g>\n    </g>\n    <g class="rightPath" id="Specs" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Handles-icons" transform="translate(-50.000000, -28.000000)">\n            <g id="handle-right" transform="translate(56.000000, 36.000000) rotate(90.000000) translate(-56.000000, -36.000000) translate(48.000000, 30.000000)">\n                <use class="background" id="Rectangle-352" mask="url(#mask-2)" stroke-width="2" fill-opacity="0.9" xlink:href="#path-2"></use>\n                <polygon class="arrow" id="Triangle-1" points="8 4 12 8 4 8"></polygon>\n            </g>\n        </g>\n    </g>\n</svg>'})),define("module/overview/js/view/component/overviewhandle",["require","module/core/js/view/userinput/abstractcapturezone","module/core/js/util/class","module/core/js/util/css","module/core/js/view/userinput/directionalpangesturerecogniser","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","text!module/overview/svg/handle.svg","module/core/js/event/subscribable","module/core/js/util/svg","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n,i,o){this._isLeft=n,this._className=i,this._selectedClassName=o||"selected",this._iconSvg=l,this._dContainer=e,this._captureZone=t.create(s.BLOCK_ALL,d.OVERVIEW_HANDLE).hide()}var n=e("module/core/js/view/userinput/abstractcapturezone"),i=e("module/core/js/util/class"),o=e("module/core/js/util/css"),r=e("module/core/js/view/userinput/directionalpangesturerecogniser"),s=e("module/core/js/view/userinput/eventpropagation"),a=e("module/core/js/util/functional"),l=e("text!module/overview/svg/handle.svg"),u=e("module/core/js/event/subscribable"),c=e("module/core/js/util/svg"),d=e("module/core/js/enum/zindexenum");i.extend(t,u),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)},t.HANDLE_CHANGED="HANDLE_CHANGED",t.HANDLE_MOVE_START="HANDLE_MOVE_START",t.HANDLE_MOVE_END="HANDLE_MOVE_END",t.HANDLES_X_OFFSET=7.8;var h=t.prototype;return h._captureZone=null,h._dContainer=null,h._dHandle=null,h._iconSvg=null,h._selectedClassName=null,h._className=null,h._dOverviewHandle=null,h._position=0,h.getPosition=a.getter("_position"),h.getExtremePosition=function(){return this._position+15*(this._isLeft?-1:1)},h._isLeft=null,h.getIsLeft=a.getter("_isLeft"),h._isHandleMovementEngaged=!0,h.setHandleMovementEngaged=a.setter("_isHandleMovementEngaged"),h.initDom=function(){this._dOverviewHandle=this._dContainer.append("g").classed(this._className,!0).classed("left",this._isLeft).classed("right",!this._isLeft),this._dHandle=this._dOverviewHandle.svgFromString(this._iconSvg),this._dHandle.attr({width:15,height:32}),this._captureZone.addGesture(r,{handleHold:!0,plane:r.PLANES.HORIZONTAL,onGesture:this._handleDragMove,context:this,onStart:this._handleDragStart,startContext:this,onEnd:this._handleDragEnd,endContext:this}),this._captureZone.show(),this._captureZone.withCursorOnHover(o.CURSOR_TYPE.EW_RESIZE,this._dContainer),this.addHoverGesture(),this._setDrawAttr(),this._updateCaptureZone()},h.addHoverGesture=function(){this._captureZone.addGesture(n.GESTURES.HOVER,{onEnd:this.setNormalState.bind(this),onGesture:this.setHoverState.bind(this)})},h.setHeight=function(e){this._dHandle&&this._dHandle.attr("height",e),this._updateCaptureZone()},h.setXPosition=function(e){this._position=e,this._setDrawAttr(),this._updateCaptureZone()},h._updateCaptureZone=function(){this._captureZone.setDimensionsBasedOnElement(this._dOverviewHandle)},h._handleDragStart=function(e){this.fire(t.HANDLE_MOVE_START,{recogniser:e,handle:this})},h._handleDragMove=function(e){this._isHandleMovementEngaged&&(this._position=e.x-this.getHandleOffset()||0),this.setHoverState(),this._setDrawAttr(),this._updateCaptureZone(),this.fire(t.HANDLE_CHANGED,{recogniser:e,handle:this})},h._handleDragEnd=function(e){this.setNormalState(),this.fire(t.HANDLE_MOVE_END,{recogniser:e,handle:this})},h.flipBack=function(e){this._position=e.x+this.getHandleOffset()||0},h.getHandleOffset=function(){return t.HANDLES_X_OFFSET*(this._isLeft?-1:1)},h._setDrawAttr=function(){this._dOverviewHandle.attr("transform",c.svgTranslateAttrX(this._position-7.5+this.getHandleOffset()))},h.setVisibility=function(e){this._dOverviewHandle.classed("hidden",!e),e?(this._captureZone.show(),this._updateCaptureZone()):this._captureZone.hide()},h.updateHandleState=function(e){this._isLeft!=e&&(this._isLeft=e,this.setNormalState(),this._isHandleMovementEngaged=!1)},h.setNormalState=function(){this._dOverviewHandle.classed(this._selectedClassName,!1).classed("left",this._isLeft).classed("right",!this._isLeft)},h.setHoverState=function(){this._dOverviewHandle.classed(this._selectedClassName,!0)},h.destroy=function(){this._captureZone&&this._captureZone.destroy(),this._dOverviewHandle&&(this._dOverviewHandle.remove(),delete this._dOverviewHandle)},Object.seal(h),Object.seal(t)})),define("module/core/js/view/renderer/helper/abstractrendererhelper",["require","module/core/js/util/animation/animationpoller","module/core/js/util/oop"],(function(e){"use strict";function t(e,t){this._dContainer=e,this._animationPoller=t,this._animationPoller.on(n.TRIGGER_RENDER,this._handleRenderTrigger,this)}var n=e("module/core/js/util/animation/animationpoller"),i=e("module/core/js/util/oop"),o=t.prototype;return o._dContainer=null,o._animationPoller=null,o._renderOnFrameEnd=!1,o.render=i.abstractMethod,o.renderOnFrameEnd=function(){this._renderOnFrameEnd=!0,this._animationPoller.requestNextStep()},o.destroy=function(){this._animationPoller.un(null,this)},o._handleRenderTrigger=function(){this._renderOnFrameEnd&&(this.render(),this._renderOnFrameEnd=!1)},Object.seal(o),Object.seal(t)})),define("module/core/js/view/renderer/xticksrendererhelper",["require","module/core/js/ext/d3","moment","module/core/js/util/array","module/core/js/util/functional","module/core/js/i18n","module/core/js/util/svg"],(function(e){"use strict";function t(e){return"tick "+e.type}function n(e){var t=e.getBBox().width+2*d,n=-.5*t;return o.select(document.createElementNS("http://www.w3.org/2000/svg","rect")).classed("background",!0).attr("x",n).attr("y",h).attr("width",t).attr("height",this._backgroundHeight).node()}function i(e,t,n){this._tickType=n,this._userTimeZone=e,this._dContainer=t.append("svg:g").classed(n,!0)}var o=e("module/core/js/ext/d3"),r=e("moment"),s=e("module/core/js/util/array"),a=e("module/core/js/util/functional"),l=e("module/core/js/i18n"),u=e("module/core/js/util/svg"),c={y1:0,class:"line"},d=6,h=1;i.isTickHidden=function(e){return!(!e.isColliding&&!e.isEdge)};var p=i.prototype;return p._showLabels=!0,p.withShowLabels=a.setter("_showLabels"),p._showTicks=!0,p.withShowTicks=a.setter("_showTicks"),p._renderFormattedDate=null,p._dContainer=null,p._dTicks=null,p._transformFunction=null,p._backgrounds=!1,p._backgroundHeight=0,p._textAttributes=null,p.withBackgrounds=a.setter("_backgrounds"),p.withBackgroundHeight=a.setter("_backgroundHeight"),p.withTextAttributes=a.setter("_textAttributes"),p.withTransformFunction=function(e,t){return this._transformFunction=function(n){return u.svgTranslateAttrX(e(t(n.accTime)))},this},p.renderTicks=function(e,n){var i;this._dTicks=this._dContainer.selectAll(".tick").data(e,this._tickJoinFunction.bind(this)),i=this._dTicks.enter().append("svg:g").attr("transform",this._transformFunction).attr("class",t),this._showLabels&&i.append("text").attr(this._textAttributes).text(this._renderDate.bind(this)),this._showTicks&&i.append("svg:line").attr(c).attr("y2",-n),this._dTicks.exit().remove(),this._showLabels&&this._backgrounds&&this._renderBackgrounds(i)},p.replotHorizontally=function(){this._dTicks&&this._dTicks.attr("transform",this._transformFunction)},p.replotVertically=function(e){this._dContainer.selectAll(".tick .line").attr("y2",-e)},p.hideMarkedTicks=function(){this._dTicks.classed("hidden",i.isTickHidden)},p.estimateTickLabelWidth=function(){var e=s.flatten(this._dTicks);return 0!==e.length&&this._showLabels?o.max(e,this._getTickLabelWidth)+2*d:0},p._getTickLabelWidth=function(e){return e.querySelector("text").getBBox().width},p.updateBackgrounds=function(){if(this._dTicks&&this._showLabels){var e,t,n=this._dTicks.toArray();n.forEach((function(n){e=n.select("text").node().getBBox().width+2*d,t=-.5*e,n.select(".background").attr("width",e).attr("x",t)}))}},p._renderBackgrounds=function(e){var t,i=s.flatten(e.selectAll("text")),o=i.map(n,this);for(t=0;t<o.length;t++)i[t].parentNode.insertBefore(o[t],i[t])},p._renderDate=function(e){var t="open"===e.type?"OPEN":e.unit,n=l.get(e.tickType+"-tick-date-format-"+t);return r(e.date).tz(this._userTimeZone).format(n)},p._tickJoinFunction=function(e){return e.accTime+"-"+e.type+"-"+e.unit},Object.seal(p),Object.seal(i)})),define("module/overview/js/view/renderer/overviewxaxishelper",["require","module/core/js/view/renderer/helper/abstractrendererhelper","module/core/js/util/class","module/core/js/util/functional","module/overview/js/view/model/overviewpresentationmodel","module/overview/js/enum/overviewpresentationstates","module/core/js/util/svg","module/core/js/view/renderer/xticksrendererhelper"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n),this._presentationModel=i,this._dContainer=e.append("g").classed("xAxis",!0)}var n=e("module/core/js/view/renderer/helper/abstractrendererhelper"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/overview/js/view/model/overviewpresentationmodel"),s=e("module/overview/js/enum/overviewpresentationstates"),a=e("module/core/js/util/svg"),l=e("module/core/js/view/renderer/xticksrendererhelper");i.extend(t,n),t.create=function(e,n,i){return new t(e,n,i)};var u=t.prototype;return u._dBorderEnd=null,u._dBorderStart=null,u._dXTicks=null,u._isDrawn=!1,u._ticksRendererHelper=null,u.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(r.OVERVIEW_CREATE,this.renderOnFrameEnd,this),this._presentationModel.on(r.UPDATED,this._handleOverviewUpdated,this),this._presentationModel.on(r.OVERVIEW_REMOVE,this.renderOnFrameEnd,this)},u.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this)},u.render=function(){if(this._presentationModel.isReady()&&!this._isDrawn)this._createDom();else if(!this._presentationModel.isReady())return void(this._isDrawn&&this._destroyDom());var e=this._presentationModel.getXTicks(),t=this._presentationModel.getYScale().range(),n=t[1]-t[0];this._ticksRendererHelper.renderTicks(e,n),this._ticksRendererHelper.replotVertically(n),this._dXTicks.attr("transform",a.svgTranslateAttrXY(this._presentationModel.marginLeft,t[1])),this._dBorderEnd.attr({transform:a.svgTranslateAttrX(this._presentationModel.width),y1:0,y2:-n}),this._dBorderStart.attr({y1:0,y2:e[0]&&0===e[0].accTime?0:-n})},u.destroy=function(){return this._isDrawn&&this._destroyDom(),t.superclass.destroy.apply(this,arguments)},u._createDom=function(){this._dXTicks=this._dContainer.append("g").classed("xTicks",!0),this._ticksRendererHelper=new l(this._presentationModel.getUserTimeZone(),this._dXTicks,"overview").withTextAttributes({transform:a.svgTranslateAttrXY(3,-5)}).withTransformFunction(o.identity,o.identity),this._dBorderEnd=this._dXTicks.append("line").classed("line",!0),this._dBorderStart=this._dXTicks.append("line").classed("line",!0),this._isDrawn=!0},u._destroyDom=function(){this._dXTicks&&(this._dXTicks.remove(),delete this._dXTicks,delete this._dBorderEnd,delete this._dBorderStart,delete this._ticksRendererHelper),this._isDrawn=!1},u._handleOverviewUpdated=function(e){e!==s.DATA_POINTS&&e!==s.AVAILABLE_DATE_RANGE&&e!==s.SCREEN_DIMENSIONS||this.renderOnFrameEnd()},Object.seal(u),Object.seal(t)})),define("module/core/js/view/component/scroll",["require","lodash","module/core/js/ext/d3","module/core/js/view/renderer/abstractrenderer","module/core/js/view/userinput/directionalpangesturerecogniser","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/util/math","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,r){if(e&&!n.isPlainObject(e))throw new Error("Lacking valid options on instantiation of the scroll component");o.prototype.withAnimationPoller.call(this,r),this._captureZoneManager=t,this._valueToPosition=i.scale.linear().clamp(!1),this._options=n.assign({callback:n.noop,callbackStart:n.noop,callbackEnd:n.noop,inverted:!1,vertical:!1},e)}var n=e("lodash"),i=e("module/core/js/ext/d3"),o=e("module/core/js/view/renderer/abstractrenderer"),r=e("module/core/js/view/userinput/directionalpangesturerecogniser"),s=e("module/core/js/view/userinput/eventpropagation"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/math"),u=e("module/core/js/view/userinput/tapgesturerecogniser"),c=e("module/core/js/enum/zindexenum");t.create=function(e,n,i){return new t(e,n,i)};var d=t.prototype;return d._animationPoller=null,d._captureZone=null,d._captureZoneThumb=null,d._captureZoneManager=null,d._dBackground=null,d._dContainer=null,d._dThumb=null,d._width=null,d._height=null,d._options=null,d._value=null,d._valueMax=null,d._valueMin=null,d._valuePanStart=null,d._valueToPosition=null,d._visibility=!0,d.setVisibility=function(e){return this._visibility=e,this._dContainer&&this._dContainer.classed("hidden",!this._visibility),this._captureZone&&(this._captureZone[e?"show":"hide"](),this._captureZoneThumb[e?"show":"hide"](),this.updateCaptureZones()),this},d.setWidth=function(e){return this._width=e,this._options.vertical||this._updateScale(),this.renderOnFrameEnd(),this},d.setHeight=function(e){return this._height=e,this._options.vertical&&this._updateScale(),this.renderOnFrameEnd(),this},d._updateScale=function(){var e,t=this._options.vertical,n=this._options.inverted;e=t&&n?[this._height,0]:t?[0,this._height]:n?[this._width,0]:[0,this._width],this._valueToPosition.range(e)},d.setDomain=function(e,t){return this._valueToPosition.domain([e,t]),this},d.setMinMax=function(e,t){return this._valueMin=e,this._valueMax=t,this},d.getValue=a.getter("_value"),d.setValue=function(e){return this._value=e,this._validateValue(),this._handleValueChanged(),this.renderOnFrameEnd(),this},d._validateValue=function(){l.isNumber(this._value)&&(l.isNumber(this._valueMin)&&(this._value=Math.max(this._valueMin,this._value)),l.isNumber(this._valueMax)&&(this._value=Math.min(this._valueMax,this._value)))},d._handleValueChanged=function(){this._options.callback(this._value)},d.initDom=function(e){return this._dContainer=e.append("g").classed("scroll",!0),this._createElements(e),this._createCaptureZones(),this.setVisibility(this._visibility),this},d._createElements=function(e){this._dBackground=this._dContainer.append("rect").classed("background",!0),this._dThumb=this._dContainer.append("rect").classed("track",!0)},d._createCaptureZones=function(e){e=e||s.BLOCK_ALL,this._captureZone=this._captureZoneManager.create(e,c.SCROLL_TRACK),this._captureZoneThumb=this._captureZoneManager.create(e,c.SCROLL_THUMB),this._captureZone.addGesture(u,1,!0).withHandler(this._handleTap,this),this._captureZoneThumb.addGesture(r,{handleHold:!0,plane:this._options.vertical?r.PLANES.VERTICAL:r.PLANES.HORIZONTAL,onGesture:this._handlePan,context:this,onStart:this._handlePanStart,startContext:this,onEnd:this._handlePanEnd,endContext:this})},d.render=function(){l.isNumber(this._value)&&(this._renderElements(),this.updateCaptureZones())},d.renderOnFrameEnd=function(){this._dContainer&&o.prototype.renderOnFrameEnd.call(this)},d._renderElements=function(){this._dBackground.attr({width:this._width,height:this._height})},d.updateCaptureZones=function(){this._visibility&&(this._captureZone.setDimensionsBasedOnElement(this._dContainer),this._captureZoneThumb.setDimensionsBasedOnElement(this._dThumb))},d._handlePan=function(e){this.setValue(this._valueToPosition.invert(this._valuePanStart+(this._options.vertical?e.deltaY:e.deltaX)))},d._handlePanStart=function(){this._valuePanStart=this._valueToPosition(this.getValue()),this._options.callbackStart()},d._handlePanEnd=function(){this._valuePanStart=null,this._options.callbackEnd()},d._handleTap=function(e){this.setValue(this._valueToPosition.invert(this._options.vertical?e.y-this._captureZone.y:e.x-this._captureZone.x))},d._handleRenderTrigger=o.prototype._handleRenderTrigger,d.destroy=function(){this._animationPoller&&(this._animationPoller.un(null,this),delete this._animationPoller),this._dContainer&&(this._dContainer.remove(),delete this._dContainer),this._captureZone&&(this._captureZone.destroy(),delete this._captureZone),this._captureZoneThumb&&(this._captureZoneThumb.destroy(),delete this._captureZone)},Object.seal(d),Object.seal(t)})),define("module/core/js/view/component/rangescroll",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/math","module/core/js/view/component/scroll"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/math"),r=e("module/core/js/view/component/scroll");n.extend(t,r),t.create=function(e,n,i){return new t(e,n,i)};var s=t.prototype;return s._start=null,s._end=null,s._maxRange=1/0,s.getStart=i.getter("_start"),s.getEnd=i.getter("_end"),s.withMaxRange=function(e){return this._maxRange=e>0?e:1/0,this},s.setValue=function(e){var t=(this._end-this._start)/2;return this.setRange(e-t,e+t)},s.setRange=function(e,n){var i;return i=o.isNumber(this._valueMin)&&o.isNumber(this._valueMax)?Math.min(this._valueMax-this._valueMin,this._maxRange):this._maxRange,n-e>i&&(e!==this._start?n=e+i:e=n-i),this._start=e,this._end=n,t.superclass.setValue.call(this,(this._start+this._end)/2)},s._validateValue=function(){var e=0;o.isNumber(this._valueMin)&&this._start<this._valueMin?e=this._start-this._valueMin:o.isNumber(this._valueMax)&&this._end>this._valueMax&&(e=this._end-this._valueMax),e&&(this._value-=e,this._start-=e,this._end-=e)},s._handleValueChanged=function(){this._options.callback(this._start,this._end)},Object.seal(s),Object.seal(t)})),define("module/overview/js/view/component/overviewscroll",["require","lodash","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/view/userinput/holdgesturerecogniser","module/core/js/view/userinput/hovergesturerecogniser","module/overview/js/view/component/overviewhandle","module/overview/js/view/model/overviewpresentationmodel","module/overview/js/view/renderer/overviewxaxishelper","module/core/js/view/component/rangescroll","module/core/js/view/userinput/tapgesturerecogniser"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i),this._presentationModel=o,this._options=r.assign({callbackDoubleTap:r.noop,hoverMode:!1},this._options,{inverted:!1,vertical:!1})}function n(e,t){return!e.getIsLeft()&&t>=e.getPosition()+e.getHandleOffset()||e.getIsLeft()&&t<=e.getPosition()+e.getHandleOffset()}function i(e,t){return e.getIsLeft()&&t>=e.getPosition()-e.getHandleOffset()||!e.getIsLeft()&&t<=e.getPosition()-e.getHandleOffset()}function o(e){var t=e.x+e.rawDeltaX,n=e.y+e.rawDeltaY;this._options.hoverMode&&!this._captureZone.pointInCaptureZone(t,n)&&this._setHandleVisibility(!1)}var r=e("lodash"),s=e("module/core/js/util/class"),a=e("module/core/js/view/userinput/eventpropagation"),l=e("module/core/js/view/userinput/holdgesturerecogniser"),u=e("module/core/js/view/userinput/hovergesturerecogniser"),c=e("module/overview/js/view/component/overviewhandle"),d=e("module/overview/js/view/model/overviewpresentationmodel"),h=e("module/overview/js/view/renderer/overviewxaxishelper"),p=e("module/core/js/view/component/rangescroll"),m=e("module/core/js/view/userinput/tapgesturerecogniser");s.extend(t,p),t.create=function(e,n,i,o){return new t(e,n,i,o)};var f=t.prototype;return f._allowChangeCallback=!1,f._dShadeLeft=null,f._dShadeRight=null,f._handleOne=null,f._handleTwo=null,f._marginLeft=0,f._marginRight=0,f._xAxisHelper=null,f.setHeight=function(e){return t.superclass.setHeight.call(this,e),this._handleOne&&this._handleOne.setHeight(e),this._handleTwo&&this._handleTwo.setHeight(e),this},f.setMargins=function(e,t){return this._marginLeft=e,this._marginRight=t,this._updateScale(),this},f._updateScale=function(){this._valueToPosition.range([this._marginLeft,this._width+this._marginLeft])},f.setVisibility=function(e){return this._setHandleVisibility(!this._options.hoverMode&&e),t.superclass.setVisibility.call(this,e)},f._createElements=function(e){t.superclass._createElements.call(this),this._dShadeLeft=this._dContainer.append("rect").classed("scrollRect",!0).classed("left",!0),this._dShadeRight=this._dContainer.append("rect").classed("scrollRect",!0).classed("right",!0),this._xAxisHelper=h.create(e,this._animationPoller,this._presentationModel),this._handleOne=this._initHandle(e,!0),this._handleTwo=this._initHandle(e,!1)},f._initHandle=function(e,t){var n=c.create(e,this._captureZoneManager,t,"overviewHandle");return n.initDom(),n.on(c.HANDLE_CHANGED,this._onHandleChanged,this),n.on(c.HANDLE_MOVE_START,this._onHandleMovementStarted,this),n.on(c.HANDLE_MOVE_END,this._onHandleMovementEnded,this),n},f._createCaptureZones=function(){t.superclass._createCaptureZones.call(this,a.PROPAGATE_UNHANDLED),this._captureZone.addGesture(l),this._captureZone.addGesture(m,2,!0).withHandler(this._options.callbackDoubleTap,this),this._options.hoverMode&&this._captureZone.addGesture(u,{onStart:this._setHandleVisibility.bind(this,!0),onEnd:this._setHandleVisibility.bind(this,!1)})},f._getHandlesInOrder=function(){var e=this._handleOne,t=this._handleTwo,n=e.getPosition()<=t.getPosition();return{left:n?e:t,right:n?t:e}},f._setHandleVisibility=function(e){this._handleOne&&this._handleOne.setVisibility(e),this._handleTwo&&this._handleTwo.setVisibility(e)},f._renderElements=function(){var e=this._getHandlesInOrder(),n=this._valueToPosition(this._start),i=this._valueToPosition(this._end),o=i-n;t.superclass._renderElements.call(this),this._dBackground.attr("x",this._marginLeft),this._xAxisHelper.render(),this._dThumb.attr({x:n,width:o,height:this._height}),this._dShadeLeft.attr({x:-1,width:Math.max(n+1,0),height:this._height}),this._dShadeRight.attr({x:i,width:Math.max(this._width+this._marginLeft+this._marginRight-i,0),height:this._height}),e.left.setXPosition(this._valueToPosition(this._start)),e.right.setXPosition(this._valueToPosition(this._end)),this._notifyHandlesPosition()},f._notifyHandlesPosition=function(){var e=this._getHandlesInOrder();this._presentationModel.fire(d.HANDLE_POSITION_CHANGED,e.left.getExtremePosition(),e.right.getExtremePosition())},f._handleValueChanged=function(){this._allowChangeCallback&&t.superclass._handleValueChanged.call(this)},f._handlePanStart=function(){this._allowChangeCallback=!0,t.superclass._handlePanStart.call(this)},f._handlePanEnd=function(e){t.superclass._handlePanEnd.call(this),o.call(this,e),this._allowChangeCallback=!1},f._handleTap=function(e){this._allowChangeCallback=!0,t.superclass._handleTap.call(this,e),this._allowChangeCallback=!1},f._onHandleChanged=function(e){n(e.handle,e.recogniser.x)&&e.handle.setHandleMovementEngaged(!0),i(e.handle,e.recogniser.x)&&e.handle.flipBack(e.recogniser);var t=this._getHandlesInOrder();t.left.updateHandleState(!0),t.right.updateHandleState(!1),this.setRange(this._valueToPosition.invert(t.left.getPosition()),this._valueToPosition.invert(t.right.getPosition()))},f._onHandleMovementStarted=function(){this._allowChangeCallback=!0,this._options.callbackStart()},f._onHandleMovementEnded=function(e){o.call(this,e.recogniser),this._allowChangeCallback=!1,this._options.callbackEnd()},f.destroy=function(){this._xAxisHelper&&(this._handleOne.destroy(),this._handleTwo.destroy(),this._xAxisHelper.destroy(),delete this._handleOne,delete this._handleTwo,delete this._xAxisHelper),t.superclass.destroy.call(this)},Object.seal(f),Object.seal(t)})),define("module/overview/js/view/renderer/overviewrenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractmappedrenderer","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/component/loadingspinner","module/overview/js/view/component/overviewscroll","module/overview/js/view/model/overviewpresentationmodel","module/overview/js/enum/overviewpresentationstates","module/core/js/view/subview"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractmappedrenderer"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/core/js/view/component/loadingspinner"),a=e("module/overview/js/view/component/overviewscroll"),l=e("module/overview/js/view/model/overviewpresentationmodel"),u=e("module/overview/js/enum/overviewpresentationstates"),c=e("module/core/js/view/subview"),d=n.svg.line().x((function(e){return e.x.toFixed(3)})).y((function(e){return e.y.toFixed(3)})).interpolate("linear");o.extend(t,i);var h=t.prototype;return h._dScrollContainer=null,h._hoverMode=!1,h._overviewFill=null,h._overviewLine=null,h._scroll=null,h._spinner=null,h.withHoverMode=r.setter("_hoverMode"),h.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(l.UPDATED,this.markForUpdate,this),this._presentationModel.on(l.OVERVIEW_CREATE,this._createDom,this),this._presentationModel.on(l.OVERVIEW_REMOVE,this._clearDom,this),this._subView.on(c.DIMENSIONS_CHANGED,this._handleDimensionsChanged,this)},h.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._subView.un(null,this)},h.initDom=function(){return this._overviewFill=this.dContainer.append("path").classed("overviewFill",!0),this._overviewLine=this.dContainer.append("path").classed("overviewPath",!0),this._createDom(),this},h.render=function(){this._presentationModel.isVisible()&&(this.renderMarkedForUpdate(u.SCREEN_DIMENSIONS,this._setScrollDimensions),this.renderMarkedForUpdate(u.DATA_POINTS,this._renderLine),this.renderMarkedForUpdate(u.AVAILABLE_DATE_RANGE,this._setAvailableAccRange),this.renderMarkedForUpdate(u.VISIBLE_DATE_RANGE,this._setVisibleAccRange)),this._spinner&&this._updateSpinner()},h._handleDimensionsChanged=function(){this._presentationModel.isVisible()&&this._scroll&&(this._spinner.attr({width:this._subView.dimensions.width,height:this._subView.dimensions.height}),this._scroll.updateCaptureZones())},h._updateSpinner=function(){this._presentationModel.isVisible()&&this._presentationModel.isAvailable()&&!this._presentationModel.isInitialDataLoaded()?this._spinner.show():this._spinner.hide()},h._initScroll=function(){this._scroll||(this._dScrollContainer=this.dContainer.append("g").classed("overviewContainer",!0),this._scroll=a.create({closeIcon:this._presentationModel.showCloseIcon,hoverMode:this._hoverMode,callback:r.delegate("_presentationController","updateVDR").bind(this),
callbackStart:r.delegate("_presentationController","blockIncoming").bind(this),callbackEnd:r.delegate("_presentationController","allowIncoming").bind(this),callbackDoubleTap:r.delegate("_presentationController","resetToDefault").bind(this),callbackClose:r.delegate("_presentationController","hideOverview").bind(this)},this._captureZoneManager,this._animationPoller,this._presentationModel).initDom(this._dScrollContainer).setVisibility(!1))},h._initSpinner=function(){this._spinner||(this._spinner=s.create(),this._spinner.initDom(this.dContainer),this._updateSpinner())},h._renderLine=function(){var e=this._presentationModel.getLinePoints(),t=d(e);if(e&&e.length)return this._overviewFill.attr("d",t),this._overviewLine.attr("d",t.replace(/L[\d.]+,[\d.]+L[\d.]+,[\d.]+$/,"")),this._scroll.setVisibility(!0),!0},h._setScrollDimensions=function(){this._scroll&&(this._scroll.setWidth(this._presentationModel.width).setHeight(this._presentationModel.height).setMargins(this._presentationModel.marginLeft,this._presentationModel.marginRight).renderOnFrameEnd(),this._renderLine())},h._setAvailableAccRange=function(){var e=this._presentationModel.availableAccRange;return!!e&&(this._scroll.setDomain(e[0],e[1]),this._visibleWindow.visibleDateRange.allowScrollingIntoFuture()?this._scroll.setMinMax(e[0],null):this._scroll.setMinMax(e[0],e[1]),this._scroll.withMaxRange(this._presentationModel.maxAccRange),!0)},h._setVisibleAccRange=function(){var e=this._presentationModel.visibleAccRange;return!(!e||!this._scroll)&&(this._scroll.setRange(e[0],e[1]),!0)},h.destroy=function(){this._scroll&&(this._scroll.destroy(),delete this._scroll),this._overviewLine&&(this._overviewFill.remove(),this._overviewLine.remove(),delete this._overviewFill,delete this._overviewLine),t.superclass.destroy.call(this)},h._clearDom=function(){this._overviewFill.attr("d",""),this._overviewLine.attr("d",""),this._scroll&&(this._scroll.destroy(),this._dScrollContainer.remove(),delete this._scroll),this._spinner&&(this._spinner.destroy(),delete this._spinner)},h._createDom=function(){this._initScroll(),this._initSpinner(),this.markAllForUpdate()},Object.seal(h),Object.seal(t)})),define("module/overview/js/view/renderer/overviewunavailablerenderer",["require","module/core/js/view/renderer/abstracttextrenderer","module/core/js/util/class","module/core/js/view/studyviewconstants","module/overview/js/view/model/overviewpresentationmodel","module/core/js/view/subview"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._horizontalPadding=a,this._verticalPadding=l}var n=e("module/core/js/view/renderer/abstracttextrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/view/studyviewconstants"),r=e("module/overview/js/view/model/overviewpresentationmodel"),s=e("module/core/js/view/subview"),a=4,l=4;i.extend(t,n);var u=t.prototype;return u.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.apply(this,arguments),this._subView.on(s.DIMENSIONS_CHANGED,this._handleSubViewDimensionsChanged,this),this._presentationModel.on(r.UPDATED,this._showText,this),this._presentationModel.on(r.OVERVIEW_CREATE,this._showText,this),this._presentationModel.on(r.OVERVIEW_REMOVE,this._showText,this)},u.stopRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.apply(this,arguments),this._subView.un(null,this),this._presentationModel.un(null,this)},u._showText=function(){this._buildTitle(),this._updateBoundingBox()},u._buildTitle=function(){this._dText.selectAll(".setting").remove(),this._presentationModel.isAvailable()||this._dText.append("svg:tspan").classed("setting",!0).classed("unavailable",!0).attr("dx",a).text(this._presentationModel.getUnavailabilityLabel())},u._handleSubViewDimensionsChanged=function(e){var t=o.MIN_LABEL_HEIGHT,n=t<=e.height;n&&!this._visible?this.show():!n&&this._visible&&this.hide()},Object.seal(u),Object.seal(t)})),define("module/overview/js/view/overviewview",["require","module/core/js/util/class","module/core/js/util/object","module/core/js/view/subview"],(function(e){"use strict";function t(){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/object"),o=e("module/core/js/view/subview");n.extend(t,o);var r=t.prototype;return r._visible=!1,r.positions=i.recursiveFreeze([{name:"main",clipPathNeeded:!1}]),r.initDom=function(){return t.superclass.initDom.apply(this,arguments),this},r.destroyDom=function(){return t.superclass.destroyDom.apply(this,arguments),this},r.bottomMargin=function(){return this._visible?this._getHeight()+this._properties.xAxisHeight:0},r.toggle=function(e){this._visible=e,this._eventBus.publish("overview/size/changed",[this._getHeight()])},r.updateDimensions=function(e,n,i,o){var r=this._getHeight();e.y=o-r,e.height=r,t.superclass.updateDimensions.apply(this,arguments),this._eventBus.publish("overview/size/changed",[r])},r._getHeight=function(){return this._visible?this._properties.height:0},Object.seal(r),Object.seal(t)})),define("module/overview/js/config/subviewsconfig",["require","module/overview/js/view/renderer/overviewcloseiconrenderer","module/overview/js/view/model/overviewpresentationcontroller","module/overview/js/view/model/overviewpresentationmodel","module/overview/js/view/renderer/overviewrenderer","module/overview/js/view/renderer/overviewunavailablerenderer","module/overview/js/view/overviewview","module/core/js/view/xaxisview"],(function(e){"use strict";function t(e){var t={overview:{type:a,relativeWeighting:900,isPersistent:!0,properties:{xAxisHeight:l.X_AXIS_HEIGHT},presentationControllers:{overviewPresentationController:{type:i,presentationModel:{type:o}}},renderers:{overviewRenderer:{type:r,position:"main",group:"overview",presentationController:"overviewPresentationController",properties:{hoverMode:e.hoverMode}},overviewUnavailableRenderer:{type:s,position:"main",group:"overview",presentationController:"overviewPresentationController",properties:{marginTop:9,marginLeft:7,showBackground:!1}},overviewCloseIconRenderer:{type:n,position:"main",group:"overview",presentationController:"overviewPresentationController",properties:{hoverMode:e.hoverMode}}}}};return e.showCloseIcon||delete t.overview.renderers.overviewCloseIconRenderer,t}var n=e("module/overview/js/view/renderer/overviewcloseiconrenderer"),i=e("module/overview/js/view/model/overviewpresentationcontroller"),o=e("module/overview/js/view/model/overviewpresentationmodel"),r=e("module/overview/js/view/renderer/overviewrenderer"),s=e("module/overview/js/view/renderer/overviewunavailablerenderer"),a=e("module/overview/js/view/overviewview"),l=e("module/core/js/view/xaxisview");return t})),define("module/overview/js/overview",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object","module/overview/js/serviceclient/overviewdatapoller","module/overview/js/overviewevents","module/overview/js/enum/overviewunavailabilityreasonenum","module/overview/js/model/layouts/overviewvisibilitymodule","module/core/js/model/resolutionsenum","module/core/js/settings/settingsevents","module/core/js/event/subscribable","module/overview/js/config/subviewsconfig","module/menu-common/js/controller/visibilitymenu"],(function(e){"use strict";function t(e,t,n,i,o){this._eventBus=e,this._options=t,this._settingsManager=o}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/object"),r=e("module/overview/js/serviceclient/overviewdatapoller"),s=e("module/overview/js/overviewevents"),a=e("module/overview/js/enum/overviewunavailabilityreasonenum"),l=e("module/overview/js/model/layouts/overviewvisibilitymodule"),u=e("module/core/js/model/resolutionsenum"),c=e("module/core/js/settings/settingsevents"),d=e("module/core/js/event/subscribable"),h=e("module/overview/js/config/subviewsconfig"),p=e("module/menu-common/js/controller/visibilitymenu");n.extend(t,d),t.DEFAULT_HEIGHT=40,t.settingsParsers=Object.freeze({template:{moduleName:l.SETTINGS_MODULE_NAME,parserClass:l}});var m=t.prototype;return m._chartView=null,m._eventBus=null,m._instrumentResolution=null,m._options=null,m._overviewDataPoller=null,m._overviewVisibility=!1,m._settingsManager=null,m._unavailabilityReason=null,m.setUnavailabilityReason=i.observableSetter("_unavailabilityReason",s.AVAILABILITY_CHANGED),m.hideOverview=i.delegate("_settingsManager","putOverviewVisibilitySettings",!1,!0),m.init=function(){var e=o.deepCopyLiteral({},h(this._options));this._overviewDataPoller=r.create(this._eventBus),this._settingsManager.on(c.LAYOUT_SETTINGS_CHANGED,this._handleSettingsLoaded,this),this._eventBus.subscribe("chart/resolution/changed",this._handleResolutionChanged,this),this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._handleSettingsLoaded(),e.overview.properties.height=this._options.height||t.DEFAULT_HEIGHT,e.overview.presentationControllers.overviewPresentationController.presentationModel.properties={marginLeft:this._options.marginLeft||0,marginRight:this._options.marginRight||0,showCloseIcon:!!this._options.showCloseIcon},this._eventBus.publish("subViews/config",["overview",e]),this._chartView&&this._chartView.addRenderersBySubviewConfig(e)},m.destroy=function(){this._eventBus.publish("subViews/removeConfig",["overview"]),this._chartView&&(this._chartView.removeRenderersBySubviewConfig(h(this._options)),this._chartView=null),this._setOverviewVisibility(!1),this._setOverviewMenuVisibility(!1),this._overviewDataPoller&&(this._overviewDataPoller.destroy(),delete this._overviewDataPoller),this._settingsManager.un(c.LAYOUT_SETTINGS_CHANGED,this),this._eventBus.unsubscribeAll(this),this._unavailabilityReason=null},m.getOverviewVisibility=i.getter("_overviewVisibility"),m.getUnavailabilityReason=i.getter("_unavailabilityReason"),m._updateOverviewData=function(){this._instrumentResolution?this._instrumentResolution.resolution===u.values.TICK&&this.setUnavailabilityReason(a.TICK_RESOLUTION):this.setUnavailabilityReason(a.NO_RESOLUTION),this.getUnavailabilityReason()||(this._overviewVisibility?this._overviewDataPoller.startPollingForOverviewData(this._handleOverviewDataLoaded.bind(this),this._handleOverviewDataFailed.bind(this)):this._overviewDataPoller.stopPollingForOverviewData())},m._setOverviewMenuVisibility=function(e){this._eventBus.publish("menu/item/switch",[p.OVERVIEW,e]),this._overviewVisibility&&!e&&this._toggleOverviewSubView(!1)},m._setOverviewVisibility=function(e){this._overviewVisibility!==e&&(this._overviewVisibility=e,this.fire(s.VISIBILITY_CHANGED,this._overviewVisibility),this._toggleOverviewSubView(this._overviewVisibility),this._updateOverviewData())},m._handleChartViewReady=function(e){this._chartView=e,this._toggleOverviewSubView(this._overviewVisibility),this._setOverviewMenuVisibility(!0)},m._handleSettingsLoaded=function(){this._setOverviewVisibility(this._settingsManager.getOverviewVisibilitySettings())},m._handleResolutionChanged=function(e){this._instrumentResolution=e,this._unavailabilityReason=null,this._overviewDataPoller.withInstrumentResolution(e),this._updateOverviewData()},m._handleOverviewDataLoaded=function(e){e.getValues().length?this.fire(s.DATA_LOADED,e):this.setUnavailabilityReason(a.NO_DATA)},m._handleOverviewDataFailed=function(){this.setUnavailabilityReason(a.NO_DATA)},m._toggleOverviewSubView=function(e){this._eventBus.publish("chart/subview/toggle",["overview",e])},Object.seal(t.prototype),Object.seal(t)})),define("module/menu-common/js/controller/pricetypemenu",["require","module/core/js/util/array","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/menu-common/js/controller/menucontroller","module/menu-common/js/i18n","module/core/js/util/object","module/core/js/enum/pricetypeenum","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,n,o,r){t.superclass.constructor.call(this,e,n,o,r),this._tapHandler=i.create(this._eventBus,this._setPriceType.bind(this)),this._menuItems=[{actionListener:this._tapHandler,data:{id:l.ASK},label:s.get(l.ASK)},{actionListener:this._tapHandler,data:{id:l.BID},label:s.get(l.BID)},{actionListener:this._tapHandler,data:{id:l.MID},label:s.get(l.MID)}],this._ltpMenuItem={actionListener:this._tapHandler,data:{id:l.LTP},label:s.get(l.LTP)},this._model=this._menuItems.concat(),this.withModel(this._generateModel(this._settingsManager.getPriceTypeSettings()))}var n=e("module/core/js/util/array"),i=e("module/menu-common/js/actionlistener/callbackactionlistener"),o=e("module/core/js/util/class"),r=e("module/menu-common/js/controller/menucontroller"),s=e("module/menu-common/js/i18n"),a=e("module/core/js/util/object"),l=e("module/core/js/enum/pricetypeenum"),u=e("module/core/js/tracker/enum/schema");o.extend(t,r),t.create=function(e,n,i,o){return new t(e,n,i,o)};var c=t.prototype;return c.id="price-types",c._tapHandler=null,c._menuItems=null,c._ltpMenuItem=null,c._isLtpAvailable=!1,c.getMenuTitle=function(){var e=n.find(this._model,(function(e){return e.isSelected})).data.id;return e===l.LTP&&(e="LT"),s.get(e)},c._whenViewIsReady=function(){this._eventBus.subscribe("chart/pricetype/changed",this._handlePriceTypeChange,this),this._updateMenuLabel(this._settingsManager.getPriceTypeSettings(),this._isLtpAvailable)},c._destroyDom=function(){t.superclass._destroyDom.call(this),this._settingsManager.un(null,this)},c._setPriceType=function(e,t,i,o){this._updateMenuLabel(e.id,this._isLtpAvailable),this._sendToTracker({schema:u.RADIO_ACTION,elementId:"MENU_PRICE_TYPES_"+e.id.toUpperCase(),elementParentId:o,elementGroup:"MENU_PRICE_TYPES",elementValue:e.id.toUpperCase(),elementType:"BUTTON",actionType:"PRESS",selectedOptionId:e.id.toUpperCase(),optionIds:n.unique(a.values(l))}),this._settingsManager.putPriceTypeSettings(e.id,!0)},c._handlePriceTypeChange=function(e,t){this._isLtpAvailable=t,this._updateMenuLabel(e,t)},c._updateMenuLabel=function(e,t){this.withModel(this._generateModel(e,t),!1),this._eventBus.publish("menu/submenu/updatemodel",["price-types",{label:this.getMenuTitle()}])},c._generateModel=function(e,t){var i,o;return i=t?this._menuItems.concat([this._ltpMenuItem]):this._menuItems,i.forEach((function(t){t.isSelected=t.data.id===e}),this),e!==l.LTP||t||(o=n.find(i,(function(e){return e.data.id===l.MID})),o.isSelected=!0),i},Object.seal(c),Object.seal(t)})),define("module/menu-mobile/js/view/pricetypemenuview",["require","module/core/js/util/class","module/menu-mobile/js/view/menuview","module/menu-mobile/js/controls/scrollablebuttonbar"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n,{buttonBarStyles:"hidden container price-types sub",buttonBar:o})}var n=e("module/core/js/util/class"),i=e("module/menu-mobile/js/view/menuview"),o=e("module/menu-mobile/js/controls/scrollablebuttonbar");n.extend(t,i),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return Object.seal(r),Object.seal(t)})),define("module/resolutions/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{M1:"1Mo",w1:"1W",d1:"1T",h1:"1St",h2:"2St",h3:"3St",h4:"4St",m1:"1m",m2:"2m",m3:"3m",m5:"5m",m10:"10m",m15:"15m",m30:"30m",s1:"1s",t1:"TICK"},en:{M1:"1M",w1:"1W",d1:"1d",h1:"1h",h2:"2h",h3:"3h",h4:"4h",m1:"1m",m2:"2m",m3:"3m",m5:"5m",m10:"10m",m15:"15m",m30:"30m",s1:"1s",t1:"TICK"},es:{M1:"1M",w1:"1Sem",d1:"1d",h1:"1h",h2:"2h",h3:"3h",h4:"4h",m1:"1m",m2:"2m",m3:"3m",m5:"5m",m10:"10m",m15:"15m",m30:"30m",s1:"1s",t1:"TICK"},fr:{M1:"1 Mois",w1:"Hebdo",d1:"1j",h1:"1h",h2:"2h",h3:"3h",h4:"4h",m1:"1m",m2:"2m",m3:"3m",m5:"5m",m10:"10m",m15:"15m",m30:"30m",s1:"1s",t1:"TICK"},it:{M1:"1M",w1:"1Sett",d1:"1G",h1:"1h",h2:"2h",h3:"3h",h4:"4h",m1:"1m",m2:"2m",m3:"3m",m5:"5m",m10:"10m",m15:"15m",m30:"30m",s1:"1s",t1:"TICK"},ja:{M1:"月間",w1:"週間",d1:"日間",h1:"1 時間",h2:"2 時間",h3:"3 時間",h4:"4 時間",m1:"1 分",m2:"2 分",m3:"3 分",m5:"5分",m10:"10 分",m15:"15 分",m30:"30 分",s1:"1 秒",t1:"ティック"},nl:{M1:"1M",w1:"1W",d1:"1d",h1:"1u",h2:"2u",h3:"3u",h4:"4u",m1:"1mn",m2:"2mn",m3:"3mn",m5:"5mn",m10:"10mn",m15:"15mn",m30:"30mn",s1:"1s",t1:"TICK"},no:{M1:"1M",w1:"1U",d1:"1d",h1:"1t",h2:"2t",h3:"3t",h4:"4t",m1:"1m",m2:"2m",m3:"3m",m5:"5m",m10:"10m",m15:"15m",m30:"30m",s1:"1s",t1:"TICK"},pt:{M1:"1M",w1:"1Sem",d1:"1d",h1:"1h",h2:"2h",h3:"3h",h4:"4h",m1:"1m",m2:"2m",m3:"3m",m5:"5m",m10:"10m",m15:"15m",m30:"30m",s1:"1s",t1:"TICK"},sv:{M1:"1M",w1:"1V",d1:"1d",h1:"1t",h2:"2t",h3:"3t",h4:"4t",m1:"1m",m2:"2m",m3:"3m",m5:"5m",m10:"10m",m15:"15m",m30:"30m",s1:"1s",t1:"TICK"},zh:{M1:"每月",w1:"每周",d1:"每日",h1:"1 小时",h2:"2 小时",h3:"3 小时",h4:"4 小时",m1:"1 分",m2:"2 分",m3:"3 分",m5:"5分",m10:"10 分",m15:"15 分",m30:"30 分",s1:"1 秒",t1:"TICK"},zh_TW:{M1:"每月",w1:"每週",d1:"每日",h1:"1 小時",h2:"2 小時",h3:"3 小時",h4:"4 小時",m1:"1 分",m2:"2 分",m3:"3 分",m5:"5分",m10:"10 分",m15:"15 分",m30:"30 分",s1:"1 秒",t1:"TICK"}})})),define("module/resolution-label/js/view/renderer/activeresolutionrenderer",["require","module/core/js/view/renderer/abstracttextrenderer","module/core/js/util/class","module/resolutions/js/i18n","module/core/js/util/svg"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstracttextrenderer"),i=e("module/core/js/util/class"),o=e("module/resolutions/js/i18n"),r=e("module/core/js/util/svg");i.extend(t,n);var s=t.prototype;return s._text=function(){var e=this._instrumentModel.getActiveResolution();return e?o.get(e.id):""},s._updateTextPosition=function(){var e=this._presentationModel.getOffsets("marketInfo");this.dContainer.attr("transform",r.svgTranslateAttrXY(e.xOffset,e.yOffset))},Object.seal(s),Object.seal(t)})),define("module/resolution-label/js/config/subviewsconfig",["require","module/resolution-label/js/view/renderer/activeresolutionrenderer","module/core/js/util/object"],(function(e){"use strict";var t=e("module/resolution-label/js/view/renderer/activeresolutionrenderer");return e("module/core/js/util/object").recursiveFreeze({prices:{renderers:{studyResolution:{type:t,group:"body",position:"northWest",presentationController:"commonUi",properties:{marginTop:25,marginLeft:5}}}}})})),define("module/resolution-label/js/resolution-label",["require","module/resolution-label/js/config/subviewsconfig"],(function(e){"use strict";function t(e,t,n,i,o,r,s){this._eventBus=e}var n=e("module/resolution-label/js/config/subviewsconfig"),i=t.prototype;return i._chartView=null,i.init=function(){this._eventBus.publish("subViews/config",["resolutionLabel",n]),this._chartView?this._chartView.addRenderersBySubviewConfig(n):this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this)},i._handleChartViewReady=function(e){this._chartView=e},i.destroy=function(){this._eventBus.unsubscribeAll(this),this._eventBus.publish("subViews/removeConfig",["resolutionLabel"]),this._chartView&&this._chartView.removeRenderersBySubviewConfig(n)},Object.seal(i),Object.seal(t)})),define("module/resolutions/js/resolutions",["require","module/core/js/util/array","module/resolutions/js/i18n","module/core/js/util/object","module/core/js/model/resolutionsenum"],(function(e){"use strict";function t(e,t,n,i,o){this._eventBus=e,this._options=t||{}}var n=e("module/core/js/util/array"),i=e("module/resolutions/js/i18n"),o=e("module/core/js/util/object"),r=e("module/core/js/model/resolutionsenum");t.orderByPeriodDescending=function(e,t){var n=r.values[e.json.value.enumName],i=r.values[t.json.value.enumName],o=n===r.values.TICK?-1:n.period;return(i===r.values.TICK?-1:i.period)-o},t.getAvailableResolutions=function(e,t){var i,o={},s=r.values.TICK.period,a=r.getSupportedResolutions();t=t||[],e.delay&&(s=r.values.FIVE_MINUTES.period);for(var l in a)i=a[l],i.period>=s&&!n.contains(t,i)&&(o[l]=i);return o};var s=t.prototype;return s._eventBus=null,s._options=null,s._lastResolutionsJson=null,s._lastResolution=null,s._lastNonDelayedResolution=null,s._nextResolutionChangeByModule=!1,s.getExcludedResolutions=function(){return this._options.excluded||[]},s.init=function(){var e=o.recursiveFreeze(this._generateCapabilities(r.getSupportedResolutions()));this._lastResolutionsJson=JSON.stringify(e),this._eventBus.publish("capabilities/resolutions",["resolutions",e],{retrospective:!0}),this._eventBus.subscribe("chart/resolution/changed",this._handleResolutionChanged,this),this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentChanged,this)},s.destroy=function(){this._eventBus.unsubscribeAll(this),this._eventBus=null},s._generateCapabilities=function(e){var n,o,s=[];for(n in e)o=r.values[n].id,s.push({id:o,label:i.get(o),json:{type:"resolution",value:{enumName:n}}});return s.sort(t.orderByPeriodDescending)},s._handleResolutionChanged=function(e){e.resolution!==this._lastResolution&&(this._lastResolution=e.resolution,this._nextResolutionChangeByModule?this._nextResolutionChangeByModule=!1:this._lastNonDelayedResolution=null)},s._handleInstrumentChanged=function(e){var n,i,r=t.getAvailableResolutions(e,this.getExcludedResolutions());i=o.recursiveFreeze(this._generateCapabilities(r)),(n=JSON.stringify(i))!==this._lastResolutionsJson&&(this._lastResolutionsJson=n,this._eventBus.publish("capabilities/resolutions",["resolutions",i],{retrospective:!0}),this._adjustResolutionForMarketDelay(e))},s._adjustResolutionForMarketDelay=function(e){var t;e.delay?this._lastResolution.period<r.values.FIVE_MINUTES.period&&(this._lastNonDelayedResolution=this._lastResolution,this._nextResolutionChangeByModule=!0,this._eventBus.publish("chart/resolution/change",["FIVE_MINUTES"])):this._lastNonDelayedResolution&&(t=this._lastNonDelayedResolution,this._lastNonDelayedResolution=null,this._eventBus.publish("chart/resolution/change",[r.keyFor(t)]))},Object.seal(t.prototype),Object.seal(t)})),define("module/resolutions/js/menu/resolutionsmenu",["require","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/menu-common/js/controller/menucontroller","module/core/js/model/resolutionsenum","module/core/js/settings/settingsevents","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._eventBus.subscribe("capabilities/resolutions",this._handleResolutionsCapabilities,this)}var n=e("module/menu-common/js/actionlistener/callbackactionlistener"),i=e("module/core/js/util/class"),o=e("module/menu-common/js/controller/menucontroller"),r=e("module/core/js/model/resolutionsenum"),s=e("module/core/js/settings/settingsevents"),a=e("module/core/js/tracker/enum/schema");i.extend(t,o),t.create=function(e,n,i,o){return new t(e,n,i,o)};var l=t.prototype;return l.id="resolutions",l._whenViewIsReady=function(){this._updateResolution(),this._settingsManager.on(s.LAYOUT_SETTINGS_CHANGED,this._updateResolution,this)},l._updateResolution=function(){this._model&&(this._model.forEach((function(e){e.isSelected=e.data.id===this._settingsManager.getResolutionSettings()}),this),this._view.selectItem(this._settingsManager.getResolutionSettings()))},l._setResolution=function(e){var t=r.valueOf(e.id);this._eventBus.publish("tracker/chart",[{schema:a.RADIO_ACTION,elementId:"MENU_RESOLUTIONS_"+r.statisticsKeyFor(t),elementGroup:"MENU_RESOLUTIONS",elementValue:r.statisticsKeyFor(t),elementType:"BUTTON",actionType:"PRESS",selectedOptionId:r.statisticsKeyFor(t),optionIds:r.statisticsKeys()}]),this._settingsManager.putResolutionSettings(e.id,!0)},l._handleResolutionsCapabilities=function(e,t){var i=new n(this._eventBus,this._setResolution.bind(this)),o=t.map((function(e){return{label:e.label,isSelected:e.json.value.enumName===this._settingsManager.getResolutionSettings(),actionListener:i,data:{id:e.json.value.enumName}}}),this);this.withModel(o,!0)},Object.seal(t.prototype),Object.seal(t)})),define("module/menu-mobile/js/controls/centralisingbuttonbar",["require","module/core/js/util/array","module/core/js/util/class","module/menu-mobile/js/controls/scrollabletogglebuttonbar"],(function(e){"use strict";function t(e,n){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/array"),i=e("module/core/js/util/class"),o=e("module/menu-mobile/js/controls/scrollabletogglebuttonbar");i.extend(t,o),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return r.show=function(){t.superclass.show.call(this);var e,i,o,r=this._dButtonBarContainer.width(),s=this._scrollableContainer.distanceOverLeftBound(),a=this._scrollableContainer.distanceOverRightBound(),l=this.getSelectedItems();n.nonEmpty(l)&&(e=n.firstOf(l).getBoundingClientRect(),i=e.left-r/2+e.width/2,i<0?o=-Math.max(i,s):i>0&&(o=-Math.min(i,-a)),i&&this._scrollableContainer.moveByPixels(o,!0))},Object.seal(r),Object.seal(t)})),define("module/resolutions/js/menu/resolutionsmenuview",["require","module/menu-mobile/js/controls/centralisingbuttonbar","module/core/js/util/class","module/menu-mobile/js/view/menuview"],(function(e){"use strict";function t(e,i){t.superclass.constructor.call(this,e,i,{buttonBarStyles:"hidden container resolutions sub",buttonBar:n})}var n=e("module/menu-mobile/js/controls/centralisingbuttonbar"),i=e("module/core/js/util/class"),o=e("module/menu-mobile/js/view/menuview");i.extend(t,o),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return Object.seal(r),Object.seal(t)})),define("module/resizablestudyviews/js/resizablestudyviewsupport",["require"],(function(e){"use strict";function t(e){this._eventBus=e}var n=t.prototype;return n._eventBus=null,n.init=function(){this._eventBus.publish("resizableStudyViews/enabled",[!0])},n.destroy=function(){this._eventBus.publish("resizableStudyViews/enabled",[!1])},Object.seal(n),Object.seal(t)})),define("module/colour-customisation/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{dialogTitle:"Stil",candlestickBodyUp:"Steigende Kerze",candlestickBodyDown:"Fallende Kerze",candlestickStrokeUp:"Umrandung",candlestickStrokeNoMovement:"Unverändert",candlestickStrokeDown:"Umrandung",hlocUp:"Steigend",hlocNoMovement:"Unverändert",hlocDown:"Fallend",line:"Linie",lineUp:"Steigend",lineNoMovement:"Unverändert",lineDown:"Fallend",mountainBody:"Füllfarbe",mountainStroke:"Linie",colour:"Farbauswahl"},en:{dialogTitle:"Style",candlestickBodyUp:"Rising body",candlestickBodyDown:"Falling body",candlestickStrokeUp:"Line",candlestickStrokeNoMovement:"Unchanged",candlestickStrokeDown:"Line",hlocUp:"Rising",hlocNoMovement:"Unchanged",hlocDown:"Falling",line:"Line",lineUp:"Rising",lineNoMovement:"Unchanged",lineDown:"Falling",mountainBody:"Fill",mountainStroke:"Line",colour:"Colour"},es:{dialogTitle:"Estilo",candlestickBodyUp:"Cuerpo ascendente",candlestickBodyDown:"Cuerpo descendente",candlestickStrokeUp:"Línea",candlestickStrokeNoMovement:"Sin variación",candlestickStrokeDown:"Línea",hlocUp:"Ascendente",hlocNoMovement:"Sin variación",hlocDown:"Descendente",line:"Línea",lineUp:"Ascendente",lineNoMovement:"Sin variación",lineDown:"Descendente",mountainBody:"Fondo",mountainStroke:"Línea",colour:"Color"},fr:{dialogTitle:"Style",candlestickBodyUp:"Corps haussier",candlestickBodyDown:"Corps baissier",candlestickStrokeUp:"Contour",candlestickStrokeNoMovement:"Inchangé",candlestickStrokeDown:"Contour",hlocUp:"Haussier",hlocNoMovement:"Inchangé",hlocDown:"Baissier",line:"Contour",lineUp:"Haussier",lineNoMovement:"Inchangé",lineDown:"Baissier",mountainBody:"Remplissage",mountainStroke:"Contour",colour:"Couleur"},it:{dialogTitle:"Stile",candlestickBodyUp:"Corpo rialzista",candlestickBodyDown:"Corpo ribassista",candlestickStrokeUp:"Linea",candlestickStrokeNoMovement:"Invariato",candlestickStrokeDown:"Linea",hlocUp:"Rialzista",hlocNoMovement:"Invariato",hlocDown:"Ribassista",line:"Linea",lineUp:"Rialzista",lineNoMovement:"Invariato",lineDown:"Ribassista",mountainBody:"Riempimento",mountainStroke:"Linea",colour:"Colore"},ja:{dialogTitle:"チャート種類",candlestickBodyUp:"上昇（実体）",candlestickBodyDown:"下落（実体）",candlestickStrokeUp:"ライン",candlestickStrokeNoMovement:"変更なし",candlestickStrokeDown:"ライン",hlocUp:"上昇",hlocNoMovement:"変更なし",hlocDown:"下落",line:"ライン",lineUp:"上昇",lineNoMovement:"変更なし",lineDown:"下落",mountainBody:"塗りつぶし",mountainStroke:"ライン",colour:"色彩"},nl:{dialogTitle:"Stijl",candlestickBodyUp:"Stijgend Kaars",candlestickBodyDown:"Dalend Kaars",candlestickStrokeUp:"Omlijning",candlestickStrokeNoMovement:"Niet veranderd",candlestickStrokeDown:"Omlijning",hlocUp:"Stijgend",hlocNoMovement:"Niet veranderd",hlocDown:"Dalend",line:"Omlijning",lineUp:"Stijgend",lineNoMovement:"Niet veranderd",lineDown:"Dalend",mountainBody:"Vullen",mountainStroke:"Linie",colour:"Kleur"},no:{dialogTitle:"Stil",candlestickBodyUp:"Stigende kropp",candlestickBodyDown:"Fallende kropp",candlestickStrokeUp:"Linje",candlestickStrokeNoMovement:"Uforandret",candlestickStrokeDown:"Linje",hlocUp:"Stigende",hlocNoMovement:"Uforandret",hlocDown:"Fallende",line:"Linje",lineUp:"Stigende",lineNoMovement:"Uforandret",lineDown:"Fallende",mountainBody:"Fyll",mountainStroke:"Linje",colour:"Farge"},pt:{dialogTitle:"Estilo",candlestickBodyUp:"Corpo ascendente",candlestickBodyDown:"Corpo descendente",candlestickStrokeUp:"Linha",candlestickStrokeNoMovement:"Sem alterações",candlestickStrokeDown:"Linha",hlocUp:"Ascendente",hlocNoMovement:"Sem alterações",hlocDown:"Descendente",line:"Linha",lineUp:"Ascendente",lineNoMovement:"Sem alterações",lineDown:"Descendente",mountainBody:"Preenchimento ",mountainStroke:"Linha",colour:"Cor"},sv:{dialogTitle:"Stil",candlestickBodyUp:"Stigande candle",candlestickBodyDown:"Fallande candle",candlestickStrokeUp:"Linje",candlestickStrokeNoMovement:"Oförändrad",candlestickStrokeDown:"Linje",hlocUp:"Stigande",hlocNoMovement:"Oförändrad",hlocDown:"Fallande",line:"Linje",lineUp:"Stigande",lineNoMovement:"Oförändrad",lineDown:"Fallande",mountainBody:"Ifyllnad",mountainStroke:"Linje",colour:"Färg"},zh:{dialogTitle:"风格",candlestickBodyUp:"上升烛体",candlestickBodyDown:"下降烛体",candlestickStrokeUp:"填充",candlestickStrokeNoMovement:"未变更",candlestickStrokeDown:"填充",hlocUp:"上升",hlocNoMovement:"未变更",hlocDown:"下降",line:"填充",lineUp:"上升",lineNoMovement:"未变更",lineDown:"下降",mountainBody:"填充",mountainStroke:"填充",colour:"颜色"},zh_TW:{dialogTitle:"風格",candlestickBodyUp:"上升燭體",candlestickBodyDown:"下降燭體",candlestickStrokeUp:"填充",candlestickStrokeNoMovement:"未變更",candlestickStrokeDown:"填充",hlocUp:"上升",hlocNoMovement:"未變更",hlocDown:"下降",line:"填充",lineUp:"上升",lineNoMovement:"未變更",lineDown:"下降",mountainBody:"填充",mountainStroke:"填充",colour:"顏色"}})})),define("module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent",["require","module/core/js/util/class","module/colour-customisation/js/view/component/dialog/simplecolourcustomisationdialogcontent"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,o,r)}var n=e("module/core/js/util/class"),i=e("module/colour-customisation/js/view/component/dialog/simplecolourcustomisationdialogcontent");n.extend(t,i),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var o=t.prototype;return o.initDom=function(e){var n=t.superclass.initDom.call(this,e);return this._dButtonContainer=e.append("div").classed("actions",!0),this._createDoneButton(),this._createResetButton(this._reset),n},o._reset=function(){this._settingsManager.putColourCustomisationSettings(this._styles,!0),this.destroy(),this.initDom(this.dContainer)},Object.seal(o),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/candlecustomisationdialogcontent",["require","module/core/js/util/class","module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent","module/colour-customisation/js/model/layouts/defaults","module/colour-customisation/js/i18n","module/colour-customisation/js/view/component/stylingwidget"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,o,r)}
var n=e("module/core/js/util/class"),i=e("module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent"),o=e("module/colour-customisation/js/model/layouts/defaults"),r=e("module/colour-customisation/js/i18n"),s=e("module/colour-customisation/js/view/component/stylingwidget");n.extend(t,i),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var a=t.prototype;return a._createStylingWidgets=function(e){return[s.create(this._styles.candlestick.noMovement.stroke,this._handleNewStroke.bind(this,"noMovement"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("candlestickStrokeNoMovement")),s.create(this._styles.candlestick.up.fill,this._handleNewBody.bind(this,"up"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("candlestickBodyUp")),s.create(this._styles.candlestick.up.stroke,this._handleNewStroke.bind(this,"up"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("candlestickStrokeUp"),["rising"]),s.create(this._styles.candlestick.down.fill,this._handleNewBody.bind(this,"down"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("candlestickBodyDown")),s.create(this._styles.candlestick.down.stroke,this._handleNewStroke.bind(this,"down"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("candlestickStrokeDown"),["falling"])]},a._reset=function(){o.resetToDefaults(this._styles.candlestick,["candlestick"],this._styles.themeSettingsMode),t.superclass._reset.call(this)},a._handleNewBody=function(e,t,n){this._styles.candlestick[e].fill[t]=n,this._settingsManager.putColourCustomisationSettings(this._styles,!0)},a._handleNewStroke=function(e,t,n){this._styles.candlestick[e].stroke[t]=n,this._settingsManager.putColourCustomisationSettings(this._styles,!0)},Object.seal(a),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/hloccustomisationdialogcontent",["require","module/core/js/util/class","module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent","module/colour-customisation/js/model/layouts/defaults","module/colour-customisation/js/i18n","module/colour-customisation/js/view/component/stylingwidget"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,o,r)}var n=e("module/core/js/util/class"),i=e("module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent"),o=e("module/colour-customisation/js/model/layouts/defaults"),r=e("module/colour-customisation/js/i18n"),s=e("module/colour-customisation/js/view/component/stylingwidget");n.extend(t,i),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var a=t.prototype;return a._createStylingWidgets=function(e){return[s.create(this._styles.hloc.noMovement,this._handleNewStyle.bind(this,"noMovement"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("hlocNoMovement")),s.create(this._styles.hloc.up,this._handleNewStyle.bind(this,"up"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("hlocUp")),s.create(this._styles.hloc.down,this._handleNewStyle.bind(this,"down"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("hlocDown"))]},a._reset=function(){o.resetToDefaults(this._styles.hloc,["hloc"],this._styles.themeSettingsMode),t.superclass._reset.call(this)},a._handleNewStyle=function(e,t,n){this._styles.hloc[e][t]=n,this._settingsManager.putColourCustomisationSettings(this._styles,!0)},Object.seal(a),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/linecustomisationdialogcontent",["require","module/core/js/util/class","module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent","module/colour-customisation/js/model/layouts/defaults","module/colour-customisation/js/i18n","module/colour-customisation/js/view/component/stylingwidget"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,o,r)}var n=e("module/core/js/util/class"),i=e("module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent"),o=e("module/colour-customisation/js/model/layouts/defaults"),r=e("module/colour-customisation/js/i18n"),s=e("module/colour-customisation/js/view/component/stylingwidget");n.extend(t,i),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var a=t.prototype;return a._createStylingWidgets=function(e){return[s.create(this._styles.line.noMovement,this._handleNewStyle.bind(this,"noMovement"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("lineNoMovement")),s.create(this._styles.line.up,this._handleNewStyle.bind(this,"up"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("lineUp")),s.create(this._styles.line.down,this._handleNewStyle.bind(this,"down"),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("lineDown"))]},a._reset=function(){o.resetToDefaults(this._styles.line,["line"],this._styles.themeSettingsMode),t.superclass._reset.call(this)},a._handleNewStyle=function(e,t,n){this._styles.line[e][t]=n,this._settingsManager.putColourCustomisationSettings(this._styles,!0)},Object.seal(a),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/mountaincustomisationdialogcontent",["require","module/core/js/util/class","module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent","module/colour-customisation/js/model/layouts/defaults","module/colour-customisation/js/i18n","module/colour-customisation/js/view/component/stylingwidget"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.call(this,e,n,i,o,r)}var n=e("module/core/js/util/class"),i=e("module/colour-customisation/js/view/component/dialog/colourcustomisationdialogcontent"),o=e("module/colour-customisation/js/model/layouts/defaults"),r=e("module/colour-customisation/js/i18n"),s=e("module/colour-customisation/js/view/component/stylingwidget");n.extend(t,i),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var a=t.prototype;return a._createStylingWidgets=function(e){return[s.create(this._styles.mountain.fill,this._handleNewBody.bind(this),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("mountainBody")),s.create(this._styles.mountain.line,this._handleNewStroke.bind(this),this._taskManager).initDom(e,this._eventBus,this._captureZoneManager,this._dialog,r.get("mountainStroke"))]},a._reset=function(){o.resetToDefaults(this._styles.mountain,["mountain"],this._styles.themeSettingsMode),t.superclass._reset.call(this)},a._handleNewStroke=function(e,t){this._styles.mountain.line[e]=t,this._settingsManager.putColourCustomisationSettings(this._styles,!0)},a._handleNewBody=function(e,t){this._styles.mountain.fill[e]=t,this._settingsManager.putColourCustomisationSettings(this._styles,!0)},Object.seal(a),Object.seal(t)})),define("module/styles/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{CANDLE:"Kerzen",LINE:"Linie",HLOC:"HLOC",MOUNTAIN:"Mountain"},en:{CANDLE:"Candlestick",LINE:"Line",HLOC:"HLOC",MOUNTAIN:"Mountain"},es:{CANDLE:"Vela",LINE:"Línea",HLOC:"HLOC",MOUNTAIN:"Montaña"},fr:{CANDLE:"Chandelier",LINE:"Ligne",HLOC:"HLOC",MOUNTAIN:"Montagne"},it:{CANDLE:"A candele",LINE:"Lineare",HLOC:"HLOC",MOUNTAIN:"Mountain"},ja:{CANDLE:"ロウソク足",LINE:"ライン",HLOC:"バーチャート",MOUNTAIN:"山型"},nl:{CANDLE:"Candlestick",LINE:"Lijn",HLOC:"HLOC",MOUNTAIN:"Berg"},no:{CANDLE:"Candlestick",LINE:"Linje",HLOC:"HLOC",MOUNTAIN:"Mountain"},pt:{CANDLE:"Velas",LINE:"Linha",HLOC:"HLOC",MOUNTAIN:"Montanha"},sv:{CANDLE:"Candlestick",LINE:"Linje",HLOC:"HLOC",MOUNTAIN:"Mountain"},zh:{CANDLE:"蜡烛图",LINE:"线图",HLOC:"HLOC 图",MOUNTAIN:"山形图"},zh_TW:{CANDLE:"蠟燭圖",LINE:"線狀圖",HLOC:"HLOC 圖",MOUNTAIN:"山狀圖"}})})),define("module/core/js/view/component/dialog/tabbeddialogcontent",["require","module/core/js/view/component/dialog/submittabledialogcontent","module/core/js/util/array","module/core/js/util/class","module/core/js/view/component/dialog/dialogevents","module/core/js/util/oop","module/core/js/view/component/dialog/control/togglebar"],(function(e){"use strict";function t(e,n,o){t.superclass.constructor.call(this,e,n,o),this._tabArguments=i.toArray(arguments,3),this._tabs=Object.create(null)}var n=e("module/core/js/view/component/dialog/submittabledialogcontent"),i=e("module/core/js/util/array"),o=e("module/core/js/util/class"),r=e("module/core/js/view/component/dialog/dialogevents"),s=e("module/core/js/util/oop"),a=e("module/core/js/view/component/dialog/control/togglebar");o.extend(t,n);var l=t.prototype;return l._currentTab=null,l._dTabContainer=null,l._tabArguments=null,l._tabs=null,l._tabSelector=null,l._getI18n=s.abstractMethod,l.initDom=function(e){var n=t.superclass.initDom.call(this,e);return e.classed("tabbed",!0),this._tabSelector=this._createTabSelector(),this._tabSelector.withCaptureZoneManager(this._captureZoneManager),this._tabSelector.on(r.VALUE_CHANGED,this._handleTabSelection,this),this._tabSelector.initDom(e,"tabSelector"),this._dTabContainer=e.append("div").classed("tabContainer",!0),this._tabs=this._createTabs.apply(this,[this._dTabContainer].concat(this._tabArguments)),this.selectTab(this._tabSelector._currentValue),n},l._createTabSelector=function(e,t,n){return a.create(this._getI18n(),e,e,{defaultValue:n,options:t.map((function(e){return{localisationKey:e,value:e}}))},n)},l._createTabs=s.abstractMethod,l._createTab=function(e,t,n){return t.create.apply(t,[this._dialog,this._eventBus,this._captureZoneManager].concat(this._tabArguments)).initDom(n.append("div").classed(e,!0).classed("tab",!0))},l.selectTab=function(e){var t;for(t in this._tabs)this._tabs[t].dContainer.classed("selected",t===e),t===e?(this._tabs[t].enable(),this._currentTab=this._tabs[t]):this._tabs[t].disable();return this.updateCaptureZones(),this},l.enable=function(){return this._currentTab.enable(),this._tabSelector.enable(),t.superclass.enable.call(this)},l.disable=function(){return this._currentTab.disable(),this._tabSelector.disable(),t.superclass.disable.call(this)},l.updateCaptureZones=function(){var e;this._showCurrentTab();for(e in this._tabs)this._tabs[e].updateCaptureZones();return this._tabSelector.updateCaptureZones(),t.superclass.updateCaptureZones.call(this)},l.destroy=function(){var e;for(e in this._tabs)this._tabs[e].destroy();this._tabs=Object.create(null),this._tabSelector&&(this._tabSelector.destroy(),this._tabSelector=null),this._dTabContainer&&(this._dTabContainer.remove(),this._dTabContainer=null),this.dContainer&&this.dContainer.classed("tabbed",!1),t.superclass.destroy.call(this)},l._showCurrentTab=function(){var e=this._dTabContainer.node(),t=e.getBoundingClientRect().left,n=this._currentTab.dContainer.node().getBoundingClientRect().left;e.style.left=t-n+"px"},l._handleTabSelection=function(e,t){this.selectTab(t)},Object.seal(l),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/stylespickerdialogcontent",["require","module/colour-customisation/js/view/component/dialog/candlecustomisationdialogcontent","module/core/js/util/class","module/core/js/util/functional","module/colour-customisation/js/view/component/dialog/hloccustomisationdialogcontent","module/colour-customisation/js/view/component/dialog/linecustomisationdialogcontent","module/colour-customisation/js/view/component/dialog/mountaincustomisationdialogcontent","module/core/js/model/stylesenum","module/styles/js/i18n","module/core/js/view/component/dialog/tabbeddialogcontent"],(function(e){"use strict";function t(e,n,i,o,r){t.superclass.constructor.apply(this,arguments),this._settingsManager=o}var n=e("module/colour-customisation/js/view/component/dialog/candlecustomisationdialogcontent"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/colour-customisation/js/view/component/dialog/hloccustomisationdialogcontent"),s=e("module/colour-customisation/js/view/component/dialog/linecustomisationdialogcontent"),a=e("module/colour-customisation/js/view/component/dialog/mountaincustomisationdialogcontent"),l=e("module/core/js/model/stylesenum"),u=e("module/styles/js/i18n"),c=e("module/core/js/view/component/dialog/tabbeddialogcontent");i.extend(t,c),t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)};var d=t.prototype;return d._getI18n=o.returns(u),d._createTabSelector=function(){return t.superclass._createTabSelector.call(this,"StylePicker",[l.CANDLE,l.LINE,l.HLOC,l.MOUNTAIN],this._settingsManager.getStyleSettings())},d._createTabs=function(e){var t={};return t[l.CANDLE]=this._createTab(l.CANDLE,n,e),t[l.LINE]=this._createTab(l.LINE,s,e),t[l.HLOC]=this._createTab(l.HLOC,r,e),t[l.MOUNTAIN]=this._createTab(l.MOUNTAIN,a,e),t},d.selectTab=function(e){return t.superclass.selectTab.call(this,e),this._settingsManager.putStyleSettings(e,!0),this},Object.seal(d),Object.seal(t)})),define("module/colour-customisation/js/view/component/dialog/stylescustomisationdialog",["require","module/core/js/view/component/dialog/abstractdialog","module/core/js/util/class","module/core/js/util/functional","module/colour-customisation/js/i18n","module/colour-customisation/js/view/component/dialog/stylespickerdialogcontent"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,o),this._settingsManager=i}var n=e("module/core/js/view/component/dialog/abstractdialog"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/colour-customisation/js/i18n"),s=e("module/colour-customisation/js/view/component/dialog/stylespickerdialogcontent");i.extend(t,n),t.create=function(e,n,i,o){return new t(e,n,i,o)};var a=t.prototype;return a._settingsManager=null,a._getDialogTitle=function(){return r.get("dialogTitle")},a._getDialogClasses=o.returns("styles"),a._createContent=function(e){return s.create(this,this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager).initDom(e)},Object.seal(a),Object.seal(t)})),define("module/styles/js/menu/stylemenu",["require","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/menu-common/js/controller/menucontroller","module/core/js/util/object","module/core/js/settings/settingsevents","module/core/js/model/stylesenum","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.call(this,e,n,i,o,a),this._eventBus.subscribe("capabilities/styles",this.handleStylesCapabilities,this)}var n=e("module/menu-common/js/actionlistener/callbackactionlistener"),i=e("module/core/js/util/class"),o=e("module/menu-common/js/controller/menucontroller"),r=e("module/core/js/util/object"),s=e("module/core/js/settings/settingsevents"),a=e("module/core/js/model/stylesenum"),l=e("module/core/js/tracker/enum/schema");i.extend(t,o),t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)};var u=t.prototype;return u.id="styles",u._whenViewIsReady=function(){this._updateStyleSettings(),this._settingsManager.on(s.LAYOUT_SETTINGS_CHANGED,this._updateStyleSettings,this)},u._setStyle=function(e,t,n,i){this._sendToTracker({schema:l.RADIO_ACTION,elementId:"MENU_STYLES_"+e.id.toUpperCase(),elementParentId:i,elementGroup:"MENU_STYLES",elementValue:e.id.toUpperCase(),elementType:"BUTTON",actionType:"PRESS",selectedOptionId:e.id.toUpperCase(),optionIds:r.values(a)}),this._settingsManager.putStyleSettings(e.id,!0)},u._updateStyleSettings=function(){this._view.selectItem(this._settingsManager.getStyleSettings()),this._model&&this._model.forEach((function(e){e.isSelected=e.data.id===this._settingsManager.getStyleSettings()}),this)},u.handleStylesCapabilities=function(e,t){var n=this.createCapabilitiesStyleModels(e,t,1);this.withModel(n)},u.createCapabilitiesStyleModels=function(e,t,i){var o=new n(this._eventBus,this._setStyle.bind(this));return t.map((function(e){return{group:i,label:e.label,actionListener:o,data:{id:e.json.value}}}))},Object.seal(u),Object.seal(t)})),define("module/styles/js/menu/mobilestylemenu",["require","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/menu-common/js/i18n","module/colour-customisation/js/view/component/dialog/stylescustomisationdialog","module/styles/js/menu/stylemenu"],(function(e){"use strict";function t(e,n,i,o,r,s,a){t.superclass.constructor.call(this,e,n,i,o,r,s,a)}var n=e("module/menu-common/js/actionlistener/callbackactionlistener"),i=e("module/core/js/util/class"),o=e("module/menu-common/js/i18n"),r=e("module/colour-customisation/js/view/component/dialog/stylescustomisationdialog"),s=e("module/styles/js/menu/stylemenu");i.extend(t,s);var a=t.prototype;return t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)},t.showCustomisationDialog=function(){this._dialogBox=new r(this._eventBus,this._captureZoneManager,this._settingsManager,this._taskManager).initDom(this._containerProvider.getContainer("top-html")).makeScrollable()},a.handleStylesCapabilities=function(e,i){var r=this.createCapabilitiesStyleModels(e,i,2);r.unshift({group:1,label:o.get("styles_customise"),actionListener:new n(this._eventBus,t.showCustomisationDialog.bind(this)),data:{id:"customiseStyles"}}),this.withModel(r)},Object.seal(a),Object.seal(t)})),define("module/styles/js/menu/stylemenuview",["require","module/core/js/util/class","module/menu-mobile/js/view/menuview","module/menu-mobile/js/controls/scrollabletogglebuttonbar"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n,{buttonBar:o,buttonBarStyles:"hidden container styles sub"})}var n=e("module/core/js/util/class"),i=e("module/menu-mobile/js/view/menuview"),o=e("module/menu-mobile/js/controls/scrollabletogglebuttonbar");n.extend(t,i),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return Object.seal(r),Object.seal(t)})),define("module/styles/js/styles",["require","module/core/js/util/array","module/styles/js/i18n","module/core/js/util/object","module/core/js/settings/settingsevents","module/styles/js/config/stylesconfig","module/core/js/model/stylesenum"],(function(e){"use strict";function t(e,t,n,i,o,r){this._eventBus=e,this._settingsManager=o}var n=e("module/core/js/util/array"),i=e("module/styles/js/i18n"),o=e("module/core/js/util/object"),r=e("module/core/js/settings/settingsevents"),s=e("module/styles/js/config/stylesconfig"),a=e("module/core/js/model/stylesenum"),l=t.prototype;return l._eventBus=null,l._settingsManager=null,l.init=function(){var e=s.get(),t=o.recursiveFreeze(this._generateConfig(e));this._updateStylesCapabilities(),this._eventBus.publish("styles/config",[t],{retrospective:!0}),this._settingsManager.on(r.LAYOUT_SETTINGS_CHANGED,this._updateStylesCapabilities,this)},l.destroy=function(){this._settingsManager.un(null,this),this._settingsManager=null,this._eventBus=null},l._generateCapabilities=function(e){return n.intersection(e.capabilities,a.getSupportedStylesForResolution(this._settingsManager.getResolutionSettings())).map((function(e){return{id:e,json:{type:"style",value:e},label:i.get(e)}}))},l._generateConfig=function(e){return{resolutionChooser:e.resolutionChooser,rendererChooser:e.rendererChooser,renderers:e.renderers}},l._updateStylesCapabilities=function(){var e=s.get(),t=o.recursiveFreeze(this._generateCapabilities(e));this._eventBus.publish("capabilities/styles",["styles",t],{retrospective:!0})},Object.seal(t.prototype),Object.seal(t)})),define("module/core/js/view/htmloverlayview",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object","module/core/js/view/subview"],(function(e){"use strict";function t(){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/object"),r=e("module/core/js/view/subview");n.extend(t,r);var s=t.prototype;return s.type=r.HTML_TYPE,s.positionTagName="div",s.rendererTagName="div",s.positions=o.recursiveFreeze([{name:"yAxis"},{name:"body"}]),s.isInChartSpace=i.returns(!0),s.updateDimensions=function(e,n,i,o){t.superclass.updateDimensions.apply(this,arguments),this._getPositionDomContainer("body").style("width",e.width+"px").style("height",e.height+"px"),this._getPositionDomContainer("yAxis").style("width",i+"px")},Object.seal(s),t})),define("module/core/js/view/absolutehtmloverlayview",["require","module/core/js/util/class","module/core/js/view/htmloverlayview"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/htmloverlayview");n.extend(t,i);var o=t.prototype;return o.updateDimensions=function(e,n,i,o){var r={x:0,y:0,width:Math.max(1,this.getChartView().dContainer.property("clientWidth")),height:Math.max(1,this.getChartView().dContainer.property("clientHeight"))};return t.superclass.updateDimensions.call(this,r,n,r.width,r.height)},Object.seal(o),Object.seal(t)})),define("module/core/js/view/renderer/confirmationboxrenderer",["require","module/core/js/view/renderer/basemessageboxrenderer","module/core/js/util/class","module/core/js/event/events","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){this._updateCaptureZone=s.throttledDeferred(this._updateCaptureZone),this._zIndex=l.DEAL_CONFIRMATION_BOX,t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/basemessageboxrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/event/events"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("module/core/js/util/functional"),a=e("module/core/js/view/userinput/hovergesturerecogniser"),l=e("module/core/js/enum/zindexenum");i.extend(t,n);var u=t.prototype;return u._ignoreDealResult=!1,u._ignoreValidation=!1,u._buttonCaptureZone=null,u.startRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.subscribe(o.TRADE_CONFIRMED,this._handleConfirmation,this),this._eventBus.subscribe(o.TRADE_REJECTED,this._handleRejection,this),this._eventBus.subscribe(o.TRADE_INVALID,this._handleInvalid,this),this._eventBus.subscribe("messagebox/dismiss/dealing",this._hide,this),this._eventBus.subscribe("messagebox/ignore/validation",this._handleIgnoreValidation,this),t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this)},u._createCaptureZone=function(){t.superclass._createCaptureZone.call(this),this._buttonCaptureZone=this._captureZoneManager.create(r.PROPAGATE_ALL,this._zIndex),this._buttonCaptureZone.addGesture(a,{onStart:this._setCloseButtonHover.bind(this,!0),onEnd:this._setCloseButtonHover.bind(this,!1)})},u._updateCaptureZone=function(){t.superclass._updateCaptureZone.call(this),this._buttonCaptureZone&&this._buttonCaptureZone.setDimensionsBasedOnElement(this._dCloseButton)},u._hide=function(){this._updateCaptureZone.abort(),t.superclass._hide.apply(this,arguments),this._buttonCaptureZone&&(this._buttonCaptureZone.destroy(),this._buttonCaptureZone=null)},u._setCloseButtonHover=function(e){this._dCloseButton.classed("hover",e)},u._handleConfirmation=function(e){this._ignoreDealResult||(this._setIcon(!1),this._setDealConfirmation(e),this.showConfirmation())},u._handleRejection=function(e){this._ignoreDealResult||(this._setIcon(!0),this._setDealConfirmation(e),this.showConfirmation())},u._handleInvalid=function(e){this._ignoreValidation||(this._setIcon(!0),this._setDealConfirmation(e),this.showConfirmation())},u.withIgnoreDealResult=s.setter("_ignoreDealResult"),u._handleIgnoreValidation=s.setter("_ignoreValidation"),u.showConfirmation=function(){this._eventBus.publish("messagebox/dismiss/validation"),this._show(!0)},u.destroy=function(){this._updateCaptureZone.abort(),t.superclass.destroy.call(this)},u._setDealConfirmation=function(e){this._dTextContainer.classed("dealInfo",!0),this._dTextContainer.selectAll("*").remove(),e.data.forEach(this._addDealInfoElementForField,this)},u._addDealInfoElementForField=function(e){var t=e.key,n=e.value,i=this._dTextContainer.append("span").classed("dealInfoItem",!0);t&&i.append("span").classed("dealInfoLabel",!0).text(t),i.append("span").classed("dealInfoLabelValue",!0).text(n)},u._setIcon=function(e){var t=this.dContainer.select(".icon");this.dContainer.classed("error",e),this.dContainer.classed("ok",!e),t.classed("iconError",e),t.classed("iconOK",!e)},Object.seal(u),Object.seal(t)})),define("module/core/js/view/frameview",["require","module/core/js/util/class","module/core/js/util/object","module/core/js/view/subview","module/core/js/util/svg"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/util/class"),i=e("module/core/js/util/object"),o=e("module/core/js/view/subview"),r=e("module/core/js/util/svg");n.extend(t,o),t.BORDER_WIDTH=1;var s=t.prototype;return s.positions=i.recursiveFreeze([{name:"body",clipPathNeeded:!1},{name:"southWest",clipPathNeeded:!1}]),s._spanFullChart=!1,s.withProperties=function(e){return this._spanFullChart=e.spanFullChart,this},s.initDom=function(){var e=t.superclass.initDom.call(this);return this.dContainer.append("svg:rect").classed("outerBorder",!0),e},s.destroyDom=function(){return this.dContainer.select(".outerBorder").remove(),t.superclass.destroyDom.call(this)},s.updateDimensions=function(e,n,i,o){return this._getPositionDomContainer("southWest").attr("transform",r.svgTranslateAttrY(e.height)),this.dContainer.select(".outerBorder").attr(this._spanFullChart?{x:0,y:0,width:i-t.BORDER_WIDTH,height:o-t.BORDER_WIDTH}:{x:e.x,y:e.y+e.topOffset,width:e.width-t.BORDER_WIDTH,height:e.height-t.BORDER_WIDTH}),t.superclass.updateDimensions.call(this,e,n,i,o)},Object.seal(s),Object.seal(t)})),define("module/core/js/view/renderer/offchartspacerenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/model/instrumentmodelevents","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/model/instrumentmodelevents"),s=e("module/core/js/view/visiblewindow");o.extend(t,n);var a=t.prototype;return a._leftSpace=null,a._rightSpace=null,a.startRedrawingBasedOnChangesInVisibleWindow=function(){this._visibleWindow.on(s.MOVED,this._handleVisibleWindowMoved,this),this._instrumentModel.on(r.END_DATE_CHANGED,this.renderOnFrameEnd,this)},a.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._visibleWindow.un(null,this),this._instrumentModel.un(null,this)},a._handleVisibleWindowMoved=function(e,t){t&i.RESIZED&&this._updateHeight(),e&i.MOVED&&this.renderOnFrameEnd()},a.initDom=function(){return this._leftSpace=this.dContainer.append("svg:rect").attr("x",0).attr("y",0).attr("class","left space"),this._rightSpace=this.dContainer.append("svg:rect").attr("y",0).attr("class","right space"),this},a.render=function(){this._drawRightSpaceRect(),this._drawLeftSpaceRect()},a._drawRightSpaceRect=function(){var e=this._visibleWindow.visibleDateRange.getIdealTimelineAccEnd(),t=this._visibleWindow.visibleDateRange.accTimeToPixel(e),n=this._visibleWindow.visibleDateRange.distanceOverRightBound();this._rightSpace.attr("x",t).attr("width",Math.max(n,0))},a._drawLeftSpaceRect=function(){var e=this._visibleWindow.visibleDateRange.distanceOverLeftBound();this._leftSpace.attr("width",Math.max(e,0))},a._updateHeight=function(){var e=this._visibleWindow.height();this._leftSpace.attr("height",e),this._rightSpace.attr("height",e)},Object.seal(a),t})),define("module/core/js/view/underlayview",["require","module/core/js/util/class","module/core/js/view/frameview","module/core/js/util/functional","module/core/js/util/object","module/core/js/view/subview","module/core/js/util/svg"],(function(e){"use strict";function t(){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/frameview"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/object"),s=e("module/core/js/view/subview"),a=e("module/core/js/util/svg"),l=o.plucker;n.extend(t,s);var u=t.prototype;return u.positions=r.recursiveFreeze([{name:"title",clipPathNeeded:!1},{name:"body",clipPathNeeded:!1},{name:"xAxis",clipPathNeeded:!1}]),u.initDom=function(){return t.superclass.initDom.apply(this,arguments),this.dContainer.insert("svg:g",":first-child").attr("class","backgroundContainer"),this.dContainer.insert("svg:g").attr("class","marginContainer"),this.dContainer.node().appendChild(this.dContainer.select(".title.position").node()),this},u.destroyDom=function(){return t.superclass.destroyDom.apply(this,arguments),this.dContainer.select(".backgroundContainer").remove(),this.dContainer.select(".marginContainer").remove(),this},u.topMargin=function(){return this._calculateHeightForPosition("title")},u.bottomMargin=function(){return this._calculateHeightForPosition("xAxis")},u._calculateHeightForPosition=function(e){var t,n,i,o=0;for(t in this._renderers)for(n=this._renderers[t],i=0;i<n.length;i++)n[i].position===e&&n[i].heightRequired&&(o=Math.max(o,n[i].heightRequired()));return o},u.updateDimensions=function(e,n,i,o){t.superclass.updateDimensions.apply(this,arguments);var r=n.filter(l("isRelative")),u=this.dContainer.select(".backgroundContainer"),c=this.dContainer.select(".marginContainer"),d=this._calculateMarginDimensions(r,e.x,e.width);u.selectAll(".backgroundArea").remove(),u.selectAll().data(r).enter().append("svg:rect").attr("class",(function(e){return"backgroundArea "+e.name})).attr("x",l("x")).attr("y",l("y")).attr("height",l("height")).attr("width",l("width")),c.selectAll(".marginArea").remove(),c.selectAll().data(d).enter().append("svg:rect").attr("class","marginArea").attr(s._applyDimensions),this._getPositionDomContainer("titleEast").attr("transform",a.svgTranslateAttrX(e.width)).attr("text-anchor","end"),this._getPositionDomContainer("xAxis").attr("transform",a.svgTranslateAttrY(e.height+this._calculateHeightForPosition("title")))},u._calculateMarginDimensions=function(e,t,n){var o,r,s=0,a=[],l=i.BORDER_WIDTH/2;for(t-=l,n+=i.BORDER_WIDTH,o=0;o<e.length;o++)r=e[o].y-s-l,r>0&&(0===s?(s-=l,r+=l):(s+=l,r-=l),a.push({x:t,y:s,width:n,height:r})),s=e[o].y+e[o].height;return a},Object.seal(u),t})),define("module/core/js/view/renderer/xticksstickyhelper",["require","module/core/js/ext/d3","moment","module/core/js/util/functional","module/core/js/i18n","module/core/js/util/object","module/core/js/util/svg"],(function(e){"use strict";function t(e,t,n){this._dContainer=t.append("svg:g").classed(l,!0),this._dContainer.append("svg:text"),this._userTimeZone=e,this._tickType=n}var n=e("module/core/js/ext/d3"),i=e("moment"),o=e("module/core/js/util/functional"),r=e("module/core/js/i18n"),s=e("module/core/js/util/object"),a=e("module/core/js/util/svg"),l="sticky tick hidden",u=t.prototype;return u._background=!1,u.withBackground=o.setter("_background"),u._tickType=null,u._dContainer=null,u._lastAccTime=null,u._backgroundHeight=0,u.withBackgroundHeight=o.setter("_backgroundHeight"),u.withTextAttributes=function(e){var t=s.merge({},e,{x:6});return this._dContainer.select("text").attr(t),this},u._transformFunction=o.returns(a.svgTranslateAttrX(0)),u.withTransformFunction=function(e,t){return this._transformFunction=function(){return a.svgTranslateAttrX(t(-e(0))-1)},this},u.renderTicks=function(e){var t=this._selectTickToSticky(e);t&&t.accTime!==this._lastAccTime?(this._lastAccTime=t.accTime,this._renderLabel(t),this._background&&this._renderBackground(),this.replotHorizontally()):t||null===this._lastAccTime||(this._lastAccTime=null,this._hideLabel())},
u._selectTickToSticky=function(e){for(var t=null,n=0;e[n]&&1===e[n].isEdge;)t=e[n],n++;return t},u._renderLabel=function(e){var t=r.get(this._tickType+"-tick-date-format-"+e.unit),n=i(e.date).tz(this._userTimeZone).format(t);this._dContainer.select("text").text(n),this._dContainer.attr("class","sticky tick")},u._renderBackground=function(){var e=this._dContainer.select("text").node(),t=this._getLabelWidth(),i=n.select(document.createElementNS("http://www.w3.org/2000/svg","rect")).classed("background",!0).attr("x",0).attr("y",1).attr("width",t).attr("height",this._backgroundHeight).node();this._dContainer.select("rect").remove(),e.parentNode.insertBefore(i,e)},u._hideLabel=function(){this._dContainer.attr("class",l)},u.updateBackgrounds=function(){this._dContainer.select(".background").attr("width",this._getLabelWidth())},u._getLabelWidth=function(){return this._dContainer.select("text").node().getBBox().width+12},u.replotHorizontally=function(){this._dContainer.attr("transform",this._transformFunction)},Object.seal(u),Object.seal(t)})),define("module/core/js/view/renderer/xticksrenderer",["require","module/core/js/view/renderer/abstractprojectedrenderer","module/core/js/util/array","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/dateutils","module/core/js/util/functional","module/core/js/model/instrumentresolutionevents","module/core/js/util/object","module/core/js/model/resolutionsenum","module/core/js/util/svg","module/core/js/util/timeconstants","module/core/js/view/projection/ordinals/timeoffsetprojection","module/core/js/util/timeticks","module/core/js/view/visiblewindow","module/core/js/view/projection/xonlyprojection","module/core/js/view/renderer/xticksrendererhelper","module/core/js/view/renderer/xticksstickyhelper"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/view/renderer/abstractprojectedrenderer"),i=e("module/core/js/util/array"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/util/class"),s=e("module/core/js/util/dateutils"),a=e("module/core/js/util/functional"),l=e("module/core/js/model/instrumentresolutionevents"),u=e("module/core/js/util/object"),c=e("module/core/js/model/resolutionsenum"),d=e("module/core/js/util/svg"),h=e("module/core/js/util/timeconstants"),p=e("module/core/js/view/projection/ordinals/timeoffsetprojection"),m=e("module/core/js/util/timeticks"),f=e("module/core/js/view/visiblewindow"),_=e("module/core/js/view/projection/xonlyprojection"),g=e("module/core/js/view/renderer/xticksrendererhelper"),v=e("module/core/js/view/renderer/xticksstickyhelper"),y=Object.freeze({class:"label",dy:"1.18em",y:0});r.extend(t,n),t.MIN_TICK_WIDTH=80,t.isTickVisible=function(e){return!(e.isColliding||this.isEdge)};var M=t.prototype;return M._userTimeZone=null,M._stickyRenderer=null,M._majorTicksRenderer=null,M._minorTicksRenderer=null,M._minorTickIter=null,M._majorTickIter=null,M._majorTicks=null,M._minorTicks=null,M._requiredHeight=18,M.withRequiredHeight=a.setter("_requiredHeight"),M._textAttributes=y,M.withTextAttributes=function(e){return this._textAttributes=u.merge(y,e),this},M._axisHeight=18,M.withAxisHeight=a.setter("_axisHeight"),M._axisVerticalPadding=1,M.withAxisVerticalPadding=a.setter("_axisVerticalPadding"),M._showLabels=!0,M.withShowLabels=a.setter("_showLabels"),M._showTicks=!0,M.withShowTicks=a.setter("_showTicks"),M._stickyLabels=!1,M.withStickyLabels=a.setter("_stickyLabels"),M._labelBackgrounds=!1,M.withLabelBackgrounds=a.setter("_labelBackgrounds"),M._marginRight=0,M.withMarginRight=a.setter("_marginRight"),M._createProjection=function(){return new _(new p)},M.heightRequired=function(){return this._requiredHeight},M.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._instrumentResolution=this._instrumentModel.getActiveInstrumentResolution(),this._instrumentResolution.info?this._handleInstrumentResolutionInfoLoaded(this._instrumentResolution.info):this._instrumentResolution.on(l.INFO_LOADED,this._handleInstrumentResolutionInfoLoaded,this,{once:!0}),this._visibleWindow.on(f.MOVED,this._handleVisibleWindowMoved,this)},M.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._instrumentResolution.un(null,this),this._subView.getChartView().un(null,this),t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this)},M._handleInstrumentResolutionInfoLoaded=function(e){this._userTimeZone=e.getUserTimeZone(),this._createTickRenderers(),this._instrumentModel.getTimeline().hasIntervals()&&(this._setIterators(),this.renderOnFrameEnd())},M._createTickRenderers=function(){var e=this._getForwardsProjectionInX();this._labelBackgrounds&&(this._background=this.dContainer.append("rect").classed("xAxisBackground",!0).attr("height",this._axisHeight)),this._minorTicksRenderer=new g(this._userTimeZone,this.dContainer,"minor").withTransformFunction(this._projection.inX.roundValue,e).withTextAttributes(this._textAttributes).withShowLabels(this._showLabels).withShowTicks(this._showTicks),this._stickyLabels&&(this._stickyRenderer=new v(this._userTimeZone,this.dContainer,"major").withTransformFunction(this._visibleWindow.getXScale(),this._projection.inX.roundValue).withBackground(this._labelBackgrounds).withBackgroundHeight(this._axisHeight-2*this._axisVerticalPadding).withTextAttributes(this._textAttributes)),this._majorTicksRenderer=new g(this._userTimeZone,this.dContainer,"major").withTransformFunction(this._projection.inX.roundValue,e).withBackgrounds(this._labelBackgrounds).withBackgroundHeight(this._axisHeight-2*this._axisVerticalPadding).withTextAttributes(this._textAttributes).withShowLabels(this._showLabels).withShowTicks(this._showTicks)},M._handleVisibleWindowMoved=function(e,t){this._majorTicksRenderer&&this._minorTicksRenderer&&(this._stickyLabels&&e&&this._stickyRenderer.replotHorizontally(),e&(o.RESIZED|o.ZOOMED)&&(this._setIterators(),this._replotHorizontally()),e&&this._instrumentModel.getTimeline().hasIntervals()&&this.renderOnFrameEnd(),t&o.RESIZED&&this._replotVertically())},M._setIterators=function(){var e=this._visibleWindow.visibleDateRange.approxTimeDensity(),n=t.MIN_TICK_WIDTH,i=this._instrumentModel.getActiveResolution().period,o=m.getTickIterator(m.RANGE_TICK_TYPE,e,n,i,this._userTimeZone),r=m.getTickIterator(m.INDIVIDUAL_TICK_TYPE,e,n,i,this._userTimeZone);r!==this._minorTickIter&&(this._minorTickIter=r),o!==this._majorTickIter&&(this._majorTickIter=o)},M._getDateRange=function(){var e=this._instrumentModel.getTimeline();return[s.laterOf(this._visibleWindow.visibleDateRange.startDate(),e.startDate()),s.earlierOf(this._visibleWindow.visibleDateRange.endDate(),e.endDate())]},M._initTicksForDateRange=function(e){var t=this._majorTickIter.period<=h.Periods.DAY&&this._instrumentResolution.resolution!==c.values.TICK,n=this._instrumentModel.getTimeline(),i=m.extendDateRangeForOffscreenTicks(e,this._majorTickIter),o=m.getInstanceTicks(e,this._minorTickIter,n,!1,.2*this._minorTickIter.period,"minor"),r=m.getInstanceTicks(i,this._majorTickIter,n,t,0*this._majorTickIter.period,"major");this._majorTicks=r,this._minorTicks=this._filterClashingTicks(r,o)},M._filterClashingTicks=function(e,t){var n,o=e.map(a.plucker("accTime")),r=[];for(n=0;n<t.length;n++)i.contains(o,t[n].accTime)||r.push(t[n]);return r},M._markEdgeTicks=function(e,t){var n,i=this._visibleWindow.visibleDateRange,o=this._instrumentModel.getTimeline(),r=Math.min(i.accEnd(),o.accEnd()),s=i.pixelsToAccDuration(t/2);for(this._marginRight&&(r-=i.pixelsToAccDuration(this._marginRight)),n=0;n<e.length;n++)e[n].accTime-s<=i.accStart()?e[n].isEdge=1:e[n].accTime+s>=r&&(e[n].isEdge=2)},M._markCollidingOpenTicks=function(e,n){var o,r=this._visibleWindow.visibleDateRange.pixelsToAccDuration(n),s=i.firstOf(e),a=i.lastOf(e);for(o=0;o<e.length;o++)e[o].type===m.OPEN_TICK_TYPE&&(e[o]!==s&&t.isTickVisible(e[o-1])&&e[o].accTime-e[o-1].accTime<r&&(e[o].isColliding=!0),e[o]!==a&&t.isTickVisible(e[o+1])&&e[o+1].accTime-e[o].accTime<r&&(e[o].isColliding=!0))},M._markHiddenTicks=function(e,n,i){var o,r,s,a,l,u=this._visibleWindow.visibleDateRange,c=u.accStart(),d=u.pixelsToAccTime(i)-c;for(r=0;r<e.length;r++){for(a=e[r],o=0;o<n.length;o++)if(t.isTickVisible(n[o])&&!a.isColliding&&(s=Math.abs(n[o].accTime-a.accTime))<d){a.isColliding=!0;break}r<e.length-1&&!a.isColliding&&(l=e[r+1],s=Math.abs(l.accTime-a.accTime),l.isColliding=s<d)}},M._hideCollidingMinorTicks=function(){this._markHiddenTicks(this._minorTicks,this._majorTicks,80)},M.render=function(){var e;this._labelBackgrounds&&(e=window.getComputedStyle(this._background.node()).strokeWidth||"0",e=parseFloat(e.replace(/\D+$/,"")),this._background.attr("width",this._visibleWindow.width()+e+"px").attr("transform",d.svgTranslateAttrX(this._projection.inX.roundValue(-this._visibleWindow.getXScale()(0))-this._axisVerticalPadding))),this._initTicksForDateRange(this._getDateRange()),this._renderMinorTicks(),this._renderMajorTicks(),this._hideCollidingMinorTicks(),this._stickyLabels&&this._stickyRenderer.renderTicks(this._majorTicks),this._minorTicksRenderer.hideMarkedTicks(),this._majorTicksRenderer.hideMarkedTicks()},M._renderMinorTicks=function(){this._minorTicksRenderer.renderTicks(this._minorTicks,this._visibleWindow.height()),this._minorTicks.length&&this._markEdgeTicks(this._minorTicks,60)},M._renderMajorTicks=function(){this._majorTicksRenderer.renderTicks(this._majorTicks,this._visibleWindow.height()),this._majorTicks.length&&(this._markEdgeTicks(this._majorTicks,100),this._markCollidingOpenTicks(this._majorTicks,100))},M._replotHorizontally=function(){this._majorTicksRenderer.replotHorizontally(),this._minorTicksRenderer.replotHorizontally()},M._replotVertically=function(){var e=this._visibleWindow.height();this._majorTicksRenderer.replotVertically(e),this._minorTicksRenderer.replotVertically(e)},M._replot=a.empty,Object.seal(M),Object.seal(t)})),define("module/core/js/view/model/yaxispresentationcontroller",["require","module/core/js/view/abstractpresentationcontroller","module/core/js/util/class","module/core/js/util/numberpairs"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/core/js/view/abstractpresentationcontroller"),i=e("module/core/js/util/class"),o=e("module/core/js/util/numberpairs");i.extend(t,n);var r=t.prototype;return r._lastDelta=null,r.dragAxisStart=function(e){this._lastDelta=e.deltaY},r.dragAxis=function(e){var t=e.startY>o.midPoint(this._visibleWindow.y.range())?-1:1,n=(e.deltaY-this._lastDelta)*t;this._lastDelta=e.deltaY,this._eventBus.publish("chart/zoom/drag/vertical",[n])},Object.seal(r),Object.seal(t)})),define("module/subviews/js/config/subviewsconfig",["require","module/core/js/view/absolutehtmloverlayview","module/core/js/view/model/commonuipresentationcontroller","module/core/js/view/model/commonuipresentationmodel","module/core/js/view/model/commonuiproperties","module/core/js/view/renderer/confirmationboxrenderer","module/core/js/view/yfitter/followdatafitter","module/core/js/view/frameview","module/core/js/view/htmloverlayview","module/core/js/view/renderer/i18nrenderer","module/core/js/view/renderer/offchartspacerenderer","module/core/js/view/studyview","module/core/js/view/studyviewconstants","module/core/js/view/underlayview","module/core/js/view/xaxisview","module/core/js/view/renderer/xticksrenderer","module/core/js/view/renderer/yaxisrenderer","module/core/js/view/model/yaxispresentationcontroller","module/core/js/view/renderer/yticksrenderer"],(function(e){"use strict";var t=e("module/core/js/view/absolutehtmloverlayview"),n=e("module/core/js/view/model/commonuipresentationcontroller"),i=e("module/core/js/view/model/commonuipresentationmodel"),o=e("module/core/js/view/model/commonuiproperties"),r=e("module/core/js/view/renderer/confirmationboxrenderer"),s=e("module/core/js/view/yfitter/followdatafitter"),a=e("module/core/js/view/frameview"),l=e("module/core/js/view/htmloverlayview"),u=e("module/core/js/view/renderer/i18nrenderer"),c=e("module/core/js/view/renderer/offchartspacerenderer"),d=e("module/core/js/view/studyview"),h=e("module/core/js/view/studyviewconstants"),p=e("module/core/js/view/underlayview"),m=e("module/core/js/view/xaxisview"),f=e("module/core/js/view/renderer/xticksrenderer"),_=e("module/core/js/view/renderer/yaxisrenderer"),g=e("module/core/js/view/model/yaxispresentationcontroller"),v=e("module/core/js/view/renderer/yticksrenderer"),y={type:n,presentationModel:{type:i,properties:o}};return{absoluteoverlay:{type:t,relativeWeighting:-900,isPersistent:!0,presentationControllers:{commonUi:y}},htmloverlay:{type:l,relativeWeighting:-1e3,isPersistent:!0,presentationControllers:{commonUi:y},renderers:{confirmationBox:{type:r,group:"body",presentationController:"commonUi",properties:{relativeWeighting:1}}}},frame:{type:a,relativeWeighting:999,isPersistent:!0,properties:{spanFullChart:!0},renderers:{indicativeLabel:{type:u,group:"body",position:"southWest",properties:{textKey:"dataIsIndicative-label",showBackground:!1,marginBottom:5,marginLeft:5}}}},underlay:{type:p,relativeWeighting:-999,isPersistent:!0,renderers:{offChart:{type:c,group:"body"},xTicks:{type:f,group:"xAxis",position:"xAxis",properties:{marginRight:-80,stickyLabels:!1,labelBackgrounds:!1,showLabels:!1,showTicks:!0}}}},xaxis:{type:m,relativeWeighting:-999,isPersistent:!0,renderers:{xTicks:{type:f,group:"xAxis",position:"xAxis",properties:{marginRight:-80,stickyLabels:!0,labelBackgrounds:!0,showLabels:!0,showTicks:!1}}}},prices:{type:d,relativeSize:1,relativeWeighting:0,minHeight:h.DEFAULT_PRICES_MIN_HEIGHT,instrumentScaling:!0,isPersistent:!0,yFitter:{type:s},zoom:!0,presentationControllers:{commonUi:y,yAxisPresentationController:{type:g,presentationModel:{type:i}}},renderers:{yTicks:{type:v,group:"yTicks",position:"yTicks"},yAxis:{type:_,group:"yAxis",position:"yAxis",presentationController:"yAxisPresentationController",properties:{draggingEnabled:!0}}}}}})),define("module/subviews/js/subviews",["require","module/subviews/js/config/subviewsconfig"],(function(e){"use strict";function t(e,t){this._eventBus=e,this._options=t||{}}var n=e("module/subviews/js/config/subviewsconfig"),i=t.prototype;return i._eventBus=null,i._options=null,i.init=function(){this._eventBus.publish("subViews/config",["subViews",this._options.config||n])},i.destroy=function(){this._eventBus=null},Object.seal(i),Object.seal(t)})),define("module/tooltip-common/js/enum/tooltipevents",[],(function(){"use strict";var e={};return e.MOVED="MOVED",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e.UPDATE_POSITION="UPDATE_POSITION",e.READY_TO_RENDER="READY_TO_RENDER",e.VISIBILITY_CHANGED="VISIBILITY_CHANGED",e.REQUEST_ENABLE="REQUEST_ENABLE",e.REQUEST_DISABLE="REQUEST_DISABLE",e.SCHOOLED="SCHOOLED",Object.freeze(e)})),define("module/tooltip-desktop/js/view/renderer/crosshairhorizontalmarkerrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/core/js/view/component/svg/line","module/tooltip-common/js/enum/tooltipevents","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/view/component/svg/line"),r=e("module/tooltip-common/js/enum/tooltipevents"),s=e("module/core/js/view/visiblewindow");i.extend(t,n);var a=t.prototype;return a._horizontalMarker=null,a.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(r.MOVED,this.renderOnFrameEnd,this),this._presentationModel.on(r.VISIBILITY_CHANGED,this._updateVisibility,this),this._visibleWindow.on(s.MOVED,this._handleVisibleWindowMoved,this)},a.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._horizontalMarker&&(this._horizontalMarker.destroy(),this._horizontalMarker=null),this._presentationModel.un(null,this),this._visibleWindow.un(null,this)},a.initDom=function(){return this.dContainer.classed("crosshair",!0),this},a.render=function(){var e=this._presentationModel.getYLevelInStudyView(this._subView.dimensions),t=this._getDataForPosition(e),n=this.dContainer.selectAll("g.horizontalMarkerContainer").data(t);this._createHorizontalMarker(n.enter()),this._removeHorizontalMarker(n.exit()),n.call(this._updateHorizontalMarker.bind(this))},a._createHorizontalMarker=function(e){e.empty()||(this._horizontalMarker=o.create(e.append("g").classed("horizontalMarkerContainer",!0),this._captureZoneManager),this._horizontalMarker.classed("horizontalMarker",!0))},a._updateHorizontalMarker=function(){var e=this._presentationModel.getYLevelInStudyView(this._subView.dimensions);this._horizontalMarker&&this._horizontalMarker.setLineCoordinates({x1:0,y1:e,x2:this._subView.dimensions.width,y2:e})},a._removeHorizontalMarker=function(e){e.empty()||(this._horizontalMarker.destroy(),this._horizontalMarker=null,e.remove())},a._handleVisibleWindowMoved=function(e,t){t&&this.renderOnFrameEnd()},a._getDataForPosition=function(e){return e?[e]:[]},a._updateVisibility=function(e){this.dContainer.classed("hidden",!e)},Object.seal(a),Object.seal(t)})),define("module/tooltip-desktop/js/view/renderer/crosshairxaxisbadgerenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/core/js/util/svg","module/tooltip-common/js/enum/tooltipevents"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/util/svg"),r=e("module/tooltip-common/js/enum/tooltipevents");i.extend(t,n);var s=t.prototype;return s._badgeAccTime=null,s.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(r.MOVED,this.renderOnFrameEnd,this),this._presentationModel.on(r.VISIBILITY_CHANGED,this._updateVisibility,this)},s.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this)},s.initDom=function(){return this.dContainer.classed("crosshair",!0),this},s.render=function(){var e=this._presentationModel.getAccTime(),t=!!e;!this._dBadge&&t?(this._dBadge=this._createDateBadge(),this._updateDateBadgePosition(this._dBadge)):this._dBadge&&t&&this._updateDateBadgePosition(this._dBadge),this._badgeAccTime=e},s._createDateBadge=function(){var e=this.dContainer.append("g").classed("currentCrosshairDateContainer",!0);return e.append("rect").classed("currentCrosshairDateBadge",!0),e.append("text").classed("currentCrosshairDateText",!0),e},s._updateDateBadgePosition=function(e){var t,n=this._visibleWindow.getXScale(),i=n(this._presentationModel.getAccTime());this._badgeAccTime===this._presentationModel.getAccTime()?e.attr("transform",o.svgTranslateAttrX(i)):(t=this._presentationModel.getDateBadgeDimensions(),i=Math.max(i,t.width/2),i=Math.min(i,n.range()[1]-t.width/2),e.attr("transform",o.svgTranslateAttrX(i)),e.select("rect.currentCrosshairDateBadge").attr(t),e.select("text.currentCrosshairDateText").text(this._presentationModel.getTooltipDate()).attr(this._presentationModel.getDateTextPosition()))},s._updateVisibility=function(e){this.dContainer.classed("hidden",!e)},Object.seal(s),Object.seal(t)})),define("module/tooltip-desktop/js/view/renderer/crosshairyaxisbadgerenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/core/js/view/pricerendererhelper","module/core/js/util/svg","module/tooltip-common/js/enum/tooltipevents"],(function(e){"use strict";function t(e,n,i,r){t.superclass.constructor.call(this,e,n,i,r),this._priceRendererHelper=new o,this._priceRendererHelper.withDecimalPlaces(0)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/view/pricerendererhelper"),r=e("module/core/js/util/svg"),s=e("module/tooltip-common/js/enum/tooltipevents");i.extend(t,n);var a=t.prototype;return a._priceRendererHelper=null,a.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(s.MOVED,this.renderOnFrameEnd,this),this._presentationModel.on(s.VISIBILITY_CHANGED,this._updateVisibility,this),this._subView.instrumentScaling&&this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfoLoaded,this,{once:!0})},a.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._eventBus.unsubscribeAll(this)},a.initDom=function(){return this.dContainer.classed("crosshair",!0),this},a.render=function(){var e=this._presentationModel.getYLevelInStudyView(this._subView.dimensions),t=this._getDataForPosition(e),n=this.dContainer.selectAll("g.currentCrosshairLevelContainer").data(t);this._createLevelBadge(n.enter()),n.exit().remove(),n.call(this._updateLevelBadgePosition.bind(this))},a._createLevelBadge=function(e){var t=e.append("g").classed("currentCrosshairLevelContainer",!0),n=this._presentationModel.getLevelBadgeDimensions();t.append("rect").classed("currentCrosshairLevelBadge",!0).attr(n),t.append("g").classed("currentTooltipLevelText",!0)},a._updateLevelBadgePosition=function(e){var t=this._presentationModel.getYLevelInStudyView(this._subView.dimensions),n=this._presentationModel.getBadgePositionInStudyView(this._subView.dimensions),i=this._visibleWindow.y.invert(t);this._priceRendererHelper.updateSuffix(this._visibleWindow.leastValueShown(),this._visibleWindow.greatestValueShown()),e.attr("transform",r.svgTranslateAttrY(n)),this._priceRendererHelper.render(e.select("g.currentTooltipLevelText").node(),i)},a._handleInstrumentInfoLoaded=function(e){this._priceRendererHelper.withScalingFactor(e.scalingFactor).withDecimalPlaces(e.decimalPlaces)},a._updateVisibility=function(e){this.dContainer.classed("hidden",!e)},a._getDataForPosition=function(e){return this._visibleWindow.isReadyForRender()&&e?[e]:[]},Object.seal(a),Object.seal(t)})),define("module/tooltip-desktop/js/view/renderer/crosshairverticalmarkerrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/model/deviceinfo","module/core/js/view/userinput/eventpropagation","module/core/js/view/userinput/hovergesturerecogniser","module/core/js/view/component/svg/line","module/core/js/view/userinput/rectanglecapturezone","module/tooltip-common/js/enum/tooltipevents","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/model/visibledaterangeevents","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/model/deviceinfo"),s=e("module/core/js/view/userinput/eventpropagation"),a=e("module/core/js/view/userinput/hovergesturerecogniser"),l=e("module/core/js/view/component/svg/line"),u=e("module/core/js/view/userinput/rectanglecapturezone"),c=e("module/tooltip-common/js/enum/tooltipevents"),d=e("module/core/js/view/userinput/tapgesturerecogniser"),h=e("module/core/js/model/visibledaterangeevents"),p=e("module/core/js/enum/zindexenum"),m=i.ZOOMED|i.RESIZED;o.extend(t,n);var f=t.prototype;return f._captureZone=null,f._recogniserForShown=null,f._verticalMarker=null,f._lastHoveredCoordinates=null,f.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._presentationModel.on(c.MOVED,this.render,this),this._presentationModel.on(c.VISIBILITY_CHANGED,this._updateVisibility,this),this._presentationModel.on(h.MOVED,this._moveToLastHoveredCoordinates,this),this._eventBus.subscribe("chart/view/visibleWindow/moved/*",this._handleVisibleWindowMoved,this),this._captureZone=this._captureZoneManager.createZone(u,s.PROPAGATE_ALL,p.MAX),this._recogniserForShown=r.isMobile()?this._createTapRecogniser():this._createHoverRecogniser(),this._captureZone.addGestureRecogniser(this._recogniserForShown),this._visibleWindow.visibleDateRange.isXAxisReady()?this._updateCaptureZone():this._visibleWindow.visibleDateRange.on(h.X_AXIS_READY,this._updateCaptureZone,this,{once:!0})},f._createHoverRecogniser=function(){return a.create().withStartHandler(this._presentationController.onHoverIn,this._presentationController).withHandler(this._onPointerMove,this).withEndHandler(this._presentationController.onHoverOut,this._presentationController)},f._createTapRecogniser=function(){return d.create().withHandler(this._onTap,this)},f.stopRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this),this._captureZone.removeGestureRecogniser(this._recogniserForShown),this._eventBus.unsubscribeAll(this),this._verticalMarker&&(this._verticalMarker.destroy(),this._verticalMarker=null),this._recogniserForShown&&(this._recogniserForShown.destroy(),this._recogniserForShown=null),this._captureZone&&(this._captureZone.destroy(),this._captureZone=null),this._presentationModel.un(null,this)},f.initDom=function(){return this.dContainer.classed("crosshair",!0),this},f.render=function(){var e=this._presentationModel.getAccTime();!this._verticalMarker&&e?(this._verticalMarker=this._createVerticalMarker(),this._updateVerticalMarker()):this._verticalMarker&&e&&this._updateVerticalMarker()},f._createVerticalMarker=function(){var e=this.dContainer.append("g").classed("verticalMarkerContainer",!0);return l.create(e,this._captureZoneManager).classed("verticalMarker",!0)},f._handleVisibleWindowMoved=function(e,t){this._verticalMarker&&this._updateVerticalMarker(),(e&m||t&m)&&this._updateCaptureZone()},f._updateVerticalMarker=function(){var e=this._visibleWindow.getXScale()(this._presentationModel.getAccTime());this._verticalMarker.setLineCoordinates({x1:e,y1:0,x2:e,y2:-this._subView.dimensions.height})},f._updateCaptureZone=function(){var e=this._subView.getChartView().getHtmlOverlay();this._captureZone.setDimensionsBasedOnElement(e)},f._onPointerMove=function(e){this._lastHoveredCoordinates={x:e.x,y:e.y},this._presentationController.moveTo({x:e.x,y:e.y})},f._onTap=function(e){this._presentationController.moveTo({x:e.x,y:e.y})},f._moveToLastHoveredCoordinates=function(){this._lastHoveredCoordinates&&this._presentationController.moveTo(this._lastHoveredCoordinates)},f._updateVisibility=function(e){this.dContainer.classed("hidden",!e)},Object.seal(f),Object.seal(t)})),define("module/tooltip-common/js/view/tooltippresenter",["require","module/core/js/view/abstractpresentationcontroller","module/core/js/util/array","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/math","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/core/js/view/abstractpresentationcontroller"),i=e("module/core/js/util/array"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/util/class"),s=e("module/core/js/util/math"),a=e("module/core/js/view/visiblewindow");r.extend(t,n),t.create=function(e){return new t(e)};var l=t.prototype;return l._visibleWindow=null,l._instrumentModelCollection=null,l._tooltipModel=null,l.startListening=function(e,t){var n=this._moduleLoader.getModule("tooltip");return this._instrumentModelCollection=t,this._visibleWindow=e,this._tooltipModel=n.getTooltipModel(),this._presentationModel.setYAxisWidth(n.getYAxisWidth()),this._eventBus.subscribe("module/toggle/*",this._updateFeatureToggles,this),this._eventBus.subscribe("chart/instrument/info",this._handleInstrumentInfo,this),this._eventBus.subscribe("chart/resolution/info",this._handleInstrumentResolutionInfoLoaded,this),this._presentationModel.startListening(this._tooltipModel,e.visibleDateRange,t,this._containerProvider),this._visibleWindow.on(a.MOVED,this._handleVisibleWindowMoved,this),this._updateFeatureToggles(),this},l.stopListening=function(){this._presentationModel&&this._presentationModel.stopListening(),t.superclass.stopListening.call(this)},l.moveTo=function(e){if(this._isDataReady()){var t=this._visibleWindow.snapCoordinateToClosestPoint(e.x);s.isNumber(t)&&this._tooltipModel.setAccTime(t),this._tooltipModel.setLevel(e.y)}},l.showTooltip=function(){this._tooltipModel.setVisible(!0)},l.hideTooltip=function(){this._tooltipModel.setVisible(!1)},l._handleVisibleWindowMoved=function(e){e&o.INITIALISED&&this._presentationModel.notifyReadyToRender(),e&(o.RESIZED|o.INITIALISED)&&this._presentationModel.updatePosition()},l._handleInstrumentInfo=function(e){this._presentationModel.setDelayedMarket(e.isDelayed)},l._handleInstrumentResolutionInfoLoaded=function(e){this._presentationModel.setUserTimeZone(e.getUserTimeZone())},l._updateFeatureToggles=function(){var e=this._moduleLoader.getInitialisedModules();this._presentationModel.setDealingFromChartEnabled(i.contains(e,"dealingBuySellButtons"))},l._isDataReady=function(){return this._instrumentModelCollection.getTimeline().hasIntervals()},Object.seal(l),Object.seal(t)})),define("module/tooltip-desktop/js/view/desktoptooltippresenter",["require","module/core/js/util/class","module/tooltip-common/js/view/tooltippresenter"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}var n=e("module/core/js/util/class"),i=e("module/tooltip-common/js/view/tooltippresenter");n.extend(t,i),t.create=function(e){return new t(e)};var o=t.prototype;return o.onHoverIn=o.showTooltip,o.onHoverOut=o.hideTooltip,Object.seal(o),Object.seal(t)})),define("module/tooltip-common/js/view/renderer/headerrenderer",["require"],(function(e){"use strict";var t={};return t.render=function(e){e.append("th").attr("colspan",2)},t.update=function(e,t){e.select("th").html(t.getValue())},Object.seal(t)})),define("module/tooltip-common/js/view/renderer/labelvaluepairrenderer",["require","module/core/js/util/functional"],(function(e){"use strict";var t=e("module/core/js/util/functional"),n={};return n.render=function(e){e.append("td").classed("tooltipHeader",!0),e.append("td").classed("tooltipValue",!0)},n.update=function(e,n){e.classed("up","up"===n.getDirection()).classed("down","down"===n.getDirection()),e.select(".tooltipHeader").html(t.invoker("getLabel")),e.select(".tooltipValue").html(t.invoker("getValue"))},Object.seal(n)})),define("module/tooltip-common/js/view/tooltiprowtype",[],(function(){"use strict";var e={};return e.HEADER="HEADER",e.LABEL_VALUE_PAIR="LABEL_VALUE_PAIR",Object.freeze(e)})),define("module/tooltip-common/js/view/renderer/tooltiptexthelper",["require","module/core/js/ext/d3","module/tooltip-common/js/view/renderer/headerrenderer","module/tooltip-common/js/view/renderer/labelvaluepairrenderer","module/tooltip-common/js/view/tooltiprowtype"],(function(e){"use strict";var t=e("module/core/js/ext/d3"),n=e("module/tooltip-common/js/view/renderer/headerrenderer"),i=e("module/tooltip-common/js/view/renderer/labelvaluepairrenderer"),o=e("module/tooltip-common/js/view/tooltiprowtype"),r={};return r.renderRow=function(e){e.enter().append("tr").classed("tooltipRow",!0).each((function(e){var n=t.select(this).classed(e.getFormatClasses(),!0);r._getRenderer(e.getType()).render(n)})),e.exit().remove(),e.each((function(e){r._getRenderer(e.getType()).update(t.select(this),e)}))},r._getRenderer=function(e){switch(e){case o.HEADER:return n;case o.LABEL_VALUE_PAIR:return i;default:throw new Error("No type was provided for tooltip row.")}},Object.seal(r)})),define("module/tooltip-desktop/js/view/renderer/desktoptooltiptexthelper",["require","module/core/js/util/functional","module/tooltip-common/js/view/renderer/tooltiptexthelper"],(function(e){"use strict";function t(e,t,n,i){this._dContainer=e,this._tooltipViewModel=t,this._studyViewsScalingFactors=n,this._studyView=i,this._initDom()}var n=e("module/core/js/util/functional"),i=e("module/tooltip-common/js/view/renderer/tooltiptexthelper");t.create=function(e,n,i,o){return new t(e,n,i,o)};var o=t.prototype;return o._studyView=null,o._tooltipViewModel=null,
o._studyViewsScalingFactors=null,o._dContainer=null,o._dTableWrap=null,o._dTooltipBody=null,o.updatePosition=function(){this._isStudyViewTallEnough()&&this._dTooltipBody.style(this._tooltipViewModel.getTooltipPosition(this._dTooltipBody.node().getBoundingClientRect(),this._studyView.getStudyViewDimensions()))},o.render=function(e){return this._tooltipViewModel.getAccTime()?(this._isStudyViewTallEnough()?(this._show(),this._dTable.selectAll("tbody").data(e,n.invoker("getName")).call(this._renderSection.bind(this)).selectAll(".tooltipRow").data(n.invoker("getRowCollection"),n.invoker("getLabel")).call(i.renderRow),this.updatePosition()):this._dTooltipBody&&this._hide(),this):this},o.destroy=function(){this._dTooltipBody&&this._dTooltipBody.remove()},o._show=function(){this._dTooltipBody.classed("invisible",!1)},o._hide=function(){this._dTooltipBody.classed("invisible",!0)},o._isStudyViewTallEnough=function(){return!!this._dTableWrap&&("prices"===this._studyView.name||this._dTableWrap.node().getBoundingClientRect().height+16<this._studyView.dimensions.height)},o._initDom=function(){return this._dTooltipBody=this._dContainer.append("div").attr("class","tooltipBody"),this._dTableWrap=this._dTooltipBody.append("div").attr("class","tooltipTableWrap"),this._dTable=this._dTableWrap.append("table").attr("class","tooltipTable"),this},o._renderSection=function(e){e.enter().append("tbody").append("tr").classed("gap",!0),e.exit().remove(),e.order()},Object.seal(o),Object.seal(t)})),define("module/tooltip-desktop/js/view/renderer/desktoptooltiptextrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/core/js/util/functional","module/core/js/model/instrumentmodelevents","module/tooltip-desktop/js/view/renderer/desktoptooltiptexthelper","module/core/js/view/studyview","module/tooltip-common/js/enum/tooltipevents"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/model/instrumentmodelevents"),s=e("module/tooltip-desktop/js/view/renderer/desktoptooltiptexthelper"),a=e("module/core/js/view/studyview"),l=e("module/tooltip-common/js/enum/tooltipevents");i.extend(t,n);var u=t.prototype;return u._tooltipTextHelper=null,u._studyViewName=null,u.withStudyView=o.setter("_studyViewName"),u.startRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.subscribe("chart/view/visibleWindow/moved/*",this._handleVisibleWindowMoved,this),this._presentationModel.on(l.ENABLED,this._onTooltipEnabled,this),this._presentationModel.on(l.MOVED,this.renderOnFrameEnd,this),this._presentationModel.on(l.DISABLED,this.renderOnFrameEnd,this),this._presentationModel.on(l.READY_TO_RENDER,this.renderOnFrameEnd,this),this._presentationModel.on(l.VISIBILITY_CHANGED,this._updateVisibility,this)},u.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._eventBus.unsubscribeAll(this),this._instrumentModel.un(null,this),this._presentationModel.un(null,this)},u.render=function(){if(this._presentationModel.isVisible()){var e=this._getData();e.length>0?(this._tooltipTextHelper||this._createTooltip(),this._tooltipTextHelper.render(e)):this._tooltipTextHelper&&this._removeTooltip()}else this._tooltipTextHelper&&this._removeTooltip()},u.destroy=function(){this._tooltipTextHelper&&(this._tooltipTextHelper.destroy(),this._tooltipTextHelper=null),t.superclass.destroy.call(this)},u._onTooltipEnabled=function(){this._presentationController.showTooltip(),this.renderOnFrameEnd()},u._getData=function(){return this._presentationModel.getFormattedData(this._getStudyViewsScalingFactors()).filter((function(e){return this._studyViewName===e.getStudyViewName()}),this)},u._handleVisibleWindowMoved=function(e,t){this._presentationModel.isEnabled()&&this._tooltipTextHelper&&e&&this._tooltipTextHelper.updatePosition()},u._createTooltip=function(){this._tooltipTextHelper=s.create(this.dContainer,this._presentationModel,this._getStudyViewsScalingFactors(),this._getStudyView()),this._instrumentModel.on(r.BLOCKS_POINTS_ADDED,this.renderOnFrameEnd,this),this._getStudyView().on(a.INDICATOR_REMOVED,this.renderOnFrameEnd,this)},u._removeTooltip=function(){this._getStudyView()&&this._getStudyView().un(null,this),this._instrumentModel.un(null,this),this._tooltipTextHelper&&(this._tooltipTextHelper.destroy(),this._tooltipTextHelper=null)},u._getStudyView=function(){return this._subView.getChartView().subViewManager.getSubView(this._studyViewName)},u._studyWithNameHasScaling=function(e){return!!this._subView.getChartView().subViewManager.getSubView(e).instrumentScaling},u._getStudyViewsScalingFactors=function(){return this._presentationModel.getIndicators().reduce(function(e,t){return e[t.studyName]=this._studyWithNameHasScaling(t.studyName),e}.bind(this),{})},u._updateVisibility=function(e){this.dContainer.classed("hidden",!e)},Object.seal(u),Object.seal(t)})),define("module/tooltip-desktop/js/view/desktopindicatorheaderstrategy",["require","module/tooltip-common/js/view/tooltiprowtype"],(function(e){"use strict";var t=e("module/tooltip-common/js/view/tooltiprowtype"),n={};return n.getHeader=function(e,n){return"PRICES"===e.name?[{type:t.LABEL_VALUE_PAIR,name:"prices",indicator:e,value:n}]:[]},Object.seal(n)})),define("module/dealing-positions-and-orders/js/viewmodel/textmeasurer",["require"],(function(e){"use strict";function t(e){this._dTextElement=e.getContainer("playground").append("span"),this._textWidthCache=Object.create(null),this._textWidthCacheByStringLength=Object.create(null)}t.create=function(e){return new t(e)};var n=t.prototype;return n._dTextElement=null,n._textWidthCache=null,n._textWidthCacheByStringLength=null,n.getBBoxForText=function(e){var t;return this._dTextElement.text(e),t=this._dTextElement.node().getBoundingClientRect(),this._dTextElement.text(""),t},n.estimateTextWidth=function(e){return this._textWidthCacheByStringLength[e.length]||(this._textWidthCacheByStringLength[e.length]=this.getBBoxForText(e).width),this._textWidthCacheByStringLength[e.length]},n.calculateTextWidth=function(e){return this._textWidthCache[e]||(this._textWidthCache[e]=this.getBBoxForText(e).width),this._textWidthCache[e]},n.clearEstimateTextWidthCache=function(){this._textWidthCacheByStringLength=Object.create(null)},n.destroy=function(){this._dTextElement.remove(),this._dTextElement=null},Object.seal(n),Object.seal(t)})),define("module/tooltip-common/js/view/indicatordata",["require","module/core/js/util/functional"],(function(e){"use strict";function t(e,t,n){this._studyViewName=n,this._name=e,this._rowCollection=t}var n=e("module/core/js/util/functional"),i=t.prototype;return i._studyViewName=null,i._name=null,i._rowCollection=null,i.getName=n.getter("_name"),i.getRowCollection=n.getter("_rowCollection"),i.getStudyViewName=n.getter("_studyViewName"),Object.seal(i),Object.seal(t)})),define("module/tooltip-common/js/view/tooltiprow",["require","module/core/js/util/functional"],(function(e){"use strict";function t(e,t,n,i,o){this._label=e,this._value=t,this._type=n,this._direction=i,this._formatClasses=o}var n=e("module/core/js/util/functional"),i=t.prototype;return i._label=null,i._value=null,i._direction=null,i._formatClasses=null,i._type=null,i.getLabel=n.getter("_label"),i.getType=n.getter("_type"),i.getValue=n.getter("_value"),i.getFormatClasses=function(){return this._formatClasses.join(" ")},i.getDirection=n.getter("_direction"),Object.seal(i),Object.seal(t)})),define("module/tooltip-common/js/view/tooltiprowgenerator",["require","module/core/js/model/datapoint/hlocdatapoint","module/core/js/model/datapoint/tickdatapoint","module/tooltip-common/js/view/tooltiprowtype","module/core/js/model/datapoint/trenddatapoint"],(function(e){"use strict";var t=e("module/core/js/model/datapoint/hlocdatapoint"),n=e("module/core/js/model/datapoint/tickdatapoint"),i=e("module/tooltip-common/js/view/tooltiprowtype"),o=e("module/core/js/model/datapoint/trenddatapoint"),r={};return r.getRowsForIndicator=function(e,i,s,a){var l,u,c,d=a.getHeader(i,s),h=i.outputPointTypes.length;for(c=0;c<h;c++)l=i.outputPointTypes[c],u=e[l],i.isOutputShownOnTooltip(l)&&(u instanceof t?d=d.concat(r._getRowsForHlocDataPoint(u,i,s)):u instanceof o?d=d.concat(r._getRowsForTrendDataPoint(u,i,l)):u instanceof n?d=d.concat(r._getRowsForTickDataPoint(u,i,l,s)):u&&(d=d.concat(r._getRowsForSimpleDataPoint(u,i,l))));return d},r._getRowsForHlocDataPoint=function(e,t){return[{name:"high",type:i.LABEL_VALUE_PAIR,indicator:t,value:e.highPrice},{name:"low",type:i.LABEL_VALUE_PAIR,indicator:t,value:e.lowPrice},{name:"open",type:i.LABEL_VALUE_PAIR,indicator:t,value:e.openPrice},{name:"close",type:i.LABEL_VALUE_PAIR,indicator:t,value:e.closePrice,direction:e.direction}]},r._getRowsForSimpleDataPoint=function(e,t,n){return[{name:n,type:i.LABEL_VALUE_PAIR,indicator:t,value:e.value}]},r._getRowsForTickDataPoint=function(e,t){return[{name:"TICK",type:i.LABEL_VALUE_PAIR,indicator:t,value:e.value}]},r._getRowsForTrendDataPoint=function(e,t,n){var o=null;return"boolean"==typeof e.upTrend&&(o=e.upTrend?"up":"down"),[{name:n,type:i.LABEL_VALUE_PAIR,indicator:t,value:e.value,direction:o}]},Object.seal(r)})),define("module/tooltip-common/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{open:"Eröffnung",high:"Hoch",low:"Tief",close:"Schluss",closeTooltip:"Schließen",prices:"Preis",TICK:"Tick"},en:{open:"Open",high:"Highest",low:"Lowest",close:"Close",closeTooltip:"Close",prices:"Price",TICK:"Tick"},es:{open:"Apertura",high:"Máximo",low:"Mínimo",close:"Cierre",closeTooltip:"Cerrar",prices:"Precio",TICK:"Tick"},fr:{open:"Ouverture",high:"Plus Haut",low:"Plus Bas",close:"Clôture",closeTooltip:"Fermer",prices:"Cours",TICK:"Tick"},it:{open:"Apri",high:"Massimo",low:"Minimo",close:"Chiudi",closeTooltip:"Chiudi",prices:"Prezzo",TICK:"Tick"},ja:{open:"始値",high:"高値",low:"安値",close:"終値",closeTooltip:"閉じる",prices:"現在値",TICK:"ティック"},nl:{open:"Openingsprijs",high:"Hoogste",low:"Laagste",close:"Sluiting",closeTooltip:"Sluit",prices:"Prijs",TICK:"Tick"},no:{open:"Åpning",high:"Høyest",low:"Lavest",close:"Stengning",closeTooltip:"Lukke",prices:"Kurs",TICK:"Tick"},pt:{open:"Abertura",high:"Máximo",low:"Mínimo",close:"Fecho",closeTooltip:"Fechar",prices:"Preço",TICK:"Tick"},sv:{open:"Öppning",high:"Högsta",low:"Lägsta",close:"Stängning",closeTooltip:"Stäng",prices:"Pris",TICK:"Tick"},zh:{open:"开仓价",high:"最高价",low:"最低价",close:"平仓价",closeTooltip:"关闭",prices:"价格",TICK:"Tick"},zh_TW:{open:"開市價",high:"最高價",low:"最低價",close:"收市價",closeTooltip:"關閉",prices:"價格",TICK:"Tick"}})})),define("module/tooltip-common/js/view/tooltiptextformatter",["require","module/core/js/util/dateutils","module/core/js/util/functional","module/indicators/js/i18n","module/menu-common/js/i18n","moment","module/resolutions/js/i18n","module/core/js/util/string","module/tooltip-common/js/i18n","module/tooltip-common/js/view/tooltiprowtype","module/core/js/view/valueformatter"],(function(e){"use strict";function t(){this._valueFormatter=(new d).withDecimalPlaces(h)}var n=e("module/core/js/util/dateutils"),i=e("module/core/js/util/functional"),o=e("module/indicators/js/i18n"),r=e("module/menu-common/js/i18n"),s=e("moment"),a=e("module/resolutions/js/i18n"),l=e("module/core/js/util/string"),u=e("module/tooltip-common/js/i18n"),c=e("module/tooltip-common/js/view/tooltiprowtype"),d=e("module/core/js/view/valueformatter"),h=5;t.create=function(){return new t};var p=t.prototype;return p._instrumentModelCollection=null,p._valueFormatter=null,p._userTimeZone=null,p.setInstrumentModelCollection=i.setter("_instrumentModelCollection"),p.setUserTimeZone=i.setter("_userTimeZone"),p.formatAccTime=function(e){var t=this._instrumentModelCollection.getTimeline().asDate(e),i=this._instrumentModelCollection.getActiveResolution();return n.format(s(t).tz(this._userTimeZone),i)},p.formatAccTimeWithResolution=function(e){var t=this.formatAccTime(e),n=this._instrumentModelCollection.getActiveResolution();return t+" ("+a.get(n.id)+")"},p.formatTooltipLabel=function(e){var t,n=e.indicator;return e.type===c.HEADER?"":(t="PRICES"===n.name?u.get(e.name):o.get(n.name+"-"+(n.nameLabelType||e.name)),!t||t.match(/\{[^}]+\}/)<0?t:l.merge(t,n.getSettings()))},p.formatTooltipValue=function(e,t){if("string"==typeof e.value)return e.value;var n=e.indicator.getTooltipSettings()?e.indicator.getTooltipSettings().decimalPlaces:h;return t?this._valueFormatter.scaleAndRoundPrice(e.value,this._instrumentModelCollection.getInstrumentModelInfo().scalingFactor,"PRICES"===e.indicator.name?this._instrumentModelCollection.getInstrumentModelInfo().decimalPlaces:n):this._valueFormatter.scaleAndRoundPrice(e.value,1,n)},p.formatIndicatorTitle=function(e){return"PRICES"===e.name?r.get(this._instrumentModelCollection.getPriceCalculator().type):o.get(e.shortLabelType?e.name+"-"+e.shortLabelType:e.name)},Object.seal(p),Object.seal(t)})),define("module/tooltip-common/js/view/tooltipviewmodel",["require","module/core/js/view/presentationmodel/abstractpresentationmodel","module/core/js/model/blocks","module/core/js/util/class","module/core/js/util/functional","module/tooltip-common/js/view/indicatordata","module/core/js/util/math","module/tooltip-common/js/enum/tooltipevents","module/tooltip-common/js/view/tooltiprow","module/tooltip-common/js/view/tooltiprowgenerator","module/tooltip-common/js/view/tooltiptextformatter"],(function(e){"use strict";function t(e,t){var n,i=t.outputPointTypes;for(n=0;n<i.length;n++)if(e.indexOf(i[n])>-1)return!0;return!1}function n(){this._tooltipTextFormatter=h.create()}var i=e("module/core/js/view/presentationmodel/abstractpresentationmodel"),o=e("module/core/js/model/blocks"),r=e("module/core/js/util/class"),s=e("module/core/js/util/functional"),a=e("module/tooltip-common/js/view/indicatordata"),l=e("module/core/js/util/math"),u=e("module/tooltip-common/js/enum/tooltipevents"),c=e("module/tooltip-common/js/view/tooltiprow"),d=e("module/tooltip-common/js/view/tooltiprowgenerator"),h=e("module/tooltip-common/js/view/tooltiptextformatter");r.extend(n,i);var p=n.prototype;return p._indicatorHeaderStrategy=null,p._isDealingFromChartEnabled=!1,p._isDelayedMarket=!1,p._visibleDateRange=null,p._tooltipTextFormatter=null,p._yAxisWidth=0,p.setYAxisWidth=s.setter("_yAxisWidth"),p.getYAxisWidth=s.getter("_yAxisWidth"),p.setDealingFromChartEnabled=s.observableSetter("_isDealingFromChartEnabled",u.UPDATE_POSITION),p.setDelayedMarket=s.observableSetter("_isDelayedMarket",u.UPDATE_POSITION),p.notifyReadyToRender=s.bubbler(u.READY_TO_RENDER),p.setUserTimeZone=s.delegate("_tooltipTextFormatter","setUserTimeZone"),p.getTooltipDate=s.abstractMethod,p.getIndicators=function(){var e=this._instrumentModel.getDataPointsAtAccTime(this.getAccTime()),n=Object.keys(e);return this._instrumentModel.getChartModel().getIndicatorsInOrder().filter(t.bind(this,n))},p.getFormattedData=function(e){var t=this._instrumentModel.getDataPointsAtAccTime(this.getAccTime()),n=this.getIndicators(),i=[];return n.forEach((function(n){var o=d.getRowsForIndicator(t,n,this._tooltipTextFormatter.formatIndicatorTitle(n),this._indicatorHeaderStrategy),r=new a(n.name,this._getFormattedRows(o,e),n.studyName);i.push(r)}),this),i},p.startListening=function(e,t,n){this._visibleDateRange=t,this._tooltipModel=e,this._instrumentModel=n,this._tooltipTextFormatter.setInstrumentModelCollection(n),this._tooltipModel.on(u.MOVED,s.bubbler(u.MOVED),this),this._tooltipModel.on(u.ENABLED,s.bubbler(u.ENABLED),this),this._tooltipModel.on(u.DISABLED,s.bubbler(u.DISABLED),this)},p.stopListening=function(){this._tooltipModel&&this._tooltipModel.un(null,this)},p.destroy=function(){this.stopListening(),n.superclass.destroy.call(this)},p.getAccTime=s.delegate("_tooltipModel","getAccTime"),p.isVisible=function(){return this.isEnabled()&&this.getAccTime()},p.isEnabled=s.delegate("_tooltipModel","isEnabled"),p.updatePosition=s.bubbler(u.UPDATE_POSITION),p.disable=s.delegate("_tooltipModel","disable"),p._lastPointAccTime=function(){var e=[this._visibleDateRange.accStart(),this._visibleDateRange.accEnd()-this._visibleDateRange.marginAccDuration()],t=o.findLastPointsInAccRange(this._visibleDateRange.getVisibleBlocks(),e);return t.prices?t.prices.accTime:null},p.getTooltipPosition=s.abstractMethod,p.getYLevelInStudyView=function(e){var t=null;return this._isLevelInStudyView(e)&&(t=this._tooltipModel.getLevel()-e.y),t},p.getBadgePositionInStudyView=function(e){var t=this.getYLevelInStudyView(e);return t&&(t=Math.max(9.5,t),t=Math.min(e.height-9.5,t)),t},p.getLevelBadgeDimensions=function(){return{x:-this._yAxisWidth,y:-9.5,width:this._yAxisWidth,height:19}},p._isLevelInStudyView=function(e){return l.between(this._tooltipModel.getLevel(),e.y,e.y+e.height)},p._getFormattedRows=function(e,t){var n=[];return e.forEach((function(e){var i=[e.name,e.indicator.name];n.push(new c(this._tooltipTextFormatter.formatTooltipLabel(e),this._tooltipTextFormatter.formatTooltipValue(e,t[e.indicator.studyName]),e.type,e.direction,i))}),this),n},Object.seal(p),Object.seal(n)})),define("module/tooltip-desktop/js/view/desktoptooltipviewmodel",["require","module/core/js/util/class","module/tooltip-desktop/js/view/desktopindicatorheaderstrategy","module/core/js/util/functional","module/dealing-positions-and-orders/js/viewmodel/textmeasurer","module/tooltip-common/js/view/tooltipviewmodel","module/core/js/model/visibledaterangeevents","module/tooltip-common/js/enum/tooltipevents"],(function(e){"use strict";function t(e,t){return e<t+d?e+d:e-(t+d)}function n(e,t,n){var i=n.top+n.height,o=n.top,r=e<o||i<=e,s=t.height>n.height,a=i-e<t.height+2*d,l=e-o<t.height+2*d;return r?s?n.top+d:n.top+n.height/2-t.height/2:a?l?o+d:e-t.height-d:e+d}function i(){i.superclass.constructor.call(this)}var o=e("module/core/js/util/class"),r=e("module/tooltip-desktop/js/view/desktopindicatorheaderstrategy"),s=e("module/core/js/util/functional"),a=e("module/dealing-positions-and-orders/js/viewmodel/textmeasurer"),l=e("module/tooltip-common/js/view/tooltipviewmodel"),u=e("module/core/js/model/visibledaterangeevents"),c=e("module/tooltip-common/js/enum/tooltipevents"),d=8;o.extend(i,l);var h=i.prototype;return h._textMeasurer=null,h._indicatorHeaderStrategy=r,h.getTooltipDate=function(){return this._tooltipTextFormatter.formatAccTime(this.getAccTime())},h.getTooltipPosition=function(e,i){var o=this._visibleDateRange.accTimeToPixel(this.getAccTime()),r=this._tooltipModel.getLevel();return{left:t(o,e.width)+"px",top:n(r,e,i)+"px"}},h.startListening=function(e,t,n,o){this._textMeasurer=a.create(o),i.superclass.startListening.apply(this,arguments),this._visibleDateRange.on(u.MOVED,s.bubbler(u.MOVED),this),this._tooltipModel.on(c.VISIBILITY_CHANGED,s.bubbler(c.VISIBILITY_CHANGED),this)},h.stopListening=function(){this._visibleDateRange&&this._visibleDateRange.un(null,this),this._textMeasurer&&(this._textMeasurer.destroy(),this._textMeasurer=null),i.superclass.stopListening.call(this)},h.getDateBadgeDimensions=function(){var e=this._textMeasurer.getBBoxForText(this.getTooltipDate()).width+8;return{x:-e/2,width:e,height:18}},h.getDateTextPosition=function(){return{x:-this._textMeasurer.getBBoxForText(this.getTooltipDate()).width/2,dy:"1.2em",y:0}},Object.seal(h),Object.seal(i)})),define("module/tooltip-desktop/js/config/subviewsconfig",["require","module/core/js/util/object","module/tooltip-desktop/js/view/renderer/crosshairhorizontalmarkerrenderer","module/tooltip-desktop/js/view/renderer/crosshairxaxisbadgerenderer","module/tooltip-desktop/js/view/renderer/crosshairyaxisbadgerenderer","module/tooltip-desktop/js/view/renderer/crosshairverticalmarkerrenderer","module/tooltip-desktop/js/view/desktoptooltippresenter","module/tooltip-desktop/js/view/renderer/desktoptooltiptextrenderer","module/tooltip-desktop/js/view/desktoptooltipviewmodel"],(function(e){"use strict";function t(e){return{type:l,group:"tooltip",presentationController:"tooltipPresenter",properties:{relativeWeighting:0,studyView:e}}}var n=e("module/core/js/util/object"),i=e("module/tooltip-desktop/js/view/renderer/crosshairhorizontalmarkerrenderer"),o=e("module/tooltip-desktop/js/view/renderer/crosshairxaxisbadgerenderer"),r=e("module/tooltip-desktop/js/view/renderer/crosshairyaxisbadgerenderer"),s=e("module/tooltip-desktop/js/view/renderer/crosshairverticalmarkerrenderer"),a=e("module/tooltip-desktop/js/view/desktoptooltippresenter"),l=e("module/tooltip-desktop/js/view/renderer/desktoptooltiptextrenderer"),u=e("module/tooltip-desktop/js/view/desktoptooltipviewmodel"),c={tooltipPresenter:{type:a,presentationModel:{type:u}}},d={crosshairPresenter:{type:a,presentationModel:{type:u}}},h={presentationControllers:d,renderers:{crosshairHorizontalMarker:{type:i,group:"studyOverlay",position:"studyOverlay",presentationController:"crosshairPresenter"},crosshairYAxisBadgeRenderer:{type:r,group:"yAxis",position:"yAxis",presentationController:"crosshairPresenter",properties:{relativeWeighting:1/0}}}},p={htmloverlay:{presentationControllers:c,renderers:{pricesDesktopTooltip:t("prices"),aroonDesktopTooltip:t("aroon"),atrDesktopTooltip:t("atr"),awesomeDesktopTooltip:t("awesome"),chaikinDesktopTooltip:t("chaikin"),cciDesktopTooltip:t("cci"),dpoDesktopTooltip:t("dpo"),dmiDesktopTooltip:t("dmi"),kdjDesktopTooltip:t("kdj"),macdDesktopTooltip:t("macd"),momentumDesktopTooltip:t("momentum"),mfiDesktopTooltip:t("mfi"),rocDesktopTooltip:t("roc"),rsiDesktopTooltip:t("rsi"),stdevDesktopTooltip:t("stdev"),stochasticDesktopTooltip:t("stochastic"),volumeDesktopTooltip:t("volume"),willrDesktopTooltip:t("willr")}},underlay:{presentationControllers:d,renderers:{crosshairVerticalMarker:{type:s,group:"xAxis",position:"xAxis",presentationController:"crosshairPresenter"}}},xaxis:{presentationControllers:d,renderers:{crosshairYAxisBadgeRenderer:{type:o,group:"xAxis",position:"xAxis",presentationController:"crosshairPresenter",properties:{relativeWeighting:2}}}},prices:h,aroon:h,atr:h,awesome:h,chaikin:h,cci:h,dpo:h,dmi:h,kdj:h,macd:h,momentum:h,mfi:h,roc:h,rsi:h,stdev:h,stochastic:h,volume:h,willr:h};return n.recursiveFreeze(p)})),define("module/tooltip-common/js/model/tooltipmodel",["require","module/core/js/util/class","module/core/js/util/functional","module/tooltip-common/js/enum/tooltipevents","module/core/js/event/subscribable"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/tooltip-common/js/enum/tooltipevents"),r=e("module/core/js/event/subscribable");n.extend(t,r),t.create=function(){return new t};var s=t.prototype;return s.oldSchool=!1,s._accTime=null,s._level=null,s._enabled=!1,s.isEnabled=i.getter("_enabled"),s.getAccTime=i.getter("_accTime"),s.setAccTime=i.observableSetter("_accTime",o.MOVED),s.setLevel=i.observableSetter("_level",o.MOVED),s.getLevel=i.getter("_level"),s.setOldSchool=function(e){return e!==this.oldSchool&&(this.oldSchool=e,this.fire(o.SCHOOLED)),this},s.enable=function(e){this.fire(o.REQUEST_ENABLE,e)},s.disable=function(){this.fire(o.REQUEST_DISABLE)},s.onEnabled=function(e){this._enabled=!0,this.fire(o.ENABLED,e)},s.onDisabled=function(){this._accTime=null,this._enabled=!1,this.fire(o.DISABLED)},s.setVisible=function(e){this.fire(o.VISIBILITY_CHANGED,e)},Object.seal(s),Object.seal(t)})),define("module/tooltip-common/js/tooltip-common",["require","module/core/js/util/functional","module/core/js/util/oop","module/tooltip-common/js/enum/tooltipevents","module/tooltip-common/js/model/tooltipmodel","module/core/js/tracker/enum/schema"],(function(e){"use strict";function t(e,t,n,i,o,r,s,a){this._options=t,this._eventBus=e,this._taskManager=a}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/oop"),o=e("module/tooltip-common/js/enum/tooltipevents"),r=e("module/tooltip-common/js/model/tooltipmodel"),s=e("module/core/js/tracker/enum/schema"),a=t.prototype;return a._chartView=null,a._eventBus=null,a._options=null,a._tooltipModel=null,a._taskManager=null,a._subViewsConfig=null,a.getTooltipModel=n.getter("_tooltipModel"),a.getYAxisWidth=n.getter("_options","yAxisWidth"),a.init=function(){this._addSubViewConfig(),this._tooltipModel=r.create(),this._tooltipModel.on(o.REQUEST_ENABLE,this._enableTooltip,this),this._tooltipModel.on(o.REQUEST_DISABLE,this._disableTooltip,this),this._startListening(),this._eventBus.subscribe("chart/view/ready",n.setter("_chartView"),this)},a.destroy=function(){this._removeSubViewConfig(),this._eventBus.unsubscribeAll(this),this._eventBus.unsubscribeAll(this._tooltipModel),this._tooltipModel.un(null,this)},a._startListening=function(){this._eventBus.subscribe("tooltip/enable",this._enableTooltip,this),this._eventBus.subscribe("tooltip/disable",this._disableTooltip,this),this._eventBus.subscribe("position/edit/disable/tooltip",this._disableTooltip,this)},a._getTaskConfig=i.abstractMethod,a._onTaskActivated=function(e){this._tooltipModel.onEnabled(e),this._eventBus.publish("tooltip/visibilityChanged",[!0]),this._eventBus.publish("tracker/chart",[{schema:s.ELEMENT_ACTION,elementId:"TOOLTIP",elementGroup:"TOOLTIP",elementType:"LAYER",actionType:"SHOW"}])},a._onTaskDeactivated=function(){this._tooltipModel.onDisabled(),this._eventBus.publish("tooltip/visibilityChanged",[!1]),this._eventBus.publish("tracker/chart",[{schema:s.ELEMENT_ACTION,elementId:"TOOLTIP",elementGroup:"TOOLTIP",elementType:"LAYER",actionType:"HIDE"}])},a._startTooltipTask=function(e){this._taskManager.startTask(this._getTaskConfig(),{onActivated:this._onTaskActivated.bind(this,e),onDeactivated:this._onTaskDeactivated.bind(this)})},a._enableTooltip=function(e){this._tooltipModel.isEnabled()||this._startTooltipTask(e)},a._disableTooltip=function(){this._tooltipModel.isEnabled()&&this._taskManager.finishTask(this._getTaskConfig().ID)},a._addSubViewConfig=function(){this._eventBus.publish("subViews/config",["tooltip",this._subViewsConfig])},a._removeSubViewConfig=function(){this._eventBus.publish("subViews/removeConfig",["tooltip"]),this._chartView&&(this._chartView.removeRenderersBySubviewConfig(this._subViewsConfig),this._chartView=null)},Object.seal(a),Object.seal(t)})),define("module/tooltip-desktop/js/tooltip-desktop",["require","module/core/js/util/class","module/tooltip-desktop/js/config/subviewsconfig","module/core/js/util/functional","module/core/js/settings/settingsevents","module/core/js/config/taskconfig","module/tooltip-common/js/tooltip-common"],(function(e){"use strict";function t(e,n,i,o,s,a,l,u){t.superclass.constructor.call(this,e,n,i,o,s,a,l,u),this._settingsManager=s,this._settingsManager.on(r.LAYOUT_SETTINGS_CHANGED,this._handleSettingsChanged,this)}var n=e("module/core/js/util/class"),i=e("module/tooltip-desktop/js/config/subviewsconfig"),o=e("module/core/js/util/functional"),r=e("module/core/js/settings/settingsevents"),s=e("module/core/js/config/taskconfig"),a=e("module/tooltip-common/js/tooltip-common");n.extend(t,a);var l=t.prototype;return l._subViewsConfig=i,l._settingsManager=null,l._startListening=function(){this._eventBus.subscribe("tooltip/enable",this._enableTooltip,this),this._eventBus.subscribe("tooltip/disable",this._disableTooltip,this)},l._enableTooltip=function(e){this._taskManager.taskExists(s.TOOLTIP_DESKTOP.ID)||(this._startTooltipTask(e),this._settingsManager.putTooltipSettings(!0))},l._disableTooltip=function(){this._tooltipModel.isEnabled()&&(this._taskManager.finishTask(s.TOOLTIP_DESKTOP.ID),this._settingsManager.putTooltipSettings(!1))},l._getTaskConfig=o.returns(s.TOOLTIP_DESKTOP),l._handleSettingsChanged=function(){this._settingsManager.getTooltipSettings()?this._enableTooltip():this._disableTooltip()},l.destroy=function(){this._settingsManager.un(null,this),t.superclass.destroy.call(this)},Object.seal(l),Object.seal(t)})),define("module/nadex-common/js/model/instrumenttype",[],(function(){"use strict";var e={};return e.BULL="Spread",e.BINARY="Binary",Object.freeze(e)})),define("module/nadex-common/js/model/marketmodel",["require","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional");t.MARKET_CLOSED=0,t.MARKET_OPEN=2;var i=t.prototype;return i.epic=null,i.decimalPlaces=null,i.level=null,i.formattedLevel=null,i.buyPrice=null,i.instrumentType=null,i.marketStatus=t.MARKET_CLOSED,i.sellPrice=null,i.floor=null,i.ceiling=null,i.profitLossScale=null,i.withBuyPrice=n.setter("buyPrice"),i.withMarketStatus=n.setter("marketStatus"),i.withSellPrice=n.setter("sellPrice"),i.withEpic=n.setter("epic"),i.withLevel=n.setter("level"),i.withFormattedLevel=n.setter("formattedLevel"),i.withDecimalPlaces=n.setter("decimalPlaces"),i.withCeiling=n.setter("ceiling"),i.withFloor=n.setter("floor"),i.withProfitLossScale=function(e,t){return this.profitLossScale=e*t,this},i.withInstrumentType=n.setter("instrumentType"),i.isActive=function(){return this.marketStatus===t.MARKET_OPEN},Object.seal(i),Object.seal(t)})),define("module/nadex-common/js/factory/marketmodelfactory",["require","module/nadex-common/js/model/instrumenttype","module/nadex-common/js/model/marketmodel"],(function(e){"use strict";function t(e){this._instrumentType=e}var n=e("module/nadex-common/js/model/instrumenttype"),i=e("module/nadex-common/js/model/marketmodel"),o=t.prototype;return o._instrumentType=null,o._decimalPlaces=null,o._lotSize=null,o.createMarketModel=function(e){var t=this._getMarketFloor(e.floor),n=this._getMarketCeiling(e.ceiling);return e.decimalPlacesFactor&&(this._decimalPlaces=parseInt(e.decimalPlacesFactor,10)),e.lotSize&&(this._lotSize=parseFloat(e.lotSize)),(new i).withBuyPrice(parseFloat(e.formattedOffer)).withSellPrice(parseFloat(e.formattedBid)).withEpic(e.epic).withLevel(parseFloat(e.strikeLevel)).withFormattedLevel(e.formattedStrikeLevel).withMarketStatus(parseInt(e.crMarketStatus,10)).withDecimalPlaces(this._decimalPlaces).withFloor(t).withCeiling(n).withProfitLossScale(parseFloat(e.scalingFactor),this._lotSize).withInstrumentType(this._instrumentType)},o.createMarketModelFromRefreshData=function(e){var t=this._getMarketFloor(e.floor),n=this._getMarketCeiling(e.ceiling);return(new i).withEpic(e.epic).withLevel(e.strikeLevel).withFormattedLevel(e.strikeLevel.toString()).withMarketStatus(parseInt(e.marketStatus,10)).withDecimalPlaces(this._decimalPlaces).withFloor(t).withCeiling(n).withProfitLossScale(parseFloat(e.scalingFactor),this._lotSize).withInstrumentType(this._instrumentType)},o._getMarketFloor=function(e){return this._instrumentType===n.BINARY?0:parseInt(e,10)},o._getMarketCeiling=function(e){return this._instrumentType===n.BINARY?100:parseInt(e,10)},Object.seal(t)})),define("module/core/js/serviceclient/streamingbuysellpricesclient",["require","streaming","module/core/js/model/environmentinfo"],(function(e){"use strict";function t(){this._lightStreamerSubscriptions=[]}var n=e("streaming"),i=e("module/core/js/model/environmentinfo");t.create=function(){return new t},t._parsePriceResult=function(e){var t=parseFloat(e);return isNaN(t)?null:t};var o=t.prototype;return o._lightStreamerSubscriptions=null,o.startListening=function(e,t,n,i,o){this.stopListening();for(var r=0;r<e.length;r++)this._subscribeToEpic(e[r],t,n,i,o)},o.stopListening=function(){var e;for(e=0;e<this._lightStreamerSubscriptions.length;e++)this._lightStreamerSubscriptions[e].unsubscribe();this._lightStreamerSubscriptions=[]},o._subscribeToEpic=function(e,t,o,r,s){this._lightStreamerSubscriptions.push(n.subscribe(t+e,o,"MERGE",this._handleUpdateFromLightstreamer.bind(this,s,r,e),2,i.getInstance().getDataAdaptor()))},o._handleUpdateFromLightstreamer=function(e,n,i,o){var r,s=o.getValue(n.buyPrice),a=o.getValue(n.sellPrice),l={epic:i,buyPrice:t._parsePriceResult(s),sellPrice:t._parsePriceResult(a)};n.marketStatus&&(r=o.getValue(n.marketStatus),l.marketStatus=t._parsePriceResult(r)),e(l)},Object.seal(o),Object.seal(t)})),
define("module/nadex-common/js/model/nadexmodel",["require","lodash","module/core/js/util/array","module/core/js/util/functional","module/nadex-common/js/factory/marketmodelfactory","module/core/js/util/math","module/core/js/serviceclient/streamingbuysellpricesclient"],(function(e){"use strict";function t(e){this._streamingBuySellPricesClient=a.create(),this._eventBus=e,this._eventBus.subscribe("nadex/hierarchy/loaded",this._updateModel,this),this._eventBus.subscribe("nadex/market/deleted",this._deleteMarket,this),this._eventBus.subscribe("nadex/market/refresh",this._handleMarketRefresh,this)}var n=e("lodash"),i=e("module/core/js/util/array"),o=e("module/core/js/util/functional"),r=e("module/nadex-common/js/factory/marketmodelfactory"),s=e("module/core/js/util/math"),a=e("module/core/js/serviceclient/streamingbuysellpricesclient"),l=["BD1","AK1","UBS"],u={buyPrice:"AK1",sellPrice:"BD1",marketStatus:"UBS"};t._parsePriceResult=function(e){var t=parseFloat(e);return isNaN(t)?null:t},t.create=function(e){return new t(e)};var c=t.prototype;return c.epicToMarketModel=null,c._eventBus=null,c._timeToExpiry=null,c._hierarchyId=null,c._streamingBuySellPricesClient=null,c.destroy=function(){this._eventBus.unsubscribeAll(this),this._eventBus=null,this._streamingBuySellPricesClient.stopListening(),this._streamingBuySellPricesClient=null},c._clearModel=function(){this._eventBus.flush("nadex/marketModels/added"),this._eventBus.flush("nadex/marketModels/updated")},c._updateModel=function(e,t,n){var s=new r(n),a=t.map(s.createMarketModel.bind(s));this._hierarchyId=e,this._clearModel(),this.epicToMarketModel=i.arrayToHashMap(a,o.plucker("epic")),this._eventBus.publish("nadex/marketModels/added",[e,a],{retrospective:!0}),this._startStreaming()},c._deleteMarket=function(e){this.epicToMarketModel[e]&&(delete this.epicToMarketModel[e],this._startStreaming(),this._eventBus.publish("nadex/marketModels/deleted",[e]),this._eventBus.publish("nadex/marketModels/added",[this._hierarchyId,n.values(this.epicToMarketModel)],{retrospective:!0}))},c._handleMarketRefresh=function(e){var t=parseInt(e.timeToExpiry,10),i=new r(e.instrumentType),o=i.createMarketModelFromRefreshData(e);(!this._timeToExpiry||t>this._timeToExpiry)&&(this._timeToExpiry=t),t<this._timeToExpiry||this.epicToMarketModel[e.epic]||(this._cleanStrikeLevel(e.strikeLevel),this.epicToMarketModel[o.epic]=o,this._startStreaming(),this._eventBus.publish("nadex/marketModels/added",[e.hierarchyId3,n.values(this.epicToMarketModel)],{retrospective:!0}))},c._cleanStrikeLevel=function(e){Object.keys(this.epicToMarketModel).forEach(function(t){this.epicToMarketModel[t].level===e&&this._deleteMarket(t)}.bind(this))},c._startStreaming=function(){this._streamingBuySellPricesClient.stopListening(),this._streamingBuySellPricesClient.startListening(Object.keys(this.epicToMarketModel),"V2-F-BD1,AK1,UBS|",l,u,this._handleBuySellPriceChange.bind(this))},c._handleBuySellPriceChange=function(e){var n=this.epicToMarketModel[e.epic],i=t._parsePriceResult(e.marketStatus);n&&(n.withBuyPrice(e.buyPrice).withSellPrice(e.sellPrice),s.isNumber(i)&&n.withMarketStatus(i),this._eventBus.publish("nadex/marketModels/updated",[n],{retrospective:!0}))},Object.seal(c),Object.seal(t)})),define("module/nadex-common/js/view/renderer/hiddenmarketdimensions",[],(function(){"use strict";var e={};return e.WIDTH=20,e.DOUBLE_WIDTH=2*e.WIDTH,e.HEIGHT=13,e.BORDER_WIDTH=2,e.Y_OFFSET=e.HEIGHT/2-e.BORDER_WIDTH/2,Object.seal(e)})),define("module/nadex-common/js/view/renderer/marketsoverflowrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/view/axisconstants","module/core/js/util/class","module/core/js/util/functional","module/nadex-common/js/view/renderer/hiddenmarketdimensions","module/core/js/util/string","module/core/js/util/svg","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o)}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/view/axisconstants"),o=e("module/core/js/util/class"),r=e("module/core/js/util/functional"),s=e("module/nadex-common/js/view/renderer/hiddenmarketdimensions"),a=e("module/core/js/util/string"),l=e("module/core/js/util/svg"),u=e("module/core/js/view/visiblewindow");o.extend(t,n),t.createArrow=function(e,t){var n=e.append("svg:g").classed("arrow",!0).classed("up",t).classed("down",!t).classed("hidden",!0),i=[s.WIDTH,s.DOUBLE_WIDTH,s.HEIGHT];return n.append("svg:polygon").classed("sell",!0).attr("points",a.merge("0,0 {0},0 {0},{2}",i)),n.append("svg:polygon").classed("buy",!0).attr("points",a.merge("{0},0 {1},0 {0},{2}",i)),t&&n.attr("transform",l.yTransform(-1,-s.HEIGHT,r.identity)),n};var c=t.prototype;return c._dUpArrow=null,c._dDownArrow=null,c._xChanged=i.STATIC,c._yChanged=i.STATIC,c.initDom=function(){return this._dUpArrow=t.createArrow(this.dContainer,!0),this._dDownArrow=t.createArrow(this.dContainer,!1),this},c.render=function(){this._yChanged&&(this._yChanged&(i.RESIZED|i.INITIALISED)&&this._positionVertically(),this._update()),this._xChanged&(i.RESIZED|i.INITIALISED)&&this._positionHorizontally(),this._xChanged=this._yChanged=i.STATIC},c.startRedrawingBasedOnChangesInVisibleWindow=function(){this._visibleWindow.on(u.MOVED,this._handleVisibleWindowMoved,this)},c.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._visibleWindow.un(null,this)},c._update=function(){var e=this._presentationModel.getMarkets().map(r.plucker("yPosition")),t=Math.min.apply(Math,e),n=Math.max.apply(Math,e),i=this._visibleWindow.height();this._dUpArrow.classed("hidden",t>0),this._dDownArrow.classed("hidden",n<i)},c._positionHorizontally=function(){var e,t=this._presentationModel.getMarkets(),n=0;t.length>0&&(e=this._presentationModel.getMarkets()[0],n=Math.round(e.rightEdgePosition-2*s.WIDTH+s.BORDER_WIDTH),this.dContainer.attr("transform",l.svgTranslateAttrX(n)))},c._positionVertically=function(){var e=this._visibleWindow.height()-s.HEIGHT;this._dDownArrow.attr("transform",l.svgTranslateAttrY(e))},c._handleVisibleWindowMoved=function(e,t){this._xChanged|=e,this._yChanged|=t,(this._xChanged||this._yChanged)&&this.renderOnFrameEnd()},Object.seal(c),Object.seal(t)})),define("module/nadex-common/js/view/model/marketchangetype",[],(function(){"use strict";return Object.freeze({BOUNDING_RECT:"BOUNDING_RECT",Y_POSITION:"Y_POSITION",X_RANGE:"X_RANGE",RIGHT_EDGE_POSITION:"RIGHT_EDGE_POSITION",PRICE_CHANGE:"PRICE_CHANGE",HIDDEN_OR_SHOWN:"HIDDEN_OR_SHOWN",SELECTED_ITEM_CHANGED:"SELECTED_ITEM_CHANGED",DESELECTED:"DESELECTED",OPEN_POSITION_WIDTH:"OPEN_POSITION_WIDTH",OPEN_POSITION_ADD:"OPEN_POSITION_ADD",OPEN_POSITION_DELETE:"OPEN_POSITION_DELETE",OPEN_POSITION_UPDATE:"OPEN_POSITION_UPDATE",WORKING_ORDER_BOX_WIDTH:"WORKING_ORDER_BOX_WIDTH",WORKING_ORDER_GROUP_ADD:"WORKING_ORDER_GROUP_ADD",WORKING_ORDER_GROUP_DELETE:"WORKING_ORDER_GROUP_DELETE",WORKING_ORDER_GROUP_UPDATE:"WORKING_ORDER_GROUP_UPDATE",WORKING_ORDER_LISTING_OPENED:"WORKING_ORDER_LISTING_OPENED",WORKING_ORDER_LISTING_CLOSED:"WORKING_ORDER_LISTING_CLOSED",MARKET_OPENED:"MARKET_OPENED",MARKET_CLOSED:"MARKET_CLOSED",OPEN_POSITION_VISIBILITY_CHANGED:"OPEN_POSITION_VISIBILITY_CHANGED",WORKING_ORDER_VISIBILITY_CHANGED:"WORKING_ORDER_VISIBILITY_CHANGED"})})),define("module/nadex-positions-and-orders/js/view/model/openposition",["require","module/core/js/util/class","module/core/js/util/functional","module/nadex-common/js/view/model/marketchangetype","module/core/js/event/subscribable"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/nadex-common/js/view/model/marketchangetype"),r=e("module/core/js/event/subscribable");n.extend(t,r),t.create=function(){return new t},t.CHANGED="changed";var s=t.prototype;return s.dealId=null,s.direction=null,s.epic=null,s.openingLevel=null,s.profitAndLoss=null,s.size=null,s.formattedLevel=null,s.width=null,s.withDealId=i.setter("dealId"),s.withDirection=i.setter("direction"),s.withEpic=i.setter("epic"),s.withOpeningLevel=i.setter("openingLevel"),s.withFormattedLevel=i.setter("formattedLevel"),s.withProfitAndLoss=i.setter("profitAndLoss"),s.withSize=i.setter("size"),s.withWidth=function(e){return this.width=e,this.fire(t.CHANGED,o.OPEN_POSITION_WIDTH),this},Object.seal(s),Object.seal(t)})),define("module/nadex-positions-and-orders/js/view/model/workingorder",["require","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional");t.create=function(){return new t},t.comparator=function(e,t){return e.dealId===t.dealId&&e.size===t.size};var i=t.prototype;return i.dealId=null,i.direction=null,i.epic=null,i.size=null,i.originalSize=null,i.withDealId=n.setter("dealId"),i.withDirection=n.setter("direction"),i.withEpic=n.setter("epic"),i.withSize=n.setter("size"),i.withOriginalSize=n.setter("originalSize"),Object.seal(i),Object.seal(t)})),define("module/nadex-common/js/view/model/market",["require","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/nadex-common/js/model/instrumenttype","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/model/marketmodel","module/nadex-positions-and-orders/js/view/model/openposition","module/core/js/event/subscribable","module/nadex-positions-and-orders/js/view/model/workingorder"],(function(e){"use strict";function t(){this.workingOrders=[]}var n=e("module/core/js/util/array"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/nadex-common/js/model/instrumenttype"),s=e("module/nadex-common/js/view/model/marketchangetype"),a=e("module/nadex-common/js/model/marketmodel"),l=e("module/nadex-positions-and-orders/js/view/model/openposition"),u=e("module/core/js/event/subscribable"),c=e("module/nadex-positions-and-orders/js/view/model/workingorder");i.extend(t,u),t.create=function(){return new t},t.areEqual=function(e,t){return e&&t?e.instrumentType===t.instrumentType&&e.epic===t.epic:e===t},t.BINARY_BUY_SELL_WIDTH=78,t.BULL_BUY_SELL_WIDTH=108,t.BUY_SELL_BORDER_WIDTH=1,t.POSITION_BOX_LEFT_MARGIN=10,t.CHANGED="MARKET_CHANGED",t.OPEN_DEAL_TICKET="OPEN_DEAL_TICKET";var d=t.prototype;return d.epic=null,d.level=null,d.originalLevel=null,d.formattedLevel=null,d.marketStatus=null,d.buyPrice=null,d.sellPrice=null,d.openPosition=null,d.workingOrders=null,d.yPosition=null,d.boundingRect=null,d.xRange=null,d.decimalPlaces=null,d.isHidden=!1,d.workingOrderBoxWidth=null,d.rightEdgePosition=null,d.selectedItemType=null,d.selectedDealId=null,d.selectedDirection=null,d.floor=null,d.ceiling=null,d.instrumentType=null,d.workingOrderListingOpened=!1,d.isOpenPositionVisible=!0,d.isWorkingOrderVisible=!0,d.setListingVisible=function(e){var t=e?s.WORKING_ORDER_LISTING_OPENED:s.WORKING_ORDER_LISTING_CLOSED;return this.workingOrderListingOpened!==e&&(this.workingOrderListingOpened=e,this._fireChange(t)),this},d.withOpenPosition=function(e){return!this.openPosition&&e?(this._fireChange(s.OPEN_POSITION_ADD),e.on(l.CHANGED,this._fireChange,this)):this.openPosition&&!e?(this._fireChange(s.OPEN_POSITION_DELETE),this.openPosition.un(null,this)):this.openPosition&&e&&(this.openPosition.un(null,this),e.on(l.CHANGED,this._fireChange,this),this._fireChange(s.OPEN_POSITION_UPDATE)),this.openPosition=e,this},d.withWorkingOrders=function(e){return n.equals(e,this.workingOrders,c.comparator)||(0===this.workingOrders.length&&e.length>0?this._fireChange(s.WORKING_ORDER_GROUP_ADD):this.workingOrders.length>0&&0===e.length?this._fireChange(s.WORKING_ORDER_GROUP_DELETE):this.workingOrders.length>0&&e.length>0&&this._fireChange(s.WORKING_ORDER_GROUP_UPDATE)),this.workingOrders=e,this},d.withInstrumentType=o.setter("instrumentType"),d.withEpic=o.setter("epic"),d.withLevel=o.setter("level"),d.withOriginalLevel=o.setter("originalLevel"),d.withFormattedLevel=o.setter("formattedLevel"),d.withMarketStatus=function(e){var t=this.marketStatus;return this.marketStatus=e,t!==e&&this._fireChange(e===a.MARKET_OPEN?s.MARKET_OPENED:s.MARKET_CLOSED),this},d.withDecimalPlaces=o.setter("decimalPlaces"),d.withCeiling=o.setter("ceiling"),d.withFloor=o.setter("floor"),d.withBuyPrice=function(e){return this.buyPrice=e,this._fireChange(s.PRICE_CHANGE),this},d.withSellPrice=function(e){return this.sellPrice=e,this._fireChange(s.PRICE_CHANGE),this},d.withYPosition=function(e){return this.yPosition=e,this._fireChange(s.Y_POSITION),this},d.withXRange=function(e){return this.xRange=e,this._fireChange(s.X_RANGE),this},d.withBoundingRect=function(e){return this.boundingRect=e,this._fireChange(s.BOUNDING_RECT),this},d.withIsHidden=function(e){return this.isHidden!==e&&(this.isHidden=e,this._fireChange(s.HIDDEN_OR_SHOWN)),this},d.withWorkingOrderBoxWidth=function(e){return this.workingOrderBoxWidth=e,this._fireChange(s.WORKING_ORDER_BOX_WIDTH),this},d.withRightEdgePosition=function(e){return this.rightEdgePosition=e,this._fireChange(s.RIGHT_EDGE_POSITION),this},d.deselect=function(){this.selectedItemType=null,this.selectedDealId=null,this.selectedDirection=null,this._fireChange(s.DESELECTED)},d.updateWithNewData=function(e){this.withMarketStatus(e.marketStatus).withBuyPrice(e.buyPrice).withSellPrice(e.sellPrice)},d.getBuySellWidth=function(){return this.instrumentType===r.BINARY?t.BINARY_BUY_SELL_WIDTH:t.BULL_BUY_SELL_WIDTH},d.getWorkingOrder=function(e){var t;for(t=0;t<this.workingOrders.length;t++)if(this.workingOrders[t].dealId===e)return this.workingOrders[t];return null},d.getMarketModelLabel=function(){return this.instrumentType===r.BULL?this.floor.toFixed(this.decimalPlaces)+" - "+this.ceiling.toFixed(this.decimalPlaces):"> "+this.formattedLevel},d.getSelectedDeal=function(){return this.getWorkingOrder(this.selectedDealId)},d.setSelectedItem=function(e,t,n){this.selectedItemType=e,this.selectedDealId=n,this.selectedDirection=t,this._fireChange(s.SELECTED_ITEM_CHANGED)},d.setupDealTicket=function(e,n,i){this.setSelectedItem(e,n,i),this.fire(t.OPEN_DEAL_TICKET)},d.setOpenPositionVisibility=function(e){this.isOpenPositionVisible!==e&&(this.isOpenPositionVisible=e,this._fireChange(s.OPEN_POSITION_VISIBILITY_CHANGED))},d.setWorkingOrderVisibility=function(e){this.isWorkingOrderVisible!==e&&(this.isWorkingOrderVisible=e,this._fireChange(s.WORKING_ORDER_VISIBILITY_CHANGED))},d._fireChange=function(e){this.fire(t.CHANGED,e)},Object.seal(d),Object.seal(t)})),define("module/nadex-common/js/view/renderer/hiddenmarketrenderer",["require","module/nadex-common/js/view/renderer/hiddenmarketdimensions","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/core/js/util/svg"],(function(e){"use strict";function t(e){this._marketChanges=Object.create(null),this._market=e,this._market.on(i.CHANGED,this._handleMarketChange,this)}var n=e("module/nadex-common/js/view/renderer/hiddenmarketdimensions"),i=e("module/nadex-common/js/view/model/market"),o=e("module/nadex-common/js/view/model/marketchangetype"),r=e("module/core/js/util/svg");t.create=function(e){return new t(e)};var s=t.prototype;return s._dContainer=null,s._marketChanges=null,s.initDom=function(e){this._dContainer=e.append("g").classed("hiddenMarket",!0);var t=this._dContainer.append("svg:g").attr("class","right-align"),i=t.append("svg:g").attr("class","hiddenMarketChevrons");i.append("svg:rect").attr("class","hiddenSellMarket").attr("width",n.WIDTH-n.BORDER_WIDTH).attr("height",n.HEIGHT-n.BORDER_WIDTH),i.append("svg:rect").attr("x",n.WIDTH).attr("class","hiddenBuyMarket").attr("width",n.WIDTH-n.BORDER_WIDTH).attr("height",n.HEIGHT-n.BORDER_WIDTH),this._positionVertically(),this._positionHorizontally()},s.render=function(){this._marketChanges[o.Y_POSITION]&&this._positionVertically(),this._marketChanges[o.RIGHT_EDGE_POSITION]&&this._positionHorizontally(),this._marketChanges=Object.create(null)},s.destroy=function(){this._market.un(null,this),this._dContainer.remove()},s._positionVertically=function(){this._dContainer.attr("transform",r.svgTranslateAttrY(this._market.yPosition-n.Y_OFFSET))},s._positionHorizontally=function(){var e=this._market.rightEdgePosition-2*n.WIDTH;this._dContainer.select(".right-align").attr("transform",r.svgTranslateAttrX(e))},s._handleMarketChange=function(e){this._marketChanges[e]=!0},Object.seal(s),Object.seal(t)})),define("module/nadex-common/js/view/model/selecteditemtype",[],(function(){"use strict";return Object.freeze({BUY_BUTTON:"BUY_BUTTON",SELL_BUTTON:"SELL_BUTTON",OPEN_POSITION:"OPEN_POSITION",WORKING_ORDER:"WORKING_ORDER"})})),define("module/nadex-common/js/view/model/marketutil",["require","module/nadex-common/js/view/model/selecteditemtype"],(function(e){"use strict";var t=e("module/nadex-common/js/view/model/selecteditemtype"),n={};return n.hasOpenBuyTicket=function(e){return e.selectedItemType===t.BUY_BUTTON||(e.selectedItemType===t.OPEN_POSITION?e.selectedDirection?"+"===e.selectedDirection:!!e.openPosition&&"-"===e.openPosition.direction:e.selectedItemType===t.WORKING_ORDER&&(e.selectedDirection?"+"===e.selectedDirection:null!==e.getSelectedDeal()&&"+"===e.getSelectedDeal().direction))},n.hasOpenSellTicket=function(e){return e.selectedItemType===t.SELL_BUTTON||(e.selectedItemType===t.OPEN_POSITION?e.selectedDirection?"-"===e.selectedDirection:!!e.openPosition&&"+"===e.openPosition.direction:e.selectedItemType===t.WORKING_ORDER&&(e.selectedDirection?"-"===e.selectedDirection:null!==e.getSelectedDeal()&&"-"===e.getSelectedDeal().direction))},Object.seal(n)})),define("module/nadex-binary-ladder/js/view/renderer/helper/buysellbuttonhelper",["require","module/core/js/ext/d3","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/model/marketmodel","module/nadex-common/js/view/model/marketutil","module/core/js/util/math","module/nadex-common/js/view/model/selecteditemtype","module/core/js/util/svg","module/core/js/view/valueformatter","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n){this._market=e,this._dContainer=n,this._captureZoneManager=t,this._marketChanges=Object.create(null),this._valueFormatter=new c,this._initDom(),this._market.on(i.CHANGED,this._handleMarketChange,this)}var n=e("module/core/js/ext/d3"),i=e("module/nadex-common/js/view/model/market"),o=e("module/nadex-common/js/view/model/marketchangetype"),r=e("module/nadex-common/js/model/marketmodel"),s=e("module/nadex-common/js/view/model/marketutil"),a=e("module/core/js/util/math"),l=e("module/nadex-common/js/view/model/selecteditemtype"),u=e("module/core/js/util/svg"),c=e("module/core/js/view/valueformatter"),d=e("module/core/js/enum/zindexenum");t.create=function(e,n,i){return new t(e,n,i)},t.BUTTON_STROKE_WIDTH=1,t.BUTTON_HEIGHT=30,t.CENTER_OFFSET=10,t.SCALE_FACTOR=1,t.TEXT_MARGIN=8,t.createButton=function(){var e=n.select(document.createElementNS("http://www.w3.org/2000/svg","g")).classed("button",!0);return e.append("svg:rect").classed("background",!0),e.append("svg:text").classed("price",!0),e.node()};var h=t.prototype;return h._captureZoneManager=null,h._dContainer=null,h._dElement=null,h._dBuyButton=null,h._dSellButton=null,h._isMarketOpened=!1,h._market=null,h._marketChanges=null,h._valueFormatter=null,h._zoneForBuy=null,h._zoneForSell=null,h.destroy=function(){this._market.un(null,this),this._zoneForBuy.destroy(),this._zoneForSell.destroy(),this._dElement.remove()},h.render=function(){(this._marketChanges[o.MARKET_OPENED]||this._marketChanges[o.MARKET_CLOSED])&&this._updateMarketStatus(),this._marketChanges[o.PRICE_CHANGE]&&this._updateButtons(),this._marketChanges[o.RIGHT_EDGE_POSITION]&&this._positionHorizontally(),(this._marketChanges[o.SELECTED_ITEM_CHANGED]||this._marketChanges[o.DESELECTED])&&this._selectButton(),(this._marketChanges[o.RIGHT_EDGE_POSITION]||this._marketChanges[o.Y_POSITION]||this._marketChanges[o.BOUNDING_RECT])&&this._updateCaptureZones(),this._marketChanges=Object.create(null)},h._initDom=function(){this._dElement=this._dContainer.append("g").classed("buySellPrices",!0),this._dBuyButton=this._dElement.appendElement(t.createButton()).classed("buy",!0),this._dSellButton=this._dElement.appendElement(t.createButton()).classed("sell",!0),this._createCaptureZones(),this._updateButtons(),this._resizeAndPosition(),this._positionHorizontally(),this._updateMarketStatus(),this._selectButton(),this._updateCaptureZones()},h._updateButtons=function(){this._dBuyButton.select(".price").text(this._formatPrice(this._market.buyPrice)),this._dSellButton.select(".price").text(this._formatPrice(this._market.sellPrice))},h._formatPrice=function(e){return a.isNumber(e)?this._valueFormatter.scaleAndRoundPrice(e,t.SCALE_FACTOR,this._market.decimalPlaces):"-"},h._resizeAndPosition=function(){var e=Math.floor(this._market.getBuySellWidth()),n=t.BUTTON_HEIGHT,i=t.CENTER_OFFSET,o=e-t.TEXT_MARGIN;this._dElement.selectAll(".background").attr({width:e,height:n}),this._dElement.selectAll(".price").attr({dx:o,dy:.5*n+t.BUTTON_STROKE_WIDTH}),this._dBuyButton.attr("transform",u.svgTranslateAttrY(-i-n)),this._dSellButton.attr("transform",u.svgTranslateAttrY(i))},h._positionHorizontally=function(){var e=this._market.rightEdgePosition-Math.round(this._market.getBuySellWidth())-i.BUY_SELL_BORDER_WIDTH;this._dElement.attr("transform",u.svgTranslateAttrX(e))},h._updateMarketStatus=function(){var e=this._market.marketStatus===r.MARKET_OPEN;this._isMarketOpened=e,this._dElement.classed("inactive",!e)},h._createCaptureZones=function(){this._zoneForBuy=this._captureZoneManager.createTapZone(this._handleTapForSelection.bind(this,l.BUY_BUTTON),d.NADEX_LADDERS),this._zoneForSell=this._captureZoneManager.createTapZone(this._handleTapForSelection.bind(this,l.SELL_BUTTON),d.NADEX_LADDERS)},h._updateCaptureZones=function(){this._zoneForBuy.setDimensionsBasedOnElement(this._dBuyButton,this._market.boundingRect),this._zoneForSell.setDimensionsBasedOnElement(this._dSellButton,this._market.boundingRect)},h._selectButton=function(){this._dBuyButton.classed("selected",s.hasOpenBuyTicket(this._market)),this._dSellButton.classed("selected",s.hasOpenSellTicket(this._market))},h._handleMarketChange=function(e){this._marketChanges[e]=!0},h._handleTapForSelection=function(e){this._isMarketOpened&&this._market.setupDealTicket(e)},Object.seal(h),Object.seal(t)})),define("module/nadex-binary-ladder/js/view/renderer/helper/marketlabelhelper",["require","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/view/model/marketutil","module/core/js/util/svg"],(function(e){"use strict";function t(e,t){this._dContainer=t,this._marketChanges=Object.create(null),this._market=e,this._market.on(n.CHANGED,this._handleMarketChange,this),this._initDom()}var n=e("module/nadex-common/js/view/model/market"),i=e("module/nadex-common/js/view/model/marketchangetype"),o=e("module/nadex-common/js/view/model/marketutil"),r=e("module/core/js/util/svg");t.create=function(e,n){return new t(e,n)},t.TEXT_MARGIN=8,t.LABEL_HEIGHT=20,t.TEXT_VERTICAL_OFFSET=1;var s=t.prototype;return s._dContainer=null,s._dLabel=null,s._market=null,s._marketChanges=null,s.render=function(){this._marketChanges[i.RIGHT_EDGE_POSITION]&&this._positionHorizontally(),(this._marketChanges[i.SELECTED_ITEM_CHANGED]||this._marketChanges[i.DESELECTED])&&this._changeSelection(),this._marketChanges=Object.create(null)},s.destroy=function(){this._market.un(null,this),this._dLabel.remove()},s._initDom=function(){this._dLabel=this._dContainer.append("svg:g").classed("marketModelLabel",!0),this._dLabel.append("svg:rect").classed("background",!0),this._dLabel.append("svg:text").classed("level",!0).text(this._market.getMarketModelLabel()),this._resizeAndPosition(),this._positionHorizontally(),this._changeSelection()},s._resizeAndPosition=function(){var e=Math.floor(this._market.getBuySellWidth()),n=t.LABEL_HEIGHT,i=e-t.TEXT_MARGIN;this._dLabel.select(".background").attr({width:e,height:n,y:-.5*n}),this._dLabel.select(".level").attr({dx:i,dy:t.TEXT_VERTICAL_OFFSET})},s._positionHorizontally=function(){var e=this._market.rightEdgePosition-Math.round(this._market.getBuySellWidth())-n.BUY_SELL_BORDER_WIDTH;this._dLabel.attr("transform",r.svgTranslateAttrX(e))},s._changeSelection=function(){this._dLabel.classed("buy",o.hasOpenBuyTicket(this._market)).classed("sell",o.hasOpenSellTicket(this._market))},s._handleMarketChange=function(e){this._marketChanges[e]=!0},Object.seal(s),Object.seal(t)})),define("module/nadex-common/js/view/renderer/helper/nullhelper",["require","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional");t.create=function(){return new t};var i=t.prototype;return i.render=n.empty,i.destroy=n.empty,Object.seal(i),Object.seal(t)})),define("module/nadex-positions-and-orders/js/i18n",["require","module/core/js/i18nloader"],(function(e){"use strict";return new(e("module/core/js/i18nloader"))({de:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},en:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},es:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},fr:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},it:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},ja:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},nl:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},no:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},pt:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},sv:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"},zh:{profitLoss:"$ {profitLoss}",above:"above",between:"between",workingOrders:"working orders",overlayTitle:"> {level} Orders"}})})),define("module/nadex-positions-and-orders/js/model/position",["require","module/core/js/util/functional","module/core/js/util/math"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/math");t.PROFIT_LOSS_PRECISION=2;var o=t.prototype;return o.dealId=null,o.formattedLevel=null,o.direction=null,o.epic=null,o.instrumentType=null,o.isSelected=null,o.openingLevel=null,o.size=null,o.originalSize=null,o.withDirection=n.setter("direction"),o.withEpic=n.setter("epic"),o.withInstrumentType=n.setter("instrumentType"),o.withIsSelected=n.setter("isSelected"),o.withOpeningLevel=n.setter("openingLevel"),o.withSize=n.setter("size"),o.withOriginalSize=n.setter("originalSize"),o.withDealId=n.setter("dealId"),o.withFormattedLevel=n.setter("formattedLevel"),o.profitAndLoss=null,o.updateProfitLoss=function(e){var t,n,o,r,s,a=e.profitLossScale||1;t="+"===this.direction,n=t?e.sellPrice:e.buyPrice,i.isNumber(n)?(i.isNumber(e.floor)&&(n=Math.max(n,e.floor)),i.isNumber(e.ceiling)&&(n=Math.min(n,e.ceiling)),o=t?1:-1,i.isNumber(n)&&(r=(n-this.openingLevel)*o,s=parseFloat(r*a*this.size)),this.profitAndLoss=s):this.profitAndLoss=null},Object.seal(o),Object.seal(t)})),define("module/nadex-positions-and-orders/js/view/renderer/helper/openpositionhelper",["require","module/core/js/view/userinput/eventpropagation","module/nadex-positions-and-orders/js/i18n","module/nadex-common/js/model/instrumenttype","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/model/marketmodel","module/core/js/util/math","module/nadex-positions-and-orders/js/model/position","module/nadex-positions-and-orders/js/i18n","module/nadex-common/js/view/model/selecteditemtype","module/core/js/util/string","module/core/js/util/svg","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n){this._captureZoneManager=t,this._dContainer=n,this._marketChanges=Object.create(null),this._market=e,this._market.on(r.CHANGED,this._handleMarketChange,this),this._addOpenPosition()}var n=e("module/core/js/view/userinput/eventpropagation"),i=e("module/nadex-positions-and-orders/js/i18n"),o=e("module/nadex-common/js/model/instrumenttype"),r=e("module/nadex-common/js/view/model/market"),s=e("module/nadex-common/js/view/model/marketchangetype"),a=e("module/nadex-common/js/model/marketmodel"),l=e("module/core/js/util/math"),u=e("module/nadex-positions-and-orders/js/model/position"),c=e("module/nadex-positions-and-orders/js/i18n"),d=e("module/nadex-common/js/view/model/selecteditemtype"),h=e("module/core/js/util/string"),p=e("module/core/js/util/svg"),m=e("module/core/js/view/userinput/tapgesturerecogniser"),f=e("module/core/js/enum/zindexenum");t._generateProfitLossText=function(e){var t;return t=l.isNumber(e)?Number(e).toFixed(u.PROFIT_LOSS_PRECISION):"-",h.merge(i.get("profitLoss"),{profitLoss:t})};var _=t.prototype;return t.create=function(e,n,i){return new t(e,n,i)},t.TEXT_MARGIN=5,t.PRICE_TEXT_PADDING=5,t.POSITION_TEXT_PADDING=10,t.BADGE_HEIGHT=30,_._captureZone=null,_._captureZoneManager=null,_._marketChanges=null,_._market=null,_._dElement=null,_._dContainer=null,_.render=function(){this._marketChanges[s.OPEN_POSITION_VISIBILITY_CHANGED]&&(this._addOpenPosition(),!this._market.isOpenPositionVisible&&this._dElement&&this._clearDom()),this._marketChanges[s.OPEN_POSITION_ADD]&&this._addOpenPosition(),this._dElement&&(this._marketChanges[s.OPEN_POSITION_UPDATE]&&(this._updateProfitLossText(),this._updatePositionText(),this.resize()),this._marketChanges[s.BOUNDING_RECT]&&this.updateCaptureZones(),this._marketChanges[s.SELECTED_ITEM_CHANGED]&&this._dElement.classed("selected",this._market.selectedItemType===d.OPEN_POSITION),this._marketChanges[s.DESELECTED]&&this._dElement.classed("selected",!1),this._marketChanges[s.OPEN_POSITION_DELETE]&&this._clearDom()),this._marketChanges=Object.create(null)},_.resize=function(){var e=this._dElement.select(".profitLossText").node().getBoundingClientRect(),n=this._dElement.select(".positionText").node().getBoundingClientRect(),i=e.width+2*t.PRICE_TEXT_PADDING,o=n.width+2*t.POSITION_TEXT_PADDING;this._dElement.select(".profitLossBackground").attr({width:i}),this._dElement.selectAll(".positionText, .positionBackground").attr({transform:p.svgTranslateAttrX(i)}),this._dElement.select(".positionBackground").attr({width:o}),this._market.openPosition.withWidth(i+o),this.updateCaptureZones()},_.updateCaptureZones=function(){this._captureZone&&this._captureZone.setDimensionsBasedOnElement(this._dElement,this._market.boundingRect)},_._addOpenPosition=function(){this._market.isOpenPositionVisible&&this._market.openPosition&&(this._initDom(),this.resize())},_._createCaptureZone=function(){var e=this._captureZoneManager.create(n.PROPAGATE_UNHANDLED,f.NADEX_POSITIONS),t=m.create().withHandler(this._handleTap.bind(this));e.addGestureRecogniser(t),this._captureZone=e},_._handleTap=function(){this._market.marketStatus===a.MARKET_OPEN&&this._market.setupDealTicket(d.OPEN_POSITION)},_.destroy=function(){this._market.un(null,this),this._clearDom()},_._clearDom=function(){this._dElement&&(this._dElement.remove(),this._dElement=null),this._captureZone&&(this._captureZone.destroy(),this._captureZone=null)},_._generatePositionText=function(e){var t=e.openPosition,n=e.instrumentType===o.BULL?c.get("between"):c.get("above"),i=e.instrumentType===o.BULL?e.getMarketModelLabel():t.formattedLevel;return t.direction+t.size+" "+n+" "+i},_._initDom=function(){
this._dElement=this._dContainer.append("svg:g").classed("openPosition",!0).classed("selected",this._market.selectedItemType===d.OPEN_POSITION).attr("transform",p.svgTranslateAttrX(r.POSITION_BOX_LEFT_MARGIN)),this._dElement.append("svg:rect").attr("height",t.BADGE_HEIGHT).attr("y",-.5*t.BADGE_HEIGHT).classed("positionBackground",!0),this._dElement.append("svg:text").attr("dx",t.POSITION_TEXT_PADDING).attr("dy",t.TEXT_MARGIN).classed("positionText",!0),this._dElement.insert("svg:text",":first-child").attr("dx",t.PRICE_TEXT_PADDING).attr("dy",t.TEXT_MARGIN).classed("profitLossText",!0),this._dElement.insert("svg:rect",":first-child").attr("height",t.BADGE_HEIGHT).attr("y",-.5*t.BADGE_HEIGHT).classed("profitLossBackground",!0),this._updatePositionText(),this._updateProfitLossText(),this._createCaptureZone()},_._updateProfitLossText=function(){var e=this._market.openPosition.profitAndLoss;this._dElement.classed("winning",l.isNumber(e)&&e>=0).classed("losing",l.isNumber(e)&&e<0),this._dElement.select(".profitLossText").text(t._generateProfitLossText(e))},_._updatePositionText=function(){this._dElement.select(".positionText").text(this._generatePositionText(this._market))},_._handleMarketChange=function(e){e===s.OPEN_POSITION_DELETE&&(this._marketChanges=Object.create(null)),this._marketChanges[e]=!0},Object.seal(_),Object.seal(t)})),define("module/nadex-binary-ladder/js/view/renderer/helper/strikelinehelper",["require","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/view/model/marketutil"],(function(e){"use strict";function t(e,t){this._dContainer=t,this._marketChanges=Object.create(null),this._market=e,this._market.on(n.CHANGED,this._handleMarketChange,this),this._initDom()}var n=e("module/nadex-common/js/view/model/market"),i=e("module/nadex-common/js/view/model/marketchangetype"),o=e("module/nadex-common/js/view/model/marketutil");t.create=function(e,n){return new t(e,n)};var r=t.prototype;return r._dContainer=null,r._marketChanges=null,r._market=null,r._dStartLineSegment=null,r._dMainLineSegment=null,r._dPositionConnectingLineSegment=null,r._dEndLineSegment=null,r.render=function(){(this._marketChanges[i.X_RANGE]||this._marketChanges[i.RIGHT_EDGE_POSITION]||this._marketChanges[i.OPEN_POSITION_WIDTH]||this._marketChanges[i.OPEN_POSITION_DELETE]||this._marketChanges[i.WORKING_ORDER_BOX_WIDTH]||this._marketChanges[i.WORKING_ORDER_GROUP_DELETE]||this._marketChanges[i.SELECTED_ITEM_CHANGED]||this._marketChanges[i.DESELECTED]||this._marketChanges[i.OPEN_POSITION_VISIBILITY_CHANGED]||this._marketChanges[i.WORKING_ORDER_VISIBILITY_CHANGED])&&(this._drawLine(),this._styleLines()),this._marketChanges=Object.create(null)},r.destroy=function(){this._market.un(null,this)},r._initDom=function(){this._dStartLineSegment=this._dContainer.append("line").classed("line",!0).classed("start",!0),this._dMainLineSegment=this._dContainer.append("line").classed("line",!0).classed("main",!0),this._dPositionConnectingLineSegment=this._dContainer.append("line").classed("line",!0).classed("positionConnector",!0),this._dEndLineSegment=this._dContainer.append("line").classed("line",!0).classed("end",!0),this._drawLine(),this._styleLines()},r._drawLine=function(){this._market.openPosition&&this._market.workingOrders.length>0&&this._market.isOpenPositionVisible&&this._market.isWorkingOrderVisible?this._drawLineWithOPAndWO():this._market.openPosition&&this._market.isOpenPositionVisible?this._drawLineWithOP():this._market.workingOrders.length>0&&this._market.isWorkingOrderVisible?this._drawLineWithWO():this._drawSimpleLine(),this._drawEndLineSegment()},r._drawEndLineSegment=function(){var e=Math.round(this._market.rightEdgePosition),t=Math.round(this._market.xRange[1]);this._dEndLineSegment.attr("x1",e).attr("x2",t)},r._drawSimpleLine=function(){var e=this._market.xRange[0];this._dStartLineSegment.classed("hidden",!0),this._dMainLineSegment.attr("x1",e).attr("x2",this._leftEdgeOfBuySellBadge()),this._dPositionConnectingLineSegment.classed("hidden",!0)},r._drawLineWithWO=function(){var e=n.POSITION_BOX_LEFT_MARGIN,t=this._market.xRange[0]+this._market.workingOrderBoxWidth+n.POSITION_BOX_LEFT_MARGIN;this._dStartLineSegment.attr("x1",0).attr("x2",e),this._dMainLineSegment.attr("x1",t).attr("x2",this._leftEdgeOfBuySellBadge()),this._dPositionConnectingLineSegment.classed("hidden",!0)},r._drawLineWithOP=function(){var e=n.POSITION_BOX_LEFT_MARGIN,t=this._market.xRange[0]+this._market.openPosition.width+n.POSITION_BOX_LEFT_MARGIN;this._dStartLineSegment.attr("x1",0).attr("x2",e),this._dMainLineSegment.attr("x1",t).attr("x2",this._leftEdgeOfBuySellBadge()),this._dPositionConnectingLineSegment.classed("hidden",!0)},r._drawLineWithOPAndWO=function(){var e=n.POSITION_BOX_LEFT_MARGIN,t=this._market.xRange[0]+this._market.openPosition.width+n.POSITION_BOX_LEFT_MARGIN,i=t+n.POSITION_BOX_LEFT_MARGIN,o=i+this._market.workingOrderBoxWidth;this._dStartLineSegment.attr("x1",0).attr("x2",e),this._dPositionConnectingLineSegment.attr("x1",t).attr("x2",i).classed("hidden",!1),this._dMainLineSegment.attr("x1",o).attr("x2",this._leftEdgeOfBuySellBadge())},r._leftEdgeOfBuySellBadge=function(){return Math.round(this._market.rightEdgePosition-this._market.getBuySellWidth())},r._handleMarketChange=function(e){this._marketChanges[e]=!0},r._styleLines=function(){var e=Object.create(null);this._market.openPosition&&this._market.isOpenPositionVisible?(e.winning=this._market.openPosition.profitAndLoss>=0,e.losing=this._market.openPosition.profitAndLoss<0):e.winning=e.losing=!1,e.buying=o.hasOpenBuyTicket(this._market),e.selling=o.hasOpenSellTicket(this._market),this._dContainer.selectAll(".line").classed(e)},Object.seal(r),Object.seal(t)})),define("module/nadex-positions-and-orders/js/view/renderer/workingorderutils",["require","module/core/js/ext/d3","module/nadex-common/js/model/instrumenttype","module/nadex-positions-and-orders/js/i18n"],(function(e){"use strict";var t=e("module/core/js/ext/d3"),n=e("module/nadex-common/js/model/instrumenttype"),i=e("module/nadex-positions-and-orders/js/i18n"),o=Object.create(null);return o.TEXT_MARGIN=5,o.TEXT_PADDING=10,o.BADGE_HEIGHT=30,o.createWorkingOrderText=function(e,t){var o=t.instrumentType===n.BULL?i.get("between"):i.get("above"),r=t.instrumentType===n.BULL?t.getMarketModelLabel():t.formattedLevel;return e.direction+e.size+" "+o+" "+r},o.createWorkingOrderBadge=function(e,n){var i=t.select(document.createElementNS("http://www.w3.org/2000/svg","g")).attr("class","workingOrder");return i.append("svg:rect").attr("class","positionBackground"),i.append("svg:text").attr("dx",o.TEXT_PADDING).attr("dy",o.TEXT_MARGIN).attr("class","positionText").text(o.createWorkingOrderText(e,n)),i.node()},Object.seal(o)})),define("module/nadex-positions-and-orders/js/view/renderer/helper/workingordergrouphelper",["require","module/core/js/ext/d3","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-positions-and-orders/js/i18n","module/nadex-common/js/view/model/selecteditemtype","module/core/js/util/svg","module/nadex-positions-and-orders/js/view/renderer/workingorderutils","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,t,n){this._captureZoneManager=t,this._dContainer=n,this._marketChanges=[],this._market=e,this._market.on(i.CHANGED,this._handleMarketChange,this),this._addWorkingOrderGroup()}var n=e("module/core/js/ext/d3"),i=e("module/nadex-common/js/view/model/market"),o=e("module/nadex-common/js/view/model/marketchangetype"),r=e("module/nadex-positions-and-orders/js/i18n"),s=e("module/nadex-common/js/view/model/selecteditemtype"),a=e("module/core/js/util/svg"),l=e("module/nadex-positions-and-orders/js/view/renderer/workingorderutils"),u=e("module/core/js/enum/zindexenum");t.create=function(e,n,i){return new t(e,n,i)},t.BUTTON_SIZE=l.BADGE_HEIGHT,t.ICON_SIZE=120,t._createOpenButton=function(){var e=n.select(document.createElementNS("http://www.w3.org/2000/svg","g")).classed("openButton",!0),i=n.svg.symbol().size(t.ICON_SIZE).type("cross");return e.append("svg:rect").classed("background",!0).attr({width:t.BUTTON_SIZE,height:l.BADGE_HEIGHT,transform:a.svgTranslateAttrY(-l.BADGE_HEIGHT/2)}),e.append("svg:path").classed("icon",!0).attr({d:i,transform:a.svgTranslateAttrX(t.BUTTON_SIZE/2)}),e.node()},t._generateWorkingOrderText=function(e){return 1===e.workingOrders.length?l.createWorkingOrderText(e.workingOrders[0],e):e.workingOrders.length.toString()+" "+r.get("workingOrders")};var c=t.prototype;return c._captureZone=null,c._captureZoneManager=null,c._dBackground=null,c._dContainer=null,c._dElement=null,c._dLabel=null,c._dOpenButton=null,c._dText=null,c._marketChanges=null,c._market=null,c.render=function(){for(;this._marketChanges.length;)switch(this._marketChanges.shift()){case o.WORKING_ORDER_LISTING_CLOSED:case o.WORKING_ORDER_GROUP_ADD:this._addWorkingOrderGroup();break;case o.OPEN_POSITION_VISIBILITY_CHANGED:this._positionHorizontally();break;case o.WORKING_ORDER_GROUP_UPDATE:this._updateBadge();case o.OPEN_POSITION_WIDTH:case o.OPEN_POSITION_DELETE:this._positionHorizontally();break;case o.SELECTED_ITEM_CHANGED:case o.DESELECTED:this._updateSelection();break;case o.WORKING_ORDER_LISTING_OPENED:case o.WORKING_ORDER_VISIBILITY_CHANGED:this._updateVisibility();break;case o.WORKING_ORDER_GROUP_DELETE:this._removeBadge();break;case o.BOUNDING_RECT:this.updateCaptureZones()}},c.destroy=function(){this._market.un(null,this),this._marketChanges=null,this._removeBadge()},c._createBadge=function(){this._dElement=this._dContainer.append("svg:g").classed("workingOrderGroup",!0),this._dOpenButton=this._dElement.appendElement(t._createOpenButton()),this._dLabel=this._dElement.appendElement(l.createWorkingOrderBadge(this._market.workingOrders[0],this._market)),this._dText=this._dLabel.select(".positionText"),this._dBackground=this._dLabel.select(".positionBackground").attr({height:l.BADGE_HEIGHT,y:-.5*l.BADGE_HEIGHT}),this._captureZone=this._captureZoneManager.createTapZone(this._handleTap.bind(this),u.NADEX_POSITIONS)},c._updateBadge=function(){this._dElement&&(this._dElement.classed("multiple",this._isMultiple()),this._dText.text(t._generateWorkingOrderText(this._market)))},c._updateSelection=function(){this._dElement&&this._dElement.classed("selected",this._market.selectedItemType===s.WORKING_ORDER)},c._resize=function(){var e,n;this._dElement&&(e=this._dText.node().getBoundingClientRect().width+2*l.TEXT_PADDING,n=this._isMultiple()?t.BUTTON_SIZE:0,this._dBackground.attr("width",e),this._market.withWorkingOrderBoxWidth(e+n))},c._positionHorizontally=function(){var e=this._market.openPosition&&this._market.isOpenPositionVisible?this._market.openPosition.width+i.POSITION_BOX_LEFT_MARGIN:0;this._dElement&&(this._dElement.attr("transform",a.svgTranslateAttrX(e+i.POSITION_BOX_LEFT_MARGIN)),this._dLabel.attr("transform",a.svgTranslateAttrX(this._isMultiple()?t.BUTTON_SIZE:0)),this.updateCaptureZones())},c.updateCaptureZones=function(){this._captureZone&&this._captureZone.setDimensionsBasedOnElement(this._dElement,this._market.boundingRect)},c._addWorkingOrderGroup=function(){this._market.workingOrders.length&&this._market.isWorkingOrderVisible&&(this._removeBadge(),this._createBadge(),this._updateBadge(),this._updateSelection(),this._resize(),this._positionHorizontally())},c._updateVisibility=function(){this._market.isWorkingOrderVisible?this._addWorkingOrderGroup():(this._market.setListingVisible(!1),this._removeBadge())},c._removeBadge=function(){this._dElement&&(this._dElement.remove(),this._dBackground=null,this._dElement=null,this._dLabel=null,this._dOpenButton=null,this._dText=null),this._captureZone&&(this._captureZone.destroy(),this._captureZone=null)},c._isMultiple=function(){return this._market.workingOrders.length>1},c._handleTap=function(){this._isMultiple()?this._market.setListingVisible(!0):this._market.setupDealTicket(s.WORKING_ORDER,this._market.workingOrders[0].direction,this._market.workingOrders[0].dealId)},c._handleMarketChange=function(e){this._marketChanges.push(e)},Object.seal(c),Object.seal(t)})),define("module/nadex-common/js/view/renderer/visiblemarketrenderer",["require","module/nadex-binary-ladder/js/view/renderer/helper/buysellbuttonhelper","module/nadex-common/js/model/instrumenttype","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-binary-ladder/js/view/renderer/helper/marketlabelhelper","module/nadex-common/js/view/renderer/helper/nullhelper","module/nadex-positions-and-orders/js/view/renderer/helper/openpositionhelper","module/nadex-binary-ladder/js/view/renderer/helper/strikelinehelper","module/core/js/util/svg","module/nadex-positions-and-orders/js/view/renderer/helper/workingordergrouphelper"],(function(e){"use strict";function t(e,t){this._marketChanges=Object.create(null),this._market=e,this._market.on(o.CHANGED,this._handleMarketChange,this),this._captureZoneManager=t}var n=e("module/nadex-binary-ladder/js/view/renderer/helper/buysellbuttonhelper"),i=e("module/nadex-common/js/model/instrumenttype"),o=e("module/nadex-common/js/view/model/market"),r=e("module/nadex-common/js/view/model/marketchangetype"),s=e("module/nadex-binary-ladder/js/view/renderer/helper/marketlabelhelper"),a=e("module/nadex-common/js/view/renderer/helper/nullhelper"),l=e("module/nadex-positions-and-orders/js/view/renderer/helper/openpositionhelper"),u=e("module/nadex-binary-ladder/js/view/renderer/helper/strikelinehelper"),c=e("module/core/js/util/svg"),d=e("module/nadex-positions-and-orders/js/view/renderer/helper/workingordergrouphelper");t.create=function(e,n){return new t(e,n)};var h=t.prototype;return h._captureZoneManager=null,h._workingOrderGroupHelper=null,h._openPositionHelper=null,h._marketLabelHelper=null,h._marketChanges=null,h.initDom=function(e){this._dContainer=e.append("g").classed("market",!0),this._openPositionHelper=l.create(this._market,this._captureZoneManager,this._dContainer),this._workingOrderGroupHelper=d.create(this._market,this._captureZoneManager,this._dContainer),this._strikeLineHelper=this._market.instrumentType===i.BULL?a.create():u.create(this._market,this._dContainer),this._marketLabelHelper=s.create(this._market,this._dContainer),this._buySellButtonHelper=n.create(this._market,this._captureZoneManager,this._dContainer),this._positionVertically()},h.render=function(){this._marketChanges[r.Y_POSITION]&&this._positionVertically(),this._openPositionHelper.render(),this._workingOrderGroupHelper.render(),this._strikeLineHelper.render(),this._marketLabelHelper.render(),this._buySellButtonHelper.render(),this._marketChanges=Object.create(null)},h.destroy=function(){this._market.un(null,this),this._workingOrderGroupHelper.destroy(),this._openPositionHelper.destroy(),this._strikeLineHelper.destroy(),this._marketLabelHelper.destroy(),this._buySellButtonHelper.destroy(),this._dContainer.remove()},h._positionVertically=function(){this._dContainer.attr("transform",c.svgTranslateAttrXY(0,this._market.yPosition)),this._openPositionHelper.updateCaptureZones(),this._workingOrderGroupHelper.updateCaptureZones()},h._handleMarketChange=function(e){this._marketChanges[e]=!0},Object.seal(h),Object.seal(t)})),define("module/nadex-common/js/view/renderer/marketrenderer",["require","module/nadex-common/js/view/renderer/hiddenmarketrenderer","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/view/renderer/visiblemarketrenderer"],(function(e){"use strict";function t(e,t,n,o){this._marketChanges=Object.create(null),this._dHiddenMarketsContainer=e,this._dVisibleMarketsContainer=t,this._market=n,this._market.on(i.CHANGED,this._handleMarketChange,this),this._captureZoneManager=o}var n=e("module/nadex-common/js/view/renderer/hiddenmarketrenderer"),i=e("module/nadex-common/js/view/model/market"),o=e("module/nadex-common/js/view/model/marketchangetype"),r=e("module/nadex-common/js/view/renderer/visiblemarketrenderer");t.create=function(e,n,i,o){return new t(e,n,i,o)};var s=t.prototype;return s._captureZoneManager=null,s._currentMarketRenderer=null,s._dHiddenMarketsContainer=null,s._dVisibleMarketsContainer=null,s._marketChanges=null,s.initDom=function(){this._market.isHidden?(this._currentMarketRenderer=n.create(this._market),this._currentMarketRenderer.initDom(this._dHiddenMarketsContainer)):(this._currentMarketRenderer=r.create(this._market,this._captureZoneManager),this._currentMarketRenderer.initDom(this._dVisibleMarketsContainer))},s.render=function(){this._marketChanges[o.HIDDEN_OR_SHOWN]&&(this._currentMarketRenderer.destroy(),this.initDom()),this._currentMarketRenderer.render(),this._marketChanges=Object.create(null)},s.destroy=function(){this._market.un(null,this),this._currentMarketRenderer.destroy()},s._handleMarketChange=function(e){this._marketChanges[e]=!0},Object.seal(s),Object.seal(t)})),define("module/nadex-common/js/model/dealtype",[],(function(){"use strict";return Object.freeze({CREATE:"Create",EDIT_OP:"Edit_OP",EDIT_WO:"Edit_WO"})})),define("module/nadex-common/js/view/model/overlaphandler",["require","module/core/js/util/array","module/core/js/util/functional"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/array"),i=e("module/core/js/util/functional");t.create=function(){return new t},t.MIN_MARKET_DISTANCE=90,t.breadthFirstIntegerIntervalSplit=function(e){for(var t,n,i,o=[],r=[e];r.length>0;){for(n=[],i=0;i<r.length;i++)t=Math.floor((r[i][0]+r[i][1])/2),o.push(t),t-r[i][0]>1&&n.push([r[i][0],t]),r[i][1]-t>1&&n.push([t,r[i][1]]);r=n}return o},t.constructOrderingArray=function(e){var i;return e<3?n.range(e):(i=t.breadthFirstIntegerIntervalSplit([0,e-1]),[0,e-1].concat(i))},t.levelComparator=function(e,t){return t.level-e.level},t._moveSelectedMarketToFront=function(e){var t,n;for(n=0;n<e.length;n++)if(e[n].selectedItemType)return t=e.splice(n,1)[0],void e.unshift(t)},t._resetMarketLevelToPreShiftedValue=function(e){e.level=e.originalLevel};var o=t.prototype;return o._orderedMarketIndices=null,o._scaleRatio=1,o.withScaleRatio=i.setter("_scaleRatio"),o.hideOverlappingMarkets=function(e,n){if(0!==e.length){var i,o,r,s,a=[];for(e.sort(t.levelComparator),i=this._calculateMarketIndicesOrder(e.length),t._moveSelectedMarketToFront(e),s=0;s<i.length;s++)o=n(e[i[s]].level),r=this._marketOverlaps(o,a),r||a.push(o),e[i[s]].withIsHidden(r)}},o.shiftClashingMarkets=function(e,n){var i,o,r=n.invert(0)-n.invert((t.MIN_MARKET_DISTANCE+1)*this._scaleRatio);for(e.forEach(t._resetMarketLevelToPreShiftedValue),o=0;o<e.length;o++)(i=this._findClashingMarket(e,e[o]))&&(i.level-=r,o--)},o._findClashingMarket=function(e,t){return n.find(e,(function(e){return e.level===t.level&&e.epic!==t.epic}))},o._calculateMarketIndicesOrder=function(e){return this._orderedMarketIndices&&e===this._orderedMarketIndices.length||(this._orderedMarketIndices=t.constructOrderingArray(e)),this._orderedMarketIndices},o._marketOverlaps=function(e,n){return 0!==n.length&&n.some((function(n){return Math.abs(e-n)<=t.MIN_MARKET_DISTANCE*this._scaleRatio}),this)},Object.seal(o),Object.seal(t)})),define("module/nadex-common/js/view/model/nadexpresentationmodel",["require","module/core/js/view/presentationmodel/abstractpresentationmodel","module/core/js/util/class","module/nadex-common/js/model/dealtype","module/core/js/util/functional","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/core/js/util/object","module/nadex-common/js/view/model/overlaphandler","module/nadex-common/js/view/model/selecteditemtype"],(function(e){"use strict";function t(){this._markets=Object.create(null),this._overlapHandler=u.create()}var n=e("module/core/js/view/presentationmodel/abstractpresentationmodel"),i=e("module/core/js/util/class"),o=e("module/nadex-common/js/model/dealtype"),r=e("module/core/js/util/functional"),s=e("module/nadex-common/js/view/model/market"),a=e("module/nadex-common/js/view/model/marketchangetype"),l=e("module/core/js/util/object"),u=e("module/nadex-common/js/view/model/overlaphandler"),c=e("module/nadex-common/js/view/model/selecteditemtype");i.extend(t,n),t.DEAL_OPENED="DEAL_OPENED",t.MARKETS_UPDATED="MARKETS_UPDATED",t.NEEDS_REFIT="NEEDS_REFIT",t.SELECTION_STATE_CHANGED="SELECTION_STATE_CHANGED",t.OPEN_POSITIONS_VISIBILITY_CHANGED="OPEN_POSITIONS_VISIBILITY_CHANGED",t.WORKING_ORDERS_VISIBILITY_CHANGED="WORKING_ORDERS_VISIBILITY_CHANGED",t._distanceBetweenMarketModels=function(e,t){return Math.abs(e-t)};var d=t.prototype;return d.rightMargin=null,d._markets=null,d._overlapHandler=null,d._selectedMarket=null,d.getSelectedMarket=r.getter("_selectedMarket"),d.withRightMargin=r.setter("rightMargin"),d.addMarkets=function(e,n,i){i.forEach(this._addMarket.bind(this,e,n)),this._overlapHandler.shiftClashingMarkets(i,n),this._overlapHandler.hideOverlappingMarkets(i,n),this.fire(t.MARKETS_UPDATED)},d.removeMarkets=function(){for(var e in this._markets)this._removeMarket(e)},d.removeMarket=function(e){this._removeMarket(e),this.fire(t.MARKETS_UPDATED)},d.updateOpenPositionsVisibilityChanged=function(e){r.invokeCall(l.values(this._markets),"setOpenPositionVisibility",e)},d.updateWorkingOrdersVisibilityChanged=function(e){r.invokeCall(l.values(this._markets),"setWorkingOrderVisibility",e)},d.updateMarket=function(e,t){this._markets[e].updateWithNewData(t)},d.hasMarket=function(e){return!!this._markets[e]},d.updateMarketOpenPosition=function(e,t){this._markets[e].withOpenPosition(t)},d.updateMarketWorkingOrders=function(e,t){this._markets[e].withWorkingOrders(t)},d.updateXPositions=function(e){r.invokeCall(l.values(this._markets),"withXRange",e.range())},d.updateYPositions=function(e){var t,n=l.values(this._markets);for(this._overlapHandler.shiftClashingMarkets(n,e),this._overlapHandler.hideOverlappingMarkets(n,e),t=0;t<n.length;t++)n[t].withYPosition(e(n[t].level))},d.setBoundingRect=function(e){r.invokeApply(l.values(this._markets),"withBoundingRect",[e])},d.setRightEdgePosition=function(e){r.invokeApply(l.values(this._markets),"withRightEdgePosition",[e])},d.getMarkets=function(){return l.values(this._markets)},d.selectItem=function(e,t,n,i){this._markets[e].setSelectedItem(t,n,i)},d.deselect=function(){this._selectedMarket&&(this._selectedMarket.deselect(),this._selectedMarket=null)},d.destroy=function(){this.removeMarkets(),t.superclass.destroy.call(this)},d._addMarket=function(e,t,n){this._markets[n.epic]||(this._markets[n.epic]=n,n.withXRange(e.range()),n.withYPosition(t(n.level)),n.on(s.CHANGED,this._handleMarketChanged.bind(this,n),this),n.on(s.OPEN_DEAL_TICKET,this._openDealOnMarket.bind(this,n),this))},d._removeMarket=function(e){this._selectedMarket===this._markets[e]&&this.deselect(),this._markets[e].un(null,this),delete this._markets[e]},d._openDealOnMarket=function(e){var t,n,i;e.selectedItemType===c.BUY_BUTTON?this._fireDealOpen(o.CREATE,e.epic,"+",null,null,e.buyPrice):e.selectedItemType===c.SELL_BUTTON?this._fireDealOpen(o.CREATE,e.epic,"-",null,null,e.sellPrice):e.selectedItemType===c.OPEN_POSITION&&e.openPosition?(n=e.openPosition,t="+"===n.direction?e.sellPrice:e.buyPrice,this._fireDealOpen(o.EDIT_OP,e.epic,n.direction,n.size,n.dealId,t)):e.selectedItemType===c.WORKING_ORDER&&(i=e.getSelectedDeal())&&this._fireDealOpen(o.EDIT_WO,e.epic,i.direction,i.originalSize,i.dealId)},d._fireDealOpen=function(e,n,i,o,r,s){this.fire(t.DEAL_OPENED,e,n,i,o,r,s)},d._handleMarketChanged=function(e,n){var i=s.areEqual(this._selectedMarket,e);n===a.SELECTED_ITEM_CHANGED&&(i||(this.deselect(),this._selectedMarket=e),this.fire(t.SELECTION_STATE_CHANGED,e.epic,e.selectedItemType,e.selectedDirection,e.selectedDealId)),n!==a.WORKING_ORDER_LISTING_OPENED&&n!==a.WORKING_ORDER_LISTING_CLOSED||this.fire(n,e)},Object.seal(d),Object.seal(t)})),define("module/nadex-common/js/view/renderer/marketsrenderer",["require","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/core/js/util/functional","module/nadex-common/js/view/model/market","module/nadex-common/js/view/renderer/marketrenderer","module/nadex-common/js/view/model/nadexpresentationmodel"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments),this._captureZoneManager=o,this._marketRenderers=[]}var n=e("module/core/js/view/renderer/abstractrenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/nadex-common/js/view/model/market"),s=e("module/nadex-common/js/view/renderer/marketrenderer"),a=e("module/nadex-common/js/view/model/nadexpresentationmodel");i.extend(t,n);var l=t.prototype;return l._dHiddenMarketsContainer=null,l._dVisibleMarketsContainer=null,l.initDom=function(){return this._dHiddenMarketsContainer=this.dContainer.append("g").classed("hiddenMarkets",!0),this._dVisibleMarketsContainer=this.dContainer.append("g").classed("visibleMarkets",!0),this},l.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(a.MARKETS_UPDATED,this._handleMarketsChanged,this),this._handleMarketsChanged()},l.render=function(){o.invokeApply(this._marketRenderers,"render")},l.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._presentationModel.getMarkets().forEach((function(e){e.un(null,this)}),this),o.invokeApply(this._marketRenderers,"destroy"),this._marketRenderers=[]},l._handleMarketsChanged=function(){o.invokeApply(this._marketRenderers,"destroy"),this._marketRenderers=[],this._presentationModel.getMarkets().forEach(this._addMarket,this)},l._addMarket=function(e){this._createMarketRenderer(e),e.on(r.CHANGED,this.renderOnFrameEnd,this)},l._createMarketRenderer=function(e){var t=s.create(this._dHiddenMarketsContainer,this._dVisibleMarketsContainer,e,this._captureZoneManager);t.initDom(),this._marketRenderers.push(t)},Object.seal(l),Object.seal(t)})),define("module/nadex-common/js/view/factory/marketfactory",["require","module/nadex-common/js/view/model/market"],(function(e){"use strict";function t(){}var n=e("module/nadex-common/js/view/model/market");return t.createMarket=function(e){return n.create().withBuyPrice(e.buyPrice).withSellPrice(e.sellPrice).withEpic(e.epic).withOriginalLevel(e.level).withLevel(e.level).withMarketStatus(e.marketStatus).withFormattedLevel(e.formattedLevel).withDecimalPlaces(e.decimalPlaces).withInstrumentType(e.instrumentType).withFloor(e.floor).withCeiling(e.ceiling)},Object.seal(t)})),define("module/nadex-common/js/model/marketselection",["require"],(function(e){"use strict";function t(e,t,n,i){this.epic=e,this.selectedItemType=t,this.direction=n,this.dealId=i}var n=t.prototype;return n.epic=null,n.selectedItemType=null,n.direction=null,n.dealId=null,Object.seal(n),Object.seal(t)})),define("module/nadex-positions-and-orders/js/view/factory/openpositionfactory",["require","module/nadex-positions-and-orders/js/view/model/openposition"],(function(e){"use strict";var t=e("module/nadex-positions-and-orders/js/view/model/openposition"),n={};return n.createOpenPosition=function(e){return e?t.create().withEpic(e.epic).withDealId(e.dealId).withDirection(e.direction).withSize(e.size).withFormattedLevel(e.formattedLevel).withOpeningLevel(e.openingLevel).withProfitAndLoss(e.profitAndLoss):null},Object.seal(n)})),define("module/nadex-positions-and-orders/js/view/factory/workingorderfactory",["require","module/nadex-positions-and-orders/js/view/model/workingorder"],(function(e){"use strict";var t=e("module/nadex-positions-and-orders/js/view/model/workingorder"),n={};return n.createWorkingOrder=function(e){return t.create().withEpic(e.epic).withDirection(e.direction).withSize(e.size).withOriginalSize(e.originalSize).withDealId(e.dealId)},Object.seal(n)})),define("module/nadex-common/js/controller/nadexpresentationcontroller",["require","module/core/js/view/abstractpresentationcontroller","module/core/js/util/array","module/core/js/view/axisconstants","module/core/js/util/class","module/nadex-common/js/model/dealtype","module/core/js/util/functional","module/nadex-common/js/view/factory/marketfactory","module/nadex-common/js/model/marketselection","module/nadex-common/js/view/model/nadexpresentationmodel","module/nadex-positions-and-orders/js/view/factory/openpositionfactory","module/nadex-common/js/view/model/selecteditemtype","module/core/js/view/visiblewindow","module/nadex-positions-and-orders/js/view/factory/workingorderfactory"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this,e),this._recalculateBoundingRect=a.debounce(this._recalculateBoundingRect.bind(this),50)}var n=e("module/core/js/view/abstractpresentationcontroller"),i=e("module/core/js/util/array"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/util/class"),s=e("module/nadex-common/js/model/dealtype"),a=e("module/core/js/util/functional"),l=e("module/nadex-common/js/view/factory/marketfactory"),u=e("module/nadex-common/js/model/marketselection"),c=e("module/nadex-common/js/view/model/nadexpresentationmodel"),d=e("module/nadex-positions-and-orders/js/view/factory/openpositionfactory"),h=e("module/nadex-common/js/view/model/selecteditemtype"),p=e("module/core/js/view/visiblewindow"),m=e("module/nadex-positions-and-orders/js/view/factory/workingorderfactory");r.extend(t,n);var f=t.prototype;return f._currentHierarchy=null,f.startListening=function(e){this._visibleWindow=e,this._visibleWindow.isReadyForRender()?this._handleAxisReady(o.INITIALISED):this._visibleWindow.on(p.READY_FOR_RENDER,this._handleAxisReady,this,{once:!0})},f._handleAxisReady=function(){this._eventBus.subscribe("nadex/hierarchy/loaded",this._handleHierarchyChanged,this),this._eventBus.subscribe("chart/view/visibleWindow/moved/*",this._handleVisibleWindowMoved,this),this._eventBus.subscribe("nadex/marketModels/added",this._handleBinaryLaddersAdded,this),this._eventBus.subscribe("nadex/marketModels/updated",this._handleBinaryLaddersUpdated,this),this._eventBus.subscribe("nadex/marketModels/deleted",this._handleBinaryLaddersDeleted,this),this._initialiseOpenPositions(),this._initialiseWorkingOrders(),this._eventBus.subscribe("api/in/chart/reset",this._handleChartReset,this),this._eventBus.subscribe("api/in/deal/open",this._handleInboundDealOpen,this),this._presentationModel.on(c.DEAL_OPENED,this._handleOutboundDealOpen,this),this._presentationModel.on(c.SELECTION_STATE_CHANGED,this._handleSelectionStateChanged,this);var e=this._moduleLoader.getModule("nadexPositionsAndOrders").getMarketSelection();e&&this._presentationModel.selectItem(e.epic,e.selectedItemType,e.direction,e.dealId)},f._handleSelectionStateChanged=function(e,t,n,i){var o=new u(e,t,n,i);this._eventBus.publish("nadex/marketSelection",[o])},f._initialiseOpenPositions=function(){var e=this._moduleLoader.getModule("nadexPositionsAndOrders"),t=e.getSettingsManager();e.getOpenPositions().forEach(this._handleOpenPositionUpdated,this),this._eventBus.subscribe("nadex/openPositions/added",this._handleOpenPositionUpdated,this),this._eventBus.subscribe("nadex/openPositions/updated",this._handleOpenPositionUpdated,this),this._eventBus.subscribe("nadex/openPositions/deleted",this._handleOpenPositionDeleted,this),this._eventBus.subscribe("nadex/openPositions/visibilityUpdated",a.delegate("_presentationModel","updateOpenPositionsVisibilityChanged"),this),this._presentationModel.updateOpenPositionsVisibilityChanged(t.getDealingOpenPositionsVisibility())},f._initialiseWorkingOrders=function(){var e,t=this._moduleLoader.getModule("nadexPositionsAndOrders"),n=t.getSettingsManager(),o=t.getWorkingOrders(),r=i.groupBy(o,"epic");for(e in r)this._handleWorkingOrdersUpdated(e,r[e]);this._eventBus.subscribe("nadex/workingOrders/added",this._handleWorkingOrdersUpdated,this),this._eventBus.subscribe("nadex/workingOrders/updated",this._handleWorkingOrdersUpdated,this),this._eventBus.subscribe("nadex/workingOrders/deleted",this._handleWorkingOrdersUpdated,this),
this._eventBus.subscribe("nadex/workingOrders/visibilityUpdated",a.delegate("_presentationModel","updateWorkingOrdersVisibilityChanged"),this),this._presentationModel.updateWorkingOrdersVisibilityChanged(n.getDealingWorkingOrdersVisibility())},f.stopListening=function(){this._presentationModel&&(this._presentationModel.un(null,this),this._presentationModel.removeMarkets()),this._visibleWindow&&this._visibleWindow.visibleDateRange.un(null,this),this._subView&&this._subView.getChartView().un(null,this),t.superclass.stopListening.call(this)},f._handleChartReset=function(){this._eventBus.flush("api/in/chart/reset"),this._eventBus.flush("api/in/deal/open"),this._eventBus.publish("nadex/marketSelection",[null]),this._presentationModel.deselect()},f._handleHierarchyChanged=function(e){this._currentHierarchy&&this._currentHierarchy!==e?this._handleChartReset():this._handleRightEdgePositionChange(),this._currentHierarchy=e},f._handleInboundDealOpen=function(e,t,n,i,o){var r=this._presentationModel;r.hasMarket(t)&&(this._eventBus.flush("api/in/chart/reset"),this._eventBus.flush("api/in/deal/open"),e===s.CREATE?r.selectItem(t,"+"===n?h.BUY_BUTTON:h.SELL_BUTTON,n):e===s.EDIT_OP?r.selectItem(t,h.OPEN_POSITION,n):e===s.EDIT_WO&&r.selectItem(t,h.WORKING_ORDER,n,o))},f._handleOutboundDealOpen=function(e,t,n,i,o,r){this._eventBus.publish("api/out/deal/open",[e,t,n,i,o,r])},f._handleBinaryLaddersAdded=function(e,t){this._presentationModel.addMarkets(this._visibleWindow.getXScale(),this._visibleWindow.y,t.map(l.createMarket)),this._handleRightEdgePositionChange()},f._handleBinaryLaddersDeleted=function(e){this._presentationModel.removeMarket(e)},f._handleBinaryLaddersUpdated=function(e){this._presentationModel.updateMarket(e.epic,e)},f._handleOpenPositionUpdated=function(e){this._presentationModel.updateMarketOpenPosition(e.epic,d.createOpenPosition(e))},f._handleOpenPositionDeleted=function(e){this._presentationModel.updateMarketOpenPosition(e.epic,null)},f._handleWorkingOrdersUpdated=function(e,t){this._presentationModel.updateMarketWorkingOrders(e,t.map(m.createWorkingOrder))},f._handleVisibleWindowMoved=function(e,t){t&&(this._presentationModel.updateYPositions(this._visibleWindow.y),t&(o.RESIZED|o.INITIALISED)&&this._recalculateBoundingRect()),e&(o.RESIZED|o.INITIALISED)&&(this._presentationModel.updateXPositions(this._visibleWindow.getXScale()),this._handleRightEdgePositionChange())},f._recalculateBoundingRect=function(){var e={left:0,top:0,right:this._visibleWindow.width(),bottom:this._visibleWindow.height()};this._presentationModel.setBoundingRect(e)},f._handleRightEdgePositionChange=function(){var e=this._visibleWindow.visibleDateRange.width(),t=e-this._presentationModel.rightMargin;this._presentationModel.setRightEdgePosition(t)},f.destroy=function(){this._recalculateBoundingRect.abort(),t.superclass.destroy.call(this)},Object.seal(f),Object.seal(t)})),define("module/core/js/view/renderer/abstractshadedarearenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractprojectedrenderer","module/core/js/view/axisconstants","module/core/js/view/chartanimationconstants","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/interpolation","module/core/js/util/oop","module/core/js/view/projection/ordinals/screenprojection","module/core/js/util/svg","module/core/js/view/visiblewindow","module/core/js/view/projection/xyprojection"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractprojectedrenderer"),o=e("module/core/js/view/axisconstants"),r=e("module/core/js/view/chartanimationconstants"),s=e("module/core/js/util/class"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/interpolation"),u=e("module/core/js/util/oop"),c=e("module/core/js/view/projection/ordinals/screenprojection"),d=e("module/core/js/util/svg"),h=e("module/core/js/view/visiblewindow"),p=e("module/core/js/view/projection/xyprojection");s.extend(t,i);var m=t.prototype;return m._dShading=null,m._dLine=null,m._animationNamespace=null,m._xHasMoved=!1,m._directionTransformation="",m._createProjection=function(){return new p(new c,new c)},m.render=function(){this._handleXScaleChange(),this._updateTransform()},m.startRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.startRedrawingBasedOnChangesInVisibleWindow.call(this),this._visibleWindow.on(h.MOVED,this._handleVisibleWindowMoved,this),this._subscribeToChanges(),this._updateDirection()},m.stopRedrawingBasedOnChangesInVisibleWindow=function(){t.superclass.stopRedrawingBasedOnChangesInVisibleWindow.call(this),this._visibleWindow.un(null,this),this._unsubscribeFromChanges()},m._subscribeToChanges=u.abstractMethod,m._unsubscribeFromChanges=u.abstractMethod,m._handleVisibleWindowMoved=function(e,t){e&o.RESIZED&&this._handleXScaleChange(),!this._xHasMoved&&e&o.MOVED&&(this._xHasMoved=!0,this._handleXScaleChange()),t&&this._updateTransform(!0)},m._handleXScaleChange=u.abstractMethod,m.initDom=function(){return this.dContainer.classed("hidden",!0),this._dShading=this.dContainer.append("svg:rect").attr("class","win").data([null]),this._dLine=this.dContainer.append("svg:line").attr("class","line"),this},m._getBaseValue=u.abstractMethod,m._isAboveAreaShaded=u.abstractMethod,m._resizeLineAndShading=function(e,t){this._dLine.attr("x2",e),this._dShading.attr("width",t)},m._updateDirection=function(){this._isAboveAreaShaded()?this._directionTransformation=-1:this._directionTransformation=1},m._projectOnYAxis=function(e){return this._projection.inY.roundValue(this._visibleWindow.y(e))},m._updateTransformStep=function(e){var t=this._getAreaHeight(e),n=Math.abs(this._isAboveAreaShaded()?e:t);this.dContainer.attr("transform",d.svgTranslateAttrY(e)+" "+d.svgScaleAttrY(this._directionTransformation)),this._dShading.attr("height",n)},m._getAreaHeight=function(e){return this._visibleWindow.height()-e},m._updateTransform=function(e){var t,i=this._getBaseValue(),o=this._previousValue;"number"==typeof i&&(this._animationPoller.killTasks(this._animationNamespace),o&&!e?(t=a.composeBound(this,this._updateTransformStep,a.partialComplete(l.easedInterpolation,n.ease(r.ANIM_EASE),this._projectOnYAxis(o),this._projectOnYAxis(i))),this._animationPoller.newFixedTimeTask(this._animationNamespace,t,r.ANIM_DURATION)):this._updateTransformStep(this._projectOnYAxis(i)),this._previousValue=i)},m._replot=a.empty,Object.seal(m),Object.seal(t)})),define("module/nadex-common/js/view/renderer/winningarearenderer",["require","module/core/js/view/renderer/abstractshadedarearenderer","module/core/js/util/class","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/view/model/marketutil","module/nadex-common/js/view/model/nadexpresentationmodel"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments),this._captureZoneManager=o}var n=e("module/core/js/view/renderer/abstractshadedarearenderer"),i=e("module/core/js/util/class"),o=e("module/nadex-common/js/view/model/market"),r=e("module/nadex-common/js/view/model/marketchangetype"),s=e("module/nadex-common/js/view/model/marketutil"),a=e("module/nadex-common/js/view/model/nadexpresentationmodel");i.extend(t,n);var l=t.prototype;return l.render=function(){var e=this._presentationModel.getSelectedMarket();this.dContainer.classed("hidden",!e),e&&(this._updateDirection(),this._updateTransform(!0))},l._subscribeToChanges=function(){this._presentationModel.on(a.MARKETS_UPDATED,this._handleMarketsAdded,this),this._handleMarketsAdded()},l._unsubscribeFromChanges=function(){this._presentationModel.un(null,this),this._presentationModel.getMarkets().forEach((function(e){e.un(null,this)}),this)},l._onMarketStateChange=function(e){e!==r.DESELECTED&&e!==r.SELECTED_ITEM_CHANGED||this.renderOnFrameEnd()},l._handleMarketsAdded=function(){this._presentationModel.getMarkets().forEach(this._handleMarketAdded,this)},l._handleMarketAdded=function(e){e.on(o.CHANGED,this._onMarketStateChange,this)},l._isAboveAreaShaded=function(){var e=this._presentationModel.getSelectedMarket();return e&&s.hasOpenBuyTicket(e)},l._getBaseValue=function(){var e=this._presentationModel.getSelectedMarket();return e?e.level:null},l._handleXScaleChange=function(){this._resizeLineAndShading(0,this._visibleWindow.width())},Object.seal(l),Object.seal(t)})),define("module/nadex-binary-ladder/js/config/subviewsconfig",["require","module/nadex-common/js/view/renderer/marketsoverflowrenderer","module/nadex-common/js/view/renderer/marketsrenderer","module/nadex-common/js/controller/nadexpresentationcontroller","module/nadex-common/js/view/model/nadexpresentationmodel","module/core/js/util/object","module/nadex-common/js/view/renderer/winningarearenderer"],(function(e){"use strict";var t=e("module/nadex-common/js/view/renderer/marketsoverflowrenderer"),n=e("module/nadex-common/js/view/renderer/marketsrenderer"),i=e("module/nadex-common/js/controller/nadexpresentationcontroller"),o=e("module/nadex-common/js/view/model/nadexpresentationmodel"),r=e("module/core/js/util/object"),s=e("module/nadex-common/js/view/renderer/winningarearenderer"),a={prices:{presentationControllers:{nadexPresentationController:{type:i,presentationModel:{type:o,properties:{rightMargin:100}}}},renderers:{binaryWinningArea:{type:s,group:"studyOverlay",position:"studyOverlay",presentationController:"nadexPresentationController",properties:{relativeWeighting:0}},overflow:{type:t,group:"studyOverlay",position:"studyOverlay",presentationController:"nadexPresentationController",properties:{relativeWeighting:2}},markets:{type:n,group:"studyOverlay",position:"studyOverlay",presentationController:"nadexPresentationController",properties:{relativeWeighting:1}}}}};return r.recursiveFreeze(a)})),define("module/nadex-binary-ladder/js/nadex-binary-ladder",["require","module/nadex-common/js/model/nadexmodel","module/nadex-binary-ladder/js/config/subviewsconfig"],(function(e){"use strict";function t(e){this._eventBus=e}var n=e("module/nadex-common/js/model/nadexmodel"),i=e("module/nadex-binary-ladder/js/config/subviewsconfig"),o=t.prototype;return o._eventBus=null,o._model=null,o.init=function(){this._eventBus.publish("subViews/config",["nadexBinaryLadder",i]),this._model=n.create(this._eventBus)},o.destroy=function(){this._model.destroy(),this._eventBus=null},Object.seal(o),Object.seal(t)})),define("module/core/js/serviceclient/positionstreamingclient",["require","streaming","module/core/js/util/error","module/core/js/util/string","module/core/js/model/environmentinfo"],(function(e){"use strict";function t(e,t,n,i,o){this._eventBus=e,this._lightstreamerSubscriptionFormat=t,this._newValueField=n,this._streamingMaxRate=i,this._lsUpdatePrefix=o||""}var n=e("streaming"),i=e("module/core/js/util/error"),o=e("module/core/js/util/string"),r=e("module/core/js/model/environmentinfo"),s=t.prototype;return s._lightStreamerSubscription=null,s._lightstreamerSubscriptionFormat=null,s._newValueField=null,s._streamingMaxRate=null,s._lsUpdatePrefix=null,s.startListening=function(e,t){var i=o.merge(this._lightstreamerSubscriptionFormat,{accountId:e});this._lightStreamerSubscription=n.subscribe(i,[this._newValueField],"RAW",this._handleUpdateFromLightstreamer.bind(this,t),this._streamingMaxRate,r.getInstance().getDataAdaptor())},s.stopListening=function(){this._lightStreamerSubscription&&(this._lightStreamerSubscription.unsubscribe(),this._lightStreamerSubscription=null)},s._cleanLightstreamerUpdate=function(e){if(0!==e.indexOf(this._lsUpdatePrefix))throw new Error("Lightstreamer update is expected to start with: "+this._lsUpdatePrefix);return e.substr(this._lsUpdatePrefix.length)},s._handleUpdateFromLightstreamer=function(e,t){i.captureError(this._processUpdate.bind(this,e,t),this._reportError.bind(this,t))},s._processUpdate=function(e,t){var n=t.getValue(this._newValueField);"INV"!=n&&e(JSON.parse(this._cleanLightstreamerUpdate(n)))},s._reportError=function(e,t){this._eventBus.publish("statistics",["ERROR",{class:"PositionStreamingClient",description:"Error encountered whilst handling update from Lightstreamer",message:t.message,stackTrace:t.stack?JSON.stringify(t):null,lsUpdate:JSON.stringify(e)}])},Object.seal(s),Object.seal(t)})),define("module/nadex-positions-and-orders/js/serviceclient/positionstreamer",["require","module/nadex-positions-and-orders/js/model/position","module/core/js/serviceclient/positionstreamingclient"],(function(e){"use strict";function t(e){this._positionStreamingClient=new i(e,"V2-M-MESSAGE_EVENT_HANDLER|{accountId}-OP-JSON","update",2,"OPU ")}var n=e("module/nadex-positions-and-orders/js/model/position"),i=e("module/core/js/serviceclient/positionstreamingclient");t.create=function(e){return new t(e)};var o=t.prototype;return o.startListening=function(e,t){this._positionStreamingClient.startListening(e,this._handleUpdate.bind(this,t))},o.stopListening=function(){this._positionStreamingClient.stopListening()},o._handleUpdate=function(e,t){var i=t.body.openPosition;e({contentType:t.header.contentType,openPosition:(new n).withDealId(i.dealId).withEpic(i.epic).withSize(i.dealSize).withDirection(i.direction).withOpeningLevel(i.openLevel)})},Object.seal(o),Object.seal(t)})),define("module/nadex-positions-and-orders/js/serviceclient/positionsandordersclient",["require","module/core/js/serviceclient/baseserviceclient","module/core/js/util/class","module/core/js/util/math","module/nadex-positions-and-orders/js/model/position","module/core/js/util/string"],(function(e){"use strict";function t(e){t.superclass.constructor.apply(this,[e])}var n=e("module/core/js/serviceclient/baseserviceclient"),i=e("module/core/js/util/class"),o=e("module/core/js/util/math"),r=e("module/nadex-positions-and-orders/js/model/position"),s=e("module/core/js/util/string");i.extend(t,n),t.create=function(e){return new t(e)},t._createPositions=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=(new r).withDealId(e[t].dealId).withEpic(e[t].epic).withSize(e[t].size).withOriginalSize(e[t].dmaData.originalSize).withDirection(e[t].direction),o.isNumber(e[t].openingLevel)&&n.withOpeningLevel(e[t].openingLevel),i.push(n);return i};var a=t.prototype;return a.requestPositionsAndOrders=function(e,t){this._executeRequest({endpoint:this._getPositionsAndOrdersEndpoint(e),success:this._handleSuccessfulCallback.bind(this,t),retry:!0})},a._getPositionsAndOrdersEndpoint=function(e){return s.merge("/iDeal/markets/hierarchy/positionsandorders/{id}",{id:e})},a._handleSuccessfulCallback=function(e,n,i){e(t._createPositions(i.positions),t._createPositions(i.workingOrders))},Object.seal(a),Object.seal(t)})),define("module/nadex-positions-and-orders/js/serviceclient/workingorderstreamingclient",["require","streaming","module/core/js/util/error","module/core/js/util/functional","module/core/js/util/log","module/core/js/util/math","module/nadex-positions-and-orders/js/model/position","module/core/js/util/string","module/core/js/model/environmentinfo"],(function(e){"use strict";function t(e){this._updateSubscriptionMap=Object.create(null),this._eventBus=e}var n=e("streaming"),i=e("module/core/js/util/error"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/log"),s=e("module/core/js/util/math"),a=e("module/nadex-positions-and-orders/js/model/position"),l=e("module/core/js/util/string"),u=e("module/core/js/model/environmentinfo");t.create=function(e){return new t(e)},t.UPDATE_SUBSCRIPTION="CHARTS|WM-{dealId}-WOU|WO_CONTRACT_SIZE|WO_LEVEL|WO_STOP|WO_TRAILING_STOP_DISTANCE|WO_TRAILING_STOP_INCREMENT|WO_LIMIT|WO_TRAILING_TRIGGER_DISTANCE|WO_TRAILING_TRIGGER_INCREMENT|WO_GOOD_TILL|WO_REQUEST_TYPE",t.UPDATE_SCHEMA=["WO_CONTRACT_SIZE","WO_LEVEL","WO_STOP","WO_TRAILING_STOP_DISTANCE","WO_TRAILING_STOP_INCREMENT","WO_LIMIT","WO_TRAILING_TRIGGER_DISTANCE","WO_TRAILING_TRIGGER_INCREMENT","WO_GOOD_TILL","WO_REQUEST_TYPE"];var c=t.prototype;return c._lightStreamerSubscription=null,c._lightstreamerSubscriptionFragment="WO",c._lightstreamerUpdatePrefix="WOU ",c._streamCallback=null,c._updateSubscriptionMap=null,c.startListening=function(e,t){var i="V2-M-MESSAGE_EVENT_HANDLER|"+e+"-"+this._lightstreamerSubscriptionFragment+"-JSON";this._streamCallback=t,this._lightStreamerSubscription=n.subscribe(i,["update"],"RAW",this._handleUpdateFromLightstreamer.bind(this),2,u.getInstance().getDataAdaptor())},c.stopListening=function(){o.objectInvoke(this._updateSubscriptionMap,"unsubscribe"),this._updateSubscriptionMap=Object.create(null),this._lightStreamerSubscription.unsubscribe(),this._lightStreamerSubscription=null,this._streamCallback=null},c.subscribeToSizeUpdates=function(e){e.forEach(this._openSizeUpdateStream,this)},c._cleanLightstreamerUpdate=function(e){if(0!==e.indexOf(this._lightstreamerUpdatePrefix))throw new Error("Lightstreamer update is expected to start with: "+this._lightstreamerUpdatePrefix);return e.substr(this._lightstreamerUpdatePrefix.length)},c._handleUpdateFromLightstreamer=function(e){i.captureError(this._processUpdate.bind(this,e),this._reportError.bind(this,e))},c._handleParsedUpdate=function(e){var t=e.body.workingOrder,n=(new a).withDealId(t.dealId).withEpic(t.epic).withSize(t.size).withDirection(t.direction);"WorkingOrderAdd"===e.header.contentType?(n.withOriginalSize(t.DMA.fullDMASize),this._openSizeUpdateStream(n)):"WorkingOrderDelete"===e.header.contentType&&this._closeSizeUpdateStream(n),this._streamCallback({contentType:e.header.contentType,workingOrder:n})},c._openSizeUpdateStream=function(e){var i=e.dealId;this._updateSubscriptionMap[i]&&this._closeSizeUpdateStream(e),this._updateSubscriptionMap[i]=n.subscribe(l.merge(t.UPDATE_SUBSCRIPTION,e),t.UPDATE_SCHEMA,"RAW",this._handleSizeUpdate.bind(this,e),2,u.getInstance().getDataAdaptor())},c._closeSizeUpdateStream=function(e){var t=e.dealId;this._updateSubscriptionMap[t]&&(this._updateSubscriptionMap[t].unsubscribe(),this._updateSubscriptionMap[t]=null)},c._handleSizeUpdate=function(e,t){var n,i=parseFloat(t.getValue("WO_CONTRACT_SIZE"));s.isNumber(i)?(n=(new a).withDealId(e.dealId).withEpic(e.epic).withSize(i).withOriginalSize(e.originalSize).withDirection(e.direction),this._streamCallback({contentType:"WorkingOrderUpdate",workingOrder:n})):r.warn("Problem parsing WO update: invalid size: ",t.getValue("WO_CONTRACT_SIZE"))},c._processUpdate=function(e){var t=JSON.parse(this._cleanLightstreamerUpdate(e.getValue("update")));this._handleParsedUpdate(t)},c._reportError=function(e,t){this._eventBus.publish("statistics",["ERROR",{class:"WorkingOrderStreamingClient",description:"Error encountered whilst handling update from Lightstreamer",message:t.message,stackTrace:t.stack?JSON.stringify(t):null,lsUpdate:JSON.stringify(e)}])},Object.seal(c),Object.seal(t)})),define("module/nadex-positions-and-orders/js/model/positionsandordersmodel",["require","module/core/js/util/array","module/dealing-common/js/model/layouts/dealinglayoutmodule","module/core/js/util/functional","module/core/js/util/object","module/nadex-positions-and-orders/js/serviceclient/positionstreamer","module/nadex-positions-and-orders/js/serviceclient/positionsandordersclient","module/core/js/settings/settingsevents","module/core/js/model/userinfo","module/nadex-positions-and-orders/js/serviceclient/workingorderstreamingclient"],(function(e){"use strict";function t(e,t){this._eventBus=e,this._settingsManager=t,this._openPositions=Object.create(null),this._workingOrders=Object.create(null),this._positionStreamer=s.create(e),this._workingOrderStreamingClient=c.create(e)}var n=e("module/core/js/util/array"),i=e("module/dealing-common/js/model/layouts/dealinglayoutmodule"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/object"),s=e("module/nadex-positions-and-orders/js/serviceclient/positionstreamer"),a=e("module/nadex-positions-and-orders/js/serviceclient/positionsandordersclient"),l=e("module/core/js/settings/settingsevents"),u=e("module/core/js/model/userinfo"),c=e("module/nadex-positions-and-orders/js/serviceclient/workingorderstreamingclient");t.create=function(e,n){return new t(e,n)};var d=t.prototype;return d.marketSelection=null,d._eventBus=null,d._settingsManager=null,d._openPositions=null,d._positionsClient=null,d._epicToMarketModel=null,d._workingOrders=null,d._showOpenPositions=null,d._showWorkingOrders=null,d.getOpenPositions=function(){return r.values(this._openPositions)},d.getWorkingOrders=function(){return r.values(this._workingOrders)},d.destroy=function(){this.stopListening(),this._openPositions=null,this._workingOrders=null},d.startListening=function(){var e=u.getInstance().getAccountId();return this._positionsClient=a.create(this._eventBus),this._positionStreamer.startListening(e,this._handleOpenPositionStreamingUpdate.bind(this)),this._workingOrderStreamingClient.startListening(e,this._handleWorkingOrderStreamingUpdate.bind(this)),this._settingsManager.on(l.GLOBAL_SETTINGS_CHANGED+"-"+i.SETTINGS_MODULE_NAME,this._handleDealingVisibilityChange,this),this._eventBus.subscribe("nadex/marketModels/added",this._handleMarketModelsAdded,this),this._eventBus.subscribe("nadex/marketModels/updated",this._handleMarketModelChanged,this),this._eventBus.subscribe("nadex/marketSelection",this._handleMarketSelectionChange,this),this},d._handleDealingVisibilityChange=function(){var e=this._settingsManager.getDealingOpenPositionsVisibility()!==this._showOpenPositions,t=this._settingsManager.getDealingWorkingOrdersVisibility()!==this._showWorkingOrders;this._showOpenPositions=this._settingsManager.getDealingOpenPositionsVisibility(),this._showWorkingOrders=this._settingsManager.getDealingWorkingOrdersVisibility(),e&&this._eventBus.publish("nadex/openPositions/visibilityUpdated",[this._showOpenPositions]),t&&this._eventBus.publish("nadex/workingOrders/visibilityUpdated",[this._showWorkingOrders])},d.stopListening=function(){return this._positionsClient=null,this._positionStreamer.stopListening(),this._positionStreamer=null,this._workingOrderStreamingClient.stopListening(),this._workingOrderStreamingClient=null,this._eventBus.unsubscribeAll(this),this._settingsManager.un(l.GLOBAL_SETTINGS_CHANGED+"-"+i.SETTINGS_MODULE_NAME,this._handleDealingVisibilityChange,this),this},d._handleMarketModelsAdded=function(e,t){this._eventBus.flush("nadex/deal/opened/openPositions"),this._eventBus.flush("nadex/deal/opened/workingOrders"),this._epicToMarketModel=n.arrayToHashMap(t,o.plucker("epic")),this._positionsClient.requestPositionsAndOrders(e,this._handlePositionsRetrieved.bind(this))},d._handleMarketModelChanged=function(e){var t,n;for(t in this._openPositions)n=this._openPositions[t],e.epic===n.epic&&(n.updateProfitLoss(e),this._eventBus.publish("nadex/openPositions/updated",[n]))},d._addMarketData=function(e){var t,n=null,i=null;for(t=0;t<e.length;t++)i=e[t],n=this._epicToMarketModel[i.epic],i.withFormattedLevel(n.formattedLevel).withInstrumentType(n.instrumentType)},d._handleOpenPositionStreamingUpdate=function(e){var t,n,i=e.openPosition;switch(e.contentType){case"OpenPositionAdd":this._epicToMarketModel[i.epic]&&(this._addMarketData([i]),n=this._epicToMarketModel[i.epic],i.updateProfitLoss(n),this._openPositions[i.dealId]=i,this._eventBus.publish("nadex/openPositions/added",[i]));break;case"OpenPositionUpdate":this._epicToMarketModel[i.epic]&&(this._addMarketData([i]),n=this._epicToMarketModel[i.epic],i.updateProfitLoss(n),this._openPositions[i.dealId]=i,this._eventBus.publish("nadex/openPositions/updated",[i]));break;case"OpenPositionDelete":this._openPositions[i.dealId]&&(t=this._openPositions[i.dealId],delete this._openPositions[i.dealId],this._eventBus.publish("nadex/openPositions/deleted",[t]))}},d._handleWorkingOrderStreamingUpdate=function(e){var t,n=e.workingOrder;switch(e.contentType){case"WorkingOrderAdd":this._epicToMarketModel[n.epic]&&(this._addMarketData([n]),this._workingOrders[n.dealId]=n,this._eventBus.publish("nadex/workingOrders/added",[n.epic,this._workingOrdersForEpic(n.epic)]));break;case"WorkingOrderUpdate":this._epicToMarketModel[n.epic]&&(this._addMarketData([n]),this._workingOrders[n.dealId]=n,this._eventBus.publish("nadex/workingOrders/updated",[n.epic,this._workingOrdersForEpic(n.epic)]));break;case"WorkingOrderDelete":this._workingOrders[n.dealId]&&(t=this._workingOrders[n.dealId],delete this._workingOrders[n.dealId],this._eventBus.publish("nadex/workingOrders/deleted",[t.epic,this._workingOrdersForEpic(t.epic)]))}},d._workingOrdersForEpic=function(e){return r.values(this._workingOrders).filter((function(t){return t.epic===e}))},d._handlePositionsRetrieved=function(e,t){var i,r,s;this._addMarketData(e),this._addMarketData(t),this._openPositions=n.arrayToHashMap(e,o.plucker("dealId")),this._workingOrders=n.arrayToHashMap(t,o.plucker("dealId"));for(s in this._openPositions)this._eventBus.publish("nadex/openPositions/added",[this._openPositions[s]]);this._workingOrderStreamingClient.subscribeToSizeUpdates(t),i=n.groupBy(t,"epic");for(r in i)this._eventBus.publish("nadex/workingOrders/added",[r,i[r]])},d._handleMarketSelectionChange=function(e){this.marketSelection=e},Object.seal(d),Object.seal(t)})),define("module/nadex-positions-and-orders/js/view/renderer/workingorderlistingrenderer",["require","module/core/js/ext/d3","module/core/js/view/renderer/abstractrenderer","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/util/functional","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/view/model/selecteditemtype","module/core/js/util/svg","module/nadex-positions-and-orders/js/view/renderer/workingorderutils","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.call(this,e,n,i,o),this._marketChanges=Object.create(null),this._workingCaptureZones=[]}var n=e("module/core/js/ext/d3"),i=e("module/core/js/view/renderer/abstractrenderer"),o=e("module/core/js/util/class"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("module/core/js/util/functional"),a=e("module/nadex-common/js/view/model/market"),l=e("module/nadex-common/js/view/model/marketchangetype"),u=e("module/nadex-common/js/view/model/selecteditemtype"),c=e("module/core/js/util/svg"),d=e("module/nadex-positions-and-orders/js/view/renderer/workingorderutils"),h=e("module/core/js/enum/zindexenum");o.extend(t,i),t.LISTING_PADDING=14,t.WORKING_ORDER_VERTICAL_MARGIN=20,t.BUTTON_SIZE=d.BADGE_HEIGHT,t.CLOSE_ICON_VISUAL_RECT_WIDTH=14,t.CLOSE_ICON_VISUAL_RECT_HEIGHT=5,t.createWorkingOrderBadgeIterator=function(e){return function(t){return d.createWorkingOrderBadge(t,e)}},t.resizeWorkingOrderBadgeIterator=function(e){return function(e){return t.resizeWorkingOrderBadge(e)}},t.selectedWorkingOrderIterator=function(e){return function(t){return e.selectedItemType===u.WORKING_ORDER&&t.dealId===e.selectedDealId}},t.updateWorkingOrdersIterator=function(e,t){return function(i,o,r){e[r].setDimensionsBasedOnElement(n.select(i),t)}},t.positionWorkingOrderBadge=function(e,n,i){e.setAttribute("transform",c.svgTranslateAttrY(i*(d.BADGE_HEIGHT+t.WORKING_ORDER_VERTICAL_MARGIN)))},t.resizeWorkingOrderBadge=function(e){var t=e.querySelector("text").getBoundingClientRect().width;e.querySelector(".positionBackground").setAttribute("width",t+2*d.TEXT_PADDING),e.querySelector(".positionBackground").setAttribute("height",d.BADGE_HEIGHT)},t.createCloseDom=function(e){var n=e.append("g").classed("closeButton",!0),i=(t.BUTTON_SIZE-t.CLOSE_ICON_VISUAL_RECT_WIDTH)/2,o=(t.BUTTON_SIZE-t.CLOSE_ICON_VISUAL_RECT_HEIGHT)/2;return n.append("rect").attr("width",t.BUTTON_SIZE).attr("height",t.BUTTON_SIZE).classed("background",!0),n.append("rect").attr("width",t.CLOSE_ICON_VISUAL_RECT_WIDTH).attr("height",t.CLOSE_ICON_VISUAL_RECT_HEIGHT).attr("transform",c.svgTranslateAttrXY(i,o)).classed("icon",!0),n};var p=t.prototype;return p._dBackground=null,p._dCloseButton=null,p._dOrderContainer=null,p._dWorkingOrders=null,p._market=null,p._marketChanges=null,p._closeButtonZone=null,p._zoneForBlocking=null,p._workingCaptureZones=null,p.initDom=function(){var e=this.dContainer.append("svg:g").classed("listing",!0);return this.dContainer.classed("hidden",!0),this._dBackground=e.append("svg:rect").classed("background",!0),this._dOrderContainer=e.append("svg:g").classed("overlay",!0).attr("transform",c.svgTranslateAttrXY(t.LISTING_PADDING,t.LISTING_PADDING)),e.attr("transform",c.svgTranslateAttrX(t.BUTTON_SIZE-1)),this._dCloseButton=t.createCloseDom(this.dContainer),this},p.render=function(){this._marketChanges[l.WORKING_ORDER_LISTING_CLOSED]?this._hideListing():this._marketChanges[l.WORKING_ORDER_GROUP_DELETE]||this._marketChanges[l.HIDDEN_OR_SHOWN]&&this._market.isHidden?(this._hideListing(),this._market.setListingVisible(!1)):this._marketChanges[l.WORKING_ORDER_LISTING_OPENED]&&this._showListing(),this.isVisible()&&(this._marketChanges[l.WORKING_ORDER_GROUP_UPDATE]||this._marketChanges[l.WORKING_ORDER_LISTING_OPENED]?this._market.workingOrders.length>1?(this._renderWorkingOrders(),this._resizeListing(),this._positionListing(),this._createCaptureZones(),this._updateCaptureZones(),this._handleSelectedItemChanged()):(this._hideListing(),this._market.setListingVisible(!1)):((this._marketChanges[l.Y_POSITION]||this._marketChanges[l.BOUNDING_RECT]||this._marketChanges[l.OPEN_POSITION_WIDTH]||this._marketChanges[l.OPEN_POSITION_ADD]||this._marketChanges[l.OPEN_POSITION_UPDATE]||this._marketChanges[l.OPEN_POSITION_VISIBILITY_CHANGED]||this._marketChanges[l.OPEN_POSITION_DELETE])&&(this._positionListing(),this._updateCaptureZones()),(this._marketChanges[l.SELECTED_ITEM_CHANGED]||this._marketChanges[l.DESELECTED])&&this._handleSelectedItemChanged())),this._marketChanges=Object.create(null)},p.startRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.on(l.WORKING_ORDER_LISTING_OPENED,this._handleListingOpened,this),this._presentationModel.on(l.WORKING_ORDER_LISTING_CLOSED,this._handleListingClosed,this)},p.stopRedrawingBasedOnChangesInVisibleWindow=function(){this._presentationModel.un(null,this),this._market&&this._market.un(null,this)},p.destroy=function(){this._hideListing(),t.superclass.destroy.call(this)},p.isVisible=function(){return!this.dContainer.classed("hidden")},p._showListing=function(){this.dContainer.attr("data-epic",this._market.epic).classed("hidden",!1)},p._hideListing=function(){this.dContainer.attr("data-epic",null).classed("hidden",!0),this._clearWorkingOrders(),this._removeCaptureZones()},p._renderWorkingOrders=function(){this._clearWorkingOrders(),this._dWorkingOrders=this._dWorkingOrders.data(this._market.workingOrders),this._dWorkingOrders.enter().appendElement(t.createWorkingOrderBadgeIterator(this._market)).eachElement(t.resizeWorkingOrderBadgeIterator(this._market)).eachElement(t.positionWorkingOrderBadge)},p._clearWorkingOrders=function(){this._dWorkingOrders&&this._dWorkingOrders.remove(),this._dWorkingOrders=this._dOrderContainer.selectAll("*")},p._resizeListing=function(){var e=this._dOrderContainer.node().getBoundingClientRect(),n=e.width+2*t.LISTING_PADDING,i=e.height+2*t.LISTING_PADDING;this._dBackground.attr({width:n,height:i}),this._dCloseButton.attr("transform",c.svgTranslateAttrY((i-t.BUTTON_SIZE)/2))},p._positionListing=function(){var e=a.POSITION_BOX_LEFT_MARGIN,t=this._market.yPosition-parseFloat(this._dBackground.attr("height"))/2;this._market.openPosition&&this._market.isOpenPositionVisible&&(e+=this._market.openPosition.width+a.POSITION_BOX_LEFT_MARGIN),this.dContainer.attr("transform",c.svgTranslateAttrXY(e,t))},p._createCaptureZones=function(){this._removeCaptureZones(),this._zoneForBlocking=this._captureZoneManager.create(r.BLOCK_ALL,h.NADEX_POSITIONS),this._closeButtonZone=this._captureZoneManager.createTapZone(this._handleCloseButtonTapped.bind(this),h.NADEX_OVERLAY_POSITIONS),this._workingCaptureZones=this._dWorkingOrders.mapElement(this._createZoneForOrder.bind(this))},
p._createZoneForOrder=function(e,t){return this._captureZoneManager.createTapZone(this._handleWorkingOrderTapped.bind(this,t),h.NADEX_OVERLAY_POSITIONS)},p._removeCaptureZones=function(){this._zoneForBlocking&&(this._zoneForBlocking.destroy(),this._zoneForBlocking=null),this._closeButtonZone&&(this._closeButtonZone.destroy(),this._closeButtonZone=null),this._workingCaptureZones&&(s.invokeApply(this._workingCaptureZones,"destroy"),this._workingCaptureZones=null)},p._updateCaptureZones=function(){this._dWorkingOrders.eachElement(t.updateWorkingOrdersIterator(this._workingCaptureZones,this._market.boundingRect)),this._zoneForBlocking.setDimensionsBasedOnElement(this._dBackground,this._market.boundingRect),this._closeButtonZone.setDimensionsBasedOnElement(this._dCloseButton,this._market.boundingRect)},p._handleCloseButtonTapped=function(){this._market.setListingVisible(!1)},p._handleListingOpened=function(e){this._market&&this._market.setListingVisible(!1),this._market=e,this._marketChanges=Object.create(null),this._marketChanges[l.WORKING_ORDER_LISTING_OPENED]=!0,e.on(a.CHANGED,this._handleMarketChanged,this),this.renderOnFrameEnd()},p._handleListingClosed=function(e){this._market===e&&(this._marketChanges[l.WORKING_ORDER_LISTING_CLOSED]=!0,this._market.un(null,this),this._market=null),this.renderOnFrameEnd()},p._handleWorkingOrderTapped=function(e){this._market.setupDealTicket(u.WORKING_ORDER,e.direction,e.dealId)},p._handleSelectedItemChanged=function(){this._dWorkingOrders.classed("selected",t.selectedWorkingOrderIterator(this._market))},p._handleMarketChanged=function(e){this._marketChanges[e]=!0,this.renderOnFrameEnd()},Object.seal(p),Object.seal(t)})),define("module/nadex-positions-and-orders/js/config/subviewsconfig",["require","module/core/js/util/object","module/nadex-positions-and-orders/js/view/renderer/workingorderlistingrenderer"],(function(e){"use strict";var t=e("module/core/js/util/object"),n=e("module/nadex-positions-and-orders/js/view/renderer/workingorderlistingrenderer"),i={prices:{renderers:{workingOrderListing:{type:n,group:"studyOverlay",position:"studyOverlay",presentationController:"nadexPresentationController",properties:{relativeWeighting:999}}}}};return t.recursiveFreeze(i)})),define("module/nadex-positions-and-orders/js/nadex-positions-and-orders",["require","module/dealing-common/js/model/layouts/dealinglayoutmodule","module/core/js/util/functional","module/nadex-positions-and-orders/js/model/positionsandordersmodel","module/nadex-positions-and-orders/js/config/subviewsconfig"],(function(e){"use strict";function t(e,t,n,i,o){this._eventBus=e,this._settingsManager=o}var n=e("module/dealing-common/js/model/layouts/dealinglayoutmodule"),i=e("module/core/js/util/functional"),o=e("module/nadex-positions-and-orders/js/model/positionsandordersmodel"),r=e("module/nadex-positions-and-orders/js/config/subviewsconfig");t.settingsParsers=Object.freeze({global:{moduleName:n.SETTINGS_MODULE_NAME,parserClass:n}});var s=t.prototype;return s._eventBus=null,s._positionsAndOrdersModel=null,s._settingsManager=null,s.getSettingsManager=i.getter("_settingsManager"),s.getOpenPositions=function(){return this._positionsAndOrdersModel.getOpenPositions()},s.getWorkingOrders=function(){return this._positionsAndOrdersModel.getWorkingOrders()},s.getMarketSelection=function(){return this._positionsAndOrdersModel.marketSelection},s.init=function(){this._positionsAndOrdersModel=o.create(this._eventBus,this._settingsManager).startListening(),this._eventBus.publish("subViews/config",["nadexPositionsAndOrders",r]),this._eventBus.subscribe("chart/view/ready",this._handleViewReady,this)},s._handleViewReady=function(e,t,n,i){this._addCloseIconDef(i)},s._addCloseIconDef=function(e){this._dCloseIconDef=e.append("defs").attr("id","nadexPositionDefs").append("g").attr("cursor","pointer").attr("id","overlayCloseIconDef"),this._dCloseIconDef.append("rect").attr({x:0,y:5,width:12,height:2,transform:"rotate(-45 6 6)"}),this._dCloseIconDef.append("rect").attr({x:0,y:5,width:12,height:2,transform:"rotate(45 6 6)"})},s.destroy=function(){this._positionsAndOrdersModel.destroy(),this._eventBus.unsubscribe("chart/view/ready",this._handleViewReady,this),this._dCloseIconDef.remove(),this._eventBus=null},Object.seal(s),Object.seal(t)})),define("module/menu-common/js/controller/visibilitymenu-desktop",["require","module/core/js/util/array","module/menu-common/js/actionlistener/callbackactionlistener","module/core/js/util/class","module/core/js/enum/hotkeyenum","module/menu-common/js/i18n","module/menu-common/js/trackeractions","module/menu-common/js/controller/visibilitymenu"],(function(e){"use strict";function t(e,n,i,o,s,a,l){t.superclass.constructor.call(this,e,n,i,o,s,a,l),this._taskManager.registerGlobalHotKey(r.O,this._toggleWorkingOrdersVisibility.bind(this)),this._taskManager.registerGlobalHotKey(r.P,this._toggleOpenPositionsVisibility.bind(this)),this._taskManager.registerGlobalHotKey(r.T,this._toggleOverviewVisibility.bind(this))}var n=e("module/core/js/util/array"),i=e("module/menu-common/js/actionlistener/callbackactionlistener"),o=e("module/core/js/util/class"),r=e("module/core/js/enum/hotkeyenum"),s=e("module/menu-common/js/i18n"),a=e("module/menu-common/js/trackeractions"),l=e("module/menu-common/js/controller/visibilitymenu");o.extend(t,l),t.TOOLTIP="TOOLTIP_VISIBILITY",t.TOAST_TIMEOUT=2500,t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)};var u=t.prototype;return u._generateModel=function(e){var o=new i(this._eventBus,this._toggleVisibility.bind(this)),r=t.superclass._generateModel.call(this,e);return r.unshift({actionListener:o,data:{id:t.TOOLTIP},label:s.get("tooltip"),isSelected:this._settingsManager.getTooltipSettings(),isPersistent:!0}),window.IG._featureFlagEnabled||n.remove(r,n.find(r,(function(e){return e.data.id===l.POSITION_PREVIEW}))),r},u._updateVisibilitySettings=function(e,n){e.id===t.TOOLTIP?this._settingsManager.putTooltipSettings(n):t.superclass._updateVisibilitySettings.call(this,e,n)},u._handleSettingsChanged=function(){this._handleVisibilityToggle(t.TOOLTIP,this._settingsManager.getTooltipSettings()),t.superclass._handleSettingsChanged.call(this)},u._toggleWorkingOrdersVisibility=function(){var e=this._settingsManager.getDealingWorkingOrdersVisibility(),n=e?s.get("wo_hidden"):s.get("wo_shown"),i=n+"<br>"+s.get("o_show_hide"),o={id:l.WORKING_ORDERS};this._eventBus.publish("toast/show",[i,t.TOAST_TIMEOUT]),this._toggleVisibility(o,!e,null,a.ACTION_ORIGINS.HOTKEY)},u._toggleOpenPositionsVisibility=function(){var e=this._settingsManager.getDealingOpenPositionsVisibility(),n=e?s.get("positions_hidden"):s.get("positions_shown"),i=n+"<br>"+s.get("p_show_hide"),o={id:l.POSITIONS};this._eventBus.publish("toast/show",[i,t.TOAST_TIMEOUT]),this._toggleVisibility(o,!e,null,a.ACTION_ORIGINS.HOTKEY)},u._toggleOverviewVisibility=function(){var e=this._settingsManager.getOverviewVisibilitySettings(),t={id:l.OVERVIEW};this._toggleVisibility(t,!e,null,a.ACTION_ORIGINS.HOTKEY)},Object.seal(u),Object.seal(t)})),define("module/menu-mobile/js/view/visibilitymenuview",["require","module/core/js/util/class","module/menu-mobile/js/view/menuview","module/menu-mobile/js/controls/scrollablebuttonbar"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n,{buttonBar:o,buttonBarStyles:"hidden container visibility bottom sub"})}var n=e("module/core/js/util/class"),i=e("module/menu-mobile/js/view/menuview"),o=e("module/menu-mobile/js/controls/scrollablebuttonbar");n.extend(t,i),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return Object.seal(r),Object.seal(t)})),define("flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisbinaryladderconfig",["require","module/annotations/js/annotations","module/annotations/js/menu/annotationsmenu","module/annotations/js/menu/annotationsmenuview","module/menu-mobile/js/controller/mobilebottommenu","module/colour-customisation/js/colour-customisation","module/current-point/js/current-point","module/done-button/js/done-button","module/annotations/js/menu/editannotationsmenu","module/fullscreen-button/js/fullscreen-button","module/highlowstats/js/highlowstats","module/indicator-labels/js/indicator-labels","module/indicators/js/indicators","module/indicators/js/menu/indicatorsmenu","module/indicators/js/menu/indicatorsmenuview","module/menu-common/js/controller/layoutsmenu","module/menu-mobile/js/view/layoutsmenuview","module/market-name-label/js/market-name-label","module/menu-mobile/js/menu-mobile","module/main-menu/js/main-menu","module/overview/js/overview","module/menu-common/js/controller/pricetypemenu","module/menu-mobile/js/view/pricetypemenuview","module/resolution-label/js/resolution-label","module/resolutions/js/resolutions","module/core/js/model/resolutionsenum","module/resolutions/js/menu/resolutionsmenu","module/resolutions/js/menu/resolutionsmenuview","module/resizablestudyviews/js/resizablestudyviewsupport","module/statistics/js/statistics","module/styles/js/menu/mobilestylemenu","module/styles/js/menu/stylemenuview","module/styles/js/styles","module/subviews/js/subviews","module/tooltip-desktop/js/tooltip-desktop","module/nadex-binary-ladder/js/nadex-binary-ladder","module/nadex-positions-and-orders/js/nadex-positions-and-orders","module/menu-common/js/controller/visibilitymenu-desktop","module/menu-mobile/js/view/visibilitymenuview","module/core/js/model/visibledaterange"],(function(e){"use strict";var t=e("module/annotations/js/annotations"),n=e("module/annotations/js/menu/annotationsmenu"),i=e("module/annotations/js/menu/annotationsmenuview"),o=e("module/menu-mobile/js/controller/mobilebottommenu"),r=e("module/colour-customisation/js/colour-customisation"),s=e("module/current-point/js/current-point"),a=e("module/done-button/js/done-button"),l=e("module/annotations/js/menu/editannotationsmenu"),u=e("module/fullscreen-button/js/fullscreen-button"),c=e("module/highlowstats/js/highlowstats"),d=e("module/indicator-labels/js/indicator-labels"),h=e("module/indicators/js/indicators"),p=e("module/indicators/js/menu/indicatorsmenu"),m=e("module/indicators/js/menu/indicatorsmenuview"),f=e("module/menu-common/js/controller/layoutsmenu"),_=e("module/menu-mobile/js/view/layoutsmenuview"),g=e("module/market-name-label/js/market-name-label"),v=e("module/menu-mobile/js/menu-mobile"),y=e("module/main-menu/js/main-menu"),M=e("module/overview/js/overview"),b=e("module/menu-common/js/controller/pricetypemenu"),A=e("module/menu-mobile/js/view/pricetypemenuview"),T=e("module/resolution-label/js/resolution-label"),E=e("module/resolutions/js/resolutions"),w=e("module/core/js/model/resolutionsenum"),O=e("module/resolutions/js/menu/resolutionsmenu"),I=e("module/resolutions/js/menu/resolutionsmenuview"),S=e("module/resizablestudyviews/js/resizablestudyviewsupport"),j=e("module/statistics/js/statistics"),C=e("module/styles/js/menu/mobilestylemenu"),D=e("module/styles/js/menu/stylemenuview"),R=e("module/styles/js/styles"),L=e("module/subviews/js/subviews"),N=e("module/tooltip-desktop/js/tooltip-desktop"),k=e("module/nadex-binary-ladder/js/nadex-binary-ladder"),P=e("module/nadex-positions-and-orders/js/nadex-positions-and-orders"),x=e("module/menu-common/js/controller/visibilitymenu-desktop"),V=e("module/menu-mobile/js/view/visibilitymenuview"),H=e("module/core/js/model/visibledaterange");return{flavour:"NADEX_DESKTOP_ANALYSIS_BINARY_LADDER",model:{allowScrollingIntoFuture:!0,restrictDuration:H.RESTRICT_DURATION.SCREEN,refreshStrikes:!0},view:{kinetic:!1,rightMargin:180,lastCandleToYAxisGap:32},modules:{statistics:{type:j,onByDefault:!0},subViews:{type:L,onByDefault:!0},marketNameLabel:{type:g,onByDefault:!0},resolutionLabel:{type:T,onByDefault:!0},currentPoint:{type:s,onByDefault:!0,options:{pointerWidth:100}},styles:{type:R,onByDefault:!0},resolutions:{type:E,onByDefault:!0,options:{excluded:[w.values.WEEK,w.values.MONTH]}},indicators:{type:h,onByDefault:!0,options:{exclude:["VOLUME","MFI"]}},nadexBinaryLadder:{type:k,onByDefault:!0},nadexPositionsAndOrders:{type:P,onByDefault:!0},highLowStats:{type:c,onByDefault:!0,options:{dailyStats:!0,visibleStats:!0}},fullscreenButton:{type:u},doneButton:{type:a},tooltip:{type:N,onByDefault:!0,options:{yAxisWidth:180}},indicatorLabels:{type:d,onByDefault:!0},colourCustomisation:{type:r,onByDefault:!0},overview:{type:M,onByDefault:!0,options:{height:40,marginLeft:16,marginRight:16},settingsOptions:{template:{isVisibleByDefault:!0}}},annotations:{type:t,onByDefault:!0,options:{editMenu:l}},resizableStudyView:{type:S,onByDefault:!0},menuApi:{type:v,onByDefault:!0},menu:{type:y,onByDefault:!0,options:{menu:{type:o,properties:{xAxisHeight:30},subMenus:[{type:O,view:I,isDefault:!0},{type:C,view:D},{type:p,view:m},{type:n,view:i},{type:f,view:_},{type:x,view:V},{type:b,view:A}]}}}}}})),define("flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisblankchartconfig",["require","module/annotations/js/annotations","module/annotations/js/menu/annotationsmenu","module/annotations/js/menu/annotationsmenuview","module/menu-mobile/js/controller/mobilebottommenu","module/colour-customisation/js/colour-customisation","module/current-point/js/current-point","module/done-button/js/done-button","module/annotations/js/menu/editannotationsmenu","module/fullscreen-button/js/fullscreen-button","module/highlowstats/js/highlowstats","module/indicator-labels/js/indicator-labels","module/indicators/js/indicators","module/indicators/js/menu/indicatorsmenu","module/indicators/js/menu/indicatorsmenuview","module/menu-common/js/controller/layoutsmenu","module/menu-mobile/js/view/layoutsmenuview","module/market-name-label/js/market-name-label","module/menu-mobile/js/menu-mobile","module/main-menu/js/main-menu","module/overview/js/overview","module/menu-common/js/controller/pricetypemenu","module/menu-mobile/js/view/pricetypemenuview","module/resolution-label/js/resolution-label","module/resolutions/js/resolutions","module/core/js/model/resolutionsenum","module/resolutions/js/menu/resolutionsmenu","module/resolutions/js/menu/resolutionsmenuview","module/resizablestudyviews/js/resizablestudyviewsupport","module/statistics/js/statistics","module/styles/js/menu/mobilestylemenu","module/styles/js/menu/stylemenuview","module/styles/js/styles","module/subviews/js/subviews","module/tooltip-desktop/js/tooltip-desktop","module/menu-common/js/controller/visibilitymenu-desktop","module/menu-mobile/js/view/visibilitymenuview","module/core/js/model/visibledaterange"],(function(e){"use strict";var t=e("module/annotations/js/annotations"),n=e("module/annotations/js/menu/annotationsmenu"),i=e("module/annotations/js/menu/annotationsmenuview"),o=e("module/menu-mobile/js/controller/mobilebottommenu"),r=e("module/colour-customisation/js/colour-customisation"),s=e("module/current-point/js/current-point"),a=e("module/done-button/js/done-button"),l=e("module/annotations/js/menu/editannotationsmenu"),u=e("module/fullscreen-button/js/fullscreen-button"),c=e("module/highlowstats/js/highlowstats"),d=e("module/indicator-labels/js/indicator-labels"),h=e("module/indicators/js/indicators"),p=e("module/indicators/js/menu/indicatorsmenu"),m=e("module/indicators/js/menu/indicatorsmenuview"),f=e("module/menu-common/js/controller/layoutsmenu"),_=e("module/menu-mobile/js/view/layoutsmenuview"),g=e("module/market-name-label/js/market-name-label"),v=e("module/menu-mobile/js/menu-mobile"),y=e("module/main-menu/js/main-menu"),M=e("module/overview/js/overview"),b=e("module/menu-common/js/controller/pricetypemenu"),A=e("module/menu-mobile/js/view/pricetypemenuview"),T=e("module/resolution-label/js/resolution-label"),E=e("module/resolutions/js/resolutions"),w=e("module/core/js/model/resolutionsenum"),O=e("module/resolutions/js/menu/resolutionsmenu"),I=e("module/resolutions/js/menu/resolutionsmenuview"),S=e("module/resizablestudyviews/js/resizablestudyviewsupport"),j=e("module/statistics/js/statistics"),C=e("module/styles/js/menu/mobilestylemenu"),D=e("module/styles/js/menu/stylemenuview"),R=e("module/styles/js/styles"),L=e("module/subviews/js/subviews"),N=e("module/tooltip-desktop/js/tooltip-desktop"),k=e("module/menu-common/js/controller/visibilitymenu-desktop"),P=e("module/menu-mobile/js/view/visibilitymenuview"),x=e("module/core/js/model/visibledaterange");return{flavour:"NADEX_DESKTOP_ANALYSIS_BLANK",model:{allowScrollingIntoFuture:!0,restrictDuration:x.RESTRICT_DURATION.SCREEN,refreshStrikes:!0},view:{kinetic:!1,rightMargin:60,lastCandleToYAxisGap:32},modules:{statistics:{type:j,onByDefault:!0},subViews:{type:L,onByDefault:!0},marketNameLabel:{type:g,onByDefault:!0},resolutionLabel:{type:T,onByDefault:!0},currentPoint:{type:s,onByDefault:!0,options:{pointerWidth:60}},styles:{type:R,onByDefault:!0},resolutions:{type:E,onByDefault:!0,options:{excluded:[w.values.WEEK,w.values.MONTH]}},indicators:{type:h,onByDefault:!0,options:{exclude:["VOLUME","MFI"]}},highLowStats:{type:c,onByDefault:!0,options:{dailyStats:!0,visibleStats:!0}},fullscreenButton:{type:u},doneButton:{type:a},tooltip:{type:N,onByDefault:!0,options:{yAxisWidth:60}},indicatorLabels:{type:d,onByDefault:!0},colourCustomisation:{type:r,onByDefault:!0},overview:{type:M,onByDefault:!0,options:{height:40,marginLeft:16,marginRight:16},settingsOptions:{template:{isVisibleByDefault:!0}}},annotations:{type:t,onByDefault:!0,options:{editMenu:l}},resizableStudyView:{type:S,onByDefault:!0},menuApi:{type:v,onByDefault:!0},menu:{type:y,onByDefault:!0,options:{menu:{type:o,properties:{xAxisHeight:30},subMenus:[{type:O,view:I,isDefault:!0},{type:C,view:D},{type:p,view:m},{type:n,view:i},{type:f,view:_},{type:k,view:P},{type:b,view:A}]}}}}}})),define("module/nadex-bull-spread/js/view/renderer/bullspreadrangerenderer",["require","module/core/js/view/renderer/abstractshadedarearenderer","module/core/js/util/class","module/core/js/util/functional","module/nadex-common/js/view/model/market","module/nadex-common/js/view/model/marketchangetype","module/nadex-common/js/view/model/marketutil","module/core/js/util/math","module/nadex-common/js/view/model/nadexpresentationmodel"],(function(e){"use strict";function t(e,n,i,o){t.superclass.constructor.apply(this,arguments),this._captureZoneManager=o,this._marketChanges=Object.create(null)}var n=e("module/core/js/view/renderer/abstractshadedarearenderer"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/nadex-common/js/view/model/market"),s=e("module/nadex-common/js/view/model/marketchangetype"),a=e("module/nadex-common/js/view/model/marketutil"),l=e("module/core/js/util/math"),u=e("module/nadex-common/js/view/model/nadexpresentationmodel");i.extend(t,n);var c=t.prototype;return c.render=function(){var e=this._presentationModel.getSelectedMarket();this.dContainer.classed("hidden",!e),e&&(this._updateDirection(),this._updateTransform(!0),this._styleLines())},c._subscribeToChanges=function(){this._presentationModel.on(u.MARKETS_UPDATED,this._handleMarketsAdded,this),this._handleMarketsAdded()},c._unsubscribeFromChanges=function(){this._presentationModel.un(null,this),this._presentationModel.getMarkets().forEach((function(e){e.un(null,this)}),this)},c._onMarketStateChange=function(e){e!==s.DESELECTED&&e!==s.SELECTED_ITEM_CHANGED&&e!==s.PRICE_CHANGE||this.renderOnFrameEnd()},c._handleMarketsAdded=function(){this._presentationModel.getMarkets().forEach(this._handleMarketAdded,this)},c._handleMarketAdded=function(e){e.on(r.CHANGED,this._onMarketStateChange,this)},c._getAreaHeight=function(e){var t,n=this._presentationModel.getSelectedMarket();return n&&l.isNumber(n.ceiling)&&l.isNumber(n.floor)?(t=this._projectOnYAxis(n.ceiling)-this._projectOnYAxis(n.floor),Math.abs(t)):0},c._isAboveAreaShaded=o.never,c._getBaseValue=function(){var e=this._presentationModel.getSelectedMarket();return e?e.ceiling:null},c._handleXScaleChange=function(){this._resizeLineAndShading(0,this._visibleWindow.width())},c._styleLines=function(){var e=Object.create(null),t=this._presentationModel.getSelectedMarket();t.openPosition?(e.winning=t.openPosition.profitAndLoss>=0,e.losing=t.openPosition.profitAndLoss<0):e.winning=e.losing=!1,e.buying=a.hasOpenBuyTicket(t),e.selling=a.hasOpenSellTicket(t),this.dContainer.select("rect").classed(e)},Object.seal(c),Object.seal(t)})),define("module/nadex-bull-spread/js/config/subviewsconfig",["require","module/nadex-bull-spread/js/view/renderer/bullspreadrangerenderer","module/nadex-common/js/view/renderer/marketsoverflowrenderer","module/nadex-common/js/view/renderer/marketsrenderer","module/nadex-common/js/controller/nadexpresentationcontroller","module/nadex-common/js/view/model/nadexpresentationmodel","module/core/js/util/object"],(function(e){"use strict";var t=e("module/nadex-bull-spread/js/view/renderer/bullspreadrangerenderer"),n=e("module/nadex-common/js/view/renderer/marketsoverflowrenderer"),i=e("module/nadex-common/js/view/renderer/marketsrenderer"),o=e("module/nadex-common/js/controller/nadexpresentationcontroller"),r=e("module/nadex-common/js/view/model/nadexpresentationmodel"),s=e("module/core/js/util/object"),a={prices:{presentationControllers:{nadexPresentationController:{type:o,presentationModel:{type:r,properties:{rightMargin:100}}}},renderers:{bullSpreadRangeArea:{type:t,group:"studyOverlay",position:"studyOverlay",presentationController:"nadexPresentationController",properties:{relativeWeighting:0}},overflow:{type:n,group:"studyOverlay",position:"studyOverlay",presentationController:"nadexPresentationController",properties:{relativeWeighting:2}},markets:{type:i,group:"studyOverlay",position:"studyOverlay",presentationController:"nadexPresentationController",properties:{relativeWeighting:1}}}}};return s.recursiveFreeze(a)})),define("module/nadex-bull-spread/js/nadex-bull-spread",["require","module/nadex-common/js/model/nadexmodel","module/nadex-bull-spread/js/config/subviewsconfig"],(function(e){"use strict";function t(e){this._eventBus=e}var n=e("module/nadex-common/js/model/nadexmodel"),i=e("module/nadex-bull-spread/js/config/subviewsconfig"),o=t.prototype;return o._eventBus=null,o._model=null,o.init=function(){this._eventBus.publish("subViews/config",["nadexBullSpread",i]),this._model=n.create(this._eventBus)},o.destroy=function(){this._model.destroy(),this._eventBus=null},Object.seal(o),Object.seal(t)})),define("flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisbullspreadconfig",["require","module/annotations/js/annotations","module/annotations/js/menu/annotationsmenu","module/annotations/js/menu/annotationsmenuview","module/menu-mobile/js/controller/mobilebottommenu","module/colour-customisation/js/colour-customisation","module/current-point/js/current-point","module/done-button/js/done-button","module/annotations/js/menu/editannotationsmenu","module/fullscreen-button/js/fullscreen-button","module/highlowstats/js/highlowstats","module/indicator-labels/js/indicator-labels","module/indicators/js/indicators","module/indicators/js/menu/indicatorsmenu","module/indicators/js/menu/indicatorsmenuview","module/menu-common/js/controller/layoutsmenu","module/menu-mobile/js/view/layoutsmenuview","module/market-name-label/js/market-name-label","module/menu-mobile/js/menu-mobile","module/main-menu/js/main-menu","module/overview/js/overview","module/menu-common/js/controller/pricetypemenu","module/menu-mobile/js/view/pricetypemenuview","module/resolution-label/js/resolution-label","module/resolutions/js/resolutions","module/core/js/model/resolutionsenum","module/resolutions/js/menu/resolutionsmenu","module/resolutions/js/menu/resolutionsmenuview","module/resizablestudyviews/js/resizablestudyviewsupport","module/statistics/js/statistics","module/styles/js/menu/mobilestylemenu","module/styles/js/menu/stylemenuview","module/styles/js/styles","module/subviews/js/subviews","module/tooltip-desktop/js/tooltip-desktop","module/nadex-bull-spread/js/nadex-bull-spread","module/nadex-positions-and-orders/js/nadex-positions-and-orders","module/menu-common/js/controller/visibilitymenu-desktop","module/menu-mobile/js/view/visibilitymenuview","module/core/js/model/visibledaterange"],(function(e){"use strict";var t=e("module/annotations/js/annotations"),n=e("module/annotations/js/menu/annotationsmenu"),i=e("module/annotations/js/menu/annotationsmenuview"),o=e("module/menu-mobile/js/controller/mobilebottommenu"),r=e("module/colour-customisation/js/colour-customisation"),s=e("module/current-point/js/current-point"),a=e("module/done-button/js/done-button"),l=e("module/annotations/js/menu/editannotationsmenu"),u=e("module/fullscreen-button/js/fullscreen-button"),c=e("module/highlowstats/js/highlowstats"),d=e("module/indicator-labels/js/indicator-labels"),h=e("module/indicators/js/indicators"),p=e("module/indicators/js/menu/indicatorsmenu"),m=e("module/indicators/js/menu/indicatorsmenuview"),f=e("module/menu-common/js/controller/layoutsmenu"),_=e("module/menu-mobile/js/view/layoutsmenuview"),g=e("module/market-name-label/js/market-name-label"),v=e("module/menu-mobile/js/menu-mobile"),y=e("module/main-menu/js/main-menu"),M=e("module/overview/js/overview"),b=e("module/menu-common/js/controller/pricetypemenu"),A=e("module/menu-mobile/js/view/pricetypemenuview"),T=e("module/resolution-label/js/resolution-label"),E=e("module/resolutions/js/resolutions"),w=e("module/core/js/model/resolutionsenum"),O=e("module/resolutions/js/menu/resolutionsmenu"),I=e("module/resolutions/js/menu/resolutionsmenuview"),S=e("module/resizablestudyviews/js/resizablestudyviewsupport"),j=e("module/statistics/js/statistics"),C=e("module/styles/js/menu/mobilestylemenu"),D=e("module/styles/js/menu/stylemenuview"),R=e("module/styles/js/styles"),L=e("module/subviews/js/subviews"),N=e("module/tooltip-desktop/js/tooltip-desktop"),k=e("module/nadex-bull-spread/js/nadex-bull-spread"),P=e("module/nadex-positions-and-orders/js/nadex-positions-and-orders"),x=e("module/menu-common/js/controller/visibilitymenu-desktop"),V=e("module/menu-mobile/js/view/visibilitymenuview"),H=e("module/core/js/model/visibledaterange");return{flavour:"NADEX_DESKTOP_ANALYSIS_BULL_SPREAD",model:{allowScrollingIntoFuture:!0,restrictDuration:H.RESTRICT_DURATION.SCREEN,refreshStrikes:!0},view:{kinetic:!1,rightMargin:209,lastCandleToYAxisGap:32},modules:{statistics:{type:j,onByDefault:!0},subViews:{type:L,onByDefault:!0},marketNameLabel:{type:g,onByDefault:!0},resolutionLabel:{type:T,onByDefault:!0},currentPoint:{type:s,onByDefault:!0,options:{pointerWidth:100}},styles:{type:R,onByDefault:!0},resolutions:{type:E,onByDefault:!0,options:{excluded:[w.values.WEEK,w.values.MONTH]}},indicators:{type:h,onByDefault:!0,options:{exclude:["VOLUME","MFI"]}},nadexBullSpread:{type:k,onByDefault:!0},nadexPositionsAndOrders:{type:P,onByDefault:!0},highLowStats:{type:c,onByDefault:!0,options:{dailyStats:!0,visibleStats:!0}},fullscreenButton:{type:u},doneButton:{type:a},tooltip:{type:N,onByDefault:!0,options:{yAxisWidth:209}},indicatorLabels:{type:d,onByDefault:!0},colourCustomisation:{type:r,onByDefault:!0},overview:{type:M,onByDefault:!0,options:{height:40,marginLeft:16,marginRight:16},settingsOptions:{template:{isVisibleByDefault:!0}}},annotations:{type:t,onByDefault:!0,options:{editMenu:l}},resizableStudyView:{type:S,onByDefault:!0},menuApi:{type:v,onByDefault:!0},menu:{type:y,onByDefault:!0,options:{menu:{type:o,properties:{xAxisHeight:30},subMenus:[{type:O,view:I,isDefault:!0},{type:C,view:D},{type:p,view:m},{type:n,view:i},{type:f,view:_},{type:x,view:V},{type:b,view:A}]}}}}}})),define("module/core/js/indicator/indicatorrelativesizing",["require","module/core/js/util/functional","module/core/js/util/object","module/core/js/view/studyviewconstants"],(function(e){"use strict";var t=e("module/core/js/util/functional"),n=e("module/core/js/util/object"),i=e("module/core/js/view/studyviewconstants"),o=t.invoker("hasPreferredHeight"),r=function(e){return"PRICES"!==e.name},s={};return s.resizeIndicatorsOnIndicatorAdded=function(e,t){var s=n.values(t).filter(o).filter(r),a=s.length*i.DEFAULT_RELATIVE_HEIGHT+1,l=i.DEFAULT_RELATIVE_HEIGHT/a,u=l,c=t.PRICES;return e.preferredHeight&&(s.forEach((function(e){e.setPreferredHeight(e.getPreferredHeight()*(1-l)),u+=e.getPreferredHeight()})),e.preferredHeight=l,c.setPreferredHeight(1-u),c.getPreferredHeight()<i.DEFAULT_PRICES_MIN_HEIGHT&&(c.setPreferredHeight(i.DEFAULT_PRICES_MIN_HEIGHT),e.preferredHeight=l*(1-i.DEFAULT_PRICES_MIN_HEIGHT)/u,s.forEach((function(e){e.setPreferredHeight(e.getPreferredHeight()*(1-i.DEFAULT_PRICES_MIN_HEIGHT)/u)})))),e},s.resizeIndicatorsOnIndicatorRemoved=function(e,t){var i=n.values(t).filter((function(t){return t.name!==e})).filter(o),r=i.reduce(s._accumulateRelativeSize,0),a=0;t[e].hasPreferredHeight()&&(i.forEach((function(e){"PRICES"!==e.name&&(e.setPreferredHeight(e.getPreferredHeight()/r),a+=e.getPreferredHeight())})),t.PRICES.setPreferredHeight(1-a))},s.resizePriceIndicatorWithRemainingSpace=function(e){var t,s,a=0,l=n.values(e).filter(o).filter(r),u=e.PRICES;for(s in e)t=e[s],"PRICES"!==s&&t.hasPreferredHeight()&&(a+=e[s].getPreferredHeight());u.setPreferredHeight(1-a),u.getPreferredHeight()<i.DEFAULT_PRICES_MIN_HEIGHT&&(u.setPreferredHeight(i.DEFAULT_PRICES_MIN_HEIGHT),l.forEach((function(e){e.setPreferredHeight(e.getPreferredHeight()*(1-i.DEFAULT_PRICES_MIN_HEIGHT)/a)})))},s._accumulateRelativeSize=function(e,t){return e+t.getPreferredHeight()},Object.seal(s)})),define("module/core/js/indicator/indicatorsenum",[],(function(){"use strict";var e={};return e.statsKeyMap={AROON:"AROON",ATR:"AVERAGE_TRUE_RANGE",AWESOME:"AWESOME_OSCILLATOR",BOL:"BOLLINGER_BAND",CCI:"CCI",CHAIKIN:"CHAIKIN_VOLATILITY",DPO:"DETRENDED_PRICE_OSCILLATOR",DMI:"DMI",DONCHIAN:"DONCHIAN_CHANNEL",EMA:"EMA",ICHIMOKU:"ICHIMOKU",KDJ:"KDJ",KELTNER:"KELTNER_CHANNEL",VOLUME:"LAST_TRADE_VOLUME",MACD:"MACD",MOMENTUM:"MOMENTUM",MFI:"MONEY_FLOW_INDEX",MVAVG:"MOVING_AVERAGE",SAR:"PARABOLIC_SAR",PIVOT:"PIVOT_POINT",ROC:"RATE_OF_CHANGE",RSI:"RSI",STDEV:"STANDARD_DEVIATION",STOCH:"STOCHASTIC",SUPERTREND:"SUPERTREND",WMA:"WMA",WILLR:"WILLIAMS_PERCENT_R"},Object.freeze(e.statsKeyMap),e.statisticsKeyFor=function(t){return e.statsKeyMap[t]||null},Object.seal(e)})),define("module/core/js/model/intervallist/linearformatter",["require","module/core/js/util/array","module/core/js/model/intervallist/baseformatter","module/core/js/util/functional","module/core/js/model/openinterval","module/core/js/util/timeconstants"],(function(e){"use strict";function t(e,t){var n=t.getTimezoneOffsetIterator(),i=new Date(a.normaliseEndTimestamp(e.currentCandleTimestamp)),o=e.consolidationTimezoneOffset*s.Periods.HOUR;return n.next(i,o)}var n=e("module/core/js/util/array"),i=e("module/core/js/model/intervallist/baseformatter"),o=e("module/core/js/util/functional"),r=e("module/core/js/model/openinterval"),s=e("module/core/js/util/timeconstants"),a=Object.create(i);return a.formatToIntervals=function(e,t){return this.initialiseRelativeToNeighbours(this.invertIntervals(e.intervalsDto,t))},a.invertIntervals=function(e,t){var n,i,o=e.intervals,r=[];if(o.length){for(n=this.getIntervalBeforeFirstNegative(e),n&&r.push(n),i=0;i<o.length-1;i++)r.push(this.getIntervalBetweenNegatives(o[i],o[i+1]));r.push(this.getIntervalAfterLastNegative(e,t))}else r.push(this.getIntervalForWholeInstrument(e,t));return r},a.getIntervalBeforeFirstNegative=function(e){var t=e.startTimestamp,i=n.firstOf(e.intervals).startTimestamp;return t!==i?new r(new Date(t),new Date(i)):null},a.getIntervalBetweenNegatives=function(e,t){var n=this.normaliseEndTimestamp(e.endTimestamp),i=t.startTimestamp;return new r(new Date(n),new Date(i))},a.getIntervalAfterLastNegative=function(e,i){var o=new Date(this.normaliseEndTimestamp(n.lastOf(e.intervals).endTimestamp)),s=t(e,i),a=Math.max(s.valueOf(),o.valueOf()+1);return new r(o,new Date(a))},a.getIntervalForWholeInstrument=function(e,n){var i,o=t(e,n);return i=e.startTimestamp?new Date(e.startTimestamp):new Date(o.getTime()-1),new r(i,o)},a.unifyOpenIntervals=function(e){
var t=n.flatten(e),i=t.sort(o.ascendingFieldComparator("start")),s=this.mergeSortedOpenIntervals(i),a=s.map((function(e){return new r(new Date(e.start),new Date(e.end))}));return this.initialiseRelativeToNeighbours(a)},a.mergeSortedOpenIntervals=function(e){var t,n,i,o,r;if(e.length<=1)return e;for(o=[],i=e[0],r=1;r<e.length;r++)t=e[r],i.end>=t.start?(n={start:i.start,end:Math.max(i.end,t.end)},i=n):(o.push(i),i=t);return o.push(i),o},Object.seal(a)})),define("module/core/js/model/chartmodel",["require","lodash","text!package.json","streaming","wt-statistics-jsclient","module/core/js/util/array","module/core/js/model/chartmodelevents","module/core/js/util/class","module/core/js/model/deviceinfo","module/core/js/util/functional","module/core/js/indicator/indicator","module/core/js/indicator/indicatorfactory","module/core/js/indicator/indicatorrelativesizing","module/core/js/indicator/indicatorsenum","module/core/js/model/instrumentmodelcollection","module/core/js/model/instrumentmodelevents","module/core/js/model/intervallist/linearformatter","module/core/js/util/object","module/core/js/model/resolutionsenum","module/core/js/tracker/enum/schema","module/core/js/settings/settingsevents","module/core/js/event/subscribable","module/core/js/model/userinfo","module/core/js/model/environmentinfo","module/core/js/model/visibledaterange","module/core/js/model/visibledaterangeevents"],(function(e){"use strict";function t(e){return"STREAMING"===e||"POLLING"===e||"CONNECTED"===e.substr(0,9)&&"CONNECTED:STREAM-SENSING"!==e}function n(e,i,o){this._instrumentModels=_.create(this,e,this._intervalListFormatterClass),this._eventBus=e,this._indicatorFactory=p.create(e,i),this._settingsManager=o,this._settingsManager.on(A.LAYOUT_SETTINGS_CHANGED,this._handleSettingsChanged,this),this._settingsManager.on(A.LAYOUT_SETTINGS_IMPORTED,this._handleSettingsImported,this),this._indicators=Object.create(null),this._secondaryPricesIndicators=Object.create(null),this._previouslyStreaming=this._currentStreamingStatus=t(r.getStatus()),e.subscribe("chart/resolution/change",this.setResolution,this),e.subscribe("chart/style/change",this._changeStyle,this),e.subscribe("chart/indicator/add",this.addIndicator,this),e.subscribe("chart/indicator/update",this.updateIndicator,this),e.subscribe("chart/indicator/updateSize",this._updateIndicatorsSize,this),e.subscribe("chart/indicator/remove",this.removeIndicator,this),this._startHandlingLightstreamerEvents(),this.setCandleWidth=d.debounce(this.setCandleWidth,n.CANDLE_WIDTH_DEBOUNCE_MILLIS)}var i=e("lodash"),o=JSON.parse(e("text!package.json")),r=e("streaming"),s=e("wt-statistics-jsclient"),a=e("module/core/js/util/array"),l=e("module/core/js/model/chartmodelevents"),u=e("module/core/js/util/class"),c=e("module/core/js/model/deviceinfo"),d=e("module/core/js/util/functional"),h=e("module/core/js/indicator/indicator"),p=e("module/core/js/indicator/indicatorfactory"),m=e("module/core/js/indicator/indicatorrelativesizing"),f=e("module/core/js/indicator/indicatorsenum"),_=e("module/core/js/model/instrumentmodelcollection"),g=e("module/core/js/model/instrumentmodelevents"),v=e("module/core/js/model/intervallist/linearformatter"),y=e("module/core/js/util/object"),M=e("module/core/js/model/resolutionsenum"),b=e("module/core/js/tracker/enum/schema"),A=e("module/core/js/settings/settingsevents"),T=e("module/core/js/event/subscribable"),E=e("module/core/js/model/userinfo"),w=e("module/core/js/model/environmentinfo"),O=e("module/core/js/model/visibledaterange"),I=e("module/core/js/model/visibledaterangeevents");u.extend(n,T);var S=n.prototype;return S._allowScrollingIntoFuture=!1,S._instrumentModelToLoad=null,S._indicators=null,S._secondaryPricesIndicators=null,S.resolution=null,S._priceType=null,S._style=null,S.visibleDateRange=null,S.priceStreamClock=null,S.restrictDuration=null,S._instrumentModels=null,S._indicatorFactory=null,S._animationPoller=null,S._previouslyStreaming=!1,S._currentStreamingStatus=!1,S._intervalListFormatterClass=v,S._settingsManager=null,S._lastTrackedPriceAttributes=null,S.getStreamingStatus=d.getter("_currentStreamingStatus"),S.withPriceStreamClock=d.setter("priceStreamClock"),S.withAllowScrollingIntoFuture=d.setter("_allowScrollingIntoFuture"),S.withAnimationPoller=d.setter("_animationPoller"),S.withRestrictDuration=d.setter("restrictDuration"),n.create=function(e,t,i){return new n(e,t,i)},n.CANDLE_WIDTH_DEBOUNCE_MILLIS=1e3,S.compareMarkets=function(e,t){this.resolution=t,this._instrumentModels.loadMarkets(e,t),this._createVisibleDateRange(),this.fire(l.INSTRUMENT_RESOLUTION_CHANGE),this._instrumentModels.getAllActiveInstrumentResolutions().forEach((function(e){this._addSecondaryPricesIndicator(e)}),this)},S._loadSingleEpic=function(e,t){this.resolution=t,this._instrumentModels.loadMarkets([e],t),this._createVisibleDateRange(),this._startPerformanceTracking(),this._wireIndicators(),this._startClock(),this._eventBus.publish("chart/resolution/changed",[this._instrumentModels.getActiveInstrumentResolution()],{retrospective:!0}),this.fire(l.INSTRUMENT_RESOLUTION_CHANGE)},S.updateStreamingStatus=function(e){var n=this._currentStreamingStatus,i=t(e);return this._currentStreamingStatus=i,n!==i&&(this._eventBus.publish("statistics",["STREAMING_STATUS_CHANGED",{instrumentResolutionGuid:this.getActiveInstrumentResolutionGuid(),status:i}]),this.fire(l.STREAMING_STATUS_CHANGED,i),this._previouslyStreaming&&i&&this._eventBus.publish(l.STREAMING_STATUS_RECONNECTED)),i&&(this._previouslyStreaming=!0),this},S._changeStyle=function(e,t){this._style=e,this._eventBus.publish("statistics",["SETTING_STYLE_CHANGED",{instrumentResolutionGuid:this.getActiveInstrumentResolutionGuid(),style:e}]),this.trackPrices()},S._createVisibleDateRange=function(){return this.visibleDateRange=O.create(this._eventBus,this._instrumentModels,this.restrictDuration,this._allowScrollingIntoFuture).withAnimationPoller(this._animationPoller),this._setInitialVisibleDateRange(),this.visibleDateRange.on(I.X_AXIS_READY,this._handleXAxisReady,this),this.visibleDateRange.on(I.WIDTH_CHANGED,this.setCandleWidth,this),this},S._handleXAxisReady=function(){this.setToLatestTime(),this.fire(l.INSTRUMENT_RESOLUTION_LOADED)},S.setToLatestTime=function(){this.visibleDateRange.setToLatestTime()},S._destroyVisibleDateRange=function(){return this.visibleDateRange.un(null,this),this.visibleDateRange.destroy(),this.visibleDateRange=null,this},S.getPriceType=d.getter("_priceType"),S.setPriceType=function(e){this._priceType=e,this._instrumentModels.updatePriceType()},S._setPriceType=function(e){var t={priceType:e};return this._priceType===e?this:(this._priceType=e,this.getCurrentInstrumentResolution()&&this.getCurrentInstrumentResolution().hasBlocksLoaded()&&this._instrumentModels.updatePriceType(),this._eventBus.publish("statistics/commonInfo",[t]),this._eventBus.publish("statistics",["PRICE_TYPE_CHANGED",t]),this)},S.setResolution=function(e,t){this._settingsManager.putResolutionSettings(e,t)},S.setCandleWidth=function(e){this._settingsManager.changeTemplateSettings("coreModule",(function(t){return!!(t.candleWidth=e)}),!0)},S._setResolution=function(e){var t={resolution:M.statisticsKeyFor(e)};return this.resolution===e?this:(this._eventBus.publish("statistics/commonInfo",[t]),this._eventBus.publish("statistics",["RESOLUTION_CHANGED",t]),this._instrumentModels.getInstrumentModel()&&this._instrumentModels.getInstrumentModel().epic?(this._deactivateInstrumentResolution(),this._loadSingleEpic(this._instrumentModelToLoad,e)):this._instrumentModelToLoad&&this._instrumentModelToLoad.epic?this._loadSingleEpic(this._instrumentModelToLoad,e):this.resolution=e,this)},S.setInstrument=function(e){var t={epic:e.epic};return this._style=null,this._instrumentModels.getInstrumentModel()&&(this._deactivateInstrumentResolution(),this._instrumentModels.un(null,this),this._instrumentModels.destroy(),this._instrumentModels=_.create(this,this._eventBus,this._intervalListFormatterClass)),this._addIndicator("PRICES",{preferredHeight:1}),this._eventBus.publish("statistics/commonInfo",[t]),this._eventBus.publish("statistics",["INSTRUMENT_SET",t]),this._instrumentModelToLoad=e,e.epic?this._settingsManager.hasSettings()?this._loadSingleEpic(this._instrumentModelToLoad,M.valueOf(this._settingsManager.getResolutionSettings())):this.resolution&&this._loadSingleEpic(this._instrumentModelToLoad,this.resolution):(this._eventBus.publish("statistics",["CHART_BLANKED"]),this.fire(l.CHART_CLEARED),this._eventBus.publish("chart/cleared")),this.fire(l.INSTRUMENT_CHANGED,e.epic),this._settingsManager.hasSettings()&&this._handleSettingsChanged(),s.Client.isPosting()||this._startLoggingStats(),this},S._startLoggingStats=function(){var e=E.getInstance(),t=c.getInstance(),n=w.getInstance(),i=new s.Session;if(!e.getSsoToken())throw new Error("Missing sso token while setting instrument");i.applicationName="HTML5Charts",i.applicationVersion=o.version,i.locale=e.getLocale(),i.websiteId=e.getWebSiteId(),i.accountId=e.getAccountId(),i.ssoTokenFirstTenChars=e.getSsoToken().slice(0,10),i.anonymousUserFlag=e.isAnonymous(),i.sessionProperties=t.asJSON()||{},i.sessionProperties.buildLabel=o.version,i.sessionProperties.userAgent=window.navigator.userAgent,s.Client.setOrigin(n.getOrigin()),s.Client.startPosting(i)},S._unwireIndicators=function(){for(var e in this._indicators)this._unwireIndicatorFromModel(this._indicators[e]);return this},S._startClock=function(){this.priceStreamClock.withStreamingPointClient(this._instrumentModels.getActiveInstrumentResolution().streamingClient),this.priceStreamClock.startTicking()},S._deactivateInstrumentResolution=function(){this.hasInstrumentResolution()&&(this._stopClock(),this._unwireIndicators(),this._instrumentModels.removeInstrumentResolution(this._instrumentModels.getInstrumentModel().epic,this.resolution),this._instrumentModels.un(null,this),this._destroyVisibleDateRange())},S._stopClock=function(){this.priceStreamClock.stopTicking(),this.priceStreamClock.withStreamingPointClient(null)},S._startPerformanceTracking=function(){return this._instrumentModels.on(g.ACTIVE_RESOLUTION_LOADED,this._publishChartLoadedEvents,this),this},S._publishChartLoadedEvents=d.deferred((function(){this.fire(l.CHART_LOADED,{instrumentResolutionGuid:this._instrumentModels.getActiveInstrumentResolutionGuid()})})),S.getActiveInstrumentResolutionGuid=function(){return this._instrumentModels.getInstrumentModel()?this._instrumentModels.getActiveInstrumentResolutionGuid():null},S._wireIndicators=function(){var e=this._instrumentModels.getActiveInstrumentResolution();for(var t in this._indicators)this._wireIndicatorToModel(this._indicators[t],e.instrumentModel.epic,e.resolution);return this},S._wireIndicatorToModel=function(e,t,n){e.setEpic(t),e.setResolution(n),e.activateAvailability(),e.on(h.AVAILABILITY_CHANGED,this._startCalculatingIndicator,this),this._startCalculatingIndicator(e)},S._startCalculatingIndicator=function(e){if(e.isAvailable()){var t=this._instrumentModels.getInstrumentResolution(e.epic,e.resolution);t||(t=this._instrumentModels.addSecondaryInstrumentResolution(e.epic,e.resolution),this._addSecondaryPricesIndicator(t)),e.startCalculating(this,t,this.visibleDateRange)}},S._addSecondaryPricesIndicator=function(e){var t="PRICES-"+e.getEpic()+"-"+e.resolution.id,n=this._indicatorFactory.createIndicator(t);n.setEpic(e.getEpic()),n.setResolution(e.resolution),n.startCalculating(this,e,this.visibleDateRange),this._secondaryPricesIndicators[n.name]=n,this.fire(l.INDICATOR_ADDED,n)},S._unwireIndicatorFromModel=function(e){e.isAvailable()&&(e.stopCalculating(),this._removeSecondaryResolutionIfRedundant(e)),e.un(null,this),e.deactivateAvailability()},S._removeSecondaryResolutionIfRedundant=function(e){var t=1===y.values(this._indicators).filter((function(t){return t.resolution===e.resolution})).length;e.resolution!==this.resolution&&t&&(this._removeSecondaryPricesIndicator(e.epic,e.resolution),this._instrumentModels.removeInstrumentResolution(e.epic,e.resolution))},S._removeSecondaryPricesIndicator=function(e,t){var n=this._secondaryPricesIndicators["PRICES-"+e+"-"+t.id];n.stopCalculating(),delete this._secondaryPricesIndicators[n.name],this.fire(l.INDICATOR_REMOVED,n)},S.updateIndicator=function(e,t,n){return this._eventBus.publish("tracker/chart",[{schema:b.INDICATORS_ACTION,elementId:"INDICATOR_"+e.toUpperCase(),elementGroup:"INDICATOR",elementValue:e.toUpperCase(),elementType:"LAYER",actionType:"UPDATE",indicatorAttributes:this._getIndicatorTrackingAttributes(t)}]),this._settingsManager.putIndicatorSettings(e,t,n),this._publishStatisticsIndicatorEvent(e,"INDICATOR_SETTING_CHANGED",t),this},S._getIndicatorTrackingAttributes=function(e){var t={schema:b.INDICATOR_ATTRIBUTES};return e.preferredHeight&&(t.preferredHeight=e.preferredHeight),t},S.addIndicator=function(e,t,n){return this._eventBus.publish("tracker/chart",[{schema:b.INDICATORS_ACTION,elementId:"INDICATOR_"+e.toUpperCase(),elementGroup:"INDICATOR",elementValue:e.toUpperCase(),elementType:"LAYER",actionType:"CREATE",indicatorAttributes:this._getIndicatorTrackingAttributes(t)}]),this._hasPrices()&&m.resizeIndicatorsOnIndicatorAdded(t,this._indicators),this._settingsManager.putIndicatorSettings(e,t,n),this},S._updateIndicatorsSize=function(e){return this._settingsManager.updateIndicatorsSettings(e,!0),this._publishStatisticsIndicatorsResizedEvent(e),this},S._handleIndicatorAdded=function(e,t,n){var i=this._addIndicator(e,t,n);this._hasPrices()&&m.resizePriceIndicatorWithRemainingSpace(this._indicators),i&&(this._eventBus.flush("chart/indicator/removed/"+e),this._eventBus.publish("chart/indicator/added/"+e,[i],{retrospective:!0}),this._publishStatisticsIndicatorEvent(e,"INDICATOR_ADDED",t),this._eventBus.publish("tracker/chart",[{schema:b.INDICATORS_ACTION,elementId:"INDICATOR_"+e.toUpperCase(),elementGroup:"INDICATOR",elementValue:e.toUpperCase(),elementType:"LAYER",actionType:"SHOW",indicatorAttributes:this._getIndicatorTrackingAttributes(t)}]))},S._addIndicator=function(e,t,n){var i,o=this._indicatorFactory.createIndicator(e,t,n),r={};return o?(r["indicator_"+f.statisticsKeyFor(e)]=JSON.stringify(t),this._eventBus.publish("statistics/commonInfo",[r]),this._indicators[e]=o,this.hasInstrumentResolution()&&(i=this._instrumentModels.getActiveInstrumentResolution(),this._wireIndicatorToModel(o,i.getEpic(),i.resolution)),this.fire(l.INDICATOR_ADDED,o),o):null},S._publishStatisticsIndicatorEvent=function(e,t,n){var i;n=n||{},i=y.merge({instrumentResolutionGuid:this.getActiveInstrumentResolutionGuid(),indicator:f.statisticsKeyFor(e)},n),this._eventBus.publish("statistics",[t,i])},S._publishStatisticsIndicatorsResizedEvent=function(e){var t={instrumentResolutionGuid:this.getActiveInstrumentResolutionGuid(),indicatorsSettings:e};this._eventBus.publish("statistics",["INDICATORS_RESIZED",t])},S.removeIndicator=function(e,t){return this.hasIndicator(e)?(this._eventBus.publish("tracker/chart",[{schema:b.INDICATORS_ACTION,elementId:"INDICATOR_"+e.toUpperCase(),elementGroup:"INDICATOR",elementValue:e.toUpperCase(),elementType:"LAYER",actionType:"DELETE",indicatorAttributes:this._getIndicatorTrackingAttributes({preferredHeight:this._indicators[e].getPreferredHeight()})}]),this._hasPrices()&&m.resizeIndicatorsOnIndicatorRemoved(e,this._indicators),this._settingsManager.deleteIndicatorSettings(e,t),this):this},S._handleIndicatorRemoved=function(e){var t;if(!this.hasIndicator(e))return this;t=this._removeIndicator(e),this._eventBus.flush("chart/indicator/added/"+e),this._eventBus.publish("chart/indicator/removed/"+e,[t],{retrospective:!0}),this._publishStatisticsIndicatorEvent(e,"INDICATOR_REMOVED"),this._eventBus.publish("tracker/chart",[{schema:b.INDICATORS_ACTION,elementId:"INDICATOR_"+e.toUpperCase(),elementGroup:"INDICATOR",elementValue:e.toUpperCase(),elementType:"LAYER",actionType:"HIDE",indicatorAttributes:this._getIndicatorTrackingAttributes({preferredHeight:t.getPreferredHeight()})}])},S._removeIndicator=function(e){var t=this._indicators[e],n={};return t?(this.hasInstrumentResolution()&&this._unwireIndicatorFromModel(t),delete this._indicators[e],this.fire(l.INDICATOR_REMOVED,t),n["indicator_"+f.statisticsKeyFor(e)]=void 0,this._eventBus.publish("statistics/commonInfo",[n]),t):null},S._handleIndicatorUpdated=function(e,t,n){var i=this._updateIndicator(e,t,n);i&&(this._eventBus.publish("chart/indicator/updated/"+e,[i]),this._publishStatisticsIndicatorEvent(e,"INDICATOR_UPDATED",t))},S._updateIndicator=function(e,t,n){var i=this._indicators[e],o={};return this.hasInstrumentResolution()&&this._unwireIndicatorFromModel(i),(i=this._indicatorFactory.updateIndicator(i,t,n))?(o["indicator_"+f.statisticsKeyFor(e)]=JSON.stringify(t),this._eventBus.publish("statistics/commonInfo",[o]),this._indicators[e]=i,this.hasInstrumentResolution()&&this._wireIndicatorToModel(i,i.epic,this._instrumentModels.getActiveInstrumentResolution().resolution),this.fire(l.INDICATOR_UPDATED),i):null},S.hasIndicator=function(e){return!!this._indicators[e]},S.getIndicators=d.getter("_indicators"),S.getIndicatorsInOrder=function(){var e,t=this._indicatorFactory.getNames(),n=[];for(e=0;e<t.length;e++)this._indicators[t[e]]&&n.push(this._indicators[t[e]]);return n},S.hasInstrumentResolution=function(){return this._instrumentModels.hasActiveInstrumentResolutions()},S.getCurrentInstrumentResolution=function(){return this._instrumentModels.getInstrumentModel()?this._instrumentModels.getActiveInstrumentResolution():null},S._startHandlingLightstreamerEvents=function(){r.on(r.STATUS_CHANGE_EVENT,this.updateStreamingStatus,this)},S._stopHandlingLightstreamerEvents=function(){r.un(null,this)},S._handleSettingsChanged=function(){var e,t=this._settingsManager.getPriceTypeSettings(),n=this._settingsManager.getStyleSettings(),i=M.valueOf("FIVE_MINUTES");this._settingsManager.getResolutionSettings()&&(e=M.valueOf(this._settingsManager.getResolutionSettings())),this._instrumentModels.getInstrumentModel()&&this._instrumentModels.getInstrumentModel().delayTime&&e.period<i.period&&(e=i),t&&this._setPriceType(t),e&&this._setResolution(e),n!==this._style&&this._eventBus.publish("chart/style/change",[n,!1]),this._handleIndicatorsChanged(),this.trackPrices(),this._setInitialVisibleDateRange()},S._handleSettingsImported=function(){this.visibleDateRange&&this.visibleDateRange.isXAxisReady()&&this.visibleDateRange.setToLastPoint()},S._setInitialVisibleDateRange=function(){this.visibleDateRange&&this._settingsManager.hasSettings()&&this.visibleDateRange.setInitialDurationFromCandleWidth(this._settingsManager.getCandleWidth())},S.trackPrices=function(){var e=null;if(this.getCurrentInstrumentResolution()){if(!this.getCurrentInstrumentResolution().hasBlocksLoaded())return;e=this.getCurrentInstrumentResolution().getTrackingAttributes(),e.style=this._style}!this._lastTrackedPriceAttributes||e&&this._lastTrackedPriceAttributes.epic==e.epic||this._trackPricesAction("HIDE",this._lastTrackedPriceAttributes),e&&(this._lastTrackedPriceAttributes&&this._lastTrackedPriceAttributes.epic==e.epic?y.diff(this._lastTrackedPriceAttributes,e)&&this._trackPricesAction("UPDATE",e):this._trackPricesAction("SHOW",e)),this._lastTrackedPriceAttributes=e},S._trackPricesAction=function(e,t){this._eventBus.publish("tracker/chart",[{schema:b.PRICES_ACTION,elementId:"PRICES",elementType:"LAYER",actionType:e,priceAttributes:t}])},S._handleIndicatorsChanged=function(){var e,t,n=a.remove(Object.keys(this._indicators),"PRICES"),o=[],r=[],s=i.cloneDeep(this._settingsManager.getColourCustomisationSettings());for(this._settingsManager.getIndicatorSettings().forEach((function(e){var t=n.indexOf(e.id);-1===t?o.push(e):(n.splice(t,1),(y.diff(this._indicators[e.id].getSettings(),e.settings)||y.diff(this._indicators[e.id].getVisibilitySettings(),s.indicators[e.id]))&&r.push(e))}),this),e=n,t=0;t<e.length;t++)this._handleIndicatorRemoved(e[t]);for(t=0;t<r.length;t++)this._handleIndicatorUpdated(r[t].id,r[t].settings,s.indicators[r[t].id]);for(t=0;t<o.length;t++)this._handleIndicatorAdded(o[t].id,o[t].settings,s.indicators[o[t].id])},S._hasPrices=function(){return!!this._indicators.PRICES},S.destroy=function(){this._stopHandlingLightstreamerEvents(),this._deactivateInstrumentResolution(),this._instrumentModels.destroy(),this._settingsManager.un(null,this),this._eventBus.unsubscribeAll(this),this._destroyStats(),this.setCandleWidth.abort()},S._destroyStats=function(){window.clearTimeout(s.Client._queuedPostId),window.clearTimeout(s.Client._requestTimeoutId),s.Client._currentRequest&&s.Client._currentRequest.abort()},Object.seal(S),n})),define("module/core/js/view/userinput/pinchgesturerecogniser",["require","module/core/js/view/userinput/deprecatedgesturerecogniser","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object"],(function(e){"use strict";function t(){}var n=e("module/core/js/view/userinput/deprecatedgesturerecogniser"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/object");i.extend(t,n),t.create=function(){return new t};var s=t.prototype;return s._pinchDistance=null,s.type="pinch",s.scale=null,s.y1Start=null,s.y1End=null,s.y2Start=null,s.y2End=null,s.x1Start=null,s.x1End=null,s.x2Start=null,s.x2End=null,s._y1Index=null,s._y2Index=null,s._x1Index=null,s._x2Index=null,s._getDistance=function(e){var t=e[this._x2Index].x-e[this._x1Index].x,n=e[this._y2Index].y-e[this._y1Index].y;return Math.sqrt(t*t+n*n)},s._handlePointerDown=function(e,t,n){this._isValidPinch(t)&&(this._startGesture(),this._isRecognised=!0,this._updatePointerDirections(t),this._pinchDistance=this._getDistance(t),this.x1Start=t[this._x1Index].x,this.x2Start=t[this._x2Index].x,this.y1Start=t[this._y1Index].y,this.y2Start=t[this._y2Index].y)},s._handlePointerMove=function(e,t,n){r.count(t)>=2&&this._inProgress&&(this._updatePointerDirections(t),this.scale=this._getDistance(t)/this._pinchDistance,this.y1End=t[this._y1Index].y,this.y2End=t[this._y2Index].y,this.x1End=t[this._x1Index].x,this.x2End=t[this._x2Index].x,this._callHandler(),this.y1Start=this.y1End,this.y2Start=this.y2End,this.x1Start=this.x1End,this.x2Start=this.x2End)},s._handlePointerUp=function(e,t,n){r.count(t)<=2&&this._inProgress&&(this._resetPointers(),this._endGesture(),this._isRecognised=!1)},s._updatePointerDirections=function(e){var t=Object.keys(e);e[t[1]].y>e[t[0]].y?(this._y1Index=t[1],this._y2Index=t[0]):(this._y1Index=t[0],this._y2Index=t[1]),e[t[1]].x>e[t[0]].x?(this._x1Index=t[1],this._x2Index=t[0]):(this._x1Index=t[0],this._x2Index=t[1])},s._resetPointers=function(){this.y1Start=0,this.y2Start=0,this.y1End=0,this.y2End=0,this.x1Start=0,this.x2Start=0,this.x1End=0,this.x2End=0},s._isValidPinch=function(e){if(!e)return!1;var t,n,i,o=Object.keys(e);return!(o.length<2||this._inProgress)&&(n=e[o[1]].x-e[o[0]].x,i=e[o[1]].y-e[o[0]].y,t=180*Math.atan2(i,n)/Math.PI,this._isValidAngle(t))},s._isValidAngle=o.always,Object.seal(s),Object.seal(t)})),define("module/core/js/view/userinput/directionalpinchgesturerecogniser",["require","module/core/js/util/class","module/core/js/util/functional","module/core/js/view/userinput/pinchgesturerecogniser"],(function(e){"use strict";function t(e){t.superclass.constructor.call(this),this._isValidAngle=e}var n=e("module/core/js/util/class"),i=e("module/core/js/util/functional"),o=e("module/core/js/view/userinput/pinchgesturerecogniser");n.extend(t,o),t.create=function(e){return new t(e)};var r=t.prototype;return r._isValidAngle=i.throwError("No direction for pinch specified"),Object.seal(r),Object.seal(t)})),define("module/core/js/view/userinput/mousewheelrecogniser",["require","lodash"],(function(e){"use strict";function t(){}var n=e("lodash");t.create=function(){return new t};var i=t.prototype;return i.type="wheel",i._handler=null,i._handlerContext=null,i.resetHover=n.noop,i.withHandler=function(e,t){return this._handler=e,this._handlerContext=t,this},i.process=function(e,t,n){return"wheel"===n.type&&(this._handler.call(this._handlerContext,n,e),n.preventDefault(),!0)},i.reset=n.noop,i.on=n.noop,i.un=n.noop,i.destroy=n.noop,Object.seal(i),Object.seal(t)})),define("module/core/js/view/userinput/tridirectionalpangesturerecogniser",["require","lodash","module/core/js/util/class","module/core/js/view/userinput/directionalpangesturerecogniser","module/core/js/view/userinput/directionsenum"],(function(e){"use strict";function t(e){if(e=e||{},e.handleHold)throw new Error("Tri-directional pan gesture recogniser cannot activate on timeout");t.superclass.constructor.call(this,n.assign(e,{plane:a._updateDeltas})),"number"==typeof e.directions&&(this._acceptedDirections=e.directions)}var n=e("lodash"),i=e("module/core/js/util/class"),o=e("module/core/js/view/userinput/directionalpangesturerecogniser"),r=e("module/core/js/view/userinput/directionsenum");i.extend(t,o),t.create=function(e){return new t(e)};var s=t.DIRECTIONS=Object.freeze({HORIZONTAL:1,VERTICAL:2,DIAGONAL:4}),a=t.prototype;return a.direction=null,a._acceptedDirections=s.HORIZONTAL|s.VERTICAL|s.DIAGONAL,a._startGesture=function(){this._isRecognised||(this._determineDirection()?(this._updateDeltas({x:this.startX+this.deltaX,y:this.startY+this.deltaY}),t.superclass._startGesture.call(this)):this.reset())},a._determineDirection=function(){var e=180*Math.atan2(this.deltaY,this.deltaX)/Math.PI,t=null;return Object.keys(s).some((function(n){if(r[n](e))return t=s[n],!0})),this.direction=t&this._acceptedDirections,this.direction===s.HORIZONTAL?this._updateDeltas=o.PLANES.HORIZONTAL:this.direction===s.VERTICAL?this._updateDeltas=o.PLANES.VERTICAL:this._updateDeltas=a._updateDeltas,!!this.direction},a.reset=function(){t.superclass.reset.call(this),this._updateDeltas=a._updateDeltas,this.direction=null},Object.seal(a),Object.seal(t)})),define("module/core/js/view/userinput/panandzoom",["require","module/core/js/view/userinput/abstractgesturerecogniser","module/core/js/view/userinput/directionalpinchgesturerecogniser","module/core/js/view/userinput/directionsenum","module/core/js/util/functional","module/core/js/view/userinput/mousewheelrecogniser","module/core/js/util/numberpairs","module/core/js/view/userinput/tapgesturerecogniser","module/core/js/view/userinput/tridirectionalpangesturerecogniser"],(function(e){"use strict";function t(e){var t=n.GESTURE_TIMEOUT;this._chartView=e,this._reportPinchGesture=r.debounce(this._reportPinchGesture,t),this._reportTapGesture=r.debounce(this._reportTapGesture,t),this._reportDoubleTapGesture=r.debounce(this._reportDoubleTapGesture,t),this._reportMouseWheelGesture=r.debounce(this._reportMouseWheelGesture,t)}var n=e("module/core/js/view/userinput/abstractgesturerecogniser"),i=e("module/core/js/view/userinput/directionalpinchgesturerecogniser"),o=e("module/core/js/view/userinput/directionsenum"),r=e("module/core/js/util/functional"),s=e("module/core/js/view/userinput/mousewheelrecogniser"),a=e("module/core/js/util/numberpairs"),l=e("module/core/js/view/userinput/tapgesturerecogniser"),u=e("module/core/js/view/userinput/tridirectionalpangesturerecogniser"),c=[.999,1.001],d=t.prototype;return t.create=function(e){return new t(e)},d._chartView=null,d._captureZone=null,d._eventBus=null,d._lastGestureScale=1,d._lastDragXOffset=0,d._lastDragYOffset=0,d.withEventBus=r.setter("_eventBus"),d.withCaptureZone=function(e){var t,n=[u.create({onGesture:this._handleDragMove,context:this,onStart:this._handleDragStart,startContext:this,onEnd:this._handleDragEnd,endContext:this,directions:u.DIRECTIONS.DIAGONAL|u.DIRECTIONS.VERTICAL}),i.create(o.VERTICAL).withHandler(this._handlePinch.bind(this,"vertical"),this).withEndHandler(this._handlePinchEnd,this),i.create(o.HORIZONTAL).withHandler(this._handlePinch.bind(this,"horizontal"),this).withEndHandler(this._handlePinchEnd,this),i.create(o.DIAGONAL).withHandler(this._handlePinch.bind(this,"diagonal"),this).withEndHandler(this._handlePinchEnd,this),l.create(2).withHandler(this._handleDoubleTapGesture,this),l.create(1).withHandler(this._handleTapGesture,this),s.create().withHandler(this._handleMouseWheel,this)];for(t=0;t<n.length;t++)e.addGestureRecogniser(n[t]);return this._recognisers=n,this._captureZone=e,this},d.destroy=function(){var e;if(this._captureZone){for(e=0;e<this._recognisers.length;e++)this._captureZone.removeGestureRecogniser(this._recognisers[e]),this._recognisers[e].destroy();this._captureZone=null}this._chartView=null,this._reportPinchGesture.abort(),this._reportTapGesture.abort(),this._reportDoubleTapGesture.abort(),this._reportMouseWheelGesture.abort()},d._handlePinch=function(e,t){this._isNegligibleZoom(t)||(this._lastGestureScale=t.scale,this._reportPinchGesture(),"horizontal"!==e&&"diagonal"!==e||this._eventBus.publish("chart/zoom/change/horizontal",[t.x1Start,t.x1End,t.x2Start,t.x2End]),"vertical"!==e&&"diagonal"!==e||this._eventBus.publish("chart/zoom/change/vertical",[t.y1Start,t.y1End,t.y2Start,t.y2End]))},d._isNegligibleZoom=function(e){var t=Math.pow(e.scale/this._lastGestureScale,1.08);return a.inRange(c,t)},d._reportPinchGesture=function(){this._eventBus.publish("statistics",["GESTURE_PINCH",{instrumentResolutionGuid:this._chartView.getInstrumentResolutionGuid()}])},d._handlePinchEnd=function(){this._lastGestureScale=1,this._eventBus.publish("chart/zoom/end")},d._handleDoubleTapGesture=function(){this._reportDoubleTapGesture(),this._eventBus.publish("chart/yfitting/reset")},d._handleTapGesture=function(){this._reportTapGesture()},d._reportTapGesture=function(){this._eventBus.publish("statistics",["GESTURE_TAP",{instrumentResolutionGuid:this._chartView.getInstrumentResolutionGuid()}])},d._reportDoubleTapGesture=function(){this._eventBus.publish("statistics",["GESTURE_DOUBLE_TAP",{instrumentResolutionGuid:this._chartView.getInstrumentResolutionGuid()}])},d._handleDragStart=function(){this._eventBus.publish("chart/pan/start")},d._handleDragMove=function(e){var t,n;e.direction===u.DIRECTIONS.DIAGONAL&&(t=e.deltaX-this._lastDragXOffset,this._eventBus.publish("chart/pan/change/horizontal",[t]),this._lastDragXOffset=e.deltaX),e.direction!==u.DIRECTIONS.VERTICAL&&e.direction!==u.DIRECTIONS.DIAGONAL||(n=e.deltaY-this._lastDragYOffset,this._eventBus.publish("chart/pan/change/vertical",[n]),this._lastDragYOffset=e.deltaY)},d._handleDragEnd=function(){this._lastDragXOffset=0,this._lastDragYOffset=0,this._eventBus.publish("chart/pan/end")},d._handleMouseWheel=function(e,t){var n=0!==e.deltaY||0!==e.deltaX,i=(e.deltaY||e.deltaX)>0?.1:-.1,o=i>0?i:i/(Math.abs(i)+1),r=o+1,s=Math.min(Math.max(t.x/this._chartView.chartWidth(),0),1);n&&(this._reportMouseWheelGesture(),e.shiftKey?this._eventBus.publish("chart/zoom/wheel/vertical",[r]):this._eventBus.publish("chart/zoom/wheel/horizontal",[r,s]),this._eventBus.publish("chart/zoom/end"))},d._reportMouseWheelGesture=function(){this._eventBus.publish("statistics",["GESTURE_MOUSE_WHEEL",{instrumentResolutionGuid:this._chartView.getInstrumentResolutionGuid()}])},Object.seal(d),Object.seal(t)})),define("module/core/js/view/subviewsizing",["require","module/core/js/ext/d3","module/core/js/util/functional"],(function(e){"use strict";var t=e("module/core/js/ext/d3"),n=e("module/core/js/util/functional"),i=n.invoker("topMargin"),o=n.invoker("bottomMargin"),r={};return r._isNotRelativelyPositioned=function(e){return!e.isRelativelyPositioned()},r._topMarginForSubViews=function(e){var n=e.getAll().filter(r._isNotRelativelyPositioned);return t.max(n,i)||0},r.availableHeightForSubViews=function(e,n){var s=e.getAll().filter(r._isNotRelativelyPositioned),a=t.max(s,i),l=t.max(s,o),u=n-(a||0)-(l||0);return Math.max(0,u)},r.getDimensionsForSubViews=function(e,t,n,i){var o=r._heightsForSubViews(e,n,i),s=r._topMarginForSubViews(e),a=s,l=function(e,n){var r=e.isRelativelyPositioned(),l=e.isInChartSpace(),u=o[n],c=0;return r&&(c=a,a+=u),l&&(c+=i.top),!r&&l&&(u-=i.top),{x:0,y:c,width:t,height:u,isRelative:r,name:e.name,topOffset:s}};return e.map(l)},r._heightsForSubViews=function(e,t,n){var i,o,r=0,s=function(e,o){var s
;return e.isRelativelyPositioned()?(void 0===i&&(i=o),s=Math.round(e.getRelativeSize()*(t-n.top)),r+=s):s=t,s};return o=e.map(s),void 0!==i&&(o[i]+=t-n.top-r),o},Object.seal(r)})),define("module/core/js/view/subviewmanager",["require","module/core/js/model/collection","module/core/js/util/functional","module/core/js/util/object","module/core/js/view/resizablestudyview","module/core/js/view/studyview","module/core/js/view/subview","module/core/js/view/subviewsizing","module/core/js/config/taskconfig","module/core/js/view/visiblewindow"],(function(e){"use strict";function t(e,t,i,o,r,s,a){this._dimensionOffsets=s,this._subViews=new n,this._rendererFactory=e,this._subViewFactory=t,this._eventBus=i,this._animationPoller=o,this._containerProvider=r,this._taskManager=a,this._eventBus.subscribe("resizableStudyViews/enabled",this._handleResizableStudyViewsEnabled,this),this._eventBus.subscribe("chart/subview/toggle",this.toggleSubView,this)}var n=e("module/core/js/model/collection"),i=e("module/core/js/util/functional"),o=e("module/core/js/util/object"),r=e("module/core/js/view/resizablestudyview"),s=e("module/core/js/view/studyview"),a=e("module/core/js/view/subview"),l=e("module/core/js/view/subviewsizing"),u=e("module/core/js/config/taskconfig"),c=e("module/core/js/view/visiblewindow"),d=i.invoker("isRelativelyPositioned"),h=function(e){return"prices"!==e.name},p=function(e){return e instanceof s},m=t.prototype;return m._chartModel=null,m._subViews=null,m._rendererFactory=null,m._subViewFactory=null,m._eventBus=null,m._captureZoneManager=null,m._animationPoller=null,m._containerProvider=null,m._dSvgContainer=null,m._dHtmlContainer=null,m._chartHeight=null,m._chartWidth=null,m._dimensionOffsets=null,m._resizeEnabled=!0,m.withCaptureZoneManager=i.setter("_captureZoneManager"),m.withChartModel=i.setter("_chartModel"),t._createIndicatorMetadata=function(e){return{id:e.getMainIndicator().name,settings:e.getMainIndicator().getSettings()}},m.getSubView=function(e){return this._subViews.getBy("name",e)},m.render=function(){this._chartModel.getCurrentInstrumentResolution()&&this._chartModel.getCurrentInstrumentResolution().hasBlocksLoaded()&&i.invokeCall(this._subViews.getAll(),"render")},m.remove=function(e){e.forEach((function(e){e.un(null,this),this._subViews.remove(e)}),this),i.invokeCall(e,"destroy")},m.addSubView=function(e,t){var n=this._subViewFactory.createSubView(e,t,this._captureZoneManager,this._animationPoller,this._rendererFactory);return n.on(r.RESIZE,this._onSubViewResize,this),n.on(r.RESIZE_END,this._onSubViewResizeEnd,this),this._subViews.add(n).sort(a.naturalOrder),this._dSvgContainer&&this._dHtmlContainer&&(this.renderSubViewsContainers(),this._initSubView(n)),n},m.addRenderersBySubviewConfig=function(e){var t,n,i;for(i in e)e.hasOwnProperty(i)&&(n=this.getSubView(i))&&(this._subViewFactory.createPresentationControllersForSubView(n,e[i].presentationControllers),t=this._rendererFactory.makeNewRenderers(n,e[i].renderers),n.addRenderers(t))},m.removeRenderersBySubviewConfig=function(e){var t,n,i,o;for(o in e)if(i=this.getSubView(o)){t=e[o].renderers;for(n in t)i.removeRenderer(n,t[n].group);i.removePresentationControllers(Object.keys(e[o].presentationControllers||{}))}},m.addPersistentSubViews=function(e){var t,n=this._subViewFactory.getPersistentNames(e.name);for(t=0;t<n.length;t++)this.addSubView(e,n[t])},m.recreateSubViewRenderers=function(){this._subViews.forEach(this._recreateSubViewRenderers,this)},m.removeSubViewRenderers=function(){i.invokeApply(this._subViews.getAll(),"removeRenderers")},m.initSubViews=function(e,t){this._dSvgContainer=e,this._dHtmlContainer=t,this.renderSubViewsContainers(),this._subViews.forEach(this._initSubView,this)},m.renderSubViewsContainers=function(){this._subViews.getAll().forEach((function(e){e.withContainer(this._containerProvider.getContainer(e.name))}),this)},m.studyViewForIndicator=function(e){return this._subViews.getBy("name",e.studyName)},m.removeDefunctStudyViews=function(){var e=this._studyViewsWithoutIndicators();return e.forEach((function(e){this._subViews.remove(e)}),this),i.invokeCall(e,"destroy"),i.invokeCall(e,"un",null,this),e.length>0},m.updateDimensions=function(e,t,n){this._chartWidth=e,this._chartHeight=t,this._dimensionOffsets=n,this._updateResizableStudyViewsMinHeight(),this._updateSubViewsDimensions()},m.createRenderersForIndicators=function(){var e,t,n,i=this._chartModel.getIndicators();for(n in i)e=i[n],t=this.studyViewForIndicator(e),t.addIndicator(e)},m.isNthStudyView=function(e,t){if(!p(e))return!1;var n=this._subViews.filter(p);return t<0&&(t+=n.length),n[t]===e},m.toggleSubView=function(e,t){this.getSubView(e).toggle(t),this._chartHeight&&this._chartWidth&&this.updateDimensions(this._chartWidth,this._chartHeight,this._dimensionOffsets)},m.destroy=function(){i.invokeCall(this._subViews.getAll(),"un",null,this),i.invokeCall(this._subViews.getAll(),"destroy"),this._eventBus.unsubscribeAll(this),this._subViews.clear(),this._dSvgContainer=null,this._dHtmlContainer=null},m._initSubView=function(e){e.initDom(this._resizeEnabled),this._chartModel&&this._chartModel.hasInstrumentResolution()&&this._recreateSubViewRenderers(e)},m._studyViewsWithoutIndicators=function(){var e=Object.create(null),t=this._chartModel.getIndicators();this._subViews.forEach((function(t){t.isPersistent||(e[t.name]=t)}));for(var n in t)delete e[t[n].studyName];return o.values(e)},m._updateSubViewsDimensions=function(){var e,t=l.availableHeightForSubViews(this._subViews,this._chartHeight),n=l.getDimensionsForSubViews(this._subViews,this._chartWidth,t,this._dimensionOffsets);for(e=0;e<n.length;e++)this._subViews.getAll()[e].updateDimensions(n[e],n,this._chartWidth,this._chartHeight)},m._recreateSubViewRenderers=function(e){e.removeRenderers().setVisibleWindow(this._createVisibleWindow(e.name)).addRenderers(this._rendererFactory.makeRenderersForSubView(e))},m._createVisibleWindow=function(e){return c.create(e,this._chartModel.visibleDateRange,this._eventBus,this._animationPoller)},m._onSubViewResize=function(e,t){var n,i,o,r=this._subViews.getAll().filter(d),s=l.availableHeightForSubViews(this._subViews,this._chartHeight),a=(e.dimensions.y-t.y)/s,c=r.indexOf(e);for(this._taskManager.startTask(u.RESIZE_SUBVIEW),a>=0?(n=-a,i=r.slice(0,c+1).reverse()):(n=a,i=r.slice(c-1)),o=1;o<i.length;o++)n=i[o].updateRelativeSize(n);a>=0?i[0].updateRelativeSize(a+n):i[0].updateRelativeSize(n-a),this._updateSubViewsDimensions()},m._onSubViewResizeEnd=function(){var e=this._getResizableStudyViews();this._taskManager.finishTask(u.RESIZE_SUBVIEW.ID),this._eventBus.publish("chart/indicator/updateSize",[e.map(t._createIndicatorMetadata)])},m._handleResizableStudyViewsEnabled=function(e){this._resizeEnabled=e,i.invokeApply(this._getResizableStudyViews(),"toggleResizeStatus",[e]),this._chartHeight&&this._chartWidth&&this.updateDimensions(this._chartWidth,this._chartHeight,this._dimensionOffsets)},m._getResizableStudyViews=function(){return this._subViews.getAll().filter(d).filter(h)},m._updateResizableStudyViewsMinHeight=function(){var e=this._getResizableStudyViews(),t=Math.min.apply(Math,e.map(i.plucker("minHeight"))),n=Math.min.apply(Math,e.map(i.invoker("getRelativeSize")));n<t&&e.forEach((function(e){e.minHeight=n}))},Object.seal(m),Object.seal(t)})),define("module/core/js/view/userinput/zoomer",["require","module/core/js/util/functional","module/core/js/util/lineartransform"],(function(e){"use strict";function t(e){this._activeInstrumentResolutionGuid=e,this._reportZoom=n.debounce(this._reportZoom,100)}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/lineartransform"),o=t.prototype;return o._visibleDateRange=null,o._scroller=null,o._eventBus=null,o.withEventBus=n.setter("_eventBus"),o.applyForcesWith=n.setter("_scroller"),o.startListening=function(){return this._eventBus.subscribe("chart/zoom/wheel/horizontal",this._handleWheelZoom,this),this._eventBus.subscribe("chart/zoom/change/horizontal",this._handleZoomChange,this),this._eventBus.subscribe("chart/zoom/end",this._handleZoomEnd,this),this},o._handleZoomChange=function(e,t,n,o){var r,s;e=this._visibleDateRange.pixelsToAccTime(e),t=this._visibleDateRange.pixelsToAccTime(t),n=this._visibleDateRange.pixelsToAccTime(n),o=this._visibleDateRange.pixelsToAccTime(o),r=i.pointerTrackingZoom(this._visibleDateRange.getScale().domain(),e,t,n,o),(s=r[1]-r[0])>0&&this._visibleDateRange.moveTo(r[1],s,!0)},o._handleWheelZoom=function(e,t){this._visibleDateRange.zoomBy(e,t,!0)},o._handleZoomEnd=function(){!this._scroller.isDragging()&&this._visibleDateRange.isOutOfBounds()&&this._scroller.applyForces(),this._reportZoom()},o._reportZoom=function(){this._eventBus.publish("statistics",["ZOOM",{instrumentResolutionGuid:this._activeInstrumentResolutionGuid}])},o.manageMovementIn=function(e){return this._visibleDateRange=e,this},o.stopListening=function(){this._eventBus.unsubscribeAll(this)},o.destroy=function(){this.stopListening(),this._reportZoom.abort()},Object.seal(o),Object.seal(t)})),define("module/core/js/view/chartview",["require","module/core/js/model/chartmodelevents","module/core/js/util/class","module/core/js/view/userinput/eventpropagation","module/core/js/event/events","module/core/js/util/functional","module/core/js/enum/hotkeyenum","module/core/js/view/userinput/infinitecapturezone","module/core/js/view/component/loadingindicator","module/core/js/util/object","module/core/js/view/userinput/panandzoom","module/core/js/view/userinput/scroller","module/core/js/view/subviewmanager","module/core/js/event/subscribable","module/core/js/enum/zindexenum","module/core/js/model/deviceinfo","module/core/js/view/userinput/tapgesturerecogniser","module/latest-candle-button/js/trackeractions","module/core/js/view/userinput/tridirectionalpangesturerecogniser","module/core/js/view/userinput/zoomer"],(function(e){"use strict";function t(e,n,i,o,r,s,l){this.name=e,this._containerProvider=n,this.animationPoller=s,this.subViewManager=new p(o,r,i,s,n,this._dimensionOffsets,l),this._eventBus=i,this.dContainer=this._containerProvider.getRootContainer().classed(t.TOUCH_CLASS,_.isTouch()).classed("android",_.isAndroid()),this._loadingIndicator=this._createLoadingIndicator(),l&&l.registerGlobalHotKey(a.SPACE,this._handleLatestCandleHotkey.bind(this))}var n=e("module/core/js/model/chartmodelevents"),i=e("module/core/js/util/class"),o=e("module/core/js/view/userinput/eventpropagation"),r=e("module/core/js/event/events"),s=e("module/core/js/util/functional"),a=e("module/core/js/enum/hotkeyenum"),l=e("module/core/js/view/userinput/infinitecapturezone"),u=e("module/core/js/view/component/loadingindicator"),c=e("module/core/js/util/object"),d=e("module/core/js/view/userinput/panandzoom"),h=e("module/core/js/view/userinput/scroller"),p=e("module/core/js/view/subviewmanager"),m=e("module/core/js/event/subscribable"),f=e("module/core/js/enum/zindexenum"),_=e("module/core/js/model/deviceinfo"),g=e("module/core/js/view/userinput/tapgesturerecogniser"),v=e("module/latest-candle-button/js/trackeractions"),y=e("module/core/js/view/userinput/tridirectionalpangesturerecogniser"),M=e("module/core/js/view/userinput/zoomer");t.SIZE_NOT_CHANGED="SIZE_NOT_CHANGED",t.RESIZED="RESIZED",t.MAXIMIZED="MAXIMIZED",t.TOUCH_CLASS="touch",i.extend(t,m);var b=t.prototype;return t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)},b.name=null,b._captureZoneManager=null,b._containerProvider=null,b._dimensionOffsets=Object.freeze({bottom:0,right:0,top:0}),b.globalCaptureZone=null,b._panAndZoomInput=null,b._scroller=null,b._scrollerPan=null,b._scrollerTap=null,b._chartModel=null,b.subViewManager=null,b.animationPoller=null,b.dContainer=null,b._dSvgRoot=null,b._dSvgContainer=null,b._dHtmlContainer=null,b._loadingIndicator=null,b.rightMargin=0,b.lastCandleToYAxisGap=0,b._eventBus=null,b._kinetic=!0,b._zoomer=null,b._preloaderInterval=null,b._theme=null,b._flavour=null,b._hasKineticMovement=s.getter("_kinetic"),b.withCaptureZoneManager=function(e){return this._captureZoneManager=e,this.subViewManager.withCaptureZoneManager(e),this},b.getHtmlOverlay=function(){return this._dHtmlContainer},b.withTheme=function(e){return this._theme&&this.dContainer.classed(this._theme,!1),this._theme=e,e&&this.dContainer.classed(e,!0),this},b.withFlavour=function(e){return this._flavour&&this.dContainer.classed(this._flavour,!1),this._flavour=e,e&&this.dContainer.classed(e,!0),this},b.withConfig=function(e){return this.rightMargin=e.rightMargin||0,this.lastCandleToYAxisGap=e.lastCandleToYAxisGap||0,void 0!==e.kinetic&&(this._kinetic=!!e.kinetic),this},b.withModel=function(e){if(this._chartModel)throw new Error("the chartModel should never be changed once set");var t,i,o=e.getIndicators();this._chartModel=e,this.subViewManager.withChartModel(e),e.hasInstrumentResolution()&&(this.subViewManager.recreateSubViewRenderers(),this.hideLoadingIndicator());for(i in o)this._setupRenderingOfIndicator(o[i]);return e.on(n.INDICATOR_ADDED,this._setupRenderingOfIndicator,this),e.on(n.INDICATOR_REMOVED,this._handleIndicatorRemoved,this),e.on(n.INDICATOR_UPDATED,this._redraw,this),e.on(n.INSTRUMENT_RESOLUTION_CHANGE,this._handleInstrumentResolutionChange,this),e.on(n.CHART_CLEARED,this._handleChartCleared,this),t=e.getCurrentInstrumentResolution(),t&&t.hasBlocksLoaded()&&this._chartModel.visibleDateRange.setXAxisReady(!0),this},b.withDimensionOffsets=function(e){var t=Object.freeze(c.merge(this._dimensionOffsets,e));return c.diff(this._dimensionOffsets,t)&&(this._dimensionOffsets=t,this.updateDimensions()),this},b.moveTo=function(e,t,n){this._scroller.stopMovement(),this._chartModel.visibleDateRange.moveTo(e,t,n)},b.moveToLatestCandle=function(){this._scroller.stopMovement(),this._chartModel.visibleDateRange.setToLastPoint(),this._eventBus.publish("chart/yfitting/reset")},b.isLatestCandleInVisibleWindow=function(){return!this._chartModel||!this._chartModel.visibleDateRange||this._chartModel.visibleDateRange.isLatestCandleInVisibleRange()},b._handleLatestCandleHotkey=function(){this.moveToLatestCandle(),this._eventBus.publish("tracker/chart",[v.latestCandle(v.latestCandle.HOTKEY)])},b._setupRenderingOfIndicator=function(e){var t=this.subViewManager.studyViewForIndicator(e);t||(t=this.subViewManager.addSubView(this,e.studyName)),this._chartModel.hasInstrumentResolution()&&(t.addIndicator(e),this._redraw())},b._handleIndicatorRemoved=function(e){var t=this.subViewManager.studyViewForIndicator(e);this._chartModel.hasInstrumentResolution()?(t.removeIndicator(e),this.subViewManager.removeDefunctStudyViews()&&this._redraw()):this.subViewManager.removeDefunctStudyViews()},b.getInstrumentResolutionGuid=function(){return this._chartModel.getActiveInstrumentResolutionGuid()},b.getUniqueElementId=function(e){return this.name+"-"+e},b.addPersistentSubViews=function(){return this.subViewManager.addPersistentSubViews(this),this},b._handleInstrumentResolutionChange=function(){this.subViewManager.recreateSubViewRenderers(),this.subViewManager.createRenderersForIndicators(),this.updateDimensions(),this._createInputInterpreters(),this._chartModel.getCurrentInstrumentResolution()&&this._chartModel.getCurrentInstrumentResolution().hasBlocksLoaded()&&this.render()},b._handleChartCleared=function(){this.subViewManager.removeSubViewRenderers()},b._createInputInterpreters=function(){this._createScroller(),this._createZoomer()},b._createScroller=function(){var e=this._chartModel.visibleDateRange,t=this.dContainer.attr("id");this._scroller&&(this._scroller.destroy(),this.globalCaptureZone.removeGestureRecogniser(this._scrollerPan),this.globalCaptureZone.removeGestureRecogniser(this._scrollerTap),this._scrollerPan.destroy(),this._scrollerTap.destroy()),this._scrollerTap=g.create(1,!0),this._scrollerPan=y.create({directions:y.DIRECTIONS.HORIZONTAL}),this.globalCaptureZone.addGestureRecogniser(this._scrollerTap),this.globalCaptureZone.addGestureRecogniser(this._scrollerPan),this._scroller=h.create(t).withAnimationPoller(this.animationPoller).withFrictionCoefficient(h.LOW_FRICTION).startGettingInputFrom(this._scrollerPan).setKineticMovement(this._hasKineticMovement()).manageMovementIn(e),this._scrollerTap.withStartHandler(this._scroller.stopMovement,this._scroller)},b._createZoomer=function(){this._zoomer&&this._zoomer.destroy(),this._zoomer=new M(this._chartModel.getActiveInstrumentResolutionGuid()).withEventBus(this._eventBus).manageMovementIn(this._chartModel.visibleDateRange).applyForcesWith(this._scroller).startListening()},b.initDom=function(){return this._createChartRenderingSpace()._createGlobalCaptureZone()._createPanAndZoomInput(),this.subViewManager.initSubViews(this._dSvgContainer,this._dHtmlContainer),this._eventBus.publish("chart/view/ready",[this,this._captureZoneManager,this._dHtmlContainer,this._dSvgContainer],{retrospective:!0}),this},b._createChartRenderingSpace=function(){return this._dSvgRoot=this._containerProvider.getContainer("svg-root"),this._matchSvgWidthAndHeightToContainer(),this._dSvgContainer=this._containerProvider.getContainer("top-svg"),this._dHtmlContainer=this._containerProvider.getContainer("top-html"),this},b._createGlobalCaptureZone=function(){return this._captureZoneManager.startListeningTo(this._containerProvider.getContainer("input-overlay").node()),this.globalCaptureZone=this._captureZoneManager.createZone(l,o.PROPAGATE_ALL,f.BASE),this},b._createPanAndZoomInput=function(){return this._panAndZoomInput=d.create(this).withCaptureZone(this.globalCaptureZone).withEventBus(this._eventBus),this},b._redraw=function(){this.subViewManager.renderSubViewsContainers(),this.updateDimensions(),this._chartModel.getCurrentInstrumentResolution()&&this._chartModel.getCurrentInstrumentResolution().hasBlocksLoaded()&&this.render()},b.updateDimensions=function(){var e=this._matchSvgWidthAndHeightToContainer();e!==t.SIZE_NOT_CHANGED&&this._updateDimensions(e)},b._updateDimensions=function(e){var n=this.chartWidth(),i=this.chartHeight(),o=this.rightMargin+this.lastCandleToYAxisGap;this._chartModel&&this._chartModel.hasInstrumentResolution()&&(this._chartModel.visibleDateRange.withRightMargin(o),this._chartModel.visibleDateRange.isXAxisReady()&&this._chartModel.visibleDateRange.width()>1?this._resizeVisibleDateRange(n):this._setVisibleDateRangeWidth(n),e===t.MAXIMIZED&&this._chartModel.setToLatestTime()),this.subViewManager.updateDimensions(n,i,this._dimensionOffsets)},b._resizeVisibleDateRange=function(e){this._chartModel.visibleDateRange.resizeTo(e,!0)},b._setVisibleDateRangeWidth=function(e){this._chartModel.visibleDateRange.setWidth(e)},b._matchSvgWidthAndHeightToContainer=function(){var e=t.SIZE_NOT_CHANGED,n=Math.max(1,this.dContainer.property("clientWidth")-this._dimensionOffsets.right),i=Math.max(1,this.dContainer.property("clientHeight")-this._dimensionOffsets.bottom),o=this.isMinimised();return n===this._dSvgRoot.attr("width")&&i===this._dSvgRoot.attr("height")?e:(this._dSvgRoot.attr({width:n,height:i}),e=o&&!this.isMinimised()?t.MAXIMIZED:t.RESIZED,this._eventBus.publish("chart/view/dimensions/changed",[n,i]),e)},b.isMinimised=function(){return 1===this.chartWidth()&&1===this.chartHeight()},b.newDefs=function(e){var t=this._dSvgRoot.insert("svg:defs",".topSvg");return e&&t.attr("id",e),t},b.removeDefs=function(e){this._dSvgRoot.select("#"+e).remove()},b.chartWidth=function(){return parseInt(this._dSvgRoot.attr("width"),10)},b.chartHeight=function(){return parseInt(this._dSvgRoot.attr("height"),10)},b.chartRect=function(){return this._dSvgRoot.node().getBoundingClientRect()},b.render=function(){this.subViewManager.render()},b.destroy=function(){this._eventBus.publish("chart/view/destroyed"),this._chartModel&&(this._chartModel.visibleDateRange&&this._chartModel.visibleDateRange.setXAxisReady(!1),this._stopListeningToIndicators(),this._chartModel.un(null,this),this._chartModel=null),this._scroller&&(this._scroller.destroy(),this._scrollerPan.destroy(),this._scrollerTap.destroy()),this._zoomer&&this._zoomer.destroy(),this._panAndZoomInput&&this._panAndZoomInput.destroy(),this._eventBus.unsubscribeAll(this),this.subViewManager.destroy(),this.globalCaptureZone&&(this.globalCaptureZone.destroy(),this.globalCaptureZone=null),this._captureZoneManager&&(this._captureZoneManager.destroy(),this._captureZoneManager=null),this._loadingIndicator.destroy(),this._dHtmlContainer=null,this._dSvgContainer=null,this._dSvgRoot=null,this.dContainer=null},b._stopListeningToIndicators=function(){var e,t=this._chartModel.getIndicators();for(e in t)t[e].un(null,this)},b._createLoadingIndicator=function(){var e=u.create();return e.initDom(this.dContainer),this._eventBus.subscribe(r.REQUEST_ERROR,this.hideLoadingIndicator,this),e},b.showLoadingIndicator=s.delegate("_loadingIndicator","show"),b.hideLoadingIndicator=s.delegate("_loadingIndicator","hide"),b.addRenderersBySubviewConfig=s.delegate("subViewManager","addRenderersBySubviewConfig"),b.removeRenderersBySubviewConfig=s.delegate("subViewManager","removeRenderersBySubviewConfig"),Object.seal(b),t})),define("module/core/js/view/userinput/linecapturezone",["require","module/core/js/view/userinput/abstractcapturezone","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/geometry","module/core/js/view/userinput/rectanglecapturezone"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/view/userinput/abstractcapturezone"),i=e("module/core/js/util/class"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/geometry"),s=e("module/core/js/view/userinput/rectanglecapturezone");i.extend(t,n),t.create=function(e,n,i){return new t(e,n,i)};var a=t.prototype;return a._constraints=null,a._x1=0,a._y1=0,a._x2=0,a._y2=0,a.getType=o.returns("line"),a.setConstraints=o.setter("_constraints"),a.setLineStart=function(e,t){return this._x1=e,this._y1=t,this},a.setLineEnd=function(e,t){return this._x2=e,this._y2=t,this},a.pointInCaptureZone=function(e,t){return(this._x1>0||this._x2>0)&&(this._y1>0||this._y2>0)&&(!(this._constraints&&!s.prototype.pointInCaptureZone.call(this._constraints,e,t))&&this._padding>=r.distancePointToSegment(e,t,this._x1,this._y1,this._x2,this._y2))},a.isSet=function(){return!!(this._x1||this._x2||this._y1||this._y2)},Object.seal(a),Object.seal(t)})),define("module/core/js/view/userinput/taprectanglecapturezone",["require","module/core/js/util/class","module/core/js/view/userinput/rectanglecapturezone","module/core/js/view/userinput/tapgesturerecogniser"],(function(e){"use strict";function t(e,n,i,r,s,a,l){t.superclass.constructor.call(this,e,n,i),this._tapRecogniser=o.create(r,s,a).withHandler(l),this.addGestureRecogniser(this._tapRecogniser)}var n=e("module/core/js/util/class"),i=e("module/core/js/view/userinput/rectanglecapturezone"),o=e("module/core/js/view/userinput/tapgesturerecogniser");n.extend(t,i),t.create=function(e,n,i,o,r,s,a){return new t(e,n,i,o,r,s,a)};var r=t.prototype;return r._tapRecogniser=null,r.destroy=function(){t.superclass.destroy.call(this),this._tapRecogniser.destroy()},Object.seal(r),Object.seal(t)})),define("module/core/js/view/userinput/capturezonemanager",["require","module/core/js/util/array","module/core/js/ext/d3","module/core/js/util/dom","module/core/js/view/userinput/eventpropagation","module/core/js/event/events","module/core/js/util/functional","module/core/js/util/globalevents","module/core/js/view/userinput/linecapturezone","module/core/js/util/object","module/core/js/enum/pointersenum","module/core/js/view/userinput/rectanglecapturezone","module/core/js/view/userinput/taprectanglecapturezone","module/core/js/util/uid","module/core/js/enum/zindexenum"],(function(e){"use strict";function t(e){this._defaultPadding=e||_,this._pointsByZoneId=Object.create(null),this._zonesByPointerId=Object.create(null),this._zones=[]}var n=e("module/core/js/util/array"),i=e("module/core/js/ext/d3"),o=e("module/core/js/util/dom"),r=e("module/core/js/view/userinput/eventpropagation"),s=e("module/core/js/event/events"),a=e("module/core/js/util/functional"),l=e("module/core/js/util/globalevents"),u=e("module/core/js/view/userinput/linecapturezone"),c=e("module/core/js/util/object"),d=e("module/core/js/enum/pointersenum"),h=e("module/core/js/view/userinput/rectanglecapturezone"),p=e("module/core/js/view/userinput/taprectanglecapturezone"),m=e("module/core/js/util/uid"),f=e("module/core/js/enum/zindexenum"),_=4,g=Object.freeze(["pointerdown","pointerenter","pointerleave","wheel","contextmenu"]),v=Object.freeze(["pointerup","pointermove","pointercancel"]);t.create=function(e){return new t(e)};var y=t.prototype;return y._defaultPadding=null,y._el=null,y._pointsByZoneId=null,y._zonesByPointerId=null,y._zones=null,y._dragging=null,y.getDefaultPadding=a.getter("_defaultPadding"),y.getOffset=function(){return this._el.node().getBoundingClientRect()},y.createZone=function(e,t,n){var i,o,r=[this,m.getUid(),t];for(o=3;o<arguments.length;o++)r.push(arguments[o]);return i=e.create.apply(e,r).withZIndex(n||f.BASE),this._addCaptureZone(i),i},y.create=function(e,t){return this.createZone(h,e,t)},y.createLineCaptureZone=function(e,t){return this.createZone(u,e,t)},y.createTapZone=function(e,t,n,i,o,s,a){var l=this.createZone(p,i||r.PROPAGATE_UNHANDLED,t,o,s,a,e);return n&&l.withPadding(n),l},y.remove=function(e){var t,n;this._removeZoneFromZones(e);for(t in this._pointsByZoneId[e.zoneId])n=this._zonesByPointerId[t],n.length>1?n.splice(n.indexOf(e),1):delete this._zonesByPointerId[t];delete this._pointsByZoneId[e.zoneId]},y.startListeningTo=function(e){return this._el=i.select(e),g.forEach((function(e){this._el.node().addEventListener(e,this)}),this),v.forEach((function(e){window.addEventListener(e,this)}),this),this},y.stopListening=function(){return this._el&&g.forEach((function(e){this._el.node().removeEventListener(e,this)}),this),v.forEach((function(e){window.removeEventListener(e,this)}),this),this},y.updateCaptureZoneZIndex=function(e,t,n){var i;if(n=n||!1,e.zIndex=t,-1!==(i=this._zones.indexOf(e))){if(this._zones.splice(i,1),n)for(i=0;i<this._zones.length&&!(this._zones[i].zIndex<e.zIndex);i++);else for(i=0;i<this._zones.length&&!(this._zones[i].zIndex<=e.zIndex);i++);this._zones.splice(i,0,e)}},y.gestureHandledBy=function(e){a.invokeCall(this._zones,"reset",e)},y.startDragging=function(){this._dragging=!0},y.stopDragging=function(){this._dragging=!1},y.destroy=function(){this.stopListening(),a.invokeCall(this._zones,"destroy"),this._zones=[],this._pointsByZoneId=Object.create(null),this._zonesByPointerId=Object.create(null)},y.handleEvent=function(e){var t;switch(e.type){case"contextmenu":this._forwardEventToHoveredZones(e);break;case"pointerdown":this._startTrackingPointer(e),this._forwardEventToTrackedZones(e);break;case"pointerenter":this._forwardEventToTrackedZones(e);break;case"pointermove":t=this._convertToRelativeSpace(e),o.updateCursorPosition(this._el,t.x,t.y);case"pointerleave":this._forwardEventToTrackedZones(e),e.pointerType===d.MOUSE&&this._forwardEventToHoveredZones(e);break;case"pointerup":this._forwardEventToTrackedZones(e),this._stopTrackingPointer(e);break;case"pointercancel":this._stopTrackingPointer(e);break;case"wheel":this._forwardEventToHoveredZones(e)}l.fire(s.jsFrameEnd)},y._addCaptureZone=function(e){var t;for(t=0;t<this._zones.length&&!(this._zones[t].zIndex<=e.zIndex);t++);this._zones.splice(t,0,e),this._pointsByZoneId[e.zoneId]=Object.create(null)},y._createZonePointer=function(e,t){return this._pointsByZoneId[e.zoneId][t.pointerId]=this._convertToRelativeSpace(t)},y._convertToRelativeSpace=function(e){var t=this.getOffset();return Object.freeze({pointerId:e.pointerId,x:e.clientX-t.left,y:e.clientY-t.top})},y._getInputArea=function(){var e=this.getOffset();return Object.freeze({width:e.right-e.left,height:e.bottom-e.top})},y._forwardEventToHoveredZones=function(e){if(this._dragging)return!1;var t=this._getTargetZones(e),n=t.inside,i=t.outside,o=i.filter(function(t){return!this._isTrackedZone(t,e.pointerId)}.bind(this));return a.invokeCall(o,"resetHover"),this._forwardEventToZones(n,e,!1)},y._forwardEventToTrackedZones=function(e){var t=this._zonesByPointerId[e.pointerId]||[];return t=n.shallowCopy(t),this._forwardEventToZones(t,e,!0)},y._forwardEventToZones=function(e,t,n){var i,o,s,a,l=!1,u=!1;for(a=0;a<e.length;a++)if(s=e[a],s.visible&&(n?(i=this._createZonePointer(s,t),l=s.handleEvent(i,c.shallowClone(this._pointsByZoneId[s.zoneId]),t)):l=s.handleEvent(this._convertToRelativeSpace(t),null,t),o=s.getEventPropagation(),u=u||l,o===r.BLOCK_ALL||l&&o===r.PROPAGATE_UNHANDLED))return!0;return u},y._getTargetZones=function(e){var t,n,i=this._convertToRelativeSpace(e),o=this._getInputArea(),r=[],s=[];for(n=0;n<this._zones.length;n++)t=this._zones[n],t.visible&&t.pointInCaptureZone(i.x,i.y,o.width,o.height)?s.push(t):r.push(t);return{inside:s,outside:r}},y._isTrackedZone=function(e,t){var i=this._zonesByPointerId[t]||[];return n.contains(i,e)},y._startTrackingPointer=function(e){var t,n=e.pointerId,i=this._getTargetZones(e).inside;for(t=0;t<i.length;t++)this._zonesByPointerId[n]||(this._zonesByPointerId[n]=[]),this._isTrackedZone(i[t],n)||(this._zonesByPointerId[n].push(i[t]),this._createZonePointer(i[t],e))},y._stopTrackingPointer=function(e){var t,n=e.pointerId,i=this._zonesByPointerId[n];if(i){for(t=0;t<i.length;t++)this._removeZonePointer(i[t],e);delete this._zonesByPointerId[n]}Object.keys(this._pointsByZoneId).forEach((function(e){delete this._pointsByZoneId[e][n]}),this),0===Object.keys(this._zonesByPointerId).length&&(this._dragging=!1)},y._removeZoneFromZones=function(e){var t=this._zones.indexOf(e);t>=0&&this._zones.splice(t,1)},y._removeZonePointer=function(e,t){delete this._pointsByZoneId[e.zoneId][t.pointerId]},Object.seal(y),Object.seal(t)})),define("module/core/js/view/renderer/rendererfactory",["require","module/core/js/util/object"],(function(e){"use strict";function t(e,t,n,i){this._eventBus=e,this._captureZoneManager=t,this._indicatorsConfigAggregator=n,this._subViewsConfigAggregator=i}var n=e("module/core/js/util/object"),i=t.prototype;return i._indicatorsConfigAggregator=null,i._subViewsConfigAggregator=null,i._eventBus=null,i._captureZoneManager=null,i._getIndicatorRendererConfigs=function(e){var t=this._indicatorsConfigAggregator.getConfig(e);return t.subIndicators?this._getCompositeIndicatorRendererConfigs(t):t.renderers},i._getCompositeIndicatorRendererConfigs=function(e){var t,i={};for(t in e.subIndicators)n.applyTo(i,e.subIndicators[t].renderers);return i},i._makeRenderersFromConfig=function(e,t,n,i){var o,r,s,a,l,u=[];for(n=n||Object.keys(t||{}),l=0;l<n.length;l++)o=n[l],r=t[o],s=r.type,a=new s(o,r.group||i.name,this._eventBus,this._captureZoneManager,r.pointType),i&&a.withIndicator(i),r.position&&a.withPosition(r.position),r.presentationController&&(a.withPresentationModel(e.getPresentationControllerByName(r.presentationController).getPresentationModel()),a.withPresentationController(e.getPresentationControllerByName(r.presentationController))),r.properties&&this._applyProperties(a,r.properties),u.push(a);return u},i._applyProperties=function(e,t){var n,i;for(i in t){if(n="with"+i.charAt(0).toUpperCase()+i.slice(1),void 0===e[n])throw new TypeError("Renderer '"+e.name+"' ["+Object.getPrototypeOf(e).constructor.name+"] does not provide property setter for: "+i);e[n].call(e,t[i])}},i.makeRenderersForIndicator=function(e){return this._makeRenderersFromConfig(null,this._getIndicatorRendererConfigs(e.name),e.getCurrentRendererNames(),e)},i.makeRenderersForSubView=function(e){return this._makeRenderersFromConfig(e,this._subViewsConfigAggregator.getRendererConfigs(e.name))},i.makeNewRenderers=function(e,t){return this._makeRenderersFromConfig(e,t)},Object.seal(i),Object.seal(t)})),define("module/core/js/view/subviewfactory",["require","module/core/js/util/object"],(function(e){"use strict";function t(e,t,n,i,o,r){this._eventBus=e,this._subViewsConfigAggregator=t,this._moduleLoader=n,this._containerProvider=i,this._settingsManager=o,this._taskManager=r}
var n=e("module/core/js/util/object"),i=t.prototype;return i._subViewsConfigAggregator=null,i._eventBus=null,i._moduleLoader=null,i._containerProvider=null,i._settingsManager=null,i._taskManager=null,i.createSubView=function(e,t,i,o,r){var s=e.name+"-"+this._containerProvider.getRootContainer().attr("id"),a=this._subViewsConfigAggregator.getConfig(t),l=!1!==a.domainNicing,u=a.type,c=new u(s,t).withDomainNicing(l).withRelativeWeighting(a.relativeWeighting).withPersistence(a.isPersistent).withChartView(e).withRendererFactory(r).withCaptureZoneManager(i).withAnimationPoller(o);return n.isEmpty(a.presentationControllers)||this.createPresentationControllersForSubView(c,a.presentationControllers),a.yFitter&&c.withYFitter(this._instantiateObjectFromConfig(a.yFitter)),a.zoom&&c.withZoom(!0),a.relativeSize&&c.withRelativeSize(a.relativeSize),a.instrumentScaling&&c.withInstrumentScaling(!!a.instrumentScaling),a.minHeight&&c.withMinHeight(a.minHeight),a.properties&&c.withProperties(a.properties),c.withEventBus(this._eventBus),c},i.createPresentationControllersForSubView=function(e,t){var i,o={},r=n.shallowClone(t||{});for(i in e.presentationControllers)delete r[i];for(i in r)o[i]=this._instantiateObjectFromConfig(r[i]).withPresentationModel(this._instantiateObjectFromConfig(r[i].presentationModel)).withModuleLoader(this._moduleLoader).withContainerProvider(this._containerProvider).withSettingsManager(this._settingsManager).withTaskManager(this._taskManager);e.addPresentationControllers(o)},i.getPersistentNames=function(){return this._subViewsConfigAggregator.getPersistentNames()},i._instantiateObjectFromConfig=function(e){var t=e.type,i=new t(this._eventBus);return e.properties&&n.applyTo(i,e.properties),i},Object.seal(i),Object.seal(t)})),define("module/core/js/view/factory/chartviewfactory",["require","lodash","module/core/js/view/userinput/capturezonemanager","module/core/js/view/renderer/rendererfactory","module/core/js/view/subviewfactory"],(function(e){"use strict";function t(e,t,n,i,o,r,s){this._ChartViewType=e,this._moduleLoader=t,this._animationPoller=n,this._chartViewConfig=i,this._chartModel=o,this._indicatorsConfigAggregator=r,this._subViewsConfigAggregator=s}var n=e("lodash"),i=e("module/core/js/view/userinput/capturezonemanager"),o=e("module/core/js/view/renderer/rendererfactory"),r=e("module/core/js/view/subviewfactory"),s=t.prototype;return s._ChartViewType=null,s._moduleLoader=null,s._chartViewConfig=null,s._chartModel=null,s._animationPoller=null,s._indicatorsConfigAggregator=null,s._subViewsConfigAggregator=null,s.create=function(e,t,s,a,l){var u,c=n.get(this._chartViewConfig,"captureZonePadding"),d=i.create(c),h=new o(a,d,this._indicatorsConfigAggregator,this._subViewsConfigAggregator),p=new r(a,this._subViewsConfigAggregator,this._moduleLoader,t,s,l);return u=this._ChartViewType.create(e,t,a,h,p,this._animationPoller,l).withConfig(this._chartViewConfig).withCaptureZoneManager(d).addPersistentSubViews(),u.initDom(),u.withModel(this._chartModel),u},Object.seal(s),Object.seal(t)})),define("text!module/core/js/view/domlayout.html",[],(function(){return'<div data-container="main-container" class="htmlChart" tabindex="0">\n    <style type="text/css" data-container="customisation-styles"></style>\n    <div data-container="input-overlay" class="inputOverlay">\n       <svg data-container="svg-root" xmlns="http://www.w3.org/2000/svg" version="1.1">\n           <g data-container="top-svg" class="topSvg" transform="translate(0.5,0.5)" buffered-rendering="dynamic">\n               <g data-container="underlay" class="subView underlay"></g>\n               <g data-container="prices" class="subView prices"></g>\n               <g data-container="aroon" class="subView aroon"></g>\n               <g data-container="atr" class="subView atr"></g>\n               <g data-container="awesome" class="subView awesome"></g>\n               <g data-container="chaikin" class="subView chaikin"></g>\n               <g data-container="cci" class="subView cci"></g>\n               <g data-container="dpo" class="subView dpo"></g>\n               <g data-container="dmi" class="subView dmi"></g>\n               <g data-container="kdj" class="subView kdj"></g>\n               <g data-container="macd" class="subView macd"></g>\n               <g data-container="momentum" class="subView momentum"></g>\n               <g data-container="mfi" class="subView mfi"></g>\n               <g data-container="roc" class="subView roc"></g>\n               <g data-container="rsi" class="subView rsi"></g>\n               <g data-container="stdev" class="subView stdev"></g>\n               <g data-container="stochastic" class="subView stochastic"></g>\n               <g data-container="volume" class="subView volume"></g>\n               <g data-container="willr" class="subView willr"></g>\n               <g data-container="overview" class="subView overview"></g>\n               <g data-container="xaxis" class="subView xaxis"></g>\n               <g data-container="frame" class="subView frame"></g>\n           </g>\n       </svg>\n\n       <div data-container="header-html" class="headerHtml">\n          <div data-container="htmlheaderoverlay" class="subView htmlheaderoverlay"></div>\n       </div>\n\n       <div data-container="top-html" class="topHtml">\n           <div data-container="htmloverlay" class="subView htmloverlay"></div>\n           <div data-container="absoluteoverlay" class="subView absoluteoverlay"></div>\n       </div>\n\n        <div class="customCursor"></div>\n    </div>\n\n    <div data-container="playground"></div>\n\n</div>'})),define("module/core/js/view/containerprovider",["require","module/core/js/ext/d3","module/core/js/util/functional","text!module/core/js/view/domlayout.html","module/core/js/model/userinfo"],(function(e){"use strict";function t(e){this._dRootView=this._createRootView(e)}var n=e("module/core/js/ext/d3"),i=e("module/core/js/util/functional"),o=e("text!module/core/js/view/domlayout.html"),r=e("module/core/js/model/userinfo"),s=t.prototype;return s._dRootView=null,t.create=function(e){return new t(e)},s.getRootContainer=i.getter("_dRootView"),s.getContainer=function(e){var t=this._dRootView.select("[data-container="+e+"]");if(t.empty())throw new Error("The container "+e+" does not exist on the main layout");return t},s.appendToDOM=function(e){n.select(e).node().appendChild(this._dRootView.node())},s.destroy=function(){this._dRootView.remove(),this._dRootView=null},s._createRootView=function(e){var t=r.getInstance().getLocale().replace("_","-"),i=document.createElement("div");return i.innerHTML=o,i=n.select(i).select('[data-container="main-container"]'),i.attr("lang",t),i.attr("id",e),i},Object.seal(s),Object.seal(t)})),define("module/core/js/indicator/input/pricesinput",["require","module/core/js/model/block","module/core/js/util/class","module/core/js/event/events","module/core/js/indicator/input/indicatorinput","module/core/js/indicator/input/keenloadingpolicy"],(function(e){"use strict";function t(e,n,i){t.superclass.constructor.apply(this,arguments)}var n=e("module/core/js/model/block"),i=e("module/core/js/util/class"),o=e("module/core/js/event/events"),r=e("module/core/js/indicator/input/indicatorinput"),s=e("module/core/js/indicator/input/keenloadingpolicy");i.extend(t,r);var a=t.prototype;return a._hcdClient=null,a._keenLoadingPolicy=s.expandBlocksList,a.startRequestingPointsVia=function(e){this._hcdClient=e.hcdClient,this._receivePointsFrom(e),this._receivePointsFrom(e.streamingClient)},a._receivePointsFrom=function(e){e.on(o.POINTS_LOADED,this._handlePointsLoaded,this)},a.stopRequestingPointsVia=function(e){e.hcdClient.un(null,this),e.streamingClient.un(null,this)},a.collatePointsForBlocks=function(e){var t=this._expandToLoadUnprocessedBlocks(this._keenLoadingPolicy(e));this._hcdClient.loadDataForBlocks(t)},a._expandToLoadUnprocessedBlocks=function(e){var t,n;if(this._shouldExpand(e))for(n=e[0].previous,t=e.length;n&&t;)e.unshift(n),n.loading.started||t--,n=n.previous;return e},a._shouldExpand=function(e){var t;for(t=0;t<e.length;t++)if(e[t].loading===n.UNPROCESSED)return!0;return!1},a._handlePointsLoaded=function(e,t){this.fire(r.INDICATOR_INPUT,e,t)},Object.seal(a),t})),define("module/core/js/config/indicatorsconfigaggregator",["require","module/core/js/util/array","module/core/js/util/object","module/core/js/indicator/input/pricesinput","module/indicators/js/resolutionchooser/resolutionchooser"],(function(e){"use strict";function t(e){this._eventBus=e,this._indicatorNames=[],this._indicatorsConfig=Object.create(null),this._eventBus.subscribe("indicators/config",this._handleIndicatorsConfig,this,{once:!0}),this._eventBus.subscribe("styles/config",this._handleStylesConfig,this,{once:!0})}var n=e("module/core/js/util/array"),i=e("module/core/js/util/object"),o=e("module/core/js/indicator/input/pricesinput"),r=e("module/indicators/js/resolutionchooser/resolutionchooser"),s={input:{type:o},renderers:{},resolutionChooser:r,outputPointType:"prices",showOnTooltip:!1,study:"prices"};t.create=function(e){return new t(e)};var a=t.prototype;return a._eventBus=null,a._indicatorNames=null,a._indicatorsConfig=null,a._pricesConfig=null,a.destroy=function(){this._eventBus.unsubscribeAll(this),this._indicatorsConfig=null,this._indicatorNames=null,this._eventBus=null},a.getConfig=function(e){return"PRICES"===e?this._pricesConfig:/^PRICES/.test(e)?s:this._indicatorsConfig[e]?this._indicatorsConfig[e]:null},a.getNames=function(){return Object.freeze(n.toArray(this._indicatorNames))},a._handleIndicatorsConfig=function(e){this._indicatorNames=n.unique(this._indicatorNames.concat(Object.keys(e))),i.applyTo(this._indicatorsConfig,e,!0)},a._handleStylesConfig=function(e){var t,r;if(!n.contains(this._indicatorNames,"PRICES")){r={input:{type:o},renderers:{},outputPointType:"prices",study:"prices"};for(t in e.renderers)r.renderers[t]=i.applyTo({pointType:"prices"},e.renderers[t]);e.resolutionChooser&&(r.resolutionChooser=e.resolutionChooser),e.rendererChooser&&(r.rendererChooser=e.rendererChooser),this._indicatorNames.unshift("PRICES"),this._pricesConfig=i.recursiveFreeze(r)}},Object.seal(a),Object.seal(t)})),define("module/core/js/model/blockformatter",["require","module/core/js/util/array","module/core/js/model/block","module/core/js/model/resolutionsenum","module/core/js/model/tickblock"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/array"),i=e("module/core/js/model/block"),o=e("module/core/js/model/resolutionsenum"),r=e("module/core/js/model/tickblock");t.create=function(){return new t};var s=t.prototype;return s.formatToBlocks=function(e,t,n){var i;return n===o.values.TICK?this._formatTickBlocks(t,n.period):(i=this._splitIntervalsIntoBlocks(n,t),this._initialiseUsingTimeline(e,i))},s._formatTickBlocks=function(e,t){var n,i,o,s,a,l,u=[],c=0,d=0,h=0;for(o=0;o<e.length;o++)for(i=e[o],n=Math.ceil(i.numberOfPoints/r.TICKS_PER_BLOCK),s=0;s<n;s++)a=r.create(i),a.index=c,a.accStart=t*h,l=r.TICKS_PER_BLOCK*(s+1)-i.numberOfPoints,d=l>0?r.TICKS_PER_BLOCK-l:r.TICKS_PER_BLOCK,h+=d,a.withNumberOfPoints(d),u.push(a),c++;for(o=0;o<u.length;o++)u[o].initialiseUsingTimeline(u[o-1],u[o+1]);return u},s._splitIntervalsIntoBlocks=function(e,t){var i=e.intervalSplitter,o=i.split.bind(i);return n.flatten(t.map(o))},s._initialiseUsingTimeline=function(e,t){var n,i=this._fillGaps(t,e);for(n=0;n<i.length;n++)i[n].initialiseUsingTimeline(i[n-1],i[n+1],e);return i},s._fillGaps=function(e,t){var n,o,r,s,a,l,u,c=[];for(u=0;u<e.length;u++)n=e[u].start,o=e[u].end,s=t.asAccTime(n),a=t.asAccTime(o),l&&s!=l&&c.push(i.create(r,n)),c.push(e[u]),l=a,r=o;return c},Object.seal(s),t})),define("module/core/js/model/instrumentinfo",["require","module/core/js/util/math"],(function(e){"use strict";function t(e){this.epic=e.epic,this.status=e.status,this.delay=parseInt(e.delay,10),this.isDelayed=this.delay>0,this.remappedEpic=e.remappedEpic,this.decimalPlaces=parseInt(e.decimalPlaces,10),this.scaled=e.scaled,this.scalingFactor=parseFloat(e.scalingFactor),this.name=e.name,this.prompt=e.prompt,this.volumePresent=e.volumePresent,this.version=n.toInteger(e.version),this.instrumentType=e.instrumentType}var n=e("module/core/js/util/math"),i=t.prototype;return i.status=null,i.delay=null,i.isDelayed=!1,i.epic=null,i.remappedEpic=null,i.decimalPlaces=null,i.scaled=!1,i.scalingFactor=null,i.name=null,i.prompt=null,i.volumePresent=!1,i.version=null,i.instrumentType=null,Object.seal(i),Object.seal(t)})),define("module/core/js/model/instrumentresolutioninfo",["require","module/core/js/util/functional","module/core/js/util/timeconstants"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/timeconstants");t.createFromResolutionInfo=function(e){return(new t).withChartServiceTimezone(e.chartServiceTimezone).withUserTimeZone(e.requestedTimeZone).withConsolidationTimezoneOffset(e.consolidationTimezoneOffset*i.Periods.HOUR)};var o=t.prototype;return o._userTimeZone=null,o._consolidationTimezoneOffset=null,o._chartServiceTimezone=null,o.getUserTimeZone=n.getter("_userTimeZone"),o.getConsolidationTimezoneOffset=n.getter("_consolidationTimezoneOffset"),o.getChartServiceTimezone=n.getter("_chartServiceTimezone"),o.withUserTimeZone=n.setter("_userTimeZone"),o.withChartServiceTimezone=n.setter("_chartServiceTimezone"),o.withConsolidationTimezoneOffset=n.setter("_consolidationTimezoneOffset"),Object.seal(o),Object.seal(t)})),define("module/core/js/serviceclient/tickdatagapmanager",["require","module/core/js/util/class","module/core/js/serviceclient/datagapmanager","module/core/js/util/functional"],(function(e){"use strict";function t(e,n){t.superclass.constructor.call(this,e,n)}var n=e("module/core/js/util/class"),i=e("module/core/js/serviceclient/datagapmanager"),o=e("module/core/js/util/functional");n.extend(t,i),t.create=function(e,n){return new t(e,n)};var r=t.prototype;return r._listenForSubsequentDataGaps=o.empty,Object.seal(r),Object.seal(t)})),define("module/core/js/model/tickinstrumentresolution",["require","module/core/js/util/array","module/core/js/model/block","module/core/js/model/blockprocessor","module/core/js/model/blocks","module/core/js/util/class","module/core/js/event/events","module/core/js/util/functional","module/core/js/model/instrumentresolution","module/core/js/util/log","module/core/js/model/resolutionsenum","module/core/js/model/tickblock","module/core/js/model/tickinterval","module/core/js/serviceclient/tickdatagapmanager"],(function(e){"use strict";function t(e,n,i){if(n!==d.values.TICK)throw new Error("Creating tick instrument resolution for non-tick resolution");t.superclass.constructor.call(this,e,n,i)}var n=e("module/core/js/util/array"),i=e("module/core/js/model/block"),o=e("module/core/js/model/blockprocessor"),r=e("module/core/js/model/blocks"),s=e("module/core/js/util/class"),a=e("module/core/js/event/events"),l=e("module/core/js/util/functional"),u=e("module/core/js/model/instrumentresolution"),c=e("module/core/js/util/log"),d=e("module/core/js/model/resolutionsenum"),h=e("module/core/js/model/tickblock"),p=e("module/core/js/model/tickinterval"),m=e("module/core/js/serviceclient/tickdatagapmanager");s.extend(t,u),t.create=function(e,n,i){return new t(e,n,i)};var f=t.prototype;return f._gapManagerClass=m,f.expandForwardToContainDate=function(e,t){var o,s,a;return!!(this._timeline&&(o=this._timeline.endTickDate())&&(s=(t||[]).filter((function(e){return e.date>o})),s.length))&&(this._timeline.expandToIncludePoints(e,s),a=r.expandTickBlockToContainNumberOfPoints(n.lastOf(this.blocks),s.length),a.forEach(l.setAttr("loading",i.STREAMING)),n.inPlaceConcat(this.blocks,a),!0)},f.findBlockContainingDate=function(e){var t=this._timeline.asAccTime(e);return r.findBlockContainingAccTime(this.blocks,t)},f._insertPointsIntoBlocks=function(e,t,i){return n.nonEmpty(t)&&(this._assignFirstAccTime(n.firstOf(t),e),this._setAccTimeForPoints(t)),r.updateContiguousBlocksWithDataPoints(e,t,i)},f._assignFirstAccTime=function(e,t){var i=this._timeline.asAccTime(e.date,!0);i=Math.max(i,n.firstOf(t).accStart),e.accTime=i},f._setAccTimeForPoints=function(e){var t,n=e[0].accTime;for(t=1;t<e.length;t++)e[t].accTime=n+t*p.ACCTIME_INCREMENT},f._contractAfterRemovingIndicator=l.empty,f._trimPartialBlocks=function(e){var t,i=e.intervalsDataPoints,o=n.lastOf(this.blocks),r=n.flatten(i.map(l.plucker("dataPoints"))),s=[];return o.iterateBackward((function(e){if(r.length<e.numberOfPoints)return!1;s=n.lastNItems(r,e.numberOfPoints).concat(s),r=n.firstNItems(r,r.length-e.numberOfPoints),t=e})),{startBlock:t,endBlock:o,points:s}},f._getCapacityBetweenBlocks=function(e,t){var n=0;return e.iterateForward((function(e){if(n+=e.numberOfPoints,e===t)return!1})),n},f._handleDataPointsLoaded=function(e,i,r){var s,l,u,d=e.length-this._getCapacityBetweenBlocks(i,r);d>0&&r.next&&c.error("endBlock should be the last block",r),d>0&&(l=n.lastNItems(e,d),e=e.slice(0,e.length-d)),o.setTickDatesForAccTime(e,i,r),this._getUnloadedChunks(e,i,r).forEach((function(e){t.superclass._handleDataPointsLoaded.call(this,e.points,e.startBlock,e.endBlock)}),this),l&&!r.next&&(u=new h,u.index=0,u.rawPriceData=l,(s=this._processBlocks([u]))&&this.fire(a.POINTS_LOADED,s.getProcessedPoints()))},f._getUnloadedChunks=function(e,t,n){var i=0,o=[],r=null;return t.iterateForward((function(t){if(t.loading.loaded?r=null:(r||(r={startBlock:t,endBlock:null,points:[]},o.push(r)),r.endBlock=t,r.points=r.points.concat(e.slice(i,i+t.numberOfPoints))),i+=t.numberOfPoints,t===n)return!1})),o},Object.seal(f),Object.seal(t)})),define("module/core/js/model/instrumentmodel",["require","moment","module/core/js/model/blockformatter","module/core/js/util/class","module/core/js/util/error","module/core/js/util/functional","module/core/js/model/instrumentinfo","module/core/js/model/instrumentmodelevents","module/core/js/model/instrumentresolution","module/core/js/model/instrumentresolutionevents","module/core/js/model/instrumentresolutioninfo","module/core/js/util/math","module/core/js/util/object","module/core/js/model/pricecalculator/pricecalculatorprovider","module/core/js/enum/pricetypeenum","module/core/js/util/price","module/core/js/model/resolutionsenum","module/core/js/tracker/enum/schema","module/core/js/event/subscribable","module/core/js/model/tickinstrumentresolution","module/core/js/model/timeline"],(function(e){"use strict";function t(e,t){this._eventBus=e,this.epic=t,this._instrumentResolutions=Object.create(null),this._blockFormatter=i.create()}var n=e("moment"),i=e("module/core/js/model/blockformatter"),o=e("module/core/js/util/class"),r=e("module/core/js/util/error"),s=e("module/core/js/util/functional"),a=e("module/core/js/model/instrumentinfo"),l=e("module/core/js/model/instrumentmodelevents"),u=e("module/core/js/model/instrumentresolution"),c=e("module/core/js/model/instrumentresolutionevents"),d=e("module/core/js/model/instrumentresolutioninfo"),h=e("module/core/js/util/math"),p=e("module/core/js/util/object"),m=e("module/core/js/model/pricecalculator/pricecalculatorprovider"),f=e("module/core/js/enum/pricetypeenum"),_=e("module/core/js/util/price"),g=e("module/core/js/model/resolutionsenum"),v=e("module/core/js/tracker/enum/schema"),y=e("module/core/js/event/subscribable"),M=e("module/core/js/model/tickinstrumentresolution"),b=e("module/core/js/model/timeline");o.extend(t,y),t.create=function(e,n){return new t(e,n)};var A=t.prototype;return A.chartModel=null,A.delayTime=null,A.epic=null,A.info=null,A._isLtpAvailable=!1,A.instrumentVersion=null,A._timeline=null,A._activeResolutionId=null,A._priceCalculator=null,A._eventBus=null,A._instrumentResolutions=null,A._blockFormatter=null,A.withDelayTime=s.setter("delayTime"),A.withInstrumentVersion=function(e){var t;this.instrumentVersion=e;for(t in this._instrumentResolutions)this._instrumentResolutions[t].withInstrumentVersion(e);return this},A.getPriceCalculator=s.getter("_priceCalculator"),A.getPriceType=function(){return this._getPriceTypeToDisplay(this.chartModel.getPriceType())},A.isLtpAvailable=s.getter("_isLtpAvailable"),A.getTimeline=s.getter("_timeline"),A.setTimeline=s.setter("_timeline"),A.setChartModel=s.setter("chartModel"),A.destroy=function(){this.un(null),delete this.info,this._eventBus.publish("chart/instrument/destroy"),this._eventBus.flush("chart/instrument/info"),s.invokeApply(p.values(this._instrumentResolutions),"un",[null,this]),s.invokeCall(p.values(this._instrumentResolutions),"destroy"),this._instrumentResolutions=Object.create(null)},A.getInstrumentResolution=function(e){return this._instrumentResolutions[e.id]},A.getActiveInstrumentResolution=function(){return this._activeResolutionId?this._instrumentResolutions[this._activeResolutionId]:null},A.getActiveResolution=function(){return this._activeResolutionId?this._instrumentResolutions[this._activeResolutionId].resolution:null},A.getActiveInstrumentResolutionGuid=function(){return this._activeResolutionId?this._instrumentResolutions[this._activeResolutionId].instrumentResolutionGuid:null},A.getDataPointsAtAccTime=function(e){var t=this.getActiveInstrumentResolution(),n=t.resolution.period,i=t.getTimeline(),o=i.asDate(e),r=this.getAllInstrumentResolutions().map((function(e){var i,r,s,a=e.getTimeline();return a?(s=a.asAccTime(o),a.isAccTimeValid(s)?(i=a.getAccRangeForAccTime(s,e.resolution.getPeriodIterator(),n),r=e.getLastPointsInAccRange(i),r&&e!==t&&delete r.prices,r):[]):[]}),this).filter(s.not(p.isEmpty));return p.merge.apply(p,r)},A.getAllInstrumentResolutions=function(){return p.values(this._instrumentResolutions)},A.getNonActiveInstrumentResolutions=function(){var e,t=[];for(e in this._instrumentResolutions)e!=this._activeResolutionId&&t.push(this._instrumentResolutions[e]);return t},A.addInstrumentResolution=function(e,t){return this._instrumentResolutions[e.id]||(this._instrumentResolutions[e.id]=(e===g.values.TICK?M:u).create(this,e,this._eventBus),this._instrumentResolutions[e.id].on(c.BLOCKS_POINTS_ADDED,this._fireBlocksPointsAdded,this)),t&&this._setActiveResolution(e),this._instrumentResolutions[e.id]},A._setActiveResolution=function(e){var t=this._instrumentResolutions[e.id];t.on(c.END_DATE_CHANGED,this._fireEndDateChanged,this),t.on(c.NEW_CURRENT_DATA_POINT,this._fireNewCurrentDataPoint,this),this._eventBus.publish("statistics",["INSTRUMENT_RESOLUTION_ACTIVATED",{instrumentResolutionGuid:t.instrumentResolutionGuid,epic:this.epic,resolution:g.statisticsKeyFor(e)}]),this._activeResolutionId=e.id},A._fireEndDateChanged=s.bubbler(l.END_DATE_CHANGED),A._fireBlocksPointsAdded=s.bubbler(l.BLOCKS_POINTS_ADDED),A._fireNewCurrentDataPoint=s.bubbler(l.NEW_CURRENT_DATA_POINT),A.removeInstrumentResolution=function(e){this._instrumentResolutions[e.id]&&(this._instrumentResolutions[e.id].un(null,this),this._instrumentResolutions[e.id].destroy(),delete this._instrumentResolutions[e.id],this.fire(l.RESOLUTION_REMOVED,this.epic,e)),this._activeResolutionId===e.id&&(this._activeResolutionId=null)},A.handleInstrumentData=function(e,t,n){this.info||this._createInstrumentInfo(t.instrumentInfoDto),this._instrumentResolutions[e.id]&&this._handleIntervalData(e,t.intervalsDto,t.intervalsDataPointsDto,n)},A._createInstrumentInfo=function(e){this.info=new a(e),!h.isNumber(this.instrumentVersion)&&h.isNumber(this.info.version)&&this.withInstrumentVersion(this.info.version),!h.isNumber(this.delayTime)&&h.isNumber(this.info.delay)&&this.withDelayTime(this.info.delay),this._eventBus.publish("chart/instrument/info",[this.info],{retrospective:!0}),this.fire(l.INFO_LOADED,this.info)},A._handleIntervalData=function(e,t,n,i){var o=d.createFromResolutionInfo(t);e.userTimeZone=o.getUserTimeZone(),this._logMissingTimezone(e.userTimeZone),this.chartModel.priceStreamClock.promptTimestamp(t.currentCandleTimestamp,e.period),e.id===this._activeResolutionId?this._initActiveInstrumentResolution(i,e,o,n):this._initOtherInstrumentResolution(i,e,o,n)},A._logMissingTimezone=function(e){if(!n.tz.zone(e)){var t='HTML Charts are missing data for timezone "'+e+'"';if(r.isInDebug())throw new Error(t);this._eventBus.publish("tracker/chart",[{schema:v.ERROR,id:"charts-missing-timezone-data",message:t}])}},A._initOtherInstrumentResolution=function(e,t,n,i){var o=b.create();o.setIntervals(e),this._timeline.hasIntervals()?this._initInstrumentResolution(o,e,t,n,i):this.on(l.ACTIVE_RESOLUTION_LOADED,this._initInstrumentResolution.bind(this,o,e,t,n,i),this,{once:!0})},A._initActiveInstrumentResolution=function(e,t,n,i){this._priceCalculator=this._createPriceCalculator(i),this._initInstrumentResolution(this._timeline,e,t,n,i),this.fire(l.ACTIVE_RESOLUTION_LOADED),this.chartModel.trackPrices()},A._initInstrumentResolution=function(e,t,n,i,o){var r=this._instrumentResolutions[n.id],s=this._blockFormatter.formatToBlocks(e,t,n);r.withPriceCalculator(this._priceCalculator),r.setTimeline(e,t,s,i),this.fire(l.INTERVALS_LOADED,t),r.handleInitialDataPointsLoaded(o),this._instrumentResolutions[n.id].startStreaming(this.info)},A.updatePriceType=function(){this._priceCalculator=this._createPriceCalculator(),s.objectInvoke(this._instrumentResolutions,"withPriceCalculator",this._priceCalculator)},A._createPriceCalculator=function(e){var t,n,i,o,r=this._activeResolutionId===g.values.TICK.id?"tickPrice":"closePrice";return e&&(n=_.percentageLtpAvailable(e,r)>.95,i=this.info.instrumentType.toLowerCase(),o=!this.info.volumePresent||"commodities"!==i&&"currencies"!==i,this._isLtpAvailable=n&&o),t=this.getPriceType(),this._eventBus.publish("chart/pricetype/changed",[t,this._isLtpAvailable]),m.get(t)},A._getPriceTypeToDisplay=function(e){return e!==f.LTP?e:e===f.LTP&&this._isLtpAvailable?f.LTP:f.MID},Object.seal(A),Object.seal(t)})),define("module/core/js/util/latency",[],(function(){"use strict";var e={},t=Date.now();return e._start={},e._stop={},e.GLOBAL="__global__",e.STAGE={PAGE:"PAGE",API:"API",VIEW:"VIEW",INSTRUMENT:"INSTRUMENT"},e.getNavigationStart=function(){return window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:t},e.startMeasurement=function(t,n,i){e._start[t]||(e._start[t]={}),e._start[t][n]=i||Date.now()},e.stopMeasurement=function(t,n){e._stop[t]||(e._stop[t]={}),e._stop[t][n]=Date.now()},e.getMeasurement=function(t,n){var i=e._start[e.GLOBAL]&&e._start[e.GLOBAL][n]?e._start[e.GLOBAL][n]:null,o=e._start[t]&&e._start[t][n]?e._start[t][n]:null,r=o||i,s=e._stop[e.GLOBAL]&&e._stop[e.GLOBAL][n]?e._stop[e.GLOBAL][n]:null,a=e._stop[t]&&e._stop[t][n]?e._stop[t][n]:null,l=a||s;return r&&l?l-r:null},e.resetMeasurement=function(t,n){e._start[t]&&delete e._start[t][n],e._stop[t]&&delete e._stop[t][n]},e.deleteMeasurement=function(t){delete e._start[t],delete e._stop[t]},Object.seal(e)})),define("module/core/js/config/modulesconfigreader",[],(function(){"use strict";function e(e){this._config=e}var t=e.prototype;return t._config=null,t.getNames=function(){return Object.keys(this._config)},t.getConfig=function(e){var t=this._config[e];if(!t)throw new Error('there is no module called "'+e+'"');return t},Object.seal(t),Object.seal(e)})),define("module/core/js/config/moduleloader",["require","module/core/js/util/array","module/core/js/util/functional","module/core/js/config/modulesconfigreader"],(function(e){"use strict";function t(e,t,n,i,o,r){this._eventBus=e,this._subViewsConfigAggregator=t,this._settingsManager=n,this._containerProvider=i,this._priceStreamClock=o,this._modules={},this._initialisedModules=[],this._taskManager=r}var n=e("module/core/js/util/array"),i=e("module/core/js/util/functional"),o=e("module/core/js/config/modulesconfigreader"),r=t.prototype;return t.create=function(e,n,i,o,r,s){return new t(e,n,i,o,r,s)},r._eventBus=null,r._modules=null,r._initialisedModules=null,r._settingsManager=null,r._subViewsConfigAggregator=null,r._containerProvider=null,r._taskManager=null,r.getInitialisedModules=i.getter("_initialisedModules"),r.loadModules=function(e){var t,n,i,r,s,a=new o(e),l=[];for(r in e)s=a.getConfig(r),t=s.type,n=s.options,i=new t(this._eventBus,n,this,this._subViewsConfigAggregator,this._settingsManager,this._containerProvider,this._priceStreamClock,this._taskManager),this._modules[r]=i,!0===s.onByDefault&&l.push(r);return l.forEach(this.init,this),this},r.init=function(e){n.contains(this._initialisedModules,e)||(this._initialisedModules.push(e),this._modules[e].init(),this._eventBus.publish("module/toggle/"+e,[!0]))},r.destroy=function(e){var t,n=e?[e]:this._initialisedModules.concat([]);for(t=0;t<n.length;t++)this._destroy(n[t])},r._destroy=function(e){n.contains(this._initialisedModules,e)&&(n.remove(this._initialisedModules,e),this._modules[e].destroy(),this._eventBus.publish("module/toggle/"+e,[!1]))},r.getModule=function(e){return this._modules[e]||null},Object.seal(r),Object.seal(t)})),define("module/core/js/model/pricestreamclock",["require","module/core/js/util/class","module/core/js/event/events","module/core/js/util/functional","module/core/js/util/math","module/core/js/event/subscribable","module/core/js/util/timeconstants"],(function(e){"use strict";function t(){}var n=e("module/core/js/util/class"),i=e("module/core/js/event/events"),o=e("module/core/js/util/functional"),r=e("module/core/js/util/math"),s=e("module/core/js/event/subscribable"),a=e("module/core/js/util/timeconstants");n.extend(t,s),t.create=function(){return new t};var l=t.prototype;return t.TIME_TICKED="timeTicked",l._streamingPointClient=null,l._lastResetTimestamp=null,l._clientTimestampAtLastReset=null,l._timeLoopTimeout=null,l._timeLoopInterval=null,l._hasBeenSet=!1,l.withStreamingPointClient=o.setter("_streamingPointClient"),l.startTicking=function(){this._streamingPointClient&&this._streamingPointClient.on(i.POINTS_LOADED,this._handleIncomingPrice,this),this._isTicking()&&this._stopTickingLoop(),this._startTickingLoopDeadOnTheSecond()},l.stopTicking=function(){this._streamingPointClient&&this._streamingPointClient.un(i.POINTS_LOADED,this),this._isTicking()&&this._stopTickingLoop()},l._startTickingLoopDeadOnTheSecond=function(){var e=0;this._hasBeenSet&&(e=a.Periods.SECOND-this.getCurrentTimestamp()%a.Periods.SECOND),this._timeLoopTimeout=window.setTimeout(this._startTickingLoop.bind(this),e)},l._startTickingLoop=function(){this._timeLoopInterval=window.setInterval(this._tickCurrentTime.bind(this),a.Periods.SECOND)},l._tickCurrentTime=function(){this.fire(t.TIME_TICKED,this.getCurrentTimestamp())},l._stopTickingLoop=function(){window.clearTimeout(this._timeLoopTimeout),window.clearInterval(this._timeLoopInterval),this._timeLoopTimeout=null,this._timeLoopInterval=null},l._isTicking=function(){return!!this._timeLoopInterval||!!this._timeLoopTimeout},l._handleIncomingPrice=function(e){var t,n;t=e.map((function(e){return e.date.getTime()})),t.length>0&&(n=Math.max.apply(Math,t),(!this._hasBeenSet||n>this.getCurrentTimestamp())&&this.setClockTime(n))},l.setClockTime=function(e){return this._lastResetTimestamp=e,this._clientTimestampAtLastReset=Date.now(),this._hasBeenSet=!0,this._isTicking()&&(this._stopTickingLoop(),this._startTickingLoopDeadOnTheSecond()),this},l.getCurrentTimestamp=function(){if(!this._hasBeenSet)return null;var e=Date.now()-this._clientTimestampAtLastReset;return this._lastResetTimestamp+e},l.promptTimestamp=function(e,t){if(!this._hasBeenSet){var n=Date.now(),i=r.floorToClosestMultiples(n,t),o=n-i,s=r.floorToClosestMultiples(e,t);this.setClockTime(s+o)}},Object.seal(l),t})),define("module/core/js/settings/settingsmanager",["require","module/core/js/settings/apisettingsmanager","module/core/js/util/array","module/core/js/util/class","module/core/js/util/functional","module/core/js/util/object","module/core/js/model/resolutionsenum","module/core/js/settings/settingsevents","module/core/js/event/subscribable","module/core/js/enum/themesenum"],(function(e){"use strict";function t(e,t,n){return e[t]!==n&&(e[t]=n,!0)}function n(e,t){this._eventBus=e,this._hideOverrides={},this._apiSettingsManager=t,
this._apiSettingsManager.on(r.REQUEST_ERROR,l.bubbler(r.REQUEST_ERROR),this),this._apiSettingsManager.on(d.LAYOUT_SETTINGS_CHANGED,this._bubbleTemplateEvents.bind(this,d.LAYOUT_SETTINGS_CHANGED),this),this._apiSettingsManager.on(d.LAYOUT_SETTINGS_IMPORTED,this._bubbleTemplateEvents.bind(this,d.LAYOUT_SETTINGS_IMPORTED),this),this._apiSettingsManager.on(d.EPIC_SETTINGS_CHANGED,this._bubbleEpicEvents.bind(this,d.EPIC_SETTINGS_CHANGED),this),this._apiSettingsManager.on(d.EPIC_SETTINGS_LOADED,this._bubbleEpicEvents.bind(this,d.EPIC_SETTINGS_LOADED),this),this._apiSettingsManager.on(d.GLOBAL_SETTINGS_CHANGED,this._handleGlobalSettingsChanged,this)}function i(e){return function(){return this._apiSettingsManager[e].apply(this._apiSettingsManager,[this._containerId].concat(s.toArray(arguments)))}}function o(e){return function(){return this._apiSettingsManager[e].apply(this._apiSettingsManager,[this._epic].concat(s.toArray(arguments)))}}var r=e("module/core/js/settings/apisettingsmanager"),s=e("module/core/js/util/array"),a=e("module/core/js/util/class"),l=e("module/core/js/util/functional"),u=e("module/core/js/util/object"),c=e("module/core/js/model/resolutionsenum"),d=e("module/core/js/settings/settingsevents"),h=e("module/core/js/event/subscribable"),p=e("module/core/js/enum/themesenum");a.extend(n,h),n.create=function(e,t){return new n(e,t)},n.ALL_HIDE_OVERRIDES=Object.freeze(["openPositions","workingOrders","indicators","annotations","overview","calendarEvents","highLowStats"]);var m=n.prototype;return m._apiSettingsManager=null,m._global=l.delegate("_apiSettingsManager","getGlobalSettings"),m._template=function(e){return this._apiSettingsManager.getTemplateSettings(this._containerId,e)},m._themeSettingsMode=p.THEME_SETTINGS_MODE.default,m._hideOverrides=null,m._containerId=null,m._epic=null,m.setContainerId=l.setter("_containerId"),m.loadSettings=function(e){this._epic=e,this._apiSettingsManager.loadSettings(this._containerId,e)},m.getResolutionSettings=function(){return c.keyFor(this._template("coreModule").resolution)},m.putResolutionSettings=function(e,n){this._apiSettingsManager.changeTemplateSettings(this._containerId,"coreModule",(function(n){return t(n,"resolution",c.valueOf(e))}),n)},m.getStyleSettings=function(){var e=this._template("coreModule").style;return"TICK"!==this.getResolutionSettings()||"CANDLE"!==e&&"HLOC"!==e||(e="LINE"),e},m.putStyleSettings=function(e,n){this._apiSettingsManager.changeTemplateSettings(this._containerId,"coreModule",(function(n){return t(n,"style",e)}),n)},m.getPriceTypeSettings=function(){return this._template("coreModule").priceType},m.putPriceTypeSettings=function(e,n){this._apiSettingsManager.changeTemplateSettings(this._containerId,"coreModule",(function(n){return t(n,"priceType",e)}),n)},m.getColourCustomisationSettings=function(){var e=this._template("colourCustomisationModule").styles;return this._themeSettingsMode===p.THEME_SETTINGS_MODE.dark?e.dark:e.default},m.putColourCustomisationSettings=function(e,t){this._apiSettingsManager.changeTemplateSettings(this._containerId,"colourCustomisationModule",(function(t){return e!==t.styles[e.themeSettingsMode]&&u.merge(t.styles[e.themeSettingsMode],e,!0),!0}),t)},m.putAnnotationSettings=function(e){this._apiSettingsManager.changeEpicSpecificSettings(this._containerId,this._epic,"userAnnotationModule",(function(t){return t.userAnnotations=e,!0}),!0)},m.getIndicatorSettings=function(){return this._template("indicatorModule").indicators},m.putIndicatorSettings=function(e,t,n){this.updateIndicatorsSettings([{id:e,settings:t}],n)},m.updateIndicatorsSettings=function(e,t){this._apiSettingsManager.changeTemplateSettings(this._containerId,"indicatorModule",(function(t){return t.addIndicators(JSON.parse(JSON.stringify(e))),!0}),t)},m.deleteIndicatorSettings=function(e,t){this._apiSettingsManager.changeTemplateSettings(this._containerId,"indicatorModule",(function(t){var n=t.indicators.length;return t.removeIndicator(e),t.indicators.length!==n}),t)},m.getTradeConfirmsRequired=function(){return this._global("tradingModule").getDeviceSpecificSettings().tradeConfirms},m.getThemeSettingsMode=l.getter("_themeSettingsMode"),m.updateTheme=function(e){var t=p.THEME_SETTINGS_MAP[e]||p.THEME_SETTINGS_MODE.default;this._themeSettingsMode!==t&&(this._themeSettingsMode=t,this._apiSettingsManager.notifyOfTemplateChange(this._containerId),this.fire(d.THEME_CHANGED))},m.getCandleWidth=function(){var e=this._apiSettingsManager.getTemplateSettings(this._containerId,"coreModule");return e?e.candleWidth:null},m.addHideOverride=function(e){var t=!!this._hideOverrides[e];this._hideOverrides[e]=!0,t||this._notifyOfHideOverrideChange(e)},m.removeHideOverride=function(e){var t=!!this._hideOverrides[e];delete this._hideOverrides[e],t&&this._notifyOfHideOverrideChange(e)},m.getAnnotationVisibilitySettings=function(){return!this._hideOverrides.annotations&&this._template("annotationModule").isVisible},m.putAnnotationVisibilitySettings=function(e,n){this._apiSettingsManager.changeTemplateSettings(this._containerId,"annotationModule",(function(n){return t(n,"isVisible",!!e)}),n),this._logStats("SET_ANNOTATIONS_VISIBILITY",e,!!n)},m.getAnnotationsToolboxVisibilitySettings=function(){return this._template("annotationModule").getToolboxVisibility()},m.getDealingOpenPositionsVisibility=function(){return!this._hideOverrides.openPositions&&this._global("tradingModule").openPositionsVisible},m.putDealingOpenPositionsVisibility=function(e,n){this._apiSettingsManager.changeGlobalSettings("tradingModule",(function(n){return t(n,"openPositionsVisible",!!e)}),n),this._logStats("SET_OPEN_POSITION_VISIBILITY",e,!!n)},m.getDealingWorkingOrdersVisibility=function(){return!this._hideOverrides.workingOrders&&this._global("tradingModule").workingOrdersVisible},m.putDealingWorkingOrdersVisibility=function(e,n){this._apiSettingsManager.changeGlobalSettings("tradingModule",(function(n){return t(n,"workingOrdersVisible",!!e)}),n),this._logStats("SET_WORKING_ORDER_VISIBILITY",e,!!n)},m.getIndicatorsVisibilitySettings=function(){return!this._hideOverrides.indicators&&this._template("indicatorsVisibilityModule").isVisible},m.putIndicatorsVisibilitySettings=function(e,n){this._apiSettingsManager.changeTemplateSettings(this._containerId,"indicatorsVisibilityModule",(function(n){return t(n,"isVisible",!!e)}),n),this._logStats("SET_INDICATORS_VISIBILITY",e,!!n)},m.getCurrentPriceLineVisibilitySettings=function(){return!this._hideOverrides.currentPriceLine&&this._template("currentPriceLineVisibilityModule").isVisible},m.putCurrentPriceLineVisibilitySettings=function(e,n){this._apiSettingsManager.changeTemplateSettings(this._containerId,"currentPriceLineVisibilityModule",(function(n){return t(n,"isVisible",!!e)}),n),this._logStats("SET_CURRENT_PRICE_LINE_VISIBILITY",e,!!n)},m.getHighLowStatsVisibilitySettings=function(){return!this._hideOverrides.highLowStats&&this._template("highLowStatsVisibilityModule").isVisible},m.putHighLowStatsVisibilitySettings=function(e,n){this._apiSettingsManager.changeTemplateSettings(this._containerId,"highLowStatsVisibilityModule",(function(n){return t(n,"isVisible",!!e)}),n),this._logStats("SET_HIGH_LOW_STATS_VISIBILITY",e,!!n)},m.getOverviewVisibilitySettings=function(){return!this._hideOverrides.overview&&this._template("overviewChartModule").isOverviewVisible},m.putOverviewVisibilitySettings=function(e,n){this._apiSettingsManager.changeTemplateSettings(this._containerId,"overviewChartModule",(function(n){return t(n,"isOverviewVisible",!!e)}),n),this._logStats("SET_OVERVIEW_VISIBILITY",e,!!n)},m.getPositionPreviewVisibilitySettings=function(){return this._global("positionPreviewModule").isVisible},m.putPositionPreviewVisibilitySettings=function(e,n){this._apiSettingsManager.changeGlobalSettings("positionPreviewModule",(function(n){return t(n,"isVisible",!!e)}),n),this._logStats("SET_POSITION_PREVIEW_VISIBILITY",e,!!n)},m.getEconomicEventsVisibilitySettings=function(){return!this._hideOverrides.calendarEvents},m.getTooltipSettings=function(){return this._template("coreModule").desktopTooltipEnabled},m.putTooltipSettings=function(e){this._apiSettingsManager.changeTemplateSettings(this._containerId,"coreModule",(function(n){return t(n,"desktopTooltipEnabled",e)}),!0),this._logStats("SET_TOOLTIP_VISIBILITY",e,!0)},m.destroy=function(){this._apiSettingsManager.un(null,this),this._apiSettingsManager.abortAll(this._containerId,this._epic)},m._handleGlobalSettingsChanged=function(e){this.fire(d.GLOBAL_SETTINGS_CHANGED),e&&this.fire(d.GLOBAL_SETTINGS_CHANGED+"-"+e)},m._notifyOfHideOverrideChange=function(e){switch(e){case"annotations":case"indicators":case"overview":case"highLowStats":this._apiSettingsManager.notifyOfTemplateChange(this._containerId);break;case"openPositions":case"workingOrders":this._apiSettingsManager.notifyOfGlobalChange("tradingModule");break;case"calendarEvents":this._apiSettingsManager.notifyOfGlobalChange("calendarEventsModule")}},m._logStats=function(e,t,n){this._eventBus.publish("statistics",[e,{enabled:t,persisted:n}])},m._bubbleTemplateEvents=function(e,t){this._containerId===t&&this.fire(e)},m._bubbleEpicEvents=function(e,t,n){this._epic===t&&this._containerId!==n&&this.fire(e)},m.exportLayout=i("exportLayout"),m.importTemplate=i("importTemplate"),m.hasSettings=i("hasSettings"),m.getTemplateSettings=i("getTemplateSettings"),m.changeTemplateSettings=i("changeTemplateSettings"),m.resetTemplateSettings=i("resetTemplateSettings"),m.hasEpicSettings=o("hasEpicSettings"),m.getEpicSpecificSettings=o("getEpicSpecificSettings"),m.deleteTemplate=l.delegate("_apiSettingsManager","deleteTemplate"),m.getTemplateList=l.delegate("_apiSettingsManager","getTemplateList"),m.getGlobalSettings=l.delegate("_apiSettingsManager","getGlobalSettings"),m.changeGlobalSettings=l.delegate("_apiSettingsManager","changeGlobalSettings"),Object.seal(m),Object.seal(n)})),define("module/core/js/config/subviewsconfigaggregator",["require","module/core/js/util/functional","module/core/js/util/object"],(function(e){"use strict";function t(e){this._eventBus=e,this._configs=Object.create(null),e.subscribe("subViews/config",this._handleNewConfig,this),e.subscribe("subViews/removeConfig",this._handleRemoveConfig,this)}var n=e("module/core/js/util/functional"),i=e("module/core/js/util/object");t.create=function(e){return new t(e)},t.getCoreProperties=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&"renderers"!==t&&"presentationControllers"!==t&&(n[t]=e[t]);return n};var o=t.prototype;return o._eventBus=null,o._configs=null,o.getNames=function(){var e,t,n,i=Object.create(null);for(t in this._configs){e=this._configs[t];for(n in e)i[n]=!0}return Object.keys(i)},o.getPersistentNames=function(){var e,t,n,i=Object.create(null);for(t in this._configs){e=this._configs[t];for(n in e)e[n].isPersistent&&(i[n]=!0)}return Object.keys(i)},o.getConfig=function(e){var o,r,s,a=this._configsForSubView(e),l=a.map(t.getCoreProperties).filter(i.count);if(0===l.length)throw new Error('Subview "'+e+'" has not been defined in config.');if(l.length>1)throw new Error('Core properties for "'+e+'" have been defined more than once');return o=a.map(n.plucker("renderers")).reduce(i.deepCopyLiteral,{}),r=a.map(n.plucker("presentationControllers")).reduce(i.deepCopyLiteral,{}),s=i.deepCopyLiteral({},l[0]),s.renderers=o,s.presentationControllers=r,s},o.getRendererConfigs=function(e){return this.getConfig(e).renderers},o.destroy=function(){this._eventBus.unsubscribeAll(this),this._eventBus=null,this._configs=null},o._configsForSubView=function(e){return i.values(this._configs).map(n.plucker(e)).filter(n.identity)},o._handleNewConfig=function(e,t){if(this._configs[e])throw Error("module subview config "+e+" already set");this._configs[e]=t},o._handleRemoveConfig=function(e){if(!this._configs[e])throw Error("attempted to delete subview config for "+e+" which did not exist");delete this._configs[e]},Object.seal(o),Object.seal(t)})),define("module/core/js/task/task",["require","module/core/js/util/functional"],(function(e){"use strict";function t(e){this._taskId=e.ID,this._persistent=!!e.persistent,this._fullyConcurrent=!!e.fullyConcurrent,this._blockUnhandledHotkeys=!!e.blockUnhandledHotkeys,this._concurrentTasks=e.concurrentTasks||[],this._nonConcurrentTasks=e.nonConcurrentTasks||[],this._onActivated=e.onActivated||n.empty,this._onDeactivated=e.onDeactivated||n.empty,this._onDestroyed=e.onDestroyed||n.empty,this._hotkeyMap=e.hotkeyMap||{}}var n=e("module/core/js/util/functional");t.create=function(e){return new t(e)};var i=t.prototype;return i._taskId=null,i._persistent=!1,i._isActive=!1,i._concurrentTasks=null,i._nonConcurrentTasks=null,i._onActivated=n.empty,i._onDeactivated=n.empty,i._onDestroyed=n.empty,i._hotkeyMap=null,i._blockUnhandledHotkeys=null,i._fullyConcurrent=null,i.activate=function(){return this._isActive||(this._isActive=!0,this._onActivated()),this},i.cleanup=function(){this._persistent=null,this._taskId=null,this._onActivated=null,this._onDeactivated=null,this._onDestroyed=null},i.deactivate=function(){return this._isActive&&(this._isActive=!1,this._onDeactivated()),this},i.destroy=function(){this.deactivate(),this._onDestroyed(),this.cleanup()},i.isTaskConcurrent=function(e){return this._fullyConcurrent&&-1===this._nonConcurrentTasks.indexOf(e)||this._concurrentTasks.indexOf(e)>=0},i.handleHotkey=function(e){return!!this._hotkeyMap[e.keyCode]&&(this._hotkeyMap[e.keyCode](),!0)},i.addHotkey=function(e,t){this._hotkeyMap[e]=t},i.blockUnhandledHotkeys=n.getter("_blockUnhandledHotkeys"),i.isPersistent=n.getter("_persistent"),i.getTaskId=n.getter("_taskId"),i.isActive=n.getter("_isActive"),Object.seal(i),Object.seal(t)})),define("module/core/js/task/taskmanager",["require","lodash","module/core/js/util/array","module/core/js/enum/hotkeyenum","module/core/js/util/log","module/core/js/task/task","module/core/js/config/taskconfig"],(function(e){"use strict";function t(e,t){this._taskStack=[],this._eventBus=t,this._handleKeyUp=this._handleKeyUp.bind(this),this._eventBus.subscribe("chart/view/ready",this._handleChartViewReady,this),this._dContainer=e,this.startTask(a.GLOBAL)}var n=e("lodash"),i=e("module/core/js/util/array"),o=e("module/core/js/enum/hotkeyenum"),r=e("module/core/js/util/log"),s=e("module/core/js/task/task"),a=e("module/core/js/config/taskconfig");t.create=function(e,n){return new t(e,n)};var l=t.prototype;return l._taskStack=null,l._eventBus=null,l.startTask=function(e,t){var i,o=s.create(n.assign({},e,t||{}));this._taskStack.forEach((function(e){i=e.isTaskConcurrent(o.getTaskId())||o.isTaskConcurrent(e.getTaskId()),e.isActive()&&!i&&(e.isPersistent()?e.deactivate():this._removeAndDestroyTask(e))}),this),this._taskStack.push(o),o.activate()},l.finishTask=function(e){!this._findTask(e)&&window.IG._featureFlagEnabled&&r.error("Attempt to finish non-existing task"),this._removeAndDestroyTaskIfExists(e),this._reactivatePersistentTasks()},l._reactivatePersistentTasks=function(){var e,t,n;for(n=this._taskStack.length-1;n>=0;n--)t=this._taskStack[n],e&&!e.isTaskConcurrent(t.getTaskId())||(t.activate(),e=t)},l.finishNonPersistentTasks=function(){for(var e=this._taskStack.length-1;e>=0;e--)this._taskStack[e].isPersistent()||this._removeAndDestroyTaskIfExists(this._taskStack[e].getTaskId());i.nonEmpty(this._taskStack)&&i.lastOf(this._taskStack).activate()},l.isActive=function(e){var t=this._findTask(e);return!!t&&t.isActive()},l.taskExists=function(e){return!!this._findTask(e)},l.destroy=function(){for(var e;e=this._taskStack.pop();)e.cleanup();this._dContainer.node().removeEventListener("keyup",this._handleKeyUp),this._dContainer.node().removeEventListener("keydown",this._handleKeyDown)},l.registerGlobalHotKey=function(e,t){this._findTask(a.GLOBAL.ID).addHotkey(e,t)},l._handleChartViewReady=function(){this._dContainer.node().addEventListener("keyup",this._handleKeyUp),this._dContainer.node().addEventListener("keydown",this._handleKeyDown)},l._handleKeyUp=function(e){var t,n;for(n=this._taskStack.length-1;n>=0;n--){if(t=this._taskStack[n],t.isActive()&&t.handleHotkey(e)){e.preventDefault(),e.stopPropagation();break}if(t.blockUnhandledHotkeys())break}},l._handleKeyDown=function(e){e.keyCode===o.BACKSPACE&&"input"!==e.target.tagName.toLowerCase()&&"textarea"!==e.target.tagName.toLowerCase()&&e.preventDefault()},l._removeAndDestroyTaskIfExists=function(e){var t=this._findTask(e);t&&this._removeAndDestroyTask(t)},l._removeAndDestroyTask=function(e){i.remove(this._taskStack,e),e.destroy()},l._findTask=function(e){return n.findLast(this._taskStack,(function(t){return t.getTaskId()===e}))},Object.seal(l),Object.seal(t)})),define("module/core/js/controller/chartcontrollercore",["require","lodash","module/core/js/util/animation/animationpoller","module/core/js/settings/apisettingsmanager","module/core/js/util/array","module/core/js/model/chartmodel","module/core/js/model/chartmodelevents","module/core/js/tracker/charttracker","module/core/js/view/chartview","module/core/js/view/factory/chartviewfactory","module/core/js/util/class","module/core/js/view/containerprovider","module/core/js/event/eventbus","module/core/js/event/events","module/core/js/util/functional","module/core/js/config/indicatorsconfigaggregator","module/core/js/model/instrumentmodel","module/core/js/util/latency","module/core/js/config/moduleloader","module/core/js/util/object","module/core/js/model/pricestreamclock","module/core/js/tracker/enum/schema","module/core/js/settings/settingsevents","module/core/js/settings/settingsmanager","module/core/js/config/subviewsconfigaggregator","module/core/js/event/subscribable","module/core/js/task/taskmanager","module/core/js/util/uid","module/core/js/util/validator"],(function(e){"use strict";function t(e,t){this._chartGuid=S.getGuid(),this._chartConfig=e,this._containerProvider=h.create(this._chartGuid),this._eventBus=p.create(),this._tracker=new l(this._eventBus),this._indicatorsConfigAggregator=_.create(this._eventBus),this._subViewsConfigAggregator=w.create(this._eventBus),this._settingsManager=this.createSettingsManager(t),this._taskManager=I.create(this._containerProvider.getRootContainer(),this._eventBus),this._priceStreamClock=b.create(),this._loadChartCapabilities(),this._moduleLoader=y.create(this._eventBus,this._subViewsConfigAggregator,this._settingsManager,this._containerProvider,this._priceStreamClock,this._taskManager).loadModules(this._chartConfig.modules),this._eventBus.publish("statistics/commonInfo",[{chartFlavour:e.flavour,chartGuid:this._chartGuid}]),this._eventBus.publish("tracker/chartAttributes",[{chartFlavour:e.flavour,chartId:this._chartGuid}]),this._animationPoller=i.create(),this._chartModel=this._createChartModel(),this._chartFlavour=e.flavour,this._chartViews={},this._startPerformanceTracking(),this._startChartLoadingIndicator(),this._handleApiEvents(),this._eventBus.publish("statistics",["CHART_CREATED",{}]),this._settingsManager.on(o.REQUEST_ERROR,this._forwardToEventBus.bind(this,m.REQUEST_ERROR),this)}var n=e("lodash"),i=e("module/core/js/util/animation/animationpoller"),o=e("module/core/js/settings/apisettingsmanager"),r=e("module/core/js/util/array"),s=e("module/core/js/model/chartmodel"),a=e("module/core/js/model/chartmodelevents"),l=e("module/core/js/tracker/charttracker"),u=e("module/core/js/view/chartview"),c=e("module/core/js/view/factory/chartviewfactory"),d=e("module/core/js/util/class"),h=e("module/core/js/view/containerprovider"),p=e("module/core/js/event/eventbus"),m=e("module/core/js/event/events"),f=e("module/core/js/util/functional"),_=e("module/core/js/config/indicatorsconfigaggregator"),g=e("module/core/js/model/instrumentmodel"),v=e("module/core/js/util/latency"),y=e("module/core/js/config/moduleloader"),M=e("module/core/js/util/object"),b=e("module/core/js/model/pricestreamclock"),A=e("module/core/js/tracker/enum/schema"),T=e("module/core/js/settings/settingsevents"),E=e("module/core/js/settings/settingsmanager"),w=e("module/core/js/config/subviewsconfigaggregator"),O=e("module/core/js/event/subscribable"),I=e("module/core/js/task/taskmanager"),S=e("module/core/js/util/uid"),j=e("module/core/js/util/validator");d.extend(t,O),t.create=function(e,n){return new t(e,n)},t.CHART_LOADED="chartLoaded",t.INSTRUMENT_CHANGED="instrumentChanged";var C=t.prototype;return C._chartGuid=null,C._chartConfig=null,C._containerProvider=null,C._tracker=null,C._animationPoller=null,C._chartModel=null,C._indicatorsConfigAggregator=null,C._subViewsConfigAggregator=null,C._chartViews=null,C._eventBus=null,C._moduleLoader=null,C._taskManager=null,C._capabilities=null,C._theme=null,C._settingsManager=null,C._priceStreamClock=null,C.finishNonPersistentTasks=f.delegate("_taskManager","finishNonPersistentTasks"),C.getCapabilities=f.getter("_capabilities"),C.setContainerId=f.delegate("_settingsManager","setContainerId"),C.createSettingsManager=function(e){return E.create(this._eventBus,e)},C._handleApiEvents=function(){this._eventBus.subscribe("api/in/chart/loadDefaults",this._handleLoadDefaults,this,{once:!0}),this._eventBus.subscribe("api/in/chart/toggleFeature/*",this._toggleFeature,this)},C._createChartModel=function(){var e,t=n.get(this._chartConfig,"model.restrictDuration");return e=s.create(this._eventBus,this._indicatorsConfigAggregator,this._settingsManager).withAllowScrollingIntoFuture(!!n.get(this._chartConfig,"model.allowScrollingIntoFuture")).withPriceStreamClock(this._priceStreamClock).withAnimationPoller(this._animationPoller),void 0!==t&&e.withRestrictDuration(t),e},C._startPerformanceTracking=function(){return this._chartModel.on(a.INSTRUMENT_CHANGED,this._handleInstrumentChanged,this),this._chartModel.on(a.CHART_LOADED,this._handleFirstChartLoaded,this,{once:!0}),this._chartModel.on(a.CHART_LOADED,this._handleChartLoaded,this),this},C._handleFirstChartLoaded=function(e){var t;"object"==typeof IG&&IG._pageHeadStartTimestamp&&(t=Date.now()-IG._pageHeadStartTimestamp,this._eventBus.publish("statistics",["CHART_OPENED_TIME",{instrumentResolutionGuid:e.instrumentResolutionGuid,chartOpenedTime:t,pageHeadStartTimestamp:IG._pageHeadStartTimestamp,pageHeadEndTimestamp:IG._pageHeadEndTimestamp,pageBodyStartTimestamp:IG._pageBodyStartTimestamp,pageBodyEndTimestamp:IG._pageBodyEndTimestamp,pageRequireStartTimestamp:IG._pageRequireStartTimestamp,pageRequireEndTimestamp:IG._pageRequireEndTimestamp}]))},C._handleInstrumentChanged=function(e){this.fire(t.INSTRUMENT_CHANGED,e)},C._handleChartLoaded=function(){M.values(v.STAGE).forEach(this._trackLatency,this),this._eventBus.publish("api/out/chart/loaded"),this.fire(t.CHART_LOADED)},C._trackLatency=function(e){var t;v.stopMeasurement(this._chartGuid,e),null!==(t=v.getMeasurement(this._chartGuid,e))&&(v.resetMeasurement(this._chartGuid,e),v.resetMeasurement(v.GLOBAL,e),this._eventBus.publish("tracker/chart",[{schema:A.LOAD_LATENCY,stage:e,latency:t}]))},C._loadChartCapabilities=function(){var e=["capabilities/styles","capabilities/resolutions","capabilities/indicators"];return this._eventBus.subscribeMultiple(e,this._handleChartCapabilities,this,{once:!0}),this},C._handleChartCapabilities=function(e,t,n){this._capabilities={chartStyles:e[1],resolutions:t[1],indicators:n[1]}},C.publishToChart=function(e){var t=r.toArray(arguments,1);return this._eventBus.publish(e,t,{retrospective:!0}),this},C.setStyle=function(e,t){this._settingsManager.putStyleSettings(e,t)},C.hideFeature=function(e){this._settingsManager.addHideOverride(e)},C.showFeature=function(e){this._settingsManager.removeHideOverride(e)},C.subscribeToChart=function(e,t,n){return this._eventBus.subscribe(e,t,n),this},C.unsubscribeFromChart=function(e,t,n){return this._eventBus.unsubscribe(e,t,n),this},C._startChartLoadingIndicator=function(){return this._chartModel.on(a.INSTRUMENT_RESOLUTION_CHANGE,this._showLoadingIndicators,this),this._chartModel.on(a.INSTRUMENT_RESOLUTION_LOADED,this._hideLoadingIndicators,this),this},C._showLoadingIndicators=function(){for(var e in this._chartViews)this._chartViews[e].showLoadingIndicator()},C._hideLoadingIndicators=function(){for(var e in this._chartViews)this._chartViews[e].hideLoadingIndicator()},C.showChart=function(e,t){v.startMeasurement(this._chartGuid,v.STAGE.VIEW),this._containerProvider.appendToDOM(t);var n=new c(u,this._moduleLoader,this._animationPoller,this._chartConfig.view,this._chartModel,this._indicatorsConfigAggregator,this._subViewsConfigAggregator);return this._chartViews[e]=n.create(e,this._containerProvider,this._settingsManager,this._eventBus,this._taskManager),this._theme&&this._chartViews[e].withTheme(this._theme),this._chartFlavour&&this._chartViews[e].withFlavour(this._chartFlavour),this._eventBus.publish("statistics",["CHART_SHOWN",{chartName:e}]),this},C.hideChart=function(e){return this._chartViews[e]&&(this._eventBus.publish("statistics",["CHART_HIDDEN",{chartName:e}]),this._chartViews[e].destroy(),delete this._chartViews[e]),this},C.setPriceType=function(e){this._chartModel.setPriceType(e)},C.destroyChart=function(){var e;v.deleteMeasurement(this._chartGuid),this._animationPoller.destroy(),this._taskManager.destroy(),this._taskManager=null,this._moduleLoader.destroy(),this._moduleLoader=null,this._settingsManager.un(null,this),this._settingsManager.destroy(),this._settingsManager=null;for(e in this._chartViews)this.hideChart(e);return this._containerProvider.destroy(),this._containerProvider=null,this._chartModel.un(null,this),this._chartModel.destroy(),this._chartModel=null,this._tracker.destroy(),this._tracker=null,this._eventBus.destroy(),this._eventBus=null,this},C.loadDefaults=f.empty,C.compareMarkets=function(e,t){this.loadDefaults(),this._chartModel.compareMarkets(e.map(function(e){return g.create(this._eventBus,e.epic).withInstrumentVersion(e.version).withDelayTime(e.delayTime)}.bind(this)),t)},C._handleLoadDefaults=function(e){this.loadDefaults(e)},C._toggleFeature=function(e,t){t?this._moduleLoader.init(e):this._moduleLoader.destroy(e)},C.setInstrument=function(e,t,n){var i;return v.startMeasurement(this._chartGuid,v.STAGE.INSTRUMENT),j.isEpic(e)||(this._eventBus.publish("tracker/chart",[{schema:A.ERROR,id:"charts-invalid-epic",message:"Attempted to set invalid epic: "+e+"."}]),e=null),"null"===e&&(e=null),i=g.create(this._eventBus,e).withInstrumentVersion(t).withDelayTime(n),this._settingsManager.loadSettings(e),this._chartModel.setInstrument(i),this},C.getResolutionWhenReady=function(e){this._settingsManager.hasSettings()?e(this._settingsManager.getResolutionSettings()):this._settingsManager.on(T.LAYOUT_SETTINGS_CHANGED,this._getResolutionOnSettingsLoaded.bind(this,e),this)},C._getResolutionOnSettingsLoaded=function(e){this._settingsManager.un(T.LAYOUT_SETTINGS_CHANGED,this),e(this._settingsManager.getResolutionSettings())},C.setResolutionWhenReady=function(e,t){this._settingsManager.hasSettings()?this._settingsManager.putResolutionSettings(e,t):this._settingsManager.on(T.LAYOUT_SETTINGS_CHANGED,this._setResolutionOnSettingsLoaded.bind(this,e,t),this)},C._setResolutionOnSettingsLoaded=function(e,t){this._settingsManager.un(T.LAYOUT_SETTINGS_CHANGED,this),this._settingsManager.putResolutionSettings(e,t)},C.setReferrer=f.delegate("_tracker","setReferrer"),C.setTheme=function(e){this._theme=e,this._settingsManager.updateTheme(e);for(var t in this._chartViews)this._chartViews[t].withTheme(e);return this},C.withDealingComponents=function(e){return this._moduleLoader.getModule("dealingCommon").withDealingComponents(e),this},C.updateDimensions=function(e){if(e)this._chartViews[e].updateDimensions();else for(e in this._chartViews)this._chartViews[e].updateDimensions();return this},C.getMenuOptions=function(){return this._moduleLoader.getModule("menuApi").getMenuOptions()},C._forwardToEventBus=function(e){this._eventBus.publish(e,n.slice(arguments,1))},Object.seal(C),Object.seal(t)})),define("module/core/js/config/comparisonconfig",["require","module/statistics/js/statistics","module/styles/js/styles","module/subviews/js/subviews"],(function(e){"use strict";var t=e("module/statistics/js/statistics"),n=e("module/styles/js/styles");return{flavour:"COMPARISON",view:{rightMargin:75},modules:{statistics:{type:t,onByDefault:!0},subViews:{type:e("module/subviews/js/subviews"),onByDefault:!0},styles:{type:n,onByDefault:!0}}}})),define("module/core/js/controller/chartcontroller",["require","module/core/js/controller/chartcontrollercore","module/core/js/util/class","module/core/js/config/comparisonconfig","module/core/js/util/functional","module/core/js/model/resolutionsenum","module/core/js/event/subscribable"],(function(e){"use strict";function t(e,n){this._chartControllerCore=i.create(e,n),this._chartControllerCore.on(i.INSTRUMENT_CHANGED,s.bubbler(t.INSTRUMENT_CHANGED),this),this._chartControllerCore.on(i.CHART_LOADED,s.bubbler(t.CHART_LOADED),this)}function n(e){return function(){var t=this._chartControllerCore[e].apply(this._chartControllerCore,arguments);return t===this._chartControllerCore?this:t}}var i=e("module/core/js/controller/chartcontrollercore"),o=e("module/core/js/util/class"),r=e("module/core/js/config/comparisonconfig"),s=e("module/core/js/util/functional"),a=e("module/core/js/model/resolutionsenum"),l=e("module/core/js/event/subscribable");o.extend(t,l),t.create=function(e,n){return new t(e,n)},t.CHART_LOADED="chartLoaded",t.INSTRUMENT_CHANGED="instrumentChanged";var u=t.prototype;return u.finishNonPersistentTasks=n("finishNonPersistentTasks"),u.getCapabilities=n("getCapabilities"),u.publishToChart=n("publishToChart"),u.setStyle=n("setStyle"),u.hideFeature=n("hideFeature"),u.showFeature=n("showFeature"),u.subscribeToChart=n("subscribeToChart"),u.unsubscribeFromChart=n("unsubscribeFromChart"),u.showChart=n("showChart"),u.hideChart=n("hideChart"),u.setInstrument=n("setInstrument"),u.setReferrer=n("setReferrer"),u.setTheme=n("setTheme"),u.withDealingComponents=n("withDealingComponents"),u.updateDimensions=n("updateDimensions"),u.loadDefaults=n("loadDefaults"),u.setContainerId=n("setContainerId"),u.getMenuOptions=n("getMenuOptions"),u.getResolutionWhenReady=n("getResolutionWhenReady"),u.setResolutionWhenReady=n("setResolutionWhenReady"),u.destroyChart=function(){return this._chartControllerCore.un(null,this),this._chartControllerCore.destroyChart(),this._chartControllerCore=null,this},u.compareMarkets=function(e){this._chartControllerCore.destroyChart(),this._chartControllerCore=i.create(r),this._chartControllerCore.on(i.INSTRUMENT_CHANGED,s.bubbler(t.INSTRUMENT_CHANGED),this),this._chartControllerCore.on(i.CHART_LOADED,s.bubbler(t.CHART_LOADED),this),this._chartControllerCore.showChart("chart","#chartView"),this._chartControllerCore.setPriceType("MID"),this._chartControllerCore.compareMarkets(e,a.values.THIRTY_MINUTES)},Object.seal(u),Object.seal(t)})),define("module/nadex-common/js/serviceclient/hierarchyclient",["require","module/core/js/serviceclient/baseserviceclient","module/core/js/util/class","module/core/js/util/string"],(function(e){"use strict";function t(e){t.superclass.constructor.apply(this,[e])}var n=e("module/core/js/serviceclient/baseserviceclient"),i=e("module/core/js/util/class"),o=e("module/core/js/util/string");i.extend(t,n),t.create=function(e){return new t(e)},t.GET_HIERARCHY_ENDPOINT="/iDeal/markets/hierarchy/underlyingdata/{id}";var r=t.prototype;return r.requestHierarchy=function(e,t,n){this.abortAll(),this._executeRequest({headers:{Accept:"application/json"},endpoint:this._getHierarchyEndpoint(e),success:this._handleSuccessfulCallback.bind(this,t,e),error:n,retry:!0})},r._getHierarchyEndpoint=function(e){return o.merge(t.GET_HIERARCHY_ENDPOINT,{id:e})},r._handleSuccessfulCallback=function(e,t,n,i){e(t,i.underlyingInfo.epic,i.underlyingInfo.instrumentType,i.marketList||[])},Object.seal(r),Object.seal(t)})),define("module/nadex-common/js/controller/nadexchartcontroller",["require","module/core/js/event/eventbus","module/nadex-common/js/serviceclient/hierarchyclient","streaming"],(function(e){"use strict";function t(e,t,o,r,s){this._apiSettingsManager=s,this._delegateClass=r,
this._binaryLadderConfig=e,this._bullSpreadsConfig=t,this._blankChartConfig=o,this._storedInitialCalls=[],this._eventBus=n.create(),this._hierarchyClient=i.create(this._eventBus)}var n=e("module/core/js/event/eventbus"),i=e("module/nadex-common/js/serviceclient/hierarchyclient"),o=e("streaming");t.create=function(e,n,i,o,r){return new t(e,n,i,o,r)},t._createProxyMethod=function(e){return function(){return this._delegate?this._delegate[e].apply(this._delegate,arguments):this._storedInitialCalls.push({methodName:e,arguments:arguments}),this}};var r=t.prototype;return r._apiSettingsManager=null,r._binaryLadderConfig=null,r._bullSpreadsConfig=null,r._blankChartConfig=null,r._chartConfig=null,r._currentInstrumentType=null,r._delegate=null,r._delegateClass=null,r._hierarchyClient=null,r._lightstreamerSubscription=null,r._storedInitialCalls=null,r.destroyChart=function(){this._storedInitialCalls=null,this._eventBus.destroy(),this._eventBus=null,this._stopListening(),this._delegate&&this._delegate.destroyChart()},r.hideChart=t._createProxyMethod("hideChart"),r.publishToChart=t._createProxyMethod("publishToChart"),r.setHierarchy=function(e){return this._hierarchyClient.requestHierarchy(e,this._handleHierarchyLoaded.bind(this),this._handleFailedRequest.bind(this)),this},r.setTheme=t._createProxyMethod("setTheme"),r.showChart=t._createProxyMethod("showChart"),r.subscribeToChart=t._createProxyMethod("subscribeToChart"),r.unsubscribeFromChart=t._createProxyMethod("unsubscribeFromChart"),r.updateDimensions=t._createProxyMethod("updateDimensions"),r.on=t._createProxyMethod("on"),r.un=t._createProxyMethod("un"),r._callProxiedMethods=function(){var e,t;for(t=0;t<this._storedInitialCalls.length;t++)e=this._storedInitialCalls[t],this._delegate[e.methodName].apply(this._delegate,e.arguments)},r._handleHierarchyLoaded=function(e,t,n,i){this._instantiateDelegateOfInstrumentType(n),this._delegate.publishToChart("chart/settings/apply"),this._delegate.publishToChart("nadex/hierarchy/loaded",e,i,n),this._delegate.setInstrument(t),this._stopListening(),this._startListening(e)},r._startListening=function(e){this._chartConfig.model.refreshStrikes&&(this._lightstreamerSubscription=o.subscribe("M___.MGE|HIER-"+e+"-JSON",["MSG"],"RAW",this._handleUpdateFromLightstreamer.bind(this)))},r._stopListening=function(){this._lightstreamerSubscription&&(this._lightstreamerSubscription.unsubscribe(),this._lightstreamerSubscription=null)},r._handleUpdateFromLightstreamer=function(e){var t=e.getValue("MSG"),n=t.substring(0,3),i=JSON.parse(t.substring(4,t.length));"SDM"==n&&("InstrumentDeletionMessage"===i.header.contentType?this._delegate.publishToChart("nadex/market/deleted",[i.body.epic]):this._delegate.publishToChart("nadex/market/refresh",i.body.persistInStrument))},r._handleFailedRequest=function(){this._instantiateDelegateOfInstrumentType("None"),this._delegate.publishToChart("chart/settings/apply"),this._delegate.setInstrument(null)},r._instantiateDelegateOfInstrumentType=function(e){this._currentInstrumentType&&this._currentInstrumentType!==e&&(this._delegate.destroyChart(),this._delegate=null),this._delegate||(this._chartConfig=this._getChartConfigForInstrumentType(e),this._delegate=this._delegateClass.create(this._chartConfig,this._apiSettingsManager),this._callProxiedMethods(),this._delegate.loadDefaults()),this._currentInstrumentType=e},r._getChartConfigForInstrumentType=function(e){switch(e){case"Binary":return this._binaryLadderConfig;case"Spread":return this._bullSpreadsConfig;case"None":return this._blankChartConfig;default:throw new Error("Unknown instrument type: "+e)}},Object.seal(r),Object.seal(t)})),define("flavour/nadex/desktop/analysis/js/api/nadexdesktopanalysisapi",["require","module/core/js/settings/apisettingsmanager","flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisbinaryladderconfig","flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisblankchartconfig","flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisbullspreadconfig","module/core/js/controller/chartcontroller","module/core/js/util/class","module/core/js/model/deviceinfo","module/nadex-common/js/controller/nadexchartcontroller","module/core/js/event/subscribable","module/core/js/enum/themesenum","module/core/js/model/userinfo","module/core/js/model/environmentinfo"],(function(e){"use strict";function t(e,t,s){this._controllers={},this._binaryLadderConfig=i,this._bullSpreadsConfig=r,this._blankChartConfig=o,this._apiSettingsManager=n.createFromConfigs([i,r,o]),this._initInfo(e,t,s)}var n=e("module/core/js/settings/apisettingsmanager"),i=e("flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisbinaryladderconfig"),o=e("flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisblankchartconfig"),r=e("flavour/nadex/desktop/analysis/js/config/nadexdesktopanalysisbullspreadconfig"),s=e("module/core/js/controller/chartcontroller"),a=e("module/core/js/util/class"),l=e("module/core/js/model/deviceinfo"),u=e("module/nadex-common/js/controller/nadexchartcontroller"),c=e("module/core/js/event/subscribable"),d=e("module/core/js/enum/themesenum"),h=e("module/core/js/model/userinfo"),p=e("module/core/js/model/environmentinfo");a.extend(t,c);var m=t.prototype;return t.create=function(e,n,i){return new t(e,n,i)},m._apiSettingsManager=null,m._controllers=null,m._theme=d.NADEX,m._binaryLadderConfig=null,m._bullSpreadsConfig=null,m._blankChartConfig=null,m._initInfo=function(e,t,n){this.setUserInfo(e),this._setDeviceInfo(t),this.setEnvironmentInfo(n)},m.setUserInfo=function(e){return h.getInstance().setAccountId(e.accountId).setWebSiteId(e.webSiteId).setWebSiteType(e.siteType).setSsoToken(e.ssoToken).setCstToken(e.cstToken).setLocale(e.locale),this},m._setDeviceInfo=function(e){l.getInstance().setDeviceInfo(e)},m.setEnvironmentInfo=function(e){var t=p.getInstance();e&&e.hasOwnProperty("origin")&&t.setOrigin(e.origin),e&&e.hasOwnProperty("dataAdaptor")&&t.setDataAdaptor(e.dataAdaptor)},m._checkChartExists=function(e){if(!this._controllers[e])throw new Error("There is no chart called "+e+". Use createChart to create it first.")},m.setTheme=function(e){this._theme=e;for(var t in this._controllers)this._controllers[t].setTheme(e);return this},m.createChart=function(e){if(this._controllers[e])throw new Error("There is already a chart called "+e);return this._controllers[e]=this._createChartController(this._binaryLadderConfig,this._bullSpreadsConfig,this._blankChartConfig),this},m._createChartController=function(e,t,n){return u.create(e,t,n,s,this._apiSettingsManager)},m.destroyChart=function(e){return this._checkChartExists(e),this._controllers[e].destroyChart(),delete this._controllers[e],this._apiSettingsManager.removeSettings(e),this},m.destroy=function(){t.superclass.destroy.call(this),Object.keys(this._controllers).forEach(this.destroyChart,this),this._apiSettingsManager.destroy(),this._apiSettingsManager=null},m.showChart=function(e,t,n){return this._checkChartExists(e),this._controllers[e].showChart(t,n).setTheme(this._theme),this},m.hideChart=function(e,t){return this._checkChartExists(e),this._controllers[e].hideChart(t),this},m.updateDimensions=function(e,t){return this._controllers[e]&&this._controllers[e].updateDimensions(t),this},m.setHierarchy=function(e,t){return this._checkChartExists(e),this._controllers[e].setHierarchy(t),this},m.setFullscreen=function(e,t){return this._checkChartExists(e),this._controllers[e].publishToChart("api/in/chart/fullscreen",t),this},m.addFeature=function(e,t){return this._checkChartExists(e),this._controllers[e].publishToChart("api/in/chart/toggleFeature/"+t,t,!0),this},m.removeFeature=function(e,t){return this._checkChartExists(e),this._controllers[e].publishToChart("api/in/chart/toggleFeature/"+t,t,!1),this},m.reportStats=function(e,t,n){return this._checkChartExists(e),this._controllers[e].publishToChart("statistics",t,n),this},m.openDeal=function(e,t,n,i,o,r){return this._checkChartExists(e),this._controllers[e].publishToChart("api/in/deal/open",t,n,i,o,r),this},m.reset=function(e){return this._checkChartExists(e),this._controllers[e].publishToChart("api/in/chart/reset"),this},m.subscribeToChart=function(e,t,n,i){this._controllers[e].subscribeToChart("api/out/"+t,n,i)},m.unsubscribeFromChart=function(e,t,n,i){this._controllers[e].unsubscribeFromChart("api/out/"+t,n,i)},Object.seal(m),Object.seal(t)})),define("flavour/nadex/desktop/underlying/js/config/nadexdesktopunderlyingconfig",["require","module/annotations/js/annotations","module/annotations/js/menu/annotationsmenu","module/annotations/js/menu/annotationsmenuview","module/menu-mobile/js/controller/mobilebottommenu","module/colour-customisation/js/colour-customisation","module/current-point/js/current-point","module/done-button/js/done-button","module/annotations/js/menu/editannotationsmenu","module/fullscreen-button/js/fullscreen-button","module/highlowstats/js/highlowstats","module/indicator-labels/js/indicator-labels","module/indicators/js/indicators","module/indicators/js/menu/indicatorsmenu","module/indicators/js/menu/indicatorsmenuview","module/menu-common/js/controller/layoutsmenu","module/menu-mobile/js/view/layoutsmenuview","module/market-name-label/js/market-name-label","module/menu-mobile/js/menu-mobile","module/main-menu/js/main-menu","module/overview/js/overview","module/menu-common/js/controller/pricetypemenu","module/menu-mobile/js/view/pricetypemenuview","module/resolution-label/js/resolution-label","module/resolutions/js/resolutions","module/resolutions/js/menu/resolutionsmenu","module/resolutions/js/menu/resolutionsmenuview","module/resizablestudyviews/js/resizablestudyviewsupport","module/statistics/js/statistics","module/styles/js/menu/mobilestylemenu","module/styles/js/menu/stylemenuview","module/styles/js/styles","module/subviews/js/subviews","module/tooltip-desktop/js/tooltip-desktop","module/menu-common/js/controller/visibilitymenu-desktop","module/menu-mobile/js/view/visibilitymenuview","module/core/js/model/visibledaterange"],(function(e){"use strict";var t=e("module/annotations/js/annotations"),n=e("module/annotations/js/menu/annotationsmenu"),i=e("module/annotations/js/menu/annotationsmenuview"),o=e("module/menu-mobile/js/controller/mobilebottommenu"),r=e("module/colour-customisation/js/colour-customisation"),s=e("module/current-point/js/current-point"),a=e("module/done-button/js/done-button"),l=e("module/annotations/js/menu/editannotationsmenu"),u=e("module/fullscreen-button/js/fullscreen-button"),c=e("module/highlowstats/js/highlowstats"),d=e("module/indicator-labels/js/indicator-labels"),h=e("module/indicators/js/indicators"),p=e("module/indicators/js/menu/indicatorsmenu"),m=e("module/indicators/js/menu/indicatorsmenuview"),f=e("module/menu-common/js/controller/layoutsmenu"),_=e("module/menu-mobile/js/view/layoutsmenuview"),g=e("module/market-name-label/js/market-name-label"),v=e("module/menu-mobile/js/menu-mobile"),y=e("module/main-menu/js/main-menu"),M=e("module/overview/js/overview"),b=e("module/menu-common/js/controller/pricetypemenu"),A=e("module/menu-mobile/js/view/pricetypemenuview"),T=e("module/resolution-label/js/resolution-label"),E=e("module/resolutions/js/resolutions"),w=e("module/resolutions/js/menu/resolutionsmenu"),O=e("module/resolutions/js/menu/resolutionsmenuview"),I=e("module/resizablestudyviews/js/resizablestudyviewsupport"),S=e("module/statistics/js/statistics"),j=e("module/styles/js/menu/mobilestylemenu"),C=e("module/styles/js/menu/stylemenuview"),D=e("module/styles/js/styles"),R=e("module/subviews/js/subviews"),L=e("module/tooltip-desktop/js/tooltip-desktop"),N=e("module/menu-common/js/controller/visibilitymenu-desktop"),k=e("module/menu-mobile/js/view/visibilitymenuview"),P=e("module/core/js/model/visibledaterange");return{flavour:"NADEX_DESKTOP_ANALYSIS_BLANK",model:{allowScrollingIntoFuture:!0,restrictDuration:P.RESTRICT_DURATION.SCREEN},view:{kinetic:!1,rightMargin:60,lastCandleToYAxisGap:32},modules:{statistics:{type:S,onByDefault:!0},subViews:{type:R,onByDefault:!0},marketNameLabel:{type:g,onByDefault:!0},resolutionLabel:{type:T,onByDefault:!0},currentPoint:{type:s,onByDefault:!0,options:{pointerWidth:60}},styles:{type:D,onByDefault:!0},resolutions:{type:E,onByDefault:!0},indicators:{type:h,onByDefault:!0,options:{exclude:["VOLUME","MFI"]}},highLowStats:{type:c,onByDefault:!0,options:{dailyStats:!0,visibleStats:!0}},fullscreenButton:{type:u},doneButton:{type:a},tooltip:{type:L,onByDefault:!0,options:{yAxisWidth:60}},indicatorLabels:{type:d,onByDefault:!0},colourCustomisation:{type:r,onByDefault:!0},overview:{type:M,onByDefault:!0,options:{height:40,marginLeft:16,marginRight:16},settingsOptions:{template:{isVisibleByDefault:!0}}},annotations:{type:t,onByDefault:!0,options:{editMenu:l}},resizableStudyView:{type:I,onByDefault:!0},menuApi:{type:v,onByDefault:!0},menu:{type:y,onByDefault:!0,options:{menu:{type:o,properties:{xAxisHeight:30},subMenus:[{type:w,view:O,isDefault:!0},{type:j,view:C},{type:p,view:m},{type:n,view:i},{type:f,view:_},{type:N,view:k},{type:b,view:A}]}}}}}})),define("flavour/nadex/desktop/underlying/js/api/nadexdesktopunderlyingapi",["require","module/core/js/settings/apisettingsmanager","flavour/nadex/desktop/underlying/js/config/nadexdesktopunderlyingconfig","module/core/js/controller/chartcontroller","module/core/js/util/class","module/core/js/model/deviceinfo","module/core/js/event/subscribable","module/core/js/enum/themesenum","module/core/js/model/userinfo","module/core/js/model/environmentinfo"],(function(e){"use strict";function t(e,t,o){this._controllers={},this._chartConfig=i,this._apiSettingsManager=n.create(i),this._initInfo(e,t,o)}var n=e("module/core/js/settings/apisettingsmanager"),i=e("flavour/nadex/desktop/underlying/js/config/nadexdesktopunderlyingconfig"),o=e("module/core/js/controller/chartcontroller"),r=e("module/core/js/util/class"),s=e("module/core/js/model/deviceinfo"),a=e("module/core/js/event/subscribable"),l=e("module/core/js/enum/themesenum"),u=e("module/core/js/model/userinfo"),c=e("module/core/js/model/environmentinfo");r.extend(t,a);var d=t.prototype;return t.create=function(e,n,i){return new t(e,n,i)},d._apiSettingsManager=null,d._controllers=null,d._theme=l.NADEX,d._chartConfig=null,d._initInfo=function(e,t,n){this.setUserInfo(e),this._setDeviceInfo(t),this.setEnvironmentInfo(n)},d.setUserInfo=function(e){return u.getInstance().setAccountId(e.accountId).setWebSiteId(e.webSiteId).setWebSiteType(e.siteType).setSsoToken(e.ssoToken).setCstToken(e.cstToken).setLocale(e.locale),this},d._setDeviceInfo=function(e){s.getInstance().setDeviceInfo(e)},d.setEnvironmentInfo=function(e){var t=c.getInstance();e&&e.hasOwnProperty("origin")&&t.setOrigin(e.origin),e&&e.hasOwnProperty("dataAdaptor")&&t.setDataAdaptor(e.dataAdaptor)},d._checkChartExists=function(e){if(!this._controllers[e])throw new Error("There is no chart called "+e+". Use createChart to create it first.")},d.setTheme=function(e){this._theme=e;for(var t in this._controllers)this._controllers[t].setTheme(e);return this},d.createChart=function(e){if(this._controllers[e])throw new Error("There is already a chart called "+e);return this._controllers[e]=this._createChartController(this._chartConfig).setContainerId(e),this},d._createChartController=function(e){return o.create(e,this._apiSettingsManager)},d.destroyChart=function(e){return this._checkChartExists(e),this._controllers[e].destroyChart(),delete this._controllers[e],this._apiSettingsManager.removeSettings(e),this},d.destroy=function(){t.superclass.destroy.call(this),Object.keys(this._controllers).forEach(this.destroyChart,this),this._apiSettingsManager.destroy(),this._apiSettingsManager=null},d.showChart=function(e,t,n){return this._checkChartExists(e),this._controllers[e].showChart(t,n).setTheme(this._theme),this},d.hideChart=function(e,t){return this._checkChartExists(e),this._controllers[e].hideChart(t),this},d.updateDimensions=function(e,t){return this._controllers[e]&&this._controllers[e].updateDimensions(t),this},d.setInstrument=function(e,t){return this._checkChartExists(e),this._controllers[e].setInstrument(t),this},d.addFeature=function(e,t){return this._checkChartExists(e),this._controllers[e].publishToChart("api/in/chart/toggleFeature/"+t,t,!0),this},d.removeFeature=function(e,t){return this._checkChartExists(e),this._controllers[e].publishToChart("api/in/chart/toggleFeature/"+t,t,!1),this},Object.seal(d),Object.seal(t)})),define("streamer",["require","streaming"],(function(e){"use strict";var t=e("streaming");return function(e,n,i,o){var r=t._getInstance();return r._getLsDomainFor=function(t){return e},r.configure("","clientName",n,!1,"","InVisionProvider","XST-"+i+"|CST-"+o),r.connect(),r}})),define("distribution/chartsNadexDesktopPlatform/main",["require","shared-dependencies","dependencies","text!package.json","flavour/nadex/desktop/analysis/js/api/nadexdesktopanalysisapi","flavour/nadex/desktop/underlying/js/api/nadexdesktopunderlyingapi","streamer"],(function(e){"use strict";var t=(e("shared-dependencies"),e("dependencies"),JSON.parse(e("text!package.json"))),n=e("flavour/nadex/desktop/analysis/js/api/nadexdesktopanalysisapi"),i=e("flavour/nadex/desktop/underlying/js/api/nadexdesktopunderlyingapi"),o=e("streamer");return{info:{version:t.version},NadexDesktopAnalysisApi:n,NadexDesktopUnderlyingApi:i,Streamer:o}})),require.config({paths:{"backbone-events":"node_modules/backbone-events-standalone/backbone-events-standalone",chai:"node_modules/chai/chai",sinon:"node_modules/sinon/pkg/sinon",lodash:"module/core/js/ext/lodash-amd",cucumber:"node_modules/cucumber/release/cucumber","tracking-sdk-validator":"node_modules/tracking-sdk-javascript/dist/tracking-sdk-validator",jquery:"node_modules/jquery/dist/jquery",bowser:"node_modules/bowser/bowser",text:"node_modules/requirejs-text/text",modernizr:"module/core/js/ext/modernizr-extended",moment:"node_modules/moment/moment","moment-timezone":"node_modules/moment-timezone/moment-timezone","wt-dealing-rest-jsclient":"node_modules/wt-dealing-rest-jsclient/wt-dealing-rest-jsclient-amd","wt-fe-ajax":"node_modules/wt-fe-ajax/wt-fe-ajax-amd","wt-fe-buz-business-stoplimit":"node_modules/wt-fe-buz-business-stoplimit/wt-fe-buz-business-stoplimit-amd","wt-fe-buz-utilities-url":"node_modules/wt-fe-buz-utilities-url/wt-fe-buz-utilities-url-amd","wt-fe-clientstreaming-nativestreaming":"node_modules/wt-fe-clientstreaming-nativestreaming/wt-fe-clientstreaming-nativestreaming-amd","wt-fe-clientstreaming-streaming":"node_modules/wt-fe-clientstreaming-streaming/wt-fe-clientstreaming-streaming-amd","wt-fe-nativeinterop":"node_modules/wt-fe-nativeinterop/wt-fe-nativeinterop-amd","wt-statistics-jsclient":"node_modules/wt-statistics-jsclient/wt-statistics-jsclient-amd","ig-menu":"node_modules/ig-menu/dist/ig-menu","ig-trading":"node_modules/ig-trading/dist/ig-trading","intl-polyfill":"node_modules/intl/dist/Intl",tracking:"node_modules/tracking-sdk-javascript/dist/tracking-sdk-javascript"},map:{"*":{streaming:"wt-fe-clientstreaming-streaming"}}}),require("distribution/chartsNadexDesktopPlatform/main")}));

